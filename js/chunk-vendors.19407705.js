(self["webpackChunkjeju_tour"]=self["webpackChunkjeju_tour"]||[]).push([[504],{4046:function(t,e,n){"use strict";n.d(e,{Am:function(){return D},FA:function(){return R},Fy:function(){return w},I9:function(){return U},Im:function(){return N},Ku:function(){return W},T9:function(){return m},Tj:function(){return p},Uj:function(){return l},XA:function(){return v},ZQ:function(){return _},bD:function(){return O},cY:function(){return y},eX:function(){return I},g:function(){return L},hp:function(){return Q},jZ:function(){return b},lT:function(){return S},lV:function(){return C},nr:function(){return B},sr:function(){return E},tD:function(){return G},u:function(){return c},yU:function(){return g},zW:function(){return T}});n(4114),n(4979);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const i=function(t){const e=[];let n=0;for(let i=0;i<t.length;i++){let r=t.charCodeAt(i);r<128?e[n++]=r:r<2048?(e[n++]=r>>6|192,e[n++]=63&r|128):55296===(64512&r)&&i+1<t.length&&56320===(64512&t.charCodeAt(i+1))?(r=65536+((1023&r)<<10)+(1023&t.charCodeAt(++i)),e[n++]=r>>18|240,e[n++]=r>>12&63|128,e[n++]=r>>6&63|128,e[n++]=63&r|128):(e[n++]=r>>12|224,e[n++]=r>>6&63|128,e[n++]=63&r|128)}return e},r=function(t){const e=[];let n=0,i=0;while(n<t.length){const r=t[n++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=t[n++];e[i++]=String.fromCharCode((31&r)<<6|63&s)}else if(r>239&&r<365){const s=t[n++],o=t[n++],a=t[n++],l=((7&r)<<18|(63&s)<<12|(63&o)<<6|63&a)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(1023&l))}else{const s=t[n++],o=t[n++];e[i++]=String.fromCharCode((15&r)<<12|(63&s)<<6|63&o)}}return e.join("")},s={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<t.length;r+=3){const e=t[r],s=r+1<t.length,o=s?t[r+1]:0,a=r+2<t.length,l=a?t[r+2]:0,c=e>>2,u=(3&e)<<4|o>>4;let h=(15&o)<<2|l>>6,A=63&l;a||(A=64,s||(h=64)),i.push(n[c],n[u],n[h],n[A])}return i.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):r(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<t.length;){const e=n[t.charAt(r++)],s=r<t.length,a=s?n[t.charAt(r)]:0;++r;const l=r<t.length,c=l?n[t.charAt(r)]:64;++r;const u=r<t.length,h=u?n[t.charAt(r)]:64;if(++r,null==e||null==a||null==c||null==h)throw new o;const A=e<<2|a>>4;if(i.push(A),64!==c){const t=a<<4&240|c>>2;if(i.push(t),64!==h){const t=c<<6&192|h;i.push(t)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(t){const e=i(t);return s.encodeByteArray(e,!0)},l=function(t){return a(t).replace(/\./g,"")},c=function(t){try{return s.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function u(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h=()=>u().__FIREBASE_DEFAULTS__,A=()=>{if("undefined"===typeof process)return;const t={NODE_ENV:"production",VUE_APP_API_BASE:"https://resplendent-gumdrop-5c0803.netlify.app",VUE_APP_FIREBASE_API_KEY:"AIzaSyCAoe5LjzjXaww6_XTBaxpGBtBPgTWcU-Y",VUE_APP_FIREBASE_APP_ID:"1:935848543566:web:dd3caa9389552e65f84a1f",VUE_APP_FIREBASE_AUTH_DOMAIN:"jeju-tour-6b6e9.firebaseapp.com",VUE_APP_FIREBASE_MEASUREMENT_ID:"G-1LQ63V3B7T",VUE_APP_FIREBASE_MESSAGING_SENDER_ID:"935848543566",VUE_APP_FIREBASE_PROJECT_ID:"jeju-tour-6b6e9",VUE_APP_FIREBASE_STORAGE_BUCKET:"jeju-tour-6b6e9.appspot.com",BASE_URL:"/"}.__FIREBASE_DEFAULTS__;return t?JSON.parse(t):void 0},d=()=>{if("undefined"===typeof document)return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const e=t&&c(t[1]);return e&&JSON.parse(e)},f=()=>{try{return h()||A()||d()}catch(t){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`)}},p=t=>{var e,n;return null===(n=null===(e=f())||void 0===e?void 0:e.emulatorHosts)||void 0===n?void 0:n[t]},g=t=>{const e=p(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(n+1),10);return"["===e[0]?[e.substring(1,n-1),i]:[e.substring(0,n),i]},m=()=>{var t;return null===(t=f())||void 0===t?void 0:t.config},v=t=>{var e;return null===(e=f())||void 0===e?void 0:e[`_${t}`]};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}wrapCallback(t){return(e,n)=>{e?this.reject(e):this.resolve(n),"function"===typeof t&&(this.promise.catch((()=>{})),1===t.length?t(e):t(e,n))}}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},i=e||"demo-project",r=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),a="";return[l(JSON.stringify(n)),l(JSON.stringify(o)),a].join(".")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _(){return"undefined"!==typeof navigator&&"string"===typeof navigator["userAgent"]?navigator["userAgent"]:""}function b(){return"undefined"!==typeof window&&!!(window["cordova"]||window["phonegap"]||window["PhoneGap"])&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(_())}function x(){var t;const e=null===(t=f())||void 0===t?void 0:t.forceEnvironment;if("node"===e)return!0;if("browser"===e)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(i){return!1}}function E(){const t="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof t&&void 0!==t.id}function C(){return"object"===typeof navigator&&"ReactNative"===navigator["product"]}function S(){const t=_();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function B(){return!x()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function T(){try{return"object"===typeof indexedDB}catch(t){return!1}}function I(){return new Promise(((t,e)=>{try{let n=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),n||self.indexedDB.deleteDatabase(i),t(!0)},r.onupgradeneeded=()=>{n=!1},r.onerror=()=>{var t;e((null===(t=r.error)||void 0===t?void 0:t.message)||"")}}catch(n){e(n)}}))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const F="FirebaseError";class L extends Error{constructor(t,e,n){super(e),this.code=t,this.customData=n,this.name=F,Object.setPrototypeOf(this,L.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,R.prototype.create)}}class R{constructor(t,e,n){this.service=t,this.serviceName=e,this.errors=n}create(t,...e){const n=e[0]||{},i=`${this.service}/${t}`,r=this.errors[t],s=r?M(r,n):"Error",o=`${this.serviceName}: ${s} (${i}).`,a=new L(i,o,n);return a}}function M(t,e){return t.replace(P,((t,n)=>{const i=e[n];return null!=i?String(i):`<${n}?>`}))}const P=/\{\$([^}]+)}/g;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function O(t,e){if(t===e)return!0;const n=Object.keys(t),i=Object.keys(e);for(const r of n){if(!i.includes(r))return!1;const n=t[r],s=e[r];if(k(n)&&k(s)){if(!O(n,s))return!1}else if(n!==s)return!1}for(const r of i)if(!n.includes(r))return!1;return!0}function k(t){return null!==t&&"object"===typeof t}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function D(t){const e=[];for(const[n,i]of Object.entries(t))Array.isArray(i)?i.forEach((t=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(t))})):e.push(encodeURIComponent(n)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function U(t){const e={},n=t.replace(/^\?/,"").split("&");return n.forEach((t=>{if(t){const[n,i]=t.split("=");e[decodeURIComponent(n)]=decodeURIComponent(i)}})),e}function Q(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e){const n=new H(t,e);return n.subscribe.bind(n)}class H{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((()=>{t(this)})).catch((t=>{this.error(t)}))}next(t){this.forEachObserver((e=>{e.next(t)}))}error(t){this.forEachObserver((e=>{e.error(t)})),this.close(t)}complete(){this.forEachObserver((t=>{t.complete()})),this.close()}subscribe(t,e,n){let i;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");i=V(t,["next","error","complete"])?t:{next:t,error:e,complete:n},void 0===i.next&&(i.next=j),void 0===i.error&&(i.error=j),void 0===i.complete&&(i.complete=j);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch(t){}})),this.observers.push(i),r}unsubscribeOne(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then((()=>{if(void 0!==this.observers&&void 0!==this.observers[t])try{e(this.observers[t])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}}))}close(t){this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((()=>{this.observers=void 0,this.onNoObservers=void 0})))}}function V(t,e){if("object"!==typeof t||null===t)return!1;for(const n of e)if(n in t&&"function"===typeof t[n])return!0;return!1}function j(){}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function W(t){return t&&t._delegate?t._delegate:t}},179:function(t,e,n){"use strict";n.d(e,{$q:function(){return d}});n(4114);function i(){return r().__VUE_DEVTOOLS_GLOBAL_HOOK__}function r(){return"undefined"!==typeof navigator&&"undefined"!==typeof window?window:"undefined"!==typeof globalThis?globalThis:{}}const s="function"===typeof Proxy,o="devtools-plugin:setup",a="plugin:settings:set";let l,c;function u(){var t;return void 0!==l||("undefined"!==typeof window&&window.performance?(l=!0,c=window.performance):"undefined"!==typeof globalThis&&(null===(t=globalThis.perf_hooks)||void 0===t?void 0:t.performance)?(l=!0,c=globalThis.perf_hooks.performance):l=!1),l}function h(){return u()?c.now():Date.now()}class A{constructor(t,e){this.target=null,this.targetQueue=[],this.onQueue=[],this.plugin=t,this.hook=e;const n={};if(t.settings)for(const o in t.settings){const e=t.settings[o];n[o]=e.defaultValue}const i=`__vue-devtools-plugin-settings__${t.id}`;let r=Object.assign({},n);try{const t=localStorage.getItem(i),e=JSON.parse(t);Object.assign(r,e)}catch(s){}this.fallbacks={getSettings(){return r},setSettings(t){try{localStorage.setItem(i,JSON.stringify(t))}catch(s){}r=t},now(){return h()}},e&&e.on(a,((t,e)=>{t===this.plugin.id&&this.fallbacks.setSettings(e)})),this.proxiedOn=new Proxy({},{get:(t,e)=>this.target?this.target.on[e]:(...t)=>{this.onQueue.push({method:e,args:t})}}),this.proxiedTarget=new Proxy({},{get:(t,e)=>this.target?this.target[e]:"on"===e?this.proxiedOn:Object.keys(this.fallbacks).includes(e)?(...t)=>(this.targetQueue.push({method:e,args:t,resolve:()=>{}}),this.fallbacks[e](...t)):(...t)=>new Promise((n=>{this.targetQueue.push({method:e,args:t,resolve:n})}))})}async setRealTarget(t){this.target=t;for(const e of this.onQueue)this.target.on[e.method](...e.args);for(const e of this.targetQueue)e.resolve(await this.target[e.method](...e.args))}}function d(t,e){const n=t,a=r(),l=i(),c=s&&n.enableEarlyProxy;if(!l||!a.__VUE_DEVTOOLS_PLUGIN_API_AVAILABLE__&&c){const t=c?new A(n,l):null,i=a.__VUE_DEVTOOLS_PLUGINS__=a.__VUE_DEVTOOLS_PLUGINS__||[];i.push({pluginDescriptor:n,setupFn:e,proxy:t}),t&&e(t.proxiedTarget)}else l.emit(o,t,e)}},144:function(t,e,n){"use strict";n.d(e,{BA:function(){return Ut},C4:function(){return y},EW:function(){return Ft},Gc:function(){return vt},IG:function(){return St},IJ:function(){return Nt},KR:function(){return Pt},Kh:function(){return mt},Pr:function(){return Gt},QW:function(){return Ht},R1:function(){return Dt},X2:function(){return h},bl:function(){return w},fE:function(){return xt},g8:function(){return _t},hZ:function(){return L},i9:function(){return Mt},jr:function(){return u},ju:function(){return Et},lW:function(){return Wt},o5:function(){return c},tB:function(){return yt},u4:function(){return F},uY:function(){return a},ux:function(){return Ct},yC:function(){return o}});n(4114);var i=n(4232);let r,s;class o{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=r,!t&&r&&(this.index=(r.scopes||(r.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const e=r;try{return r=this,t()}finally{r=e}}else 0}on(){r=this}off(){r=this.parent}stop(t){if(this._active){let e,n;for(e=0,n=this.effects.length;e<n;e++)this.effects[e].stop();for(e=0,n=this.cleanups.length;e<n;e++)this.cleanups[e]();if(this.scopes)for(e=0,n=this.scopes.length;e<n;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0,this._active=!1}}}function a(t){return new o(t)}function l(t,e=r){e&&e.active&&e.effects.push(t)}function c(){return r}function u(t){r&&r.cleanups.push(t)}class h{constructor(t,e,n,i){this.fn=t,this.trigger=e,this.scheduler=n,this.active=!0,this.deps=[],this._dirtyLevel=4,this._trackId=0,this._runnings=0,this._shouldSchedule=!1,this._depsLength=0,l(this,i)}get dirty(){if(2===this._dirtyLevel||3===this._dirtyLevel){this._dirtyLevel=1,y();for(let t=0;t<this._depsLength;t++){const e=this.deps[t];if(e.computed&&(A(e.computed),this._dirtyLevel>=4))break}1===this._dirtyLevel&&(this._dirtyLevel=0),w()}return this._dirtyLevel>=4}set dirty(t){this._dirtyLevel=t?4:0}run(){if(this._dirtyLevel=0,!this.active)return this.fn();let t=g,e=s;try{return g=!0,s=this,this._runnings++,d(this),this.fn()}finally{f(this),this._runnings--,s=e,g=t}}stop(){var t;this.active&&(d(this),f(this),null==(t=this.onStop)||t.call(this),this.active=!1)}}function A(t){return t.value}function d(t){t._trackId++,t._depsLength=0}function f(t){if(t.deps.length>t._depsLength){for(let e=t._depsLength;e<t.deps.length;e++)p(t.deps[e],t);t.deps.length=t._depsLength}}function p(t,e){const n=t.get(e);void 0!==n&&e._trackId!==n&&(t.delete(e),0===t.size&&t.cleanup())}let g=!0,m=0;const v=[];function y(){v.push(g),g=!1}function w(){const t=v.pop();g=void 0===t||t}function _(){m++}function b(){m--;while(!m&&E.length)E.shift()()}function x(t,e,n){if(e.get(t)!==t._trackId){e.set(t,t._trackId);const n=t.deps[t._depsLength];n!==e?(n&&p(n,t),t.deps[t._depsLength++]=e):t._depsLength++}}const E=[];function C(t,e,n){_();for(const i of t.keys()){let n;i._dirtyLevel<e&&(null!=n?n:n=t.get(i)===i._trackId)&&(i._shouldSchedule||(i._shouldSchedule=0===i._dirtyLevel),i._dirtyLevel=e),i._shouldSchedule&&(null!=n?n:n=t.get(i)===i._trackId)&&(i.trigger(),i._runnings&&!i.allowRecurse||2===i._dirtyLevel||(i._shouldSchedule=!1,i.scheduler&&E.push(i.scheduler)))}b()}const S=(t,e)=>{const n=new Map;return n.cleanup=t,n.computed=e,n},B=new WeakMap,T=Symbol(""),I=Symbol("");function F(t,e,n){if(g&&s){let e=B.get(t);e||B.set(t,e=new Map);let i=e.get(n);i||e.set(n,i=S((()=>e.delete(n)))),x(s,i,void 0)}}function L(t,e,n,r,s,o){const a=B.get(t);if(!a)return;let l=[];if("clear"===e)l=[...a.values()];else if("length"===n&&(0,i.cy)(t)){const t=Number(r);a.forEach(((e,n)=>{("length"===n||!(0,i.Bm)(n)&&n>=t)&&l.push(e)}))}else switch(void 0!==n&&l.push(a.get(n)),e){case"add":(0,i.cy)(t)?(0,i.yI)(n)&&l.push(a.get("length")):(l.push(a.get(T)),(0,i.CE)(t)&&l.push(a.get(I)));break;case"delete":(0,i.cy)(t)||(l.push(a.get(T)),(0,i.CE)(t)&&l.push(a.get(I)));break;case"set":(0,i.CE)(t)&&l.push(a.get(T));break}_();for(const i of l)i&&C(i,4,void 0);b()}function R(t,e){var n;return null==(n=B.get(t))?void 0:n.get(e)}const M=(0,i.pD)("__proto__,__v_isRef,__isVue"),P=new Set(Object.getOwnPropertyNames(Symbol).filter((t=>"arguments"!==t&&"caller"!==t)).map((t=>Symbol[t])).filter(i.Bm)),N=O();function O(){const t={};return["includes","indexOf","lastIndexOf"].forEach((e=>{t[e]=function(...t){const n=Ct(this);for(let e=0,r=this.length;e<r;e++)F(n,"get",e+"");const i=n[e](...t);return-1===i||!1===i?n[e](...t.map(Ct)):i}})),["push","pop","shift","unshift","splice"].forEach((e=>{t[e]=function(...t){y(),_();const n=Ct(this)[e].apply(this,t);return b(),w(),n}})),t}function k(t){const e=Ct(this);return F(e,"has",t),e.hasOwnProperty(t)}class D{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,n){const r=this._isReadonly,s=this._isShallow;if("__v_isReactive"===e)return!r;if("__v_isReadonly"===e)return r;if("__v_isShallow"===e)return s;if("__v_raw"===e)return n===(r?s?ft:dt:s?At:ht).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(n)?t:void 0;const o=(0,i.cy)(t);if(!r){if(o&&(0,i.$3)(N,e))return Reflect.get(N,e,n);if("hasOwnProperty"===e)return k}const a=Reflect.get(t,e,n);return((0,i.Bm)(e)?P.has(e):M(e))?a:(r||F(t,"get",e),s?a:Mt(a)?o&&(0,i.yI)(e)?a:a.value:(0,i.Gv)(a)?r?yt(a):mt(a):a)}}class U extends D{constructor(t=!1){super(!1,t)}set(t,e,n,r){let s=t[e];if(!this._isShallow){const e=bt(s);if(xt(n)||bt(n)||(s=Ct(s),n=Ct(n)),!(0,i.cy)(t)&&Mt(s)&&!Mt(n))return!e&&(s.value=n,!0)}const o=(0,i.cy)(t)&&(0,i.yI)(e)?Number(e)<t.length:(0,i.$3)(t,e),a=Reflect.set(t,e,n,r);return t===Ct(r)&&(o?(0,i.$H)(n,s)&&L(t,"set",e,n,s):L(t,"add",e,n)),a}deleteProperty(t,e){const n=(0,i.$3)(t,e),r=t[e],s=Reflect.deleteProperty(t,e);return s&&n&&L(t,"delete",e,void 0,r),s}has(t,e){const n=Reflect.has(t,e);return(0,i.Bm)(e)&&P.has(e)||F(t,"has",e),n}ownKeys(t){return F(t,"iterate",(0,i.cy)(t)?"length":T),Reflect.ownKeys(t)}}class Q extends D{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const G=new U,H=new Q,V=new U(!0),j=t=>t,W=t=>Reflect.getPrototypeOf(t);function z(t,e,n=!1,r=!1){t=t["__v_raw"];const s=Ct(t),o=Ct(e);n||((0,i.$H)(e,o)&&F(s,"get",e),F(s,"get",o));const{has:a}=W(s),l=r?j:n?Tt:Bt;return a.call(s,e)?l(t.get(e)):a.call(s,o)?l(t.get(o)):void(t!==s&&t.get(e))}function K(t,e=!1){const n=this["__v_raw"],r=Ct(n),s=Ct(t);return e||((0,i.$H)(t,s)&&F(r,"has",t),F(r,"has",s)),t===s?n.has(t):n.has(t)||n.has(s)}function q(t,e=!1){return t=t["__v_raw"],!e&&F(Ct(t),"iterate",T),Reflect.get(t,"size",t)}function $(t){t=Ct(t);const e=Ct(this),n=W(e),i=n.has.call(e,t);return i||(e.add(t),L(e,"add",t,t)),this}function X(t,e){e=Ct(e);const n=Ct(this),{has:r,get:s}=W(n);let o=r.call(n,t);o||(t=Ct(t),o=r.call(n,t));const a=s.call(n,t);return n.set(t,e),o?(0,i.$H)(e,a)&&L(n,"set",t,e,a):L(n,"add",t,e),this}function Y(t){const e=Ct(this),{has:n,get:i}=W(e);let r=n.call(e,t);r||(t=Ct(t),r=n.call(e,t));const s=i?i.call(e,t):void 0,o=e.delete(t);return r&&L(e,"delete",t,void 0,s),o}function Z(){const t=Ct(this),e=0!==t.size,n=void 0,i=t.clear();return e&&L(t,"clear",void 0,void 0,n),i}function J(t,e){return function(n,i){const r=this,s=r["__v_raw"],o=Ct(s),a=e?j:t?Tt:Bt;return!t&&F(o,"iterate",T),s.forEach(((t,e)=>n.call(i,a(t),a(e),r)))}}function tt(t,e,n){return function(...r){const s=this["__v_raw"],o=Ct(s),a=(0,i.CE)(o),l="entries"===t||t===Symbol.iterator&&a,c="keys"===t&&a,u=s[t](...r),h=n?j:e?Tt:Bt;return!e&&F(o,"iterate",c?I:T),{next(){const{value:t,done:e}=u.next();return e?{value:t,done:e}:{value:l?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}function et(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function nt(){const t={get(t){return z(this,t)},get size(){return q(this)},has:K,add:$,set:X,delete:Y,clear:Z,forEach:J(!1,!1)},e={get(t){return z(this,t,!1,!0)},get size(){return q(this)},has:K,add:$,set:X,delete:Y,clear:Z,forEach:J(!1,!0)},n={get(t){return z(this,t,!0)},get size(){return q(this,!0)},has(t){return K.call(this,t,!0)},add:et("add"),set:et("set"),delete:et("delete"),clear:et("clear"),forEach:J(!0,!1)},i={get(t){return z(this,t,!0,!0)},get size(){return q(this,!0)},has(t){return K.call(this,t,!0)},add:et("add"),set:et("set"),delete:et("delete"),clear:et("clear"),forEach:J(!0,!0)},r=["keys","values","entries",Symbol.iterator];return r.forEach((r=>{t[r]=tt(r,!1,!1),n[r]=tt(r,!0,!1),e[r]=tt(r,!1,!0),i[r]=tt(r,!0,!0)})),[t,n,e,i]}const[it,rt,st,ot]=nt();function at(t,e){const n=e?t?ot:st:t?rt:it;return(e,r,s)=>"__v_isReactive"===r?!t:"__v_isReadonly"===r?t:"__v_raw"===r?e:Reflect.get((0,i.$3)(n,r)&&r in e?n:e,r,s)}const lt={get:at(!1,!1)},ct={get:at(!1,!0)},ut={get:at(!0,!1)};const ht=new WeakMap,At=new WeakMap,dt=new WeakMap,ft=new WeakMap;function pt(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gt(t){return t["__v_skip"]||!Object.isExtensible(t)?0:pt((0,i.Zf)(t))}function mt(t){return bt(t)?t:wt(t,!1,G,lt,ht)}function vt(t){return wt(t,!1,V,ct,At)}function yt(t){return wt(t,!0,H,ut,dt)}function wt(t,e,n,r,s){if(!(0,i.Gv)(t))return t;if(t["__v_raw"]&&(!e||!t["__v_isReactive"]))return t;const o=s.get(t);if(o)return o;const a=gt(t);if(0===a)return t;const l=new Proxy(t,2===a?r:n);return s.set(t,l),l}function _t(t){return bt(t)?_t(t["__v_raw"]):!(!t||!t["__v_isReactive"])}function bt(t){return!(!t||!t["__v_isReadonly"])}function xt(t){return!(!t||!t["__v_isShallow"])}function Et(t){return _t(t)||bt(t)}function Ct(t){const e=t&&t["__v_raw"];return e?Ct(e):t}function St(t){return Object.isExtensible(t)&&(0,i.yQ)(t,"__v_skip",!0),t}const Bt=t=>(0,i.Gv)(t)?mt(t):t,Tt=t=>(0,i.Gv)(t)?yt(t):t;class It{constructor(t,e,n,i){this.getter=t,this._setter=e,this.dep=void 0,this.__v_isRef=!0,this["__v_isReadonly"]=!1,this.effect=new h((()=>t(this._value)),(()=>Rt(this,2===this.effect._dirtyLevel?2:3))),this.effect.computed=this,this.effect.active=this._cacheable=!i,this["__v_isReadonly"]=n}get value(){const t=Ct(this);return t._cacheable&&!t.effect.dirty||!(0,i.$H)(t._value,t._value=t.effect.run())||Rt(t,4),Lt(t),t.effect._dirtyLevel>=2&&Rt(t,2),t._value}set value(t){this._setter(t)}get _dirty(){return this.effect.dirty}set _dirty(t){this.effect.dirty=t}}function Ft(t,e,n=!1){let r,s;const o=(0,i.Tn)(t);o?(r=t,s=i.tE):(r=t.get,s=t.set);const a=new It(r,s,o||!s,n);return a}function Lt(t){var e;g&&s&&(t=Ct(t),x(s,null!=(e=t.dep)?e:t.dep=S((()=>t.dep=void 0),t instanceof It?t:void 0),void 0))}function Rt(t,e=4,n){t=Ct(t);const i=t.dep;i&&C(i,e,void 0)}function Mt(t){return!(!t||!0!==t.__v_isRef)}function Pt(t){return Ot(t,!1)}function Nt(t){return Ot(t,!0)}function Ot(t,e){return Mt(t)?t:new kt(t,e)}class kt{constructor(t,e){this.__v_isShallow=e,this.dep=void 0,this.__v_isRef=!0,this._rawValue=e?t:Ct(t),this._value=e?t:Bt(t)}get value(){return Lt(this),this._value}set value(t){const e=this.__v_isShallow||xt(t)||bt(t);t=e?t:Ct(t),(0,i.$H)(t,this._rawValue)&&(this._rawValue=t,this._value=e?t:Bt(t),Rt(this,4,t))}}function Dt(t){return Mt(t)?t.value:t}function Ut(t){return(0,i.Tn)(t)?t():Dt(t)}const Qt={get:(t,e,n)=>Dt(Reflect.get(t,e,n)),set:(t,e,n,i)=>{const r=t[e];return Mt(r)&&!Mt(n)?(r.value=n,!0):Reflect.set(t,e,n,i)}};function Gt(t){return _t(t)?t:new Proxy(t,Qt)}function Ht(t){const e=(0,i.cy)(t)?new Array(t.length):{};for(const n in t)e[n]=zt(t,n);return e}class Vt{constructor(t,e,n){this._object=t,this._key=e,this._defaultValue=n,this.__v_isRef=!0}get value(){const t=this._object[this._key];return void 0===t?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return R(Ct(this._object),this._key)}}class jt{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0}get value(){return this._getter()}}function Wt(t,e,n){return Mt(t)?t:(0,i.Tn)(t)?new jt(t):(0,i.Gv)(t)&&arguments.length>1?zt(t,e,n):Pt(t)}function zt(t,e,n){const i=t[e];return Mt(i)?i:new Vt(t,e,n)}},6768:function(t,e,n){"use strict";n.d(e,{$u:function(){return kt},$y:function(){return K},CE:function(){return yn},Df:function(){return _t},EW:function(){return oi},FK:function(){return ln},Gt:function(){return be},Gy:function(){return ht},HF:function(){return ne},Ht:function(){return Zt},Im:function(){return on},K9:function(){return Ve},Lk:function(){return Sn},MZ:function(){return wt},Mw:function(){return un},Ng:function(){return In},OA:function(){return Jt},OW:function(){return mt},Q3:function(){return Rn},QP:function(){return dt},Qi:function(){return N},RG:function(){return zt},WQ:function(){return xe},Wv:function(){return wn},bF:function(){return Bn},bo:function(){return at},dY:function(){return v},eW:function(){return Ln},eX:function(){return Wt},g2:function(){return W},h:function(){return ai},hi:function(){return Ut},jt:function(){return O},k6:function(){return k},n:function(){return St},nI:function(){return Hn},nT:function(){return tt},pI:function(){return jt},pM:function(){return bt},pR:function(){return pt},qL:function(){return o},sV:function(){return Nt},uX:function(){return fn},v6:function(){return On},wB:function(){return nt},xo:function(){return Dt}});n(4114);var i=n(144),r=n(4232);function s(t,e,n,i){try{return i?t(...i):t()}catch(r){a(r,e,n)}}function o(t,e,n,i){if((0,r.Tn)(t)){const o=s(t,e,n,i);return o&&(0,r.yL)(o)&&o.catch((t=>{a(t,e,n)})),o}const l=[];for(let r=0;r<t.length;r++)l.push(o(t[r],e,n,i));return l}function a(t,e,n,i=!0){const r=e?e.vnode:null;if(e){let i=e.parent;const r=e.proxy,o=`https://vuejs.org/error-reference/#runtime-${n}`;while(i){const e=i.ec;if(e)for(let n=0;n<e.length;n++)if(!1===e[n](t,r,o))return;i=i.parent}const a=e.appContext.config.errorHandler;if(a)return void s(a,null,10,[t,r,o])}l(t,n,r,i)}function l(t,e,n,i=!0){console.error(t)}let c=!1,u=!1;const h=[];let A=0;const d=[];let f=null,p=0;const g=Promise.resolve();let m=null;function v(t){const e=m||g;return t?e.then(this?t.bind(this):t):e}function y(t){let e=A+1,n=h.length;while(e<n){const i=e+n>>>1,r=h[i],s=S(r);s<t||s===t&&r.pre?e=i+1:n=i}return e}function w(t){h.length&&h.includes(t,c&&t.allowRecurse?A+1:A)||(null==t.id?h.push(t):h.splice(y(t.id),0,t),_())}function _(){c||u||(u=!0,m=g.then(T))}function b(t){const e=h.indexOf(t);e>A&&h.splice(e,1)}function x(t){(0,r.cy)(t)?d.push(...t):f&&f.includes(t,t.allowRecurse?p+1:p)||d.push(t),_()}function E(t,e,n=(c?A+1:0)){for(0;n<h.length;n++){const e=h[n];if(e&&e.pre){if(t&&e.id!==t.uid)continue;0,h.splice(n,1),n--,e()}}}function C(t){if(d.length){const t=[...new Set(d)].sort(((t,e)=>S(t)-S(e)));if(d.length=0,f)return void f.push(...t);for(f=t,p=0;p<f.length;p++)f[p]();f=null,p=0}}const S=t=>null==t.id?1/0:t.id,B=(t,e)=>{const n=S(t)-S(e);if(0===n){if(t.pre&&!e.pre)return-1;if(e.pre&&!t.pre)return 1}return n};function T(t){u=!1,c=!0,h.sort(B);r.tE;try{for(A=0;A<h.length;A++){const t=h[A];t&&!1!==t.active&&s(t,null,14)}}finally{A=0,h.length=0,C(t),c=!1,m=null,(h.length||d.length)&&T(t)}}function I(t,e,...n){if(t.isUnmounted)return;const i=t.vnode.props||r.MZ;let s=n;const a=e.startsWith("update:"),l=a&&e.slice(7);if(l&&l in i){const t=`${"modelValue"===l?"model":l}Modifiers`,{number:e,trim:o}=i[t]||r.MZ;o&&(s=n.map((t=>(0,r.Kg)(t)?t.trim():t))),e&&(s=n.map(r.bB))}let c;let u=i[c=(0,r.rU)(e)]||i[c=(0,r.rU)((0,r.PT)(e))];!u&&a&&(u=i[c=(0,r.rU)((0,r.Tg)(e))]),u&&o(u,t,6,s);const h=i[c+"Once"];if(h){if(t.emitted){if(t.emitted[c])return}else t.emitted={};t.emitted[c]=!0,o(h,t,6,s)}}function F(t,e,n=!1){const i=e.emitsCache,s=i.get(t);if(void 0!==s)return s;const o=t.emits;let a={},l=!1;if(!(0,r.Tn)(t)){const i=t=>{const n=F(t,e,!0);n&&(l=!0,(0,r.X$)(a,n))};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}return o||l?((0,r.cy)(o)?o.forEach((t=>a[t]=null)):(0,r.X$)(a,o),(0,r.Gv)(t)&&i.set(t,a),a):((0,r.Gv)(t)&&i.set(t,null),null)}function L(t,e){return!(!t||!(0,r.Mp)(e))&&(e=e.slice(2).replace(/Once$/,""),(0,r.$3)(t,e[0].toLowerCase()+e.slice(1))||(0,r.$3)(t,(0,r.Tg)(e))||(0,r.$3)(t,e))}let R=null,M=null;function P(t){const e=R;return R=t,M=t&&t.type.__scopeId||null,e}function N(t){M=t}function O(){M=null}function k(t,e=R,n){if(!e)return t;if(t._n)return t;const i=(...n)=>{i._d&&mn(-1);const r=P(e);let s;try{s=t(...n)}finally{P(r),i._d&&mn(1)}return s};return i._n=!0,i._c=!0,i._d=!0,i}function D(t){const{type:e,vnode:n,proxy:i,withProxy:s,props:o,propsOptions:[l],slots:c,attrs:u,emit:h,render:A,renderCache:d,data:f,setupState:p,ctx:g,inheritAttrs:m}=t;let v,y;const w=P(t);try{if(4&n.shapeFlag){const t=s||i,e=t;v=Mn(A.call(e,t,d,o,p,f,g)),y=u}else{const t=e;0,v=Mn(t.length>1?t(o,{attrs:u,slots:c,emit:h}):t(o,null)),y=e.props?u:U(u)}}catch(b){An.length=0,a(b,t,1),v=Bn(un)}let _=v;if(y&&!1!==m){const t=Object.keys(y),{shapeFlag:e}=_;t.length&&7&e&&(l&&t.some(r.CP)&&(y=Q(y,l)),_=Fn(_,y))}return n.dirs&&(_=Fn(_),_.dirs=_.dirs?_.dirs.concat(n.dirs):n.dirs),n.transition&&(_.transition=n.transition),v=_,P(w),v}const U=t=>{let e;for(const n in t)("class"===n||"style"===n||(0,r.Mp)(n))&&((e||(e={}))[n]=t[n]);return e},Q=(t,e)=>{const n={};for(const i in t)(0,r.CP)(i)&&i.slice(9)in e||(n[i]=t[i]);return n};function G(t,e,n){const{props:i,children:r,component:s}=t,{props:o,children:a,patchFlag:l}=e,c=s.emitsOptions;if(e.dirs||e.transition)return!0;if(!(n&&l>=0))return!(!r&&!a||a&&a.$stable)||i!==o&&(i?!o||H(i,o,c):!!o);if(1024&l)return!0;if(16&l)return i?H(i,o,c):!!o;if(8&l){const t=e.dynamicProps;for(let e=0;e<t.length;e++){const n=t[e];if(o[n]!==i[n]&&!L(c,n))return!0}}return!1}function H(t,e,n){const i=Object.keys(e);if(i.length!==Object.keys(t).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(e[s]!==t[s]&&!L(n,s))return!0}return!1}function V({vnode:t,parent:e},n){while(e){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===t&&(i.el=t.el),i!==t)break;(t=e.vnode).el=n,e=e.parent}}const j="components";function W(t,e){return q(j,t,!0,e)||t}const z=Symbol.for("v-ndc");function K(t){return(0,r.Kg)(t)?q(j,t,!1)||t:t||z}function q(t,e,n=!0,i=!1){const s=R||Gn;if(s){const n=s.type;if(t===j){const t=ri(n,!1);if(t&&(t===e||t===(0,r.PT)(e)||t===(0,r.ZH)((0,r.PT)(e))))return n}const o=$(s[t]||n[t],e)||$(s.appContext[t],e);return!o&&i?n:o}}function $(t,e){return t&&(t[e]||t[(0,r.PT)(e)]||t[(0,r.ZH)((0,r.PT)(e))])}const X=t=>t.__isSuspense;function Y(t,e){e&&e.pendingBranch?(0,r.cy)(t)?e.effects.push(...t):e.effects.push(t):x(t)}const Z=Symbol.for("v-scx"),J=()=>{{const t=xe(Z);return t}};function tt(t,e){return it(t,null,e)}const et={};function nt(t,e,n){return it(t,e,n)}function it(t,e,{immediate:n,deep:a,flush:l,once:c,onTrack:u,onTrigger:h}=r.MZ){if(e&&c){const t=e;e=(...e)=>{t(...e),S()}}const A=Gn,d=t=>!0===a?t:ot(t,!1===a?1:void 0);let f,p,g=!1,m=!1;if((0,i.i9)(t)?(f=()=>t.value,g=(0,i.fE)(t)):(0,i.g8)(t)?(f=()=>d(t),g=!0):(0,r.cy)(t)?(m=!0,g=t.some((t=>(0,i.g8)(t)||(0,i.fE)(t))),f=()=>t.map((t=>(0,i.i9)(t)?t.value:(0,i.g8)(t)?d(t):(0,r.Tn)(t)?s(t,A,2):void 0))):f=(0,r.Tn)(t)?e?()=>s(t,A,2):()=>(p&&p(),o(t,A,3,[y])):r.tE,e&&a){const t=f;f=()=>ot(t())}let v,y=t=>{p=E.onStop=()=>{s(t,A,4),p=E.onStop=void 0}};if(Xn){if(y=r.tE,e?n&&o(e,A,3,[f(),m?[]:void 0,y]):f(),"sync"!==l)return r.tE;{const t=J();v=t.__watcherHandles||(t.__watcherHandles=[])}}let _=m?new Array(t.length).fill(et):et;const b=()=>{if(E.active&&E.dirty)if(e){const t=E.run();(a||g||(m?t.some(((t,e)=>(0,r.$H)(t,_[e]))):(0,r.$H)(t,_)))&&(p&&p(),o(e,A,3,[t,_===et?void 0:m&&_[0]===et?[]:_,y]),_=t)}else E.run()};let x;b.allowRecurse=!!e,"sync"===l?x=b:"post"===l?x=()=>He(b,A&&A.suspense):(b.pre=!0,A&&(b.id=A.uid),x=()=>w(b));const E=new i.X2(f,r.tE,x),C=(0,i.o5)(),S=()=>{E.stop(),C&&(0,r.TF)(C.effects,E)};return e?n?b():_=E.run():"post"===l?He(E.run.bind(E),A&&A.suspense):E.run(),v&&v.push(S),S}function rt(t,e,n){const i=this.proxy,s=(0,r.Kg)(t)?t.includes(".")?st(i,t):()=>i[t]:t.bind(i,i);let o;(0,r.Tn)(e)?o=e:(o=e.handler,n=e);const a=Wn(this),l=it(s,o.bind(i),n);return a(),l}function st(t,e){const n=e.split(".");return()=>{let e=t;for(let t=0;t<n.length&&e;t++)e=e[n[t]];return e}}function ot(t,e,n=0,s){if(!(0,r.Gv)(t)||t["__v_skip"])return t;if(e&&e>0){if(n>=e)return t;n++}if(s=s||new Set,s.has(t))return t;if(s.add(t),(0,i.i9)(t))ot(t.value,e,n,s);else if((0,r.cy)(t))for(let i=0;i<t.length;i++)ot(t[i],e,n,s);else if((0,r.vM)(t)||(0,r.CE)(t))t.forEach((t=>{ot(t,e,n,s)}));else if((0,r.Qd)(t))for(const i in t)ot(t[i],e,n,s);return t}function at(t,e){if(null===R)return t;const n=ii(R)||R.proxy,i=t.dirs||(t.dirs=[]);for(let s=0;s<e.length;s++){let[t,o,a,l=r.MZ]=e[s];t&&((0,r.Tn)(t)&&(t={mounted:t,updated:t}),t.deep&&ot(o),i.push({dir:t,instance:n,value:o,oldValue:void 0,arg:a,modifiers:l}))}return t}function lt(t,e,n,r){const s=t.dirs,a=e&&e.dirs;for(let l=0;l<s.length;l++){const c=s[l];a&&(c.oldValue=a[l].value);let u=c.dir[r];u&&((0,i.C4)(),o(u,n,8,[t.el,c,t,e]),(0,i.bl)())}}const ct=Symbol("_leaveCb"),ut=Symbol("_enterCb");function ht(){const t={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return Nt((()=>{t.isMounted=!0})),Dt((()=>{t.isUnmounting=!0})),t}const At=[Function,Array],dt={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:At,onEnter:At,onAfterEnter:At,onEnterCancelled:At,onBeforeLeave:At,onLeave:At,onAfterLeave:At,onLeaveCancelled:At,onBeforeAppear:At,onAppear:At,onAfterAppear:At,onAppearCancelled:At},ft={name:"BaseTransition",props:dt,setup(t,{slots:e}){const n=Hn(),r=ht();return()=>{const s=e.default&&_t(e.default(),!0);if(!s||!s.length)return;let o=s[0];if(s.length>1){let t=!1;for(const e of s)if(e.type!==un){0,o=e,t=!0;break}}const a=(0,i.ux)(t),{mode:l}=a;if(r.isLeaving)return vt(o);const c=yt(o);if(!c)return vt(o);const u=mt(c,a,r,n);wt(c,u);const h=n.subTree,A=h&&yt(h);if(A&&A.type!==un&&!bn(c,A)){const t=mt(A,a,r,n);if(wt(A,t),"out-in"===l)return r.isLeaving=!0,t.afterLeave=()=>{r.isLeaving=!1,!1!==n.update.active&&(n.effect.dirty=!0,n.update())},vt(o);"in-out"===l&&c.type!==un&&(t.delayLeave=(t,e,n)=>{const i=gt(r,A);i[String(A.key)]=A,t[ct]=()=>{e(),t[ct]=void 0,delete u.delayedLeave},u.delayedLeave=n})}return o}}},pt=ft;function gt(t,e){const{leavingVNodes:n}=t;let i=n.get(e.type);return i||(i=Object.create(null),n.set(e.type,i)),i}function mt(t,e,n,i){const{appear:s,mode:a,persisted:l=!1,onBeforeEnter:c,onEnter:u,onAfterEnter:h,onEnterCancelled:A,onBeforeLeave:d,onLeave:f,onAfterLeave:p,onLeaveCancelled:g,onBeforeAppear:m,onAppear:v,onAfterAppear:y,onAppearCancelled:w}=e,_=String(t.key),b=gt(n,t),x=(t,e)=>{t&&o(t,i,9,e)},E=(t,e)=>{const n=e[1];x(t,e),(0,r.cy)(t)?t.every((t=>t.length<=1))&&n():t.length<=1&&n()},C={mode:a,persisted:l,beforeEnter(e){let i=c;if(!n.isMounted){if(!s)return;i=m||c}e[ct]&&e[ct](!0);const r=b[_];r&&bn(t,r)&&r.el[ct]&&r.el[ct](),x(i,[e])},enter(t){let e=u,i=h,r=A;if(!n.isMounted){if(!s)return;e=v||u,i=y||h,r=w||A}let o=!1;const a=t[ut]=e=>{o||(o=!0,x(e?r:i,[t]),C.delayedLeave&&C.delayedLeave(),t[ut]=void 0)};e?E(e,[t,a]):a()},leave(e,i){const r=String(t.key);if(e[ut]&&e[ut](!0),n.isUnmounting)return i();x(d,[e]);let s=!1;const o=e[ct]=n=>{s||(s=!0,i(),x(n?g:p,[e]),e[ct]=void 0,b[r]===t&&delete b[r])};b[r]=t,f?E(f,[e,o]):o()},clone(t){return mt(t,e,n,i)}};return C}function vt(t){if(Et(t))return t=Fn(t),t.children=null,t}function yt(t){return Et(t)?t.children?t.children[0]:void 0:t}function wt(t,e){6&t.shapeFlag&&t.component?wt(t.component.subTree,e):128&t.shapeFlag?(t.ssContent.transition=e.clone(t.ssContent),t.ssFallback.transition=e.clone(t.ssFallback)):t.transition=e}function _t(t,e=!1,n){let i=[],r=0;for(let s=0;s<t.length;s++){let o=t[s];const a=null==n?o.key:String(n)+String(null!=o.key?o.key:s);o.type===ln?(128&o.patchFlag&&r++,i=i.concat(_t(o.children,e,a))):(e||o.type!==un)&&i.push(null!=a?Fn(o,{key:a}):o)}if(r>1)for(let s=0;s<i.length;s++)i[s].patchFlag=-2;return i}
/*! #__NO_SIDE_EFFECTS__ */function bt(t,e){return(0,r.Tn)(t)?(()=>(0,r.X$)({name:t.name},e,{setup:t}))():t}const xt=t=>!!t.type.__asyncLoader
/*! #__NO_SIDE_EFFECTS__ */;const Et=t=>t.type.__isKeepAlive;RegExp,RegExp;function Ct(t,e){return(0,r.cy)(t)?t.some((t=>Ct(t,e))):(0,r.Kg)(t)?t.split(",").includes(e):!!(0,r.gd)(t)&&t.test(e)}function St(t,e){Tt(t,"a",e)}function Bt(t,e){Tt(t,"da",e)}function Tt(t,e,n=Gn){const i=t.__wdc||(t.__wdc=()=>{let e=n;while(e){if(e.isDeactivated)return;e=e.parent}return t()});if(Rt(e,i,n),n){let t=n.parent;while(t&&t.parent)Et(t.parent.vnode)&&It(i,e,n,t),t=t.parent}}function It(t,e,n,i){const s=Rt(e,t,i,!0);Ut((()=>{(0,r.TF)(i[e],s)}),n)}function Ft(t){t.shapeFlag&=-257,t.shapeFlag&=-513}function Lt(t){return 128&t.shapeFlag?t.ssContent:t}function Rt(t,e,n=Gn,r=!1){if(n){const s=n[t]||(n[t]=[]),a=e.__weh||(e.__weh=(...r)=>{if(n.isUnmounted)return;(0,i.C4)();const s=Wn(n),a=o(e,n,t,r);return s(),(0,i.bl)(),a});return r?s.unshift(a):s.push(a),a}}const Mt=t=>(e,n=Gn)=>(!Xn||"sp"===t)&&Rt(t,((...t)=>e(...t)),n),Pt=Mt("bm"),Nt=Mt("m"),Ot=Mt("bu"),kt=Mt("u"),Dt=Mt("bum"),Ut=Mt("um"),Qt=Mt("sp"),Gt=Mt("rtg"),Ht=Mt("rtc");function Vt(t,e=Gn){Rt("ec",t,e)}function jt(t,e,n,i){let s;const o=n&&n[i];if((0,r.cy)(t)||(0,r.Kg)(t)){s=new Array(t.length);for(let n=0,i=t.length;n<i;n++)s[n]=e(t[n],n,void 0,o&&o[n])}else if("number"===typeof t){0,s=new Array(t);for(let n=0;n<t;n++)s[n]=e(n+1,n,void 0,o&&o[n])}else if((0,r.Gv)(t))if(t[Symbol.iterator])s=Array.from(t,((t,n)=>e(t,n,void 0,o&&o[n])));else{const n=Object.keys(t);s=new Array(n.length);for(let i=0,r=n.length;i<r;i++){const r=n[i];s[i]=e(t[r],r,i,o&&o[i])}}else s=[];return n&&(n[i]=s),s}function Wt(t,e){for(let n=0;n<e.length;n++){const i=e[n];if((0,r.cy)(i))for(let e=0;e<i.length;e++)t[i[e].name]=i[e].fn;else i&&(t[i.name]=i.key?(...t)=>{const e=i.fn(...t);return e&&(e.key=i.key),e}:i.fn)}return t}function zt(t,e,n={},i,r){if(R.isCE||R.parent&&xt(R.parent)&&R.parent.isCE)return"default"!==e&&(n.name=e),Bn("slot",n,i&&i());let s=t[e];s&&s._c&&(s._d=!1),fn();const o=s&&Kt(s(n)),a=wn(ln,{key:n.key||o&&o.key||`_${e}`},o||(i?i():[]),o&&1===t._?64:-2);return!r&&a.scopeId&&(a.slotScopeIds=[a.scopeId+"-s"]),s&&s._c&&(s._d=!0),a}function Kt(t){return t.some((t=>!_n(t)||t.type!==un&&!(t.type===ln&&!Kt(t.children))))?t:null}const qt=t=>t?Kn(t)?ii(t)||t.proxy:qt(t.parent):null,$t=(0,r.X$)(Object.create(null),{$:t=>t,$el:t=>t.vnode.el,$data:t=>t.data,$props:t=>t.props,$attrs:t=>t.attrs,$slots:t=>t.slots,$refs:t=>t.refs,$parent:t=>qt(t.parent),$root:t=>qt(t.root),$emit:t=>t.emit,$options:t=>le(t),$forceUpdate:t=>t.f||(t.f=()=>{t.effect.dirty=!0,w(t.update)}),$nextTick:t=>t.n||(t.n=v.bind(t.proxy)),$watch:t=>rt.bind(t)}),Xt=(t,e)=>t!==r.MZ&&!t.__isScriptSetup&&(0,r.$3)(t,e),Yt={get({_:t},e){const{ctx:n,setupState:s,data:o,props:a,accessCache:l,type:c,appContext:u}=t;let h;if("$"!==e[0]){const i=l[e];if(void 0!==i)switch(i){case 1:return s[e];case 2:return o[e];case 4:return n[e];case 3:return a[e]}else{if(Xt(s,e))return l[e]=1,s[e];if(o!==r.MZ&&(0,r.$3)(o,e))return l[e]=2,o[e];if((h=t.propsOptions[0])&&(0,r.$3)(h,e))return l[e]=3,a[e];if(n!==r.MZ&&(0,r.$3)(n,e))return l[e]=4,n[e];ie&&(l[e]=0)}}const A=$t[e];let d,f;return A?("$attrs"===e&&(0,i.u4)(t,"get",e),A(t)):(d=c.__cssModules)&&(d=d[e])?d:n!==r.MZ&&(0,r.$3)(n,e)?(l[e]=4,n[e]):(f=u.config.globalProperties,(0,r.$3)(f,e)?f[e]:void 0)},set({_:t},e,n){const{data:i,setupState:s,ctx:o}=t;return Xt(s,e)?(s[e]=n,!0):i!==r.MZ&&(0,r.$3)(i,e)?(i[e]=n,!0):!(0,r.$3)(t.props,e)&&(("$"!==e[0]||!(e.slice(1)in t))&&(o[e]=n,!0))},has({_:{data:t,setupState:e,accessCache:n,ctx:i,appContext:s,propsOptions:o}},a){let l;return!!n[a]||t!==r.MZ&&(0,r.$3)(t,a)||Xt(e,a)||(l=o[0])&&(0,r.$3)(l,a)||(0,r.$3)(i,a)||(0,r.$3)($t,a)||(0,r.$3)(s.config.globalProperties,a)},defineProperty(t,e,n){return null!=n.get?t._.accessCache[e]=0:(0,r.$3)(n,"value")&&this.set(t,e,n.value,null),Reflect.defineProperty(t,e,n)}};function Zt(){return te().slots}function Jt(){return te().attrs}function te(){const t=Hn();return t.setupContext||(t.setupContext=ni(t))}function ee(t){return(0,r.cy)(t)?t.reduce(((t,e)=>(t[e]=null,t)),{}):t}function ne(t,e){const n=ee(t);for(const i in e){if(i.startsWith("__skip"))continue;let t=n[i];t?(0,r.cy)(t)||(0,r.Tn)(t)?t=n[i]={type:t,default:e[i]}:t.default=e[i]:null===t&&(t=n[i]={default:e[i]}),t&&e[`__skip_${i}`]&&(t.skipFactory=!0)}return n}let ie=!0;function re(t){const e=le(t),n=t.proxy,s=t.ctx;ie=!1,e.beforeCreate&&oe(e.beforeCreate,t,"bc");const{data:o,computed:a,methods:l,watch:c,provide:u,inject:h,created:A,beforeMount:d,mounted:f,beforeUpdate:p,updated:g,activated:m,deactivated:v,beforeDestroy:y,beforeUnmount:w,destroyed:_,unmounted:b,render:x,renderTracked:E,renderTriggered:C,errorCaptured:S,serverPrefetch:B,expose:T,inheritAttrs:I,components:F,directives:L,filters:R}=e,M=null;if(h&&se(h,s,M),l)for(const i in l){const t=l[i];(0,r.Tn)(t)&&(s[i]=t.bind(n))}if(o){0;const e=o.call(n,n);0,(0,r.Gv)(e)&&(t.data=(0,i.Kh)(e))}if(ie=!0,a)for(const i in a){const t=a[i],e=(0,r.Tn)(t)?t.bind(n,n):(0,r.Tn)(t.get)?t.get.bind(n,n):r.tE;0;const o=!(0,r.Tn)(t)&&(0,r.Tn)(t.set)?t.set.bind(n):r.tE,l=oi({get:e,set:o});Object.defineProperty(s,i,{enumerable:!0,configurable:!0,get:()=>l.value,set:t=>l.value=t})}if(c)for(const i in c)ae(c[i],s,n,i);if(u){const t=(0,r.Tn)(u)?u.call(n):u;Reflect.ownKeys(t).forEach((e=>{be(e,t[e])}))}function P(t,e){(0,r.cy)(e)?e.forEach((e=>t(e.bind(n)))):e&&t(e.bind(n))}if(A&&oe(A,t,"c"),P(Pt,d),P(Nt,f),P(Ot,p),P(kt,g),P(St,m),P(Bt,v),P(Vt,S),P(Ht,E),P(Gt,C),P(Dt,w),P(Ut,b),P(Qt,B),(0,r.cy)(T))if(T.length){const e=t.exposed||(t.exposed={});T.forEach((t=>{Object.defineProperty(e,t,{get:()=>n[t],set:e=>n[t]=e})}))}else t.exposed||(t.exposed={});x&&t.render===r.tE&&(t.render=x),null!=I&&(t.inheritAttrs=I),F&&(t.components=F),L&&(t.directives=L)}function se(t,e,n=r.tE){(0,r.cy)(t)&&(t=de(t));for(const s in t){const n=t[s];let o;o=(0,r.Gv)(n)?"default"in n?xe(n.from||s,n.default,!0):xe(n.from||s):xe(n),(0,i.i9)(o)?Object.defineProperty(e,s,{enumerable:!0,configurable:!0,get:()=>o.value,set:t=>o.value=t}):e[s]=o}}function oe(t,e,n){o((0,r.cy)(t)?t.map((t=>t.bind(e.proxy))):t.bind(e.proxy),e,n)}function ae(t,e,n,i){const s=i.includes(".")?st(n,i):()=>n[i];if((0,r.Kg)(t)){const n=e[t];(0,r.Tn)(n)&&nt(s,n)}else if((0,r.Tn)(t))nt(s,t.bind(n));else if((0,r.Gv)(t))if((0,r.cy)(t))t.forEach((t=>ae(t,e,n,i)));else{const i=(0,r.Tn)(t.handler)?t.handler.bind(n):e[t.handler];(0,r.Tn)(i)&&nt(s,i,t)}else 0}function le(t){const e=t.type,{mixins:n,extends:i}=e,{mixins:s,optionsCache:o,config:{optionMergeStrategies:a}}=t.appContext,l=o.get(e);let c;return l?c=l:s.length||n||i?(c={},s.length&&s.forEach((t=>ce(c,t,a,!0))),ce(c,e,a)):c=e,(0,r.Gv)(e)&&o.set(e,c),c}function ce(t,e,n,i=!1){const{mixins:r,extends:s}=e;s&&ce(t,s,n,!0),r&&r.forEach((e=>ce(t,e,n,!0)));for(const o in e)if(i&&"expose"===o);else{const i=ue[o]||n&&n[o];t[o]=i?i(t[o],e[o]):e[o]}return t}const ue={data:he,props:ge,emits:ge,methods:pe,computed:pe,beforeCreate:fe,created:fe,beforeMount:fe,mounted:fe,beforeUpdate:fe,updated:fe,beforeDestroy:fe,beforeUnmount:fe,destroyed:fe,unmounted:fe,activated:fe,deactivated:fe,errorCaptured:fe,serverPrefetch:fe,components:pe,directives:pe,watch:me,provide:he,inject:Ae};function he(t,e){return e?t?function(){return(0,r.X$)((0,r.Tn)(t)?t.call(this,this):t,(0,r.Tn)(e)?e.call(this,this):e)}:e:t}function Ae(t,e){return pe(de(t),de(e))}function de(t){if((0,r.cy)(t)){const e={};for(let n=0;n<t.length;n++)e[t[n]]=t[n];return e}return t}function fe(t,e){return t?[...new Set([].concat(t,e))]:e}function pe(t,e){return t?(0,r.X$)(Object.create(null),t,e):e}function ge(t,e){return t?(0,r.cy)(t)&&(0,r.cy)(e)?[...new Set([...t,...e])]:(0,r.X$)(Object.create(null),ee(t),ee(null!=e?e:{})):e}function me(t,e){if(!t)return e;if(!e)return t;const n=(0,r.X$)(Object.create(null),t);for(const i in e)n[i]=fe(t[i],e[i]);return n}function ve(){return{app:null,config:{isNativeTag:r.NO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let ye=0;function we(t,e){return function(n,i=null){(0,r.Tn)(n)||(n=(0,r.X$)({},n)),null==i||(0,r.Gv)(i)||(i=null);const s=ve(),o=new WeakSet;let a=!1;const l=s.app={_uid:ye++,_component:n,_props:i,_container:null,_context:s,_instance:null,version:li,get config(){return s.config},set config(t){0},use(t,...e){return o.has(t)||(t&&(0,r.Tn)(t.install)?(o.add(t),t.install(l,...e)):(0,r.Tn)(t)&&(o.add(t),t(l,...e))),l},mixin(t){return s.mixins.includes(t)||s.mixins.push(t),l},component(t,e){return e?(s.components[t]=e,l):s.components[t]},directive(t,e){return e?(s.directives[t]=e,l):s.directives[t]},mount(r,o,c){if(!a){0;const u=Bn(n,i);return u.appContext=s,!0===c?c="svg":!1===c&&(c=void 0),o&&e?e(u,r):t(u,r,c),a=!0,l._container=r,r.__vue_app__=l,ii(u.component)||u.component.proxy}},unmount(){a&&(t(null,l._container),delete l._container.__vue_app__)},provide(t,e){return s.provides[t]=e,l},runWithContext(t){const e=_e;_e=l;try{return t()}finally{_e=e}}};return l}}let _e=null;function be(t,e){if(Gn){let n=Gn.provides;const i=Gn.parent&&Gn.parent.provides;i===n&&(n=Gn.provides=Object.create(i)),n[t]=e}else 0}function xe(t,e,n=!1){const i=Gn||R;if(i||_e){const s=i?null==i.parent?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:_e._context.provides;if(s&&t in s)return s[t];if(arguments.length>1)return n&&(0,r.Tn)(e)?e.call(i&&i.proxy):e}else 0}function Ee(t,e,n,s=!1){const o={},a={};(0,r.yQ)(a,xn,1),t.propsDefaults=Object.create(null),Se(t,e,o,a);for(const i in t.propsOptions[0])i in o||(o[i]=void 0);n?t.props=s?o:(0,i.Gc)(o):t.type.props?t.props=o:t.props=a,t.attrs=a}function Ce(t,e,n,s){const{props:o,attrs:a,vnode:{patchFlag:l}}=t,c=(0,i.ux)(o),[u]=t.propsOptions;let h=!1;if(!(s||l>0)||16&l){let i;Se(t,e,o,a)&&(h=!0);for(const s in c)e&&((0,r.$3)(e,s)||(i=(0,r.Tg)(s))!==s&&(0,r.$3)(e,i))||(u?!n||void 0===n[s]&&void 0===n[i]||(o[s]=Be(u,c,s,void 0,t,!0)):delete o[s]);if(a!==c)for(const t in a)e&&(0,r.$3)(e,t)||(delete a[t],h=!0)}else if(8&l){const n=t.vnode.dynamicProps;for(let i=0;i<n.length;i++){let s=n[i];if(L(t.emitsOptions,s))continue;const l=e[s];if(u)if((0,r.$3)(a,s))l!==a[s]&&(a[s]=l,h=!0);else{const e=(0,r.PT)(s);o[e]=Be(u,c,e,l,t,!1)}else l!==a[s]&&(a[s]=l,h=!0)}}h&&(0,i.hZ)(t,"set","$attrs")}function Se(t,e,n,s){const[o,a]=t.propsOptions;let l,c=!1;if(e)for(let i in e){if((0,r.SU)(i))continue;const u=e[i];let h;o&&(0,r.$3)(o,h=(0,r.PT)(i))?a&&a.includes(h)?(l||(l={}))[h]=u:n[h]=u:L(t.emitsOptions,i)||i in s&&u===s[i]||(s[i]=u,c=!0)}if(a){const e=(0,i.ux)(n),s=l||r.MZ;for(let i=0;i<a.length;i++){const l=a[i];n[l]=Be(o,e,l,s[l],t,!(0,r.$3)(s,l))}}return c}function Be(t,e,n,i,s,o){const a=t[n];if(null!=a){const t=(0,r.$3)(a,"default");if(t&&void 0===i){const t=a.default;if(a.type!==Function&&!a.skipFactory&&(0,r.Tn)(t)){const{propsDefaults:r}=s;if(n in r)i=r[n];else{const o=Wn(s);i=r[n]=t.call(null,e),o()}}else i=t}a[0]&&(o&&!t?i=!1:!a[1]||""!==i&&i!==(0,r.Tg)(n)||(i=!0))}return i}function Te(t,e,n=!1){const i=e.propsCache,s=i.get(t);if(s)return s;const o=t.props,a={},l=[];let c=!1;if(!(0,r.Tn)(t)){const i=t=>{c=!0;const[n,i]=Te(t,e,!0);(0,r.X$)(a,n),i&&l.push(...i)};!n&&e.mixins.length&&e.mixins.forEach(i),t.extends&&i(t.extends),t.mixins&&t.mixins.forEach(i)}if(!o&&!c)return(0,r.Gv)(t)&&i.set(t,r.Oj),r.Oj;if((0,r.cy)(o))for(let h=0;h<o.length;h++){0;const t=(0,r.PT)(o[h]);Ie(t)&&(a[t]=r.MZ)}else if(o){0;for(const t in o){const e=(0,r.PT)(t);if(Ie(e)){const n=o[t],i=a[e]=(0,r.cy)(n)||(0,r.Tn)(n)?{type:n}:(0,r.X$)({},n);if(i){const t=Re(Boolean,i.type),n=Re(String,i.type);i[0]=t>-1,i[1]=n<0||t<n,(t>-1||(0,r.$3)(i,"default"))&&l.push(e)}}}}const u=[a,l];return(0,r.Gv)(t)&&i.set(t,u),u}function Ie(t){return"$"!==t[0]&&!(0,r.SU)(t)}function Fe(t){if(null===t)return"null";if("function"===typeof t)return t.name||"";if("object"===typeof t){const e=t.constructor&&t.constructor.name;return e||""}return""}function Le(t,e){return Fe(t)===Fe(e)}function Re(t,e){return(0,r.cy)(e)?e.findIndex((e=>Le(e,t))):(0,r.Tn)(e)&&Le(e,t)?0:-1}const Me=t=>"_"===t[0]||"$stable"===t,Pe=t=>(0,r.cy)(t)?t.map(Mn):[Mn(t)],Ne=(t,e,n)=>{if(e._n)return e;const i=k(((...t)=>Pe(e(...t))),n);return i._c=!1,i},Oe=(t,e,n)=>{const i=t._ctx;for(const s in t){if(Me(s))continue;const n=t[s];if((0,r.Tn)(n))e[s]=Ne(s,n,i);else if(null!=n){0;const t=Pe(n);e[s]=()=>t}}},ke=(t,e)=>{const n=Pe(e);t.slots.default=()=>n},De=(t,e)=>{if(32&t.vnode.shapeFlag){const n=e._;n?(t.slots=(0,i.ux)(e),(0,r.yQ)(e,"_",n)):Oe(e,t.slots={})}else t.slots={},e&&ke(t,e);(0,r.yQ)(t.slots,xn,1)},Ue=(t,e,n)=>{const{vnode:i,slots:s}=t;let o=!0,a=r.MZ;if(32&i.shapeFlag){const t=e._;t?n&&1===t?o=!1:((0,r.X$)(s,e),n||1!==t||delete s._):(o=!e.$stable,Oe(e,s)),a=e}else e&&(ke(t,e),a={default:1});if(o)for(const r in s)Me(r)||null!=a[r]||delete s[r]};function Qe(t,e,n,o,a=!1){if((0,r.cy)(t))return void t.forEach(((t,i)=>Qe(t,e&&((0,r.cy)(e)?e[i]:e),n,o,a)));if(xt(o)&&!a)return;const l=4&o.shapeFlag?ii(o.component)||o.component.proxy:o.el,c=a?null:l,{i:u,r:h}=t;const A=e&&e.r,d=u.refs===r.MZ?u.refs={}:u.refs,f=u.setupState;if(null!=A&&A!==h&&((0,r.Kg)(A)?(d[A]=null,(0,r.$3)(f,A)&&(f[A]=null)):(0,i.i9)(A)&&(A.value=null)),(0,r.Tn)(h))s(h,u,12,[c,d]);else{const e=(0,r.Kg)(h),s=(0,i.i9)(h);if(e||s){const i=()=>{if(t.f){const n=e?(0,r.$3)(f,h)?f[h]:d[h]:h.value;a?(0,r.cy)(n)&&(0,r.TF)(n,l):(0,r.cy)(n)?n.includes(l)||n.push(l):e?(d[h]=[l],(0,r.$3)(f,h)&&(f[h]=d[h])):(h.value=[l],t.k&&(d[t.k]=h.value))}else e?(d[h]=c,(0,r.$3)(f,h)&&(f[h]=c)):s&&(h.value=c,t.k&&(d[t.k]=c))};c?(i.id=-1,He(i,n)):i()}else 0}}function Ge(){}const He=Y;function Ve(t){return je(t)}function je(t,e){Ge();const n=(0,r.We)();n.__VUE__=!0;const{insert:s,remove:o,patchProp:a,createElement:l,createText:c,createComment:u,setText:h,setElementText:A,parentNode:d,nextSibling:f,setScopeId:p=r.tE,insertStaticContent:g}=t,m=(t,e,n,i=null,r=null,s=null,o=void 0,a=null,l=!!e.dynamicChildren)=>{if(t===e)return;t&&!bn(t,e)&&(i=Z(t),K(t,r,s,!0),t=null),-2===e.patchFlag&&(l=!1,e.dynamicChildren=null);const{type:c,ref:u,shapeFlag:h}=e;switch(c){case cn:v(t,e,n,i);break;case un:y(t,e,n,i);break;case hn:null==t&&_(e,n,i,o);break;case ln:P(t,e,n,i,r,s,o,a,l);break;default:1&h?B(t,e,n,i,r,s,o,a,l):6&h?N(t,e,n,i,r,s,o,a,l):(64&h||128&h)&&c.process(t,e,n,i,r,s,o,a,l,et)}null!=u&&r&&Qe(u,t&&t.ref,s,e||t,!e)},v=(t,e,n,i)=>{if(null==t)s(e.el=c(e.children),n,i);else{const n=e.el=t.el;e.children!==t.children&&h(n,e.children)}},y=(t,e,n,i)=>{null==t?s(e.el=u(e.children||""),n,i):e.el=t.el},_=(t,e,n,i)=>{[t.el,t.anchor]=g(t.children,e,n,i,t.el,t.anchor)},x=({el:t,anchor:e},n,i)=>{let r;while(t&&t!==e)r=f(t),s(t,n,i),t=r;s(e,n,i)},S=({el:t,anchor:e})=>{let n;while(t&&t!==e)n=f(t),o(t),t=n;o(e)},B=(t,e,n,i,r,s,o,a,l)=>{"svg"===e.type?o="svg":"math"===e.type&&(o="mathml"),null==t?T(e,n,i,r,s,o,a,l):L(t,e,r,s,o,a,l)},T=(t,e,n,i,o,c,u,h)=>{let d,f;const{props:p,shapeFlag:g,transition:m,dirs:v}=t;if(d=t.el=l(t.type,c,p&&p.is,p),8&g?A(d,t.children):16&g&&F(t.children,d,null,i,o,We(t,c),u,h),v&&lt(t,null,i,"created"),I(d,t,t.scopeId,u,i),p){for(const e in p)"value"===e||(0,r.SU)(e)||a(d,e,null,p[e],c,t.children,i,o,Y);"value"in p&&a(d,"value",null,p.value,c),(f=p.onVnodeBeforeMount)&&kn(f,i,t)}v&&lt(t,null,i,"beforeMount");const y=Ke(o,m);y&&m.beforeEnter(d),s(d,e,n),((f=p&&p.onVnodeMounted)||y||v)&&He((()=>{f&&kn(f,i,t),y&&m.enter(d),v&&lt(t,null,i,"mounted")}),o)},I=(t,e,n,i,r)=>{if(n&&p(t,n),i)for(let s=0;s<i.length;s++)p(t,i[s]);if(r){let n=r.subTree;if(e===n){const e=r.vnode;I(t,e,e.scopeId,e.slotScopeIds,r.parent)}}},F=(t,e,n,i,r,s,o,a,l=0)=>{for(let c=l;c<t.length;c++){const l=t[c]=a?Pn(t[c]):Mn(t[c]);m(null,l,e,n,i,r,s,o,a)}},L=(t,e,n,i,s,o,l)=>{const c=e.el=t.el;let{patchFlag:u,dynamicChildren:h,dirs:d}=e;u|=16&t.patchFlag;const f=t.props||r.MZ,p=e.props||r.MZ;let g;if(n&&ze(n,!1),(g=p.onVnodeBeforeUpdate)&&kn(g,n,e,t),d&&lt(e,t,n,"beforeUpdate"),n&&ze(n,!0),h?R(t.dynamicChildren,h,c,n,i,We(e,s),o):l||H(t,e,c,null,n,i,We(e,s),o,!1),u>0){if(16&u)M(c,e,f,p,n,i,s);else if(2&u&&f.class!==p.class&&a(c,"class",null,p.class,s),4&u&&a(c,"style",f.style,p.style,s),8&u){const r=e.dynamicProps;for(let e=0;e<r.length;e++){const o=r[e],l=f[o],u=p[o];u===l&&"value"!==o||a(c,o,l,u,s,t.children,n,i,Y)}}1&u&&t.children!==e.children&&A(c,e.children)}else l||null!=h||M(c,e,f,p,n,i,s);((g=p.onVnodeUpdated)||d)&&He((()=>{g&&kn(g,n,e,t),d&&lt(e,t,n,"updated")}),i)},R=(t,e,n,i,r,s,o)=>{for(let a=0;a<e.length;a++){const l=t[a],c=e[a],u=l.el&&(l.type===ln||!bn(l,c)||70&l.shapeFlag)?d(l.el):n;m(l,c,u,null,i,r,s,o,!0)}},M=(t,e,n,i,s,o,l)=>{if(n!==i){if(n!==r.MZ)for(const c in n)(0,r.SU)(c)||c in i||a(t,c,n[c],null,l,e.children,s,o,Y);for(const c in i){if((0,r.SU)(c))continue;const u=i[c],h=n[c];u!==h&&"value"!==c&&a(t,c,h,u,l,e.children,s,o,Y)}"value"in i&&a(t,"value",n.value,i.value,l)}},P=(t,e,n,i,r,o,a,l,u)=>{const h=e.el=t?t.el:c(""),A=e.anchor=t?t.anchor:c("");let{patchFlag:d,dynamicChildren:f,slotScopeIds:p}=e;p&&(l=l?l.concat(p):p),null==t?(s(h,n,i),s(A,n,i),F(e.children||[],n,A,r,o,a,l,u)):d>0&&64&d&&f&&t.dynamicChildren?(R(t.dynamicChildren,f,n,r,o,a,l),(null!=e.key||r&&e===r.subTree)&&qe(t,e,!0)):H(t,e,n,A,r,o,a,l,u)},N=(t,e,n,i,r,s,o,a,l)=>{e.slotScopeIds=a,null==t?512&e.shapeFlag?r.ctx.activate(e,n,i,o,l):O(e,n,i,r,s,o,l):k(t,e,l)},O=(t,e,n,i,r,s,o)=>{const a=t.component=Qn(t,i,r);if(Et(t)&&(a.ctx.renderer=et),Yn(a),a.asyncDep){if(r&&r.registerDep(a,U),!t.el){const t=a.subTree=Bn(un);y(null,t,e,n)}}else U(a,t,e,n,r,s,o)},k=(t,e,n)=>{const i=e.component=t.component;if(G(t,e,n)){if(i.asyncDep&&!i.asyncResolved)return void Q(i,e,n);i.next=e,b(i.update),i.effect.dirty=!0,i.update()}else e.el=t.el,i.vnode=e},U=(t,e,n,s,o,a,l)=>{const c=()=>{if(t.isMounted){let{next:e,bu:n,u:i,parent:s,vnode:u}=t;{const n=Xe(t);if(n)return e&&(e.el=u.el,Q(t,e,l)),void n.asyncDep.then((()=>{t.isUnmounted||c()}))}let h,A=e;0,ze(t,!1),e?(e.el=u.el,Q(t,e,l)):e=u,n&&(0,r.DY)(n),(h=e.props&&e.props.onVnodeBeforeUpdate)&&kn(h,s,e,u),ze(t,!0);const f=D(t);0;const p=t.subTree;t.subTree=f,m(p,f,d(p.el),Z(p),t,o,a),e.el=f.el,null===A&&V(t,f.el),i&&He(i,o),(h=e.props&&e.props.onVnodeUpdated)&&He((()=>kn(h,s,e,u)),o)}else{let i;const{el:l,props:c}=e,{bm:u,m:h,parent:A}=t,d=xt(e);if(ze(t,!1),u&&(0,r.DY)(u),!d&&(i=c&&c.onVnodeBeforeMount)&&kn(i,A,e),ze(t,!0),l&&it){const n=()=>{t.subTree=D(t),it(l,t.subTree,t,o,null)};d?e.type.__asyncLoader().then((()=>!t.isUnmounted&&n())):n()}else{0;const i=t.subTree=D(t);0,m(null,i,n,s,t,o,a),e.el=i.el}if(h&&He(h,o),!d&&(i=c&&c.onVnodeMounted)){const t=e;He((()=>kn(i,A,t)),o)}(256&e.shapeFlag||A&&xt(A.vnode)&&256&A.vnode.shapeFlag)&&t.a&&He(t.a,o),t.isMounted=!0,e=n=s=null}},u=t.effect=new i.X2(c,r.tE,(()=>w(h)),t.scope),h=t.update=()=>{u.dirty&&u.run()};h.id=t.uid,ze(t,!0),h()},Q=(t,e,n)=>{e.component=t;const r=t.vnode.props;t.vnode=e,t.next=null,Ce(t,e.props,r,n),Ue(t,e.children,n),(0,i.C4)(),E(t),(0,i.bl)()},H=(t,e,n,i,r,s,o,a,l=!1)=>{const c=t&&t.children,u=t?t.shapeFlag:0,h=e.children,{patchFlag:d,shapeFlag:f}=e;if(d>0){if(128&d)return void W(c,h,n,i,r,s,o,a,l);if(256&d)return void j(c,h,n,i,r,s,o,a,l)}8&f?(16&u&&Y(c,r,s),h!==c&&A(n,h)):16&u?16&f?W(c,h,n,i,r,s,o,a,l):Y(c,r,s,!0):(8&u&&A(n,""),16&f&&F(h,n,i,r,s,o,a,l))},j=(t,e,n,i,s,o,a,l,c)=>{t=t||r.Oj,e=e||r.Oj;const u=t.length,h=e.length,A=Math.min(u,h);let d;for(d=0;d<A;d++){const i=e[d]=c?Pn(e[d]):Mn(e[d]);m(t[d],i,n,null,s,o,a,l,c)}u>h?Y(t,s,o,!0,!1,A):F(e,n,i,s,o,a,l,c,A)},W=(t,e,n,i,s,o,a,l,c)=>{let u=0;const h=e.length;let A=t.length-1,d=h-1;while(u<=A&&u<=d){const i=t[u],r=e[u]=c?Pn(e[u]):Mn(e[u]);if(!bn(i,r))break;m(i,r,n,null,s,o,a,l,c),u++}while(u<=A&&u<=d){const i=t[A],r=e[d]=c?Pn(e[d]):Mn(e[d]);if(!bn(i,r))break;m(i,r,n,null,s,o,a,l,c),A--,d--}if(u>A){if(u<=d){const t=d+1,r=t<h?e[t].el:i;while(u<=d)m(null,e[u]=c?Pn(e[u]):Mn(e[u]),n,r,s,o,a,l,c),u++}}else if(u>d)while(u<=A)K(t[u],s,o,!0),u++;else{const f=u,p=u,g=new Map;for(u=p;u<=d;u++){const t=e[u]=c?Pn(e[u]):Mn(e[u]);null!=t.key&&g.set(t.key,u)}let v,y=0;const w=d-p+1;let _=!1,b=0;const x=new Array(w);for(u=0;u<w;u++)x[u]=0;for(u=f;u<=A;u++){const i=t[u];if(y>=w){K(i,s,o,!0);continue}let r;if(null!=i.key)r=g.get(i.key);else for(v=p;v<=d;v++)if(0===x[v-p]&&bn(i,e[v])){r=v;break}void 0===r?K(i,s,o,!0):(x[r-p]=u+1,r>=b?b=r:_=!0,m(i,e[r],n,null,s,o,a,l,c),y++)}const E=_?$e(x):r.Oj;for(v=E.length-1,u=w-1;u>=0;u--){const t=p+u,r=e[t],A=t+1<h?e[t+1].el:i;0===x[u]?m(null,r,n,A,s,o,a,l,c):_&&(v<0||u!==E[v]?z(r,n,A,2):v--)}}},z=(t,e,n,i,r=null)=>{const{el:o,type:a,transition:l,children:c,shapeFlag:u}=t;if(6&u)return void z(t.component.subTree,e,n,i);if(128&u)return void t.suspense.move(e,n,i);if(64&u)return void a.move(t,e,n,et);if(a===ln){s(o,e,n);for(let t=0;t<c.length;t++)z(c[t],e,n,i);return void s(t.anchor,e,n)}if(a===hn)return void x(t,e,n);const h=2!==i&&1&u&&l;if(h)if(0===i)l.beforeEnter(o),s(o,e,n),He((()=>l.enter(o)),r);else{const{leave:t,delayLeave:i,afterLeave:r}=l,a=()=>s(o,e,n),c=()=>{t(o,(()=>{a(),r&&r()}))};i?i(o,a,c):c()}else s(o,e,n)},K=(t,e,n,i=!1,r=!1)=>{const{type:s,props:o,ref:a,children:l,dynamicChildren:c,shapeFlag:u,patchFlag:h,dirs:A}=t;if(null!=a&&Qe(a,null,n,t,!0),256&u)return void e.ctx.deactivate(t);const d=1&u&&A,f=!xt(t);let p;if(f&&(p=o&&o.onVnodeBeforeUnmount)&&kn(p,e,t),6&u)X(t.component,n,i);else{if(128&u)return void t.suspense.unmount(n,i);d&&lt(t,null,e,"beforeUnmount"),64&u?t.type.remove(t,e,n,r,et,i):c&&(s!==ln||h>0&&64&h)?Y(c,e,n,!1,!0):(s===ln&&384&h||!r&&16&u)&&Y(l,e,n),i&&q(t)}(f&&(p=o&&o.onVnodeUnmounted)||d)&&He((()=>{p&&kn(p,e,t),d&&lt(t,null,e,"unmounted")}),n)},q=t=>{const{type:e,el:n,anchor:i,transition:r}=t;if(e===ln)return void $(n,i);if(e===hn)return void S(t);const s=()=>{o(n),r&&!r.persisted&&r.afterLeave&&r.afterLeave()};if(1&t.shapeFlag&&r&&!r.persisted){const{leave:e,delayLeave:i}=r,o=()=>e(n,s);i?i(t.el,s,o):o()}else s()},$=(t,e)=>{let n;while(t!==e)n=f(t),o(t),t=n;o(e)},X=(t,e,n)=>{const{bum:i,scope:s,update:o,subTree:a,um:l}=t;i&&(0,r.DY)(i),s.stop(),o&&(o.active=!1,K(a,t,e,n)),l&&He(l,e),He((()=>{t.isUnmounted=!0}),e),e&&e.pendingBranch&&!e.isUnmounted&&t.asyncDep&&!t.asyncResolved&&t.suspenseId===e.pendingId&&(e.deps--,0===e.deps&&e.resolve())},Y=(t,e,n,i=!1,r=!1,s=0)=>{for(let o=s;o<t.length;o++)K(t[o],e,n,i,r)},Z=t=>6&t.shapeFlag?Z(t.component.subTree):128&t.shapeFlag?t.suspense.next():f(t.anchor||t.el);let J=!1;const tt=(t,e,n)=>{null==t?e._vnode&&K(e._vnode,null,null,!0):m(e._vnode||null,t,e,null,null,null,n),J||(J=!0,E(),C(),J=!1),e._vnode=t},et={p:m,um:K,m:z,r:q,mt:O,mc:F,pc:H,pbc:R,n:Z,o:t};let nt,it;return e&&([nt,it]=e(et)),{render:tt,hydrate:nt,createApp:we(tt,nt)}}function We({type:t,props:e},n){return"svg"===n&&"foreignObject"===t||"mathml"===n&&"annotation-xml"===t&&e&&e.encoding&&e.encoding.includes("html")?void 0:n}function ze({effect:t,update:e},n){t.allowRecurse=e.allowRecurse=n}function Ke(t,e){return(!t||t&&!t.pendingBranch)&&e&&!e.persisted}function qe(t,e,n=!1){const i=t.children,s=e.children;if((0,r.cy)(i)&&(0,r.cy)(s))for(let r=0;r<i.length;r++){const t=i[r];let e=s[r];1&e.shapeFlag&&!e.dynamicChildren&&((e.patchFlag<=0||32===e.patchFlag)&&(e=s[r]=Pn(s[r]),e.el=t.el),n||qe(t,e)),e.type===cn&&(e.el=t.el)}}function $e(t){const e=t.slice(),n=[0];let i,r,s,o,a;const l=t.length;for(i=0;i<l;i++){const l=t[i];if(0!==l){if(r=n[n.length-1],t[r]<l){e[i]=r,n.push(i);continue}s=0,o=n.length-1;while(s<o)a=s+o>>1,t[n[a]]<l?s=a+1:o=a;l<t[n[s]]&&(s>0&&(e[i]=n[s-1]),n[s]=i)}}s=n.length,o=n[s-1];while(s-- >0)n[s]=o,o=e[o];return n}function Xe(t){const e=t.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Xe(e)}const Ye=t=>t.__isTeleport,Ze=t=>t&&(t.disabled||""===t.disabled),Je=t=>"undefined"!==typeof SVGElement&&t instanceof SVGElement,tn=t=>"function"===typeof MathMLElement&&t instanceof MathMLElement,en=(t,e)=>{const n=t&&t.to;if((0,r.Kg)(n)){if(e){const t=e(n);return t}return null}return n},nn={name:"Teleport",__isTeleport:!0,process(t,e,n,i,r,s,o,a,l,c){const{mc:u,pc:h,pbc:A,o:{insert:d,querySelector:f,createText:p,createComment:g}}=c,m=Ze(e.props);let{shapeFlag:v,children:y,dynamicChildren:w}=e;if(null==t){const t=e.el=p(""),c=e.anchor=p("");d(t,n,i),d(c,n,i);const h=e.target=en(e.props,f),A=e.targetAnchor=p("");h&&(d(A,h),"svg"===o||Je(h)?o="svg":("mathml"===o||tn(h))&&(o="mathml"));const g=(t,e)=>{16&v&&u(y,t,e,r,s,o,a,l)};m?g(n,c):h&&g(h,A)}else{e.el=t.el;const i=e.anchor=t.anchor,u=e.target=t.target,d=e.targetAnchor=t.targetAnchor,p=Ze(t.props),g=p?n:u,v=p?i:d;if("svg"===o||Je(u)?o="svg":("mathml"===o||tn(u))&&(o="mathml"),w?(A(t.dynamicChildren,w,g,r,s,o,a),qe(t,e,!0)):l||h(t,e,g,v,r,s,o,a,!1),m)p?e.props&&t.props&&e.props.to!==t.props.to&&(e.props.to=t.props.to):rn(e,n,i,c,1);else if((e.props&&e.props.to)!==(t.props&&t.props.to)){const t=e.target=en(e.props,f);t&&rn(e,t,null,c,0)}else p&&rn(e,u,d,c,1)}an(e)},remove(t,e,n,i,{um:r,o:{remove:s}},o){const{shapeFlag:a,children:l,anchor:c,targetAnchor:u,target:h,props:A}=t;if(h&&s(u),o&&s(c),16&a){const t=o||!Ze(A);for(let i=0;i<l.length;i++){const s=l[i];r(s,e,n,t,!!s.dynamicChildren)}}},move:rn,hydrate:sn};function rn(t,e,n,{o:{insert:i},m:r},s=2){0===s&&i(t.targetAnchor,e,n);const{el:o,anchor:a,shapeFlag:l,children:c,props:u}=t,h=2===s;if(h&&i(o,e,n),(!h||Ze(u))&&16&l)for(let A=0;A<c.length;A++)r(c[A],e,n,2);h&&i(a,e,n)}function sn(t,e,n,i,r,s,{o:{nextSibling:o,parentNode:a,querySelector:l}},c){const u=e.target=en(e.props,l);if(u){const l=u._lpa||u.firstChild;if(16&e.shapeFlag)if(Ze(e.props))e.anchor=c(o(t),e,a(t),n,i,r,s),e.targetAnchor=l;else{e.anchor=o(t);let a=l;while(a)if(a=o(a),a&&8===a.nodeType&&"teleport anchor"===a.data){e.targetAnchor=a,u._lpa=e.targetAnchor&&o(e.targetAnchor);break}c(l,e,u,n,i,r,s)}an(e)}return e.anchor&&o(e.anchor)}const on=nn;function an(t){const e=t.ctx;if(e&&e.ut){let n=t.children[0].el;while(n&&n!==t.targetAnchor)1===n.nodeType&&n.setAttribute("data-v-owner",e.uid),n=n.nextSibling;e.ut()}}const ln=Symbol.for("v-fgt"),cn=Symbol.for("v-txt"),un=Symbol.for("v-cmt"),hn=Symbol.for("v-stc"),An=[];let dn=null;function fn(t=!1){An.push(dn=t?null:[])}function pn(){An.pop(),dn=An[An.length-1]||null}let gn=1;function mn(t){gn+=t}function vn(t){return t.dynamicChildren=gn>0?dn||r.Oj:null,pn(),gn>0&&dn&&dn.push(t),t}function yn(t,e,n,i,r,s){return vn(Sn(t,e,n,i,r,s,!0))}function wn(t,e,n,i,r){return vn(Bn(t,e,n,i,r,!0))}function _n(t){return!!t&&!0===t.__v_isVNode}function bn(t,e){return t.type===e.type&&t.key===e.key}const xn="__vInternal",En=({key:t})=>null!=t?t:null,Cn=({ref:t,ref_key:e,ref_for:n})=>("number"===typeof t&&(t=""+t),null!=t?(0,r.Kg)(t)||(0,i.i9)(t)||(0,r.Tn)(t)?{i:R,r:t,k:e,f:!!n}:t:null);function Sn(t,e=null,n=null,i=0,s=null,o=(t===ln?0:1),a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:t,props:e,key:e&&En(e),ref:e&&Cn(e),scopeId:M,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:R};return l?(Nn(c,n),128&o&&t.normalize(c)):n&&(c.shapeFlag|=(0,r.Kg)(n)?8:16),gn>0&&!a&&dn&&(c.patchFlag>0||6&o)&&32!==c.patchFlag&&dn.push(c),c}const Bn=Tn;function Tn(t,e=null,n=null,s=0,o=null,a=!1){if(t&&t!==z||(t=un),_n(t)){const i=Fn(t,e,!0);return n&&Nn(i,n),gn>0&&!a&&dn&&(6&i.shapeFlag?dn[dn.indexOf(t)]=i:dn.push(i)),i.patchFlag|=-2,i}if(si(t)&&(t=t.__vccOpts),e){e=In(e);let{class:t,style:n}=e;t&&!(0,r.Kg)(t)&&(e.class=(0,r.C4)(t)),(0,r.Gv)(n)&&((0,i.ju)(n)&&!(0,r.cy)(n)&&(n=(0,r.X$)({},n)),e.style=(0,r.Tr)(n))}const l=(0,r.Kg)(t)?1:X(t)?128:Ye(t)?64:(0,r.Gv)(t)?4:(0,r.Tn)(t)?2:0;return Sn(t,e,n,s,o,l,a,!0)}function In(t){return t?(0,i.ju)(t)||xn in t?(0,r.X$)({},t):t:null}function Fn(t,e,n=!1){const{props:i,ref:s,patchFlag:o,children:a}=t,l=e?On(i||{},e):i,c={__v_isVNode:!0,__v_skip:!0,type:t.type,props:l,key:l&&En(l),ref:e&&e.ref?n&&s?(0,r.cy)(s)?s.concat(Cn(e)):[s,Cn(e)]:Cn(e):s,scopeId:t.scopeId,slotScopeIds:t.slotScopeIds,children:a,target:t.target,targetAnchor:t.targetAnchor,staticCount:t.staticCount,shapeFlag:t.shapeFlag,patchFlag:e&&t.type!==ln?-1===o?16:16|o:o,dynamicProps:t.dynamicProps,dynamicChildren:t.dynamicChildren,appContext:t.appContext,dirs:t.dirs,transition:t.transition,component:t.component,suspense:t.suspense,ssContent:t.ssContent&&Fn(t.ssContent),ssFallback:t.ssFallback&&Fn(t.ssFallback),el:t.el,anchor:t.anchor,ctx:t.ctx,ce:t.ce};return c}function Ln(t=" ",e=0){return Bn(cn,null,t,e)}function Rn(t="",e=!1){return e?(fn(),wn(un,null,t)):Bn(un,null,t)}function Mn(t){return null==t||"boolean"===typeof t?Bn(un):(0,r.cy)(t)?Bn(ln,null,t.slice()):"object"===typeof t?Pn(t):Bn(cn,null,String(t))}function Pn(t){return null===t.el&&-1!==t.patchFlag||t.memo?t:Fn(t)}function Nn(t,e){let n=0;const{shapeFlag:i}=t;if(null==e)e=null;else if((0,r.cy)(e))n=16;else if("object"===typeof e){if(65&i){const n=e.default;return void(n&&(n._c&&(n._d=!1),Nn(t,n()),n._c&&(n._d=!0)))}{n=32;const i=e._;i||xn in e?3===i&&R&&(1===R.slots._?e._=1:(e._=2,t.patchFlag|=1024)):e._ctx=R}}else(0,r.Tn)(e)?(e={default:e,_ctx:R},n=32):(e=String(e),64&i?(n=16,e=[Ln(e)]):n=8);t.children=e,t.shapeFlag|=n}function On(...t){const e={};for(let n=0;n<t.length;n++){const i=t[n];for(const t in i)if("class"===t)e.class!==i.class&&(e.class=(0,r.C4)([e.class,i.class]));else if("style"===t)e.style=(0,r.Tr)([e.style,i.style]);else if((0,r.Mp)(t)){const n=e[t],s=i[t];!s||n===s||(0,r.cy)(n)&&n.includes(s)||(e[t]=n?[].concat(n,s):s)}else""!==t&&(e[t]=i[t])}return e}function kn(t,e,n,i=null){o(t,e,7,[n,i])}const Dn=ve();let Un=0;function Qn(t,e,n){const s=t.type,o=(e?e.appContext:t.appContext)||Dn,a={uid:Un++,vnode:t,type:s,parent:e,appContext:o,root:null,next:null,subTree:null,effect:null,update:null,scope:new i.yC(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(o.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Te(s,o),emitsOptions:F(s,o),emit:null,emitted:null,propsDefaults:r.MZ,inheritAttrs:s.inheritAttrs,ctx:r.MZ,data:r.MZ,props:r.MZ,attrs:r.MZ,slots:r.MZ,refs:r.MZ,setupState:r.MZ,setupContext:null,attrsProxy:null,slotsProxy:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return a.ctx={_:a},a.root=e?e.root:a,a.emit=I.bind(null,a),t.ce&&t.ce(a),a}let Gn=null;const Hn=()=>Gn||R;let Vn,jn;{const t=(0,r.We)(),e=(e,n)=>{let i;return(i=t[e])||(i=t[e]=[]),i.push(n),t=>{i.length>1?i.forEach((e=>e(t))):i[0](t)}};Vn=e("__VUE_INSTANCE_SETTERS__",(t=>Gn=t)),jn=e("__VUE_SSR_SETTERS__",(t=>Xn=t))}const Wn=t=>{const e=Gn;return Vn(t),t.scope.on(),()=>{t.scope.off(),Vn(e)}},zn=()=>{Gn&&Gn.scope.off(),Vn(null)};function Kn(t){return 4&t.vnode.shapeFlag}let qn,$n,Xn=!1;function Yn(t,e=!1){e&&jn(e);const{props:n,children:i}=t.vnode,r=Kn(t);Ee(t,n,r,e),De(t,i);const s=r?Zn(t,e):void 0;return e&&jn(!1),s}function Zn(t,e){const n=t.type;t.accessCache=Object.create(null),t.proxy=(0,i.IG)(new Proxy(t.ctx,Yt));const{setup:o}=n;if(o){const n=t.setupContext=o.length>1?ni(t):null,l=Wn(t);(0,i.C4)();const c=s(o,t,0,[t.props,n]);if((0,i.bl)(),l(),(0,r.yL)(c)){if(c.then(zn,zn),e)return c.then((n=>{Jn(t,n,e)})).catch((e=>{a(e,t,0)}));t.asyncDep=c}else Jn(t,c,e)}else ti(t,e)}function Jn(t,e,n){(0,r.Tn)(e)?t.type.__ssrInlineRender?t.ssrRender=e:t.render=e:(0,r.Gv)(e)&&(t.setupState=(0,i.Pr)(e)),ti(t,n)}function ti(t,e,n){const s=t.type;if(!t.render){if(!e&&qn&&!s.render){const e=s.template||le(t).template;if(e){0;const{isCustomElement:n,compilerOptions:i}=t.appContext.config,{delimiters:o,compilerOptions:a}=s,l=(0,r.X$)((0,r.X$)({isCustomElement:n,delimiters:o},i),a);s.render=qn(e,l)}}t.render=s.render||r.tE,$n&&$n(t)}{const e=Wn(t);(0,i.C4)();try{re(t)}finally{(0,i.bl)(),e()}}}function ei(t){return t.attrsProxy||(t.attrsProxy=new Proxy(t.attrs,{get(e,n){return(0,i.u4)(t,"get","$attrs"),e[n]}}))}function ni(t){const e=e=>{t.exposed=e||{}};return{get attrs(){return ei(t)},slots:t.slots,emit:t.emit,expose:e}}function ii(t){if(t.exposed)return t.exposeProxy||(t.exposeProxy=new Proxy((0,i.Pr)((0,i.IG)(t.exposed)),{get(e,n){return n in e?e[n]:n in $t?$t[n](t):void 0},has(t,e){return e in t||e in $t}}))}function ri(t,e=!0){return(0,r.Tn)(t)?t.displayName||t.name:t.name||e&&t.__name}function si(t){return(0,r.Tn)(t)&&"__vccOpts"in t}const oi=(t,e)=>{const n=(0,i.EW)(t,e,Xn);return n};function ai(t,e,n){const i=arguments.length;return 2===i?(0,r.Gv)(e)&&!(0,r.cy)(e)?_n(e)?Bn(t,null,[e]):Bn(t,e):Bn(t,null,e):(i>3?n=Array.prototype.slice.call(arguments,2):3===i&&_n(n)&&(n=[n]),Bn(t,e,n))}const li="3.4.21"},5130:function(t,e,n){"use strict";n.d(e,{D$:function(){return Mt},Ef:function(){return Ut},Jo:function(){return wt},XL:function(){return xt},aG:function(){return P},eB:function(){return f},hp:function(){return Tt},jR:function(){return Nt},lH:function(){return _t},u1:function(){return Et}});n(4114);var i=n(6768),r=n(4232),s=n(144);
/**
* @vue/runtime-dom v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
const o="http://www.w3.org/2000/svg",a="http://www.w3.org/1998/Math/MathML",l="undefined"!==typeof document?document:null,c=l&&l.createElement("template"),u={insert:(t,e,n)=>{e.insertBefore(t,n||null)},remove:t=>{const e=t.parentNode;e&&e.removeChild(t)},createElement:(t,e,n,i)=>{const r="svg"===e?l.createElementNS(o,t):"mathml"===e?l.createElementNS(a,t):l.createElement(t,n?{is:n}:void 0);return"select"===t&&i&&null!=i.multiple&&r.setAttribute("multiple",i.multiple),r},createText:t=>l.createTextNode(t),createComment:t=>l.createComment(t),setText:(t,e)=>{t.nodeValue=e},setElementText:(t,e)=>{t.textContent=e},parentNode:t=>t.parentNode,nextSibling:t=>t.nextSibling,querySelector:t=>l.querySelector(t),setScopeId(t,e){t.setAttribute(e,"")},insertStaticContent(t,e,n,i,r,s){const o=n?n.previousSibling:e.lastChild;if(r&&(r===s||r.nextSibling)){while(1)if(e.insertBefore(r.cloneNode(!0),n),r===s||!(r=r.nextSibling))break}else{c.innerHTML="svg"===i?`<svg>${t}</svg>`:"mathml"===i?`<math>${t}</math>`:t;const r=c.content;if("svg"===i||"mathml"===i){const t=r.firstChild;while(t.firstChild)r.appendChild(t.firstChild);r.removeChild(t)}e.insertBefore(r,n)}return[o?o.nextSibling:e.firstChild,n?n.previousSibling:e.lastChild]}},h="transition",A="animation",d=Symbol("_vtc"),f=(t,{slots:e})=>(0,i.h)(i.pR,y(t),e);f.displayName="Transition";const p={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},g=f.props=(0,r.X$)({},i.QP,p),m=(t,e=[])=>{(0,r.cy)(t)?t.forEach((t=>t(...e))):t&&t(...e)},v=t=>!!t&&((0,r.cy)(t)?t.some((t=>t.length>1)):t.length>1);function y(t){const e={};for(const r in t)r in p||(e[r]=t[r]);if(!1===t.css)return e;const{name:n="v",type:i,duration:s,enterFromClass:o=`${n}-enter-from`,enterActiveClass:a=`${n}-enter-active`,enterToClass:l=`${n}-enter-to`,appearFromClass:c=o,appearActiveClass:u=a,appearToClass:h=l,leaveFromClass:A=`${n}-leave-from`,leaveActiveClass:d=`${n}-leave-active`,leaveToClass:f=`${n}-leave-to`}=t,g=w(s),y=g&&g[0],_=g&&g[1],{onBeforeEnter:C,onEnter:B,onEnterCancelled:T,onLeave:I,onLeaveCancelled:L,onBeforeAppear:R=C,onAppear:M=B,onAppearCancelled:P=T}=e,N=(t,e,n)=>{x(t,e?h:l),x(t,e?u:a),n&&n()},O=(t,e)=>{t._isLeaving=!1,x(t,A),x(t,f),x(t,d),e&&e()},k=t=>(e,n)=>{const r=t?M:B,s=()=>N(e,t,n);m(r,[e,s]),E((()=>{x(e,t?c:o),b(e,t?h:l),v(r)||S(e,i,y,s)}))};return(0,r.X$)(e,{onBeforeEnter(t){m(C,[t]),b(t,o),b(t,a)},onBeforeAppear(t){m(R,[t]),b(t,c),b(t,u)},onEnter:k(!1),onAppear:k(!0),onLeave(t,e){t._isLeaving=!0;const n=()=>O(t,e);b(t,A),F(),b(t,d),E((()=>{t._isLeaving&&(x(t,A),b(t,f),v(I)||S(t,i,_,n))})),m(I,[t,n])},onEnterCancelled(t){N(t,!1),m(T,[t])},onAppearCancelled(t){N(t,!0),m(P,[t])},onLeaveCancelled(t){O(t),m(L,[t])}})}function w(t){if(null==t)return null;if((0,r.Gv)(t))return[_(t.enter),_(t.leave)];{const e=_(t);return[e,e]}}function _(t){const e=(0,r.Ro)(t);return e}function b(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.add(e))),(t[d]||(t[d]=new Set)).add(e)}function x(t,e){e.split(/\s+/).forEach((e=>e&&t.classList.remove(e)));const n=t[d];n&&(n.delete(e),n.size||(t[d]=void 0))}function E(t){requestAnimationFrame((()=>{requestAnimationFrame(t)}))}let C=0;function S(t,e,n,i){const r=t._endId=++C,s=()=>{r===t._endId&&i()};if(n)return setTimeout(s,n);const{type:o,timeout:a,propCount:l}=B(t,e);if(!o)return i();const c=o+"end";let u=0;const h=()=>{t.removeEventListener(c,A),s()},A=e=>{e.target===t&&++u>=l&&h()};setTimeout((()=>{u<l&&h()}),a+1),t.addEventListener(c,A)}function B(t,e){const n=window.getComputedStyle(t),i=t=>(n[t]||"").split(", "),r=i(`${h}Delay`),s=i(`${h}Duration`),o=T(r,s),a=i(`${A}Delay`),l=i(`${A}Duration`),c=T(a,l);let u=null,d=0,f=0;e===h?o>0&&(u=h,d=o,f=s.length):e===A?c>0&&(u=A,d=c,f=l.length):(d=Math.max(o,c),u=d>0?o>c?h:A:null,f=u?u===h?s.length:l.length:0);const p=u===h&&/\b(transform|all)(,|$)/.test(i(`${h}Property`).toString());return{type:u,timeout:d,propCount:f,hasTransform:p}}function T(t,e){while(t.length<e.length)t=t.concat(t);return Math.max(...e.map(((e,n)=>I(e)+I(t[n]))))}function I(t){return"auto"===t?0:1e3*Number(t.slice(0,-1).replace(",","."))}function F(){return document.body.offsetHeight}function L(t,e,n){const i=t[d];i&&(e=(e?[e,...i]:[...i]).join(" ")),null==e?t.removeAttribute("class"):n?t.setAttribute("class",e):t.className=e}const R=Symbol("_vod"),M=Symbol("_vsh"),P={beforeMount(t,{value:e},{transition:n}){t[R]="none"===t.style.display?"":t.style.display,n&&e?n.beforeEnter(t):N(t,e)},mounted(t,{value:e},{transition:n}){n&&e&&n.enter(t)},updated(t,{value:e,oldValue:n},{transition:i}){!e!==!n&&(i?e?(i.beforeEnter(t),N(t,!0),i.enter(t)):i.leave(t,(()=>{N(t,!1)})):N(t,e))},beforeUnmount(t,{value:e}){N(t,e)}};function N(t,e){t.style.display=e?t[R]:"none",t[M]=!e}const O=Symbol("");const k=/(^|;)\s*display\s*:/;function D(t,e,n){const i=t.style,s=(0,r.Kg)(n);let o=!1;if(n&&!s){if(e)if((0,r.Kg)(e))for(const t of e.split(";")){const e=t.slice(0,t.indexOf(":")).trim();null==n[e]&&Q(i,e,"")}else for(const t in e)null==n[t]&&Q(i,t,"");for(const t in n)"display"===t&&(o=!0),Q(i,t,n[t])}else if(s){if(e!==n){const t=i[O];t&&(n+=";"+t),i.cssText=n,o=k.test(n)}}else e&&t.removeAttribute("style");R in t&&(t[R]=o?i.display:"",t[M]&&(i.display="none"))}const U=/\s*!important$/;function Q(t,e,n){if((0,r.cy)(n))n.forEach((n=>Q(t,e,n)));else if(null==n&&(n=""),e.startsWith("--"))t.setProperty(e,n);else{const i=V(t,e);U.test(n)?t.setProperty((0,r.Tg)(i),n.replace(U,""),"important"):t[i]=n}}const G=["Webkit","Moz","ms"],H={};function V(t,e){const n=H[e];if(n)return n;let i=(0,r.PT)(e);if("filter"!==i&&i in t)return H[e]=i;i=(0,r.ZH)(i);for(let r=0;r<G.length;r++){const n=G[r]+i;if(n in t)return H[e]=n}return e}const j="http://www.w3.org/1999/xlink";function W(t,e,n,i,s){if(i&&e.startsWith("xlink:"))null==n?t.removeAttributeNS(j,e.slice(6,e.length)):t.setAttributeNS(j,e,n);else{const i=(0,r.J$)(e);null==n||i&&!(0,r.Y2)(n)?t.removeAttribute(e):t.setAttribute(e,i?"":n)}}function z(t,e,n,i,s,o,a){if("innerHTML"===e||"textContent"===e)return i&&a(i,s,o),void(t[e]=null==n?"":n);const l=t.tagName;if("value"===e&&"PROGRESS"!==l&&!l.includes("-")){const i="OPTION"===l?t.getAttribute("value")||"":t.value,r=null==n?"":n;return i===r&&"_value"in t||(t.value=r),null==n&&t.removeAttribute(e),void(t._value=n)}let c=!1;if(""===n||null==n){const i=typeof t[e];"boolean"===i?n=(0,r.Y2)(n):null==n&&"string"===i?(n="",c=!0):"number"===i&&(n=0,c=!0)}try{t[e]=n}catch(u){0}c&&t.removeAttribute(e)}function K(t,e,n,i){t.addEventListener(e,n,i)}function q(t,e,n,i){t.removeEventListener(e,n,i)}const $=Symbol("_vei");function X(t,e,n,i,r=null){const s=t[$]||(t[$]={}),o=s[e];if(i&&o)o.value=i;else{const[n,a]=Z(e);if(i){const o=s[e]=nt(i,r);K(t,n,o,a)}else o&&(q(t,n,o,a),s[e]=void 0)}}const Y=/(?:Once|Passive|Capture)$/;function Z(t){let e;if(Y.test(t)){let n;e={};while(n=t.match(Y))t=t.slice(0,t.length-n[0].length),e[n[0].toLowerCase()]=!0}const n=":"===t[2]?t.slice(3):(0,r.Tg)(t.slice(2));return[n,e]}let J=0;const tt=Promise.resolve(),et=()=>J||(tt.then((()=>J=0)),J=Date.now());function nt(t,e){const n=t=>{if(t._vts){if(t._vts<=n.attached)return}else t._vts=Date.now();(0,i.qL)(it(t,n.value),e,5,[t])};return n.value=t,n.attached=et(),n}function it(t,e){if((0,r.cy)(e)){const n=t.stopImmediatePropagation;return t.stopImmediatePropagation=()=>{n.call(t),t._stopped=!0},e.map((t=>e=>!e._stopped&&t&&t(e)))}return e}const rt=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&t.charCodeAt(2)>96&&t.charCodeAt(2)<123,st=(t,e,n,i,s,o,a,l,c)=>{const u="svg"===s;"class"===e?L(t,i,u):"style"===e?D(t,n,i):(0,r.Mp)(e)?(0,r.CP)(e)||X(t,e,n,i,a):("."===e[0]?(e=e.slice(1),1):"^"===e[0]?(e=e.slice(1),0):ot(t,e,i,u))?z(t,e,i,o,a,l,c):("true-value"===e?t._trueValue=i:"false-value"===e&&(t._falseValue=i),W(t,e,i,u))};function ot(t,e,n,i){if(i)return"innerHTML"===e||"textContent"===e||!!(e in t&&rt(e)&&(0,r.Tn)(n));if("spellcheck"===e||"draggable"===e||"translate"===e)return!1;if("form"===e)return!1;if("list"===e&&"INPUT"===t.tagName)return!1;if("type"===e&&"TEXTAREA"===t.tagName)return!1;if("width"===e||"height"===e){const e=t.tagName;if("IMG"===e||"VIDEO"===e||"CANVAS"===e||"SOURCE"===e)return!1}return(!rt(e)||!(0,r.Kg)(n))&&e in t}
/*! #__NO_SIDE_EFFECTS__ */
/*! #__NO_SIDE_EFFECTS__ */
"undefined"!==typeof HTMLElement&&HTMLElement;const at=new WeakMap,lt=new WeakMap,ct=Symbol("_moveCb"),ut=Symbol("_enterCb"),ht={name:"TransitionGroup",props:(0,r.X$)({},g,{tag:String,moveClass:String}),setup(t,{slots:e}){const n=(0,i.nI)(),r=(0,i.Gy)();let o,a;return(0,i.$u)((()=>{if(!o.length)return;const e=t.moveClass||`${t.name||"v"}-move`;if(!pt(o[0].el,n.vnode.el,e))return;o.forEach(At),o.forEach(dt);const i=o.filter(ft);F(),i.forEach((t=>{const n=t.el,i=n.style;b(n,e),i.transform=i.webkitTransform=i.transitionDuration="";const r=n[ct]=t=>{t&&t.target!==n||t&&!/transform$/.test(t.propertyName)||(n.removeEventListener("transitionend",r),n[ct]=null,x(n,e))};n.addEventListener("transitionend",r)}))})),()=>{const l=(0,s.ux)(t),c=y(l);let u=l.tag||i.FK;o=a,a=e.default?(0,i.Df)(e.default()):[];for(let t=0;t<a.length;t++){const e=a[t];null!=e.key&&(0,i.MZ)(e,(0,i.OW)(e,c,r,n))}if(o)for(let t=0;t<o.length;t++){const e=o[t];(0,i.MZ)(e,(0,i.OW)(e,c,r,n)),at.set(e,e.el.getBoundingClientRect())}return(0,i.bF)(u,null,a)}}};ht.props;function At(t){const e=t.el;e[ct]&&e[ct](),e[ut]&&e[ut]()}function dt(t){lt.set(t,t.el.getBoundingClientRect())}function ft(t){const e=at.get(t),n=lt.get(t),i=e.left-n.left,r=e.top-n.top;if(i||r){const e=t.el.style;return e.transform=e.webkitTransform=`translate(${i}px,${r}px)`,e.transitionDuration="0s",t}}function pt(t,e,n){const i=t.cloneNode(),r=t[d];r&&r.forEach((t=>{t.split(/\s+/).forEach((t=>t&&i.classList.remove(t)))})),n.split(/\s+/).forEach((t=>t&&i.classList.add(t))),i.style.display="none";const s=1===e.nodeType?e:e.parentNode;s.appendChild(i);const{hasTransform:o}=B(i);return s.removeChild(i),o}const gt=t=>{const e=t.props["onUpdate:modelValue"]||!1;return(0,r.cy)(e)?t=>(0,r.DY)(e,t):e};function mt(t){t.target.composing=!0}function vt(t){const e=t.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const yt=Symbol("_assign"),wt={created(t,{modifiers:{lazy:e,trim:n,number:i}},s){t[yt]=gt(s);const o=i||s.props&&"number"===s.props.type;K(t,e?"change":"input",(e=>{if(e.target.composing)return;let i=t.value;n&&(i=i.trim()),o&&(i=(0,r.bB)(i)),t[yt](i)})),n&&K(t,"change",(()=>{t.value=t.value.trim()})),e||(K(t,"compositionstart",mt),K(t,"compositionend",vt),K(t,"change",vt))},mounted(t,{value:e}){t.value=null==e?"":e},beforeUpdate(t,{value:e,modifiers:{lazy:n,trim:i,number:s}},o){if(t[yt]=gt(o),t.composing)return;const a=s||"number"===t.type?(0,r.bB)(t.value):t.value,l=null==e?"":e;if(a!==l){if(document.activeElement===t&&"range"!==t.type){if(n)return;if(i&&t.value.trim()===l)return}t.value=l}}},_t={deep:!0,created(t,e,n){t[yt]=gt(n),K(t,"change",(()=>{const e=t._modelValue,n=St(t),i=t.checked,s=t[yt];if((0,r.cy)(e)){const t=(0,r.u3)(e,n),o=-1!==t;if(i&&!o)s(e.concat(n));else if(!i&&o){const n=[...e];n.splice(t,1),s(n)}}else if((0,r.vM)(e)){const t=new Set(e);i?t.add(n):t.delete(n),s(t)}else s(Bt(t,i))}))},mounted:bt,beforeUpdate(t,e,n){t[yt]=gt(n),bt(t,e,n)}};function bt(t,{value:e,oldValue:n},i){t._modelValue=e,(0,r.cy)(e)?t.checked=(0,r.u3)(e,i.props.value)>-1:(0,r.vM)(e)?t.checked=e.has(i.props.value):e!==n&&(t.checked=(0,r.BX)(e,Bt(t,!0)))}const xt={created(t,{value:e},n){t.checked=(0,r.BX)(e,n.props.value),t[yt]=gt(n),K(t,"change",(()=>{t[yt](St(t))}))},beforeUpdate(t,{value:e,oldValue:n},i){t[yt]=gt(i),e!==n&&(t.checked=(0,r.BX)(e,i.props.value))}},Et={deep:!0,created(t,{value:e,modifiers:{number:n}},s){const o=(0,r.vM)(e);K(t,"change",(()=>{const e=Array.prototype.filter.call(t.options,(t=>t.selected)).map((t=>n?(0,r.bB)(St(t)):St(t)));t[yt](t.multiple?o?new Set(e):e:e[0]),t._assigning=!0,(0,i.dY)((()=>{t._assigning=!1}))})),t[yt]=gt(s)},mounted(t,{value:e,modifiers:{number:n}}){Ct(t,e,n)},beforeUpdate(t,e,n){t[yt]=gt(n)},updated(t,{value:e,modifiers:{number:n}}){t._assigning||Ct(t,e,n)}};function Ct(t,e,n){const i=t.multiple,s=(0,r.cy)(e);if(!i||s||(0,r.vM)(e)){for(let o=0,a=t.options.length;o<a;o++){const a=t.options[o],l=St(a);if(i)if(s){const t=typeof l;a.selected="string"===t||"number"===t?e.includes(n?(0,r.bB)(l):l):(0,r.u3)(e,l)>-1}else a.selected=e.has(l);else if((0,r.BX)(St(a),e))return void(t.selectedIndex!==o&&(t.selectedIndex=o))}i||-1===t.selectedIndex||(t.selectedIndex=-1)}}function St(t){return"_value"in t?t._value:t.value}function Bt(t,e){const n=e?"_trueValue":"_falseValue";return n in t?t[n]:e}const Tt={created(t,e,n){Ft(t,e,n,null,"created")},mounted(t,e,n){Ft(t,e,n,null,"mounted")},beforeUpdate(t,e,n,i){Ft(t,e,n,i,"beforeUpdate")},updated(t,e,n,i){Ft(t,e,n,i,"updated")}};function It(t,e){switch(t){case"SELECT":return Et;case"TEXTAREA":return wt;default:switch(e){case"checkbox":return _t;case"radio":return xt;default:return wt}}}function Ft(t,e,n,i,r){const s=It(t.tagName,n.props&&n.props.type),o=s[r];o&&o(t,e,n,i)}const Lt=["ctrl","shift","alt","meta"],Rt={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Lt.some((n=>t[`${n}Key`]&&!e.includes(n)))},Mt=(t,e)=>{const n=t._withMods||(t._withMods={}),i=e.join(".");return n[i]||(n[i]=(n,...i)=>{for(let t=0;t<e.length;t++){const i=Rt[e[t]];if(i&&i(n,e))return}return t(n,...i)})},Pt={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},Nt=(t,e)=>{const n=t._withKeys||(t._withKeys={}),i=e.join(".");return n[i]||(n[i]=n=>{if(!("key"in n))return;const i=(0,r.Tg)(n.key);return e.some((t=>t===i||Pt[t]===i))?t(n):void 0})},Ot=(0,r.X$)({patchProp:st},u);let kt;function Dt(){return kt||(kt=(0,i.K9)(Ot))}const Ut=(...t)=>{const e=Dt().createApp(...t);const{mount:n}=e;return e.mount=t=>{const i=Gt(t);if(!i)return;const s=e._component;(0,r.Tn)(s)||s.render||s.template||(s.template=i.innerHTML),i.innerHTML="";const o=n(i,!1,Qt(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},e};function Qt(t){return t instanceof SVGElement?"svg":"function"===typeof MathMLElement&&t instanceof MathMLElement?"mathml":void 0}function Gt(t){if((0,r.Kg)(t)){const e=document.querySelector(t);return e}return t}},4232:function(t,e,n){"use strict";n.d(e,{$3:function(){return d},$H:function(){return k},BH:function(){return W},BX:function(){return it},Bm:function(){return _},C4:function(){return Y},CE:function(){return p},CP:function(){return c},DY:function(){return D},Gv:function(){return b},J$:function(){return tt},Kg:function(){return w},MZ:function(){return r},Mp:function(){return l},NO:function(){return a},Oj:function(){return s},PT:function(){return R},Qd:function(){return B},Ro:function(){return G},SU:function(){return I},TF:function(){return h},Tg:function(){return P},Tn:function(){return y},Tr:function(){return z},We:function(){return V},X$:function(){return u},Y2:function(){return et},ZH:function(){return N},Zf:function(){return S},_B:function(){return Z},bB:function(){return Q},cy:function(){return f},gd:function(){return v},pD:function(){return i},rU:function(){return O},tE:function(){return o},u3:function(){return rt},vM:function(){return g},v_:function(){return st},yI:function(){return T},yL:function(){return x},yQ:function(){return U}});n(4114);
/**
* @vue/shared v3.4.21
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/
function i(t,e){const n=new Set(t.split(","));return e?t=>n.has(t.toLowerCase()):t=>n.has(t)}const r={},s=[],o=()=>{},a=()=>!1,l=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),c=t=>t.startsWith("onUpdate:"),u=Object.assign,h=(t,e)=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)},A=Object.prototype.hasOwnProperty,d=(t,e)=>A.call(t,e),f=Array.isArray,p=t=>"[object Map]"===C(t),g=t=>"[object Set]"===C(t),m=t=>"[object Date]"===C(t),v=t=>"[object RegExp]"===C(t),y=t=>"function"===typeof t,w=t=>"string"===typeof t,_=t=>"symbol"===typeof t,b=t=>null!==t&&"object"===typeof t,x=t=>(b(t)||y(t))&&y(t.then)&&y(t.catch),E=Object.prototype.toString,C=t=>E.call(t),S=t=>C(t).slice(8,-1),B=t=>"[object Object]"===C(t),T=t=>w(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,I=i(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),F=t=>{const e=Object.create(null);return n=>{const i=e[n];return i||(e[n]=t(n))}},L=/-(\w)/g,R=F((t=>t.replace(L,((t,e)=>e?e.toUpperCase():"")))),M=/\B([A-Z])/g,P=F((t=>t.replace(M,"-$1").toLowerCase())),N=F((t=>t.charAt(0).toUpperCase()+t.slice(1))),O=F((t=>{const e=t?`on${N(t)}`:"";return e})),k=(t,e)=>!Object.is(t,e),D=(t,e)=>{for(let n=0;n<t.length;n++)t[n](e)},U=(t,e,n)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value:n})},Q=t=>{const e=parseFloat(t);return isNaN(e)?t:e},G=t=>{const e=w(t)?Number(t):NaN;return isNaN(e)?t:e};let H;const V=()=>H||(H="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:{});const j="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error",W=i(j);function z(t){if(f(t)){const e={};for(let n=0;n<t.length;n++){const i=t[n],r=w(i)?X(i):z(i);if(r)for(const t in r)e[t]=r[t]}return e}if(w(t)||b(t))return t}const K=/;(?![^(]*\))/g,q=/:([^]+)/,$=/\/\*[^]*?\*\//g;function X(t){const e={};return t.replace($,"").split(K).forEach((t=>{if(t){const n=t.split(q);n.length>1&&(e[n[0].trim()]=n[1].trim())}})),e}function Y(t){let e="";if(w(t))e=t;else if(f(t))for(let n=0;n<t.length;n++){const i=Y(t[n]);i&&(e+=i+" ")}else if(b(t))for(const n in t)t[n]&&(e+=n+" ");return e.trim()}function Z(t){if(!t)return null;let{class:e,style:n}=t;return e&&!w(e)&&(t.class=Y(e)),n&&(t.style=z(n)),t}const J="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",tt=i(J);function et(t){return!!t||""===t}function nt(t,e){if(t.length!==e.length)return!1;let n=!0;for(let i=0;n&&i<t.length;i++)n=it(t[i],e[i]);return n}function it(t,e){if(t===e)return!0;let n=m(t),i=m(e);if(n||i)return!(!n||!i)&&t.getTime()===e.getTime();if(n=_(t),i=_(e),n||i)return t===e;if(n=f(t),i=f(e),n||i)return!(!n||!i)&&nt(t,e);if(n=b(t),i=b(e),n||i){if(!n||!i)return!1;const r=Object.keys(t).length,s=Object.keys(e).length;if(r!==s)return!1;for(const n in t){const i=t.hasOwnProperty(n),r=e.hasOwnProperty(n);if(i&&!r||!i&&r||!it(t[n],e[n]))return!1}}return String(t)===String(e)}function rt(t,e){return t.findIndex((t=>it(t,e)))}const st=t=>w(t)?t:null==t?"":f(t)||b(t)&&(t.toString===E||!y(t.toString))?JSON.stringify(t,ot,2):String(t),ot=(t,e)=>e&&e.__v_isRef?ot(t,e.value):p(e)?{[`Map(${e.size})`]:[...e.entries()].reduce(((t,[e,n],i)=>(t[at(e,i)+" =>"]=n,t)),{})}:g(e)?{[`Set(${e.size})`]:[...e.values()].map((t=>at(t)))}:_(e)?at(e):!b(e)||f(e)||B(e)?e:String(e),at=(t,e="")=>{var n;return _(t)?`Symbol(${null!=(n=t.description)?n:e})`:t}},5015:function(t,e,n){"use strict";n.d(e,{Ay:function(){return km}});var i={};n.r(i),n.d(i,{afterMain:function(){return B},afterRead:function(){return E},afterWrite:function(){return F},applyStyles:function(){return U},arrow:function(){return ht},auto:function(){return A},basePlacements:function(){return d},beforeMain:function(){return C},beforeRead:function(){return b},beforeWrite:function(){return T},bottom:function(){return c},clippingParents:function(){return g},computeStyles:function(){return mt},createPopper:function(){return fe},createPopperBase:function(){return Ae},createPopperLite:function(){return ge},detectOverflow:function(){return Dt},end:function(){return p},eventListeners:function(){return wt},flip:function(){return Ht},hide:function(){return zt},left:function(){return h},main:function(){return S},modifierPhases:function(){return L},offset:function(){return $t},placements:function(){return _},popper:function(){return v},popperGenerator:function(){return he},popperOffsets:function(){return Yt},preventOverflow:function(){return te},read:function(){return x},reference:function(){return y},right:function(){return u},start:function(){return f},top:function(){return l},variationPlacements:function(){return w},viewport:function(){return m},write:function(){return I}});n(4114);var r=n(144),s=n(6768),o=n(4232),a=n(5130),l="top",c="bottom",u="right",h="left",A="auto",d=[l,c,u,h],f="start",p="end",g="clippingParents",m="viewport",v="popper",y="reference",w=d.reduce((function(t,e){return t.concat([e+"-"+f,e+"-"+p])}),[]),_=[].concat(d,[A]).reduce((function(t,e){return t.concat([e,e+"-"+f,e+"-"+p])}),[]),b="beforeRead",x="read",E="afterRead",C="beforeMain",S="main",B="afterMain",T="beforeWrite",I="write",F="afterWrite",L=[b,x,E,C,S,B,T,I,F];function R(t){return t?(t.nodeName||"").toLowerCase():null}function M(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function P(t){var e=M(t).Element;return t instanceof e||t instanceof Element}function N(t){var e=M(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function O(t){if("undefined"===typeof ShadowRoot)return!1;var e=M(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function k(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];N(r)&&R(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))}function D(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},s=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]),o=s.reduce((function(t,e){return t[e]="",t}),{});N(i)&&R(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}}var U={name:"applyStyles",enabled:!0,phase:"write",fn:k,effect:D,requires:["computeStyles"]};function Q(t){return t.split("-")[0]}var G=Math.max,H=Math.min,V=Math.round;function j(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function W(){return!/^((?!chrome|android).)*safari/i.test(j())}function z(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,s=1;e&&N(t)&&(r=t.offsetWidth>0&&V(i.width)/t.offsetWidth||1,s=t.offsetHeight>0&&V(i.height)/t.offsetHeight||1);var o=P(t)?M(t):window,a=o.visualViewport,l=!W()&&n,c=(i.left+(l&&a?a.offsetLeft:0))/r,u=(i.top+(l&&a?a.offsetTop:0))/s,h=i.width/r,A=i.height/s;return{width:h,height:A,top:u,right:c+h,bottom:u+A,left:c,x:c,y:u}}function K(t){var e=z(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function q(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&O(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function $(t){return M(t).getComputedStyle(t)}function X(t){return["table","td","th"].indexOf(R(t))>=0}function Y(t){return((P(t)?t.ownerDocument:t.document)||window.document).documentElement}function Z(t){return"html"===R(t)?t:t.assignedSlot||t.parentNode||(O(t)?t.host:null)||Y(t)}function J(t){return N(t)&&"fixed"!==$(t).position?t.offsetParent:null}function tt(t){var e=/firefox/i.test(j()),n=/Trident/i.test(j());if(n&&N(t)){var i=$(t);if("fixed"===i.position)return null}var r=Z(t);O(r)&&(r=r.host);while(N(r)&&["html","body"].indexOf(R(r))<0){var s=$(r);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return r;r=r.parentNode}return null}function et(t){var e=M(t),n=J(t);while(n&&X(n)&&"static"===$(n).position)n=J(n);return n&&("html"===R(n)||"body"===R(n)&&"static"===$(n).position)?e:n||tt(t)||e}function nt(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function it(t,e,n){return G(t,H(e,n))}function rt(t,e,n){var i=it(t,e,n);return i>n?n:i}function st(){return{top:0,right:0,bottom:0,left:0}}function ot(t){return Object.assign({},st(),t)}function at(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}var lt=function(t,e){return t="function"===typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t,ot("number"!==typeof t?t:at(t,d))};function ct(t){var e,n=t.state,i=t.name,r=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,a=Q(n.placement),A=nt(a),d=[h,u].indexOf(a)>=0,f=d?"height":"width";if(s&&o){var p=lt(r.padding,n),g=K(s),m="y"===A?l:h,v="y"===A?c:u,y=n.rects.reference[f]+n.rects.reference[A]-o[A]-n.rects.popper[f],w=o[A]-n.rects.reference[A],_=et(s),b=_?"y"===A?_.clientHeight||0:_.clientWidth||0:0,x=y/2-w/2,E=p[m],C=b-g[f]-p[v],S=b/2-g[f]/2+x,B=it(E,S,C),T=A;n.modifiersData[i]=(e={},e[T]=B,e.centerOffset=B-S,e)}}function ut(t){var e=t.state,n=t.options,i=n.element,r=void 0===i?"[data-popper-arrow]":i;null!=r&&("string"!==typeof r||(r=e.elements.popper.querySelector(r),r))&&q(e.elements.popper,r)&&(e.elements.arrow=r)}var ht={name:"arrow",enabled:!0,phase:"main",fn:ct,effect:ut,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function At(t){return t.split("-")[1]}var dt={top:"auto",right:"auto",bottom:"auto",left:"auto"};function ft(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:V(n*r)/r||0,y:V(i*r)/r||0}}function pt(t){var e,n=t.popper,i=t.popperRect,r=t.placement,s=t.variation,o=t.offsets,a=t.position,A=t.gpuAcceleration,d=t.adaptive,f=t.roundOffsets,g=t.isFixed,m=o.x,v=void 0===m?0:m,y=o.y,w=void 0===y?0:y,_="function"===typeof f?f({x:v,y:w}):{x:v,y:w};v=_.x,w=_.y;var b=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),E=h,C=l,S=window;if(d){var B=et(n),T="clientHeight",I="clientWidth";if(B===M(n)&&(B=Y(n),"static"!==$(B).position&&"absolute"===a&&(T="scrollHeight",I="scrollWidth")),r===l||(r===h||r===u)&&s===p){C=c;var F=g&&B===S&&S.visualViewport?S.visualViewport.height:B[T];w-=F-i.height,w*=A?1:-1}if(r===h||(r===l||r===c)&&s===p){E=u;var L=g&&B===S&&S.visualViewport?S.visualViewport.width:B[I];v-=L-i.width,v*=A?1:-1}}var R,P=Object.assign({position:a},d&&dt),N=!0===f?ft({x:v,y:w},M(n)):{x:v,y:w};return v=N.x,w=N.y,A?Object.assign({},P,(R={},R[C]=x?"0":"",R[E]=b?"0":"",R.transform=(S.devicePixelRatio||1)<=1?"translate("+v+"px, "+w+"px)":"translate3d("+v+"px, "+w+"px, 0)",R)):Object.assign({},P,(e={},e[C]=x?w+"px":"",e[E]=b?v+"px":"",e.transform="",e))}function gt(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,s=n.adaptive,o=void 0===s||s,a=n.roundOffsets,l=void 0===a||a,c={placement:Q(e.placement),variation:At(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,pt(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,pt(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}var mt={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:gt,data:{}},vt={passive:!0};function yt(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,s=void 0===r||r,o=i.resize,a=void 0===o||o,l=M(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach((function(t){t.addEventListener("scroll",n.update,vt)})),a&&l.addEventListener("resize",n.update,vt),function(){s&&c.forEach((function(t){t.removeEventListener("scroll",n.update,vt)})),a&&l.removeEventListener("resize",n.update,vt)}}var wt={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:yt,data:{}},_t={left:"right",right:"left",bottom:"top",top:"bottom"};function bt(t){return t.replace(/left|right|bottom|top/g,(function(t){return _t[t]}))}var xt={start:"end",end:"start"};function Et(t){return t.replace(/start|end/g,(function(t){return xt[t]}))}function Ct(t){var e=M(t),n=e.pageXOffset,i=e.pageYOffset;return{scrollLeft:n,scrollTop:i}}function St(t){return z(Y(t)).left+Ct(t).scrollLeft}function Bt(t,e){var n=M(t),i=Y(t),r=n.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,l=0;if(r){s=r.width,o=r.height;var c=W();(c||!c&&"fixed"===e)&&(a=r.offsetLeft,l=r.offsetTop)}return{width:s,height:o,x:a+St(t),y:l}}function Tt(t){var e,n=Y(t),i=Ct(t),r=null==(e=t.ownerDocument)?void 0:e.body,s=G(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),o=G(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),a=-i.scrollLeft+St(t),l=-i.scrollTop;return"rtl"===$(r||n).direction&&(a+=G(n.clientWidth,r?r.clientWidth:0)-s),{width:s,height:o,x:a,y:l}}function It(t){var e=$(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Ft(t){return["html","body","#document"].indexOf(R(t))>=0?t.ownerDocument.body:N(t)&&It(t)?t:Ft(Z(t))}function Lt(t,e){var n;void 0===e&&(e=[]);var i=Ft(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),s=M(i),o=r?[s].concat(s.visualViewport||[],It(i)?i:[]):i,a=e.concat(o);return r?a:a.concat(Lt(Z(o)))}function Rt(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Mt(t,e){var n=z(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Pt(t,e,n){return e===m?Rt(Bt(t,n)):P(e)?Mt(e,n):Rt(Tt(Y(t)))}function Nt(t){var e=Lt(Z(t)),n=["absolute","fixed"].indexOf($(t).position)>=0,i=n&&N(t)?et(t):t;return P(i)?e.filter((function(t){return P(t)&&q(t,i)&&"body"!==R(t)})):[]}function Ot(t,e,n,i){var r="clippingParents"===e?Nt(t):[].concat(e),s=[].concat(r,[n]),o=s[0],a=s.reduce((function(e,n){var r=Pt(t,n,i);return e.top=G(r.top,e.top),e.right=H(r.right,e.right),e.bottom=H(r.bottom,e.bottom),e.left=G(r.left,e.left),e}),Pt(t,o,i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}function kt(t){var e,n=t.reference,i=t.element,r=t.placement,s=r?Q(r):null,o=r?At(r):null,a=n.x+n.width/2-i.width/2,A=n.y+n.height/2-i.height/2;switch(s){case l:e={x:a,y:n.y-i.height};break;case c:e={x:a,y:n.y+n.height};break;case u:e={x:n.x+n.width,y:A};break;case h:e={x:n.x-i.width,y:A};break;default:e={x:n.x,y:n.y}}var d=s?nt(s):null;if(null!=d){var g="y"===d?"height":"width";switch(o){case f:e[d]=e[d]-(n[g]/2-i[g]/2);break;case p:e[d]=e[d]+(n[g]/2-i[g]/2);break;default:}}return e}function Dt(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,s=n.strategy,o=void 0===s?t.strategy:s,a=n.boundary,h=void 0===a?g:a,A=n.rootBoundary,f=void 0===A?m:A,p=n.elementContext,w=void 0===p?v:p,_=n.altBoundary,b=void 0!==_&&_,x=n.padding,E=void 0===x?0:x,C=ot("number"!==typeof E?E:at(E,d)),S=w===v?y:v,B=t.rects.popper,T=t.elements[b?S:w],I=Ot(P(T)?T:T.contextElement||Y(t.elements.popper),h,f,o),F=z(t.elements.reference),L=kt({reference:F,element:B,strategy:"absolute",placement:r}),R=Rt(Object.assign({},B,L)),M=w===v?R:F,N={top:I.top-M.top+C.top,bottom:M.bottom-I.bottom+C.bottom,left:I.left-M.left+C.left,right:M.right-I.right+C.right},O=t.modifiersData.offset;if(w===v&&O){var k=O[r];Object.keys(N).forEach((function(t){var e=[u,c].indexOf(t)>=0?1:-1,n=[l,c].indexOf(t)>=0?"y":"x";N[t]+=k[n]*e}))}return N}function Ut(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,s=n.rootBoundary,o=n.padding,a=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?_:l,u=At(i),h=u?a?w:w.filter((function(t){return At(t)===u})):d,A=h.filter((function(t){return c.indexOf(t)>=0}));0===A.length&&(A=h);var f=A.reduce((function(e,n){return e[n]=Dt(t,{placement:n,boundary:r,rootBoundary:s,padding:o})[Q(n)],e}),{});return Object.keys(f).sort((function(t,e){return f[t]-f[e]}))}function Qt(t){if(Q(t)===A)return[];var e=bt(t);return[Et(t),e,Et(e)]}function Gt(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0===o||o,d=n.fallbackPlacements,p=n.padding,g=n.boundary,m=n.rootBoundary,v=n.altBoundary,y=n.flipVariations,w=void 0===y||y,_=n.allowedAutoPlacements,b=e.options.placement,x=Q(b),E=x===b,C=d||(E||!w?[bt(b)]:Qt(b)),S=[b].concat(C).reduce((function(t,n){return t.concat(Q(n)===A?Ut(e,{placement:n,boundary:g,rootBoundary:m,padding:p,flipVariations:w,allowedAutoPlacements:_}):n)}),[]),B=e.rects.reference,T=e.rects.popper,I=new Map,F=!0,L=S[0],R=0;R<S.length;R++){var M=S[R],P=Q(M),N=At(M)===f,O=[l,c].indexOf(P)>=0,k=O?"width":"height",D=Dt(e,{placement:M,boundary:g,rootBoundary:m,altBoundary:v,padding:p}),U=O?N?u:h:N?c:l;B[k]>T[k]&&(U=bt(U));var G=bt(U),H=[];if(s&&H.push(D[P]<=0),a&&H.push(D[U]<=0,D[G]<=0),H.every((function(t){return t}))){L=M,F=!1;break}I.set(M,H)}if(F)for(var V=w?3:1,j=function(t){var e=S.find((function(e){var n=I.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return L=e,"break"},W=V;W>0;W--){var z=j(W);if("break"===z)break}e.placement!==L&&(e.modifiersData[i]._skip=!0,e.placement=L,e.reset=!0)}}var Ht={name:"flip",enabled:!0,phase:"main",fn:Gt,requiresIfExists:["offset"],data:{_skip:!1}};function Vt(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function jt(t){return[l,u,c,h].some((function(e){return t[e]>=0}))}function Wt(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,s=e.modifiersData.preventOverflow,o=Dt(e,{elementContext:"reference"}),a=Dt(e,{altBoundary:!0}),l=Vt(o,i),c=Vt(a,r,s),u=jt(l),h=jt(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}var zt={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:Wt};function Kt(t,e,n){var i=Q(t),r=[h,l].indexOf(i)>=0?-1:1,s="function"===typeof n?n(Object.assign({},e,{placement:t})):n,o=s[0],a=s[1];return o=o||0,a=(a||0)*r,[h,u].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}function qt(t){var e=t.state,n=t.options,i=t.name,r=n.offset,s=void 0===r?[0,0]:r,o=_.reduce((function(t,n){return t[n]=Kt(n,e.rects,s),t}),{}),a=o[e.placement],l=a.x,c=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=o}var $t={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:qt};function Xt(t){var e=t.state,n=t.name;e.modifiersData[n]=kt({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})}var Yt={name:"popperOffsets",enabled:!0,phase:"read",fn:Xt,data:{}};function Zt(t){return"x"===t?"y":"x"}function Jt(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,s=void 0===r||r,o=n.altAxis,a=void 0!==o&&o,A=n.boundary,d=n.rootBoundary,p=n.altBoundary,g=n.padding,m=n.tether,v=void 0===m||m,y=n.tetherOffset,w=void 0===y?0:y,_=Dt(e,{boundary:A,rootBoundary:d,padding:g,altBoundary:p}),b=Q(e.placement),x=At(e.placement),E=!x,C=nt(b),S=Zt(C),B=e.modifiersData.popperOffsets,T=e.rects.reference,I=e.rects.popper,F="function"===typeof w?w(Object.assign({},e.rects,{placement:e.placement})):w,L="number"===typeof F?{mainAxis:F,altAxis:F}:Object.assign({mainAxis:0,altAxis:0},F),R=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,M={x:0,y:0};if(B){if(s){var P,N="y"===C?l:h,O="y"===C?c:u,k="y"===C?"height":"width",D=B[C],U=D+_[N],V=D-_[O],j=v?-I[k]/2:0,W=x===f?T[k]:I[k],z=x===f?-I[k]:-T[k],q=e.elements.arrow,$=v&&q?K(q):{width:0,height:0},X=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:st(),Y=X[N],Z=X[O],J=it(0,T[k],$[k]),tt=E?T[k]/2-j-J-Y-L.mainAxis:W-J-Y-L.mainAxis,ot=E?-T[k]/2+j+J+Z+L.mainAxis:z+J+Z+L.mainAxis,at=e.elements.arrow&&et(e.elements.arrow),lt=at?"y"===C?at.clientTop||0:at.clientLeft||0:0,ct=null!=(P=null==R?void 0:R[C])?P:0,ut=D+tt-ct-lt,ht=D+ot-ct,dt=it(v?H(U,ut):U,D,v?G(V,ht):V);B[C]=dt,M[C]=dt-D}if(a){var ft,pt="x"===C?l:h,gt="x"===C?c:u,mt=B[S],vt="y"===S?"height":"width",yt=mt+_[pt],wt=mt-_[gt],_t=-1!==[l,h].indexOf(b),bt=null!=(ft=null==R?void 0:R[S])?ft:0,xt=_t?yt:mt-T[vt]-I[vt]-bt+L.altAxis,Et=_t?mt+T[vt]+I[vt]-bt-L.altAxis:wt,Ct=v&&_t?rt(xt,mt,Et):it(v?xt:yt,mt,v?Et:wt);B[S]=Ct,M[S]=Ct-mt}e.modifiersData[i]=M}}var te={name:"preventOverflow",enabled:!0,phase:"main",fn:Jt,requiresIfExists:["offset"]};function ee(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function ne(t){return t!==M(t)&&N(t)?ee(t):Ct(t)}function ie(t){var e=t.getBoundingClientRect(),n=V(e.width)/t.offsetWidth||1,i=V(e.height)/t.offsetHeight||1;return 1!==n||1!==i}function re(t,e,n){void 0===n&&(n=!1);var i=N(e),r=N(e)&&ie(e),s=Y(e),o=z(t,r,n),a={scrollLeft:0,scrollTop:0},l={x:0,y:0};return(i||!i&&!n)&&(("body"!==R(e)||It(s))&&(a=ne(e)),N(e)?(l=z(e,!0),l.x+=e.clientLeft,l.y+=e.clientTop):s&&(l.x=St(s))),{x:o.left+a.scrollLeft-l.x,y:o.top+a.scrollTop-l.y,width:o.width,height:o.height}}function se(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name);var s=[].concat(t.requires||[],t.requiresIfExists||[]);s.forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}function oe(t){var e=se(t);return L.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}function ae(t){var e;return function(){return e||(e=new Promise((function(n){Promise.resolve().then((function(){e=void 0,n(t())}))}))),e}}function le(t){var e=t.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{});return Object.keys(e).map((function(t){return e[t]}))}var ce={placement:"bottom",modifiers:[],strategy:"absolute"};function ue(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"===typeof t.getBoundingClientRect)}))}function he(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,s=void 0===r?ce:r;return function(t,e,n){void 0===n&&(n=s);var r={placement:"bottom",orderedModifiers:[],options:Object.assign({},ce,s),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},o=[],a=!1,l={state:r,setOptions:function(n){var o="function"===typeof n?n(r.options):n;u(),r.options=Object.assign({},s,r.options,o),r.scrollParents={reference:P(t)?Lt(t):t.contextElement?Lt(t.contextElement):[],popper:Lt(e)};var a=oe(le([].concat(i,r.options.modifiers)));return r.orderedModifiers=a.filter((function(t){return t.enabled})),c(),l.update()},forceUpdate:function(){if(!a){var t=r.elements,e=t.reference,n=t.popper;if(ue(e,n)){r.rects={reference:re(e,et(n),"fixed"===r.options.strategy),popper:K(n)},r.reset=!1,r.placement=r.options.placement,r.orderedModifiers.forEach((function(t){return r.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<r.orderedModifiers.length;i++)if(!0!==r.reset){var s=r.orderedModifiers[i],o=s.fn,c=s.options,u=void 0===c?{}:c,h=s.name;"function"===typeof o&&(r=o({state:r,options:u,name:h,instance:l})||r)}else r.reset=!1,i=-1}}},update:ae((function(){return new Promise((function(t){l.forceUpdate(),t(r)}))})),destroy:function(){u(),a=!0}};if(!ue(t,e))return l;function c(){r.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,s=t.effect;if("function"===typeof s){var a=s({state:r,name:e,instance:l,options:i}),c=function(){};o.push(a||c)}}))}function u(){o.forEach((function(t){return t()})),o=[]}return l.setOptions(n).then((function(t){!a&&n.onFirstUpdate&&n.onFirstUpdate(t)})),l}}var Ae=he(),de=[wt,Yt,mt,U,$t,Ht,te,ht,zt],fe=he({defaultModifiers:de}),pe=[wt,Yt,mt,U],ge=he({defaultModifiers:pe});
/*!
  * Bootstrap v5.3.3 (https://getbootstrap.com/)
  * Copyright 2011-2024 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */
const me=new Map,ve={set(t,e,n){me.has(t)||me.set(t,new Map);const i=me.get(t);i.has(e)||0===i.size?i.set(e,n):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(i.keys())[0]}.`)},get(t,e){return me.has(t)&&me.get(t).get(e)||null},remove(t,e){if(!me.has(t))return;const n=me.get(t);n.delete(e),0===n.size&&me.delete(t)}},ye=1e6,we=1e3,_e="transitionend",be=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),xe=t=>null===t||void 0===t?`${t}`:Object.prototype.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase(),Ee=t=>{do{t+=Math.floor(Math.random()*ye)}while(document.getElementById(t));return t},Ce=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],(Number.parseFloat(e)+Number.parseFloat(n))*we):0},Se=t=>{t.dispatchEvent(new Event(_e))},Be=t=>!(!t||"object"!==typeof t)&&("undefined"!==typeof t.jquery&&(t=t[0]),"undefined"!==typeof t.nodeType),Te=t=>Be(t)?t.jquery?t[0]:t:"string"===typeof t&&t.length>0?document.querySelector(be(t)):null,Ie=t=>{if(!Be(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},Fe=t=>!t||t.nodeType!==Node.ELEMENT_NODE||(!!t.classList.contains("disabled")||("undefined"!==typeof t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled"))),Le=t=>{if(!document.documentElement.attachShadow)return null;if("function"===typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?Le(t.parentNode):null},Re=()=>{},Me=t=>{t.offsetHeight},Pe=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,Ne=[],Oe=t=>{"loading"===document.readyState?(Ne.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of Ne)t()})),Ne.push(t)):t()},ke=()=>"rtl"===document.documentElement.dir,De=t=>{Oe((()=>{const e=Pe();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}}))},Ue=(t,e=[],n=t)=>"function"===typeof t?t(...e):n,Qe=(t,e,n=!0)=>{if(!n)return void Ue(t);const i=5,r=Ce(e)+i;let s=!1;const o=({target:n})=>{n===e&&(s=!0,e.removeEventListener(_e,o),Ue(t))};e.addEventListener(_e,o),setTimeout((()=>{s||Se(e)}),r)},Ge=(t,e,n,i)=>{const r=t.length;let s=t.indexOf(e);return-1===s?!n&&i?t[r-1]:t[0]:(s+=n?1:-1,i&&(s=(s+r)%r),t[Math.max(0,Math.min(s,r-1))])},He=/[^.]*(?=\..*)\.|.*/,Ve=/\..*/,je=/::\d+$/,We={};let ze=1;const Ke={mouseenter:"mouseover",mouseleave:"mouseout"},qe=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function $e(t,e){return e&&`${e}::${ze++}`||t.uidEvent||ze++}function Xe(t){const e=$e(t);return t.uidEvent=e,We[e]=We[e]||{},We[e]}function Ye(t,e){return function n(i){return an(i,{delegateTarget:t}),n.oneOff&&on.off(t,i.type,e),e.apply(t,[i])}}function Ze(t,e,n){return function i(r){const s=t.querySelectorAll(e);for(let{target:o}=r;o&&o!==this;o=o.parentNode)for(const a of s)if(a===o)return an(r,{delegateTarget:o}),i.oneOff&&on.off(t,r.type,e,n),n.apply(o,[r])}}function Je(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function tn(t,e,n){const i="string"===typeof e,r=i?n:e||n;let s=sn(t);return qe.has(s)||(s=t),[i,r,s]}function en(t,e,n,i,r){if("string"!==typeof e||!t)return;let[s,o,a]=tn(e,n,i);if(e in Ke){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};o=t(o)}const l=Xe(t),c=l[a]||(l[a]={}),u=Je(c,o,s?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const h=$e(o,e.replace(He,"")),A=s?Ze(t,n,o):Ye(t,o);A.delegationSelector=s?n:null,A.callable=o,A.oneOff=r,A.uidEvent=h,c[h]=A,t.addEventListener(a,A,s)}function nn(t,e,n,i,r){const s=Je(e[n],i,r);s&&(t.removeEventListener(n,s,Boolean(r)),delete e[n][s.uidEvent])}function rn(t,e,n,i){const r=e[n]||{};for(const[s,o]of Object.entries(r))s.includes(i)&&nn(t,e,n,o.callable,o.delegationSelector)}function sn(t){return t=t.replace(Ve,""),Ke[t]||t}const on={on(t,e,n,i){en(t,e,n,i,!1)},one(t,e,n,i){en(t,e,n,i,!0)},off(t,e,n,i){if("string"!==typeof e||!t)return;const[r,s,o]=tn(e,n,i),a=o!==e,l=Xe(t),c=l[o]||{},u=e.startsWith(".");if("undefined"===typeof s){if(u)for(const n of Object.keys(l))rn(t,l,n,e.slice(1));for(const[n,i]of Object.entries(c)){const r=n.replace(je,"");a&&!e.includes(r)||nn(t,l,o,i.callable,i.delegationSelector)}}else{if(!Object.keys(c).length)return;nn(t,l,o,s,r?n:null)}},trigger(t,e,n){if("string"!==typeof e||!t)return null;const i=Pe(),r=sn(e),s=e!==r;let o=null,a=!0,l=!0,c=!1;s&&i&&(o=i.Event(e,n),i(t).trigger(o),a=!o.isPropagationStopped(),l=!o.isImmediatePropagationStopped(),c=o.isDefaultPrevented());const u=an(new Event(e,{bubbles:a,cancelable:!0}),n);return c&&u.preventDefault(),l&&t.dispatchEvent(u),u.defaultPrevented&&o&&o.preventDefault(),u}};function an(t,e={}){for(const[i,r]of Object.entries(e))try{t[i]=r}catch(n){Object.defineProperty(t,i,{configurable:!0,get(){return r}})}return t}function ln(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!==typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function cn(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const un={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${cn(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${cn(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=ln(t.dataset[i])}return e},getDataAttribute(t,e){return ln(t.getAttribute(`data-bs-${cn(e)}`))}};class hn{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=Be(e)?un.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"===typeof n?n:{},...Be(e)?un.getDataAttributes(e):{},..."object"===typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[n,i]of Object.entries(e)){const e=t[n],r=Be(e)?"element":xe(e);if(!new RegExp(i).test(r))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${n}" provided type "${r}" but expected type "${i}".`)}}}const An="5.3.3";class dn extends hn{constructor(t,e){super(),t=Te(t),t&&(this._element=t,this._config=this._getConfig(e),ve.set(this._element,this.constructor.DATA_KEY,this))}dispose(){ve.remove(this._element,this.constructor.DATA_KEY),on.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){Qe(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return ve.get(Te(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"===typeof e?e:null)}static get VERSION(){return An}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const fn=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e?e.split(",").map((t=>be(t))).join(","):null},pn={find(t,e=document.documentElement){return[].concat(...Element.prototype.querySelectorAll.call(e,t))},findOne(t,e=document.documentElement){return Element.prototype.querySelector.call(e,t)},children(t,e){return[].concat(...t.children).filter((t=>t.matches(e)))},parents(t,e){const n=[];let i=t.parentNode.closest(e);while(i)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;while(n){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;while(n){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!Fe(t)&&Ie(t)))},getSelectorFromElement(t){const e=fn(t);return e&&pn.findOne(e)?e:null},getElementFromSelector(t){const e=fn(t);return e?pn.findOne(e):null},getMultipleElementsFromSelector(t){const e=fn(t);return e?pn.find(e):[]}},gn=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;on.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),Fe(this))return;const r=pn.getElementFromSelector(this)||this.closest(`.${i}`),s=t.getOrCreateInstance(r);s[e]()}))},mn="alert",vn="bs.alert",yn=`.${vn}`,wn=`close${yn}`,_n=`closed${yn}`,bn="fade",xn="show";class En extends dn{static get NAME(){return mn}close(){const t=on.trigger(this._element,wn);if(t.defaultPrevented)return;this._element.classList.remove(xn);const e=this._element.classList.contains(bn);this._queueCallback((()=>this._destroyElement()),this._element,e)}_destroyElement(){this._element.remove(),on.trigger(this._element,_n),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=En.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}gn(En,"close"),De(En);const Cn="button",Sn="bs.button",Bn=`.${Sn}`,Tn=".data-api",In="active",Fn='[data-bs-toggle="button"]',Ln=`click${Bn}${Tn}`;class Rn extends dn{static get NAME(){return Cn}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle(In))}static jQueryInterface(t){return this.each((function(){const e=Rn.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}on.on(document,Ln,Fn,(t=>{t.preventDefault();const e=t.target.closest(Fn),n=Rn.getOrCreateInstance(e);n.toggle()})),De(Rn);const Mn="swipe",Pn=".bs.swipe",Nn=`touchstart${Pn}`,On=`touchmove${Pn}`,kn=`touchend${Pn}`,Dn=`pointerdown${Pn}`,Un=`pointerup${Pn}`,Qn="touch",Gn="pen",Hn="pointer-event",Vn=40,jn={endCallback:null,leftCallback:null,rightCallback:null},Wn={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class zn extends hn{constructor(t,e){super(),this._element=t,t&&zn.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return jn}static get DefaultType(){return Wn}static get NAME(){return Mn}dispose(){on.off(this._element,Pn)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),Ue(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=Vn)return;const e=t/this._deltaX;this._deltaX=0,e&&Ue(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(on.on(this._element,Dn,(t=>this._start(t))),on.on(this._element,Un,(t=>this._end(t))),this._element.classList.add(Hn)):(on.on(this._element,Nn,(t=>this._start(t))),on.on(this._element,On,(t=>this._move(t))),on.on(this._element,kn,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&(t.pointerType===Gn||t.pointerType===Qn)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const Kn="carousel",qn="bs.carousel",$n=`.${qn}`,Xn=".data-api",Yn="ArrowLeft",Zn="ArrowRight",Jn=500,ti="next",ei="prev",ni="left",ii="right",ri=`slide${$n}`,si=`slid${$n}`,oi=`keydown${$n}`,ai=`mouseenter${$n}`,li=`mouseleave${$n}`,ci=`dragstart${$n}`,ui=`load${$n}${Xn}`,hi=`click${$n}${Xn}`,Ai="carousel",di="active",fi="slide",pi="carousel-item-end",gi="carousel-item-start",mi="carousel-item-next",vi="carousel-item-prev",yi=".active",wi=".carousel-item",_i=yi+wi,bi=".carousel-item img",xi=".carousel-indicators",Ei="[data-bs-slide], [data-bs-slide-to]",Ci='[data-bs-ride="carousel"]',Si={[Yn]:ii,[Zn]:ni},Bi={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},Ti={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ii extends dn{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=pn.findOne(xi,this._element),this._addEventListeners(),this._config.ride===Ai&&this.cycle()}static get Default(){return Bi}static get DefaultType(){return Ti}static get NAME(){return Kn}next(){this._slide(ti)}nextWhenVisible(){!document.hidden&&Ie(this._element)&&this.next()}prev(){this._slide(ei)}pause(){this._isSliding&&Se(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?on.one(this._element,si,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void on.one(this._element,si,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?ti:ei;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&on.on(this._element,oi,(t=>this._keydown(t))),"hover"===this._config.pause&&(on.on(this._element,ai,(()=>this.pause())),on.on(this._element,li,(()=>this._maybeEnableCycle()))),this._config.touch&&zn.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const n of pn.find(bi,this._element))on.on(n,ci,(t=>t.preventDefault()));const t=()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),Jn+this._config.interval))},e={leftCallback:()=>this._slide(this._directionToOrder(ni)),rightCallback:()=>this._slide(this._directionToOrder(ii)),endCallback:t};this._swipeHelper=new zn(this._element,e)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=Si[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=pn.findOne(yi,this._indicatorsElement);e.classList.remove(di),e.removeAttribute("aria-current");const n=pn.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(di),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===ti,r=e||Ge(this._getItems(),n,i,this._config.wrap);if(r===n)return;const s=this._getItemIndex(r),o=e=>on.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:s}),a=o(ri);if(a.defaultPrevented)return;if(!n||!r)return;const l=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(s),this._activeElement=r;const c=i?gi:pi,u=i?mi:vi;r.classList.add(u),Me(r),n.classList.add(c),r.classList.add(c);const h=()=>{r.classList.remove(c,u),r.classList.add(di),n.classList.remove(di,u,c),this._isSliding=!1,o(si)};this._queueCallback(h,n,this._isAnimated()),l&&this.cycle()}_isAnimated(){return this._element.classList.contains(fi)}_getActive(){return pn.findOne(_i,this._element)}_getItems(){return pn.find(wi,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return ke()?t===ni?ei:ti:t===ni?ti:ei}_orderToDirection(t){return ke()?t===ei?ni:ii:t===ei?ii:ni}static jQueryInterface(t){return this.each((function(){const e=Ii.getOrCreateInstance(this,t);if("number"!==typeof t){if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}on.on(document,hi,Ei,(function(t){const e=pn.getElementFromSelector(this);if(!e||!e.classList.contains(Ai))return;t.preventDefault();const n=Ii.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===un.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),on.on(window,ui,(()=>{const t=pn.find(Ci);for(const e of t)Ii.getOrCreateInstance(e)})),De(Ii);const Fi="collapse",Li="bs.collapse",Ri=`.${Li}`,Mi=".data-api",Pi=`show${Ri}`,Ni=`shown${Ri}`,Oi=`hide${Ri}`,ki=`hidden${Ri}`,Di=`click${Ri}${Mi}`,Ui="show",Qi="collapse",Gi="collapsing",Hi="collapsed",Vi=`:scope .${Qi} .${Qi}`,ji="collapse-horizontal",Wi="width",zi="height",Ki=".collapse.show, .collapse.collapsing",qi='[data-bs-toggle="collapse"]',$i={parent:null,toggle:!0},Xi={parent:"(null|element)",toggle:"boolean"};class Yi extends dn{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=pn.find(qi);for(const i of n){const t=pn.getSelectorFromElement(i),e=pn.find(t).filter((t=>t===this._element));null!==t&&e.length&&this._triggerArray.push(i)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return $i}static get DefaultType(){return Xi}static get NAME(){return Fi}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(Ki).filter((t=>t!==this._element)).map((t=>Yi.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;const e=on.trigger(this._element,Pi);if(e.defaultPrevented)return;for(const o of t)o.hide();const n=this._getDimension();this._element.classList.remove(Qi),this._element.classList.add(Gi),this._element.style[n]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const i=()=>{this._isTransitioning=!1,this._element.classList.remove(Gi),this._element.classList.add(Qi,Ui),this._element.style[n]="",on.trigger(this._element,Ni)},r=n[0].toUpperCase()+n.slice(1),s=`scroll${r}`;this._queueCallback(i,this._element,!0),this._element.style[n]=`${this._element[s]}px`}hide(){if(this._isTransitioning||!this._isShown())return;const t=on.trigger(this._element,Oi);if(t.defaultPrevented)return;const e=this._getDimension();this._element.style[e]=`${this._element.getBoundingClientRect()[e]}px`,Me(this._element),this._element.classList.add(Gi),this._element.classList.remove(Qi,Ui);for(const i of this._triggerArray){const t=pn.getElementFromSelector(i);t&&!this._isShown(t)&&this._addAriaAndCollapsedClass([i],!1)}this._isTransitioning=!0;const n=()=>{this._isTransitioning=!1,this._element.classList.remove(Gi),this._element.classList.add(Qi),on.trigger(this._element,ki)};this._element.style[e]="",this._queueCallback(n,this._element,!0)}_isShown(t=this._element){return t.classList.contains(Ui)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=Te(t.parent),t}_getDimension(){return this._element.classList.contains(ji)?Wi:zi}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(qi);for(const e of t){const t=pn.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=pn.find(Vi,this._config.parent);return pn.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle(Hi,!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"===typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=Yi.getOrCreateInstance(this,e);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}on.on(document,Di,qi,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const e of pn.getMultipleElementsFromSelector(this))Yi.getOrCreateInstance(e,{toggle:!1}).toggle()})),De(Yi);const Zi="dropdown",Ji="bs.dropdown",tr=`.${Ji}`,er=".data-api",nr="Escape",ir="Tab",rr="ArrowUp",sr="ArrowDown",or=2,ar=`hide${tr}`,lr=`hidden${tr}`,cr=`show${tr}`,ur=`shown${tr}`,hr=`click${tr}${er}`,Ar=`keydown${tr}${er}`,dr=`keyup${tr}${er}`,fr="show",pr="dropup",gr="dropend",mr="dropstart",vr="dropup-center",yr="dropdown-center",wr='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',_r=`${wr}.${fr}`,br=".dropdown-menu",xr=".navbar",Er=".navbar-nav",Cr=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",Sr=ke()?"top-end":"top-start",Br=ke()?"top-start":"top-end",Tr=ke()?"bottom-end":"bottom-start",Ir=ke()?"bottom-start":"bottom-end",Fr=ke()?"left-start":"right-start",Lr=ke()?"right-start":"left-start",Rr="top",Mr="bottom",Pr={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Nr={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Or extends dn{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=pn.next(this._element,br)[0]||pn.prev(this._element,br)[0]||pn.findOne(br,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Pr}static get DefaultType(){return Nr}static get NAME(){return Zi}toggle(){return this._isShown()?this.hide():this.show()}show(){if(Fe(this._element)||this._isShown())return;const t={relatedTarget:this._element},e=on.trigger(this._element,cr,t);if(!e.defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(Er))for(const t of[].concat(...document.body.children))on.on(t,"mouseover",Re);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(fr),this._element.classList.add(fr),on.trigger(this._element,ur,t)}}hide(){if(Fe(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){const e=on.trigger(this._element,ar,t);if(!e.defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))on.off(t,"mouseover",Re);this._popper&&this._popper.destroy(),this._menu.classList.remove(fr),this._element.classList.remove(fr),this._element.setAttribute("aria-expanded","false"),un.removeDataAttribute(this._menu,"popper"),on.trigger(this._element,lr,t)}}_getConfig(t){if(t=super._getConfig(t),"object"===typeof t.reference&&!Be(t.reference)&&"function"!==typeof t.reference.getBoundingClientRect)throw new TypeError(`${Zi.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if("undefined"===typeof i)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:Be(this._config.reference)?t=Te(this._config.reference):"object"===typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=fe(t,this._menu,e)}_isShown(){return this._menu.classList.contains(fr)}_getPlacement(){const t=this._parent;if(t.classList.contains(gr))return Fr;if(t.classList.contains(mr))return Lr;if(t.classList.contains(vr))return Rr;if(t.classList.contains(yr))return Mr;const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains(pr)?e?Br:Sr:e?Ir:Tr}_detectNavbar(){return null!==this._element.closest(xr)}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(un.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...Ue(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=pn.find(Cr,this._menu).filter((t=>Ie(t)));n.length&&Ge(n,e,t===sr,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=Or.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(t.button===or||"keyup"===t.type&&t.key!==ir)return;const e=pn.find(_r);for(const n of e){const e=Or.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&t.key===ir||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const s={relatedTarget:e._element};"click"===t.type&&(s.clickEvent=t),e._completeHide(s)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n=t.key===nr,i=[rr,sr].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(wr)?this:pn.prev(this,wr)[0]||pn.next(this,wr)[0]||pn.findOne(wr,t.delegateTarget.parentNode),s=Or.getOrCreateInstance(r);if(i)return t.stopPropagation(),s.show(),void s._selectMenuItem(t);s._isShown()&&(t.stopPropagation(),s.hide(),r.focus())}}on.on(document,Ar,wr,Or.dataApiKeydownHandler),on.on(document,Ar,br,Or.dataApiKeydownHandler),on.on(document,hr,Or.clearMenus),on.on(document,dr,Or.clearMenus),on.on(document,hr,wr,(function(t){t.preventDefault(),Or.getOrCreateInstance(this).toggle()})),De(Or);const kr="backdrop",Dr="fade",Ur="show",Qr=`mousedown.bs.${kr}`,Gr={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Hr={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class Vr extends hn{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return Gr}static get DefaultType(){return Hr}static get NAME(){return kr}show(t){if(!this._config.isVisible)return void Ue(t);this._append();const e=this._getElement();this._config.isAnimated&&Me(e),e.classList.add(Ur),this._emulateAnimation((()=>{Ue(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Ur),this._emulateAnimation((()=>{this.dispose(),Ue(t)}))):Ue(t)}dispose(){this._isAppended&&(on.off(this._element,Qr),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add(Dr),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=Te(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),on.on(t,Qr,(()=>{Ue(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){Qe(t,this._getElement(),this._config.isAnimated)}}const jr="focustrap",Wr="bs.focustrap",zr=`.${Wr}`,Kr=`focusin${zr}`,qr=`keydown.tab${zr}`,$r="Tab",Xr="forward",Yr="backward",Zr={autofocus:!0,trapElement:null},Jr={autofocus:"boolean",trapElement:"element"};class ts extends hn{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return Zr}static get DefaultType(){return Jr}static get NAME(){return jr}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),on.off(document,zr),on.on(document,Kr,(t=>this._handleFocusin(t))),on.on(document,qr,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,on.off(document,zr))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=pn.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Yr?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){t.key===$r&&(this._lastTabNavDirection=t.shiftKey?Yr:Xr)}}const es=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ns=".sticky-top",is="padding-right",rs="margin-right";class ss{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,is,(e=>e+t)),this._setElementAttributes(es,is,(e=>e+t)),this._setElementAttributes(ns,rs,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,is),this._resetElementAttributes(es,is),this._resetElementAttributes(ns,rs)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth(),r=t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)};this._applyManipulationCallback(t,r)}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&un.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){const n=t=>{const n=un.getDataAttribute(t,e);null!==n?(un.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)};this._applyManipulationCallback(t,n)}_applyManipulationCallback(t,e){if(Be(t))e(t);else for(const n of pn.find(t,this._element))e(n)}}const os="modal",as="bs.modal",ls=`.${as}`,cs=".data-api",us="Escape",hs=`hide${ls}`,As=`hidePrevented${ls}`,ds=`hidden${ls}`,fs=`show${ls}`,ps=`shown${ls}`,gs=`resize${ls}`,ms=`click.dismiss${ls}`,vs=`mousedown.dismiss${ls}`,ys=`keydown.dismiss${ls}`,ws=`click${ls}${cs}`,_s="modal-open",bs="fade",xs="show",Es="modal-static",Cs=".modal.show",Ss=".modal-dialog",Bs=".modal-body",Ts='[data-bs-toggle="modal"]',Is={backdrop:!0,focus:!0,keyboard:!0},Fs={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ls extends dn{constructor(t,e){super(t,e),this._dialog=pn.findOne(Ss,this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new ss,this._addEventListeners()}static get Default(){return Is}static get DefaultType(){return Fs}static get NAME(){return os}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown||this._isTransitioning)return;const e=on.trigger(this._element,fs,{relatedTarget:t});e.defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(_s),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){if(!this._isShown||this._isTransitioning)return;const t=on.trigger(this._element,hs);t.defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(xs),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated()))}dispose(){on.off(window,ls),on.off(this._dialog,ls),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new Vr({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ts({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=pn.findOne(Bs,this._dialog);e&&(e.scrollTop=0),Me(this._element),this._element.classList.add(xs);const n=()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,on.trigger(this._element,ps,{relatedTarget:t})};this._queueCallback(n,this._dialog,this._isAnimated())}_addEventListeners(){on.on(this._element,ys,(t=>{t.key===us&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),on.on(window,gs,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),on.on(this._element,vs,(t=>{on.one(this._element,ms,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(_s),this._resetAdjustments(),this._scrollBar.reset(),on.trigger(this._element,ds)}))}_isAnimated(){return this._element.classList.contains(bs)}_triggerBackdropTransition(){const t=on.trigger(this._element,As);if(t.defaultPrevented)return;const e=this._element.scrollHeight>document.documentElement.clientHeight,n=this._element.style.overflowY;"hidden"===n||this._element.classList.contains(Es)||(e||(this._element.style.overflowY="hidden"),this._element.classList.add(Es),this._queueCallback((()=>{this._element.classList.remove(Es),this._queueCallback((()=>{this._element.style.overflowY=n}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=ke()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=ke()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Ls.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}on.on(document,ws,Ts,(function(t){const e=pn.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),on.one(e,fs,(t=>{t.defaultPrevented||on.one(e,ds,(()=>{Ie(this)&&this.focus()}))}));const n=pn.findOne(Cs);n&&Ls.getInstance(n).hide();const i=Ls.getOrCreateInstance(e);i.toggle(this)})),gn(Ls),De(Ls);const Rs="offcanvas",Ms="bs.offcanvas",Ps=`.${Ms}`,Ns=".data-api",Os=`load${Ps}${Ns}`,ks="Escape",Ds="show",Us="showing",Qs="hiding",Gs="offcanvas-backdrop",Hs=".offcanvas.show",Vs=`show${Ps}`,js=`shown${Ps}`,Ws=`hide${Ps}`,zs=`hidePrevented${Ps}`,Ks=`hidden${Ps}`,qs=`resize${Ps}`,$s=`click${Ps}${Ns}`,Xs=`keydown.dismiss${Ps}`,Ys='[data-bs-toggle="offcanvas"]',Zs={backdrop:!0,keyboard:!0,scroll:!1},Js={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class to extends dn{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Zs}static get DefaultType(){return Js}static get NAME(){return Rs}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){if(this._isShown)return;const e=on.trigger(this._element,Vs,{relatedTarget:t});if(e.defaultPrevented)return;this._isShown=!0,this._backdrop.show(),this._config.scroll||(new ss).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Us);const n=()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ds),this._element.classList.remove(Us),on.trigger(this._element,js,{relatedTarget:t})};this._queueCallback(n,this._element,!0)}hide(){if(!this._isShown)return;const t=on.trigger(this._element,Ws);if(t.defaultPrevented)return;this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Qs),this._backdrop.hide();const e=()=>{this._element.classList.remove(Ds,Qs),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new ss).reset(),on.trigger(this._element,Ks)};this._queueCallback(e,this._element,!0)}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=()=>{"static"!==this._config.backdrop?this.hide():on.trigger(this._element,zs)},e=Boolean(this._config.backdrop);return new Vr({className:Gs,isVisible:e,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:e?t:null})}_initializeFocusTrap(){return new ts({trapElement:this._element})}_addEventListeners(){on.on(this._element,Xs,(t=>{t.key===ks&&(this._config.keyboard?this.hide():on.trigger(this._element,zs))}))}static jQueryInterface(t){return this.each((function(){const e=to.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}on.on(document,$s,Ys,(function(t){const e=pn.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),Fe(this))return;on.one(e,Ks,(()=>{Ie(this)&&this.focus()}));const n=pn.findOne(Hs);n&&n!==e&&to.getInstance(n).hide();const i=to.getOrCreateInstance(e);i.toggle(this)})),on.on(window,Os,(()=>{for(const t of pn.find(Hs))to.getOrCreateInstance(t).show()})),on.on(window,qs,(()=>{for(const t of pn.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&to.getOrCreateInstance(t).hide()})),gn(to),De(to);const eo=/^aria-[\w-]*$/i,no={"*":["class","dir","id","lang","role",eo],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},io=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),ro=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,so=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!io.has(n)||Boolean(ro.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))};function oo(t,e,n){if(!t.length)return t;if(n&&"function"===typeof n)return n(t);const i=new window.DOMParser,r=i.parseFromString(t,"text/html"),s=[].concat(...r.body.querySelectorAll("*"));for(const o of s){const t=o.nodeName.toLowerCase();if(!Object.keys(e).includes(t)){o.remove();continue}const n=[].concat(...o.attributes),i=[].concat(e["*"]||[],e[t]||[]);for(const e of n)so(e,i)||o.removeAttribute(e.nodeName)}return r.body.innerHTML}const ao="TemplateFactory",lo={allowList:no,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},co={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},uo={entry:"(string|element|function|null)",selector:"(string|element)"};class ho extends hn{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return lo}static get DefaultType(){return co}static get NAME(){return ao}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[i,r]of Object.entries(this._config.content))this._setContent(t,r,i);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},uo)}_setContent(t,e,n){const i=pn.findOne(n,t);i&&(e=this._resolvePossibleFunction(e),e?Be(e)?this._putElementInTemplate(Te(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?oo(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return Ue(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const Ao="tooltip",fo=new Set(["sanitize","allowList","sanitizeFn"]),po="fade",go="modal",mo="show",vo=".tooltip-inner",yo=`.${go}`,wo="hide.bs.modal",_o="hover",bo="focus",xo="click",Eo="manual",Co="hide",So="hidden",Bo="show",To="shown",Io="inserted",Fo="click",Lo="focusin",Ro="focusout",Mo="mouseenter",Po="mouseleave",No={AUTO:"auto",TOP:"top",RIGHT:ke()?"left":"right",BOTTOM:"bottom",LEFT:ke()?"right":"left"},Oo={allowList:no,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ko={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Do extends dn{constructor(t,e){if("undefined"===typeof i)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Oo}static get DefaultType(){return ko}static get NAME(){return Ao}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),on.off(this._element.closest(yo),wo,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=on.trigger(this._element,this.constructor.eventName(Bo)),e=Le(this._element),n=(e||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!n)return;this._disposePopper();const i=this._getTipElement();this._element.setAttribute("aria-describedby",i.getAttribute("id"));const{container:r}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(r.append(i),on.trigger(this._element,this.constructor.eventName(Io))),this._popper=this._createPopper(i),i.classList.add(mo),"ontouchstart"in document.documentElement)for(const o of[].concat(...document.body.children))on.on(o,"mouseover",Re);const s=()=>{on.trigger(this._element,this.constructor.eventName(To)),!1===this._isHovered&&this._leave(),this._isHovered=!1};this._queueCallback(s,this.tip,this._isAnimated())}hide(){if(!this._isShown())return;const t=on.trigger(this._element,this.constructor.eventName(Co));if(t.defaultPrevented)return;const e=this._getTipElement();if(e.classList.remove(mo),"ontouchstart"in document.documentElement)for(const i of[].concat(...document.body.children))on.off(i,"mouseover",Re);this._activeTrigger[xo]=!1,this._activeTrigger[bo]=!1,this._activeTrigger[_o]=!1,this._isHovered=null;const n=()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),on.trigger(this._element,this.constructor.eventName(So)))};this._queueCallback(n,this.tip,this._isAnimated())}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(po,mo),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=Ee(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(po),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new ho({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[vo]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(po)}_isShown(){return this.tip&&this.tip.classList.contains(mo)}_createPopper(t){const e=Ue(this._config.placement,[this,t,this._element]),n=No[e.toUpperCase()];return fe(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"===typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"===typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return Ue(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...Ue(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)on.on(this._element,this.constructor.eventName(Fo),this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e.toggle()}));else if(e!==Eo){const t=e===_o?this.constructor.eventName(Mo):this.constructor.eventName(Lo),n=e===_o?this.constructor.eventName(Po):this.constructor.eventName(Ro);on.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?bo:_o]=!0,e._enter()})),on.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?bo:_o]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},on.on(this._element.closest(yo),wo,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=un.getDataAttributes(this._element);for(const n of Object.keys(e))fo.has(n)&&delete e[n];return t={...e,..."object"===typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:Te(t.container),"number"===typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"===typeof t.title&&(t.title=t.title.toString()),"number"===typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=Do.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}De(Do);const Uo="popover",Qo=".popover-header",Go=".popover-body",Ho={...Do.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Vo={...Do.DefaultType,content:"(null|string|element|function)"};class jo extends Do{static get Default(){return Ho}static get DefaultType(){return Vo}static get NAME(){return Uo}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Qo]:this._getTitle(),[Go]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=jo.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}De(jo);const Wo="scrollspy",zo="bs.scrollspy",Ko=`.${zo}`,qo=".data-api",$o=`activate${Ko}`,Xo=`click${Ko}`,Yo=`load${Ko}${qo}`,Zo="dropdown-item",Jo="active",ta='[data-bs-spy="scroll"]',ea="[href]",na=".nav, .list-group",ia=".nav-link",ra=".nav-item",sa=".list-group-item",oa=`${ia}, ${ra} > ${ia}, ${sa}`,aa=".dropdown",la=".dropdown-toggle",ca={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},ua={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class ha extends dn{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return ca}static get DefaultType(){return ua}static get NAME(){return Wo}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=Te(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"===typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(on.off(this._config.target,Xo),on.on(this._config.target,Xo,ea,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const s of t){if(!s.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(s));continue}const t=s.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(s),!i)return}else r||t||n(s)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=pn.find(ea,this._config.target);for(const e of t){if(!e.hash||Fe(e))continue;const t=pn.findOne(decodeURI(e.hash),this._element);Ie(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(Jo),this._activateParents(t),on.trigger(this._element,$o,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains(Zo))pn.findOne(la,t.closest(aa)).classList.add(Jo);else for(const e of pn.parents(t,na))for(const t of pn.prev(e,oa))t.classList.add(Jo)}_clearActiveClass(t){t.classList.remove(Jo);const e=pn.find(`${ea}.${Jo}`,t);for(const n of e)n.classList.remove(Jo)}static jQueryInterface(t){return this.each((function(){const e=ha.getOrCreateInstance(this,t);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}on.on(window,Yo,(()=>{for(const t of pn.find(ta))ha.getOrCreateInstance(t)})),De(ha);const Aa="tab",da="bs.tab",fa=`.${da}`,pa=`hide${fa}`,ga=`hidden${fa}`,ma=`show${fa}`,va=`shown${fa}`,ya=`click${fa}`,wa=`keydown${fa}`,_a=`load${fa}`,ba="ArrowLeft",xa="ArrowRight",Ea="ArrowUp",Ca="ArrowDown",Sa="Home",Ba="End",Ta="active",Ia="fade",Fa="show",La="dropdown",Ra=".dropdown-toggle",Ma=".dropdown-menu",Pa=`:not(${Ra})`,Na='.list-group, .nav, [role="tablist"]',Oa=".nav-item, .list-group-item",ka=`.nav-link${Pa}, .list-group-item${Pa}, [role="tab"]${Pa}`,Da='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Ua=`${ka}, ${Da}`,Qa=`.${Ta}[data-bs-toggle="tab"], .${Ta}[data-bs-toggle="pill"], .${Ta}[data-bs-toggle="list"]`;class Ga extends dn{constructor(t){super(t),this._parent=this._element.closest(Na),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),on.on(this._element,wa,(t=>this._keydown(t))))}static get NAME(){return Aa}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?on.trigger(e,pa,{relatedTarget:t}):null,i=on.trigger(t,ma,{relatedTarget:e});i.defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){if(!t)return;t.classList.add(Ta),this._activate(pn.getElementFromSelector(t));const n=()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),on.trigger(t,va,{relatedTarget:e})):t.classList.add(Fa)};this._queueCallback(n,t,t.classList.contains(Ia))}_deactivate(t,e){if(!t)return;t.classList.remove(Ta),t.blur(),this._deactivate(pn.getElementFromSelector(t));const n=()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),on.trigger(t,ga,{relatedTarget:e})):t.classList.remove(Fa)};this._queueCallback(n,t,t.classList.contains(Ia))}_keydown(t){if(![ba,xa,Ea,Ca,Sa,Ba].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!Fe(t)));let n;if([Sa,Ba].includes(t.key))n=e[t.key===Sa?0:e.length-1];else{const i=[xa,Ca].includes(t.key);n=Ge(e,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),Ga.getOrCreateInstance(n).show())}_getChildren(){return pn.find(Ua,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const n of e)this._setInitialAttributesOnChild(n)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=pn.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains(La))return;const i=(t,i)=>{const r=pn.findOne(t,n);r&&r.classList.toggle(i,e)};i(Ra,Ta),i(Ma,Fa),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Ta)}_getInnerElement(t){return t.matches(Ua)?t:pn.findOne(Ua,t)}_getOuterElement(t){return t.closest(Oa)||t}static jQueryInterface(t){return this.each((function(){const e=Ga.getOrCreateInstance(this);if("string"===typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}on.on(document,ya,Da,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),Fe(this)||Ga.getOrCreateInstance(this).show()})),on.on(window,_a,(()=>{for(const t of pn.find(Qa))Ga.getOrCreateInstance(t)})),De(Ga);const Ha="toast",Va="bs.toast",ja=`.${Va}`,Wa=`mouseover${ja}`,za=`mouseout${ja}`,Ka=`focusin${ja}`,qa=`focusout${ja}`,$a=`hide${ja}`,Xa=`hidden${ja}`,Ya=`show${ja}`,Za=`shown${ja}`,Ja="fade",tl="hide",el="show",nl="showing",il={animation:"boolean",autohide:"boolean",delay:"number"},rl={animation:!0,autohide:!0,delay:5e3};class sl extends dn{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return rl}static get DefaultType(){return il}static get NAME(){return Ha}show(){const t=on.trigger(this._element,Ya);if(t.defaultPrevented)return;this._clearTimeout(),this._config.animation&&this._element.classList.add(Ja);const e=()=>{this._element.classList.remove(nl),on.trigger(this._element,Za),this._maybeScheduleHide()};this._element.classList.remove(tl),Me(this._element),this._element.classList.add(el,nl),this._queueCallback(e,this._element,this._config.animation)}hide(){if(!this.isShown())return;const t=on.trigger(this._element,$a);if(t.defaultPrevented)return;const e=()=>{this._element.classList.add(tl),this._element.classList.remove(nl,el),on.trigger(this._element,Xa)};this._element.classList.add(nl),this._queueCallback(e,this._element,this._config.animation)}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(el),super.dispose()}isShown(){return this._element.classList.contains(el)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e;break}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){on.on(this._element,Wa,(t=>this._onInteraction(t,!0))),on.on(this._element,za,(t=>this._onInteraction(t,!1))),on.on(this._element,Ka,(t=>this._onInteraction(t,!0))),on.on(this._element,qa,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=sl.getOrCreateInstance(this,t);if("string"===typeof t){if("undefined"===typeof e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}gn(sl),De(sl);var ol,al=Object.defineProperty,ll=(t,e,n)=>e in t?al(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cl=(t,e,n)=>(ll(t,"symbol"!=typeof e?e+"":e,n),n),ul=Object.defineProperty,hl=Object.defineProperties,Al=Object.getOwnPropertyDescriptors,dl=Object.getOwnPropertySymbols,fl=Object.prototype.hasOwnProperty,pl=Object.prototype.propertyIsEnumerable,gl=(t,e,n)=>e in t?ul(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ml=(t,e)=>{for(var n in e||(e={}))fl.call(e,n)&&gl(t,n,e[n]);if(dl)for(var n of dl(e))pl.call(e,n)&&gl(t,n,e[n]);return t},vl=(t,e)=>hl(t,Al(e));function yl(t,e){var n;const i=(0,r.IJ)();return(0,s.nT)((()=>{i.value=t()}),vl(ml({},e),{flush:null!=(n=null==e?void 0:e.flush)?n:"sync"})),(0,r.tB)(i)}const wl=typeof window<"u",_l=t=>"function"==typeof t,bl=t=>"string"==typeof t,xl=()=>{};function El(t){return"function"==typeof t?t():(0,r.R1)(t)}function Cl(t,e){function n(...n){t((()=>e.apply(this,n)),{fn:e,thisArg:this,args:n})}return n}wl&&(null==(ol=null==window?void 0:window.navigator)?void 0:ol.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);const Sl=t=>t();function Bl(t=Sl){const e=(0,r.KR)(!0);function n(){e.value=!1}function i(){e.value=!0}return{isActive:e,pause:n,resume:i,eventFilter:(...n)=>{e.value&&t(...n)}}}function Tl(t){return t}function Il(t){return!!(0,r.o5)()&&((0,r.jr)(t),!0)}function Fl(t){return"function"==typeof t?(0,s.EW)(t):(0,r.KR)(t)}function Ll(t,e=!0){(0,s.nI)()?(0,s.sV)(t):e?t():(0,s.dY)(t)}function Rl(t,e=1e3,n={}){const{immediate:i=!0,immediateCallback:o=!1}=n;let a=null;const l=(0,r.KR)(!1);function c(){a&&(clearInterval(a),a=null)}function u(){l.value=!1,c()}function h(){(0,r.R1)(e)<=0||(l.value=!0,o&&t(),c(),a=setInterval(t,El(e)))}if(i&&wl&&h(),(0,r.i9)(e)||_l(e)){const t=(0,s.wB)(e,(()=>{l.value&&wl&&h()}));Il(t)}return Il(u),{isActive:l,pause:u,resume:h}}var Ml=Object.getOwnPropertySymbols,Pl=Object.prototype.hasOwnProperty,Nl=Object.prototype.propertyIsEnumerable,Ol=(t,e)=>{var n={};for(var i in t)Pl.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&Ml)for(var i of Ml(t))e.indexOf(i)<0&&Nl.call(t,i)&&(n[i]=t[i]);return n};function kl(t,e,n={}){const i=n,{eventFilter:r=Sl}=i,o=Ol(i,["eventFilter"]);return(0,s.wB)(t,Cl(r,e),o)}var Dl=Object.defineProperty,Ul=Object.defineProperties,Ql=Object.getOwnPropertyDescriptors,Gl=Object.getOwnPropertySymbols,Hl=Object.prototype.hasOwnProperty,Vl=Object.prototype.propertyIsEnumerable,jl=(t,e,n)=>e in t?Dl(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Wl=(t,e)=>{for(var n in e||(e={}))Hl.call(e,n)&&jl(t,n,e[n]);if(Gl)for(var n of Gl(e))Vl.call(e,n)&&jl(t,n,e[n]);return t},zl=(t,e)=>Ul(t,Ql(e)),Kl=(t,e)=>{var n={};for(var i in t)Hl.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&Gl)for(var i of Gl(t))e.indexOf(i)<0&&Vl.call(t,i)&&(n[i]=t[i]);return n};function ql(t,e,n={}){const i=n,{eventFilter:r}=i,s=Kl(i,["eventFilter"]),{eventFilter:o,pause:a,resume:l,isActive:c}=Bl(r);return{stop:kl(t,e,zl(Wl({},s),{eventFilter:o})),pause:a,resume:l,isActive:c}}function $l(t){var e;const n=El(t);return null!=(e=null==n?void 0:n.$el)?e:n}const Xl=wl?window:void 0;function Yl(...t){let e,n,i,r;if(bl(t[0])||Array.isArray(t[0])?([n,i,r]=t,e=Xl):[e,n,i,r]=t,!e)return xl;Array.isArray(n)||(n=[n]),Array.isArray(i)||(i=[i]);const o=[],a=()=>{o.forEach((t=>t())),o.length=0},l=(t,e,n)=>(t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)),c=(0,s.wB)((()=>$l(e)),(t=>{a(),t&&o.push(...n.flatMap((e=>i.map((n=>l(t,e,n))))))}),{immediate:!0,flush:"post"}),u=()=>{c(),a()};return Il(u),u}function Zl(t,e=!1){const n=(0,r.KR)(),i=()=>n.value=Boolean(t());return i(),Ll(i,e),n}function Jl(t,e={}){const{window:n=Xl}=e,i=Zl((()=>n&&"matchMedia"in n&&"function"==typeof n.matchMedia));let o;const a=(0,r.KR)(!1),l=()=>{!o||("removeEventListener"in o?o.removeEventListener("change",c):o.removeListener(c))},c=()=>{!i.value||(l(),o=n.matchMedia(Fl(t).value),a.value=o.matches,"addEventListener"in o?o.addEventListener("change",c):o.addListener(c))};return(0,s.nT)(c),Il((()=>l())),a}const tc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof n.g<"u"?n.g:typeof self<"u"?self:{},ec="__vueuse_ssr_handlers__";tc[ec]=tc[ec]||{};const nc=tc[ec];function ic(t,e){return nc[t]||e}function rc(t){return null==t?"any":t instanceof Set?"set":t instanceof Map?"map":t instanceof Date?"date":"boolean"==typeof t?"boolean":"string"==typeof t?"string":"object"==typeof t?"object":Number.isNaN(t)?"any":"number"}var sc=Object.defineProperty,oc=Object.getOwnPropertySymbols,ac=Object.prototype.hasOwnProperty,lc=Object.prototype.propertyIsEnumerable,cc=(t,e,n)=>e in t?sc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uc=(t,e)=>{for(var n in e||(e={}))ac.call(e,n)&&cc(t,n,e[n]);if(oc)for(var n of oc(e))lc.call(e,n)&&cc(t,n,e[n]);return t};const hc={boolean:{read:t=>"true"===t,write:t=>String(t)},object:{read:t=>JSON.parse(t),write:t=>JSON.stringify(t)},number:{read:t=>Number.parseFloat(t),write:t=>String(t)},any:{read:t=>t,write:t=>String(t)},string:{read:t=>t,write:t=>String(t)},map:{read:t=>new Map(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t.entries()))},set:{read:t=>new Set(JSON.parse(t)),write:t=>JSON.stringify(Array.from(t))},date:{read:t=>new Date(t),write:t=>t.toISOString()}};function Ac(t,e,n,i={}){var o;const{flush:a="pre",deep:l=!0,listenToStorageChanges:c=!0,writeDefaults:u=!0,mergeDefaults:h=!1,shallow:A,window:d=Xl,eventFilter:f,onError:p=(t=>{console.error(t)})}=i,g=(A?r.IJ:r.KR)(e);if(!n)try{n=ic("getDefaultStorage",(()=>{var t;return null==(t=Xl)?void 0:t.localStorage}))()}catch(C){p(C)}if(!n)return g;const m=El(e),v=rc(m),y=null!=(o=i.serializer)?o:hc[v],{pause:w,resume:_}=ql(g,(()=>b(g.value)),{flush:a,deep:l,eventFilter:f});return d&&c&&Yl(d,"storage",E),E(),g;function b(e){try{if(null==e)n.removeItem(t);else{const i=y.write(e),r=n.getItem(t);r!==i&&(n.setItem(t,i),d&&(null==d||d.dispatchEvent(new StorageEvent("storage",{key:t,oldValue:r,newValue:i,storageArea:n}))))}}catch(i){p(i)}}function x(e){const i=e?e.newValue:n.getItem(t);if(null==i)return u&&null!==m&&n.setItem(t,y.write(m)),m;if(!e&&h){const t=y.read(i);return _l(h)?h(t,m):"object"!==v||Array.isArray(t)?t:uc(uc({},m),t)}return"string"!=typeof i?i:y.read(i)}function E(e){if(!e||e.storageArea===n){if(e&&null==e.key)return void(g.value=m);if(!e||e.key===t){w();try{g.value=x(e)}catch(i){p(i)}finally{e?(0,s.dY)(_):_()}}}}}function dc(t){return Jl("(prefers-color-scheme: dark)",t)}var fc,pc=Object.defineProperty,gc=Object.getOwnPropertySymbols,mc=Object.prototype.hasOwnProperty,vc=Object.prototype.propertyIsEnumerable,yc=(t,e,n)=>e in t?pc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,wc=(t,e)=>{for(var n in e||(e={}))mc.call(e,n)&&yc(t,n,e[n]);if(gc)for(var n of gc(e))vc.call(e,n)&&yc(t,n,e[n]);return t};function _c(t={}){const{selector:e="html",attribute:n="class",initialValue:i="auto",window:o=Xl,storage:a,storageKey:l="vueuse-color-scheme",listenToStorageChanges:c=!0,storageRef:u,emitAuto:h}=t,A=wc({auto:"",light:"light",dark:"dark"},t.modes||{}),d=dc({window:o}),f=(0,s.EW)((()=>d.value?"dark":"light")),p=u||(null==l?(0,r.KR)(i):Ac(l,i,a,{window:o,listenToStorageChanges:c})),g=(0,s.EW)({get(){return"auto"!==p.value||h?p.value:f.value},set(t){p.value=t}}),m=ic("updateHTMLAttrs",((t,e,n)=>{const i=null==o?void 0:o.document.querySelector(t);if(i)if("class"===e){const t=n.split(/\s/g);Object.values(A).flatMap((t=>(t||"").split(/\s/g))).filter(Boolean).forEach((e=>{t.includes(e)?i.classList.add(e):i.classList.remove(e)}))}else i.setAttribute(e,n)}));function v(t){var i;const r="auto"===t?f.value:t;m(e,n,null!=(i=A[r])?i:r)}function y(e){t.onChanged?t.onChanged(e,v):v(e)}return(0,s.wB)(g,y,{flush:"post",immediate:!0}),h&&(0,s.wB)(f,(()=>y(g.value)),{flush:"post"}),Ll((()=>y(g.value))),g}(function(t){t.UP="UP",t.RIGHT="RIGHT",t.DOWN="DOWN",t.LEFT="LEFT",t.NONE="NONE"})(fc||(fc={}));var bc=Object.defineProperty,xc=Object.getOwnPropertySymbols,Ec=Object.prototype.hasOwnProperty,Cc=Object.prototype.propertyIsEnumerable,Sc=(t,e,n)=>e in t?bc(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Bc=(t,e)=>{for(var n in e||(e={}))Ec.call(e,n)&&Sc(t,n,e[n]);if(xc)for(var n of xc(e))Cc.call(e,n)&&Sc(t,n,e[n]);return t};const Tc={easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]};Bc({linear:Tl},Tc);const Ic=t=>yl((()=>t.value?`justify-content-${t.value}`:""));class Fc{constructor(t,e={}){if(cl(this,"cancelable",!0),cl(this,"componentId",null),cl(this,"_defaultPrevented",!1),cl(this,"eventType",""),cl(this,"nativeEvent",null),cl(this,"_preventDefault"),cl(this,"relatedTarget",null),cl(this,"target",null),!t)throw new TypeError(`Failed to construct '${this.constructor.name}'. 1 argument required, ${arguments.length} given.`);Object.assign(this,Fc.Defaults,e,{eventType:t}),this._preventDefault=function(){this.cancelable&&(this.defaultPrevented=!0)}}get defaultPrevented(){return this._defaultPrevented}set defaultPrevented(t){this._defaultPrevented=t}get preventDefault(){return this._preventDefault}set preventDefault(t){this._preventDefault=t}static get Defaults(){return{cancelable:!0,componentId:null,eventType:"",nativeEvent:null,relatedTarget:null,target:null}}}class Lc extends Fc{constructor(t,e={}){super(t,e),cl(this,"trigger",null),Object.assign(this,Fc.Defaults,e,{eventType:t})}static get Defaults(){return{...super.Defaults,trigger:null}}}const Rc=t=>null!==t&&"object"==typeof t,Mc=t=>/^[0-9]*\.?[0-9]+$/.test(String(t)),Pc=t=>"[object Object]"===Object.prototype.toString.call(t),Nc=t=>null===t,Oc=/_/g,kc=/([a-z])([A-Z])/g,Dc=/(\s|^)(\w)/g,Uc=/(\s|^)(\w)/,Qc=/\s+/,Gc=/^#/,Hc=/^#[A-Za-z]+[\w\-:.]*$/,Vc=/-u-.+/,jc=(t,e=2)=>"string"==typeof t?t:null==t?"":Array.isArray(t)||Pc(t)&&t.toString===Object.prototype.toString?JSON.stringify(t,null,e):String(t),Wc=t=>t.replace(Oc," ").replace(kc,((t,e,n)=>`${e} ${n}`)).replace(Uc,((t,e,n)=>e+n.toUpperCase())),zc=t=>t.replace(Oc," ").replace(kc,((t,e,n)=>`${e} ${n}`)).replace(Dc,((t,e,n)=>e+n.toUpperCase())),Kc=t=>{const e=t.trim();return e.charAt(0).toUpperCase()+e.slice(1)},qc=t=>`\\${t}`,$c=t=>{const e=jc(t),{length:n}=e,i=e.charCodeAt(0);return e.split("").reduce(((t,r,s)=>{const o=e.charCodeAt(s);return 0===o?`${t}`:127===o||o>=1&&o<=31||0===s&&o>=48&&o<=57||1===s&&o>=48&&o<=57&&45===i?t+qc(`${o.toString(16)} `):0===s&&45===o&&1===n?t+qc(r):o>=128||45===o||95===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?t+r:t+qc(r)}),"")},Xc=typeof window<"u",Yc=typeof document<"u",Zc=typeof navigator<"u",Jc=Xc&&Yc&&Zc,tu=Xc?window:{},eu=(()=>{let t=!1;if(Jc)try{const e={get passive(){t=!0}};tu.addEventListener("test",e,e),tu.removeEventListener("test",e,e)}catch{t=!1}return t})(),nu=typeof window<"u",iu=typeof document<"u",ru=typeof Element<"u",su=typeof navigator<"u",ou=nu&&iu&&su,au=nu?window:{},lu=iu?document:{},cu=su?navigator:{},uu=(cu.userAgent||"").toLowerCase();uu.indexOf("jsdom"),/msie|trident/.test(uu),(()=>{let t=!1;if(ou)try{const e={get passive(){return t=!0,t}};au.addEventListener("test",e,e),au.removeEventListener("test",e,e)}catch{t=!1}})(),ou&&("ontouchstart"in lu.documentElement||cu.maxTouchPoints),ou&&Boolean(au.PointerEvent||au.MSPointerEvent),ou&&"IntersectionObserver"in au&&"IntersectionObserverEntry"in au&&au.IntersectionObserverEntry.prototype;const hu=ru?Element.prototype:void 0,Au=(null==hu?void 0:hu.matches)||(null==hu?void 0:hu.msMatchesSelector)||(null==hu?void 0:hu.webkitMatchesSelector),du=t=>!(!t||t.nodeType!==Node.ELEMENT_NODE),fu=t=>du(t)?t.getBoundingClientRect():null,pu=(t=[])=>{const{activeElement:e}=document;return e&&!t.some((t=>t===e))?e:null},gu=t=>du(t)&&t===pu(),mu=(t,e={})=>{try{t.focus(e)}catch(n){console.error(n)}return gu(t)},vu=(t,e)=>e&&du(t)&&t.getAttribute(e)||null,yu=t=>{if("none"===vu(t,"display"))return!1;const e=fu(t);return!!(e&&e.height>0&&e.width>0)},wu=(t,e)=>!t||t(e).filter((t=>t.type!==s.Mw)).length<1,_u=(t,e)=>(du(e)?e:lu).querySelector(t)||null,bu=(t,e)=>Array.from([(du(e)?e:lu).querySelectorAll(t)]),xu=(t,e)=>e&&du(t)?t.getAttribute(e):null,Eu=t=>lu.getElementById(/^#/.test(t)?t.slice(1):t)||null,Cu=(t,e,n)=>{e&&du(t)&&t.setAttribute(e,n)},Su=(t,e)=>{e&&du(t)&&t.removeAttribute(e)},Bu=(t,e)=>jc(t).toLowerCase()===jc(e).toLowerCase(),Tu=Xc?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame||(t=>setTimeout(t,16)):t=>setTimeout(t,0),Iu=(t,e)=>!!du(t)&&Au.call(t,e),Fu=(null==hu?void 0:hu.closest)||function(t){let e=this;if(!e)return null;do{if(Iu(e,t))return e;e=e.parentElement||e.parentNode}while(null!==e&&e.nodeType===Node.ELEMENT_NODE);return null},Lu=(t,e,n=!1)=>{if(!du(e))return null;const i=Fu.call(e,t);return n?i:i===e?null:i},Ru=(t,e,n)=>e.concat(["sm","md","lg","xl","xxl"]).reduce(((e,i)=>(e[t?`${t}${i.charAt(0).toUpperCase()+i.slice(1)}`:i]=n,e)),Object.create(null)),Mu=(t,e,n,i=n)=>Object.keys(e).reduce(((e,r)=>(t[r]&&e.push([i,r.replace(n,""),t[r]].filter((t=>t&&"boolean"!=typeof t)).join("-").toLowerCase()),e)),[]),Pu=(t="")=>`__BVID__${Math.random().toString().slice(2,8)}___BV_${t}__`,Nu=(t,e)=>!0===t||"true"===t||""===t?"true":"grammar"===t||"spelling"===t?t:!1===e?"true":!1===t||"false"===t?"false":void 0,Ou=t=>!!t&&"object"==typeof t&&t.constructor===Object,ku=(t,e,n=!0)=>{const i=t instanceof Date&&"function"==typeof t.getMonth?new Date(t.getTime()):Object.assign({},t);return Ou(t)&&Ou(e)&&Object.keys(e).forEach((r=>{Ou(e[r])?r in t?i[r]=ku(t[r],e[r],n):Object.assign(i,{[r]:e[r]}):Array.isArray(e[r])&&Array.isArray(t[r])?Object.assign(i,{[r]:n?t[r].concat(e[r].filter((e=>!t[r].includes(e)))):e[r]}):Object.assign(i,{[r]:e[r]})})),i},Du=(t,e={},n={})=>{const i=[t];let r;for(let s=0;s<i.length&&!r;s++){const t=i[s];r=n[t]}return r&&"function"==typeof r?r(e):r},Uu=(t,e=NaN)=>Number.isInteger(t)?t:e,Qu=(t,e=NaN)=>{const n=Number.parseInt(t,10);return Number.isNaN(n)?e:n},Gu=(t,e=NaN)=>{const n=Number.parseFloat(t.toString());return Number.isNaN(n)?e:n},Hu=(t,e)=>Object.keys(t).filter((t=>!e.includes(t))).reduce(((e,n)=>({...e,[n]:t[n]})),{}),Vu=t=>Array.isArray(t)?t.map((t=>Vu(t))):t instanceof Date?new Date(t.getTime()):t&&"object"==typeof t?Object.getOwnPropertyNames(t).reduce(((e,n)=>{var i;return Object.defineProperty(e,n,null!=(i=Object.getOwnPropertyDescriptor(t,n))?i:{}),e[n]=Vu(t[n]),e}),Object.create(Object.getPrototypeOf(t))):t,ju=t=>new Promise((e=>e(Vu(t)))),Wu=(t,e)=>e+(t?Kc(t):""),zu=(t,e)=>(Array.isArray(e)?e.slice():Object.keys(e)).reduce(((e,n)=>(e[n]=t[n],e)),{}),Ku=t=>"boolean"==typeof t?t:""===t||"true"===t,qu=t=>!(!t.href&&!t.to);function $u(t){return yl((()=>void 0===t.value||null===t.value?t.value:Ku(t.value)))}const Xu=Symbol(),Yu={items:(0,r.Kh)([]),reset(){this.items=(0,r.Kh)([])}},Zu=t=>{t.provide(Xu,Yu)},Ju=()=>{var t;return null!=(t=(0,s.WQ)(Xu))?t:Yu},th=(t,e,n)=>{(0,s.sV)((()=>{var i;null==(i=null==t?void 0:t.value)||i.addEventListener(e,n)})),(0,s.xo)((()=>{var i;null==(i=null==t?void 0:t.value)||i.removeEventListener(e,n)}))},eh=t=>(0,s.EW)((()=>({"form-check":!1===t.plain&&!1===t.button,"form-check-inline":!0===t.inline,"form-switch":!0===t.switch,[`form-control-${t.size}`]:void 0!==t.size&&"md"!==t.size}))),nh=t=>(0,s.EW)((()=>({"form-check-input":!1===t.plain&&!1===t.button,"is-valid":!0===t.state,"is-invalid":!1===t.state,"btn-check":!0===t.button}))),ih=t=>(0,s.EW)((()=>({"form-check-label":!1===t.plain&&!1===t.button,btn:!0===t.button,[`btn-${t.buttonVariant}`]:!0===t.button&&void 0!==t.buttonVariant,[`btn-${t.size}`]:t.button&&t.size&&"md"!==t.size}))),rh=t=>(0,s.EW)((()=>({"aria-invalid":Nu(t.ariaInvalid,t.state),"aria-required":!0===t.required||void 0}))),sh=t=>(0,s.EW)((()=>({"was-validated":!0===t.validated,"btn-group":!0===t.buttons&&!1===t.stacked,"btn-group-vertical":!0===t.stacked,[`btn-group-${t.size}`]:void 0!==t.size}))),oh=(t,e,n)=>t.reduce(((t,e)=>"Symbol(Fragment)"===e.type.toString()?t.concat(e.children):t.concat([e])),[]).filter((t=>t.type.__name===e||t.type.name===e)).map((t=>{const e=(t.children.default?t.children.default():[]).find((t=>"Symbol(Text)"===t.type.toString()));return{props:{disabled:n,...t.props},text:e?e.children:""}})),ah=(t,e)=>"string"==typeof t?{props:{value:t,disabled:e.disabled},text:t}:{props:{value:t[e.valueField],disabled:e.disabled||t[e.disabledField],...t.props},text:t[e.textField],html:t[e.htmlField]},lh=(t,e,n,i,r)=>({...t,props:{"button-variant":n.buttonVariant,form:n.form,name:i.value,id:`${r.value}_option_${e}`,button:n.buttons,state:n.state,plain:n.plain,size:n.size,inline:!n.stacked,required:n.required,...t.props}}),ch=(t,e)=>(0,s.EW)((()=>(null==t?void 0:t.value)||Pu(e))),uh={ariaInvalid:{type:[Boolean,String],default:void 0},autocomplete:{type:String,required:!1},autofocus:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},form:{type:String,required:!1},formatter:{type:Function,required:!1},id:{type:String,required:!1},lazy:{type:Boolean,default:!1},lazyFormatter:{type:Boolean,default:!1},list:{type:String,required:!1},modelValue:{type:[String,Number],default:""},name:{type:String,required:!1},number:{type:Boolean,default:!1},placeholder:{type:String,required:!1},plaintext:{type:Boolean,default:!1},readonly:{type:Boolean,default:!1},required:{type:Boolean,default:!1},size:{type:String,required:!1},state:{type:Boolean,default:null},trim:{type:Boolean,default:!1}},hh=(t,e)=>{const n=(0,r.KR)();let i=null,o=!0;const a=ch((0,r.lW)(t,"id"),"input"),l=(e,n,i=!1)=>(e=String(e),"function"!=typeof t.formatter||t.lazyFormatter&&!i?e:(o=!1,t.formatter(e,n))),c=e=>t.trim?e.trim():t.number?Number.parseFloat(e):e,u=()=>{(0,s.dY)((()=>{var e;t.autofocus&&(null==(e=n.value)||e.focus())}))};(0,s.sV)(u),(0,s.sV)((()=>{n.value&&(n.value.value=t.modelValue)})),(0,s.n)(u);const h=(0,s.EW)((()=>{var e;return Nu(t.ariaInvalid,null!=(e=t.state)?e:void 0)})),A=n=>{const{value:r}=n.target,s=l(r,n);if(!1===s||n.defaultPrevented)return void n.preventDefault();if(t.lazy)return;const o=c(s);t.modelValue!==o&&(i=r,e("update:modelValue",o)),e("input",s)},d=n=>{const{value:r}=n.target,s=l(r,n);if(!1===s||n.defaultPrevented)return void n.preventDefault();if(!t.lazy)return;i=r,e("update:modelValue",s);const o=c(s);t.modelValue!==o&&e("change",s)},f=n=>{if(e("blur",n),!t.lazy&&!t.lazyFormatter)return;const{value:r}=n.target,s=l(r,n,!0);i=r,e("update:modelValue",s)},p=()=>{var e;t.disabled||null==(e=n.value)||e.focus()},g=()=>{var e;t.disabled||null==(e=n.value)||e.blur()};return(0,s.wB)((()=>t.modelValue),(t=>{!n.value||(n.value.value=i&&o?i:t,i=null,o=!0)})),{input:n,computedId:a,computedAriaInvalid:h,onInput:A,onChange:d,onBlur:f,focus:p,blur:g}},Ah=(t,e)=>{if(!t)return t;if(e in t)return t[e];const n=e.split(".");return Ah(t[n[0]],n.splice(1).join("."))},dh=(t,e=null,n,i)=>{if("[object Object]"===Object.prototype.toString.call(t)){const r=Ah(t,i.valueField),s=Ah(t,i.textField),o=Ah(t,i.htmlField),a=Ah(t,i.disabledField),l=t[i.optionsField]||null;return null!==l?{label:String(Ah(t,i.labelField)||s),options:fh(l,n,i)}:{value:typeof r>"u"?e||s:r,text:String(typeof s>"u"?e:s),html:o,disabled:Boolean(a)}}return{value:e||t,text:String(t),disabled:!1}},fh=(t,e,n)=>Array.isArray(t)?t.map((t=>dh(t,null,e,n))):"[object Object]"===Object.prototype.toString.call(t)?(console.warn(`[BootstrapVue warn]: ${e} - Setting prop "options" to an object is deprecated. Use the array format instead.`),Object.keys(t).map((i=>{const r=t[i];switch(typeof r){case"object":return dh(r.text,String(r.value),e,n);default:return dh(r,String(i),e,n)}}))):[],ph=(t=!1,e={})=>{var n,i;const r="data-bs-theme",s="body";return _c({attribute:r,selector:s,storageKey:t?`${null!=(n=e.attribute)?n:r}-${null!=(i=e.selector)?i:s}`:null,...e})},gh=["id"],mh=Symbol(),vh=(0,s.pM)({__name:"BAccordion",props:{flush:{default:!1},free:{default:!1},id:null},setup(t){const e=t,n=ch((0,r.lW)(e,"id"),"accordion"),i=$u((0,r.lW)(e,"flush")),a=$u((0,r.lW)(e,"free")),l=(0,s.EW)((()=>({"accordion-flush":i.value})));return a.value||(0,s.Gt)(mh,n.value),(t,e)=>((0,s.uX)(),(0,s.CE)("div",{id:(0,r.R1)(n),class:(0,o.C4)(["accordion",(0,r.R1)(l)])},[(0,s.RG)(t.$slots,"default")],10,gh))}}),yh=(0,s.pM)({__name:"BCollapse",props:{accordion:null,id:{default:Pu()},modelValue:{default:!1},tag:{default:"div"},toggle:{default:!1},visible:{default:!1},isNav:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(t,{emit:e}){const n=t,i=$u((0,r.lW)(n,"modelValue")),a=$u((0,r.lW)(n,"toggle")),l=$u((0,r.lW)(n,"visible")),c=$u((0,r.lW)(n,"isNav")),u=(0,r.KR)(),h=(0,r.KR)(),A=(0,s.EW)((()=>({show:i.value,"navbar-collapse":c.value}))),d=()=>e("update:modelValue",!1);return(0,s.wB)((()=>i.value),(t=>{var e,n;t?null==(e=h.value)||e.show():null==(n=h.value)||n.hide()})),(0,s.wB)((()=>l.value),(t=>{var n,i;t?(e("update:modelValue",!!t),null==(n=h.value)||n.show()):(e("update:modelValue",!!t),null==(i=h.value)||i.hide())})),th(u,"show.bs.collapse",(()=>{e("show"),e("update:modelValue",!0)})),th(u,"hide.bs.collapse",(()=>{e("hide"),e("update:modelValue",!1)})),th(u,"shown.bs.collapse",(()=>e("shown"))),th(u,"hidden.bs.collapse",(()=>e("hidden"))),(0,s.sV)((()=>{var t;h.value=new Yi(u.value,{parent:n.accordion?`#${n.accordion}`:void 0,toggle:a.value}),(l.value||i.value)&&(e("update:modelValue",!0),null==(t=h.value)||t.show())})),(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{id:t.id,ref_key:"element",ref:u,class:(0,o.C4)(["collapse",(0,r.R1)(A)]),"data-bs-parent":t.accordion||null,"is-nav":(0,r.R1)(c)},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{visible:(0,r.R1)(i),close:d})])),_:3},8,["id","class","data-bs-parent","is-nav"]))}}),wh=(t,e)=>t.setAttribute("data-bs-theme",e),_h={mounted(t,e){wh(t,e.value)},updated(t,e){wh(t,e.value)}},bh={mounted(t,e){const n=e.modifiers.left?"left":e.modifiers.right?"right":e.modifiers.bottom?"bottom":e.modifiers.top?"top":"right",i=[];e.modifiers.manual?i.push("manual"):(e.modifiers.click&&i.push("click"),e.modifiers.hover&&i.push("hover"),e.modifiers.focus&&i.push("focus")),t.setAttribute("data-bs-toggle","popover"),new jo(t,{trigger:0===i.length?"click":i.join(" "),placement:n,content:e.value,html:e.modifiers.html})},unmounted(t){const e=jo.getInstance(t);null!==e&&e.dispose()}},xh=t=>{if(t.classList.contains("offcanvas"))return"offcanvas";if(t.classList.contains("collapse"))return"collapse";throw Error("Couldn't resolve toggle type")},Eh=(t,e)=>{const{modifiers:n,arg:i,value:r}=t,s=Object.keys(n||{}),o="string"==typeof r?r.split(Qc):r;if(Bu(e.tagName,"a")){const t=xu(e,"href")||"";Hc.test(t)&&s.push(t.replace(Gc,""))}return Array.prototype.concat.apply([],[i,o]).forEach((t=>"string"==typeof t&&s.push(t))),s.filter(((t,e,n)=>t&&n.indexOf(t)===e))},Ch={mounted(t,e){const n=Eh(e,t),i=[],r="a"===t.tagName?"href":"data-bs-target";n.forEach((e=>{const n=document.getElementById(e);null!==n&&(t.setAttribute("data-bs-toggle",xh(n)),i.push(`#${e}`))})),i.length>0&&t.setAttribute(r,i.join(","))}},Sh=(t,e)=>{if(null!=e&&e.trigger)return e.trigger;if(t.manual)return"manual";const n=[];return t.click&&n.push("click"),t.hover&&n.push("hover"),t.focus&&n.push("focus"),n.length>0?n.join(" "):"hover focus"},Bh=(t,e)=>null!=e&&e.placement?e.placement:t.left?"left":t.right?"right":t.bottom?"bottom":"top",Th=t=>null!=t&&t.delay?t.delay:0,Ih=t=>typeof t>"u"?(console.warn("Review tooltip directive usage. Some uses are not defining a title in root component or a value like `v-b-tooltip='{title: \"my title\"}'` nor `v-b-tooltip=\"'my title'\"` to define a title"),""):"object"==typeof t?null==t?void 0:t.title:t,Fh={beforeMount(t,e){t.setAttribute("data-bs-toggle","tooltip"),t.getAttribute("title")||t.setAttribute("title",Ih(e.value).toString());const n=/<("[^"]*"|'[^']*'|[^'">])*>/.test(t.title),i=Sh(e.modifiers,e.value),r=Bh(e.modifiers,e.value),s=Th(e.value),o=t.getAttribute("title");new Do(t,{trigger:i,placement:r,delay:s,html:n}),o&&t.setAttribute("data-bs-original-title",o)},updated(t,e){t.getAttribute("title")||t.setAttribute("title",Ih(e.value).toString());const n=t.getAttribute("title"),i=t.getAttribute("data-bs-original-title"),r=Do.getInstance(t);t.removeAttribute("title"),n&&n!==i&&(null==r||r.setContent({".tooltip-inner":n}),t.setAttribute("data-bs-original-title",n))},unmounted(t){const e=Do.getInstance(t);null!==e&&e.dispose()}},Lh=new Map;class Rh{constructor(t,e,n,i,r){cl(this,"element"),cl(this,"margin"),cl(this,"once"),cl(this,"callback"),cl(this,"instance"),cl(this,"observer"),cl(this,"doneOnce"),cl(this,"visible"),this.element=t,this.margin=e,this.once=n,this.callback=i,this.instance=r,this.createObserver()}createObserver(){if(this.observer&&this.stop(),!this.doneOnce&&"function"==typeof this.callback){try{this.observer=new IntersectionObserver(this.handler.bind(this),{root:null,rootMargin:this.margin,threshold:0})}catch{return console.error("Intersection Observer not supported"),this.doneOnce=!0,this.observer=void 0,void this.callback(null)}this.instance.$nextTick((()=>{this.observer&&this.observer.observe(this.element)}))}}handler(t){const[e]=t,n=Boolean(e.isIntersecting||e.intersectionRatio>0);n!==this.visible&&(this.visible=n,this.callback(n),this.once&&this.visible&&(this.doneOnce=!0,this.stop()))}stop(){this.observer&&this.observer.disconnect(),this.observer=null}}const Mh=t=>{if(Lh.has(t)){const e=Lh.get(t);e&&e.stop&&e.stop(),Lh.delete(t)}},Ph=(t,e)=>{const n={margin:"0px",once:!1,callback:e.value};Object.keys(e.modifiers).forEach((t=>{Number.isInteger(t)?n.margin=`${t}px`:"once"===t.toLowerCase()&&(n.once=!0)})),Mh(t);const i=new Rh(t,n.margin,n.once,n.callback,e.instance);Lh.set(t,i)},Nh={beforeMount(t,e){Ph(t,e)},updated(t,e){Ph(t,e)},unmounted(t){Mh(t)}},Oh={class:"accordion-item"},kh=["id"],Dh=["aria-expanded","aria-controls"],Uh={class:"accordion-body"},Qh=(0,s.pM)({__name:"BAccordionItem",props:{id:null,title:null,visible:{default:!1}},setup(t){const e=t,n=(0,s.WQ)(mh,""),i=ch((0,r.lW)(e,"id"),"accordion_item"),a=$u((0,r.lW)(e,"visible"));return(e,l)=>((0,s.uX)(),(0,s.CE)("div",Oh,[(0,s.Lk)("h2",{id:`${(0,r.R1)(i)}heading`,class:"accordion-header"},[(0,s.bo)(((0,s.uX)(),(0,s.CE)("button",{class:(0,o.C4)(["accordion-button",{collapsed:!(0,r.R1)(a)}]),type:"button","aria-expanded":(0,r.R1)(a)?"true":"false","aria-controls":(0,r.R1)(i)},[(0,s.RG)(e.$slots,"title",{},(()=>[(0,s.eW)((0,o.v_)(t.title),1)]))],10,Dh)),[[(0,r.R1)(Ch),void 0,(0,r.R1)(i)]])],8,kh),(0,s.bF)(yh,{id:(0,r.R1)(i),class:"accordion-collapse",visible:t.visible,accordion:(0,r.R1)(n),"aria-labelledby":`heading${(0,r.R1)(i)}`},{default:(0,s.k6)((()=>[(0,s.Lk)("div",Uh,[(0,s.RG)(e.$slots,"default")])])),_:3},8,["id","visible","accordion","aria-labelledby"])]))}}),Gh=(0,s.pM)({__name:"BTransition",props:{appear:{default:!1},mode:null,noFade:{default:!1},transProps:null},setup(t){const e=t,n=$u((0,r.lW)(e,"appear")),i=$u((0,r.lW)(e,"noFade")),l=(0,s.EW)((()=>{const t={name:"",enterActiveClass:"",enterToClass:"",leaveActiveClass:"",leaveToClass:"showing",enterFromClass:"showing",leaveFromClass:""},e={...t,enterActiveClass:"fade showing",leaveActiveClass:"fade showing"};return i.value?t:e})),c=(0,s.EW)((()=>({mode:e.mode,css:!0,...l.value}))),u=(0,s.EW)((()=>void 0!==e.transProps?{...c.value,...e.transProps}:n.value?{...c.value,appear:!0,appearActiveClass:l.value.enterActiveClass,appearToClass:l.value.enterToClass}:c.value));return(t,e)=>((0,s.uX)(),(0,s.Wv)(a.eB,(0,o._B)((0,s.Ng)((0,r.R1)(u))),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},16))}}),Hh=["type","disabled","aria-label"],Vh=(0,s.pM)({__name:"BCloseButton",props:{ariaLabel:{default:"Close"},disabled:{default:!1},white:{default:!1},type:{default:"button"}},emits:["click"],setup(t,{emit:e}){const n=t,i=$u((0,r.lW)(n,"disabled")),a=$u((0,r.lW)(n,"white")),l=(0,s.EW)((()=>({"btn-close-white":a.value})));return(n,a)=>((0,s.uX)(),(0,s.CE)("button",{type:t.type,class:(0,o.C4)(["btn-close",(0,r.R1)(l)]),disabled:(0,r.R1)(i),"aria-label":t.ariaLabel,onClick:a[0]||(a[0]=t=>e("click",t))},null,10,Hh))}}),jh={key:0,class:"visually-hidden"},Wh=(0,s.pM)({__name:"BSpinner",props:{label:null,role:{default:"status"},small:{default:!1},tag:{default:"span"},type:{default:"border"},variant:null},setup(t){const e=t,n=(0,s.Ht)(),i=$u((0,r.lW)(e,"small")),a=(0,s.EW)((()=>({"spinner-border":"border"===e.type,"spinner-border-sm":"border"===e.type&&i.value,"spinner-grow":"grow"===e.type,"spinner-grow-sm":"grow"===e.type&&i.value,[`text-${e.variant}`]:void 0!==e.variant}))),l=(0,s.EW)((()=>!wu(n.label)));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)((0,r.R1)(a)),role:t.label||(0,r.R1)(l)?t.role:null,"aria-hidden":!t.label&&!(0,r.R1)(l)||null},{default:(0,s.k6)((()=>[t.label||(0,r.R1)(l)?((0,s.uX)(),(0,s.CE)("span",jh,[(0,s.RG)(e.$slots,"label",{},(()=>[(0,s.eW)((0,o.v_)(t.label),1)]))])):(0,s.Q3)("",!0)])),_:3},8,["class","role","aria-hidden"]))}}),zh={active:{type:[Boolean,String],default:!1},activeClass:{type:String,default:"router-link-active"},append:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},event:{type:[String,Array],default:"click"},exact:{type:[Boolean,String],default:!1},exactActiveClass:{type:String,default:"router-link-exact-active"},href:{type:String},rel:{type:String,default:null},replace:{type:[Boolean,String],default:!1},routerComponentName:{type:String,default:"router-link"},routerTag:{type:String,default:"a"},target:{type:String,default:"_self"},to:{type:[String,Object],default:null}},Kh=(0,s.pM)({props:zh,emits:["click"],setup(t,{emit:e,attrs:n}){const i=$u((0,r.lW)(t,"active")),o=$u((0,r.lW)(t,"append")),a=$u((0,r.lW)(t,"disabled")),l=$u((0,r.lW)(t,"exact")),c=$u((0,r.lW)(t,"replace")),u=(0,s.nI)(),h=(0,r.KR)(null),A=(0,s.EW)((()=>{const e=t.routerComponentName.split("-").map((t=>t.charAt(0).toUpperCase()+t.slice(1))).join("");return void 0===(null==u?void 0:u.appContext.app.component(e))||a.value||!t.to?"a":t.routerComponentName})),d=(0,s.EW)((()=>{const e="#";if(t.href)return t.href;if("string"==typeof t.to)return t.to||e;const n=t.to;if("[object Object]"===Object.prototype.toString.call(n)&&(n.path||n.query||n.hash)){const t=n.path||"",i=n.query?`?${Object.keys(n.query).map((t=>`${t}=${n.query[t]}`)).join("=")}`:"",r=n.hash&&"#"!==n.hash.charAt(0)?`#${n.hash}`:n.hash||"";return`${t}${i}${r}`||e}return e})),f=(0,s.EW)((()=>({to:t.to,href:d.value,target:t.target,rel:"_blank"===t.target&&null===t.rel?"noopener":t.rel||null,tabindex:a.value?"-1":typeof n.tabindex>"u"?null:n.tabindex,"aria-disabled":a.value?"true":null})));return{computedLinkClasses:(0,s.EW)((()=>({active:i.value,disabled:a.value}))),tag:A,routerAttr:f,link:h,clicked:t=>{if(a.value)return t.preventDefault(),void t.stopImmediatePropagation();e("click",t)},activeBoolean:i,appendBoolean:o,disabledBoolean:a,replaceBoolean:c,exactBoolean:l}}}),qh=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n};function $h(t,e,n,i,r,o){return"router-link"===t.tag?((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),(0,s.v6)({key:0},t.routerAttr,{custom:""}),{default:(0,s.k6)((({href:e,navigate:n,isActive:i,isExactActive:r})=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.routerTag),(0,s.v6)({ref:"link",href:e,class:[(i||t.activeBoolean)&&t.activeClass,(r||t.exactBoolean)&&t.exactActiveClass]},t.$attrs,{onClick:n}),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:2},1040,["href","class","onClick"]))])),_:3},16)):((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),(0,s.v6)({key:1,ref:"link",class:t.computedLinkClasses},t.routerAttr,{onClick:t.clicked}),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},16,["class","onClick"]))}const Xh=qh(Kh,[["render",$h]]),Yh=(0,s.pM)({components:{BLink:Xh,BSpinner:Wh},props:{...zh,active:{type:[Boolean,String],default:!1},disabled:{type:[Boolean,String],default:!1},href:{type:String,required:!1},pill:{type:[Boolean,String],default:!1},pressed:{type:[Boolean,String],default:!1},rel:{type:String,default:void 0},size:{type:String,default:"md"},squared:{type:[Boolean,String],default:!1},tag:{type:String,default:"button"},target:{type:String,default:"_self"},type:{type:String,default:"button"},variant:{type:String,default:"secondary"},loading:{type:[Boolean,String],default:!1},loadingMode:{type:String,default:"inline"}},emits:["click","update:pressed"],setup(t,{emit:e}){const n=$u((0,r.lW)(t,"active")),i=$u((0,r.lW)(t,"disabled")),o=$u((0,r.lW)(t,"pill")),a=$u((0,r.lW)(t,"pressed")),l=$u((0,r.lW)(t,"squared")),c=$u((0,r.lW)(t,"loading")),u=(0,s.EW)((()=>!0===a.value)),h=(0,s.EW)((()=>"button"===t.tag&&void 0===t.href&&null===t.to)),A=(0,s.EW)((()=>qu(t))),d=(0,s.EW)((()=>null!==t.to)),f=(0,s.EW)((()=>void 0===t.href&&!h.value)),p=(0,s.EW)((()=>[[`btn-${t.variant}`],[`btn-${t.size}`],{active:n.value||a.value,"rounded-pill":o.value,"rounded-0":l.value,disabled:i.value}])),g=(0,s.EW)((()=>({"aria-disabled":f.value?i.value:null,"aria-pressed":u.value?a.value:null,autocomplete:u.value?"off":null,disabled:h.value?i.value:null,href:t.href,rel:A.value?t.rel:null,role:f.value||A.value?"button":null,target:A.value?t.target:null,type:h.value?t.type:null,to:h.value?null:t.to,append:A.value?t.append:null,activeClass:d.value?t.activeClass:null,event:d.value?t.event:null,exact:d.value?t.exact:null,exactActiveClass:d.value?t.exactActiveClass:null,replace:d.value?t.replace:null,routerComponentName:d.value?t.routerComponentName:null,routerTag:d.value?t.routerTag:null}))),m=(0,s.EW)((()=>d.value?Xh:t.href?"a":t.tag));return{computedClasses:p,computedAttrs:g,computedTag:m,clicked:t=>{if(i.value)return t.preventDefault(),void t.stopPropagation();e("click",t),u.value&&e("update:pressed",!a.value)},loadingBoolean:c}}});function Zh(t,e,n,i,r,a){const l=(0,s.g2)("b-spinner");return(0,s.uX)(),(0,s.Wv)((0,s.$y)(t.computedTag),(0,s.v6)({class:["btn",t.computedClasses]},t.computedAttrs,{onClick:t.clicked}),{default:(0,s.k6)((()=>[t.loadingBoolean?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["btn-loading",{"mode-fill":"fill"===t.loadingMode,"mode-inline":"inline"===t.loadingMode}])},[(0,s.RG)(t.$slots,"loading",{},(()=>[(0,s.bF)(l,{class:"btn-spinner",small:"lg"!==t.size},null,8,["small"])]))],2)):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,o.C4)(["btn-content",{"btn-loading-fill":t.loadingBoolean&&"fill"===t.loadingMode}])},[(0,s.RG)(t.$slots,"default")],2)])),_:3},16,["class","onClick"])}const Jh=qh(Yh,[["render",Zh]]),tA=(t,e=(0,r.KR)(1e3),n={})=>{const i=(0,r.KR)(!1),o=(0,r.KR)(0),a=(0,r.KR)(El(t)),l=(0,r.KR)(El(e)),c=(0,s.EW)((()=>Math.ceil(a.value/l.value))),u=(0,s.EW)((()=>d.value||i.value?Math.round(a.value-o.value*l.value):0)),{pause:h,resume:A,isActive:d}=Rl((()=>o.value=o.value+1),e,n),f=()=>{i.value=!1,o.value=0,A()},p=()=>{i.value=!1,o.value=c.value};(0,s.nT)((()=>{const e=El(t),n=a.value;e!==n&&(a.value=e,p(),f())})),(0,s.nT)((()=>{const t=El(e),n=l.value;t!==n&&(l.value=t,p(),f())})),(0,s.nT)((()=>{o.value>c.value&&(o.value=c.value),o.value===c.value&&h()}));const g=()=>{!1!==d.value&&(i.value=!0,h())},m=()=>{o.value!==c.value&&(i.value=!1,A())};return{isActive:(0,r.tB)(d),isPaused:(0,r.tB)(i),restart:f,stop:p,pause:g,resume:m,value:u}},eA=(0,s.pM)({__name:"BAlert",props:{dismissLabel:{default:"Close"},dismissible:{default:!1},fade:{default:!1},modelValue:{type:[Boolean,Number],default:!1},variant:{default:"info"},closeContent:null,immediate:{default:!0},interval:{default:1e3},showOnPause:{default:!0}},emits:["closed","close-countdown","update:modelValue"],setup(t,{expose:e,emit:n}){const i=t,a=$u((0,r.lW)(i,"dismissible")),l=$u((0,r.lW)(i,"fade")),c=$u((0,r.lW)(i,"immediate")),u=$u((0,r.lW)(i,"showOnPause")),h=(0,s.Ht)(),A=(0,s.EW)((()=>!wu(h.close))),d=(0,s.EW)((()=>[[`alert-${i.variant}`],{"alert-dismissible":a.value}])),{isActive:f,pause:p,restart:g,resume:m,stop:v,isPaused:y,value:w}=tA("boolean"==typeof i.modelValue?0:(0,r.lW)(i,"modelValue"),(0,r.lW)(i,"interval"),{immediate:"number"==typeof i.modelValue&&c.value}),_=(0,s.EW)((()=>"boolean"==typeof i.modelValue?i.modelValue:f.value||u.value&&y.value));(0,s.nT)((()=>n("close-countdown",w.value)));const b=()=>{"boolean"==typeof i.modelValue?n("update:modelValue",!1):(n("update:modelValue",0),v()),n("closed")};return(0,s.xo)((()=>v())),e({pause:p,resume:m,restart:g,stop:v}),(e,n)=>((0,s.uX)(),(0,s.Wv)(Gh,{"no-fade":!(0,r.R1)(l),"trans-props":{enterToClass:"show"}},{default:(0,s.k6)((()=>[(0,r.R1)(_)?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["alert",(0,r.R1)(d)]),role:"alert","aria-live":"polite","aria-atomic":"true"},[(0,s.RG)(e.$slots,"default"),(0,r.R1)(a)?((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,r.R1)(A)||t.closeContent?((0,s.uX)(),(0,s.Wv)(Jh,{key:0,type:"button",onClick:b},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"close",{},(()=>[(0,s.eW)((0,o.v_)(t.closeContent),1)]))])),_:3})):((0,s.uX)(),(0,s.Wv)(Vh,{key:1,"aria-label":t.dismissLabel,onClick:b},null,8,["aria-label"]))],64)):(0,s.Q3)("",!0)],2)):(0,s.Q3)("",!0)])),_:3},8,["no-fade"]))}}),nA=Symbol(),iA=(0,s.pM)({__name:"BAvatarGroup",props:{overlap:{default:.3},rounded:{type:[Boolean,String],default:!1},size:null,square:{default:!1},tag:{default:"div"},variant:null},setup(t){const e=t,n=$u((0,r.lW)(e,"square")),i=(0,s.EW)((()=>aA(e.size))),a=(0,s.EW)((()=>Math.min(Math.max(c(e.overlap),0),1)/2)),l=(0,s.EW)((()=>{const t=i.value?`calc(${i.value} * ${a.value})`:null;return t?{paddingLeft:t,paddingRight:t}:{}})),c=t=>"string"==typeof t&&Mc(t)?Gu(t,0):t||0;return(0,s.Gt)(nA,{overlapScale:a,size:e.size,square:n.value,rounded:e.rounded,variant:e.variant}),(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:"b-avatar-group",role:"group"},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:"b-avatar-group-inner",style:(0,o.Tr)((0,r.R1)(l))},[(0,s.RG)(e.$slots,"default")],4)])),_:3}))}}),rA={key:0,class:"b-avatar-custom"},sA={key:1,class:"b-avatar-img"},oA=["src","alt"],aA=t=>{const e="string"==typeof t&&Mc(t)?Gu(t,0):t;return"number"==typeof e?`${e}px`:e||null},lA=(0,s.pM)({__name:"BAvatar",props:{alt:{default:"avatar"},ariaLabel:null,badge:{type:[Boolean,String],default:!1},badgeLeft:{default:!1},badgeOffset:null,badgeTop:{default:!1},badgeVariant:{default:"primary"},button:{default:!1},buttonType:{default:"button"},disabled:{default:!1},icon:null,rounded:{type:[Boolean,String],default:"circle"},size:null,square:{default:!1},src:null,text:null,textVariant:null,variant:{default:"secondary"}},emits:["click","img-error"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),a=(0,s.WQ)(nA,null),l=["sm",null,"lg"],c=.4,u=.7*c,h=$u((0,r.lW)(n,"badgeLeft")),A=$u((0,r.lW)(n,"badgeTop")),d=$u((0,r.lW)(n,"button")),f=$u((0,r.lW)(n,"disabled")),p=$u((0,r.lW)(n,"square")),g=(0,s.EW)((()=>!wu(i.default))),m=(0,s.EW)((()=>!wu(i.badge))),v=(0,s.EW)((()=>!!n.badge||""===n.badge||m.value)),y=(0,s.EW)((()=>null!=a&&a.size?a.size:aA(n.size))),w=(0,s.EW)((()=>null!=a&&a.variant?a.variant:n.variant)),_=(0,s.EW)((()=>null!=a&&a.rounded?a.rounded:n.rounded)),b=(0,s.EW)((()=>({type:d.value?n.buttonType:void 0,"aria-label":n.ariaLabel||null,disabled:f.value||null}))),x=(0,s.EW)((()=>[`bg-${n.badgeVariant}`])),E=(0,s.EW)((()=>!0===n.badge?"":n.badge)),C=(0,s.EW)((()=>[[`text-${M(n.badgeVariant)}`]])),S=(0,s.EW)((()=>({[`b-avatar-${n.size}`]:!!n.size&&-1!==l.indexOf(aA(n.size)),[`bg-${w.value}`]:!!w.value,badge:!d.value&&w.value&&g.value,rounded:""===_.value||!0===_.value,["rounded-circle"]:!p.value&&"circle"===_.value,["rounded-0"]:p.value||"0"===_.value,["rounded-1"]:!p.value&&"sm"===_.value,["rounded-3"]:!p.value&&"lg"===_.value,["rounded-top"]:!p.value&&"top"===_.value,["rounded-bottom"]:!p.value&&"bottom"===_.value,["rounded-start"]:!p.value&&"left"===_.value,["rounded-end"]:!p.value&&"right"===_.value,btn:d.value,[`btn-${w.value}`]:!!d.value&&!!w.value}))),B=(0,s.EW)((()=>[[`text-${n.textVariant||M(w.value)}`]])),T=(0,s.EW)((()=>{const t=n.badgeOffset||"0px";return{fontSize:(-1===l.indexOf(y.value||null)?`calc(${y.value} * ${u})`:"")||"",top:A.value?t:"",bottom:A.value?"":t,left:h.value?t:"",right:h.value?"":t}})),I=(0,s.EW)((()=>{const t=-1===l.indexOf(y.value||null)?`calc(${y.value} * ${c})`:null;return t?{fontSize:t}:{}})),F=(0,s.EW)((()=>{var t;const e=(null==(t=null==a?void 0:a.overlapScale)?void 0:t.value)||0,n=y.value&&e?`calc(${y.value} * -${e})`:null;return n?{marginLeft:n,marginRight:n}:{}})),L=(0,s.EW)((()=>d.value?"button":"span")),R=(0,s.EW)((()=>({...F.value,width:y.value,height:y.value}))),M=t=>"light"===t||"warning"===t?"dark":"light",P=t=>{!f.value&&d.value&&e("click",t)},N=t=>e("img-error",t);return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)((0,r.R1)(L)),(0,s.v6)({class:["b-avatar",(0,r.R1)(S)],style:(0,r.R1)(R)},(0,r.R1)(b),{onClick:P}),{default:(0,s.k6)((()=>[(0,r.R1)(g)?((0,s.uX)(),(0,s.CE)("span",rA,[(0,s.RG)(e.$slots,"default")])):t.src?((0,s.uX)(),(0,s.CE)("span",sA,[(0,s.Lk)("img",{src:t.src,alt:t.alt,onError:N},null,40,oA)])):t.text?((0,s.uX)(),(0,s.CE)("span",{key:2,class:(0,o.C4)(["b-avatar-text",(0,r.R1)(B)]),style:(0,o.Tr)((0,r.R1)(I))},(0,o.v_)(t.text),7)):(0,s.Q3)("",!0),(0,r.R1)(v)?((0,s.uX)(),(0,s.CE)("span",{key:3,class:(0,o.C4)(["b-avatar-badge",(0,r.R1)(x)]),style:(0,o.Tr)((0,r.R1)(T))},[(0,r.R1)(m)?(0,s.RG)(e.$slots,"badge",{key:0}):((0,s.uX)(),(0,s.CE)("span",{key:1,class:(0,o.C4)((0,r.R1)(C))},(0,o.v_)((0,r.R1)(E)),3))],6)):(0,s.Q3)("",!0)])),_:3},16,["class","style"]))}}),cA=Hu(zh,["event","routerTag"]),uA=(0,s.pM)({components:{BLink:Xh},props:{pill:{type:[Boolean,String],default:!1},tag:{type:String,default:"span"},variant:{type:String,default:"secondary"},textIndicator:{type:[Boolean,String],default:!1},dotIndicator:{type:[Boolean,String],default:!1},...cA},setup(t){const e=$u((0,r.lW)(t,"pill")),n=$u((0,r.lW)(t,"textIndicator")),i=$u((0,r.lW)(t,"dotIndicator")),o=$u((0,r.lW)(t,"active")),a=$u((0,r.lW)(t,"disabled")),l=(0,s.EW)((()=>qu(t))),c=(0,s.EW)((()=>l.value?Xh:t.tag)),u=(0,s.EW)((()=>[[`bg-${t.variant}`],{active:o.value,disabled:a.value,"text-dark":["warning","info","light"].includes(t.variant),"rounded-pill":e.value,"position-absolute top-0 start-100 translate-middle":n.value||i.value,"p-2 border border-light rounded-circle":i.value,"text-decoration-none":l.value}])),h=(0,s.EW)((()=>l.value?zu(t,cA):{}));return{computedClasses:u,computedLinkProps:h,computedTag:c}}});function hA(t,e,n,i,r,o){return(0,s.uX)(),(0,s.Wv)((0,s.$y)(t.computedTag),(0,s.v6)({class:["badge",t.computedClasses]},t.computedLinkProps),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},16,["class"])}const AA=qh(uA,[["render",hA]]),dA=Hu(zh,["event","routerTag"]),fA=(0,s.pM)({components:{BLink:Xh},props:{...dA,active:{type:[Boolean,String],default:!1},ariaCurrent:{type:String,default:"location"},disabled:{type:[Boolean,String],default:!1},text:{type:String,required:!1}},emits:["click"],setup(t,{emit:e}){const n=$u((0,r.lW)(t,"active")),i=$u((0,r.lW)(t,"disabled")),o=(0,s.EW)((()=>({active:n.value}))),a=(0,s.EW)((()=>n.value?"span":Xh)),l=(0,s.EW)((()=>n.value?t.ariaCurrent:void 0));return{computedLinkProps:(0,s.EW)((()=>"span"!==a.value?zu(t,dA):{})),computedClasses:o,computedTag:a,computedAriaCurrent:l,clicked:t=>{if(i.value||n.value)return t.preventDefault(),void t.stopImmediatePropagation();i.value||e("click",t)}}}});function pA(t,e,n,i,r,a){return(0,s.uX)(),(0,s.CE)("li",{class:(0,o.C4)(["breadcrumb-item",t.computedClasses])},[((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.computedTag),(0,s.v6)({"aria-current":t.computedAriaCurrent},t.computedLinkProps,{onClick:t.clicked}),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},16,["aria-current","onClick"]))],2)}const gA=qh(fA,[["render",pA]]),mA={"aria-label":"breadcrumb"},vA={class:"breadcrumb"},yA=(0,s.pM)({__name:"BBreadcrumb",props:{items:null},setup(t){const e=t,n=Ju(),i=(0,s.EW)((()=>{const t=e.items||(null==n?void 0:n.items)||[];let i=!1;return t.map(((e,n)=>("string"==typeof e&&(e={text:e},n<t.length-1&&(e.href="#")),e.active&&(i=!0),!e.active&&!i&&(e.active=n+1===t.length),e)))}));return(t,e)=>((0,s.uX)(),(0,s.CE)("nav",mA,[(0,s.Lk)("ol",vA,[(0,s.RG)(t.$slots,"prepend"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(i),((t,e)=>((0,s.uX)(),(0,s.Wv)(gA,(0,s.v6)({key:e},t),{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(t.text),1)])),_:2},1040)))),128)),(0,s.RG)(t.$slots,"default"),(0,s.RG)(t.$slots,"append")])]))}}),wA=(0,s.pM)({__name:"BButtonGroup",props:{ariaLabel:{default:"Group"},size:null,tag:{default:"div"},vertical:{default:!1}},setup(t){const e=t,n=$u((0,r.lW)(e,"vertical")),i=(0,s.EW)((()=>({"btn-group":!n.value,[`btn-group-${e.size}`]:void 0!==e.size,"btn-group-vertical":n.value})));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)((0,r.R1)(i)),role:"group","aria-label":t.ariaLabel},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default")])),_:3},8,["class","aria-label"]))}}),_A=["role","aria-label"],bA=(0,s.pM)({__name:"BButtonToolbar",props:{ariaLabel:{default:"Group"},justify:{default:!1},role:{default:"toolbar"}},setup(t){const e=$u((0,r.lW)(t,"justify")),n=(0,s.EW)((()=>({"justify-content-between":e.value})));return(e,i)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)([(0,r.R1)(n),"btn-toolbar"]),role:t.role,"aria-label":t.ariaLabel},[(0,s.RG)(e.$slots,"default")],10,_A))}}),xA=(0,s.pM)({__name:"BImg",props:{alt:null,blank:{default:!1},blankColor:{default:"transparent"},block:{default:!1},center:{default:!1},fluid:{default:!1},lazy:{default:!1},fluidGrow:{default:!1},height:null,left:{default:!1},start:{default:!1},right:{default:!1},end:{default:!1},rounded:{type:[Boolean,String],default:!1},sizes:null,src:null,srcset:null,thumbnail:{default:!1},width:null},emits:["load"],setup(t,{emit:e}){const n=t,i='<svg width="%{w}" height="%{h}" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 %{w} %{h}" preserveAspectRatio="none"><rect width="100%" height="100%" style="fill:%{f};"></rect></svg>',o=$u((0,r.lW)(n,"lazy")),a=$u((0,r.lW)(n,"blank")),l=$u((0,r.lW)(n,"block")),c=$u((0,r.lW)(n,"center")),u=$u((0,r.lW)(n,"fluid")),h=$u((0,r.lW)(n,"fluidGrow")),A=$u((0,r.lW)(n,"left")),d=$u((0,r.lW)(n,"start")),f=$u((0,r.lW)(n,"right")),p=$u((0,r.lW)(n,"end")),g=$u((0,r.lW)(n,"thumbnail")),m=(0,s.EW)((()=>"string"==typeof n.srcset?n.srcset.split(",").filter((t=>t)).join(","):Array.isArray(n.srcset)?n.srcset.filter((t=>t)).join(","):void 0)),v=(0,s.EW)((()=>"string"==typeof n.sizes?n.sizes.split(",").filter((t=>t)).join(","):Array.isArray(n.sizes)?n.sizes.filter((t=>t)).join(","):void 0)),y=(0,s.EW)((()=>{const t=t=>void 0===t?void 0:"number"==typeof t?t:Number.parseInt(t,10)||void 0,e=t(n.width),i=t(n.height);if(a.value){if(void 0!==e&&void 0===i)return{height:e,width:e};if(void 0===e&&void 0!==i)return{height:i,width:i};if(void 0===e&&void 0===i)return{height:1,width:1}}return{width:e,height:i}})),w=(0,s.EW)((()=>E(y.value.width,y.value.height,n.blankColor))),_=(0,s.EW)((()=>({src:a.value?w.value:n.src,alt:n.alt,width:y.value.width||void 0,height:y.value.height||void 0,srcset:a.value?void 0:m.value,sizes:a.value?void 0:v.value,loading:o.value?"lazy":"eager"}))),b=(0,s.EW)((()=>A.value||d.value?"float-start":f.value||p.value?"float-end":c.value?"mx-auto":void 0)),x=(0,s.EW)((()=>({"img-thumbnail":g.value,"img-fluid":u.value||h.value,"w-100":h.value,rounded:""===n.rounded||!0===n.rounded,[`rounded-${n.rounded}`]:"string"==typeof n.rounded&&""!==n.rounded,[`${b.value}`]:void 0!==b.value,"d-block":l.value||c.value}))),E=(t,e,n)=>`data:image/svg+xml;charset=UTF-8,${encodeURIComponent(i.replace("%{w}",String(t)).replace("%{h}",String(e)).replace("%{f}",n))}`;return(t,n)=>((0,s.uX)(),(0,s.CE)("img",(0,s.v6)({class:(0,r.R1)(x)},(0,r.R1)(_),{onLoad:n[0]||(n[0]=t=>e("load",t))}),null,16))}}),EA=(0,s.pM)({__name:"BCardImg",props:{alt:null,blank:{default:!1},blankColor:null,bottom:{default:!1},lazy:{default:!1},height:null,left:{default:!1},start:{default:!1},right:{default:!1},end:{default:!1},sizes:null,src:null,srcset:null,top:{default:!1},width:null},emits:["load"],setup(t,{emit:e}){const n=t,i=$u((0,r.lW)(n,"bottom")),o=$u((0,r.lW)(n,"end")),a=$u((0,r.lW)(n,"left")),l=$u((0,r.lW)(n,"right")),c=$u((0,r.lW)(n,"start")),u=$u((0,r.lW)(n,"top")),h=(0,s.EW)((()=>u.value?"card-img-top":l.value||o.value?"card-img-right":i.value?"card-img-bottom":a.value||c.value?"card-img-left":"card-img")),A=(0,s.EW)((()=>({alt:n.alt,height:n.height,src:n.src,lazy:n.lazy,width:n.width,blank:n.blank,blankColor:n.blankColor,sizes:n.sizes,srcset:n.srcset})));return(t,n)=>((0,s.uX)(),(0,s.Wv)(xA,(0,s.v6)({class:(0,r.R1)(h)},(0,r.R1)(A),{onLoad:n[0]||(n[0]=t=>e("load",t))}),null,16,["class"]))}}),CA=["innerHTML"],SA=(0,s.pM)({__name:"BCardHeadFoot",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t,n=(0,s.EW)((()=>({[`text-${e.textVariant}`]:void 0!==e.textVariant,[`bg-${e.bgVariant}`]:void 0!==e.bgVariant,[`border-${e.borderVariant}`]:void 0!==e.borderVariant})));return(e,i)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)((0,r.R1)(n))},{default:(0,s.k6)((()=>[t.html?((0,s.uX)(),(0,s.CE)("div",{key:0,innerHTML:t.html},null,8,CA)):(0,s.RG)(e.$slots,"default",{key:1},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},8,["class"]))}}),BA=(0,s.pM)({__name:"BCardHeader",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t;return(t,n)=>((0,s.uX)(),(0,s.Wv)(SA,(0,s.v6)({class:"card-header"},e),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},16))}}),TA=(0,s.pM)({__name:"BCardTitle",props:{text:null,tag:{default:"h4"}},setup(t){return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:"card-title"},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3}))}}),IA=(0,s.pM)({__name:"BCardSubtitle",props:{text:null,tag:{default:"h6"},textVariant:{default:"muted"}},setup(t){const e=t,n=(0,s.EW)((()=>[`text-${e.textVariant}`]));return(e,i)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)(["card-subtitle mb-2",(0,r.R1)(n)])},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},8,["class"]))}}),FA=(0,s.pM)({__name:"BCardBody",props:{bodyBgVariant:null,bodyTag:{default:"div"},bodyTextVariant:null,overlay:{default:!1},subtitle:null,subtitleTag:{default:"h4"},subtitleTextVariant:null,title:null,titleTag:{default:"h4"},text:null},setup(t){const e=t,n=(0,s.Ht)(),i=$u((0,r.lW)(e,"overlay")),a=(0,s.EW)((()=>!wu(n.title))),l=(0,s.EW)((()=>!wu(n.subtitle))),c=(0,s.EW)((()=>({"card-img-overlay":i.value,[`text-${e.bodyTextVariant}`]:void 0!==e.bodyTextVariant,[`bg-${e.bodyBgVariant}`]:void 0!==e.bodyBgVariant})));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.bodyTag),{class:(0,o.C4)(["card-body",(0,r.R1)(c)])},{default:(0,s.k6)((()=>[t.title||(0,r.R1)(a)?((0,s.uX)(),(0,s.Wv)(TA,{key:0,tag:t.titleTag},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"title",{},(()=>[(0,s.eW)((0,o.v_)(t.title),1)]))])),_:3},8,["tag"])):(0,s.Q3)("",!0),t.subtitle||(0,r.R1)(l)?((0,s.uX)(),(0,s.Wv)(IA,{key:1,tag:t.subtitleTag,"text-variant":t.subtitleTextVariant},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"subtitle",{},(()=>[(0,s.eW)((0,o.v_)(t.subtitle),1)]))])),_:3},8,["tag","text-variant"])):(0,s.Q3)("",!0),(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},8,["class"]))}}),LA=(0,s.pM)({__name:"BCardFooter",props:{text:null,bgVariant:null,borderVariant:null,html:null,tag:{default:"div"},textVariant:null},setup(t){const e=t;return(n,i)=>((0,s.uX)(),(0,s.Wv)(SA,(0,s.v6)({class:"card-footer"},e),{default:(0,s.k6)((()=>[(0,s.RG)(n.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},16))}}),RA=(0,s.pM)({__name:"BCard",props:{align:null,bgVariant:null,bodyBgVariant:null,bodyClass:null,bodyTag:{default:"div"},bodyTextVariant:null,borderVariant:null,footer:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerHtml:{default:""},footerTag:{default:"div"},footerTextVariant:null,header:null,headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerHtml:{default:""},headerTag:{default:"div"},headerTextVariant:null,imgAlt:null,imgBottom:{default:!1},imgEnd:{default:!1},imgHeight:null,imgLeft:{default:!1},imgRight:{default:!1},imgSrc:null,imgStart:{default:!1},imgTop:{default:!1},imgWidth:null,noBody:{default:!1},overlay:{default:!1},subtitle:null,subtitleTag:{default:"h6"},subtitleTextVariant:{default:"muted"},tag:{default:"div"},textVariant:null,title:null,titleTag:{default:"h4"},bodyText:{default:""}},setup(t){const e=t,n=(0,s.Ht)(),i=$u((0,r.lW)(e,"imgBottom")),a=$u((0,r.lW)(e,"imgEnd")),l=$u((0,r.lW)(e,"imgLeft")),c=$u((0,r.lW)(e,"imgRight")),u=$u((0,r.lW)(e,"imgStart")),h=$u((0,r.lW)(e,"noBody")),A=(0,s.EW)((()=>!wu(n.header))),d=(0,s.EW)((()=>!wu(n.footer))),f=(0,s.EW)((()=>({[`text-${e.align}`]:void 0!==e.align,[`text-${e.textVariant}`]:void 0!==e.textVariant,[`bg-${e.bgVariant}`]:void 0!==e.bgVariant,[`border-${e.borderVariant}`]:void 0!==e.borderVariant,"flex-row":l.value||u.value,"flex-row-reverse":a.value||c.value}))),p=(0,s.EW)((()=>({bgVariant:e.headerBgVariant,borderVariant:e.headerBorderVariant,html:e.headerHtml,tag:e.headerTag,textVariant:e.headerTextVariant}))),g=(0,s.EW)((()=>({overlay:e.overlay,bodyBgVariant:e.bodyBgVariant,bodyTag:e.bodyTag,bodyTextVariant:e.bodyTextVariant,subtitle:e.subtitle,subtitleTag:e.subtitleTag,subtitleTextVariant:e.subtitleTextVariant,title:e.title,titleTag:e.titleTag}))),m=(0,s.EW)((()=>({bgVariant:e.footerBgVariant,borderVariant:e.footerBorderVariant,html:e.footerHtml,tag:e.footerTag,textVariant:e.footerTextVariant}))),v=(0,s.EW)((()=>({src:e.imgSrc,alt:e.imgAlt,height:e.imgHeight,width:e.imgWidth,bottom:e.imgBottom,end:e.imgEnd,left:e.imgLeft,right:e.imgRight,start:e.imgStart,top:e.imgTop})));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)(["card",(0,r.R1)(f)])},{default:(0,s.k6)((()=>[(0,r.R1)(i)?(0,s.Q3)("",!0):(0,s.RG)(e.$slots,"img",{key:0},(()=>[t.imgSrc?((0,s.uX)(),(0,s.Wv)(EA,(0,o._B)((0,s.v6)({key:0},(0,r.R1)(v))),null,16)):(0,s.Q3)("",!0)])),t.header||(0,r.R1)(A)||t.headerHtml?((0,s.uX)(),(0,s.Wv)(BA,(0,s.v6)({key:1},(0,r.R1)(p),{class:t.headerClass}),{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"header",{},(()=>[(0,s.eW)((0,o.v_)(t.header),1)]))])),_:3},16,["class"])):(0,s.Q3)("",!0),(0,r.R1)(h)?(0,s.RG)(e.$slots,"default",{key:3},(()=>[(0,s.eW)((0,o.v_)(t.bodyText),1)])):((0,s.uX)(),(0,s.Wv)(FA,(0,s.v6)({key:2},(0,r.R1)(g),{class:t.bodyClass}),{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.bodyText),1)]))])),_:3},16,["class"])),t.footer||(0,r.R1)(d)||t.footerHtml?((0,s.uX)(),(0,s.Wv)(LA,(0,s.v6)({key:4},(0,r.R1)(m),{class:t.footerClass}),{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"footer",{},(()=>[(0,s.eW)((0,o.v_)(t.footer),1)]))])),_:3},16,["class"])):(0,s.Q3)("",!0),(0,r.R1)(i)?(0,s.RG)(e.$slots,"img",{key:5},(()=>[t.imgSrc?((0,s.uX)(),(0,s.Wv)(EA,(0,o._B)((0,s.v6)({key:0},(0,r.R1)(v))),null,16)):(0,s.Q3)("",!0)])):(0,s.Q3)("",!0)])),_:3},8,["class"]))}}),MA=(0,s.pM)({__name:"BCardGroup",props:{columns:{default:!1},deck:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=$u((0,r.lW)(e,"columns")),i=$u((0,r.lW)(e,"deck")),a=(0,s.EW)((()=>i.value?"card-deck":n.value?"card-columns":"card-group")),l=(0,s.EW)((()=>[a.value]));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)((0,r.R1)(l))},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default")])),_:3},8,["class"]))}}),PA=(0,s.pM)({__name:"BCardText",props:{text:null,tag:{default:"p"}},setup(t){return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:"card-text"},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3}))}}),NA=["id"],OA={key:0,class:"carousel-indicators"},kA=["data-bs-target","data-bs-slide-to","aria-label"],DA={class:"carousel-inner"},UA=["data-bs-target"],QA=(0,s.Lk)("span",{class:"carousel-control-prev-icon","aria-hidden":"true"},null,-1),GA={class:"visually-hidden"},HA=["data-bs-target"],VA=(0,s.Lk)("span",{class:"carousel-control-next-icon","aria-hidden":"true"},null,-1),jA={class:"visually-hidden"},WA=Symbol(),zA=(0,s.pM)({__name:"BCarousel",props:{startingSlide:{default:0},id:null,imgHeight:null,imgWidth:null,background:null,modelValue:{default:0},controls:{default:!1},indicators:{default:!1},interval:{default:5e3},noTouch:{default:!1},noWrap:{default:!1},controlsPrevText:{default:"Previous"},controlsNextText:{default:"Next"},indicatorsButtonLabel:{default:"Slide"}},emits:["sliding-start","sliding-end"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),a=ch((0,r.lW)(n,"id"),"carousel"),l=$u((0,r.lW)(n,"controls")),c=$u((0,r.lW)(n,"indicators")),u=$u((0,r.lW)(n,"noTouch"));$u((0,r.lW)(n,"noWrap"));const h=(0,r.KR)(),A=(0,r.KR)(),d=(0,r.KR)([]);return th(h,"slide.bs.carousel",(t=>e("sliding-start",t))),th(h,"slid.bs.carousel",(t=>e("sliding-end",t))),(0,s.sV)((()=>{A.value=new Ii(h.value,{wrap:!u.value,interval:n.interval,touch:!u.value}),i.default&&(d.value=i.default().filter((t=>{var e;return"BCarouselSlide"===(null==(e=t.type)?void 0:e.__name)})))})),(0,s.Gt)(WA,{background:n.background,width:n.imgWidth,height:n.imgHeight}),(e,n)=>((0,s.uX)(),(0,s.CE)("div",{id:(0,r.R1)(a),ref_key:"element",ref:h,class:"carousel slide","data-bs-ride":"carousel"},[(0,r.R1)(c)?((0,s.uX)(),(0,s.CE)("div",OA,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(d.value,((e,n)=>((0,s.uX)(),(0,s.CE)("button",{key:n,type:"button","data-bs-target":`#${(0,r.R1)(a)}`,"data-bs-slide-to":n,class:(0,o.C4)(n===t.startingSlide?"active":""),"aria-current":"true","aria-label":`${t.indicatorsButtonLabel} ${n}`},null,10,kA)))),128))])):(0,s.Q3)("",!0),(0,s.Lk)("div",DA,[(0,s.RG)(e.$slots,"default")]),(0,r.R1)(l)?((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.Lk)("button",{class:"carousel-control-prev",type:"button","data-bs-target":`#${(0,r.R1)(a)}`,"data-bs-slide":"prev"},[QA,(0,s.Lk)("span",GA,(0,o.v_)(t.controlsPrevText),1)],8,UA),(0,s.Lk)("button",{class:"carousel-control-next",type:"button","data-bs-target":`#${(0,r.R1)(a)}`,"data-bs-slide":"next"},[VA,(0,s.Lk)("span",jA,(0,o.v_)(t.controlsNextText),1)],8,HA)],64)):(0,s.Q3)("",!0)],8,NA))}}),KA=["data-bs-interval"],qA=["innerHTML"],$A={key:1},XA=["innerHTML"],YA={key:1},ZA=(0,s.pM)({__name:"BCarouselSlide",props:{imgSrc:null,imgHeight:null,imgWidth:null,interval:null,active:{default:!1},background:null,caption:null,captionHtml:null,captionTag:{default:"h3"},contentTag:{default:"div"},contentVisibleUp:null,id:null,imgAlt:null,imgBlank:{default:!1},imgBlankColor:{default:"transparent"},text:null,textHtml:null,textTag:{default:"p"}},setup(t){const e=t,n=(0,s.Ht)(),i=(0,s.WQ)(WA,{}),a=$u((0,r.lW)(e,"active")),l=(0,s.EW)((()=>!wu(n.default))),c=(0,s.EW)((()=>({background:`${e.background||i.background||"rgb(171, 171, 171)"} none repeat scroll 0% 0%`}))),u=(0,s.EW)((()=>({"d-none":void 0!==e.contentVisibleUp,[`d-${e.contentVisibleUp}-block`]:void 0!==e.contentVisibleUp}))),h=(0,s.EW)((()=>i.width)),A=(0,s.EW)((()=>i.height));return(e,n)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)(["carousel-item",{active:(0,r.R1)(a)}]),"data-bs-interval":t.interval,style:(0,o.Tr)((0,r.R1)(c))},[(0,s.RG)(e.$slots,"img",{},(()=>[(0,s.bF)(xA,{class:"d-block w-100",alt:t.imgAlt,src:t.imgSrc,width:t.imgWidth||(0,r.R1)(h),height:t.imgHeight||(0,r.R1)(A),blank:t.imgBlank,"blank-color":t.imgBlankColor},null,8,["alt","src","width","height","blank","blank-color"])])),t.caption||t.captionHtml||t.text||t.textHtml||(0,r.R1)(l)?((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.contentTag),{key:0,class:(0,o.C4)(["carousel-caption",(0,r.R1)(u)])},{default:(0,s.k6)((()=>[t.caption||t.captionHtml?((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.captionTag),{key:0},{default:(0,s.k6)((()=>[t.captionHtml?((0,s.uX)(),(0,s.CE)("span",{key:0,innerHTML:t.captionHtml},null,8,qA)):((0,s.uX)(),(0,s.CE)("span",$A,(0,o.v_)(t.caption),1))])),_:1})):(0,s.Q3)("",!0),t.text||t.textHtml?((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.textTag),{key:1},{default:(0,s.k6)((()=>[t.textHtml?((0,s.uX)(),(0,s.CE)("span",{key:0,innerHTML:t.textHtml},null,8,XA)):((0,s.uX)(),(0,s.CE)("span",YA,(0,o.v_)(t.text),1))])),_:1})):(0,s.Q3)("",!0),(0,s.RG)(e.$slots,"default")])),_:3},8,["class"])):(0,s.Q3)("",!0)],14,KA))}}),JA=Ru("",[],{type:[Boolean,String,Number],default:!1}),td=Ru("offset",[""],{type:[String,Number],default:null}),ed=Ru("order",[""],{type:[String,Number],default:null}),nd=(0,s.pM)({name:"BCol",props:{col:{type:[Boolean,String],default:!1},cols:{type:[String,Number],default:null},...JA,offset:{type:[String,Number],default:null},...td,order:{type:[String,Number],default:null},...ed,alignSelf:{type:String,default:null},tag:{type:String,default:"div"}},setup(t){const e=[{content:JA,propPrefix:"cols",classPrefix:"col"},{content:td,propPrefix:"offset"},{content:ed,propPrefix:"order"}],n=$u((0,r.lW)(t,"col")),i=(0,s.EW)((()=>e.flatMap((e=>Mu(t,e.content,e.propPrefix,e.classPrefix)))));return{computedClasses:(0,s.EW)((()=>[i.value,{col:n.value||!i.value.some((t=>/^col-/.test(t)))&&!t.cols,[`col-${t.cols}`]:!!t.cols,[`offset-${t.offset}`]:!!t.offset,[`order-${t.order}`]:!!t.order,[`align-self-${t.alignSelf}`]:!!t.alignSelf}]))}}});function id(t,e,n,i,r,a){return(0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)(t.computedClasses)},{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},8,["class"])}const rd=qh(nd,[["render",id]]),sd={autoHide:!0,delay:5e3,noCloseButton:!1,pos:"top-right",value:!0};class od{constructor(t){cl(this,"vm"),cl(this,"containerPositions"),(0,r.g8)(t)?this.vm=t:this.vm=(0,r.Kh)(t),this.containerPositions=(0,s.EW)((()=>{const t=new Set([]);return this.vm.toasts.map((e=>{e.options.pos&&t.add(e.options.pos)})),t}))}toasts(t){return t?(0,s.EW)((()=>this.vm.toasts.filter((e=>{if(e.options.pos===t&&e.options.value)return e})))):(0,s.EW)((()=>this.vm.toasts))}remove(...t){this.vm.toasts=this.vm.toasts.filter((e=>{if(e.options.id&&!t.includes(e.options.id))return e}))}isRoot(){var t;return null!=(t=this.vm.root)&&t}show(t,e=sd){const n={id:Pu(),...sd,...e},i={options:(0,r.Kh)(n),content:t};return this.vm.toasts.push(i),i}info(t,e=sd){return this.show(t,{variant:"info",...e})}danger(t,e=sd){return this.show(t,{variant:"danger",...e})}warning(t,e=sd){return this.show(t,{variant:"warning",...e})}success(t,e=sd){return this.show(t,{variant:"success",...e})}hide(){}}class ad{constructor(){cl(this,"vms"),cl(this,"rootInstance"),cl(this,"useToast",Ad),this.vms={}}getOrCreateViewModel(t){if(!t){if(this.rootInstance)return this.vms[this.rootInstance];const t={root:!0,toasts:[],container:void 0,id:Symbol("toast")};return this.rootInstance=t.id,this.vms[t.id]=t,t}if(t.root){if(this.rootInstance)return this.vms[this.rootInstance];this.rootInstance=t.id}return this.vms[t.id]=t,t}getVM(t){return!t&&this.rootInstance?this.vms[this.rootInstance]:t?this.vms[t]:void 0}}const ld=Symbol(),cd=Symbol(),ud={container:void 0,toasts:[],root:!1};function hd(){return(0,s.WQ)(cd)}function Ad(t,e=ld){const n=(0,s.WQ)(hd());if(!t)return new od(n.getOrCreateViewModel());const i={id:Symbol("toastInstance")},r={...ud,...i,...t},o=n.getOrCreateViewModel(r);return new od(o)}const dd={install:(t,e={})=>{var n,i,r,s;t.provide(cd,null!=(i=null==(n=null==e?void 0:e.BToast)?void 0:n.injectkey)?i:ld),t.provide(null!=(s=null==(r=null==e?void 0:e.BToast)?void 0:r.injectkey)?s:ld,new ad)}},fd="toast-title",pd=1e3,gd=(0,s.pM)({components:{BLink:Xh},props:{...zh,delay:{type:Number,default:5e3},bodyClass:{type:String},body:{type:[Object,String]},headerClass:{type:String},headerTag:{type:String,default:"div"},animation:{type:[Boolean,String],default:!0},id:{type:String},isStatus:{type:[Boolean,String],default:!1},autoHide:{type:[Boolean,String],default:!0},noCloseButton:{type:[Boolean,String],default:!1},noFade:{type:[Boolean,String],default:!1},noHoverPause:{type:[Boolean,String],default:!1},solid:{type:[Boolean,String],default:!1},static:{type:[Boolean,String],default:!1},title:{type:String},modelValue:{type:[Boolean,String],default:!1},toastClass:{type:Array},variant:{type:String}},emits:["destroyed","update:modelValue"],setup(t,{emit:e,slots:n}){$u((0,r.lW)(t,"animation"));const i=$u((0,r.lW)(t,"isStatus")),o=$u((0,r.lW)(t,"autoHide")),a=$u((0,r.lW)(t,"noCloseButton")),l=$u((0,r.lW)(t,"noFade")),c=$u((0,r.lW)(t,"noHoverPause"));$u((0,r.lW)(t,"solid")),$u((0,r.lW)(t,"static"));const u=$u((0,r.lW)(t,"modelValue")),h=(0,r.KR)(!1),A=(0,r.KR)(!1),d=(0,r.KR)(!1),f=(0,s.EW)((()=>({[`b-toast-${t.variant}`]:void 0!==t.variant,show:d.value||h.value})));let p,g,m;const v=()=>{typeof p>"u"||(clearTimeout(p),p=void 0)},y=(0,s.EW)((()=>Math.max(Uu(t.delay,0),pd))),w=()=>{u.value&&(g=m=0,v(),A.value=!0,Tu((()=>{d.value=!1})))},_=()=>{v(),e("update:modelValue",!0),g=m=0,A.value=!1,(0,s.dY)((()=>{Tu((()=>{d.value=!0}))}))},b=()=>{if(!o.value||c.value||!p||m)return;const t=Date.now()-g;t>0&&(v(),m=Math.max(y.value-t,pd))},x=()=>{(!o.value||c.value||!m)&&(m=g=0),E()};(0,s.wB)((()=>u.value),(t=>{t?_():w()}));const E=()=>{v(),o.value&&(p=setTimeout(w,m||y.value),g=Date.now(),m=0)},C=()=>{h.value=!0,e("update:modelValue",!0)},S=()=>{h.value=!1,E()},B=()=>{h.value=!0},T=()=>{h.value=!1,m=g=0,e("update:modelValue",!1)};(0,s.hi)((()=>{v(),o.value&&e("destroyed",t.id)})),(0,s.sV)((()=>{(0,s.dY)((()=>{u.value&&Tu((()=>{_()}))}))}));const I=()=>{(0,s.dY)((()=>{Tu((()=>{w()}))}))};return()=>{const e=()=>{const e=[],i=Du(fd,{hide:w},n);i?e.push((0,s.h)(i)):t.title&&e.push((0,s.h)("strong",{class:"me-auto"},t.title)),!a.value&&0!==e.length&&e.push((0,s.h)(Vh,{class:["btn-close"],onClick:()=>{w()}}));const r=[];if(e.length>0&&r.push((0,s.h)(t.headerTag,{class:"toast-header"},{default:()=>e})),Du("default",{hide:w},n)||t.body){const e=(0,s.h)(qu(t)?"b-link":"div",{class:["toast-body",t.bodyClass],onClick:qu(t)?{click:I}:{}},Du("default",{hide:w},n)||t.body);r.push(e)}return(0,s.h)("div",{class:["toast",t.toastClass,f.value],tabindex:"0"},r)};return(0,s.h)("div",{class:["b-toast"],id:t.id,role:A.value?null:i.value?"status":"alert","aria-live":A.value?null:i.value?"polite":"assertive","aria-atomic":A.value?null:"true",onmouseenter:b,onmouseleave:x},[(0,s.h)(Gh,{noFade:l.value,onAfterEnter:S,onBeforeEnter:C,onAfterLeave:T,onBeforeLeave:B},(()=>[d.value?e():""]))])}}}),md=(0,s.pM)({__name:"BToaster",props:{position:{default:"top-right"},instance:null},setup(t){const e=t,n={"top-left":"top-0 start-0","top-center":"top-0 start-50 translate-middle-x","top-right":"top-0 end-0","middle-left":"top-50 start-0 translate-middle-y","middle-center":"top-50 start-50 translate-middle","middle-right":"top-50 end-0 translate-middle-y","bottom-left":"bottom-0 start-0","bottom-center":"bottom-0 start-50 translate-middle-x","bottom-right":"bottom-0 end-0"},i=(0,s.EW)((()=>n[e.position])),a=t=>{var n;null==(n=e.instance)||n.remove(t)};return(e,n)=>{var l;return(0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)([[(0,r.R1)(i)],"b-toaster position-fixed p-3"]),style:{"z-index":"11"}},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(null==(l=t.instance)?void 0:l.toasts(t.position).value,(t=>((0,s.uX)(),(0,s.Wv)(gd,{id:t.options.id,key:t.options.id,modelValue:t.options.value,"onUpdate:modelValue":e=>t.options.value=e,"auto-hide":t.options.autoHide,delay:t.options.delay,"no-close-button":t.options.noCloseButton,title:t.content.title,body:t.content.body,component:t.content.body,variant:t.options.variant,onDestroyed:a},null,8,["id","modelValue","onUpdate:modelValue","auto-hide","delay","no-close-button","title","body","component","variant"])))),128))],2)}}}),vd=(0,s.pM)({props:{gutterX:{type:String,default:null},gutterY:{type:String,default:null},fluid:{type:[Boolean,String],default:!1},toast:{type:Object},position:{type:String,required:!1}},setup(t,{slots:e,expose:n}){const i=(0,r.KR)();let o;const a=(0,s.EW)((()=>({container:!t.fluid,["container-fluid"]:"boolean"==typeof t.fluid&&t.fluid,[`container-${t.fluid}`]:"string"==typeof t.fluid,[`gx-${t.gutterX}`]:null!==t.gutterX,[`gy-${t.gutterY}`]:null!==t.gutterY})));return(0,s.sV)((()=>{t.toast})),t.toast&&(o=Ad({container:i,root:t.toast.root}),n({})),()=>{var n;const r=[];return null==o||o.containerPositions.value.forEach((t=>{r.push((0,s.h)(md,{key:t,instance:o,position:t}))})),(0,s.h)("div",{class:[a.value,t.position],ref:i},[...r,null==(n=e.default)?void 0:n.call(e)])}},methods:{}}),yd={class:"visually-hidden"},wd=["aria-labelledby","role"],_d=(0,s.pM)({__name:"BDropdown",props:{id:null,menuClass:null,size:null,splitClass:null,splitVariant:null,text:null,toggleClass:null,autoClose:{type:[Boolean,String],default:!0},block:{default:!1},boundary:{default:"clippingParents"},dark:{default:!1},disabled:{default:!1},isNav:{default:!1},dropup:{default:!1},dropright:{default:!1},dropleft:{default:!1},noFlip:{default:!1},offset:{default:0},popperOpts:{default:()=>({})},right:{default:!1},role:{default:"menu"},split:{default:!1},splitButtonType:{default:"button"},splitHref:{default:void 0},noCaret:{default:!1},toggleText:{default:"Toggle dropdown"},variant:{default:"secondary"}},emits:["show","shown","hide","hidden","click","toggle"],setup(t,{expose:e,emit:n}){const i=t,a=ch((0,r.lW)(i,"id"),"dropdown"),l=$u((0,r.lW)(i,"block")),c=$u((0,r.lW)(i,"dark")),u=$u((0,r.lW)(i,"dropup")),h=$u((0,r.lW)(i,"dropright")),A=$u((0,r.lW)(i,"isNav")),d=$u((0,r.lW)(i,"dropleft")),f=$u((0,r.lW)(i,"right")),p=$u((0,r.lW)(i,"split")),g=$u((0,r.lW)(i,"noCaret")),m=(0,r.KR)(),v=(0,r.KR)(),y=(0,r.KR)(),w=(0,s.EW)((()=>({"d-grid":l.value,"d-flex":l.value&&p.value}))),_=(0,s.EW)((()=>[p.value?i.splitClass:i.toggleClass,{"nav-link":A.value,"dropdown-toggle":!p.value,"dropdown-toggle-no-caret":g.value&&!p.value,"w-100":p.value&&l.value}])),b=(0,s.EW)((()=>[i.menuClass,{"dropdown-menu-dark":c.value,"dropdown-menu-end":f.value}])),x=(0,s.EW)((()=>({"data-bs-toggle":p.value?void 0:"dropdown","aria-expanded":!!p.value&&void 0,ref:p.value?void 0:v,href:p.value?i.splitHref:void 0}))),E=(0,s.EW)((()=>({ref:p.value?v:void 0}))),C=()=>{var t;null==(t=y.value)||t.hide()},S=t=>{p.value&&n("click",t)};return th(m,"show.bs.dropdown",(()=>n("show"))),th(m,"shown.bs.dropdown",(()=>n("shown"))),th(m,"hide.bs.dropdown",(()=>n("hide"))),th(m,"hidden.bs.dropdown",(()=>n("hidden"))),(0,s.sV)((()=>{var t;y.value=new Or(null==(t=v.value)?void 0:t.$el,{autoClose:i.autoClose,boundary:i.boundary,offset:i.offset?i.offset.toString():"",reference:i.offset||p.value?"parent":"toggle",popperConfig:t=>{const e={placement:"bottom-start",modifiers:i.noFlip?[{name:"flip",options:{fallbackPlacements:[]}}]:[]};return u.value?e.placement=f.value?"top-end":"top-start":h.value?e.placement="right-start":d.value?e.placement="left-start":f.value&&(e.placement="bottom-end"),ku(t,ku(e,i.popperOpts))}})})),e({hide:C}),(e,i)=>((0,s.uX)(),(0,s.CE)("div",{ref_key:"parent",ref:m,class:(0,o.C4)([(0,r.R1)(w),"btn-group"])},[(0,s.bF)(Jh,(0,s.v6)({id:(0,r.R1)(a),variant:t.splitVariant||t.variant,size:t.size,class:(0,r.R1)(_),disabled:t.disabled,type:t.splitButtonType},(0,r.R1)(x),{onClick:S}),{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"button-content",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},16,["id","variant","size","class","disabled","type"]),(0,r.R1)(p)?((0,s.uX)(),(0,s.Wv)(Jh,(0,s.v6)({key:0,variant:t.variant,size:t.size,disabled:t.disabled},(0,r.R1)(E),{class:[t.toggleClass,"dropdown-toggle-split dropdown-toggle"],"data-bs-toggle":"dropdown","aria-expanded":"false",onClick:i[0]||(i[0]=t=>n("toggle"))}),{default:(0,s.k6)((()=>[(0,s.Lk)("span",yd,[(0,s.RG)(e.$slots,"toggle-text",{},(()=>[(0,s.eW)((0,o.v_)(t.toggleText),1)]))])])),_:3},16,["variant","size","disabled","class"])):(0,s.Q3)("",!0),(0,s.Lk)("ul",{class:(0,o.C4)(["dropdown-menu",(0,r.R1)(b)]),"aria-labelledby":(0,r.R1)(a),role:t.role},[(0,s.RG)(e.$slots,"default")],10,wd)],2))}}),bd={role:"presentation"},xd=(0,s.pM)({__name:"BDropdownDivider",props:{tag:{default:"hr"}},setup(t){return(e,n)=>((0,s.uX)(),(0,s.CE)("li",bd,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:"dropdown-divider",role:"separator","aria-orientation":"horizontal"}))]))}}),Ed={},Cd={role:"presentation"},Sd={class:"px-4 py-3"};function Bd(t,e){return(0,s.uX)(),(0,s.CE)("li",Cd,[(0,s.Lk)("form",Sd,[(0,s.RG)(t.$slots,"default")])])}const Td=qh(Ed,[["render",Bd]]),Id={role:"presentation"},Fd=["id","aria-describedby"],Ld={inheritAttrs:!1},Rd=(0,s.pM)({...Ld,__name:"BDropdownGroup",props:{id:null,ariaDescribedby:null,header:null,headerClass:null,headerTag:{default:"header"},headerVariant:null},setup(t){const e=t,n=(0,s.EW)((()=>e.id?`${e.id}_group_dd_header`:void 0)),i=(0,s.EW)((()=>"header"===e.headerTag?void 0:"heading")),a=(0,s.EW)((()=>[e.headerClass,{[`text-${e.headerVariant}`]:void 0!==e.headerVariant}]));return(e,l)=>((0,s.uX)(),(0,s.CE)("li",Id,[((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.headerTag),{id:(0,r.R1)(n),class:(0,o.C4)(["dropdown-header",(0,r.R1)(a)]),role:(0,r.R1)(i)},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"header",{},(()=>[(0,s.eW)((0,o.v_)(t.header),1)]))])),_:3},8,["id","class","role"])),(0,s.Lk)("ul",(0,s.v6)({id:t.id,role:"group",class:"list-unstyled"},e.$attrs,{"aria-describedby":t.ariaDescribedby||(0,r.R1)(n)}),[(0,s.RG)(e.$slots,"default")],16,Fd)]))}}),Md={},Pd={class:"dropdown-header"};function Nd(t,e){return(0,s.uX)(),(0,s.CE)("li",null,[(0,s.Lk)("h6",Pd,[(0,s.RG)(t.$slots,"default")])])}const Od=qh(Md,[["render",Nd]]),kd={inheritAttrs:!1},Dd=(0,s.pM)({...kd,__name:"BDropdownItem",props:{href:null,linkClass:null,active:{default:!1},disabled:{default:!1},rel:{default:void 0},target:{default:"_self"},variant:null},emits:["click"],setup(t,{emit:e}){const n=t,i=$u((0,r.lW)(n,"active")),a=$u((0,r.lW)(n,"disabled")),l=(0,s.OA)(),c=(0,s.EW)((()=>[n.linkClass,{active:i.value,disabled:a.value,[`text-${n.variant}`]:void 0!==n.variant}])),u=(0,s.EW)((()=>n.href?"a":l.to?Xh:"button")),h=(0,s.EW)((()=>({disabled:a.value,"aria-current":i.value?"true":null,href:"a"===u.value?n.href:null,rel:n.rel,type:"button"===u.value?"button":null,target:n.target,...l.to?{activeClass:"active",...l}:{}}))),A=t=>e("click",t);return(t,e)=>((0,s.uX)(),(0,s.CE)("li",{role:"presentation",class:(0,o.C4)(t.$attrs.class)},[((0,s.uX)(),(0,s.Wv)((0,s.$y)((0,r.R1)(u)),(0,s.v6)({class:["dropdown-item",(0,r.R1)(c)]},(0,r.R1)(h),{onClick:A}),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},16,["class"]))],2))}}),Ud=["disabled"],Qd={inheritAttrs:!1},Gd=(0,s.pM)({...Qd,__name:"BDropdownItemButton",props:{buttonClass:null,active:{default:!1},activeClass:{default:"active"},disabled:{default:!1},variant:null},emits:["click"],setup(t,{emit:e}){const n=t,i=$u((0,r.lW)(n,"active")),a=$u((0,r.lW)(n,"disabled")),l=(0,s.EW)((()=>[n.buttonClass,{[n.activeClass]:i.value,disabled:a.value,[`text-${n.variant}`]:void 0!==n.variant}])),c=t=>e("click",t);return(t,e)=>((0,s.uX)(),(0,s.CE)("li",{role:"presentation",class:(0,o.C4)(t.$attrs.class)},[(0,s.Lk)("button",{role:"menu",type:"button",class:(0,o.C4)(["dropdown-item",(0,r.R1)(l)]),disabled:(0,r.R1)(a),onClick:c},[(0,s.RG)(t.$slots,"default")],10,Ud)],2))}}),Hd={role:"presentation"},Vd={class:"px-4 py-1 mb-0 text-muted"},jd=(0,s.pM)({__name:"BDropdownText",props:{text:{default:""}},setup(t){return(e,n)=>((0,s.uX)(),(0,s.CE)("li",Hd,[(0,s.Lk)("p",Vd,[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])]))}}),Wd=["id","novalidate","onSubmit"],zd=(0,s.pM)({__name:"BForm",props:{id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,i=$u((0,r.lW)(n,"floating")),l=$u((0,r.lW)(n,"novalidate")),c=$u((0,r.lW)(n,"validated")),u=(0,s.EW)((()=>({"form-floating":i.value,"was-validated":c.value}))),h=t=>e("submit",t);return(e,n)=>((0,s.uX)(),(0,s.CE)("form",{id:t.id,novalidate:(0,r.R1)(l),class:(0,o.C4)((0,r.R1)(u)),onSubmit:(0,a.D$)(h,["prevent"])},[(0,s.RG)(e.$slots,"default")],42,Wd))}}),Kd={class:"form-floating"},qd=["for"],$d=(0,s.pM)({__name:"BFormFloatingLabel",props:{labelFor:null,label:null,text:null},setup(t){return(e,n)=>((0,s.uX)(),(0,s.CE)("div",Kd,[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)])),(0,s.Lk)("label",{for:t.labelFor},[(0,s.RG)(e.$slots,"label",{},(()=>[(0,s.eW)((0,o.v_)(t.label),1)]))],8,qd)]))}}),Xd=(0,s.pM)({__name:"BFormInvalidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,text:null,role:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(t){const e=t,n=$u((0,r.lW)(e,"forceShow")),i=$u((0,r.lW)(e,"state")),a=$u((0,r.lW)(e,"tooltip")),l=(0,s.EW)((()=>!0===n.value||!1===i.value)),c=(0,s.EW)((()=>({"d-block":l.value,"invalid-feedback":!a.value,"invalid-tooltip":a.value}))),u=(0,s.EW)((()=>({id:e.id,role:e.role,"aria-live":e.ariaLive,"aria-atomic":e.ariaLive?"true":void 0})));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),(0,s.v6)({class:(0,r.R1)(c)},(0,r.R1)(u)),{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},16,["class"]))}}),Yd=(0,s.pM)({__name:"BFormRow",props:{tag:{default:"div"}},setup(t){return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:"row d-flex flex-wrap"},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default")])),_:3}))}}),Zd=(0,s.pM)({__name:"BFormText",props:{id:null,inline:{default:!1},tag:{default:"small"},text:null,textVariant:{default:"muted"}},setup(t){const e=t,n=$u((0,r.lW)(e,"inline")),i=(0,s.EW)((()=>[[`text-${e.textVariant}`],{"form-text":!n.value}]));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{id:t.id,class:(0,o.C4)((0,r.R1)(i))},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},8,["id","class"]))}}),Jd=(0,s.pM)({__name:"BFormValidFeedback",props:{ariaLive:null,forceShow:{default:!1},id:null,role:null,text:null,state:{default:void 0},tag:{default:"div"},tooltip:{default:!1}},setup(t){const e=t,n=$u((0,r.lW)(e,"forceShow")),i=$u((0,r.lW)(e,"state")),a=$u((0,r.lW)(e,"tooltip")),l=(0,s.EW)((()=>!0===n.value||!0===i.value)),c=(0,s.EW)((()=>({"d-block":l.value,"valid-feedback":!a.value,"valid-tooltip":a.value}))),u=(0,s.EW)((()=>e.ariaLive?"true":void 0));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{id:t.id,role:t.role,"aria-live":t.ariaLive,"aria-atomic":(0,r.R1)(u),class:(0,o.C4)((0,r.R1)(c))},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3},8,["id","role","aria-live","aria-atomic","class"]))}}),tf=["id","disabled","required","name","form","aria-label","aria-labelledby","aria-required","value","indeterminate"],ef=["for"],nf={inheritAttrs:!1},rf=(0,s.pM)({...nf,__name:"BFormCheckbox",props:{ariaLabel:null,ariaLabelledBy:null,form:null,indeterminate:null,name:null,id:{default:void 0},autofocus:{default:!1},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:void 0},size:{default:"md"},state:{default:void 0},uncheckedValue:{type:[Array,Set,Boolean,String,Object,Number],default:!1},value:{type:[Array,Set,Boolean,String,Object,Number],default:!0},modelValue:{type:[Array,Set,Boolean,String,Object,Number],default:void 0}},emits:["update:modelValue","input","change"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),l=ch((0,r.lW)(n,"id"),"form-check"),c=$u((0,r.lW)(n,"indeterminate")),u=$u((0,r.lW)(n,"autofocus")),h=$u((0,r.lW)(n,"plain")),A=$u((0,r.lW)(n,"button")),d=$u((0,r.lW)(n,"switch")),f=$u((0,r.lW)(n,"disabled")),p=$u((0,r.lW)(n,"inline")),g=$u((0,r.lW)(n,"required")),m=$u((0,r.lW)(n,"state")),v=(0,r.KR)(null),y=(0,r.KR)(!1),w=(0,s.EW)((()=>!wu(i.default))),_=(0,s.EW)({get:()=>n.uncheckedValue?Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:n.modelValue===n.value:n.modelValue,set:t=>{let i=t;Array.isArray(n.modelValue)?n.uncheckedValue&&(i=n.modelValue,t?(i.indexOf(n.uncheckedValue)>-1&&i.splice(i.indexOf(n.uncheckedValue),1),i.push(n.value)):(i.indexOf(n.value)>-1&&i.splice(i.indexOf(n.value),1),i.push(n.uncheckedValue))):i=t?n.value:n.uncheckedValue,e("input",i),e("update:modelValue",i),e("change",i)}}),b=(0,s.EW)((()=>Array.isArray(n.modelValue)?n.modelValue.indexOf(n.value)>-1:JSON.stringify(n.modelValue)===JSON.stringify(n.value))),x=(0,r.Kh)({plain:(0,r.lW)(h,"value"),button:(0,r.lW)(A,"value"),inline:(0,r.lW)(p,"value"),switch:(0,r.lW)(d,"value"),size:(0,r.lW)(n,"size"),state:(0,r.lW)(m,"value"),buttonVariant:(0,r.lW)(n,"buttonVariant")}),E=eh(x),C=nh(x),S=ih(x);return(0,s.sV)((()=>{u.value&&v.value.focus()})),(e,n)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)((0,r.R1)(E))},[(0,s.bo)((0,s.Lk)("input",(0,s.v6)({id:(0,r.R1)(l)},e.$attrs,{ref_key:"input",ref:v,"onUpdate:modelValue":n[0]||(n[0]=t=>(0,r.i9)(_)?_.value=t:null),class:(0,r.R1)(C),type:"checkbox",disabled:(0,r.R1)(f),required:!!t.name&&!!(0,r.R1)(g),name:t.name,form:t.form,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledBy,"aria-required":t.name&&(0,r.R1)(g)?"true":void 0,value:t.value,indeterminate:(0,r.R1)(c),onFocus:n[1]||(n[1]=t=>y.value=!0),onBlur:n[2]||(n[2]=t=>y.value=!1)}),null,16,tf),[[a.lH,(0,r.R1)(_)]]),(0,r.R1)(w)||!(0,r.R1)(h)?((0,s.uX)(),(0,s.CE)("label",{key:0,for:(0,r.R1)(l),class:(0,o.C4)([(0,r.R1)(S),{active:(0,r.R1)(b),focus:y.value}])},[(0,s.RG)(e.$slots,"default")],10,ef)):(0,s.Q3)("",!0)],2))}}),sf=["id"],of=["innerHTML"],af=["textContent"],lf=(0,s.pM)({__name:"BFormCheckboxGroup",props:{id:null,form:null,modelValue:{default:()=>[]},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},name:null,options:{default:()=>[]},plain:{default:!1},required:{default:!1},size:null,stacked:{default:!1},state:{default:void 0},switches:{default:!1},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),a="BFormCheckbox",l=ch((0,r.lW)(n,"id"),"checkbox"),c=ch((0,r.lW)(n,"name"),"checkbox");$u((0,r.lW)(n,"autofocus"));const u=$u((0,r.lW)(n,"buttons")),h=$u((0,r.lW)(n,"disabled"));$u((0,r.lW)(n,"plain"));const A=$u((0,r.lW)(n,"required")),d=$u((0,r.lW)(n,"stacked")),f=$u((0,r.lW)(n,"state")),p=$u((0,r.lW)(n,"switches")),g=$u((0,r.lW)(n,"validated")),m=(0,s.EW)({get:()=>n.modelValue,set:t=>{if(JSON.stringify(t)===JSON.stringify(n.modelValue))return;const i=n.options.filter((e=>t.map((t=>JSON.stringify(t))).includes(JSON.stringify("string"==typeof e?e:e[n.valueField])))).map((t=>"string"==typeof t?t:t[n.valueField]));e("input",i),e("update:modelValue",i),e("change",i)}}),v=(0,s.EW)((()=>(i.first?oh(i.first(),a,h.value):[]).concat(n.options.map((t=>ah(t,n)))).concat(i.default?oh(i.default(),a,h.value):[]).map(((t,e)=>lh(t,e,n,c,l))).map((t=>({...t,props:{switch:p.value,...t.props}}))))),y=(0,r.Kh)({required:(0,r.lW)(A,"value"),ariaInvalid:(0,r.lW)(n,"ariaInvalid"),state:(0,r.lW)(f,"value"),validated:(0,r.lW)(g,"value"),buttons:(0,r.lW)(u,"value"),stacked:(0,r.lW)(d,"value"),size:(0,r.lW)(n,"size")}),w=rh(y),_=sh(y);return(t,e)=>((0,s.uX)(),(0,s.CE)("div",(0,s.v6)((0,r.R1)(w),{id:(0,r.R1)(l),role:"group",class:[(0,r.R1)(_),"bv-no-focus-ring"],tabindex:"-1"}),[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(v),((t,n)=>((0,s.uX)(),(0,s.Wv)(rf,(0,s.v6)({key:n,modelValue:(0,r.R1)(m),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,r.i9)(m)?m.value=t:null)},t.props),{default:(0,s.k6)((()=>[t.html?((0,s.uX)(),(0,s.CE)("span",{key:0,innerHTML:t.html},null,8,of)):((0,s.uX)(),(0,s.CE)("span",{key:1,textContent:(0,o.v_)(t.text)},null,8,af))])),_:2},1040,["modelValue"])))),128))],16,sf))}}),cf=["input","select","textarea"],uf=cf.map((t=>`${t}:not([disabled])`)).join(),hf=[...cf,"a","button","label"],Af="label",df="invalid-feedback",ff="valid-feedback",pf="description",gf="default",mf=(0,s.pM)({components:{BCol:rd,BFormInvalidFeedback:Xd,BFormRow:Yd,BFormText:Zd,BFormValidFeedback:Jd},props:{contentCols:{type:[Boolean,String,Number],required:!1},contentColsLg:{type:[Boolean,String,Number],required:!1},contentColsMd:{type:[Boolean,String,Number],required:!1},contentColsSm:{type:[Boolean,String,Number],required:!1},contentColsXl:{type:[Boolean,String,Number],required:!1},description:{type:[String],required:!1},disabled:{type:[Boolean,String],default:!1},feedbackAriaLive:{type:String,default:"assertive"},id:{type:String,required:!1},invalidFeedback:{type:String,required:!1},label:{type:String,required:!1},labelAlign:{type:[Boolean,String,Number],required:!1},labelAlignLg:{type:[Boolean,String,Number],required:!1},labelAlignMd:{type:[Boolean,String,Number],required:!1},labelAlignSm:{type:[Boolean,String,Number],required:!1},labelAlignXl:{type:[Boolean,String,Number],required:!1},labelClass:{type:[Array,Object,String],required:!1},labelCols:{type:[Boolean,String,Number],required:!1},labelColsLg:{type:[Boolean,String,Number],required:!1},labelColsMd:{type:[Boolean,String,Number],required:!1},labelColsSm:{type:[Boolean,String,Number],required:!1},labelColsXl:{type:[Boolean,String,Number],required:!1},labelFor:{type:String,required:!1},labelSize:{type:String,required:!1},labelSrOnly:{type:[Boolean,String],default:!1},state:{type:[Boolean,String],default:null},tooltip:{type:[Boolean,String],default:!1},validFeedback:{type:String,required:!1},validated:{type:[Boolean,String],default:!1},floating:{type:[Boolean,String],default:!1}},setup(t,{attrs:e}){const n=$u((0,r.lW)(t,"disabled")),i=$u((0,r.lW)(t,"labelSrOnly")),o=$u((0,r.lW)(t,"state")),a=$u((0,r.lW)(t,"tooltip")),l=$u((0,r.lW)(t,"validated")),c=$u((0,r.lW)(t,"floating")),u=null,h=["xs","sm","md","lg","xl"],A=(t,e)=>h.reduce(((n,i)=>{const r=Wu("xs"===i?"":i,`${e}Align`),s=t[r]||null;return s&&("xs"===i?n.push(`text-${s}`):n.push(`text-${i}-${s}`)),n}),[]),d=(t,e)=>h.reduce(((n,i)=>{const r=Wu("xs"===i?"":i,`${e}Cols`);let s=t[r];return s=""===s||(s||!1),"boolean"!=typeof s&&"auto"!==s&&(s=Qu(s,0),s=s>0&&s),s&&("xs"===i?n.cols=s:n[i||("boolean"==typeof s?"col":"cols")]=s),n}),{}),f=(0,r.KR)(),p=(e,n=null)=>{if(Jc&&t.labelFor){const i=_u(`#${$c(t.labelFor)}`,f);if(i){const t="aria-describedby",r=(e||"").split(Qc),s=(n||"").split(Qc),o=(xu(i,t)||"").split(Qc).filter((t=>!s.includes(t))).concat(r).filter(((t,e,n)=>n.indexOf(t)===e)).filter((t=>t)).join(" ").trim();o?Cu(i,t,o):Su(i,t)}}},g=(0,s.EW)((()=>d(t,"content"))),m=(0,s.EW)((()=>A(t,"label"))),v=(0,s.EW)((()=>d(t,"label"))),y=(0,s.EW)((()=>Object.keys(g.value).length>0||Object.keys(v.value).length>0)),w=(0,s.EW)((()=>"boolean"==typeof o.value?o.value:null)),_=(0,s.EW)((()=>{const t=w.value;return!0===t?"is-valid":!1===t?"is-invalid":null})),b=(0,s.EW)((()=>Nu(e.ariaInvalid,o.value)));return(0,s.wB)((()=>u),((t,e)=>{t!==e&&p(t,e)})),(0,s.sV)((()=>{(0,s.dY)((()=>{p(u)}))})),{disabledBoolean:n,labelSrOnlyBoolean:i,stateBoolean:o,tooltipBoolean:a,validatedBoolean:l,floatingBoolean:c,ariaDescribedby:u,computedAriaInvalid:b,contentColProps:g,isHorizontal:y,labelAlignClasses:m,labelColProps:v,onLegendClick:e=>{if(t.labelFor)return;const{target:n}=e,i=n?n.tagName:"";if(-1!==hf.indexOf(i))return;const r=bu(uf,f).filter(yu);1===r.length&&mu(r[0])},stateClass:_}},render(){const t=this.$props,e=this.$slots,n=ch(),i=!t.labelFor;let o=null;const a=Du(Af,{},e)||t.label,l=a?Pu("_BV_label_"):null;if(a||this.isHorizontal){const e=i?"legend":"label";if(this.labelSrOnlyBoolean)a&&(o=(0,s.h)(e,{class:"visually-hidden",id:l,for:t.labelFor||null},a)),o=this.isHorizontal?(0,s.h)(rd,this.labelColProps,{default:()=>o}):(0,s.h)("div",{},[o]);else{const n={onClick:i?this.onLegendClick:null,...this.isHorizontal?this.labelColProps:{},tag:this.isHorizontal?e:null,id:l,for:t.labelFor||null,tabIndex:i?"-1":null,class:[this.isHorizontal?"col-form-label":"form-label",{"bv-no-focus-ring":i,"col-form-label":this.isHorizontal||i,"pt-0":!this.isHorizontal&&i,"d-block":!this.isHorizontal&&!i,[`col-form-label-${t.labelSize}`]:!!t.labelSize},this.labelAlignClasses,t.labelClass]};o=this.isHorizontal?(0,s.h)(rd,n,{default:()=>a}):(0,s.h)(e,n,a)}}let c=null;const u=Du(df,{},e)||this.invalidFeedback,h=u?Pu("_BV_feedback_invalid_"):void 0;u&&(c=(0,s.h)(Xd,{ariaLive:t.feedbackAriaLive,id:h,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>u}));let A=null;const d=Du(ff,{},e)||this.validFeedback,f=d?Pu("_BV_feedback_valid_"):void 0;d&&(A=(0,s.h)(Jd,{ariaLive:t.feedbackAriaLive,id:f,state:this.stateBoolean,tooltip:this.tooltipBoolean},{default:()=>d}));let p=null;const g=Du(pf,{},e)||this.description,m=g?Pu("_BV_description_"):void 0;g&&(p=(0,s.h)(Zd,{id:m},{default:()=>g}));const v=this.ariaDescribedby=[m,!1===this.stateBoolean?h:null,!0===this.stateBoolean?f:null].filter((t=>t)).join(" ")||null,y=[Du(gf,{ariaDescribedby:v,descriptionId:m,id:n,labelId:l},e)||"",c,A,p];!this.isHorizontal&&this.floatingBoolean&&y.push(o);let w=(0,s.h)("div",{ref:"content",class:[{"form-floating":!this.isHorizontal&&this.floatingBoolean}]},y);this.isHorizontal&&(w=(0,s.h)(rd,{ref:"content",...this.contentColProps},{default:()=>y}));const _={class:["mb-3",this.stateClass,{"was-validated":this.validatedBoolean}],id:ch((0,r.lW)(t,"id")).value,disabled:i?this.disabledBoolean:null,role:i?null:"group","aria-invalid":this.computedAriaInvalid,"aria-labelledby":i&&this.isHorizontal?l:null};return this.isHorizontal&&!i?(0,s.h)(Yd,_,{default:()=>[o,w]}):(0,s.h)(i?"fieldset":"div",_,this.isHorizontal&&i?[(0,s.h)(Yd,null,{default:()=>[o,w]})]:this.isHorizontal||!this.floatingBoolean?[o,w]:[w])}}),vf=["text","number","email","password","search","url","tel","date","time","range","color"],yf=(0,s.pM)({props:{...uh,max:{type:[String,Number],required:!1},min:{type:[String,Number],required:!1},step:{type:[String,Number],required:!1},type:{type:String,default:"text",validator:t=>vf.includes(t)}},emits:["update:modelValue","change","blur","input"],setup(t,{emit:e}){const{input:n,computedId:i,computedAriaInvalid:o,onInput:a,onChange:l,onBlur:c,focus:u,blur:h}=hh(t,e),A=(0,r.KR)(!1),d=(0,s.EW)((()=>{const e="range"===t.type,n="color"===t.type;return{"form-control-highlighted":A.value,"form-range":e,"form-control":n||!t.plaintext&&!e,"form-control-color":n,"form-control-plaintext":t.plaintext&&!e&&!n,[`form-control-${t.size}`]:!!t.size,"is-valid":!0===t.state,"is-invalid":!1===t.state}})),f=(0,s.EW)((()=>vf.includes(t.type)?t.type:"text"));return{computedClasses:d,localType:f,input:n,computedId:i,computedAriaInvalid:o,onInput:a,onChange:l,onBlur:c,focus:u,blur:h,highlight:()=>{!0!==A.value&&(A.value=!0,setTimeout((()=>{A.value=!1}),2e3))}}}}),wf=["id","name","form","type","disabled","placeholder","required","autocomplete","readonly","min","max","step","list","aria-required","aria-invalid"];function _f(t,e,n,i,r,o){return(0,s.uX)(),(0,s.CE)("input",(0,s.v6)({id:t.computedId,ref:"input",class:t.computedClasses,name:t.name||void 0,form:t.form||void 0,type:t.localType,disabled:t.disabled,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete||void 0,readonly:t.readonly||t.plaintext,min:t.min,max:t.max,step:t.step,list:"password"!==t.type?t.list:void 0,"aria-required":t.required?"true":void 0,"aria-invalid":t.computedAriaInvalid},t.$attrs,{onInput:e[0]||(e[0]=e=>t.onInput(e)),onChange:e[1]||(e[1]=e=>t.onChange(e)),onBlur:e[2]||(e[2]=e=>t.onBlur(e))}),null,16,wf)}const bf=qh(yf,[["render",_f]]),xf=["id","disabled","required","name","form","aria-label","aria-labelledby","value","aria-required"],Ef=["for"],Cf=(0,s.pM)({__name:"BFormRadio",props:{ariaLabel:null,ariaLabelledby:null,form:null,id:null,name:null,size:null,autofocus:{default:!1},modelValue:{type:[Boolean,String,Array,Object,Number],default:void 0},plain:{default:!1},button:{default:!1},switch:{default:!1},disabled:{default:!1},buttonVariant:{default:"secondary"},inline:{default:!1},required:{default:!1},state:{default:void 0},value:{type:[String,Boolean,Object,Number],default:!0}},emits:["input","change","update:modelValue"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),l=ch((0,r.lW)(n,"id"),"form-check"),c=$u((0,r.lW)(n,"autofocus")),u=$u((0,r.lW)(n,"plain")),h=$u((0,r.lW)(n,"button")),A=$u((0,r.lW)(n,"switch")),d=$u((0,r.lW)(n,"disabled")),f=$u((0,r.lW)(n,"inline")),p=$u((0,r.lW)(n,"required")),g=$u((0,r.lW)(n,"state")),m=(0,r.KR)(null),v=(0,r.KR)(!1),y=(0,s.EW)({get:()=>Array.isArray(n.modelValue)?n.modelValue[0]:n.modelValue,set:t=>{const i=!!t&&n.value,r=Array.isArray(n.modelValue)?[i]:i;e("input",r),e("change",r),e("update:modelValue",r)}}),w=(0,s.EW)((()=>Array.isArray(n.modelValue)?(n.modelValue||[]).find((t=>t===n.value)):JSON.stringify(n.modelValue)===JSON.stringify(n.value))),_=(0,s.EW)((()=>!wu(i.default))),b=(0,r.Kh)({plain:(0,r.lW)(u,"value"),button:(0,r.lW)(h,"value"),inline:(0,r.lW)(f,"value"),switch:(0,r.lW)(A,"value"),size:(0,r.lW)(n,"size"),state:(0,r.lW)(g,"value"),buttonVariant:(0,r.lW)(n,"buttonVariant")}),x=eh(b),E=nh(b),C=ih(b);return(0,s.sV)((()=>{c.value&&null!==m.value&&m.value.focus()})),(e,n)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)((0,r.R1)(x))},[(0,s.bo)((0,s.Lk)("input",(0,s.v6)({id:(0,r.R1)(l)},e.$attrs,{ref_key:"input",ref:m,"onUpdate:modelValue":n[0]||(n[0]=t=>(0,r.i9)(y)?y.value=t:null),class:(0,r.R1)(E),type:"radio",disabled:(0,r.R1)(d),required:!!t.name&&(0,r.R1)(p),name:t.name,form:t.form,"aria-label":t.ariaLabel,"aria-labelledby":t.ariaLabelledby,value:t.value,"aria-required":!(!t.name||!(0,r.R1)(p))||void 0,onFocus:n[1]||(n[1]=t=>v.value=!0),onBlur:n[2]||(n[2]=t=>v.value=!1)}),null,16,xf),[[a.XL,(0,r.R1)(y)]]),(0,r.R1)(_)||!1===(0,r.R1)(u)?((0,s.uX)(),(0,s.CE)("label",{key:0,for:(0,r.R1)(l),class:(0,o.C4)([(0,r.R1)(C),{active:(0,r.R1)(w),focus:v.value}])},[(0,s.RG)(e.$slots,"default")],10,Ef)):(0,s.Q3)("",!0)],2))}}),Sf=["id"],Bf=["innerHTML"],Tf=["textContent"],If=(0,s.pM)({__name:"BFormRadioGroup",props:{size:null,form:null,id:null,name:null,modelValue:{type:[String,Boolean,Array,Object,Number],default:""},ariaInvalid:{default:void 0},autofocus:{default:!1},buttonVariant:{default:"secondary"},buttons:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},plain:{default:!1},required:{default:!1},stacked:{default:!1},state:{default:void 0},textField:{default:"text"},validated:{default:!1},valueField:{default:"value"}},emits:["input","update:modelValue","change"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),a="BFormRadio",l=ch((0,r.lW)(n,"id"),"radio"),c=ch((0,r.lW)(n,"name"),"checkbox");$u((0,r.lW)(n,"autofocus"));const u=$u((0,r.lW)(n,"buttons")),h=$u((0,r.lW)(n,"disabled"));$u((0,r.lW)(n,"plain"));const A=$u((0,r.lW)(n,"required")),d=$u((0,r.lW)(n,"stacked")),f=$u((0,r.lW)(n,"state")),p=$u((0,r.lW)(n,"validated")),g=(0,s.EW)({get:()=>n.modelValue,set:t=>{e("input",t),e("update:modelValue",t),e("change",t)}}),m=(0,s.EW)((()=>(i.first?oh(i.first(),a,h.value):[]).concat(n.options.map((t=>ah(t,n)))).concat(i.default?oh(i.default(),a,h.value):[]).map(((t,e)=>lh(t,e,n,c,l))).map((t=>({...t}))))),v=(0,r.Kh)({required:(0,r.lW)(A,"value"),ariaInvalid:(0,r.lW)(n,"ariaInvalid"),state:(0,r.lW)(f,"value"),validated:(0,r.lW)(p,"value"),buttons:(0,r.lW)(u,"value"),stacked:(0,r.lW)(d,"value"),size:(0,r.lW)(n,"size")}),y=rh(v),w=sh(v);return(t,e)=>((0,s.uX)(),(0,s.CE)("div",(0,s.v6)((0,r.R1)(y),{id:(0,r.R1)(l),role:"radiogroup",class:[(0,r.R1)(w),"bv-no-focus-ring"],tabindex:"-1"}),[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(m),((t,n)=>((0,s.uX)(),(0,s.Wv)(Cf,(0,s.v6)({key:n,modelValue:(0,r.R1)(g),"onUpdate:modelValue":e[0]||(e[0]=t=>(0,r.i9)(g)?g.value=t:null)},t.props),{default:(0,s.k6)((()=>[t.html?((0,s.uX)(),(0,s.CE)("span",{key:0,innerHTML:t.html},null,8,Bf)):((0,s.uX)(),(0,s.CE)("span",{key:1,textContent:(0,o.v_)(t.text)},null,8,Tf))])),_:2},1040,["modelValue"])))),128))],16,Sf))}}),Ff=["value","disabled"],Lf=(0,s.pM)({__name:"BFormSelectOption",props:{value:null,disabled:{default:!1}},setup(t){const e=$u((0,r.lW)(t,"disabled"));return(n,i)=>((0,s.uX)(),(0,s.CE)("option",{value:t.value,disabled:(0,r.R1)(e)},[(0,s.RG)(n.$slots,"default")],8,Ff))}}),Rf=["label"],Mf=(0,s.pM)({__name:"BFormSelectOptionGroup",props:{label:null,disabledField:{default:"disabled"},htmlField:{default:"html"},options:{default:()=>[]},textField:{default:"text"},valueField:{default:"value"}},setup(t){const e=t,n=(0,s.EW)((()=>fh(e.options,"BFormSelectOptionGroup",e)));return(e,i)=>((0,s.uX)(),(0,s.CE)("optgroup",{label:t.label},[(0,s.RG)(e.$slots,"first"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(n),((t,n)=>((0,s.uX)(),(0,s.Wv)(Lf,(0,s.v6)({key:n,value:t.value,disabled:t.disabled},e.$attrs,{innerHTML:t.html||t.text}),null,16,["value","disabled","innerHTML"])))),128)),(0,s.RG)(e.$slots,"default")],8,Rf))}}),Pf=["id","name","form","multiple","size","disabled","required","aria-required","aria-invalid"],Nf=(0,s.pM)({__name:"BFormSelect",props:{ariaInvalid:{default:void 0},autofocus:{default:!1},disabled:{default:!1},disabledField:{default:"disabled"},form:null,htmlField:{default:"html"},id:null,labelField:{default:"label"},multiple:{default:!1},name:null,options:{default:()=>[]},optionsField:{default:"options"},plain:{default:!1},required:{default:!1},selectSize:{default:0},size:null,state:{default:void 0},textField:{default:"text"},valueField:{default:"value"},modelValue:{default:""}},emits:["input","update:modelValue","change"],setup(t,{expose:e,emit:n}){const i=t,o=ch((0,r.lW)(i,"id"),"input"),l=$u((0,r.lW)(i,"autofocus")),c=$u((0,r.lW)(i,"disabled")),u=$u((0,r.lW)(i,"multiple")),h=$u((0,r.lW)(i,"plain")),A=$u((0,r.lW)(i,"required")),d=$u((0,r.lW)(i,"state")),f=(0,r.KR)(),p=(0,s.EW)((()=>({"form-control":h.value,[`form-control-${i.size}`]:i.size&&h.value,"form-select":!h.value,[`form-select-${i.size}`]:i.size&&!h.value,"is-valid":!0===d.value,"is-invalid":!1===d.value}))),g=(0,s.EW)((()=>{if(i.selectSize||h.value)return i.selectSize})),m=(0,s.EW)((()=>Nu(i.ariaInvalid,d.value))),v=(0,s.EW)((()=>fh(i.options,"BFormSelect",i))),y=(0,s.EW)({get(){return i.modelValue},set(t){n("change",t),n("update:modelValue",t),n("input",t)}}),w=()=>{var t;c.value||null==(t=f.value)||t.focus()},_=()=>{var t;c.value||null==(t=f.value)||t.blur()},b=()=>{(0,s.dY)((()=>{var t;l.value&&(null==(t=f.value)||t.focus())}))};return(0,s.sV)(b),(0,s.n)(b),e({blur:_,focus:w}),(e,n)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("select",(0,s.v6)({id:(0,r.R1)(o),ref_key:"input",ref:f},e.$attrs,{"onUpdate:modelValue":n[0]||(n[0]=t=>(0,r.i9)(y)?y.value=t:null),class:(0,r.R1)(p),name:t.name,form:t.form||void 0,multiple:(0,r.R1)(u)||void 0,size:(0,r.R1)(g),disabled:(0,r.R1)(c),required:(0,r.R1)(A),"aria-required":!!(0,r.R1)(A)||void 0,"aria-invalid":(0,r.R1)(m)}),[(0,s.RG)(e.$slots,"first"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(v),((t,e)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:e},[Array.isArray(t.options)?((0,s.uX)(),(0,s.Wv)(Mf,{key:0,label:t.label,options:t.options},null,8,["label","options"])):((0,s.uX)(),(0,s.Wv)(Lf,{key:1,value:t.value,disabled:t.disabled,innerHTML:t.html||t.text},null,8,["value","disabled","innerHTML"]))],64)))),128)),(0,s.RG)(e.$slots,"default")],16,Pf)),[[a.u1,(0,r.R1)(y)]])}}),Of=["id"],kf=(0,s.pM)({__name:"BFormTag",props:{id:null,title:null,disabled:{default:!1},noRemove:{default:!1},pill:{default:!1},removeLabel:{default:"Remove tag"},tag:{default:"span"},variant:{default:"secondary"}},emits:["remove"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),a=ch((0,r.lW)(n,"id")),l=$u((0,r.lW)(n,"disabled")),c=$u((0,r.lW)(n,"noRemove")),u=$u((0,r.lW)(n,"pill")),h=(0,s.EW)((()=>{var t,e,r;return null!=(r=(null!=(e=null==(t=i.default)?void 0:t.call(i)[0].children)?e:"").toString()||n.title)?r:""})),A=(0,s.EW)((()=>`${a.value}taglabel__`)),d=(0,s.EW)((()=>[`bg-${n.variant}`,{"text-dark":["warning","info","light"].includes(n.variant),"rounded-pill":u.value,disabled:l.value}]));return(n,i)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{id:(0,r.R1)(a),title:(0,r.R1)(h),class:(0,o.C4)(["badge b-form-tag d-inline-flex align-items-center mw-100",(0,r.R1)(d)]),"aria-labelledby":(0,r.R1)(A)},{default:(0,s.k6)((()=>[(0,s.Lk)("span",{id:(0,r.R1)(A),class:"b-form-tag-content flex-grow-1 text-truncate"},[(0,s.RG)(n.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)((0,r.R1)(h)),1)]))],8,Of),(0,r.R1)(l)||(0,r.R1)(c)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(Vh,{key:0,"aria-keyshortcuts":"Delete","aria-label":t.removeLabel,class:"b-form-tag-remove",white:!["warning","info","light"].includes(t.variant),"aria-describedby":(0,r.R1)(A),"aria-controls":t.id,onClick:i[0]||(i[0]=t=>e("remove",(0,r.R1)(h)))},null,8,["aria-label","white","aria-describedby","aria-controls"]))])),_:3},8,["id","title","class","aria-labelledby"]))}}),Df=["id"],Uf=["id","for","aria-live"],Qf=["id","aria-live"],Gf=["id"],Hf=["aria-controls"],Vf={role:"group",class:"d-flex"},jf=["id","disabled","value","type","placeholder","form","required"],Wf=["disabled"],zf={"aria-live":"polite","aria-atomic":"true"},Kf={key:0,class:"d-block invalid-feedback"},qf={key:1,class:"form-text text-muted"},$f={key:2,class:"form-text text-muted"},Xf=["name","value"],Yf=(0,s.pM)({__name:"BFormTags",props:{addButtonText:{default:"Add"},addButtonVariant:{default:"outline-secondary"},addOnChange:{default:!1},autofocus:{default:!1},disabled:{default:!1},duplicateTagText:{default:"Duplicate tag(s)"},inputAttrs:null,inputClass:null,inputId:null,inputType:{default:"text"},invalidTagText:{default:"Invalid tag(s)"},form:null,limit:null,limitTagsText:{default:"Tag limit reached"},modelValue:{default:()=>[]},name:null,noAddOnEnter:{default:!1},noOuterFocus:{default:!1},noTagRemove:{default:!1},placeholder:{default:"Add tag..."},removeOnDelete:{default:!1},required:{default:!1},separator:null,state:{default:void 0},size:null,tagClass:null,tagPills:{default:!1},tagRemoveLabel:null,tagRemovedLabel:{default:"Tag removed"},tagValidator:{type:Function,default:()=>!0},tagVariant:{default:"secondary"}},emits:["update:modelValue","input","tag-state","focus","focusin","focusout","blur"],setup(t,{emit:e}){const n=t,i=ch(),a=$u((0,r.lW)(n,"addOnChange")),l=$u((0,r.lW)(n,"autofocus")),c=$u((0,r.lW)(n,"disabled")),u=$u((0,r.lW)(n,"noAddOnEnter")),h=$u((0,r.lW)(n,"noOuterFocus")),A=$u((0,r.lW)(n,"noTagRemove")),d=$u((0,r.lW)(n,"removeOnDelete")),f=$u((0,r.lW)(n,"required")),p=$u((0,r.lW)(n,"state")),g=$u((0,r.lW)(n,"tagPills")),m=(0,r.KR)(null),v=(0,s.EW)((()=>n.inputId||`${i.value}input__`)),y=(0,r.KR)(n.modelValue),w=(0,r.KR)(""),_=(0,r.KR)(!1),b=(0,r.KR)(!1),x=(0,r.KR)(""),E=(0,r.KR)([]),C=(0,r.KR)([]),S=(0,r.KR)([]),B=(0,s.EW)((()=>({[`form-control-${n.size}`]:void 0!==n.size,disabled:c.value,focus:b.value,"is-invalid":!1===p.value,"is-valid":!0===p.value}))),T=(0,s.EW)((()=>y.value.includes(w.value))),I=(0,s.EW)((()=>""!==w.value&&!n.tagValidator(w.value))),F=(0,s.EW)((()=>y.value.length===n.limit)),L=(0,s.EW)((()=>!I.value&&!T.value)),R=(0,s.EW)((()=>({addButtonText:n.addButtonText,addButtonVariant:n.addButtonVariant,addTag:Q,disableAddButton:L.value,disabled:c.value,duplicateTagText:n.duplicateTagText,duplicateTags:S.value,form:n.form,inputAttrs:{...n.inputAttrs,disabled:c.value,form:n.form,id:v,value:w},inputHandlers:{input:k,keydown:U,change:D},inputId:v,inputType:n.inputType,invalidTagText:n.invalidTagText,invalidTags:C.value,isDuplicate:T.value,isInvalid:I.value,isLimitReached:F.value,limitTagsText:n.limitTagsText,limit:n.limit,noTagRemove:A.value,placeholder:n.placeholder,removeTag:G,required:f.value,separator:n.separator,size:n.size,state:p.value,tagClass:n.tagClass,tagPills:g.value,tagRemoveLabel:n.tagRemoveLabel,tagVariant:n.tagVariant,tags:y.value})));(0,s.wB)((()=>n.modelValue),(t=>{y.value=t}));const M=()=>{var t;l.value&&(null==(t=m.value)||t.focus())},P=t=>{c.value?t.target.blur():e("focusin",t)},N=t=>{c.value||h.value||(b.value=!0,e("focus",t))},O=t=>{b.value=!1,e("blur",t)},k=t=>{var i,r;const s="string"==typeof t?t:t.target.value;_.value=!1,(null==(i=n.separator)?void 0:i.includes(s.charAt(0)))&&s.length>0?m.value&&(m.value.value=""):(w.value=s,null!=(r=n.separator)&&r.includes(s.charAt(s.length-1))?Q(s.slice(0,s.length-1)):(E.value=n.tagValidator(s)&&!T.value?[s]:[],C.value=n.tagValidator(s)?[]:[s],S.value=T.value?[s]:[],e("tag-state",E.value,C.value,S.value)))},D=t=>{a.value&&(k(t),T.value||Q(w.value))},U=t=>{"Enter"!==t.key||u.value?("Backspace"===t.key||"Delete"===t.key)&&d.value&&""===w.value&&_.value&&y.value.length>0?G(y.value[y.value.length-1]):_.value=!0:Q(w.value)},Q=t=>{var i;if(t=(t||w.value).trim(),""===t||T.value||!n.tagValidator(t)||n.limit&&F.value)return;const r=[...n.modelValue,t];w.value="",_.value=!0,e("update:modelValue",r),e("input",r),null==(i=m.value)||i.focus()},G=t=>{var n;const i=y.value.indexOf(null!=(n=null==t?void 0:t.toString())?n:"");x.value=y.value.splice(i,1).toString(),e("update:modelValue",y.value)};return(0,s.sV)((()=>{M(),n.modelValue.length>0&&(_.value=!0)})),(0,s.n)((()=>M())),(n,a)=>((0,s.uX)(),(0,s.CE)("div",{id:(0,r.R1)(i),class:(0,o.C4)(["b-form-tags form-control h-auto",(0,r.R1)(B)]),role:"group",tabindex:"-1",onFocusin:P,onFocusout:a[1]||(a[1]=t=>e("focusout",t))},[(0,s.Lk)("output",{id:`${(0,r.R1)(i)}selected_tags__`,class:"visually-hidden",role:"status",for:(0,r.R1)(v),"aria-live":b.value?"polite":"off","aria-atomic":"true","aria-relevant":"additions text"},(0,o.v_)(y.value.join(", ")),9,Uf),(0,s.Lk)("div",{id:`${(0,r.R1)(i)}removed_tags__`,role:"status","aria-live":b.value?"assertive":"off","aria-atomic":"true",class:"visually-hidden"}," ("+(0,o.v_)(t.tagRemovedLabel)+") "+(0,o.v_)(x.value),9,Qf),(0,s.RG)(n.$slots,"default",(0,o._B)((0,s.Ng)((0,r.R1)(R))),(()=>[(0,s.Lk)("ul",{id:`${(0,r.R1)(i)}tag_list__`,class:"b-form-tags-list list-unstyled mb-0 d-flex flex-wrap align-items-center"},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(y.value,((e,i)=>(0,s.RG)(n.$slots,"tag",(0,o._B)((0,s.v6)({key:i},{tag:e,tagClass:t.tagClass,tagVariant:t.tagVariant,tagPills:(0,r.R1)(g),removeTag:G})),(()=>[(0,s.bF)(kf,{class:(0,o.C4)(t.tagClass),tag:"li",variant:t.tagVariant,pill:t.tagPills,onRemove:G},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(e),1)])),_:2},1032,["class","variant","pill"])])))),128)),(0,s.Lk)("li",{role:"none","aria-live":"off",class:"b-from-tags-field flex-grow-1","aria-controls":`${(0,r.R1)(i)}tag_list__`},[(0,s.Lk)("div",Vf,[(0,s.Lk)("input",(0,s.v6)({id:(0,r.R1)(v),ref_key:"input",ref:m,disabled:(0,r.R1)(c),value:w.value,type:t.inputType,placeholder:t.placeholder,class:"b-form-tags-input w-100 flex-grow-1 p-0 m-0 bg-transparent border-0",style:{outline:"currentcolor none 0px","min-width":"5rem"}},t.inputAttrs,{form:t.form,required:(0,r.R1)(f),onInput:k,onChange:D,onKeydown:U,onFocus:N,onBlur:O}),null,16,jf),(0,r.R1)(L)?((0,s.uX)(),(0,s.CE)("button",{key:0,type:"button",class:(0,o.C4)(["btn b-form-tags-button py-0",[`btn-${t.addButtonVariant}`,{"disabled invisible":0===w.value.length},t.inputClass]]),style:{"font-size":"90%"},disabled:(0,r.R1)(c)||0===w.value.length||(0,r.R1)(F),onClick:a[0]||(a[0]=t=>Q(w.value))},[(0,s.RG)(n.$slots,"add-button-text",{},(()=>[(0,s.eW)((0,o.v_)(t.addButtonText),1)]))],10,Wf)):(0,s.Q3)("",!0)])],8,Hf)],8,Gf),(0,s.Lk)("div",zf,[(0,r.R1)(I)?((0,s.uX)(),(0,s.CE)("div",Kf,(0,o.v_)(t.invalidTagText)+": "+(0,o.v_)(w.value),1)):(0,s.Q3)("",!0),(0,r.R1)(T)?((0,s.uX)(),(0,s.CE)("small",qf,(0,o.v_)(t.duplicateTagText)+": "+(0,o.v_)(w.value),1)):(0,s.Q3)("",!0),y.value.length===t.limit?((0,s.uX)(),(0,s.CE)("small",$f,"Tag limit reached")):(0,s.Q3)("",!0)])])),t.name?((0,s.uX)(!0),(0,s.CE)(s.FK,{key:0},(0,s.pI)(y.value,((e,n)=>((0,s.uX)(),(0,s.CE)("input",{key:n,type:"hidden",name:t.name,value:e},null,8,Xf)))),128)):(0,s.Q3)("",!0)],42,Df))}}),Zf=(0,s.pM)({props:{...uh,noResize:{type:[Boolean,String],default:!1},rows:{type:[String,Number],required:!1,default:2},wrap:{type:String,default:"soft"}},emits:["update:modelValue","change","blur","input"],setup(t,{emit:e}){const{input:n,computedId:i,computedAriaInvalid:o,onInput:a,onChange:l,onBlur:c,focus:u,blur:h}=hh(t,e),A=$u((0,r.lW)(t,"noResize")),d=(0,s.EW)((()=>({"form-control":!t.plaintext,"form-control-plaintext":t.plaintext,[`form-control-${t.size}`]:!!t.size,"is-valid":!0===t.state,"is-invalid":!1===t.state}))),f=(0,s.EW)((()=>A.value?{resize:"none"}:void 0));return{input:n,computedId:i,computedAriaInvalid:o,onInput:a,onChange:l,onBlur:c,focus:u,blur:h,computedClasses:d,computedStyles:f}}}),Jf=["id","name","form","disabled","placeholder","required","autocomplete","readonly","aria-required","aria-invalid","rows","wrap"];function tp(t,e,n,i,r,o){return(0,s.uX)(),(0,s.CE)("textarea",(0,s.v6)({id:t.computedId,ref:"input",class:t.computedClasses,name:t.name||void 0,form:t.form||void 0,disabled:t.disabled,placeholder:t.placeholder,required:t.required,autocomplete:t.autocomplete||void 0,readonly:t.readonly||t.plaintext,"aria-required":t.required?"true":void 0,"aria-invalid":t.computedAriaInvalid,rows:t.rows,style:t.computedStyles,wrap:t.wrap||void 0},t.$attrs,{onInput:e[0]||(e[0]=e=>t.onInput(e)),onChange:e[1]||(e[1]=e=>t.onChange(e)),onBlur:e[2]||(e[2]=e=>t.onBlur(e))}),null,16,Jf)}const ep=qh(Zf,[["render",tp]]),np={key:0,class:"input-group-text"},ip=["innerHTML"],rp={key:1},sp={key:0,class:"input-group-text"},op=["innerHTML"],ap={key:1},lp=(0,s.pM)({__name:"BInputGroup",props:{append:null,appendHtml:null,id:null,prepend:null,prependHtml:null,size:null,tag:{default:"div"}},setup(t){const e=t,n=(0,s.EW)((()=>({"input-group-sm":"sm"===e.size,"input-group-lg":"lg"===e.size}))),i=(0,s.EW)((()=>!!e.append||!!e.appendHtml)),a=(0,s.EW)((()=>!!e.prepend||!!e.prependHtml));return(e,l)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{id:t.id,class:(0,o.C4)(["input-group",(0,r.R1)(n)]),role:"group"},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"prepend",{},(()=>[(0,r.R1)(a)?((0,s.uX)(),(0,s.CE)("span",np,[t.prependHtml?((0,s.uX)(),(0,s.CE)("span",{key:0,innerHTML:t.prependHtml},null,8,ip)):((0,s.uX)(),(0,s.CE)("span",rp,(0,o.v_)(t.prepend),1))])):(0,s.Q3)("",!0)])),(0,s.RG)(e.$slots,"default"),(0,s.RG)(e.$slots,"append",{},(()=>[(0,r.R1)(i)?((0,s.uX)(),(0,s.CE)("span",sp,[t.appendHtml?((0,s.uX)(),(0,s.CE)("span",{key:0,innerHTML:t.appendHtml},null,8,op)):((0,s.uX)(),(0,s.CE)("span",ap,(0,o.v_)(t.append),1))])):(0,s.Q3)("",!0)]))])),_:3},8,["id","class"]))}}),cp=(0,s.pM)({__name:"BInputGroupText",props:{tag:{default:"div"},text:null},setup(t){return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:"input-group-text"},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))])),_:3}))}}),up=(0,s.pM)({__name:"BInputGroupAddon",props:{isText:{default:!1}},setup(t){const e=$u((0,r.lW)(t,"isText"));return(t,n)=>(0,r.R1)(e)?((0,s.uX)(),(0,s.Wv)(cp,{key:0},{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3})):(0,s.RG)(t.$slots,"default",{key:1})}}),hp=(0,s.pM)({__name:"BInputGroupAppend",props:{isText:{default:!1}},setup(t){return(e,n)=>((0,s.uX)(),(0,s.Wv)(up,{"is-text":t.isText},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default")])),_:3},8,["is-text"]))}}),Ap=(0,s.pM)({__name:"BInputGroupPrepend",props:{isText:{default:!1}},setup(t){return(e,n)=>((0,s.uX)(),(0,s.Wv)(up,{"is-text":t.isText},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default")])),_:3},8,["is-text"]))}}),dp=Symbol(),fp=(0,s.pM)({__name:"BListGroup",props:{flush:{default:!1},horizontal:{type:[Boolean,String],default:!1},numbered:{default:!1},tag:{default:"div"}},setup(t){const e=t,n=$u((0,r.lW)(e,"flush")),i=$u((0,r.lW)(e,"numbered")),a=(0,s.EW)((()=>{const t=!n.value&&e.horizontal;return{"list-group-flush":n.value,"list-group-horizontal":!0===t,[`list-group-horizontal-${t}`]:"string"==typeof t,"list-group-numbered":i.value}})),l=(0,s.EW)((()=>!0===i.value?"ol":e.tag));return(0,s.Gt)(dp,{numbered:i.value}),(t,e)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)((0,r.R1)(l)),{class:(0,o.C4)(["list-group",(0,r.R1)(a)])},{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},8,["class"]))}}),pp=(0,s.pM)({__name:"BListGroupItem",props:{action:{default:!1},active:{default:!1},button:{default:!1},disabled:{default:!1},href:null,tag:{default:"div"},target:{default:"_self"},to:null,variant:null},setup(t){const e=t,n=(0,s.OA)(),i=(0,s.WQ)(dp,null),o=$u((0,r.lW)(e,"action")),a=$u((0,r.lW)(e,"active")),l=$u((0,r.lW)(e,"button")),c=$u((0,r.lW)(e,"disabled")),u=(0,s.EW)((()=>!l.value&&(!!e.href||!!e.to))),h=(0,s.EW)((()=>null!=i&&i.numbered?"li":l.value?"button":u.value?Xh:e.tag)),A=(0,s.EW)((()=>o.value||u.value||l.value||["a","router-link","button","b-link"].includes(e.tag))),d=(0,s.EW)((()=>({[`list-group-item-${e.variant}`]:void 0!==e.variant,"list-group-item-action":A.value,active:a.value,disabled:c.value}))),f=(0,s.EW)((()=>{const t={};return l.value&&((!n||!n.type)&&(t.type="button"),c.value&&(t.disabled=!0)),t}));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)((0,r.R1)(h)),(0,s.v6)({class:["list-group-item",(0,r.R1)(d)],"aria-current":!!(0,r.R1)(a)||void 0,"aria-disabled":!!(0,r.R1)(c)||void 0,target:(0,r.R1)(u)?t.target:void 0,href:(0,r.R1)(l)?void 0:t.href,to:(0,r.R1)(l)?void 0:t.to},(0,r.R1)(f)),{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default")])),_:3},16,["class","aria-current","aria-disabled","target","href","to"]))}}),gp=["id","aria-labelledby","aria-describedby"],mp=["id"],vp={inheritAttrs:!1},yp=(0,s.pM)({...vp,__name:"BModal",props:{bodyBgVariant:null,bodyClass:null,bodyTextVariant:null,busy:{default:!1},lazy:{default:!1},buttonSize:{default:"md"},cancelDisabled:{default:!1},cancelTitle:{default:"Cancel"},cancelVariant:{default:"secondary"},centered:{default:!1},contentClass:null,dialogClass:null,footerBgVariant:null,footerBorderVariant:null,footerClass:null,footerTextVariant:null,fullscreen:{type:[Boolean,String],default:!1},headerBgVariant:null,headerBorderVariant:null,headerClass:null,headerCloseLabel:{default:"Close"},headerCloseWhite:{default:!1},headerTextVariant:null,hideBackdrop:{default:!1},hideFooter:{default:!1},hideHeader:{default:!1},hideHeaderClose:{default:!1},id:null,modalClass:null,modelValue:{default:!1},noCloseOnBackdrop:{default:!1},noCloseOnEsc:{default:!1},noFade:{default:!1},noFocus:{default:!1},okDisabled:{default:!1},okOnly:{default:!1},okTitle:{default:"Ok"},okVariant:{default:"primary"},scrollable:{default:!1},show:{default:!1},size:null,title:null,titleClass:null,titleSrOnly:{default:!1},titleTag:{default:"h5"},static:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden","hide-prevented","show-prevented","ok","cancel","close"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),l=ch((0,r.lW)(n,"id"),"modal"),c=$u((0,r.lW)(n,"busy")),u=$u((0,r.lW)(n,"lazy")),h=$u((0,r.lW)(n,"cancelDisabled")),A=$u((0,r.lW)(n,"centered")),d=$u((0,r.lW)(n,"hideBackdrop")),f=$u((0,r.lW)(n,"hideFooter")),p=$u((0,r.lW)(n,"hideHeader")),g=$u((0,r.lW)(n,"hideHeaderClose")),m=$u((0,r.lW)(n,"modelValue")),v=$u((0,r.lW)(n,"noCloseOnBackdrop")),y=$u((0,r.lW)(n,"noCloseOnEsc")),w=$u((0,r.lW)(n,"noFade")),_=$u((0,r.lW)(n,"noFocus")),b=$u((0,r.lW)(n,"okDisabled")),x=$u((0,r.lW)(n,"okOnly")),E=$u((0,r.lW)(n,"scrollable")),C=$u((0,r.lW)(n,"titleSrOnly")),S=$u((0,r.lW)(n,"static")),B=(0,r.KR)(!1),T=(0,r.KR)(null),I=(0,r.KR)(!1),F=(0,s.EW)((()=>[n.modalClass,{fade:!w.value,show:B.value}])),L=(0,s.EW)((()=>!wu(i["header-close"]))),R=(0,s.EW)((()=>[n.dialogClass,{"modal-fullscreen":!0===n.fullscreen,[`modal-fullscreen-${n.fullscreen}-down`]:"string"==typeof n.fullscreen,[`modal-${n.size}`]:void 0!==n.size,"modal-dialog-centered":A.value,"modal-dialog-scrollable":E.value}])),M=(0,s.EW)((()=>[n.bodyClass,{[`bg-${n.bodyBgVariant}`]:void 0!==n.bodyBgVariant,[`text-${n.bodyTextVariant}`]:void 0!==n.bodyTextVariant}])),P=(0,s.EW)((()=>[n.headerClass,{[`bg-${n.headerBgVariant}`]:void 0!==n.headerBgVariant,[`border-${n.headerBorderVariant}`]:void 0!==n.headerBorderVariant,[`text-${n.headerTextVariant}`]:void 0!==n.headerTextVariant}])),N=(0,s.EW)((()=>[n.footerClass,{[`bg-${n.footerBgVariant}`]:void 0!==n.footerBgVariant,[`border-${n.footerBorderVariant}`]:void 0!==n.footerBorderVariant,[`text-${n.footerTextVariant}`]:void 0!==n.footerTextVariant}])),O=(0,s.EW)((()=>[n.titleClass,{["visually-hidden"]:C.value}])),k=(0,s.EW)((()=>h.value||c.value)),D=(0,s.EW)((()=>b.value||c.value)),U=(t,e={})=>new Lc(t,{cancelable:!1,target:T.value||null,relatedTarget:null,trigger:null,...e,componentId:l.value}),Q=(t="")=>{const n=U("hide",{cancelable:""!==t,trigger:t});if("ok"===t&&e(t,n),"cancel"===t&&e(t,n),"close"===t&&e(t,n),e("hide",n),n.defaultPrevented||"backdrop"===t&&v.value||"esc"===t&&y.value)return e("update:modelValue",!0),void e("hide-prevented");e("update:modelValue",!1)},G=()=>{const t=U("show",{cancelable:!0});if(e("show",t),t.defaultPrevented)return e("update:modelValue",!1),void e("show-prevented");e("update:modelValue",!0)},H=()=>G(),V=()=>{B.value=!0,e("shown",U("shown")),!0===u.value&&(I.value=!0)},j=()=>{B.value=!1},W=()=>{e("hidden",U("hidden")),!0===u.value&&(I.value=!1)};return(0,s.wB)((()=>m.value),(t=>{!0===t&&!_.value&&(0,s.dY)((()=>{null!==T.value&&T.value.focus()}))})),(e,n)=>((0,s.uX)(),(0,s.Wv)(s.Im,{to:"body",disabled:(0,r.R1)(S)},[(0,s.bF)(Gh,{"no-fade":!0,"trans-props":{enterToClass:"show"},onBeforeEnter:H,onAfterEnter:V,onLeave:j,onAfterLeave:W},{default:(0,s.k6)((()=>[(0,s.bo)((0,s.Lk)("div",(0,s.v6)({id:(0,r.R1)(l),ref_key:"element",ref:T,class:["modal",(0,r.R1)(F)],role:"dialog","aria-labelledby":`${(0,r.R1)(l)}-label`,"aria-describedby":`${(0,r.R1)(l)}-body`,tabindex:"-1"},e.$attrs,{onKeyup:n[5]||(n[5]=(0,a.jR)((t=>Q("esc")),["esc"]))}),[(0,s.Lk)("div",{class:(0,o.C4)(["modal-dialog",(0,r.R1)(R)])},[!(0,r.R1)(u)||(0,r.R1)(u)&&I.value||(0,r.R1)(u)&&!0===(0,r.R1)(m)?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["modal-content",t.contentClass])},[(0,r.R1)(p)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["modal-header",(0,r.R1)(P)])},[(0,s.RG)(e.$slots,"header",{},(()=>[((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.titleTag),{id:`${(0,r.R1)(l)}-label`,class:(0,o.C4)(["modal-title",(0,r.R1)(O)])},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"title",{},(()=>[(0,s.eW)((0,o.v_)(t.title),1)]),!0)])),_:3},8,["id","class"])),(0,r.R1)(g)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)(s.FK,{key:0},[(0,r.R1)(L)?((0,s.uX)(),(0,s.CE)("button",{key:0,type:"button",onClick:n[0]||(n[0]=t=>Q("close"))},[(0,s.RG)(e.$slots,"header-close",{},void 0,!0)])):((0,s.uX)(),(0,s.Wv)(Vh,{key:1,"aria-label":t.headerCloseLabel,white:t.headerCloseWhite,onClick:n[1]||(n[1]=t=>Q("close"))},null,8,["aria-label","white"]))],64))]),!0)],2)),(0,s.Lk)("div",{id:`${(0,r.R1)(l)}-body`,class:(0,o.C4)(["modal-body",(0,r.R1)(M)])},[(0,s.RG)(e.$slots,"default",{},void 0,!0)],10,mp),(0,r.R1)(f)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,o.C4)(["modal-footer",(0,r.R1)(N)])},[(0,s.RG)(e.$slots,"footer",{},(()=>[(0,s.RG)(e.$slots,"cancel",{},(()=>[(0,r.R1)(x)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(Jh,{key:0,type:"button",class:"btn",disabled:(0,r.R1)(k),size:t.buttonSize,variant:t.cancelVariant,onClick:n[2]||(n[2]=t=>Q("cancel"))},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(t.cancelTitle),1)])),_:1},8,["disabled","size","variant"]))]),!0),(0,s.RG)(e.$slots,"ok",{},(()=>[(0,s.bF)(Jh,{type:"button",class:"btn",disabled:(0,r.R1)(D),size:t.buttonSize,variant:t.okVariant,onClick:n[3]||(n[3]=t=>Q("ok"))},{default:(0,s.k6)((()=>[(0,s.eW)((0,o.v_)(t.okTitle),1)])),_:1},8,["disabled","size","variant"])]),!0)]),!0)],2))],2)):(0,s.Q3)("",!0)],2),(0,r.R1)(d)?(0,s.Q3)("",!0):(0,s.RG)(e.$slots,"backdrop",{key:0},(()=>[(0,s.Lk)("div",{class:"modal-backdrop fade show",onClick:n[4]||(n[4]=t=>Q("backdrop"))})]),!0)],16,gp),[[a.aG,(0,r.R1)(m)]])])),_:3})],8,["disabled"]))}}),wp=qh(yp,[["__scopeId","data-v-116ecd66"]]),_p=(0,s.pM)({__name:"BNav",props:{align:null,cardHeader:{default:!1},fill:{default:!1},justified:{default:!1},pills:{default:!1},small:{default:!1},tabs:{default:!1},tag:{default:"ul"},vertical:{default:!1}},setup(t){const e=t,n=$u((0,r.lW)(e,"cardHeader")),i=$u((0,r.lW)(e,"fill")),a=$u((0,r.lW)(e,"justified")),l=$u((0,r.lW)(e,"pills")),c=$u((0,r.lW)(e,"small")),u=$u((0,r.lW)(e,"tabs")),h=$u((0,r.lW)(e,"vertical")),A=Ic((0,r.lW)(e,"align")),d=(0,s.EW)((()=>({"nav-tabs":u.value,"nav-pills":l.value&&!u.value,"card-header-tabs":!h.value&&n.value&&u.value,"card-header-pills":!h.value&&n.value&&l.value&&!u.value,"flex-column":h.value,"nav-fill":!h.value&&i.value,"nav-justified":!h.value&&a.value,[A.value]:!h.value&&void 0!==e.align,small:c.value})));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)(["nav",(0,r.R1)(d)])},{default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default")])),_:3},8,["class"]))}}),bp=(0,s.pM)({__name:"BNavForm",props:{role:null,id:null,floating:{default:!1},novalidate:{default:!1},validated:{default:!1}},emits:["submit"],setup(t,{emit:e}){const n=t,i=(0,s.EW)((()=>({floating:n.floating,role:n.role,id:n.id,novalidate:n.novalidate,validated:n.validated}))),o=t=>e("submit",t);return(t,e)=>((0,s.uX)(),(0,s.Wv)(zd,(0,s.v6)((0,r.R1)(i),{class:"d-flex",onSubmit:(0,a.D$)(o,["prevent"])}),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},16,["onSubmit"]))}}),xp=(0,s.pM)({components:{BLink:Xh},props:{...Hu(zh,["event","routerTag"])},setup(t){return{disabledBoolean:$u((0,r.lW)(t,"disabled"))}}}),Ep={class:"nav-item"};function Cp(t,e,n,i,r,o){const a=(0,s.g2)("b-link");return(0,s.uX)(),(0,s.CE)("li",Ep,[(0,s.bF)(a,(0,s.v6)({class:"nav-link"},t.$props,{"active-class":"active",tabindex:t.disabledBoolean?-1:void 0,"aria-disabled":!!t.disabledBoolean||void 0}),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},16,["tabindex","aria-disabled"])])}const Sp=qh(xp,[["render",Cp]]),Bp={class:"nav-item dropdown"},Tp=(0,s.pM)({__name:"BNavItemDropdown",props:{id:null,text:null,toggleClass:null,size:null,offset:null,autoClose:{type:[Boolean,String],default:!0},dark:{type:Boolean,default:!1},dropleft:{type:Boolean,default:!1},dropright:{type:Boolean,default:!1},dropup:{type:Boolean,default:!1},right:{type:Boolean,default:!1},left:{type:[Boolean,String],default:!1},split:{type:Boolean,default:!1},splitVariant:null,noCaret:{type:Boolean,default:!1},variant:{default:"link"}},setup(t){const e=t;return(t,n)=>((0,s.uX)(),(0,s.CE)("li",Bp,[(0,s.bF)(_d,(0,s.v6)(e,{"is-nav":""}),(0,s.eX)({_:2},[(0,s.pI)(t.$slots,((e,n,i)=>({name:n,fn:(0,s.k6)((e=>[(0,s.RG)(t.$slots,n,(0,o._B)((0,s.Ng)(e||{})))]))})))]),1040)]))}}),Ip={class:"navbar-text"},Fp=(0,s.pM)({__name:"BNavText",props:{text:null},setup(t){return(e,n)=>((0,s.uX)(),(0,s.CE)("li",Ip,[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.text),1)]))]))}}),Lp=(0,s.pM)({__name:"BNavbar",props:{fixed:null,print:{default:!1},sticky:null,tag:{default:"nav"},toggleable:{type:[Boolean,String],default:!1},dark:{default:!1},variant:null,container:{type:[String,Boolean],default:"fluid"}},setup(t){const e=t,n=$u((0,r.lW)(e,"print")),i=$u((0,r.lW)(e,"dark")),a=(0,s.EW)((()=>"nav"===e.tag?void 0:"navigation")),l=(0,s.EW)((()=>"string"==typeof e.toggleable?`navbar-expand-${e.toggleable}`:!1===e.toggleable?"navbar-expand":void 0)),c=(0,s.EW)((()=>!0===e.container?"container":"container-fluid")),u=(0,s.EW)((()=>({"d-print":n.value,[`sticky-${e.sticky}`]:void 0!==e.sticky,"navbar-dark":i.value,[`bg-${e.variant}`]:void 0!==e.variant,[`fixed-${e.fixed}`]:void 0!==e.fixed,[`${l.value}`]:void 0!==l.value})));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)(["navbar",(0,r.R1)(u)]),role:(0,r.R1)(a)},{default:(0,s.k6)((()=>[!1!==t.container?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)((0,r.R1)(c))},[(0,s.RG)(e.$slots,"default")],2)):(0,s.RG)(e.$slots,"default",{key:1})])),_:3},8,["class","role"]))}}),Rp=Hu(zh,["event","routerTag"]),Mp=(0,s.pM)({components:{BLink:Xh},props:{tag:{type:String,default:"div"},...Rp},setup(t){const e=(0,s.EW)((()=>qu(t))),n=(0,s.EW)((()=>e.value?Xh:t.tag));return{computedLinkProps:(0,s.EW)((()=>e.value?zu(t,Rp):{})),computedTag:n}}});function Pp(t,e,n,i,r,o){return(0,s.uX)(),(0,s.Wv)((0,s.$y)(t.computedTag),(0,s.v6)({class:"navbar-brand"},t.computedLinkProps),{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},16)}const Np=qh(Mp,[["render",Pp]]),Op=(0,s.pM)({__name:"BNavbarNav",props:{align:null,fill:{default:!1},justified:{default:!1},small:{default:!1},tag:{default:"ul"}},setup(t){const e=t,n=$u((0,r.lW)(e,"fill")),i=$u((0,r.lW)(e,"justified")),a=$u((0,r.lW)(e,"small")),l=Ic((0,r.lW)(e,"align")),c=(0,s.EW)((()=>({"nav-fill":n.value,"nav-justified":i.value,[l.value]:void 0!==e.align,small:a.value})));return(t,e)=>((0,s.uX)(),(0,s.CE)("ul",{class:(0,o.C4)(["navbar-nav",(0,r.R1)(c)])},[(0,s.RG)(t.$slots,"default")],2))}}),kp=(0,s.Lk)("span",{class:"navbar-toggler-icon"},null,-1),Dp=(0,s.pM)({__name:"BNavbarToggle",props:{disabled:{default:!1},label:{default:"Toggle navigation"},target:null},emits:["click"],setup(t,{emit:e}){const n=t,i=$u((0,r.lW)(n,"disabled")),o=(0,s.EW)((()=>({disabled:i.value,"aria-label":n.label}))),a=(0,s.EW)((()=>({disabled:i.value}))),l=t=>{i.value||e("click",t)};return(e,n)=>(0,s.bo)(((0,s.uX)(),(0,s.CE)("button",(0,s.v6)({class:["navbar-toggler",(0,r.R1)(a)],type:"button"},(0,r.R1)(o),{onClick:l}),[(0,s.RG)(e.$slots,"default",{},(()=>[kp]))],16)),[[(0,r.R1)(Ch),(0,r.R1)(i)?void 0:t.target]])}}),Up=["data-bs-backdrop","data-bs-scroll"],Qp={key:0,class:"offcanvas-header"},Gp={id:"offcanvasLabel",class:"offcanvas-title"},Hp={class:"offcanvas-body"},Vp={key:1},jp=(0,s.pM)({__name:"BOffcanvas",props:{dismissLabel:{default:"Close"},modelValue:{default:!1},bodyScrolling:{default:!1},backdrop:{default:!0},placement:{default:"start"},title:null,noHeaderClose:{default:!1},noHeader:{default:!1}},emits:["update:modelValue","show","shown","hide","hidden"],setup(t,{emit:e}){const n=t,i=$u((0,r.lW)(n,"modelValue")),a=$u((0,r.lW)(n,"bodyScrolling")),l=$u((0,r.lW)(n,"backdrop")),c=$u((0,r.lW)(n,"noHeaderClose")),u=$u((0,r.lW)(n,"noHeader")),h=(0,s.Ht)(),A=(0,r.KR)(),d=(0,r.KR)(),f=(0,s.EW)((()=>!wu(h.footer))),p=(0,s.EW)((()=>[`offcanvas-${n.placement}`])),g=()=>{e("show"),e("update:modelValue",!0)},m=()=>{e("hide"),e("update:modelValue",!1)};return(0,s.wB)((()=>i.value),(t=>{var e,n;t?null==(e=d.value)||e.show(A.value):null==(n=d.value)||n.hide()})),th(A,"shown.bs.offcanvas",(()=>e("shown"))),th(A,"hidden.bs.offcanvas",(()=>e("hidden"))),th(A,"show.bs.offcanvas",(()=>{g()})),th(A,"hide.bs.offcanvas",(()=>{m()})),(0,s.sV)((()=>{var t;d.value=new to(A.value),i.value&&(null==(t=d.value)||t.show(A.value))})),(e,n)=>((0,s.uX)(),(0,s.CE)("div",{ref_key:"element",ref:A,class:(0,o.C4)(["offcanvas",(0,r.R1)(p)]),tabindex:"-1","aria-labelledby":"offcanvasLabel","data-bs-backdrop":(0,r.R1)(l),"data-bs-scroll":(0,r.R1)(a)},[(0,r.R1)(u)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",Qp,[(0,s.RG)(e.$slots,"header",(0,o._B)((0,s.Ng)({visible:(0,r.R1)(i),placement:t.placement,hide:m})),(()=>[(0,s.Lk)("h5",Gp,[(0,s.RG)(e.$slots,"title",{},(()=>[(0,s.eW)((0,o.v_)(t.title),1)]))]),(0,r.R1)(c)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.Wv)(Vh,{key:0,class:"text-reset","data-bs-dismiss":"offcanvas","aria-label":t.dismissLabel},null,8,["aria-label"]))]))])),(0,s.Lk)("div",Hp,[(0,s.RG)(e.$slots,"default")]),(0,r.R1)(f)?((0,s.uX)(),(0,s.CE)("div",Vp,[(0,s.RG)(e.$slots,"footer",(0,o._B)((0,s.Ng)({visible:(0,r.R1)(i),placement:t.placement,hide:m})))])):(0,s.Q3)("",!0)],10,Up))}}),Wp=(0,s.pM)({__name:"BOverlay",props:{bgColor:null,blur:{default:"2px"},fixed:{default:!1},noCenter:{default:!1},noFade:{default:!1},noWrap:{default:!1},opacity:{default:.85},overlayTag:{default:"div"},rounded:{type:[Boolean,String],default:!1},show:{default:!1},spinnerSmall:{default:!1},spinnerType:{default:"border"},spinnerVariant:null,variant:{default:"light"},wrapTag:{default:"div"},zIndex:{default:10}},emits:["click","hidden","shown"],setup(t,{emit:e}){const n=t,i={top:0,left:0,bottom:0,right:0},a=$u((0,r.lW)(n,"fixed")),l=$u((0,r.lW)(n,"noCenter")),c=$u((0,r.lW)(n,"noWrap")),u=$u((0,r.lW)(n,"show")),h=$u((0,r.lW)(n,"spinnerSmall")),A=(0,s.EW)((()=>!0===n.rounded||""===n.rounded?"rounded":!1===n.rounded?"":`rounded-${n.rounded}`)),d=(0,s.EW)((()=>n.variant&&!n.bgColor?`bg-${n.variant}`:"")),f=(0,s.EW)((()=>u.value?"true":null)),p=(0,s.EW)((()=>({type:n.spinnerType||void 0,variant:n.spinnerVariant||void 0,small:h.value}))),g=(0,s.EW)((()=>({...i,zIndex:n.zIndex||10}))),m=(0,s.EW)((()=>["b-overlay",{"position-absolute":!c.value||!a.value,"position-fixed":c.value&&a.value}])),v=(0,s.EW)((()=>[d.value,A.value])),y=(0,s.EW)((()=>({...i,opacity:n.opacity,backgroundColor:n.bgColor||void 0,backdropFilter:blur?`blur(${blur})`:void 0}))),w=(0,s.EW)((()=>l.value?i:{top:"50%",left:"50%",transform:"translateX(-50%) translateY(-50%)"}));return(n,i)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.wrapTag),{class:"b-overlay-wrap position-relative","aria-busy":(0,r.R1)(f)},{default:(0,s.k6)((()=>[(0,s.RG)(n.$slots,"default"),(0,s.bF)(Gh,{"no-fade":t.noFade,"trans-props":{enterToClass:"show"},name:"fade",onOnAfterEnter:i[1]||(i[1]=t=>e("shown")),onOnAfterLeave:i[2]||(i[2]=t=>e("hidden"))},{default:(0,s.k6)((()=>[(0,r.R1)(u)?((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.overlayTag),{key:0,class:(0,o.C4)((0,r.R1)(m)),style:(0,o.Tr)((0,r.R1)(g)),onClick:i[0]||(i[0]=t=>e("click",t))},{default:(0,s.k6)((()=>[(0,s.Lk)("div",{class:(0,o.C4)(["position-absolute",(0,r.R1)(v)]),style:(0,o.Tr)((0,r.R1)(y))},null,6),(0,s.Lk)("div",{class:"position-absolute",style:(0,o.Tr)((0,r.R1)(w))},[(0,s.RG)(n.$slots,"overlay",(0,o._B)((0,s.Ng)((0,r.R1)(p))),(()=>[(0,s.bF)(Wh,(0,o._B)((0,s.Ng)((0,r.R1)(p))),null,16)]))],4)])),_:3},8,["class","style"])):(0,s.Q3)("",!0)])),_:3},8,["no-fade"])])),_:3},8,["aria-busy"]))}}),zp=5,Kp=20,qp=0,$p=3,Xp="ellipsis-text",Yp="first-text",Zp="last-text",Jp="next-text",tg="page",eg="prev-text",ng=t=>Math.max(Uu(t)||Kp,1),ig=t=>Math.max(Uu(t)||qp,0),rg=(t,e)=>{const n=Uu(t)||1;return n>e?e:n<1?1:n},sg=(0,s.pM)({name:"BPagination",props:{align:{type:String,default:"start"},ariaControls:{type:String,required:!1},ariaLabel:{type:String,default:"Pagination"},disabled:{type:[Boolean,String],default:!1},ellipsisClass:{type:[Array,String],default:()=>[]},ellipsisText:{type:String,default:""},firstClass:{type:[Array,String],default:()=>[]},firstNumber:{type:[Boolean,String],default:!1},firstText:{type:String,default:""},hideEllipsis:{type:[Boolean,String],default:!1},hideGotoEndButtons:{type:[Boolean,String],default:!1},labelFirstPage:{type:String,default:"Go to first page"},labelLastPage:{type:String,default:"Go to last page"},labelNextPage:{type:String,default:"Go to next page"},labelPage:{type:String,default:"Go to page"},labelPrevPage:{type:String,default:"Go to previous page"},lastClass:{type:[Array,String],default:()=>[]},lastNumber:{type:[Boolean,String],default:!1},lastText:{type:String,default:""},limit:{type:Number,default:zp},modelValue:{type:Number,default:1},nextClass:{type:[Array,String],default:()=>[]},nextText:{type:String,default:""},pageClass:{type:[Array,String],default:()=>[]},perPage:{type:Number,default:Kp},pills:{type:[Boolean,String],default:!1},prevClass:{type:[Array,String],default:()=>[]},prevText:{type:String,default:""},size:{type:String,required:!1},totalRows:{type:Number,default:qp}},emits:["update:modelValue","page-click"],setup(t,{emit:e,slots:n}){const i=$u((0,r.lW)(t,"disabled")),o=$u((0,r.lW)(t,"firstNumber")),a=$u((0,r.lW)(t,"hideEllipsis")),l=$u((0,r.lW)(t,"hideGotoEndButtons")),c=$u((0,r.lW)(t,"lastNumber")),u=$u((0,r.lW)(t,"pills")),h=(0,s.EW)((()=>"fill"===t.align?"start":t.align)),A=Ic((0,r.lW)(h,"value")),d=(0,s.EW)((()=>Math.ceil(ig(t.totalRows)/ng(t.perPage)))),f=(0,s.EW)((()=>{let e;return e=d.value-t.modelValue+2<t.limit&&t.limit>$p?d.value-g.value+1:t.modelValue-Math.floor(g.value/2),e<1?e=1:e>d.value-g.value&&(e=d.value-g.value+1),t.limit<=$p&&c.value&&d.value===e+g.value-1&&(e=Math.max(e-1,1)),e})),p=(0,s.EW)((()=>{const e=d.value-t.modelValue;let n=!1;return e+2<t.limit&&t.limit>$p?t.limit>$p&&(n=!0):t.limit>$p&&(n=!(a.value&&!o.value)),f.value<=1&&(n=!1),n&&o.value&&f.value<4&&(n=!1),n})),g=(0,s.EW)((()=>{let e=t.limit;return d.value<=t.limit?e=d.value:t.modelValue<t.limit-1&&t.limit>$p?((!a.value||c.value)&&(e=t.limit-(o.value?0:1)),e=Math.min(e,t.limit)):d.value-t.modelValue+2<t.limit&&t.limit>$p?(!a.value||o.value)&&(e=t.limit-(c.value?0:1)):t.limit>$p&&(e=t.limit-(a.value?0:2)),e})),m=(0,s.EW)((()=>{const e=d.value-g.value;let n=!1;t.modelValue<t.limit-1&&t.limit>$p?(!a.value||c.value)&&(n=!0):t.limit>$p&&(n=!(a.value&&!c.value)),f.value>e&&(n=!1);const i=f.value+g.value-1;return n&&c.value&&i>d.value-3&&(n=!1),n})),v=(0,r.Kh)({pageSize:ng(t.perPage),totalRows:ig(t.totalRows),numberOfPages:d.value}),y=(n,i)=>{if(i===t.modelValue)return;const{target:r}=n,s=new Fc("page-click",{cancelable:!0,target:r});e("page-click",s,i),!s.defaultPrevented&&e("update:modelValue",i)},w=(0,s.EW)((()=>t.size?`pagination-${t.size}`:"")),_=(0,s.EW)((()=>u.value?"b-pagination-pills":""));(0,s.wB)((()=>t.modelValue),(n=>{const i=rg(n,d.value);i!==t.modelValue&&e("update:modelValue",i)})),(0,s.wB)(v,((n,i)=>{null!=n&&(i.pageSize!==n.pageSize&&i.totalRows===n.totalRows||i.numberOfPages!==n.numberOfPages&&t.modelValue>i.numberOfPages)&&e("update:modelValue",1)}));const b=(0,s.EW)((()=>{const t=[];for(let e=0;e<g.value;e++)t.push({number:f.value+e,classes:null});return t}));return()=>{const e=[],r=b.value.map((t=>t.number)),a=e=>e===t.modelValue,u=t.modelValue<1,h="fill"===t.align,f=(e,r,o,l,c,A)=>{const f=i.value||a(A)||u||e<1||e>d.value,p=e<1?1:e>d.value?d.value:e,g={disabled:f,page:p,index:p-1},m=Du(o,g,n)||l||"";return(0,s.h)("li",{class:["page-item",{disabled:f,"flex-fill":h,"d-flex":h&&!f},c]},(0,s.h)(f?"span":"button",{class:["page-link",{"flex-grow-1":!f&&h}],"aria-label":r,"aria-controls":t.ariaControls||null,"aria-disabled":f?"true":null,role:"menuitem",type:f?null:"button",tabindex:f?null:"-1",onClick:t=>{f||y(t,p)}},m))},g=e=>(0,s.h)("li",{class:["page-item","disabled","bv-d-xs-down-none",h?"flex-fill":"",t.ellipsisClass],role:"separator",key:"ellipsis-"+(e?"last":"first")},[(0,s.h)("span",{class:["page-link"]},Du(Xp,{},n)||t.ellipsisText||"...")]),v=(e,r)=>{const o=a(e.number)&&!u,l=i.value?null:o||u&&0===r?"0":"-1",c={active:o,disabled:i.value,page:e.number,index:e.number-1,content:e.number},A=Du(tg,c,n)||e.number,d=(0,s.h)(i.value?"span":"button",{class:["page-link",{"flex-grow-1":!i.value&&h}],"aria-controls":t.ariaControls||null,"aria-disabled":i.value?"true":null,"aria-label":t.labelPage?`${t.labelPage} ${e.number}`:null,role:"menuitemradio",type:i.value?null:"button",tabindex:l,onClick:t=>{i.value||y(t,e.number)}},A);return(0,s.h)("li",{class:["page-item",{disabled:i.value,active:o,"flex-fill":h,"d-flex":h&&!i.value},t.pageClass],role:"presentation",key:`page-${e.number}`},d)};if(!l.value&&!o.value){const n=f(1,t.labelFirstPage,Yp,t.firstText,t.firstClass,1);e.push(n)}const x=f(t.modelValue-1,t.labelFirstPage,eg,t.prevText,t.prevClass,1);e.push(x),o.value&&1!==r[0]&&e.push(v({number:1},0)),p.value&&e.push(g(!1)),b.value.forEach(((t,n)=>{const i=p.value&&o.value&&1!==r[0]?1:0;e.push(v(t,n+i))})),m.value&&e.push(g(!0)),c.value&&r[r.length-1]!==d.value&&e.push(v({number:d.value},-1));const E=f(t.modelValue+1,t.labelNextPage,Jp,t.nextText,t.nextClass,d.value);if(e.push(E),!c.value&&!l.value){const n=f(d.value,t.labelLastPage,Zp,t.lastText,t.lastClass,d.value);e.push(n)}return(0,s.h)("ul",{class:["pagination",w.value,A.value,_.value],role:"menubar","aria-disabled":i.value,"aria-label":t.ariaLabel||null},e)}}}),og=(0,s.pM)({__name:"BPlaceholder",props:{tag:{default:"span"},width:null,cols:null,variant:null,size:null,animation:null},setup(t){const e=t,n=(0,s.EW)((()=>void 0===e.width?void 0:"number"==typeof e.width?e.width.toString():e.width.includes("%")?e.width.replaceAll("%",""):e.width)),i=(0,s.EW)((()=>void 0===e.cols?void 0:"number"==typeof e.cols?e.cols.toString():e.cols)),a=(0,s.EW)((()=>({[`col-${i.value}`]:void 0!==i.value&&void 0===n.value,[`bg-${e.variant}`]:void 0!==e.variant,[`placeholder-${e.size}`]:void 0!==e.size,[`placeholder-${e.animation}`]:void 0!==e.animation}))),l=(0,s.EW)((()=>void 0===n.value?void 0:`width: ${n.value}%;`));return(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)(["placeholder",(0,r.R1)(a)]),style:(0,o.Tr)((0,r.R1)(l))},null,8,["class","style"]))}}),ag=(0,s.pM)({__name:"BPlaceholderButton",props:{tag:{default:"div"},width:null,cols:null,variant:{default:"primary"},animation:null},setup(t){const e=t,n=(0,s.EW)((()=>["btn",`btn-${e.variant}`,"disabled"])),i=(0,s.EW)((()=>({animation:e.animation,width:e.width,cols:e.cols,tag:e.tag})));return(t,e)=>((0,s.uX)(),(0,s.Wv)(og,(0,s.v6)({class:(0,r.R1)(n)},(0,r.R1)(i)),null,16,["class"]))}}),lg=(0,s.pM)({__name:"BPlaceholderCard",props:{noHeader:{default:!1},headerWidth:{default:100},headerVariant:null,headerAnimation:null,headerSize:null,noFooter:{default:!1},footerWidth:{default:100},footerVariant:null,footerAnimation:null,footerSize:null,animation:null,size:null,variant:null,noButton:{default:!1},imgBottom:{default:!1},imgSrc:null,imgBlankColor:{default:"#868e96"},imgHeight:{default:100},noImg:{default:!1}},setup(t){const e=t,n=$u((0,r.lW)(e,"noButton")),i=$u((0,r.lW)(e,"noHeader")),a=$u((0,r.lW)(e,"noFooter")),l=$u((0,r.lW)(e,"noImg")),c=(0,s.EW)((()=>({width:e.headerWidth,variant:e.headerVariant,animation:e.headerAnimation,size:e.headerSize}))),u=(0,s.EW)((()=>({width:e.footerWidth,animation:e.footerAnimation,size:n.value?e.footerSize:void 0,variant:e.footerVariant}))),h=(0,s.EW)((()=>({blank:!e.imgSrc,blankColor:e.imgBlankColor,height:e.imgSrc?void 0:e.imgHeight,src:e.imgSrc,top:!e.imgBottom,bottom:e.imgBottom})));return(e,A)=>((0,s.uX)(),(0,s.Wv)(RA,{"img-bottom":t.imgBottom},(0,s.eX)({default:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.bF)(og,{cols:"7"}),(0,s.bF)(og,{cols:"4"}),(0,s.bF)(og,{cols:"4"}),(0,s.bF)(og,{cols:"6"}),(0,s.bF)(og,{cols:"8"})]))])),_:2},[(0,r.R1)(l)?void 0:{name:"img",fn:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"img",{},(()=>[(0,s.bF)(EA,(0,o._B)((0,s.Ng)((0,r.R1)(h))),null,16)]))])),key:"0"},(0,r.R1)(i)?void 0:{name:"header",fn:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"header",{},(()=>[(0,s.bF)(og,(0,o._B)((0,s.Ng)((0,r.R1)(c))),null,16)]))])),key:"1"},(0,r.R1)(a)?void 0:{name:"footer",fn:(0,s.k6)((()=>[(0,s.RG)(e.$slots,"footer",{},(()=>[(0,r.R1)(n)?((0,s.uX)(),(0,s.Wv)(og,(0,o._B)((0,s.v6)({key:1},(0,r.R1)(u))),null,16)):((0,s.uX)(),(0,s.Wv)(ag,(0,o._B)((0,s.v6)({key:0},(0,r.R1)(u))),null,16))]))])),key:"2"}]),1032,["img-bottom"]))}}),cg=(0,s.pM)({__name:"BTableSimple",props:{bordered:{default:!1},borderless:{default:!1},borderVariant:null,captionTop:{default:!1},dark:{default:!1},hover:{default:!1},responsive:{type:[Boolean,String],default:!1},stacked:{type:[Boolean,String],default:!1},striped:{default:!1},small:{default:!1},tableClass:null,tableVariant:null,stickyHeader:{default:!1}},setup(t){const e=t,n=$u((0,r.lW)(e,"captionTop")),i=$u((0,r.lW)(e,"borderless")),a=$u((0,r.lW)(e,"bordered")),l=$u((0,r.lW)(e,"dark")),c=$u((0,r.lW)(e,"hover")),u=$u((0,r.lW)(e,"small")),h=$u((0,r.lW)(e,"striped")),A=$u((0,r.lW)(e,"stickyHeader")),d=(0,s.EW)((()=>["table","b-table",{"table-bordered":a.value,"table-borderless":i.value,[`border-${e.borderVariant}`]:void 0!==e.borderVariant,"caption-top":n.value,"table-dark":l.value,"table-hover":c.value,"b-table-stacked":"boolean"==typeof e.stacked&&e.stacked,[`b-table-stacked-${e.stacked}`]:"string"==typeof e.stacked,"table-striped":h.value,"table-sm":u.value,[`table-${e.tableVariant}`]:void 0!==e.tableVariant},e.tableClass])),f=(0,s.EW)((()=>[{"table-responsive":!0===e.responsive,[`table-responsive-${e.responsive}`]:"string"==typeof e.responsive,"b-table-sticky-header":A.value}]));return(e,n)=>t.responsive?((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,o.C4)((0,r.R1)(f))},[(0,s.Lk)("table",{role:"table",class:(0,o.C4)((0,r.R1)(d))},[(0,s.RG)(e.$slots,"default")],2)],2)):((0,s.uX)(),(0,s.CE)("table",{key:0,role:"table",class:(0,o.C4)((0,r.R1)(d))},[(0,s.RG)(e.$slots,"default")],2))}}),ug=(0,s.pM)({__name:"BPlaceholderTable",props:{rows:{default:3},columns:{default:5},cellWidth:{default:100},size:null,animation:null,variant:null,headerColumns:null,hideHeader:{default:!1},headerCellWidth:{default:100},headerSize:null,headerAnimation:null,headerVariant:null,footerColumns:null,showFooter:{default:!1},footerCellWidth:{default:100},footerSize:null,footerAnimation:null,footerVariant:null},setup(t){const e=t,n=(0,s.EW)((()=>"string"==typeof e.columns?Qu(e.columns,5):e.columns)),i=(0,s.EW)((()=>"string"==typeof e.rows?Qu(e.rows,3):e.rows)),a=(0,s.EW)((()=>void 0===e.headerColumns?n.value:"string"==typeof e.headerColumns?Qu(e.headerColumns,n.value):e.headerColumns)),l=(0,s.EW)((()=>void 0===e.footerColumns?n.value:"string"==typeof e.footerColumns?Qu(e.footerColumns,n.value):e.footerColumns)),c=(0,s.EW)((()=>({size:e.size,variant:e.variant,animation:e.animation,width:e.cellWidth}))),u=(0,s.EW)((()=>({size:e.headerSize,variant:e.headerVariant,animation:e.headerAnimation,width:e.headerCellWidth}))),h=(0,s.EW)((()=>({size:e.footerSize,variant:e.footerVariant,animation:e.footerAnimation,width:e.footerCellWidth}))),A=$u((0,r.lW)(e,"hideHeader")),d=$u((0,r.lW)(e,"showFooter"));return(t,e)=>((0,s.uX)(),(0,s.Wv)(cg,null,{default:(0,s.k6)((()=>[(0,r.R1)(A)?(0,s.Q3)("",!0):(0,s.RG)(t.$slots,"thead",{key:0},(()=>[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(a),((t,e)=>((0,s.uX)(),(0,s.CE)("th",{key:e},[(0,s.bF)(og,(0,o._B)((0,s.Ng)((0,r.R1)(u))),null,16)])))),128))])])])),(0,s.RG)(t.$slots,"default",{},(()=>[(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(i),((t,e)=>((0,s.uX)(),(0,s.CE)("tr",{key:e},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(n),((t,e)=>((0,s.uX)(),(0,s.CE)("td",{key:e},[(0,s.bF)(og,(0,o._B)((0,s.Ng)((0,r.R1)(c))),null,16)])))),128))])))),128))])])),(0,r.R1)(d)?(0,s.RG)(t.$slots,"tfoot",{key:1},(()=>[(0,s.Lk)("tfoot",null,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(l),((t,e)=>((0,s.uX)(),(0,s.CE)("th",{key:e},[(0,s.bF)(og,(0,o._B)((0,s.Ng)((0,r.R1)(h))),null,16)])))),128))])])])):(0,s.Q3)("",!0)])),_:3}))}}),hg=(0,s.pM)({__name:"BPlaceholderWrapper",props:{loading:{default:!1}},setup(t){const e=$u((0,r.lW)(t,"loading"));return(t,n)=>(0,r.R1)(e)?(0,s.RG)(t.$slots,"loading",{key:0}):(0,s.RG)(t.$slots,"default",{key:1})}}),Ag=(0,s.pM)({props:{container:{type:[String,Object],default:"body"},content:{type:String},id:{type:String},customClass:{type:String,default:""},noninteractive:{type:[Boolean,String],default:!1},placement:{type:String,default:"right"},target:{type:[String,Object],default:void 0},title:{type:String},delay:{type:[Number,Object],default:0},triggers:{type:String,default:"click"},show:{type:[Boolean,String],default:!1},variant:{type:String,default:void 0},html:{type:[Boolean,String],default:!0},sanitize:{type:[Boolean,String],default:!1},offset:{type:String,default:"0"}},emits:["show","shown","hide","hidden","inserted"],setup(t,{emit:e,slots:n}){$u((0,r.lW)(t,"noninteractive"));const i=$u((0,r.lW)(t,"show")),o=$u((0,r.lW)(t,"html")),a=$u((0,r.lW)(t,"sanitize")),l=(0,r.KR)(),c=(0,r.KR)(),u=(0,r.KR)(),h=(0,r.KR)(),A=(0,r.KR)(),d=(0,s.EW)((()=>({[`b-popover-${t.variant}`]:void 0!==t.variant}))),f=t=>"string"==typeof t||t instanceof HTMLElement?t:typeof t<"u"?t.$el:void 0,p=t=>{if(t){if("string"==typeof t){const e=document.getElementById(t);return e||void 0}return t}},g=[{event:"show.bs.popover",handler:()=>e("show")},{event:"shown.bs.popover",handler:()=>e("shown")},{event:"hide.bs.popover",handler:()=>e("hide")},{event:"hidden.bs.popover",handler:()=>e("hidden")},{event:"inserted.bs.popover",handler:()=>e("inserted")}],m=t=>{for(const e of g)t.addEventListener(e.event,e.handler)},v=t=>{for(const e of g)t.removeEventListener(e.event,e.handler)},y=e=>{c.value=p(f(e)),c.value&&(m(c.value),u.value=new jo(c.value,{customClass:t.customClass,container:f(t.container),trigger:t.triggers,placement:t.placement,title:t.title||n.title?h.value:"",content:A.value,html:o.value,delay:t.delay,sanitize:a.value,offset:t.offset}))};return(0,s.wB)((()=>t.target),(t=>{var e;null==(e=u.value)||e.dispose(),c.value instanceof HTMLElement&&v(c.value),y(t)})),(0,s.wB)((()=>i.value),((t,e)=>{var n,i;t!==e&&(t?null==(n=u.value)||n.show():null==(i=u.value)||i.hide())})),(0,s.sV)((()=>{var e,n,r;(0,s.dY)((()=>{y(t.target)})),null==(n=null==(e=l.value)?void 0:e.parentNode)||n.removeChild(l.value),i.value&&(null==(r=u.value)||r.show())})),(0,s.xo)((()=>{var t;null==(t=u.value)||t.dispose(),c.value instanceof HTMLElement&&v(c.value)})),{element:l,titleRef:h,contentRef:A,computedClasses:d}}}),dg=["id"],fg={ref:"titleRef"},pg={ref:"contentRef"};function gg(t,e,n,i,r,a){return(0,s.uX)(),(0,s.CE)("div",{id:t.id,ref:"element",class:(0,o.C4)(["popover b-popover",t.computedClasses]),role:"tooltip",tabindex:"-1"},[(0,s.Lk)("div",fg,[(0,s.RG)(t.$slots,"title",{},(()=>[(0,s.eW)((0,o.v_)(t.title),1)]))],512),(0,s.Lk)("div",pg,[(0,s.RG)(t.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)(t.content),1)]))],512)],10,dg)}const mg=qh(Ag,[["render",gg]]),vg=["aria-valuenow","aria-valuemax"],yg=(0,s.pM)({__name:"BProgressBar",props:{animated:{default:!1},label:null,labelHtml:null,max:null,precision:{default:0},showProgress:{default:!1},showValue:{default:!1},striped:{default:!1},value:{default:0},variant:null},setup(t){const e=t,n=(0,s.WQ)(wg),i=$u((0,r.lW)(e,"animated")),a=$u((0,r.lW)(e,"showProgress")),l=$u((0,r.lW)(e,"showValue")),c=$u((0,r.lW)(e,"striped")),u=(0,s.EW)((()=>({"progress-bar-animated":i.value||(null==n?void 0:n.animated),"progress-bar-striped":c.value||(null==n?void 0:n.striped)||i.value||(null==n?void 0:n.animated),[`bg-${e.variant}`]:void 0!==e.variant}))),h=(0,s.EW)((()=>"number"==typeof e.precision?e.precision:Number.parseFloat(e.precision))),A=(0,s.EW)((()=>"number"==typeof e.value?e.value:Number.parseFloat(e.value))),d=(0,s.EW)((()=>"number"==typeof e.max?e.max:void 0===e.max?void 0:Number.parseFloat(e.max))),f=(0,s.EW)((()=>void 0!==e.labelHtml?e.labelHtml:l.value||(null==n?void 0:n.showValue)?A.value.toFixed(h.value):a.value||(null==n?void 0:n.showProgress)?(100*A.value/(d.value||100)).toFixed(h.value):void 0!==e.label?e.label:"")),p=(0,s.EW)((()=>null!=n&&n.max?100*A.value/("number"==typeof n.max?n.max:Number.parseInt(n.max))+"%":e.max?100*A.value/("number"==typeof e.max?e.max:Number.parseInt(e.max))+"%":"string"==typeof e.value?e.value:`${e.value}%`));return(e,n)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)(["progress-bar",(0,r.R1)(u)]),role:"progressbar","aria-valuenow":t.value,"aria-valuemin":"0","aria-valuemax":t.max,style:(0,o.Tr)({width:(0,r.R1)(p)})},[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.eW)((0,o.v_)((0,r.R1)(f)),1)]))],14,vg))}}),wg=Symbol(),_g=(0,s.pM)({__name:"BProgress",props:{variant:null,max:null,height:null,animated:{default:!1},precision:{default:0},showProgress:{default:!1},showValue:{default:!1},striped:{default:!1},value:{default:0}},setup(t){const e=t,n=$u((0,r.lW)(e,"animated")),i=$u((0,r.lW)(e,"showProgress")),a=$u((0,r.lW)(e,"showValue")),l=$u((0,r.lW)(e,"striped")),c=(0,s.EW)((()=>({animated:e.animated,max:e.max,precision:e.precision,showProgress:e.showProgress,showValue:e.showValue,striped:e.striped,value:e.value,variant:e.variant})));return(0,s.Gt)(wg,{animated:n.value,max:e.max,showProgress:i.value,showValue:a.value,striped:l.value}),(e,n)=>((0,s.uX)(),(0,s.CE)("div",{class:"progress",style:(0,o.Tr)({height:t.height})},[(0,s.RG)(e.$slots,"default",{},(()=>[(0,s.bF)(yg,(0,o._B)((0,s.Ng)((0,r.R1)(c))),null,16)]))],4))}}),bg=Ru("cols",[""],{type:[String,Number],default:null}),xg=(0,s.pM)({name:"BRow",props:{tag:{type:String,default:"div"},gutterX:{type:String,default:null},gutterY:{type:String,default:null},noGutters:{type:[Boolean,String],default:!1},alignV:{type:String,default:null},alignH:{type:String,default:null},alignContent:{type:String,default:null},...bg},setup(t){const e=$u((0,r.lW)(t,"noGutters")),n=Ic((0,r.lW)(t,"alignH")),i=(0,s.EW)((()=>Mu(t,bg,"cols","row-cols")));return{computedClasses:(0,s.EW)((()=>[i.value,{[`gx-${t.gutterX}`]:null!==t.gutterX,[`gy-${t.gutterY}`]:null!==t.gutterY,"g-0":e.value,[`align-items-${t.alignV}`]:null!==t.alignV,[n.value]:null!==t.alignH,[`align-content-${t.alignContent}`]:null!==t.alignContent}]))}}});function Eg(t,e,n,i,r,a){return(0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{class:(0,o.C4)(["row",t.computedClasses])},{default:(0,s.k6)((()=>[(0,s.RG)(t.$slots,"default")])),_:3},8,["class"])}const Cg=qh(xg,[["render",Eg]]),Sg=(0,s.pM)({__name:"BSkeleton",props:{height:null,width:null,size:null,animation:{default:"wave"},type:{default:"text"},variant:null},setup(t){const e=t,n=(0,s.EW)((()=>[`b-skeleton-${e.type}`,{[`b-skeleton-animate-${e.animation}`]:"boolean"!=typeof e.animation&&e.animation,[`bg-${e.variant}`]:void 0!==e.variant}])),i=(0,s.EW)((()=>({width:e.size||e.width,height:e.size||e.height})));return(t,e)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)(["b-skeleton",(0,r.R1)(n)]),style:(0,o.Tr)((0,r.R1)(i))},null,6))}}),Bg=(0,s.pM)({__name:"BSkeletonIcon",props:{animation:{default:"wave"}},setup(t){const e=t,n=(0,s.EW)((()=>[`b-skeleton-animate-${e.animation}`]));return(t,e)=>((0,s.uX)(),(0,s.CE)("div",{class:(0,o.C4)(["b-skeleton-icon-wrapper position-relative d-inline-block overflow-hidden",(0,r.R1)(n)])},[(0,s.RG)(t.$slots,"default")],2))}}),Tg={key:0},Ig={key:1},Fg=(0,s.pM)({__name:"BSkeletonTable",props:{animation:{default:"wave"},columns:{default:5},hideHeader:{default:!1},rows:{default:3},showFooter:{default:!1},tableProps:null},setup(t){const e=t,n=$u((0,r.lW)(e,"hideHeader")),i=$u((0,r.lW)(e,"showFooter"));return(e,a)=>((0,s.uX)(),(0,s.Wv)(cg,(0,o._B)((0,s.Ng)(t.tableProps)),{default:(0,s.k6)((()=>[(0,r.R1)(n)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("thead",Tg,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.columns,((t,e)=>((0,s.uX)(),(0,s.CE)("th",{key:e},[(0,s.bF)(Sg)])))),128))])])),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.rows,((e,n)=>((0,s.uX)(),(0,s.CE)("tr",{key:n},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.columns,((t,e)=>((0,s.uX)(),(0,s.CE)("td",{key:e},[(0,s.bF)(Sg,{width:"75%"})])))),128))])))),128))]),(0,r.R1)(i)?((0,s.uX)(),(0,s.CE)("tfoot",Ig,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(t.columns,((t,e)=>((0,s.uX)(),(0,s.CE)("th",{key:e},[(0,s.bF)(Sg)])))),128))])])):(0,s.Q3)("",!0)])),_:1},16))}}),Lg=(0,s.pM)({__name:"BSkeletonWrapper",props:{loading:{default:!1}},setup(t){const e=$u((0,r.lW)(t,"loading"));return(t,n)=>(0,r.R1)(e)?(0,s.RG)(t.$slots,"loading",{key:0}):(0,s.RG)(t.$slots,"default",{key:1})}}),Rg=["ar","az","ckb","fa","he","ks","lrc","mzn","ps","sd","te","ug","ur","yi"].map((t=>t.toLowerCase())),Mg=t=>{const e=jc(t).toLowerCase().replace(Vc,"").split("-"),n=e.slice(0,2).join("-"),i=e[0];return Rg.includes(n)||Rg.includes(i)},Pg=t=>eu?Rc(t)?t:{capture:!!t||!1}:!!(Rc(t)?t.capture:t),Ng=(t,e,n,i)=>{t&&t.addEventListener&&t.addEventListener(e,n,Pg(i))},Og=(t,e,n,i)=>{t&&t.removeEventListener&&t.removeEventListener(e,n,i)},kg=(t,e)=>{(t?Ng:Og)(...e)},Dg=(t,{preventDefault:e=!0,propagation:n=!0,immediatePropagation:i=!1}={})=>{e&&t.preventDefault(),n&&t.stopPropagation(),i&&t.stopImmediatePropagation()},Ug="ArrowDown",Qg="End",Gg="Home",Hg="PageDown",Vg="PageUp",jg="ArrowUp",Wg=1,zg=100,Kg=1,qg=500,$g=100,Xg=10,Yg=4,Zg=[jg,Ug,Gg,Qg,Vg,Hg],Jg=(0,s.pM)({props:{ariaControls:{type:String,required:!1},ariaLabel:{type:String,required:!1},labelIncrement:{type:String,default:"Increment"},labelDecrement:{type:String,default:"Decrement"},modelValue:{type:Number,default:null},name:{type:String,default:"BFormSpinbutton"},disabled:{type:[Boolean,String],default:!1},placeholder:{type:String,required:!1},locale:{type:String,default:"locale"},form:{type:String,required:!1},inline:{type:Boolean,default:!1},size:{type:String,required:!1},formatterFn:{type:Function},readonly:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},repeatDelay:{type:[String,Number],default:qg},repeatInterval:{type:[String,Number],default:$g},repeatStepMultiplier:{type:[String,Number],default:Yg},repeatThreshold:{type:[String,Number],default:Xg},required:{type:[Boolean,String],default:!1},step:{type:[String,Number],default:Kg},min:{type:[String,Number],default:Wg},max:{type:[String,Number],default:zg},wrap:{type:Boolean,default:!1},state:{type:[Boolean,String],default:null}},emits:["update:modelValue","change"],setup(t,{emit:e}){const n=(0,r.KR)(!1),i=(0,s.EW)((()=>1)),o=()=>{e("change",l.value)},a=(0,r.KR)(null),l=(0,s.EW)({get(){return Nc(t.modelValue)?a.value:t.modelValue},set(n){Nc(t.modelValue)?a.value=n:e("update:modelValue",n)}});let c,u,h=!1;const A=(0,s.EW)((()=>Gu(t.step,Kg))),d=(0,s.EW)((()=>Gu(t.min,Wg))),f=(0,s.EW)((()=>{const e=Gu(t.max,zg),n=A.value,i=d.value;return Math.floor((e-i)/n)*n+i})),p=(0,s.EW)((()=>{const e=Uu(t.repeatDelay,0);return e>0?e:qg})),g=(0,s.EW)((()=>{const e=Uu(t.repeatInterval,0);return e>0?e:$g})),m=(0,s.EW)((()=>Math.max(Uu(t.repeatThreshold,Xg),1))),v=(0,s.EW)((()=>Math.max(Uu(t.repeatStepMultiplier,Yg),1))),y=(0,s.EW)((()=>{const t=A.value;return Math.floor(t)===t?0:(t.toString().split(".")[1]||"").length})),w=(0,s.EW)((()=>Math.pow(10,y.value||0))),_=(0,s.EW)((()=>{const{value:t}=l;return null===t?"":t.toFixed(y.value)})),b=(0,s.EW)((()=>{const e=[t.locale];return new Intl.NumberFormat(e).resolvedOptions().locale})),x=(0,s.EW)((()=>Mg(b.value))),E=()=>{const t=y.value;return new Intl.NumberFormat(b.value,{style:"decimal",useGrouping:!1,minimumIntegerDigits:1,minimumFractionDigits:t,maximumFractionDigits:t,notation:"standard"}).format},C=(0,s.EW)((()=>t.formatterFn?t.formatterFn:E())),S=(0,s.EW)((()=>({role:"group",lang:b.value,tabindex:t.disabled?null:"-1",title:t.ariaLabel}))),B=(0,s.EW)((()=>!Nc(t.modelValue)||!Nc(a.value))),T=(0,s.EW)((()=>({dir:x.value,spinId:i.value,tabindex:t.disabled?null:"0",role:"spinbutton","aria-live":"off","aria-label":t.ariaLabel||null,"aria-controls":t.ariaControls||null,"aria-invalid":!1===t.state||!B.value&&t.required?"true":null,"aria-required":t.required?"true":null,"aria-valuemin":d.value,"aria-valuemax":f.value,"aria-valuenow":Nc(l.value)?null:l.value,"aria-valuetext":Nc(l.value)?null:C.value(l.value)}))),I=e=>{let{value:n}=l;if(!t.disabled&&!Nc(n)){const i=A.value*e,r=d.value,s=f.value,o=w.value,{wrap:a}=t;n=Math.round((n-r)/i)*i+r+i,n=Math.round(n*o)/o,l.value=n>s?a?r:s:n<r?a?s:r:n}},F=(t=1)=>{Nc(l.value)?l.value=d.value:I(1*t)},L=(e=1)=>{Nc(l.value)?l.value=t.wrap?f.value:d.value:I(-1*e)},R=e=>{const{code:n,altKey:i,ctrlKey:r,metaKey:s}=e;if(!(t.disabled||t.readonly||i||r||s)&&Zg.includes(n)){if(Dg(e,{propagation:!1}),h)return;D(),[jg,Ug].includes(n)?(h=!0,n===jg?P(e,F):n===Ug&&P(e,L)):n===Vg?F(v.value):n===Hg?L(v.value):n===Gg?l.value=d.value:n===Qg&&(l.value=f.value)}},M=e=>{const{code:n,altKey:i,ctrlKey:r,metaKey:s}=e;t.disabled||t.readonly||i||r||s||Zg.includes(n)&&(Dg(e,{propagation:!1}),D(),h=!1,o())},P=(e,n)=>{const{type:i}=e||{};if(!t.disabled&&!t.readonly){if(N(e)&&"mousedown"===i&&e.button)return;D(),n(1);const t=m.value,r=v.value,s=p.value,o=g.value;c=setTimeout((()=>{let e=0;u=setInterval((()=>{n(e<t?1:r),e++}),o)}),s)}};function N(t){return"mouseup"===t.type||"mousedown"===t.type}const O=t=>{N(t)&&"mouseup"===t.type&&t.button||(Dg(t,{propagation:!1}),D(),k(!1),o())},k=t=>{try{kg(t,[document.body,"mouseup",O,!1]),kg(t,[document.body,"touchend",O,!1])}catch{return 0}},D=()=>{clearTimeout(c),clearInterval(u),c=void 0,u=void 0},U=(e,r,o,a,l,c,u)=>{const h=(0,s.h)(o,{props:{scale:n.value?1.5:1.25},attrs:{"aria-hidden":"true"}}),A={hasFocus:n.value},d=n=>{!t.disabled&&!t.readonly&&(Dg(n,{propagation:!1}),k(!0),P(n,e))};return(0,s.h)("button",{class:[{"py-0":!t.vertical},"btn","btn-sm","border-0","rounded-0"],tabindex:"-1",type:"button",disabled:t.disabled||t.readonly||c,"aria-disabled":t.disabled||t.readonly||c?"true":null,"aria-controls":i.value,"aria-label":r||null,"aria-keyshortcuts":l||null,onmousedown:d,ontouchstart:d},[Du(u,A)||h])};return()=>{const e=U(F,t.labelIncrement,(0,s.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-plus",viewBox:"0 0 16 16"},(0,s.h)("path",{d:"M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4z"})),"inc","ArrowUp",!1,"increment"),i=U(L,t.labelDecrement,(0,s.h)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",fill:"currentColor",class:"bi bi-dash",viewBox:"0 0 16 16"},(0,s.h)("path",{d:"M4 8a.5.5 0 0 1 .5-.5h7a.5.5 0 0 1 0 1h-7A.5.5 0 0 1 4 8z"})),"dec","ArrowDown",!1,"decrement"),r=[];t.name&&!t.disabled&&r.push((0,s.h)("input",{type:"hidden",name:t.name,form:t.form||null,value:_.value,key:"hidden"}));const o=(0,s.h)("output",{class:[{"d-flex":t.vertical},{"align-self-center":!t.vertical},{"align-items-center":t.vertical},{"border-top":t.vertical},{"border-bottom":t.vertical},{"border-start":!t.vertical},{"border-end":!t.vertical},"flex-grow-1"],...T.value,key:"output"},[(0,s.h)("bdi",B.value?C.value(l.value):t.placeholder||"")]);return(0,s.h)("div",{class:["b-form-spinbutton form-control",{disabled:t.disabled},{readonly:t.readonly},{focus:n},{"d-inline-flex":t.inline||t.vertical},{"d-flex":!t.inline&&!t.vertical},{"align-items-stretch":!t.vertical},{"flex-column":t.vertical},t.size?`form-control-${t.size}`:null],...S.value,onkeydown:R,onkeyup:M},t.vertical?[e,r,o,i]:[i,r,o,e])}}}),tm=["TD","TH","TR"],em=["a","a *","button","button *","input:not(.disabled):not([disabled])","select:not(.disabled):not([disabled])","textarea:not(.disabled):not([disabled])",'[role="link"]','[role="link"] *','[role="button"]','[role="button"] *',"[tabindex]:not(.disabled):not([disabled])"].join(","),nm=t=>{if(!t||!t.target)return!1;const e=t.target;if("disabled"in e&&e.disabled||-1!==tm.indexOf(e.tagName))return!1;if(Lu(".dropdown-menu",e))return!0;const n="LABEL"===e.tagName?e:Lu("label",e);if(n){const t=xu(n,"for"),e=t?Eu(t):_u("input, select, textarea",n);if(e&&!e.disabled)return!0}return Iu(e,em)},im=()=>{const t=(t,e)=>{const n=[];return null!=t&&t.length||!(null==e?void 0:e.length)?(Array.isArray(t)&&t.forEach((t=>{"string"==typeof t?n.push({key:t,label:Wc(t)}):Rc(t)&&t.key&&"string"==typeof t.key&&n.push({...t})})),n):(Object.keys(e[0]).forEach((t=>n.push({key:t,label:Wc(t)}))),n)},e=(0,r.KR)([]),n=(t,n,i,r)=>(e.value=Vu(n),"isFilterableTable"in r&&!0===r.isFilterableTable.value&&i.filter&&(e.value=o(e.value,i.filter,i.filterable)),"isSortable"in r&&!0===r.isSortable.value&&(e.value=s(t,e.value,{key:i.sortBy,desc:r.sortDescBoolean.value},i.sortCompare)),e.value),i=(0,r.KR)(void 0),s=(t,e,n,i)=>{if(!n||!n.key)return e;const r=n.key;return e.sort(((t,e)=>{if(void 0!==i)return i(t,e,n.key,n.desc);const s=t=>"object"==typeof t?JSON.stringify(t):t;return s(t[r])>s(e[r])?n.desc?-1:1:s(e[r])>s(t[r])?n.desc?1:-1:0}))},o=(t,e,n)=>t.filter((t=>Object.entries(t).filter((t=>{const[i,r]=t;return!(!r||"_"===i[0]||n.length>0&&!n.includes(i))&&("object"==typeof r?JSON.stringify(Object.values(r)):"string"==typeof r?r:r.toString()).toLowerCase().includes(e.toLowerCase())})).length>0));return{normaliseFields:t,mapItems:n,internalItems:e,updateInternalItems:async t=>{try{return e.value=await ju(t),e.value}catch{return}},filterEvent:i,notifyFilteredItems:()=>{i.value&&i.value(e.value)},formatItem:(t,e)=>{const n=t[e.key];return e.formatter&&"function"==typeof e.formatter?e.formatter(n,e.key,t):t[e.key]}}},rm=["title","abbr","onClick"],sm={class:"d-inline-flex flex-nowrap align-items-center gap-1"},om={key:1},am=["onClick","onDblclick","onMouseenter","onMouseleave"],lm={key:0,class:"b-table-stacked-label"},cm=["colspan"],um=["colspan"],hm={class:"d-flex align-items-center justify-content-center gap-2"},Am=(0,s.Lk)("strong",null,"Loading...",-1),dm={key:1,class:"b-table-empty-slot"},fm=["colspan"],pm={key:0},gm=["title","abbr","onClick"],mm={key:1},vm={key:2},ym={key:3},wm=(0,s.pM)({__name:"BTable",props:{align:null,caption:null,captionTop:{default:!1},borderless:{default:!1},bordered:{default:!1},borderVariant:null,dark:{default:!1},fields:{default:()=>[]},footClone:{default:!1},hover:{default:!1},items:{default:()=>[]},provider:null,sortCompare:null,noProvider:null,noProviderPaging:null,noProviderSorting:null,noProviderFiltering:null,responsive:{type:[Boolean,String],default:!1},small:{default:!1},striped:{default:!1},stacked:{type:[Boolean,String],default:!1},labelStacked:{type:Boolean,default:!1},variant:null,sortBy:null,sortDesc:{default:!1},sortInternal:{default:!0},selectable:{default:!1},stickySelect:{default:!1},selectHead:{type:[Boolean,String],default:!0},selectMode:{default:"single"},selectionVariant:{default:"primary"},stickyHeader:{default:!1},busy:{default:!1},showEmpty:{default:!1},perPage:null,currentPage:{default:1},filter:null,filterable:null,emptyText:{default:"There are no records to show"},emptyFilteredText:{default:"There are no records matching your request"}},emits:["headClicked","rowClicked","rowDblClicked","rowHovered","rowUnhovered","rowSelected","rowUnselected","selection","update:busy","update:sortBy","update:sortDesc","sorted","filtered"],setup(t,{expose:e,emit:n}){const i=t,a=(0,s.Ht)(),l=im(),c=$u((0,r.lW)(i,"footClone")),u=$u((0,r.lW)(i,"sortDesc")),h=$u((0,r.lW)(i,"sortInternal")),A=$u((0,r.lW)(i,"selectable")),d=$u((0,r.lW)(i,"stickySelect")),f=$u((0,r.lW)(i,"labelStacked")),p=$u((0,r.lW)(i,"busy")),g=$u((0,r.lW)(i,"showEmpty")),m=$u((0,r.lW)(i,"noProviderPaging")),v=$u((0,r.lW)(i,"noProviderSorting")),y=$u((0,r.lW)(i,"noProviderFiltering")),w=(0,r.KR)(p.value);l.filterEvent.value=async t=>{if(T.value)return void await H();const e=await ju(t);n("filtered",e)};const _=(0,r.KR)(new Set([])),b=(0,s.EW)((()=>_.value.size>0)),x=(0,s.EW)((()=>({[`align-${i.align}`]:void 0!==i.align,"b-table-selectable":A.value,[`b-table-select-${i.selectMode}`]:A.value,"b-table-selecting user-select-none":A.value&&b.value,"b-table-busy":w.value,"b-table-sortable":F.value,"b-table-sort-desc":F.value&&!0===u.value,"b-table-sort-asc":F.value&&!1===u.value}))),E=(0,s.EW)((()=>({bordered:i.bordered,borderless:i.borderless,borderVariant:i.borderVariant,captionTop:i.captionTop,dark:i.dark,hover:i.hover,responsive:i.responsive,striped:i.striped,stacked:i.stacked,small:i.small,tableClass:x.value,tableVariant:i.variant,stickyHeader:i.stickyHeader}))),C=(0,s.EW)((()=>l.normaliseFields(i.fields,i.items))),S=(0,s.EW)((()=>C.value.length+(A.value?1:0))),B=(0,s.EW)((()=>void 0!==i.filter&&""!==i.filter)),T=(0,s.EW)((()=>void 0!==i.provider)),I=(0,s.EW)((()=>A.value&&(!!i.selectHead||void 0!==a.selectHead))),F=(0,s.EW)((()=>i.fields.filter((t=>"string"!=typeof t&&t.sortable)).length>0)),L=(0,s.EW)((()=>F.value&&!0===h.value)),R=(0,s.EW)((()=>{const t=T.value?l.internalItems.value:L.value?l.mapItems(i.fields,i.items,i,{isSortable:F,isFilterableTable:B,sortDescBoolean:u}):i.items;if(void 0!==i.perPage){const e=(i.currentPage-1)*i.perPage;return t.splice(e,i.perPage)}return t})),M=t=>"string"==typeof t?zc(t):void 0!==t.label?t.label:"string"==typeof t.key?zc(t.key):t.key,P=(t,e,i=!1)=>{const r="string"==typeof t?t:t.key;n("headClicked",r,t,e,i),U(t)},N=(t,e,i)=>{n("rowClicked",t,e,i),G(t,e,i.shiftKey)},O=(t,e,i)=>n("rowDblClicked",t,e,i),k=(t,e,i)=>n("rowHovered",t,e,i),D=(t,e,i)=>n("rowUnhovered",t,e,i),U=t=>{if(!F.value)return;const e="string"==typeof t?t:t.key,r="string"!=typeof t&&t.sortable;if(!0===F.value&&!0===r){const t=!u.value;e!==i.sortBy&&n("update:sortBy",e),n("update:sortDesc",t),n("sorted",e,t)}},Q=()=>{!A.value||n("selection",Array.from(_.value))},G=(t,e,r=!1)=>{if(A.value){if(_.value.has(t))_.value.delete(t),n("rowUnselected",t);else if("single"===i.selectMode&&_.value.size>0&&(_.value.forEach((t=>n("rowUnselected",t))),_.value.clear()),"range"===i.selectMode&&_.value.size>0&&r){const t=Array.from(_.value).pop(),i=R.value.findIndex((e=>e===t)),r=Math.min(i,e),s=Math.max(i,e);R.value.slice(r,s+1).forEach((t=>{_.value.has(t)||(_.value.add(t),n("rowSelected",t))}))}else _.value.add(t),n("rowSelected",t);Q()}},H=async()=>{if(!T.value||!i.provider||w.value)return;w.value=!0;const t=new Proxy({currentPage:i.currentPage,filter:i.filter,sortBy:i.sortBy,sortDesc:i.sortDesc,perPage:i.perPage},{get(t,e){return e in t?t[e]:void 0},set(){return console.error("BTable provider context is a read-only object."),!0}}),e=i.provider(t,l.updateInternalItems);if(void 0!==e){if(e instanceof Promise)try{const t=await e;return Array.isArray(t)?await l.updateInternalItems(t):void 0}finally{w.value&&(w.value=!1)}try{return await l.updateInternalItems(e)}finally{w.value&&(w.value=!1)}}},V=t=>{t._showDetails=!t._showDetails},j=t=>[t.class,t.thClass,t.variant?`table-${t.variant}`:void 0,{"b-table-sortable-column":F.value&&t.sortable,"b-table-sticky-column":t.stickyColumn}],W=(t,e)=>[t.class,t.tdClass,t.variant?`table-${t.variant}`:void 0,(null==e?void 0:e._cellVariants)&&(null==e?void 0:e._cellVariants[t.key])?`table-${null==e?void 0:e._cellVariants[t.key]}`:void 0,{"b-table-sticky-column":t.stickyColumn}],z=t=>[t._rowVariant?`table-${t._rowVariant}`:null,t._rowVariant?`table-${t._rowVariant}`:null,A.value&&_.value.has(t)?`selected table-${i.selectionVariant}`:null],K=()=>{if(!A.value)return;const t=_.value.size>0?Array.from(_.value):[];_.value=new Set([...R.value]),_.value.forEach((e=>{t.includes(e)||n("rowSelected",e)})),Q()},q=()=>{!A.value||(_.value.forEach((t=>{n("rowUnselected",t)})),_.value=new Set([]),Q())},$=t=>{if(!A.value)return;const e=R.value[t];!e||_.value.has(e)||(_.value.add(e),n("rowSelected",e),Q())},X=t=>{if(!A.value)return;const e=R.value[t];!e||!_.value.has(e)||(_.value.delete(e),n("rowUnselected",e),Q())},Y=async(t,e,n)=>{if(e===n)return;const r=t=>i.noProvider&&i.noProvider.includes(t),s=!["currentPage","perPage"].includes(t),o=["currentPage","perPage"].includes(t)&&(r("paging")||!0===m.value),a=["filter"].includes(t)&&(r("filtering")||!0===y.value),c=["sortBy","sortDesc"].includes(t)&&(r("sorting")||!0===v.value);o||a||c||(await H(),s&&l.notifyFilteredItems())};return(0,s.wB)((()=>i.filter),((t,e)=>{t===e||T.value||t||ju(i.items).then((t=>n("filtered",t)))})),(0,s.wB)((()=>w.value),(()=>w.value!==p.value&&n("update:busy",w.value))),(0,s.wB)((()=>p.value),(()=>w.value!==p.value&&(w.value=p.value))),(0,s.wB)((()=>i.filter),((t,e)=>Y("filter",t,e))),(0,s.wB)((()=>i.currentPage),((t,e)=>Y("currentPage",t,e))),(0,s.wB)((()=>i.perPage),((t,e)=>Y("perPage",t,e))),(0,s.wB)((()=>i.sortBy),((t,e)=>Y("sortBy",t,e))),(0,s.wB)((()=>i.sortDesc),((t,e)=>Y("sortDesc",t,e))),(0,s.sV)((()=>{T.value&&H()})),e({selectAllRows:K,clearSelected:q,selectRow:$,unselectRow:X}),(e,n)=>((0,s.uX)(),(0,s.Wv)(cg,(0,o._B)((0,s.Ng)((0,r.R1)(E))),{default:(0,s.k6)((()=>{var n;return[(0,s.Lk)("thead",null,[e.$slots["thead-top"]?(0,s.RG)(e.$slots,"thead-top",{key:0}):(0,s.Q3)("",!0),(0,s.Lk)("tr",null,[(0,r.R1)(I)?((0,s.uX)(),(0,s.CE)("th",{key:0,class:(0,o.C4)(["b-table-selection-column",{"b-table-sticky-column":(0,r.R1)(d)}])},[(0,s.RG)(e.$slots,"select-head",{},(()=>[(0,s.eW)((0,o.v_)("boolean"==typeof t.selectHead?"Selected":t.selectHead),1)]))],2)):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(C),(n=>((0,s.uX)(),(0,s.CE)("th",(0,s.v6)({key:n.key,scope:"col",class:j(n),title:n.headerTitle,abbr:n.headerAbbr,style:n.thStyle},n.thAttr,{onClick:t=>P(n,t)}),[(0,s.Lk)("div",sm,[(0,s.RG)(e.$slots,"sort-icon",{field:n,sortBy:t.sortBy,selected:n.key===t.sortBy,isDesc:(0,r.R1)(u),direction:(0,r.R1)(u)?"desc":"asc"},(()=>[(0,r.R1)(F)&&n.sortable?((0,s.uX)(),(0,s.CE)("span",{key:0,class:(0,o.C4)(["b-table-sort-icon",{sorted:n.key===t.sortBy,["sorted-"+((0,r.R1)(u)?"desc":"asc")]:n.key===t.sortBy}])},null,2)):(0,s.Q3)("",!0)])),(0,s.Lk)("div",null,[e.$slots["head("+n.key+")"]||e.$slots["head()"]?(0,s.RG)(e.$slots,e.$slots["head("+n.key+")"]?"head("+n.key+")":"head()",{key:0,label:n.label}):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)((0,o.v_)(M(n)),1)],64))])])],16,rm)))),128))]),e.$slots["thead-sub"]?((0,s.uX)(),(0,s.CE)("tr",om,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(C),(t=>((0,s.uX)(),(0,s.CE)("td",{key:t.key,scope:"col",class:(0,o.C4)([t.class,t.thClass,t.variant?`table-${t.variant}`:""])},[e.$slots["thead-sub"]?(0,s.RG)(e.$slots,"thead-sub",(0,s.v6)({key:0,items:(0,r.R1)(C)},t)):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)((0,o.v_)(t.label),1)],64))],2)))),128))])):(0,s.Q3)("",!0)]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(R),((n,i)=>((0,s.uX)(),(0,s.CE)(s.FK,{key:i},[(0,s.Lk)("tr",{class:(0,o.C4)(z(n)),onClick:t=>!(0,r.R1)(nm)(t)&&N(n,i,t),onDblclick:t=>!(0,r.R1)(nm)(t)&&O(n,i,t),onMouseenter:t=>!(0,r.R1)(nm)(t)&&k(n,i,t),onMouseleave:t=>!(0,r.R1)(nm)(t)&&D(n,i,t)},[(0,r.R1)(I)?((0,s.uX)(),(0,s.CE)("td",{key:0,class:(0,o.C4)(["b-table-selection-column",{"b-table-sticky-column":(0,r.R1)(d)}])},[(0,s.RG)(e.$slots,"select-cell",{},(()=>[(0,s.Lk)("span",{class:(0,o.C4)(_.value.has(n)?"text-primary":"")},"",2)]))],2)):(0,s.Q3)("",!0),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(C),(a=>((0,s.uX)(),(0,s.CE)("td",(0,s.v6)({key:a.key},a.tdAttr,{class:W(a,n)}),[t.stacked&&(0,r.R1)(f)?((0,s.uX)(),(0,s.CE)("label",lm,(0,o.v_)(M(a)),1)):(0,s.Q3)("",!0),e.$slots["cell("+a.key+")"]||e.$slots["cell()"]?(0,s.RG)(e.$slots,e.$slots["cell("+a.key+")"]?"cell("+a.key+")":"cell()",{key:1,value:n[a.key],index:i,item:n,field:a,items:t.items,toggleDetails:()=>V(n),detailsShowing:n._showDetails}):((0,s.uX)(),(0,s.CE)(s.FK,{key:2},[(0,s.eW)((0,o.v_)((0,r.R1)(l).formatItem(n,a)),1)],64))],16)))),128))],42,am),!0===n._showDetails&&e.$slots["row-details"]?((0,s.uX)(),(0,s.CE)("tr",{key:0,class:(0,o.C4)(z(n))},[(0,s.Lk)("td",{colspan:(0,r.R1)(S)},[(0,s.RG)(e.$slots,"row-details",{item:n,toggleDetails:()=>V(n)})],8,cm)],2)):(0,s.Q3)("",!0)],64)))),128)),w.value?((0,s.uX)(),(0,s.CE)("tr",{key:0,class:(0,o.C4)(["b-table-busy-slot",{"b-table-static-busy":0==(0,r.R1)(R).length}])},[(0,s.Lk)("td",{colspan:(0,r.R1)(S)},[(0,s.RG)(e.$slots,"table-busy",{},(()=>[(0,s.Lk)("div",hm,[(0,s.bF)(Wh,{class:"align-middle"}),Am])]))],8,um)],2)):(0,s.Q3)("",!0),(0,r.R1)(g)&&0===(0,r.R1)(R).length?((0,s.uX)(),(0,s.CE)("tr",dm,[(0,s.Lk)("td",{colspan:(0,r.R1)(S)},[(0,s.RG)(e.$slots,"empty",{items:(0,r.R1)(R),filtered:(0,r.R1)(B)},(()=>[(0,s.eW)((0,o.v_)((0,r.R1)(B)?t.emptyFilteredText:t.emptyText),1)]))],8,fm)])):(0,s.Q3)("",!0)]),(0,r.R1)(c)?((0,s.uX)(),(0,s.CE)("tfoot",pm,[(0,s.Lk)("tr",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(C),(t=>((0,s.uX)(),(0,s.CE)("th",(0,s.v6)({key:t.key},t.thAttr,{scope:"col",class:[t.class,t.thClass,t.variant?`table-${t.variant}`:""],title:t.headerTitle,abbr:t.headerAbbr,style:t.thStyle,onClick:e=>P(t,e,!0)}),(0,o.v_)(t.label),17,gm)))),128))])])):e.$slots["custom-foot"]?((0,s.uX)(),(0,s.CE)("tfoot",mm,[(0,s.RG)(e.$slots,"custom-foot",{fields:(0,r.R1)(C),items:t.items,columns:null==(n=(0,r.R1)(C))?void 0:n.length})])):(0,s.Q3)("",!0),e.$slots["table-caption"]?((0,s.uX)(),(0,s.CE)("caption",vm,[(0,s.RG)(e.$slots,"table-caption")])):t.caption?((0,s.uX)(),(0,s.CE)("caption",ym,(0,o.v_)(t.caption),1)):(0,s.Q3)("",!0)]})),_:3},16))}}),_m=(0,s.pM)({__name:"BTbody",props:{variant:null},setup(t){const e=t,n=(0,s.EW)((()=>({[`thead-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,s.uX)(),(0,s.CE)("tbody",{role:"rowgroup",class:(0,o.C4)((0,r.R1)(n))},[(0,s.RG)(t.$slots,"default")],2))}}),bm=["scope","colspan","rowspan","data-label"],xm={key:0},Em=(0,s.pM)({__name:"BTd",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(t){const e=t,n=$u((0,r.lW)(e,"stickyColumn")),i=(0,s.EW)((()=>({[`table-${e.variant}`]:void 0!==e.variant,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&void 0===e.variant}))),a=(0,s.EW)((()=>e.colspan?"colspan":e.rowspan?"rowspan":"col"));return(e,n)=>((0,s.uX)(),(0,s.CE)("td",{role:"cell",scope:(0,r.R1)(a),class:(0,o.C4)((0,r.R1)(i)),colspan:t.colspan,rowspan:t.rowspan,"data-label":t.stackedHeading},[t.stackedHeading?((0,s.uX)(),(0,s.CE)("div",xm,[(0,s.RG)(e.$slots,"default")])):(0,s.RG)(e.$slots,"default",{key:1})],10,bm))}}),Cm=(0,s.pM)({__name:"BTfoot",props:{variant:null},setup(t){const e=t,n=(0,s.EW)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,s.uX)(),(0,s.CE)("tfoot",{role:"rowgroup",class:(0,o.C4)((0,r.R1)(n))},[(0,s.RG)(t.$slots,"default")],2))}}),Sm=["scope","colspan","rowspan","data-label"],Bm={key:0},Tm=(0,s.pM)({__name:"BTh",props:{colspan:null,rowspan:null,stackedHeading:null,stickyColumn:{default:!1},variant:null},setup(t){const e=t,n=$u((0,r.lW)(e,"stickyColumn")),i=(0,s.EW)((()=>({[`table-${e.variant}`]:void 0!==e.variant,"b-table-sticky-column":n.value,"table-b-table-default":n.value&&void 0===e.variant}))),a=(0,s.EW)((()=>e.colspan?"colspan":e.rowspan?"rowspan":"col"));return(e,n)=>((0,s.uX)(),(0,s.CE)("th",{role:"columnheader",scope:(0,r.R1)(a),class:(0,o.C4)((0,r.R1)(i)),colspan:t.colspan,rowspan:t.rowspan,"data-label":t.stackedHeading},[void 0!==t.stackedHeading?((0,s.uX)(),(0,s.CE)("div",Bm,[(0,s.RG)(e.$slots,"default")])):(0,s.RG)(e.$slots,"default",{key:1})],10,Sm))}}),Im=(0,s.pM)({__name:"BThead",props:{variant:null},setup(t){const e=t,n=(0,s.EW)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,s.uX)(),(0,s.CE)("thead",{role:"rowgroup",class:(0,o.C4)((0,r.R1)(n))},[(0,s.RG)(t.$slots,"default")],2))}}),Fm=(0,s.pM)({__name:"BTr",props:{variant:null},setup(t){const e=t,n=(0,s.EW)((()=>({[`table-${e.variant}`]:void 0!==e.variant})));return(t,e)=>((0,s.uX)(),(0,s.CE)("tr",{role:"row",class:(0,o.C4)((0,r.R1)(n))},[(0,s.RG)(t.$slots,"default")],2))}}),Lm=["id","data-bs-target","aria-controls","aria-selected","onClick"],Rm=Symbol(),Mm=(0,s.pM)({__name:"BTabs",props:{activeNavItemClass:null,activeTabClass:null,align:null,card:{default:!1},contentClass:null,end:{default:!1},fill:{default:!1},id:null,justified:{default:!1},lazy:{default:!1},navClass:null,navWrapperClass:null,noFade:{default:!1},noNavStyle:{default:!1},pills:{default:!1},small:{default:!1},tag:{default:"div"},vertical:{default:!1},modelValue:{default:-1}},emits:["update:modelValue","activate-tab","click"],setup(t,{emit:e}){const n=t,i=(0,s.Ht)(),l=$u((0,r.lW)(n,"card")),c=$u((0,r.lW)(n,"end")),u=$u((0,r.lW)(n,"fill")),h=$u((0,r.lW)(n,"justified")),A=$u((0,r.lW)(n,"lazy")),d=$u((0,r.lW)(n,"noFade")),f=$u((0,r.lW)(n,"noNavStyle")),p=$u((0,r.lW)(n,"pills")),g=$u((0,r.lW)(n,"small")),m=$u((0,r.lW)(n,"vertical")),v=(0,r.KR)(n.modelValue),y=(0,r.KR)(""),w=(0,s.EW)({get:()=>v.value,set:t=>{v.value=t,_.value.length>0&&t>=0&&t<_.value.length?y.value=_.value[t].buttonId:y.value="",e("update:modelValue",t)}}),_=(0,s.EW)((()=>{let t=[];return i.default&&(t=T(i).map(((t,e)=>{t.props||(t.props={});const r=t.props["button-id"]||Pu("tab"),s=t.props.id||Pu(),o=w.value>-1?e===w.value:""===t.props.active,a=t.props["title-item-class"],l=t.props["title-link-attributes"];return{buttonId:r,contentId:s,active:o,disabled:""===t.props.disabled||!0===t.props.disabled,navItemClasses:[{active:o,disabled:""===t.props.disabled||!0===t.props.disabled},o&&n.activeNavItemClass?n.activeNavItemClass:null,t.props["title-link-class"]],tabClasses:[{fade:!d.value},o&&n.activeTabClass?n.activeTabClass:null],target:`#${s}`,title:t.props.title,titleItemClass:a,titleLinkAttributes:l,onClick:t.props.onClick,tab:t,tabComponent:()=>T(i)[e]}}))),t})),b=(0,s.EW)((()=>!((null==_?void 0:_.value)&&_.value.length>0))),x=(0,s.EW)((()=>({"d-flex":m.value,"align-items-start":m.value}))),E=Ic((0,r.lW)(n,"align")),C=(0,s.EW)((()=>({"nav-pills":p.value,"flex-column me-3":m.value,[E.value]:void 0!==n.align,"nav-fill":u.value,"card-header-tabs":l.value,"nav-justified":h.value,"nav-tabs":!f.value&&!p.value,small:g.value}))),S=t=>{let i=!1;if(void 0!==t&&t>-1&&t<_.value.length&&!_.value[t].disabled&&(w.value<0||_.value[t].buttonId!==y.value)){const n=new Fc("activate-tab",{cancelable:!0});e("activate-tab",t,w.value,n),n.defaultPrevented||(w.value=t,i=!0)}return!i&&n.modelValue!==w.value&&e("update:modelValue",w.value),i},B=(t,e)=>{var n;S(e),e>=0&&!_.value[e].disabled&&(null==(n=_.value[e])?void 0:n.onClick)&&"function"==typeof _.value[e].onClick&&_.value[e].onClick(t)},T=t=>t&&t.default?t.default().reduce(((t,e)=>("symbol"==typeof e.type?t=t.concat(e.children):t.push(e),t)),[]).filter((t=>{var e;return"BTab"===(null==(e=t.type)?void 0:e.__name)})):[];return S(v.value),(0,s.wB)((()=>n.modelValue),((t,e)=>{if(t===e)return;if(t=Math.max(t,-1),e=Math.max(e,-1),_.value.length<=0)return void(w.value=-1);const n=t>e;let i=t;const r=_.value.length-1;for(;i>=0&&i<=r&&_.value[i].disabled;)i+=n?1:-1;i<0?S(0):i>=_.value.length?S(_.value.length-1):S(i)})),(0,s.wB)((()=>_.value),(()=>{let t=_.value.map((t=>t.active&&!t.disabled)).lastIndexOf(!0);t<0&&(w.value>=_.value.length?t=_.value.map((t=>!t.disabled)).lastIndexOf(!0):_.value[w.value]&&!_.value[w.value].disabled&&(t=w.value)),t<0&&(t=_.value.map((t=>!t.disabled)).indexOf(!0)),_.value.forEach(((e,n)=>e.active=n===t)),S(t)})),(0,s.sV)((()=>{if(w.value<0&&_.value.length>0&&!_.value.some((t=>t.active))){const t=_.value.map((t=>!t.disabled)).indexOf(!0);S(t>=0?t:-1)}})),(0,s.Gt)(Rm,{lazy:A.value,card:l.value}),(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{id:t.id,class:(0,o.C4)(["tabs",(0,r.R1)(x)])},{default:(0,s.k6)((()=>[(0,r.R1)(c)?((0,s.uX)(),(0,s.CE)("div",{key:0,class:(0,o.C4)(["tab-content",t.contentClass])},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(_),(({tabComponent:t,contentId:e,tabClasses:n,active:i},r)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t()),{id:e,key:r,class:(0,o.C4)(n),active:i},null,8,["id","class","active"])))),128)),(0,r.R1)(b)?((0,s.uX)(),(0,s.CE)("div",{key:"bv-empty-tab",class:(0,o.C4)(["tab-pane active",{"card-body":(0,r.R1)(l)}])},[(0,s.RG)(e.$slots,"empty")],2)):(0,s.Q3)("",!0)],2)):(0,s.Q3)("",!0),(0,s.Lk)("div",{class:(0,o.C4)([t.navWrapperClass,{"card-header":(0,r.R1)(l),"ms-auto":t.vertical&&(0,r.R1)(c)}])},[(0,s.Lk)("ul",{class:(0,o.C4)(["nav",[(0,r.R1)(C),t.navClass]]),role:"tablist"},[(0,s.RG)(e.$slots,"tabs-start"),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(_),(({tab:t,buttonId:e,contentId:n,navItemClasses:i,active:r,target:l},c)=>((0,s.uX)(),(0,s.CE)("li",{key:c,class:(0,o.C4)(["nav-item",t.props["title-item-class"]])},[(0,s.Lk)("button",(0,s.v6)({id:e,class:["nav-link",i],"data-bs-toggle":"tab","data-bs-target":l,role:"tab","aria-controls":n,"aria-selected":r},t.props["title-link-attributes"],{onClick:(0,a.D$)((t=>B(t,c)),["stop","prevent"])}),[t.children&&t.children.title?((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.children.title),{key:0})):((0,s.uX)(),(0,s.CE)(s.FK,{key:1},[(0,s.eW)((0,o.v_)(t.props.title),1)],64))],16,Lm)],2)))),128)),(0,s.RG)(e.$slots,"tabs-end")],2)],2),(0,r.R1)(c)?(0,s.Q3)("",!0):((0,s.uX)(),(0,s.CE)("div",{key:1,class:(0,o.C4)(["tab-content",t.contentClass])},[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)((0,r.R1)(_),(({tabComponent:t,contentId:e,tabClasses:n,active:i},r)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t()),{id:e,key:r,class:(0,o.C4)(n),active:i},null,8,["id","class","active"])))),128)),(0,r.R1)(b)?((0,s.uX)(),(0,s.CE)("div",{key:"bv-empty-tab",class:(0,o.C4)(["tab-pane active",{"card-body":(0,r.R1)(l)}])},[(0,s.RG)(e.$slots,"empty")],2)):(0,s.Q3)("",!0)],2))])),_:3},8,["id","class"]))}}),Pm=(0,s.pM)({__name:"BTab",props:{id:null,title:null,active:{default:!1},buttonId:{default:void 0},disabled:{default:!1},lazy:{default:void 0},lazyOnce:{default:void 0},noBody:{type:[Boolean,String],default:!1},tag:{default:"div"},titleItemClass:null,titleLinkAttributes:{default:void 0},titleLinkClass:null},setup(t){const e=t,n=(0,s.WQ)(Rm,null),i=$u((0,r.lW)(e,"active")),a=$u((0,r.lW)(e,"disabled")),l=$u((0,r.lW)(e,void 0!==e.lazyOnce?"lazyOnce":"lazy")),c=(0,r.KR)(!1),u=(0,s.EW)((()=>!(!(null==n?void 0:n.lazy)&&!l.value))),h=(0,s.EW)((()=>void 0!==e.lazyOnce)),A=(0,s.EW)((()=>i.value&&!a.value)),d=(0,s.EW)((()=>{const t=u.value&&h.value&&c.value;return A.value||!u.value||t})),f=(0,s.EW)((()=>({active:i.value,show:i.value,"card-body":(null==n?void 0:n.card)&&!1===e.noBody})));return(0,s.wB)((()=>d.value),(t=>{t&&!c.value&&(c.value=!0)})),(e,n)=>((0,s.uX)(),(0,s.Wv)((0,s.$y)(t.tag),{id:t.id,class:(0,o.C4)(["tab-pane",(0,r.R1)(f)]),role:"tabpanel","aria-labelledby":"profile-tab"},{default:(0,s.k6)((()=>[(0,r.R1)(d)?(0,s.RG)(e.$slots,"default",{key:0}):(0,s.Q3)("",!0)])),_:3},8,["id","class"]))}}),Nm=Object.freeze(Object.defineProperty({__proto__:null,BAccordion:vh,BAccordionItem:Qh,BAlert:eA,BAvatar:lA,BAvatarGroup:iA,BBadge:AA,BBreadcrumb:yA,BBreadcrumbItem:gA,BButton:Jh,BButtonGroup:wA,BButtonToolbar:bA,BCloseButton:Vh,BCard:RA,BCardBody:FA,BCardFooter:LA,BCardGroup:MA,BCardHeader:BA,BCardImg:EA,BCardSubtitle:IA,BCardText:PA,BCardTitle:TA,BCarousel:zA,BCarouselSlide:ZA,BCol:rd,BCollapse:yh,BContainer:vd,BDropdown:_d,BDropdownDivider:xd,BDropdownForm:Td,BDropdownGroup:Rd,BDropdownHeader:Od,BDropdownItem:Dd,BDropdownItemButton:Gd,BDropdownText:jd,BForm:zd,BFormFloatingLabel:$d,BFormInvalidFeedback:Xd,BFormRow:Yd,BFormText:Zd,BFormValidFeedback:Jd,BFormCheckbox:rf,BFormCheckboxGroup:lf,BFormGroup:mf,BFormInput:bf,BFormRadio:Cf,BFormRadioGroup:If,BFormSelect:Nf,BFormSelectOption:Lf,BFormSelectOptionGroup:Mf,BFormTag:kf,BFormTags:Yf,BFormTextarea:ep,BImg:xA,BInputGroup:lp,BInputGroupAddon:up,BInputGroupAppend:hp,BInputGroupPrepend:Ap,BInputGroupText:cp,BLink:Xh,BListGroup:fp,BListGroupItem:pp,BModal:wp,BNav:_p,BNavForm:bp,BNavItem:Sp,BNavItemDropdown:Tp,BNavText:Fp,BNavbar:Lp,BNavbarBrand:Np,BNavbarNav:Op,BNavbarToggle:Dp,BOffcanvas:jp,BOverlay:Wp,BPagination:sg,BPlaceholder:og,BPlaceholderButton:ag,BPlaceholderCard:lg,BPlaceholderTable:ug,BPlaceholderWrapper:hg,BPopover:mg,BProgress:_g,BProgressBar:yg,BRow:Cg,BSkeleton:Sg,BSkeletonIcon:Bg,BSkeletonTable:Fg,BSkeletonWrapper:Lg,BSpinner:Wh,BFormSpinButton:Jg,BTable:wm,BTableSimple:cg,BTbody:_m,BTd:Em,BTfoot:Cm,BTh:Tm,BThead:Im,BTr:Fm,BTab:Pm,BTabs:Mm,BToastContainer:md,BTransition:Gh,BToast:gd,BToaster:md,BToastPlugin:dd},Symbol.toStringTag,{value:"Module"})),Om=Object.freeze(Object.defineProperty({__proto__:null,vBColorMode:_h,vBPopover:bh,vBToggle:Ch,vBTooltip:Fh,vBVisible:Nh},Symbol.toStringTag,{value:"Module"})),km=(Symbol.toStringTag,Symbol.toStringTag,Symbol.toStringTag,{install(t,e={}){Object.entries(Nm).forEach((([e,n])=>{t.component(e,n)})),Object.entries(Om).forEach((([e,n])=>{t.directive(e,n)})),Zu(t)}})},6583:function(t,e,n){"use strict";function i(t,e,n){n=n||2;var i,s,a,l,c,u,A,d=e&&e.length,f=d?e[0]*n:t.length,p=r(t,0,f,n,!0),g=[];if(!p||p.next===p.prev)return g;if(d&&(p=h(t,e,p,n)),t.length>80*n){i=a=t[0],s=l=t[1];for(var m=n;m<f;m+=n)c=t[m],u=t[m+1],c<i&&(i=c),u<s&&(s=u),c>a&&(a=c),u>l&&(l=u);A=Math.max(a-i,l-s),A=0!==A?32767/A:0}return o(p,g,n,i,s,A,0),g}function r(t,e,n,i,r){var s,o;if(r===P(t,e,n,i)>0)for(s=e;s<n;s+=i)o=L(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=L(s,t[s],t[s+1],o);return o&&x(o,o.next)&&(R(o),o=o.next),o}function s(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!x(i,i.next)&&0!==b(i.prev,i,i.next))i=i.next;else{if(R(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function o(t,e,n,i,r,h,A){if(t){!A&&h&&g(t,i,r,h);var d,f,p=t;while(t.prev!==t.next)if(d=t.prev,f=t.next,h?l(t,i,r,h):a(t))e.push(d.i/n|0),e.push(t.i/n|0),e.push(f.i/n|0),R(t),t=f.next,p=f.next;else if(t=f,t===p){A?1===A?(t=c(s(t),e,n),o(t,e,n,i,r,h,2)):2===A&&u(t,e,n,i,r,h):o(s(t),e,n,i,r,h,1);break}}}function a(t){var e=t.prev,n=t,i=t.next;if(b(e,n,i)>=0)return!1;var r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,h=a<l?a<c?a:c:l<c?l:c,A=r>s?r>o?r:o:s>o?s:o,d=a>l?a>c?a:c:l>c?l:c,f=i.next;while(f!==e){if(f.x>=u&&f.x<=A&&f.y>=h&&f.y<=d&&w(r,a,s,l,o,c,f.x,f.y)&&b(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function l(t,e,n,i){var r=t.prev,s=t,o=t.next;if(b(r,s,o)>=0)return!1;var a=r.x,l=s.x,c=o.x,u=r.y,h=s.y,A=o.y,d=a<l?a<c?a:c:l<c?l:c,f=u<h?u<A?u:A:h<A?h:A,p=a>l?a>c?a:c:l>c?l:c,g=u>h?u>A?u:A:h>A?h:A,m=v(d,f,e,n,i),y=v(p,g,e,n,i),_=t.prevZ,x=t.nextZ;while(_&&_.z>=m&&x&&x.z<=y){if(_.x>=d&&_.x<=p&&_.y>=f&&_.y<=g&&_!==r&&_!==o&&w(a,u,l,h,c,A,_.x,_.y)&&b(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,x.x>=d&&x.x<=p&&x.y>=f&&x.y<=g&&x!==r&&x!==o&&w(a,u,l,h,c,A,x.x,x.y)&&b(x.prev,x,x.next)>=0)return!1;x=x.nextZ}while(_&&_.z>=m){if(_.x>=d&&_.x<=p&&_.y>=f&&_.y<=g&&_!==r&&_!==o&&w(a,u,l,h,c,A,_.x,_.y)&&b(_.prev,_,_.next)>=0)return!1;_=_.prevZ}while(x&&x.z<=y){if(x.x>=d&&x.x<=p&&x.y>=f&&x.y<=g&&x!==r&&x!==o&&w(a,u,l,h,c,A,x.x,x.y)&&b(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function c(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!x(r,o)&&E(r,i,i.next,o)&&T(r,o)&&T(o,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(o.i/n|0),R(i),R(i.next),i=t=o),i=i.next}while(i!==t);return s(i)}function u(t,e,n,i,r,a){var l=t;do{var c=l.next.next;while(c!==l.prev){if(l.i!==c.i&&_(l,c)){var u=F(l,c);return l=s(l,l.next),u=s(u,u.next),o(l,e,n,i,r,a,0),void o(u,e,n,i,r,a,0)}c=c.next}l=l.next}while(l!==t)}function h(t,e,n,i){var s,o,a,l,c,u=[];for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,c=r(t,a,l,i,!1),c===c.next&&(c.steiner=!0),u.push(y(c));for(u.sort(A),s=0;s<u.length;s++)n=d(u[s],n);return n}function A(t,e){return t.x-e.x}function d(t,e){var n=f(t,e);if(!n)return e;var i=F(n,t);return s(i,i.next),s(n,n.next)}function f(t,e){var n,i=e,r=t.x,s=t.y,o=-1/0;do{if(s<=i.y&&s>=i.next.y&&i.next.y!==i.y){var a=i.x+(s-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=r&&a>o&&(o=a,n=i.x<i.next.x?i:i.next,a===r))return n}i=i.next}while(i!==e);if(!n)return null;var l,c=n,u=n.x,h=n.y,A=1/0;i=n;do{r>=i.x&&i.x>=u&&r!==i.x&&w(s<h?r:o,s,u,h,s<h?o:r,s,i.x,i.y)&&(l=Math.abs(s-i.y)/(r-i.x),T(i,t)&&(l<A||l===A&&(i.x>n.x||i.x===n.x&&p(n,i)))&&(n=i,A=l)),i=i.next}while(i!==c);return n}function p(t,e){return b(t.prev,t,e.prev)<0&&b(e.next,t,t.next)<0}function g(t,e,n,i){var r=t;do{0===r.z&&(r.z=v(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,m(r)}function m(t){var e,n,i,r,s,o,a,l,c=1;do{n=t,t=null,s=null,o=0;while(n){for(o++,i=n,a=0,e=0;e<c;e++)if(a++,i=i.nextZ,!i)break;l=c;while(a>0||l>0&&i)0!==a&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,c*=2}while(o>1);return t}function v(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function y(t){var e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function w(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function _(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!B(t,e)&&(T(t,e)&&T(e,t)&&I(t,e)&&(b(t.prev,t,e.prev)||b(t,e.prev,e))||x(t,e)&&b(t.prev,t,t.next)>0&&b(e.prev,e,e.next)>0)}function b(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function x(t,e){return t.x===e.x&&t.y===e.y}function E(t,e,n,i){var r=S(b(t,e,n)),s=S(b(t,e,i)),o=S(b(n,i,t)),a=S(b(n,i,e));return r!==s&&o!==a||(!(0!==r||!C(t,n,e))||(!(0!==s||!C(t,i,e))||(!(0!==o||!C(n,t,i))||!(0!==a||!C(n,e,i)))))}function C(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function S(t){return t>0?1:t<0?-1:0}function B(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&E(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function T(t,e){return b(t.prev,t,t.next)<0?b(t,e,t.next)>=0&&b(t,t.prev,e)>=0:b(t,e,t.prev)<0||b(t,t.next,e)<0}function I(t,e){var n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do{n.y>s!==n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function F(t,e){var n=new M(t.i,t.x,t.y),i=new M(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function L(t,e,n,i){var r=new M(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function R(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function M(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function P(t,e,n,i){for(var r=0,s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}n(4114),t.exports=i,t.exports["default"]=i,i.deviation=function(t,e,n,i){var r=e&&e.length,s=r?e[0]*n:t.length,o=Math.abs(P(t,0,s,n));if(r)for(var a=0,l=e.length;a<l;a++){var c=e[a]*n,u=a<l-1?e[a+1]*n:t.length;o-=Math.abs(P(t,c,u,n))}var h=0;for(a=0;a<i.length;a+=3){var A=i[a]*n,d=i[a+1]*n,f=i[a+2]*n;h+=Math.abs((t[A]-t[f])*(t[d+1]-t[A+1])-(t[A]-t[d])*(t[f+1]-t[A+1]))}return 0===o&&0===h?0:Math.abs((h-o)/o)},i.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[r][s][o]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n}},9046:function(t,e){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
e.read=function(t,e,n,i,r){var s,o,a=8*r-i-1,l=(1<<a)-1,c=l>>1,u=-7,h=n?r-1:0,A=n?-1:1,d=t[e+h];for(h+=A,s=d&(1<<-u)-1,d>>=-u,u+=a;u>0;s=256*s+t[e+h],h+=A,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=i;u>0;o=256*o+t[e+h],h+=A,u-=8);if(0===s)s=1-c;else{if(s===l)return o?NaN:1/0*(d?-1:1);o+=Math.pow(2,i),s-=c}return(d?-1:1)*o*Math.pow(2,s-i)},e.write=function(t,e,n,i,r,s){var o,a,l,c=8*s-r-1,u=(1<<c)-1,h=u>>1,A=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:s-1,f=i?1:-1,p=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-o))<1&&(o--,l*=2),e+=o+h>=1?A/l:A*Math.pow(2,1-h),e*l>=2&&(o++,l/=2),o+h>=u?(a=0,o=u):o+h>=1?(a=(e*l-1)*Math.pow(2,r),o+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,r),o=0));r>=8;t[n+d]=255&a,d+=f,a/=256,r-=8);for(o=o<<r|a,c+=r;c>0;t[n+d]=255&o,d+=f,o/=256,c-=8);t[n+d-f]|=128*p}},8062:function(t,e,n){"use strict";n(4114),n(7467),n(4732),n(9577),n(6280),n(7913),n(7801),t.exports=r;var i=n(9046);function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var s=4294967296,o=1/s,a=12,l="undefined"===typeof TextDecoder?null:new TextDecoder("utf8");function c(t,e,n){var i,r,s=n.buf;if(r=s[n.pos++],i=(112&r)>>4,r<128)return h(t,i,e);if(r=s[n.pos++],i|=(127&r)<<3,r<128)return h(t,i,e);if(r=s[n.pos++],i|=(127&r)<<10,r<128)return h(t,i,e);if(r=s[n.pos++],i|=(127&r)<<17,r<128)return h(t,i,e);if(r=s[n.pos++],i|=(127&r)<<24,r<128)return h(t,i,e);if(r=s[n.pos++],i|=(1&r)<<31,r<128)return h(t,i,e);throw new Error("Expected varint not more than 10 bytes")}function u(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function h(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function A(t,e){var n,i;if(t>=0?(n=t%4294967296|0,i=t/4294967296|0):(n=~(-t%4294967296),i=~(-t/4294967296),4294967295^n?n=n+1|0:(n=0,i=i+1|0)),t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),d(n,i,e),f(i,e)}function d(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}function f(t,e){var n=(7&t)<<4;e.buf[e.pos++]|=n|((t>>>=3)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),t&&(e.buf[e.pos++]=127&t)))))}function p(t,e,n){var i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(var r=n.pos-1;r>=t;r--)n.buf[r+i]=n.buf[r]}function g(t,e){for(var n=0;n<t.length;n++)e.writeVarint(t[n])}function m(t,e){for(var n=0;n<t.length;n++)e.writeSVarint(t[n])}function v(t,e){for(var n=0;n<t.length;n++)e.writeFloat(t[n])}function y(t,e){for(var n=0;n<t.length;n++)e.writeDouble(t[n])}function w(t,e){for(var n=0;n<t.length;n++)e.writeBoolean(t[n])}function _(t,e){for(var n=0;n<t.length;n++)e.writeFixed32(t[n])}function b(t,e){for(var n=0;n<t.length;n++)e.writeSFixed32(t[n])}function x(t,e){for(var n=0;n<t.length;n++)e.writeFixed64(t[n])}function E(t,e){for(var n=0;n<t.length;n++)e.writeSFixed64(t[n])}function C(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function S(t,e,n){t[n]=e,t[n+1]=e>>>8,t[n+2]=e>>>16,t[n+3]=e>>>24}function B(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}function T(t,e,n){var i="",r=e;while(r<n){var s,o,a,l=t[r],c=null,u=l>239?4:l>223?3:l>191?2:1;if(r+u>n)break;1===u?l<128&&(c=l):2===u?(s=t[r+1],128===(192&s)&&(c=(31&l)<<6|63&s,c<=127&&(c=null))):3===u?(s=t[r+1],o=t[r+2],128===(192&s)&&128===(192&o)&&(c=(15&l)<<12|(63&s)<<6|63&o,(c<=2047||c>=55296&&c<=57343)&&(c=null))):4===u&&(s=t[r+1],o=t[r+2],a=t[r+3],128===(192&s)&&128===(192&o)&&128===(192&a)&&(c=(15&l)<<18|(63&s)<<12|(63&o)<<6|63&a,(c<=65535||c>=1114112)&&(c=null))),null===c?(c=65533,u=1):c>65535&&(c-=65536,i+=String.fromCharCode(c>>>10&1023|55296),c=56320|1023&c),i+=String.fromCharCode(c),r+=u}return i}function I(t,e,n){return l.decode(t.subarray(e,n))}function F(t,e,n){for(var i,r,s=0;s<e.length;s++){if(i=e.charCodeAt(s),i>55295&&i<57344){if(!r){i>56319||s+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,n){n=n||this.length;while(this.pos<n){var i=this.readVarint(),r=i>>3,s=this.pos;this.type=7&i,t(r,e,this),this.pos===s&&this.skip(i)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=C(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=B(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=C(this.buf,this.pos)+C(this.buf,this.pos+4)*s;return this.pos+=8,t},readSFixed64:function(){var t=C(this.buf,this.pos)+B(this.buf,this.pos+4)*s;return this.pos+=8,t},readFloat:function(){var t=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,n,i=this.buf;return n=i[this.pos++],e=127&n,n<128?e:(n=i[this.pos++],e|=(127&n)<<7,n<128?e:(n=i[this.pos++],e|=(127&n)<<14,n<128?e:(n=i[this.pos++],e|=(127&n)<<21,n<128?e:(n=i[this.pos],e|=(15&n)<<28,c(e,t,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2===1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=a&&l?I(this.buf,e,t):T(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==r.Bytes)return t.push(this.readVarint(e));var n=u(this);t=t||[];while(this.pos<n)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==r.Bytes)return t.push(this.readSVarint());var e=u(this);t=t||[];while(this.pos<e)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==r.Bytes)return t.push(this.readBoolean());var e=u(this);t=t||[];while(this.pos<e)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==r.Bytes)return t.push(this.readFloat());var e=u(this);t=t||[];while(this.pos<e)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==r.Bytes)return t.push(this.readDouble());var e=u(this);t=t||[];while(this.pos<e)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed32());var e=u(this);t=t||[];while(this.pos<e)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed32());var e=u(this);t=t||[];while(this.pos<e)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed64());var e=u(this);t=t||[];while(this.pos<e)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed64());var e=u(this);t=t||[];while(this.pos<e)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)while(this.buf[this.pos++]>127);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else{if(e!==r.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){var e=this.length||16;while(e<this.pos+t)e*=2;if(e!==this.length){var n=new Uint8Array(e);n.set(this.buf),this.buf=n,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),S(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*o),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),S(this.buf,-1&t,this.pos),S(this.buf,Math.floor(t*o),this.pos+4),this.pos+=8},writeVarint:function(t){t=+t||0,t>268435455||t<0?A(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=F(this.buf,t,this.pos);var n=this.pos-e;n>=128&&p(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n},writeFloat:function(t){this.realloc(4),i.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),i.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var n=0;n<e;n++)this.buf[this.pos++]=t[n]},writeRawMessage:function(t,e){this.pos++;var n=this.pos;t(e,this);var i=this.pos-n;i>=128&&p(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i},writeMessage:function(t,e,n){this.writeTag(t,r.Bytes),this.writeRawMessage(e,n)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,m,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,w,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,v,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,_,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,b,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,x,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,E,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},2220:function(t,e,n){n(4114),function(e,n){t.exports=n()}(0,(function(){"use strict";function t(t,i,r,s,o){!function t(n,i,r,s,o){for(;s>r;){if(s-r>600){var a=s-r+1,l=i-r+1,c=Math.log(a),u=.5*Math.exp(2*c/3),h=.5*Math.sqrt(c*u*(a-u)/a)*(l-a/2<0?-1:1),A=Math.max(r,Math.floor(i-l*u/a+h)),d=Math.min(s,Math.floor(i+(a-l)*u/a+h));t(n,i,A,d,o)}var f=n[i],p=r,g=s;for(e(n,r,i),o(n[s],f)>0&&e(n,r,s);p<g;){for(e(n,p,g),p++,g--;o(n[p],f)<0;)p++;for(;o(n[g],f)>0;)g--}0===o(n[r],f)?e(n,r,g):e(n,++g,s),g<=i&&(r=g+1),i<=g&&(s=g-1)}}(t,i,r||0,s||t.length-1,o||n)}function e(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function n(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e,n){if(!n)return e.indexOf(t);for(var i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function s(t,e){o(t,0,t.children.length,e,t)}function o(t,e,n,i,r){r||(r=f(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(var s=e;s<n;s++){var o=t.children[s];a(r,t.leaf?i(o):o)}return r}function a(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function l(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function u(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function A(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function d(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function p(e,n,i,r,s){for(var o=[n,i];o.length;)if(!((i=o.pop())-(n=o.pop())<=r)){var a=n+Math.ceil((i-n)/r/2)*r;t(e,a,n,i,s),o.push(n,a,a,i)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,n=[];if(!d(t,e))return n;for(var i=this.toBBox,r=[];e;){for(var s=0;s<e.children.length;s++){var o=e.children[s],a=e.leaf?i(o):o;d(t,a)&&(e.leaf?n.push(o):A(t,a)?this._all(o,n):r.push(o))}e=r.pop()}return n},i.prototype.collides=function(t){var e=this.data;if(!d(t,e))return!1;for(var n=[];e;){for(var i=0;i<e.children.length;i++){var r=e.children[i],s=e.leaf?this.toBBox(r):r;if(d(t,s)){if(e.leaf||A(t,s))return!0;n.push(r)}}e=n.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var i=this.data;this.data=n,n=i}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=f([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var n,i,s,o=this.data,a=this.toBBox(t),l=[],c=[];o||l.length;){if(o||(o=l.pop(),i=l[l.length-1],n=c.pop(),s=!0),o.leaf){var u=r(t,o.children,e);if(-1!==u)return o.children.splice(u,1),l.push(o),this._condense(l),this}s||o.leaf||!A(o,a)?i?(n++,o=i.children[n],s=!1):o=null:(l.push(o),c.push(n),n=0,i=o,o=o.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var n=[];t;)t.leaf?e.push.apply(e,t.children):n.push.apply(n,t.children),t=n.pop();return e},i.prototype._build=function(t,e,n,i){var r,o=n-e+1,a=this._maxEntries;if(o<=a)return s(r=f(t.slice(e,n+1)),this.toBBox),r;i||(i=Math.ceil(Math.log(o)/Math.log(a)),a=Math.ceil(o/Math.pow(a,i-1))),(r=f([])).leaf=!1,r.height=i;var l=Math.ceil(o/a),c=l*Math.ceil(Math.sqrt(a));p(t,e,n,c,this.compareMinX);for(var u=e;u<=n;u+=c){var h=Math.min(u+c-1,n);p(t,u,h,l,this.compareMinY);for(var A=u;A<=h;A+=l){var d=Math.min(A+l-1,h);r.children.push(this._build(t,A,d,i-1))}}return s(r,this.toBBox),r},i.prototype._chooseSubtree=function(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){for(var r=1/0,s=1/0,o=void 0,a=0;a<e.children.length;a++){var l=e.children[a],c=u(l),h=(A=t,d=l,(Math.max(d.maxX,A.maxX)-Math.min(d.minX,A.minX))*(Math.max(d.maxY,A.maxY)-Math.min(d.minY,A.minY))-c);h<s?(s=h,r=c<r?c:r,o=l):h===s&&c<r&&(r=c,o=l)}e=o||e.children[0]}var A,d;return e},i.prototype._insert=function(t,e,n){var i=n?t:this.toBBox(t),r=[],s=this._chooseSubtree(i,this.data,e,r);for(s.children.push(t),a(s,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)},i.prototype._split=function(t,e){var n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);var o=this._chooseSplitIndex(n,r,i),a=f(n.children.splice(o,n.children.length-o));a.height=n.height,a.leaf=n.leaf,s(n,this.toBBox),s(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(n,a)},i.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,s(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,n){for(var i,r,s,a,l,c,h,A=1/0,d=1/0,f=e;f<=n-e;f++){var p=o(t,0,f,this.toBBox),g=o(t,f,n,this.toBBox),m=(r=p,s=g,a=void 0,l=void 0,c=void 0,h=void 0,a=Math.max(r.minX,s.minX),l=Math.max(r.minY,s.minY),c=Math.min(r.maxX,s.maxX),h=Math.min(r.maxY,s.maxY),Math.max(0,c-a)*Math.max(0,h-l)),v=u(p)+u(g);m<A?(A=m,i=f,d=v<d?v:d):m===A&&v<d&&(d=v,i=f)}return i||n-e},i.prototype._chooseSplitAxis=function(t,e,n){var i=t.leaf?this.compareMinX:l,r=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)},i.prototype._allDistMargin=function(t,e,n,i){t.children.sort(i);for(var r=this.toBBox,s=o(t,0,e,r),l=o(t,n-e,n,r),c=h(s)+h(l),u=e;u<n-e;u++){var A=t.children[u];a(s,t.leaf?r(A):A),c+=h(s)}for(var d=n-e-1;d>=e;d--){var f=t.children[d];a(l,t.leaf?r(f):f),c+=h(l)}return c},i.prototype._adjustParentBBoxes=function(t,e,n){for(var i=n;i>=0;i--)a(e[i],t)},i.prototype._condense=function(t){for(var e=t.length-1,n=void 0;e>=0;e--)0===t[e].children.length?e>0?(n=t[e-1].children).splice(n.indexOf(t[e]),1):this.clear():s(t[e],this.toBBox)},i}))},1241:function(t,e){"use strict";e.A=(t,e)=>{const n=t.__vccOpts||t;for(const[i,r]of e)n[i]=r;return n}},4249:function(t,e,n){"use strict";n.d(e,{y$:function(){return j}});n(4114);var i=n(6768),r=n(144),s=n(179),o="store";function a(t,e){Object.keys(t).forEach((function(n){return e(t[n],n)}))}function l(t){return null!==t&&"object"===typeof t}function c(t){return t&&"function"===typeof t.then}function u(t,e){return function(){return t(e)}}function h(t,e,n){return e.indexOf(t)<0&&(n&&n.prepend?e.unshift(t):e.push(t)),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function A(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;f(t,n,[],t._modules.root,!0),d(t,n,e)}function d(t,e,n){var s=t._state,o=t._scope;t.getters={},t._makeLocalGettersCache=Object.create(null);var l=t._wrappedGetters,c={},h={},A=(0,r.uY)(!0);A.run((function(){a(l,(function(e,n){c[n]=u(e,t),h[n]=(0,i.EW)((function(){return c[n]()})),Object.defineProperty(t.getters,n,{get:function(){return h[n].value},enumerable:!0})}))})),t._state=(0,r.Kh)({data:e}),t._scope=A,t.strict&&w(t),s&&n&&t._withCommit((function(){s.data=null})),o&&o.stop()}function f(t,e,n,i,r){var s=!n.length,o=t._modules.getNamespace(n);if(i.namespaced&&(t._modulesNamespaceMap[o],t._modulesNamespaceMap[o]=i),!s&&!r){var a=_(e,n.slice(0,-1)),l=n[n.length-1];t._withCommit((function(){a[l]=i.state}))}var c=i.context=p(t,o,n);i.forEachMutation((function(e,n){var i=o+n;m(t,i,e,c)})),i.forEachAction((function(e,n){var i=e.root?n:o+n,r=e.handler||e;v(t,i,r,c)})),i.forEachGetter((function(e,n){var i=o+n;y(t,i,e,c)})),i.forEachChild((function(i,s){f(t,e,n.concat(s),i,r)}))}function p(t,e,n){var i=""===e,r={dispatch:i?t.dispatch:function(n,i,r){var s=b(n,i,r),o=s.payload,a=s.options,l=s.type;return a&&a.root||(l=e+l),t.dispatch(l,o)},commit:i?t.commit:function(n,i,r){var s=b(n,i,r),o=s.payload,a=s.options,l=s.type;a&&a.root||(l=e+l),t.commit(l,o,a)}};return Object.defineProperties(r,{getters:{get:i?function(){return t.getters}:function(){return g(t,e)}},state:{get:function(){return _(t.state,n)}}}),r}function g(t,e){if(!t._makeLocalGettersCache[e]){var n={},i=e.length;Object.keys(t.getters).forEach((function(r){if(r.slice(0,i)===e){var s=r.slice(i);Object.defineProperty(n,s,{get:function(){return t.getters[r]},enumerable:!0})}})),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}function m(t,e,n,i){var r=t._mutations[e]||(t._mutations[e]=[]);r.push((function(e){n.call(t,i.state,e)}))}function v(t,e,n,i){var r=t._actions[e]||(t._actions[e]=[]);r.push((function(e){var r=n.call(t,{dispatch:i.dispatch,commit:i.commit,getters:i.getters,state:i.state,rootGetters:t.getters,rootState:t.state},e);return c(r)||(r=Promise.resolve(r)),t._devtoolHook?r.catch((function(e){throw t._devtoolHook.emit("vuex:error",e),e})):r}))}function y(t,e,n,i){t._wrappedGetters[e]||(t._wrappedGetters[e]=function(t){return n(i.state,i.getters,t.state,t.getters)})}function w(t){(0,i.wB)((function(){return t._state.data}),(function(){0}),{deep:!0,flush:"sync"})}function _(t,e){return e.reduce((function(t,e){return t[e]}),t)}function b(t,e,n){return l(t)&&t.type&&(n=e,e=t,t=t.type),{type:t,payload:e,options:n}}var x="vuex bindings",E="vuex:mutations",C="vuex:actions",S="vuex",B=0;function T(t,e){(0,s.$q)({id:"org.vuejs.vuex",app:t,label:"Vuex",homepage:"https://next.vuex.vuejs.org/",logo:"https://vuejs.org/images/icons/favicon-96x96.png",packageName:"vuex",componentStateTypes:[x]},(function(n){n.addTimelineLayer({id:E,label:"Vuex Mutations",color:I}),n.addTimelineLayer({id:C,label:"Vuex Actions",color:I}),n.addInspector({id:S,label:"Vuex",icon:"storage",treeFilterPlaceholder:"Filter stores..."}),n.on.getInspectorTree((function(n){if(n.app===t&&n.inspectorId===S)if(n.filter){var i=[];N(i,e._modules.root,n.filter,""),n.rootNodes=i}else n.rootNodes=[P(e._modules.root,"")]})),n.on.getInspectorState((function(n){if(n.app===t&&n.inspectorId===S){var i=n.nodeId;g(e,i),n.state=O(D(e._modules,i),"root"===i?e.getters:e._makeLocalGettersCache,i)}})),n.on.editInspectorState((function(n){if(n.app===t&&n.inspectorId===S){var i=n.nodeId,r=n.path;"root"!==i&&(r=i.split("/").filter(Boolean).concat(r)),e._withCommit((function(){n.set(e._state.data,r,n.state.value)}))}})),e.subscribe((function(t,e){var i={};t.payload&&(i.payload=t.payload),i.state=e,n.notifyComponentUpdate(),n.sendInspectorTree(S),n.sendInspectorState(S),n.addTimelineEvent({layerId:E,event:{time:Date.now(),title:t.type,data:i}})})),e.subscribeAction({before:function(t,e){var i={};t.payload&&(i.payload=t.payload),t._id=B++,t._time=Date.now(),i.state=e,n.addTimelineEvent({layerId:C,event:{time:t._time,title:t.type,groupId:t._id,subtitle:"start",data:i}})},after:function(t,e){var i={},r=Date.now()-t._time;i.duration={_custom:{type:"duration",display:r+"ms",tooltip:"Action duration",value:r}},t.payload&&(i.payload=t.payload),i.state=e,n.addTimelineEvent({layerId:C,event:{time:Date.now(),title:t.type,groupId:t._id,subtitle:"end",data:i}})}})}))}var I=8702998,F=6710886,L=16777215,R={label:"namespaced",textColor:L,backgroundColor:F};function M(t){return t&&"root"!==t?t.split("/").slice(-2,-1)[0]:"Root"}function P(t,e){return{id:e||"root",label:M(e),tags:t.namespaced?[R]:[],children:Object.keys(t._children).map((function(n){return P(t._children[n],e+n+"/")}))}}function N(t,e,n,i){i.includes(n)&&t.push({id:i||"root",label:i.endsWith("/")?i.slice(0,i.length-1):i||"Root",tags:e.namespaced?[R]:[]}),Object.keys(e._children).forEach((function(r){N(t,e._children[r],n,i+r+"/")}))}function O(t,e,n){e="root"===n?e:e[n];var i=Object.keys(e),r={state:Object.keys(t.state).map((function(e){return{key:e,editable:!0,value:t.state[e]}}))};if(i.length){var s=k(e);r.getters=Object.keys(s).map((function(t){return{key:t.endsWith("/")?M(t):t,editable:!1,value:U((function(){return s[t]}))}}))}return r}function k(t){var e={};return Object.keys(t).forEach((function(n){var i=n.split("/");if(i.length>1){var r=e,s=i.pop();i.forEach((function(t){r[t]||(r[t]={_custom:{value:{},display:t,tooltip:"Module",abstract:!0}}),r=r[t]._custom.value})),r[s]=U((function(){return t[n]}))}else e[n]=U((function(){return t[n]}))})),e}function D(t,e){var n=e.split("/").filter((function(t){return t}));return n.reduce((function(t,i,r){var s=t[i];if(!s)throw new Error('Missing module "'+i+'" for path "'+e+'".');return r===n.length-1?s:s._children}),"root"===e?t:t.root._children)}function U(t){try{return t()}catch(e){return e}}var Q=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"===typeof n?n():n)||{}},G={namespaced:{configurable:!0}};G.namespaced.get=function(){return!!this._rawModule.namespaced},Q.prototype.addChild=function(t,e){this._children[t]=e},Q.prototype.removeChild=function(t){delete this._children[t]},Q.prototype.getChild=function(t){return this._children[t]},Q.prototype.hasChild=function(t){return t in this._children},Q.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},Q.prototype.forEachChild=function(t){a(this._children,t)},Q.prototype.forEachGetter=function(t){this._rawModule.getters&&a(this._rawModule.getters,t)},Q.prototype.forEachAction=function(t){this._rawModule.actions&&a(this._rawModule.actions,t)},Q.prototype.forEachMutation=function(t){this._rawModule.mutations&&a(this._rawModule.mutations,t)},Object.defineProperties(Q.prototype,G);var H=function(t){this.register([],t,!1)};function V(t,e,n){if(e.update(n),n.modules)for(var i in n.modules){if(!e.getChild(i))return void 0;V(t.concat(i),e.getChild(i),n.modules[i])}}H.prototype.get=function(t){return t.reduce((function(t,e){return t.getChild(e)}),this.root)},H.prototype.getNamespace=function(t){var e=this.root;return t.reduce((function(t,n){return e=e.getChild(n),t+(e.namespaced?n+"/":"")}),"")},H.prototype.update=function(t){V([],this.root,t)},H.prototype.register=function(t,e,n){var i=this;void 0===n&&(n=!0);var r=new Q(e,n);if(0===t.length)this.root=r;else{var s=this.get(t.slice(0,-1));s.addChild(t[t.length-1],r)}e.modules&&a(e.modules,(function(e,r){i.register(t.concat(r),e,n)}))},H.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1],i=e.getChild(n);i&&i.runtime&&e.removeChild(n)},H.prototype.isRegistered=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];return!!e&&e.hasChild(n)};function j(t){return new W(t)}var W=function(t){var e=this;void 0===t&&(t={});var n=t.plugins;void 0===n&&(n=[]);var i=t.strict;void 0===i&&(i=!1);var r=t.devtools;this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new H(t),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._makeLocalGettersCache=Object.create(null),this._scope=null,this._devtools=r;var s=this,o=this,a=o.dispatch,l=o.commit;this.dispatch=function(t,e){return a.call(s,t,e)},this.commit=function(t,e,n){return l.call(s,t,e,n)},this.strict=i;var c=this._modules.root.state;f(this,c,[],this._modules.root),d(this,c),n.forEach((function(t){return t(e)}))},z={state:{configurable:!0}};W.prototype.install=function(t,e){t.provide(e||o,this),t.config.globalProperties.$store=this;var n=void 0!==this._devtools&&this._devtools;n&&T(t,this)},z.state.get=function(){return this._state.data},z.state.set=function(t){0},W.prototype.commit=function(t,e,n){var i=this,r=b(t,e,n),s=r.type,o=r.payload,a=(r.options,{type:s,payload:o}),l=this._mutations[s];l&&(this._withCommit((function(){l.forEach((function(t){t(o)}))})),this._subscribers.slice().forEach((function(t){return t(a,i.state)})))},W.prototype.dispatch=function(t,e){var n=this,i=b(t,e),r=i.type,s=i.payload,o={type:r,payload:s},a=this._actions[r];if(a){try{this._actionSubscribers.slice().filter((function(t){return t.before})).forEach((function(t){return t.before(o,n.state)}))}catch(c){0}var l=a.length>1?Promise.all(a.map((function(t){return t(s)}))):a[0](s);return new Promise((function(t,e){l.then((function(e){try{n._actionSubscribers.filter((function(t){return t.after})).forEach((function(t){return t.after(o,n.state)}))}catch(c){0}t(e)}),(function(t){try{n._actionSubscribers.filter((function(t){return t.error})).forEach((function(e){return e.error(o,n.state,t)}))}catch(c){0}e(t)}))}))}},W.prototype.subscribe=function(t,e){return h(t,this._subscribers,e)},W.prototype.subscribeAction=function(t,e){var n="function"===typeof t?{before:t}:t;return h(n,this._actionSubscribers,e)},W.prototype.watch=function(t,e,n){var r=this;return(0,i.wB)((function(){return t(r.state,r.getters)}),e,Object.assign({},n))},W.prototype.replaceState=function(t){var e=this;this._withCommit((function(){e._state.data=t}))},W.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"===typeof t&&(t=[t]),this._modules.register(t,e),f(this,this.state,t,this._modules.get(t),n.preserveState),d(this,this.state)},W.prototype.unregisterModule=function(t){var e=this;"string"===typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit((function(){var n=_(e.state,t.slice(0,-1));delete n[t[t.length-1]]})),A(this)},W.prototype.hasModule=function(t){return"string"===typeof t&&(t=[t]),this._modules.isRegistered(t)},W.prototype.hotUpdate=function(t){this._modules.update(t),A(this,!0)},W.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(W.prototype,z);$((function(t,e){var n={};return K(e).forEach((function(e){var i=e.key,r=e.val;n[i]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var i=X(this.$store,"mapState",t);if(!i)return;e=i.context.state,n=i.context.getters}return"function"===typeof r?r.call(this,e,n):e[r]},n[i].vuex=!0})),n})),$((function(t,e){var n={};return K(e).forEach((function(e){var i=e.key,r=e.val;n[i]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var i=this.$store.commit;if(t){var s=X(this.$store,"mapMutations",t);if(!s)return;i=s.context.commit}return"function"===typeof r?r.apply(this,[i].concat(e)):i.apply(this.$store,[r].concat(e))}})),n})),$((function(t,e){var n={};return K(e).forEach((function(e){var i=e.key,r=e.val;r=t+r,n[i]=function(){if(!t||X(this.$store,"mapGetters",t))return this.$store.getters[r]},n[i].vuex=!0})),n})),$((function(t,e){var n={};return K(e).forEach((function(e){var i=e.key,r=e.val;n[i]=function(){var e=[],n=arguments.length;while(n--)e[n]=arguments[n];var i=this.$store.dispatch;if(t){var s=X(this.$store,"mapActions",t);if(!s)return;i=s.context.dispatch}return"function"===typeof r?r.apply(this,[i].concat(e)):i.apply(this.$store,[r].concat(e))}})),n}));function K(t){return q(t)?Array.isArray(t)?t.map((function(t){return{key:t,val:t}})):Object.keys(t).map((function(e){return{key:e,val:t[e]}})):[]}function q(t){return Array.isArray(t)||l(t)}function $(t){return function(e,n){return"string"!==typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function X(t,e,n){var i=t._modulesNamespaceMap[n];return i}},3022:function(t){function e(t,e){const n=new RegExp(e,"g"),i=t.match(n);return i?i.length:0}t.exports=e,t.exports["default"]=e},1775:function(t,e,n){const i=n(3562),r=n(5261),s=n(3022);function o(t,e,n){const o=n&&n.debug||!1,a=!(n&&!1===typeof n.nested),l=n&&n.startIndex||0;o&&console.log("[xml-utils] starting findTagByName with",e," and ",n);const c=i(t,`<${e}[ \n>/]`,l);if(o&&console.log("[xml-utils] start:",c),-1===c)return;const u=t.slice(c+e.length);let h=r(u,"^[^<]*[ /]>",0);const A=-1!==h&&"/"===u[h-1];if(o&&console.log("[xml-utils] selfClosing:",A),!1===A)if(a){let t=0,n=1,i=0;while(-1!==(h=r(u,"[ /]"+e+">",t))){const r=u.substring(t,h+1);if(n+=s(r,"<"+e+"[ \n\t>]"),i+=s(r,"</"+e+">"),i>=n)break;t=h}}else h=r(u,"[ /]"+e+">",0);const d=c+e.length+h+1;if(o&&console.log("[xml-utils] end:",d),-1===d)return;const f=t.slice(c,d);let p;return p=A?null:f.slice(f.indexOf(">")+1,f.lastIndexOf("<")),{inner:p,outer:f,start:c,end:d}}t.exports=o,t.exports["default"]=o},554:function(t,e,n){n(4114);const i=n(1775);function r(t,e,n){const r=[],s=n&&n.debug||!1,o=!n||"boolean"!==typeof n.nested||n.nested;let a,l=n&&n.startIndex||0;while(a=i(t,e,{debug:s,startIndex:l}))l=o?a.start+1+e.length:a.end,r.push(a);return s&&console.log("findTagsByName found",r.length,"tags"),r}t.exports=r,t.exports["default"]=r},3146:function(t){function e(t,e,n){const i=n&&n.debug||!1;i&&console.log("[xml-utils] getting "+e+" in "+t);const r="object"===typeof t?t.outer:t,s=r.slice(0,r.indexOf(">")+1),o=['"',"'"];for(let a=0;a<o.length;a++){const t=o[a],n=e+"\\="+t+"([^"+t+"]*)"+t;i&&console.log("[xml-utils] pattern:",n);const r=new RegExp(n),l=r.exec(s);if(i&&console.log("[xml-utils] match:",l),l)return l[1]}}t.exports=e,t.exports["default"]=e},5261:function(t){function e(t,e,n){const i=new RegExp(e),r=i.exec(t.slice(n));return r?n+r.index+r[0].length-1:-1}t.exports=e,t.exports["default"]=e},3562:function(t){function e(t,e,n){const i=new RegExp(e),r=i.exec(t.slice(n));return r?n+r.index:-1}t.exports=e,t.exports["default"]=e},9306:function(t,e,n){"use strict";var i=n(4901),r=n(6823),s=TypeError;t.exports=function(t){if(i(t))return t;throw new s(r(t)+" is not a function")}},3506:function(t,e,n){"use strict";var i=n(3925),r=String,s=TypeError;t.exports=function(t){if(i(t))return t;throw new s("Can't set "+r(t)+" as a prototype")}},679:function(t,e,n){"use strict";var i=n(1625),r=TypeError;t.exports=function(t,e){if(i(e,t))return t;throw new r("Incorrect invocation")}},8551:function(t,e,n){"use strict";var i=n(34),r=String,s=TypeError;t.exports=function(t){if(i(t))return t;throw new s(r(t)+" is not an object")}},7811:function(t){"use strict";t.exports="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView},7394:function(t,e,n){"use strict";var i=n(6706),r=n(4576),s=TypeError;t.exports=i(ArrayBuffer.prototype,"byteLength","get")||function(t){if("ArrayBuffer"!==r(t))throw new s("ArrayBuffer expected");return t.byteLength}},3238:function(t,e,n){"use strict";var i=n(9504),r=n(7394),s=i(ArrayBuffer.prototype.slice);t.exports=function(t){if(0!==r(t))return!1;try{return s(t,0,0),!1}catch(e){return!0}}},5636:function(t,e,n){"use strict";var i=n(4475),r=n(9504),s=n(6706),o=n(7696),a=n(3238),l=n(7394),c=n(4483),u=n(1548),h=i.structuredClone,A=i.ArrayBuffer,d=i.DataView,f=i.TypeError,p=Math.min,g=A.prototype,m=d.prototype,v=r(g.slice),y=s(g,"resizable","get"),w=s(g,"maxByteLength","get"),_=r(m.getInt8),b=r(m.setInt8);t.exports=(u||c)&&function(t,e,n){var i,r=l(t),s=void 0===e?r:o(e),g=!y||!y(t);if(a(t))throw new f("ArrayBuffer is detached");if(u&&(t=h(t,{transfer:[t]}),r===s&&(n||g)))return t;if(r>=s&&(!n||g))i=v(t,0,s);else{var m=n&&!g&&w?{maxByteLength:w(t)}:void 0;i=new A(s,m);for(var x=new d(t),E=new d(i),C=p(s,r),S=0;S<C;S++)b(E,S,_(x,S))}return u||c(t),i}},4644:function(t,e,n){"use strict";var i,r,s,o=n(7811),a=n(3724),l=n(4475),c=n(4901),u=n(34),h=n(9297),A=n(6955),d=n(6823),f=n(6699),p=n(6840),g=n(2106),m=n(1625),v=n(2787),y=n(2967),w=n(8227),_=n(3392),b=n(1181),x=b.enforce,E=b.get,C=l.Int8Array,S=C&&C.prototype,B=l.Uint8ClampedArray,T=B&&B.prototype,I=C&&v(C),F=S&&v(S),L=Object.prototype,R=l.TypeError,M=w("toStringTag"),P=_("TYPED_ARRAY_TAG"),N="TypedArrayConstructor",O=o&&!!y&&"Opera"!==A(l.opera),k=!1,D={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},U={BigInt64Array:8,BigUint64Array:8},Q=function(t){if(!u(t))return!1;var e=A(t);return"DataView"===e||h(D,e)||h(U,e)},G=function(t){var e=v(t);if(u(e)){var n=E(e);return n&&h(n,N)?n[N]:G(e)}},H=function(t){if(!u(t))return!1;var e=A(t);return h(D,e)||h(U,e)},V=function(t){if(H(t))return t;throw new R("Target is not a typed array")},j=function(t){if(c(t)&&(!y||m(I,t)))return t;throw new R(d(t)+" is not a typed array constructor")},W=function(t,e,n,i){if(a){if(n)for(var r in D){var s=l[r];if(s&&h(s.prototype,t))try{delete s.prototype[t]}catch(o){try{s.prototype[t]=e}catch(c){}}}F[t]&&!n||p(F,t,n?e:O&&S[t]||e,i)}},z=function(t,e,n){var i,r;if(a){if(y){if(n)for(i in D)if(r=l[i],r&&h(r,t))try{delete r[t]}catch(s){}if(I[t]&&!n)return;try{return p(I,t,n?e:O&&I[t]||e)}catch(s){}}for(i in D)r=l[i],!r||r[t]&&!n||p(r,t,e)}};for(i in D)r=l[i],s=r&&r.prototype,s?x(s)[N]=r:O=!1;for(i in U)r=l[i],s=r&&r.prototype,s&&(x(s)[N]=r);if((!O||!c(I)||I===Function.prototype)&&(I=function(){throw new R("Incorrect invocation")},O))for(i in D)l[i]&&y(l[i],I);if((!O||!F||F===L)&&(F=I.prototype,O))for(i in D)l[i]&&y(l[i].prototype,F);if(O&&v(T)!==F&&y(T,F),a&&!h(F,M))for(i in k=!0,g(F,M,{configurable:!0,get:function(){return u(this)?this[P]:void 0}}),D)l[i]&&f(l[i],P,i);t.exports={NATIVE_ARRAY_BUFFER_VIEWS:O,TYPED_ARRAY_TAG:k&&P,aTypedArray:V,aTypedArrayConstructor:j,exportTypedArrayMethod:W,exportTypedArrayStaticMethod:z,getTypedArrayConstructor:G,isView:Q,isTypedArray:H,TypedArray:I,TypedArrayPrototype:F}},5370:function(t,e,n){"use strict";var i=n(6198);t.exports=function(t,e,n){var r=0,s=arguments.length>2?n:i(e),o=new t(s);while(s>r)o[r]=e[r++];return o}},9617:function(t,e,n){"use strict";var i=n(5397),r=n(5610),s=n(6198),o=function(t){return function(e,n,o){var a=i(e),l=s(a);if(0===l)return!t&&-1;var c,u=r(o,l);if(t&&n!==n){while(l>u)if(c=a[u++],c!==c)return!0}else for(;l>u;u++)if((t||u in a)&&a[u]===n)return t||u||0;return!t&&-1}};t.exports={includes:o(!0),indexOf:o(!1)}},4527:function(t,e,n){"use strict";var i=n(3724),r=n(4376),s=TypeError,o=Object.getOwnPropertyDescriptor,a=i&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}();t.exports=a?function(t,e){if(r(t)&&!o(t,"length").writable)throw new s("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e}},7628:function(t,e,n){"use strict";var i=n(6198);t.exports=function(t,e){for(var n=i(t),r=new e(n),s=0;s<n;s++)r[s]=t[n-s-1];return r}},9928:function(t,e,n){"use strict";var i=n(6198),r=n(1291),s=RangeError;t.exports=function(t,e,n,o){var a=i(t),l=r(n),c=l<0?a+l:l;if(c>=a||c<0)throw new s("Incorrect index");for(var u=new e(a),h=0;h<a;h++)u[h]=h===c?o:t[h];return u}},4576:function(t,e,n){"use strict";var i=n(9504),r=i({}.toString),s=i("".slice);t.exports=function(t){return s(r(t),8,-1)}},6955:function(t,e,n){"use strict";var i=n(2140),r=n(4901),s=n(4576),o=n(8227),a=o("toStringTag"),l=Object,c="Arguments"===s(function(){return arguments}()),u=function(t,e){try{return t[e]}catch(n){}};t.exports=i?s:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=u(e=l(t),a))?n:c?s(e):"Object"===(i=s(e))&&r(e.callee)?"Arguments":i}},7740:function(t,e,n){"use strict";var i=n(9297),r=n(5031),s=n(7347),o=n(4913);t.exports=function(t,e,n){for(var a=r(e),l=o.f,c=s.f,u=0;u<a.length;u++){var h=a[u];i(t,h)||n&&i(n,h)||l(t,h,c(e,h))}}},2211:function(t,e,n){"use strict";var i=n(9039);t.exports=!i((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}))},6699:function(t,e,n){"use strict";var i=n(3724),r=n(4913),s=n(6980);t.exports=i?function(t,e,n){return r.f(t,e,s(1,n))}:function(t,e,n){return t[e]=n,t}},6980:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},2106:function(t,e,n){"use strict";var i=n(283),r=n(4913);t.exports=function(t,e,n){return n.get&&i(n.get,e,{getter:!0}),n.set&&i(n.set,e,{setter:!0}),r.f(t,e,n)}},6840:function(t,e,n){"use strict";var i=n(4901),r=n(4913),s=n(283),o=n(9433);t.exports=function(t,e,n,a){a||(a={});var l=a.enumerable,c=void 0!==a.name?a.name:e;if(i(n)&&s(n,c,a),a.global)l?t[e]=n:o(e,n);else{try{a.unsafe?t[e]&&(l=!0):delete t[e]}catch(u){}l?t[e]=n:r.f(t,e,{value:n,enumerable:!1,configurable:!a.nonConfigurable,writable:!a.nonWritable})}return t}},9433:function(t,e,n){"use strict";var i=n(4475),r=Object.defineProperty;t.exports=function(t,e){try{r(i,t,{value:e,configurable:!0,writable:!0})}catch(n){i[t]=e}return e}},3724:function(t,e,n){"use strict";var i=n(9039);t.exports=!i((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]}))},4483:function(t,e,n){"use strict";var i,r,s,o,a=n(4475),l=n(9714),c=n(1548),u=a.structuredClone,h=a.ArrayBuffer,A=a.MessageChannel,d=!1;if(c)d=function(t){u(t,{transfer:[t]})};else if(h)try{A||(i=l("worker_threads"),i&&(A=i.MessageChannel)),A&&(r=new A,s=new h(2),o=function(t){r.port1.postMessage(null,[t])},2===s.byteLength&&(o(s),0===s.byteLength&&(d=o)))}catch(f){}t.exports=d},4055:function(t,e,n){"use strict";var i=n(4475),r=n(34),s=i.document,o=r(s)&&r(s.createElement);t.exports=function(t){return o?s.createElement(t):{}}},6837:function(t){"use strict";var e=TypeError,n=9007199254740991;t.exports=function(t){if(t>n)throw e("Maximum allowed index exceeded");return t}},5002:function(t){"use strict";t.exports={IndexSizeError:{s:"INDEX_SIZE_ERR",c:1,m:1},DOMStringSizeError:{s:"DOMSTRING_SIZE_ERR",c:2,m:0},HierarchyRequestError:{s:"HIERARCHY_REQUEST_ERR",c:3,m:1},WrongDocumentError:{s:"WRONG_DOCUMENT_ERR",c:4,m:1},InvalidCharacterError:{s:"INVALID_CHARACTER_ERR",c:5,m:1},NoDataAllowedError:{s:"NO_DATA_ALLOWED_ERR",c:6,m:0},NoModificationAllowedError:{s:"NO_MODIFICATION_ALLOWED_ERR",c:7,m:1},NotFoundError:{s:"NOT_FOUND_ERR",c:8,m:1},NotSupportedError:{s:"NOT_SUPPORTED_ERR",c:9,m:1},InUseAttributeError:{s:"INUSE_ATTRIBUTE_ERR",c:10,m:1},InvalidStateError:{s:"INVALID_STATE_ERR",c:11,m:1},SyntaxError:{s:"SYNTAX_ERR",c:12,m:1},InvalidModificationError:{s:"INVALID_MODIFICATION_ERR",c:13,m:1},NamespaceError:{s:"NAMESPACE_ERR",c:14,m:1},InvalidAccessError:{s:"INVALID_ACCESS_ERR",c:15,m:1},ValidationError:{s:"VALIDATION_ERR",c:16,m:0},TypeMismatchError:{s:"TYPE_MISMATCH_ERR",c:17,m:1},SecurityError:{s:"SECURITY_ERR",c:18,m:1},NetworkError:{s:"NETWORK_ERR",c:19,m:1},AbortError:{s:"ABORT_ERR",c:20,m:1},URLMismatchError:{s:"URL_MISMATCH_ERR",c:21,m:1},QuotaExceededError:{s:"QUOTA_EXCEEDED_ERR",c:22,m:1},TimeoutError:{s:"TIMEOUT_ERR",c:23,m:1},InvalidNodeTypeError:{s:"INVALID_NODE_TYPE_ERR",c:24,m:1},DataCloneError:{s:"DATA_CLONE_ERR",c:25,m:1}}},7290:function(t,e,n){"use strict";var i=n(516),r=n(9088);t.exports=!i&&!r&&"object"==typeof window&&"object"==typeof document},516:function(t){"use strict";t.exports="object"==typeof Deno&&Deno&&"object"==typeof Deno.version},9088:function(t,e,n){"use strict";var i=n(4475),r=n(4576);t.exports="process"===r(i.process)},9392:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},7388:function(t,e,n){"use strict";var i,r,s=n(4475),o=n(9392),a=s.process,l=s.Deno,c=a&&a.versions||l&&l.version,u=c&&c.v8;u&&(i=u.split("."),r=i[0]>0&&i[0]<4?1:+(i[0]+i[1])),!r&&o&&(i=o.match(/Edge\/(\d+)/),(!i||i[1]>=74)&&(i=o.match(/Chrome\/(\d+)/),i&&(r=+i[1]))),t.exports=r},8727:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},6193:function(t,e,n){"use strict";var i=n(9504),r=Error,s=i("".replace),o=function(t){return String(new r(t).stack)}("zxcasd"),a=/\n\s*at [^:]*:[^\n]*/,l=a.test(o);t.exports=function(t,e){if(l&&"string"==typeof t&&!r.prepareStackTrace)while(e--)t=s(t,a,"");return t}},6518:function(t,e,n){"use strict";var i=n(4475),r=n(7347).f,s=n(6699),o=n(6840),a=n(9433),l=n(7740),c=n(2796);t.exports=function(t,e){var n,u,h,A,d,f,p=t.target,g=t.global,m=t.stat;if(u=g?i:m?i[p]||a(p,{}):i[p]&&i[p].prototype,u)for(h in e){if(d=e[h],t.dontCallGetSet?(f=r(u,h),A=f&&f.value):A=u[h],n=c(g?h:p+(m?".":"#")+h,t.forced),!n&&void 0!==A){if(typeof d==typeof A)continue;l(d,A)}(t.sham||A&&A.sham)&&s(d,"sham",!0),o(u,h,d,t)}}},9039:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(e){return!0}}},616:function(t,e,n){"use strict";var i=n(9039);t.exports=!i((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")}))},9565:function(t,e,n){"use strict";var i=n(616),r=Function.prototype.call;t.exports=i?r.bind(r):function(){return r.apply(r,arguments)}},350:function(t,e,n){"use strict";var i=n(3724),r=n(9297),s=Function.prototype,o=i&&Object.getOwnPropertyDescriptor,a=r(s,"name"),l=a&&"something"===function(){}.name,c=a&&(!i||i&&o(s,"name").configurable);t.exports={EXISTS:a,PROPER:l,CONFIGURABLE:c}},6706:function(t,e,n){"use strict";var i=n(9504),r=n(9306);t.exports=function(t,e,n){try{return i(r(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(s){}}},9504:function(t,e,n){"use strict";var i=n(616),r=Function.prototype,s=r.call,o=i&&r.bind.bind(s,s);t.exports=i?o:function(t){return function(){return s.apply(t,arguments)}}},7751:function(t,e,n){"use strict";var i=n(4475),r=n(4901),s=function(t){return r(t)?t:void 0};t.exports=function(t,e){return arguments.length<2?s(i[t]):i[t]&&i[t][e]}},5966:function(t,e,n){"use strict";var i=n(9306),r=n(4117);t.exports=function(t,e){var n=t[e];return r(n)?void 0:i(n)}},4475:function(t,e,n){"use strict";var i=function(t){return t&&t.Math===Math&&t};t.exports=i("object"==typeof globalThis&&globalThis)||i("object"==typeof window&&window)||i("object"==typeof self&&self)||i("object"==typeof n.g&&n.g)||i("object"==typeof this&&this)||function(){return this}()||Function("return this")()},9297:function(t,e,n){"use strict";var i=n(9504),r=n(8981),s=i({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return s(r(t),e)}},421:function(t){"use strict";t.exports={}},5917:function(t,e,n){"use strict";var i=n(3724),r=n(9039),s=n(4055);t.exports=!i&&!r((function(){return 7!==Object.defineProperty(s("div"),"a",{get:function(){return 7}}).a}))},7055:function(t,e,n){"use strict";var i=n(9504),r=n(9039),s=n(4576),o=Object,a=i("".split);t.exports=r((function(){return!o("z").propertyIsEnumerable(0)}))?function(t){return"String"===s(t)?a(t,""):o(t)}:o},3167:function(t,e,n){"use strict";var i=n(4901),r=n(34),s=n(2967);t.exports=function(t,e,n){var o,a;return s&&i(o=e.constructor)&&o!==n&&r(a=o.prototype)&&a!==n.prototype&&s(t,a),t}},3706:function(t,e,n){"use strict";var i=n(9504),r=n(4901),s=n(7629),o=i(Function.toString);r(s.inspectSource)||(s.inspectSource=function(t){return o(t)}),t.exports=s.inspectSource},1181:function(t,e,n){"use strict";var i,r,s,o=n(8622),a=n(4475),l=n(34),c=n(6699),u=n(9297),h=n(7629),A=n(6119),d=n(421),f="Object already initialized",p=a.TypeError,g=a.WeakMap,m=function(t){return s(t)?r(t):i(t,{})},v=function(t){return function(e){var n;if(!l(e)||(n=r(e)).type!==t)throw new p("Incompatible receiver, "+t+" required");return n}};if(o||h.state){var y=h.state||(h.state=new g);y.get=y.get,y.has=y.has,y.set=y.set,i=function(t,e){if(y.has(t))throw new p(f);return e.facade=t,y.set(t,e),e},r=function(t){return y.get(t)||{}},s=function(t){return y.has(t)}}else{var w=A("state");d[w]=!0,i=function(t,e){if(u(t,w))throw new p(f);return e.facade=t,c(t,w,e),e},r=function(t){return u(t,w)?t[w]:{}},s=function(t){return u(t,w)}}t.exports={set:i,get:r,has:s,enforce:m,getterFor:v}},4376:function(t,e,n){"use strict";var i=n(4576);t.exports=Array.isArray||function(t){return"Array"===i(t)}},1108:function(t,e,n){"use strict";var i=n(6955);t.exports=function(t){var e=i(t);return"BigInt64Array"===e||"BigUint64Array"===e}},4901:function(t){"use strict";var e="object"==typeof document&&document.all;t.exports="undefined"==typeof e&&void 0!==e?function(t){return"function"==typeof t||t===e}:function(t){return"function"==typeof t}},2796:function(t,e,n){"use strict";var i=n(9039),r=n(4901),s=/#|\.prototype\./,o=function(t,e){var n=l[a(t)];return n===u||n!==c&&(r(e)?i(e):!!e)},a=o.normalize=function(t){return String(t).replace(s,".").toLowerCase()},l=o.data={},c=o.NATIVE="N",u=o.POLYFILL="P";t.exports=o},4117:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},34:function(t,e,n){"use strict";var i=n(4901);t.exports=function(t){return"object"==typeof t?null!==t:i(t)}},3925:function(t,e,n){"use strict";var i=n(34);t.exports=function(t){return i(t)||null===t}},6395:function(t){"use strict";t.exports=!1},757:function(t,e,n){"use strict";var i=n(7751),r=n(4901),s=n(1625),o=n(7040),a=Object;t.exports=o?function(t){return"symbol"==typeof t}:function(t){var e=i("Symbol");return r(e)&&s(e.prototype,a(t))}},6198:function(t,e,n){"use strict";var i=n(8014);t.exports=function(t){return i(t.length)}},283:function(t,e,n){"use strict";var i=n(9504),r=n(9039),s=n(4901),o=n(9297),a=n(3724),l=n(350).CONFIGURABLE,c=n(3706),u=n(1181),h=u.enforce,A=u.get,d=String,f=Object.defineProperty,p=i("".slice),g=i("".replace),m=i([].join),v=a&&!r((function(){return 8!==f((function(){}),"length",{value:8}).length})),y=String(String).split("String"),w=t.exports=function(t,e,n){"Symbol("===p(d(e),0,7)&&(e="["+g(d(e),/^Symbol\(([^)]*)\).*$/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!o(t,"name")||l&&t.name!==e)&&(a?f(t,"name",{value:e,configurable:!0}):t.name=e),v&&n&&o(n,"arity")&&t.length!==n.arity&&f(t,"length",{value:n.arity});try{n&&o(n,"constructor")&&n.constructor?a&&f(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(r){}var i=h(t);return o(i,"source")||(i.source=m(y,"string"==typeof e?e:"")),t};Function.prototype.toString=w((function(){return s(this)&&A(this).source||c(this)}),"toString")},741:function(t){"use strict";var e=Math.ceil,n=Math.floor;t.exports=Math.trunc||function(t){var i=+t;return(i>0?n:e)(i)}},2603:function(t,e,n){"use strict";var i=n(655);t.exports=function(t,e){return void 0===t?arguments.length<2?"":e:i(t)}},4913:function(t,e,n){"use strict";var i=n(3724),r=n(5917),s=n(8686),o=n(8551),a=n(6969),l=TypeError,c=Object.defineProperty,u=Object.getOwnPropertyDescriptor,h="enumerable",A="configurable",d="writable";e.f=i?s?function(t,e,n){if(o(t),e=a(e),o(n),"function"===typeof t&&"prototype"===e&&"value"in n&&d in n&&!n[d]){var i=u(t,e);i&&i[d]&&(t[e]=n.value,n={configurable:A in n?n[A]:i[A],enumerable:h in n?n[h]:i[h],writable:!1})}return c(t,e,n)}:c:function(t,e,n){if(o(t),e=a(e),o(n),r)try{return c(t,e,n)}catch(i){}if("get"in n||"set"in n)throw new l("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},7347:function(t,e,n){"use strict";var i=n(3724),r=n(9565),s=n(8773),o=n(6980),a=n(5397),l=n(6969),c=n(9297),u=n(5917),h=Object.getOwnPropertyDescriptor;e.f=i?h:function(t,e){if(t=a(t),e=l(e),u)try{return h(t,e)}catch(n){}if(c(t,e))return o(!r(s.f,t,e),t[e])}},8480:function(t,e,n){"use strict";var i=n(1828),r=n(8727),s=r.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,s)}},3717:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},2787:function(t,e,n){"use strict";var i=n(9297),r=n(4901),s=n(8981),o=n(6119),a=n(2211),l=o("IE_PROTO"),c=Object,u=c.prototype;t.exports=a?c.getPrototypeOf:function(t){var e=s(t);if(i(e,l))return e[l];var n=e.constructor;return r(n)&&e instanceof n?n.prototype:e instanceof c?u:null}},1625:function(t,e,n){"use strict";var i=n(9504);t.exports=i({}.isPrototypeOf)},1828:function(t,e,n){"use strict";var i=n(9504),r=n(9297),s=n(5397),o=n(9617).indexOf,a=n(421),l=i([].push);t.exports=function(t,e){var n,i=s(t),c=0,u=[];for(n in i)!r(a,n)&&r(i,n)&&l(u,n);while(e.length>c)r(i,n=e[c++])&&(~o(u,n)||l(u,n));return u}},8773:function(t,e){"use strict";var n={}.propertyIsEnumerable,i=Object.getOwnPropertyDescriptor,r=i&&!n.call({1:2},1);e.f=r?function(t){var e=i(this,t);return!!e&&e.enumerable}:n},2967:function(t,e,n){"use strict";var i=n(6706),r=n(8551),s=n(3506);t.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=i(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(o){}return function(n,i){return r(n),s(i),e?t(n,i):n.__proto__=i,n}}():void 0)},4270:function(t,e,n){"use strict";var i=n(9565),r=n(4901),s=n(34),o=TypeError;t.exports=function(t,e){var n,a;if("string"===e&&r(n=t.toString)&&!s(a=i(n,t)))return a;if(r(n=t.valueOf)&&!s(a=i(n,t)))return a;if("string"!==e&&r(n=t.toString)&&!s(a=i(n,t)))return a;throw new o("Can't convert object to primitive value")}},5031:function(t,e,n){"use strict";var i=n(7751),r=n(9504),s=n(8480),o=n(3717),a=n(8551),l=r([].concat);t.exports=i("Reflect","ownKeys")||function(t){var e=s.f(a(t)),n=o.f;return n?l(e,n(t)):e}},7979:function(t,e,n){"use strict";var i=n(8551);t.exports=function(){var t=i(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e}},7750:function(t,e,n){"use strict";var i=n(4117),r=TypeError;t.exports=function(t){if(i(t))throw new r("Can't call method on "+t);return t}},6119:function(t,e,n){"use strict";var i=n(5745),r=n(3392),s=i("keys");t.exports=function(t){return s[t]||(s[t]=r(t))}},7629:function(t,e,n){"use strict";var i=n(6395),r=n(4475),s=n(9433),o="__core-js_shared__",a=t.exports=r[o]||s(o,{});(a.versions||(a.versions=[])).push({version:"3.36.0",mode:i?"pure":"global",copyright:" 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.36.0/LICENSE",source:"https://github.com/zloirock/core-js"})},5745:function(t,e,n){"use strict";var i=n(7629);t.exports=function(t,e){return i[t]||(i[t]=e||{})}},1548:function(t,e,n){"use strict";var i=n(4475),r=n(9039),s=n(7388),o=n(7290),a=n(516),l=n(9088),c=i.structuredClone;t.exports=!!c&&!r((function(){if(a&&s>92||l&&s>94||o&&s>97)return!1;var t=new ArrayBuffer(8),e=c(t,{transfer:[t]});return 0!==t.byteLength||8!==e.byteLength}))},4495:function(t,e,n){"use strict";var i=n(7388),r=n(9039),s=n(4475),o=s.String;t.exports=!!Object.getOwnPropertySymbols&&!r((function(){var t=Symbol("symbol detection");return!o(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&i&&i<41}))},5610:function(t,e,n){"use strict";var i=n(1291),r=Math.max,s=Math.min;t.exports=function(t,e){var n=i(t);return n<0?r(n+e,0):s(n,e)}},5854:function(t,e,n){"use strict";var i=n(2777),r=TypeError;t.exports=function(t){var e=i(t,"number");if("number"==typeof e)throw new r("Can't convert number to bigint");return BigInt(e)}},7696:function(t,e,n){"use strict";var i=n(1291),r=n(8014),s=RangeError;t.exports=function(t){if(void 0===t)return 0;var e=i(t),n=r(e);if(e!==n)throw new s("Wrong length or index");return n}},5397:function(t,e,n){"use strict";var i=n(7055),r=n(7750);t.exports=function(t){return i(r(t))}},1291:function(t,e,n){"use strict";var i=n(741);t.exports=function(t){var e=+t;return e!==e||0===e?0:i(e)}},8014:function(t,e,n){"use strict";var i=n(1291),r=Math.min;t.exports=function(t){var e=i(t);return e>0?r(e,9007199254740991):0}},8981:function(t,e,n){"use strict";var i=n(7750),r=Object;t.exports=function(t){return r(i(t))}},2777:function(t,e,n){"use strict";var i=n(9565),r=n(34),s=n(757),o=n(5966),a=n(4270),l=n(8227),c=TypeError,u=l("toPrimitive");t.exports=function(t,e){if(!r(t)||s(t))return t;var n,l=o(t,u);if(l){if(void 0===e&&(e="default"),n=i(l,t,e),!r(n)||s(n))return n;throw new c("Can't convert object to primitive value")}return void 0===e&&(e="number"),a(t,e)}},6969:function(t,e,n){"use strict";var i=n(2777),r=n(757);t.exports=function(t){var e=i(t,"string");return r(e)?e:e+""}},2140:function(t,e,n){"use strict";var i=n(8227),r=i("toStringTag"),s={};s[r]="z",t.exports="[object z]"===String(s)},655:function(t,e,n){"use strict";var i=n(6955),r=String;t.exports=function(t){if("Symbol"===i(t))throw new TypeError("Cannot convert a Symbol value to a string");return r(t)}},9714:function(t,e,n){"use strict";var i=n(9088);t.exports=function(t){try{if(i)return Function('return require("'+t+'")')()}catch(e){}}},6823:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(n){return"Object"}}},3392:function(t,e,n){"use strict";var i=n(9504),r=0,s=Math.random(),o=i(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+o(++r+s,36)}},7040:function(t,e,n){"use strict";var i=n(4495);t.exports=i&&!Symbol.sham&&"symbol"==typeof Symbol.iterator},8686:function(t,e,n){"use strict";var i=n(3724),r=n(9039);t.exports=i&&r((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype}))},2812:function(t){"use strict";var e=TypeError;t.exports=function(t,n){if(t<n)throw new e("Not enough arguments");return t}},8622:function(t,e,n){"use strict";var i=n(4475),r=n(4901),s=i.WeakMap;t.exports=r(s)&&/native code/.test(String(s))},8227:function(t,e,n){"use strict";var i=n(4475),r=n(5745),s=n(9297),o=n(3392),a=n(4495),l=n(7040),c=i.Symbol,u=r("wks"),h=l?c["for"]||c:c&&c.withoutSetter||o;t.exports=function(t){return s(u,t)||(u[t]=a&&s(c,t)?c[t]:h("Symbol."+t)),u[t]}},6573:function(t,e,n){"use strict";var i=n(3724),r=n(2106),s=n(3238),o=ArrayBuffer.prototype;i&&!("detached"in o)&&r(o,"detached",{configurable:!0,get:function(){return s(this)}})},7936:function(t,e,n){"use strict";var i=n(6518),r=n(5636);r&&i({target:"ArrayBuffer",proto:!0},{transferToFixedLength:function(){return r(this,arguments.length?arguments[0]:void 0,!1)}})},8100:function(t,e,n){"use strict";var i=n(6518),r=n(5636);r&&i({target:"ArrayBuffer",proto:!0},{transfer:function(){return r(this,arguments.length?arguments[0]:void 0,!0)}})},4114:function(t,e,n){"use strict";var i=n(6518),r=n(8981),s=n(6198),o=n(4527),a=n(6837),l=n(9039),c=l((function(){return 4294967297!==[].push.call({length:4294967296},1)})),u=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}},h=c||!u();i({target:"Array",proto:!0,arity:1,forced:h},{push:function(t){var e=r(this),n=s(e),i=arguments.length;a(n+i);for(var l=0;l<i;l++)e[n]=arguments[l],n++;return o(e,n),n}})},9479:function(t,e,n){"use strict";var i=n(4475),r=n(3724),s=n(2106),o=n(7979),a=n(9039),l=i.RegExp,c=l.prototype,u=r&&a((function(){var t=!0;try{l(".","d")}catch(u){t=!1}var e={},n="",i=t?"dgimsy":"gimsy",r=function(t,i){Object.defineProperty(e,t,{get:function(){return n+=i,!0}})},s={dotAll:"s",global:"g",ignoreCase:"i",multiline:"m",sticky:"y"};for(var o in t&&(s.hasIndices="d"),s)r(o,s[o]);var a=Object.getOwnPropertyDescriptor(c,"flags").get.call(e);return a!==i||n!==i}));u&&s(c,"flags",{configurable:!0,get:o})},7467:function(t,e,n){"use strict";var i=n(7628),r=n(4644),s=r.aTypedArray,o=r.exportTypedArrayMethod,a=r.getTypedArrayConstructor;o("toReversed",(function(){return i(s(this),a(this))}))},4732:function(t,e,n){"use strict";var i=n(4644),r=n(9504),s=n(9306),o=n(5370),a=i.aTypedArray,l=i.getTypedArrayConstructor,c=i.exportTypedArrayMethod,u=r(i.TypedArrayPrototype.sort);c("toSorted",(function(t){void 0!==t&&s(t);var e=a(this),n=o(l(e),e);return u(n,t)}))},9577:function(t,e,n){"use strict";var i=n(9928),r=n(4644),s=n(1108),o=n(1291),a=n(5854),l=r.aTypedArray,c=r.getTypedArrayConstructor,u=r.exportTypedArrayMethod,h=!!function(){try{new Int8Array(1)["with"](2,{valueOf:function(){throw 8}})}catch(t){return 8===t}}();u("with",{with:function(t,e){var n=l(this),r=o(t),u=s(n)?a(e):+e;return i(n,c(n),r,u)}}["with"],!h)},6280:function(t,e,n){"use strict";n(6573)},7801:function(t,e,n){"use strict";n(7936)},7913:function(t,e,n){"use strict";n(8100)},4979:function(t,e,n){"use strict";var i=n(6518),r=n(4475),s=n(7751),o=n(6980),a=n(4913).f,l=n(9297),c=n(679),u=n(3167),h=n(2603),A=n(5002),d=n(6193),f=n(3724),p=n(6395),g="DOMException",m=s("Error"),v=s(g),y=function(){c(this,w);var t=arguments.length,e=h(t<1?void 0:arguments[0]),n=h(t<2?void 0:arguments[1],"Error"),i=new v(e,n),r=new m(e);return r.name=g,a(i,"stack",o(1,d(r.stack,1))),u(i,this,y),i},w=y.prototype=v.prototype,_="stack"in new m(g),b="stack"in new v(1,2),x=v&&f&&Object.getOwnPropertyDescriptor(r,g),E=!!x&&!(x.writable&&x.configurable),C=_&&!E&&!b;i({global:!0,constructor:!0,forced:p||C},{DOMException:C?y:v});var S=s(g),B=S.prototype;if(B.constructor!==S)for(var T in p||a(B,"constructor",o(1,S)),A)if(l(A,T)){var I=A[T],F=I.s;l(S,F)||a(S,F,o(6,I.c))}},4603:function(t,e,n){"use strict";var i=n(6840),r=n(9504),s=n(655),o=n(2812),a=URLSearchParams,l=a.prototype,c=r(l.append),u=r(l["delete"]),h=r(l.forEach),A=r([].push),d=new a("a=1&a=2&b=3");d["delete"]("a",1),d["delete"]("b",void 0),d+""!=="a=2"&&i(l,"delete",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return u(this,t);var i=[];h(this,(function(t,e){A(i,{key:e,value:t})})),o(e,1);var r,a=s(t),l=s(n),d=0,f=0,p=!1,g=i.length;while(d<g)r=i[d++],p||r.key===a?(p=!0,u(this,r.key)):f++;while(f<g)r=i[f++],r.key===a&&r.value===l||c(this,r.key,r.value)}),{enumerable:!0,unsafe:!0})},7566:function(t,e,n){"use strict";var i=n(6840),r=n(9504),s=n(655),o=n(2812),a=URLSearchParams,l=a.prototype,c=r(l.getAll),u=r(l.has),h=new a("a=1");!h.has("a",2)&&h.has("a",void 0)||i(l,"has",(function(t){var e=arguments.length,n=e<2?void 0:arguments[1];if(e&&void 0===n)return u(this,t);var i=c(this,t);o(e,1);var r=s(n),a=0;while(a<i.length)if(i[a++]===r)return!0;return!1}),{enumerable:!0,unsafe:!0})},8721:function(t,e,n){"use strict";var i=n(3724),r=n(9504),s=n(2106),o=URLSearchParams.prototype,a=r(o.forEach);i&&!("size"in o)&&s(o,"size",{get:function(){var t=0;return a(this,(function(){t++})),t},configurable:!0,enumerable:!0})},3405:function(t,e,n){"use strict";n.d(e,{MF:function(){return gt},j6:function(){return ht},om:function(){return ut},Us:function(){return At},Sx:function(){return vt},Wp:function(){return mt},KO:function(){return yt}});n(4114);var i=n(852),r=n(1363),s=n(4046);n(4979);const o=(t,e)=>e.some((e=>t instanceof e));let a,l;function c(){return a||(a=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function u(){return l||(l=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const h=new WeakMap,A=new WeakMap,d=new WeakMap,f=new WeakMap,p=new WeakMap;function g(t){const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("success",r),t.removeEventListener("error",s)},r=()=>{e(b(t.result)),i()},s=()=>{n(t.error),i()};t.addEventListener("success",r),t.addEventListener("error",s)}));return e.then((e=>{e instanceof IDBCursor&&h.set(e,t)})).catch((()=>{})),p.set(e,t),e}function m(t){if(A.has(t))return;const e=new Promise(((e,n)=>{const i=()=>{t.removeEventListener("complete",r),t.removeEventListener("error",s),t.removeEventListener("abort",s)},r=()=>{e(),i()},s=()=>{n(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",r),t.addEventListener("error",s),t.addEventListener("abort",s)}));A.set(t,e)}let v={get(t,e,n){if(t instanceof IDBTransaction){if("done"===e)return A.get(t);if("objectStoreNames"===e)return t.objectStoreNames||d.get(t);if("store"===e)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return b(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&("done"===e||"store"===e)||e in t}};function y(t){v=t(v)}function w(t){return t!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?u().includes(t)?function(...e){return t.apply(x(this),e),b(h.get(this))}:function(...e){return b(t.apply(x(this),e))}:function(e,...n){const i=t.call(x(this),e,...n);return d.set(i,e.sort?e.sort():[e]),b(i)}}function _(t){return"function"===typeof t?w(t):(t instanceof IDBTransaction&&m(t),o(t,c())?new Proxy(t,v):t)}function b(t){if(t instanceof IDBRequest)return g(t);if(f.has(t))return f.get(t);const e=_(t);return e!==t&&(f.set(t,e),p.set(e,t)),e}const x=t=>p.get(t);function E(t,e,{blocked:n,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(t,e),a=b(o);return i&&o.addEventListener("upgradeneeded",(t=>{i(b(o.result),t.oldVersion,t.newVersion,b(o.transaction),t)})),n&&o.addEventListener("blocked",(t=>n(t.oldVersion,t.newVersion,t))),a.then((t=>{s&&t.addEventListener("close",(()=>s())),r&&t.addEventListener("versionchange",(t=>r(t.oldVersion,t.newVersion,t)))})).catch((()=>{})),a}const C=["get","getKey","getAll","getAllKeys","count"],S=["put","add","delete","clear"],B=new Map;function T(t,e){if(!(t instanceof IDBDatabase)||e in t||"string"!==typeof e)return;if(B.get(e))return B.get(e);const n=e.replace(/FromIndex$/,""),i=e!==n,r=S.includes(n);if(!(n in(i?IDBIndex:IDBObjectStore).prototype)||!r&&!C.includes(n))return;const s=async function(t,...e){const s=this.transaction(t,r?"readwrite":"readonly");let o=s.store;return i&&(o=o.index(e.shift())),(await Promise.all([o[n](...e),r&&s.done]))[0]};return B.set(e,s),s}y((t=>({...t,get:(e,n,i)=>T(e,n)||t.get(e,n,i),has:(e,n)=>!!T(e,n)||t.has(e,n)})));
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class I{constructor(t){this.container=t}getPlatformInfoString(){const t=this.container.getProviders();return t.map((t=>{if(F(t)){const e=t.getImmediate();return`${e.library}/${e.version}`}return null})).filter((t=>t)).join(" ")}}function F(t){const e=t.getComponent();return"VERSION"===(null===e||void 0===e?void 0:e.type)}const L="@firebase/app",R="0.9.27",M=new r.Vy("@firebase/app"),P="@firebase/app-compat",N="@firebase/analytics-compat",O="@firebase/analytics",k="@firebase/app-check-compat",D="@firebase/app-check",U="@firebase/auth",Q="@firebase/auth-compat",G="@firebase/database",H="@firebase/database-compat",V="@firebase/functions",j="@firebase/functions-compat",W="@firebase/installations",z="@firebase/installations-compat",K="@firebase/messaging",q="@firebase/messaging-compat",$="@firebase/performance",X="@firebase/performance-compat",Y="@firebase/remote-config",Z="@firebase/remote-config-compat",J="@firebase/storage",tt="@firebase/storage-compat",et="@firebase/firestore",nt="@firebase/firestore-compat",it="firebase",rt="10.8.0",st="[DEFAULT]",ot={[L]:"fire-core",[P]:"fire-core-compat",[O]:"fire-analytics",[N]:"fire-analytics-compat",[D]:"fire-app-check",[k]:"fire-app-check-compat",[U]:"fire-auth",[Q]:"fire-auth-compat",[G]:"fire-rtdb",[H]:"fire-rtdb-compat",[V]:"fire-fn",[j]:"fire-fn-compat",[W]:"fire-iid",[z]:"fire-iid-compat",[K]:"fire-fcm",[q]:"fire-fcm-compat",[$]:"fire-perf",[X]:"fire-perf-compat",[Y]:"fire-rc",[Z]:"fire-rc-compat",[J]:"fire-gcs",[tt]:"fire-gcs-compat",[et]:"fire-fst",[nt]:"fire-fst-compat","fire-js":"fire-js",[it]:"fire-js-all"},at=new Map,lt=new Map;function ct(t,e){try{t.container.addComponent(e)}catch(n){M.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ut(t){const e=t.name;if(lt.has(e))return M.debug(`There were multiple attempts to register component ${e}.`),!1;lt.set(e,t);for(const n of at.values())ct(n,t);return!0}function ht(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function At(t,e,n=st){ht(t,e).clearInstance(n)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const dt={["no-app"]:"No Firebase App '{$appName}' has been created - call initializeApp() first",["bad-app-name"]:"Illegal App name: '{$appName}",["duplicate-app"]:"Firebase App named '{$appName}' already exists with different options or config",["app-deleted"]:"Firebase App named '{$appName}' already deleted",["no-options"]:"Need to provide options, when not being deployed to hosting via source.",["invalid-app-argument"]:"firebase.{$appName}() takes either no argument or a Firebase App instance.",["invalid-log-argument"]:"First argument to `onLog` must be null or a function.",["idb-open"]:"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",["idb-get"]:"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",["idb-set"]:"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",["idb-delete"]:"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ft=new s.FA("app","Firebase",dt);
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class pt{constructor(t,e,n){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new i.uA("app",(()=>this),"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw ft.create("app-deleted",{appName:this._name})}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gt=rt;function mt(t,e={}){let n=t;if("object"!==typeof e){const t=e;e={name:t}}const r=Object.assign({name:st,automaticDataCollectionEnabled:!1},e),o=r.name;if("string"!==typeof o||!o)throw ft.create("bad-app-name",{appName:String(o)});if(n||(n=(0,s.T9)()),!n)throw ft.create("no-options");const a=at.get(o);if(a){if((0,s.bD)(n,a.options)&&(0,s.bD)(r,a.config))return a;throw ft.create("duplicate-app",{appName:o})}const l=new i.h1(o);for(const i of lt.values())l.addComponent(i);const c=new pt(n,r,l);return at.set(o,c),c}function vt(t=st){const e=at.get(t);if(!e&&t===st&&(0,s.T9)())return mt();if(!e)throw ft.create("no-app",{appName:t});return e}function yt(t,e,n){var r;let s=null!==(r=ot[t])&&void 0!==r?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),a=e.match(/\s|\//);if(o||a){const t=[`Unable to register library "${s}" with version "${e}":`];return o&&t.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&a&&t.push("and"),a&&t.push(`version name "${e}" contains illegal characters (whitespace or "/")`),void M.warn(t.join(" "))}ut(new i.uA(`${s}-version`,(()=>({library:s,version:e})),"VERSION"))}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const wt="firebase-heartbeat-database",_t=1,bt="firebase-heartbeat-store";let xt=null;function Et(){return xt||(xt=E(wt,_t,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(bt)}catch(n){console.warn(n)}}}}).catch((t=>{throw ft.create("idb-open",{originalErrorMessage:t.message})}))),xt}async function Ct(t){try{const e=await Et(),n=e.transaction(bt),i=await n.objectStore(bt).get(Bt(t));return await n.done,i}catch(e){if(e instanceof s.g)M.warn(e.message);else{const t=ft.create("idb-get",{originalErrorMessage:null===e||void 0===e?void 0:e.message});M.warn(t.message)}}}async function St(t,e){try{const n=await Et(),i=n.transaction(bt,"readwrite"),r=i.objectStore(bt);await r.put(e,Bt(t)),await i.done}catch(n){if(n instanceof s.g)M.warn(n.message);else{const t=ft.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});M.warn(t.message)}}}function Bt(t){return`${t.name}!${t.options.appId}`}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tt=1024,It=2592e6;class Ft{constructor(t){this.container=t,this._heartbeatsCache=null;const e=this.container.getProvider("app").getImmediate();this._storage=new Mt(e),this._heartbeatsCachePromise=this._storage.read().then((t=>(this._heartbeatsCache=t,t)))}async triggerHeartbeat(){var t,e;const n=this.container.getProvider("platform-logger").getImmediate(),i=n.getPlatformInfoString(),r=Lt();if((null!=(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||(this._heartbeatsCache=await this._heartbeatsCachePromise,null!=(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)))&&this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((t=>t.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((t=>{const e=new Date(t.date).valueOf(),n=Date.now();return n-e<=It})),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const e=Lt(),{heartbeatsToSend:n,unsentEntries:i}=Rt(this._heartbeatsCache.heartbeats),r=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}}function Lt(){const t=new Date;return t.toISOString().substring(0,10)}function Rt(t,e=Tt){const n=[];let i=t.slice();for(const r of t){const t=n.find((t=>t.agent===r.agent));if(t){if(t.dates.push(r.date),Pt(n)>e){t.dates.pop();break}}else if(n.push({agent:r.agent,dates:[r.date]}),Pt(n)>e){n.pop();break}i=i.slice(1)}return{heartbeatsToSend:n,unsentEntries:i}}class Mt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then((()=>!0)).catch((()=>!1))}async read(){const t=await this._canUseIndexedDBPromise;if(t){const t=await Ct(this.app);return(null===t||void 0===t?void 0:t.heartbeats)?t:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return St(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:t.heartbeats})}}async add(t){var e;const n=await this._canUseIndexedDBPromise;if(n){const n=await this.read();return St(this.app,{lastSentHeartbeatDate:null!==(e=t.lastSentHeartbeatDate)&&void 0!==e?e:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...t.heartbeats]})}}}function Pt(t){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:t})).length}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nt(t){ut(new i.uA("platform-logger",(t=>new I(t)),"PRIVATE")),ut(new i.uA("heartbeat",(t=>new Ft(t)),"PRIVATE")),yt(L,R,t),yt(L,R,"esm2017"),yt("fire-js","")}Nt("")},852:function(t,e,n){"use strict";n.d(e,{h1:function(){return c},uA:function(){return r}});var i=n(4046);class r{constructor(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s="[DEFAULT]";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){const t=new i.cY;if(this.instancesDeferred.set(e,t),this.isInitialized(e)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:e});n&&t.resolve(n)}catch(n){}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;const n=this.normalizeInstanceIdentifier(null===t||void 0===t?void 0:t.identifier),i=null!==(e=null===t||void 0===t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(i)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(r){if(i)return null;throw r}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,this.shouldAutoInitialize()){if(l(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(e){}for(const[t,n]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(t);try{const t=this.getOrInitializeService({instanceIdentifier:i});n.resolve(t)}catch(e){}}}}clearInstance(t=s){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter((t=>"INTERNAL"in t)).map((t=>t.INTERNAL.delete())),...t.filter((t=>"_delete"in t)).map((t=>t._delete()))])}isComponentSet(){return null!=this.component}isInitialized(t=s){return this.instances.has(t)}getOptions(t=s){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:e={}}=t,n=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:n,options:e});for(const[r,s]of this.instancesDeferred.entries()){const t=this.normalizeInstanceIdentifier(r);n===t&&s.resolve(i)}return i}onInit(t,e){var n;const i=this.normalizeInstanceIdentifier(e),r=null!==(n=this.onInitCallbacks.get(i))&&void 0!==n?n:new Set;r.add(t),this.onInitCallbacks.set(i,r);const s=this.instances.get(i);return s&&t(s,i),()=>{r.delete(t)}}invokeOnInitCallbacks(t,e){const n=this.onInitCallbacks.get(e);if(n)for(const r of n)try{r(t,e)}catch(i){}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let n=this.instances.get(t);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:a(t),options:e}),this.instances.set(t,n),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(n,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,n)}catch(i){}return n||null}normalizeInstanceIdentifier(t=s){return this.component?this.component.multipleInstances?t:s:t}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}function a(t){return t===s?void 0:t}function l(t){return"EAGER"===t.instantiationMode}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){const e=this.getProvider(t.name);e.isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const e=new o(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}}},1363:function(t,e,n){"use strict";n.d(e,{$b:function(){return r},Vy:function(){return c}});n(4114);
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i=[];var r;(function(t){t[t["DEBUG"]=0]="DEBUG",t[t["VERBOSE"]=1]="VERBOSE",t[t["INFO"]=2]="INFO",t[t["WARN"]=3]="WARN",t[t["ERROR"]=4]="ERROR",t[t["SILENT"]=5]="SILENT"})(r||(r={}));const s={debug:r.DEBUG,verbose:r.VERBOSE,info:r.INFO,warn:r.WARN,error:r.ERROR,silent:r.SILENT},o=r.INFO,a={[r.DEBUG]:"log",[r.VERBOSE]:"log",[r.INFO]:"info",[r.WARN]:"warn",[r.ERROR]:"error"},l=(t,e,...n)=>{if(e<t.logLevel)return;const i=(new Date).toISOString(),r=a[e];if(!r)throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`);console[r](`[${i}]  ${t.name}:`,...n)};class c{constructor(t){this.name=t,this._logLevel=o,this._logHandler=l,this._userLogHandler=null,i.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in r))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel="string"===typeof t?s[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if("function"!==typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,r.DEBUG,...t),this._logHandler(this,r.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,r.VERBOSE,...t),this._logHandler(this,r.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,r.INFO,...t),this._logHandler(this,r.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,r.WARN,...t),this._logHandler(this,r.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,r.ERROR,...t),this._logHandler(this,r.ERROR,...t)}}},6400:function(t,e,n){"use strict";n.d(e,{Wp:function(){return i.Wp}});var i=n(3405),r="firebase",s="10.8.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
(0,i.KO)(r,s,"app")},8607:function(t,e,n){"use strict";n.r(e),n.d(e,{ActionCodeOperation:function(){return A},ActionCodeURL:function(){return Ue},AuthCredential:function(){return fe},AuthErrorCodes:function(){return v},EmailAuthCredential:function(){return Be},EmailAuthProvider:function(){return Ge},FacebookAuthProvider:function(){return We},FactorId:function(){return l},GithubAuthProvider:function(){return Ke},GoogleAuthProvider:function(){return ze},OAuthCredential:function(){return Fe},OAuthProvider:function(){return je},OperationType:function(){return h},PhoneAuthCredential:function(){return Oe},PhoneAuthProvider:function(){return _r},PhoneMultiFactorGenerator:function(){return Os},ProviderId:function(){return c},RecaptchaVerifier:function(){return dr},SAMLAuthProvider:function(){return Ye},SignInMethod:function(){return u},TotpMultiFactorGenerator:function(){return ks},TotpSecret:function(){return Us},TwitterAuthProvider:function(){return Ze},applyActionCode:function(){return En},beforeAuthStateChanged:function(){return Jn},browserLocalPersistence:function(){return xi},browserPopupRedirectResolver:function(){return Ms},browserSessionPersistence:function(){return Ci},checkActionCode:function(){return Cn},confirmPasswordReset:function(){return xn},connectAuthEmulator:function(){return ce},createUserWithEmailAndPassword:function(){return Bn},debugErrorMap:function(){return p},deleteUser:function(){return si},fetchSignInMethodsForEmail:function(){return Mn},getAdditionalUserInfo:function(){return qn},getAuth:function(){return Xs},getIdToken:function(){return it},getIdTokenResult:function(){return rt},getMultiFactorResolver:function(){return li},getRedirectResult:function(){return Kr},inMemoryPersistence:function(){return Et},indexedDBLocalPersistence:function(){return Xi},initializeAuth:function(){return ae},initializeRecaptchaConfig:function(){return Xn},isSignInWithEmailLink:function(){return Fn},linkWithCredential:function(){return dn},linkWithPhoneNumber:function(){return mr},linkWithPopup:function(){return Lr},linkWithRedirect:function(){return Wr},multiFactor:function(){return gi},onAuthStateChanged:function(){return ti},onIdTokenChanged:function(){return Zn},parseActionCodeURL:function(){return Qe},prodErrorMap:function(){return g},reauthenticateWithCredential:function(){return fn},reauthenticateWithPhoneNumber:function(){return vr},reauthenticateWithPopup:function(){return Fr},reauthenticateWithRedirect:function(){return Vr},reload:function(){return dt},revokeAccessToken:function(){return ri},sendEmailVerification:function(){return Pn},sendPasswordResetEmail:function(){return bn},sendSignInLinkToEmail:function(){return In},setPersistence:function(){return $n},signInAnonymously:function(){return nn},signInWithCredential:function(){return An},signInWithCustomToken:function(){return gn},signInWithEmailAndPassword:function(){return Tn},signInWithEmailLink:function(){return Ln},signInWithPhoneNumber:function(){return gr},signInWithPopup:function(){return Ir},signInWithRedirect:function(){return Gr},signOut:function(){return ii},unlink:function(){return an},updateCurrentUser:function(){return ni},updateEmail:function(){return Dn},updatePassword:function(){return Un},updatePhoneNumber:function(){return wr},updateProfile:function(){return kn},useDeviceLanguage:function(){return ei},validatePassword:function(){return Yn},verifyBeforeUpdateEmail:function(){return Nn},verifyPasswordResetCode:function(){return Sn}});n(4114),n(4603),n(7566),n(8721);var i=n(4046),r=n(3405),s=n(1363);function o(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"===typeof Object.getOwnPropertySymbols){var r=0;for(i=Object.getOwnPropertySymbols(t);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(t,i[r])&&(n[i[r]]=t[i[r]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var a=n(852);
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const l={PHONE:"phone",TOTP:"totp"},c={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},u={EMAIL_LINK:"emailLink",EMAIL_PASSWORD:"password",FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PHONE:"phone",TWITTER:"twitter.com"},h={LINK:"link",REAUTHENTICATE:"reauthenticate",SIGN_IN:"signIn"},A={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function d(){return{["admin-restricted-operation"]:"This operation is restricted to administrators only.",["argument-error"]:"",["app-not-authorized"]:"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.",["app-not-installed"]:"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.",["captcha-check-failed"]:"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.",["code-expired"]:"The SMS code has expired. Please re-send the verification code to try again.",["cordova-not-ready"]:"Cordova framework is not ready.",["cors-unsupported"]:"This browser is not supported.",["credential-already-in-use"]:"This credential is already associated with a different user account.",["custom-token-mismatch"]:"The custom token corresponds to a different audience.",["requires-recent-login"]:"This operation is sensitive and requires recent authentication. Log in again before retrying this request.",["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.",["dynamic-link-not-activated"]:"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.",["email-change-needs-verification"]:"Multi-factor users must always have a verified email.",["email-already-in-use"]:"The email address is already in use by another account.",["emulator-config-failed"]:'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',["expired-action-code"]:"The action code has expired.",["cancelled-popup-request"]:"This operation has been cancelled due to another conflicting popup being opened.",["internal-error"]:"An internal AuthError has occurred.",["invalid-app-credential"]:"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.",["invalid-app-id"]:"The mobile app identifier is not registed for the current project.",["invalid-user-token"]:"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.",["invalid-auth-event"]:"An internal AuthError has occurred.",["invalid-verification-code"]:"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.",["invalid-continue-uri"]:"The continue URL provided in the request is invalid.",["invalid-cordova-configuration"]:"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.",["invalid-custom-token"]:"The custom token format is incorrect. Please check the documentation.",["invalid-dynamic-link-domain"]:"The provided dynamic link domain is not configured or authorized for the current project.",["invalid-email"]:"The email address is badly formatted.",["invalid-emulator-scheme"]:"Emulator URL must start with a valid scheme (http:// or https://).",["invalid-api-key"]:"Your API key is invalid, please check you have copied it correctly.",["invalid-cert-hash"]:"The SHA-1 certificate hash provided is invalid.",["invalid-credential"]:"The supplied auth credential is incorrect, malformed or has expired.",["invalid-message-payload"]:"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-multi-factor-session"]:"The request does not contain a valid proof of first factor successful sign-in.",["invalid-oauth-provider"]:"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.",["invalid-oauth-client-id"]:"The OAuth client ID provided is either invalid or does not match the specified API key.",["unauthorized-domain"]:"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.",["invalid-action-code"]:"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.",["wrong-password"]:"The password is invalid or the user does not have a password.",["invalid-persistence-type"]:"The specified persistence type is invalid. It can only be local, session or none.",["invalid-phone-number"]:"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].",["invalid-provider-id"]:"The specified provider ID is invalid.",["invalid-recipient-email"]:"The email corresponding to this action failed to send as the provided recipient email address is invalid.",["invalid-sender"]:"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.",["invalid-verification-id"]:"The verification ID used to create the phone auth credential is invalid.",["invalid-tenant-id"]:"The Auth instance's tenant ID is invalid.",["login-blocked"]:"Login blocked by user-provided method: {$originalMessage}",["missing-android-pkg-name"]:"An Android Package Name must be provided if the Android App is required to be installed.",["auth-domain-config-required"]:"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.",["missing-app-credential"]:"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.",["missing-verification-code"]:"The phone auth credential was created with an empty SMS verification code.",["missing-continue-uri"]:"A continue URL must be provided in the request.",["missing-iframe-start"]:"An internal AuthError has occurred.",["missing-ios-bundle-id"]:"An iOS Bundle ID must be provided if an App Store ID is provided.",["missing-or-invalid-nonce"]:"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.",["missing-password"]:"A non-empty password must be provided",["missing-multi-factor-info"]:"No second factor identifier is provided.",["missing-multi-factor-session"]:"The request is missing proof of first factor successful sign-in.",["missing-phone-number"]:"To send verification codes, provide a phone number for the recipient.",["missing-verification-id"]:"The phone auth credential was created with an empty verification ID.",["app-deleted"]:"This instance of FirebaseApp has been deleted.",["multi-factor-info-not-found"]:"The user does not have a second factor matching the identifier provided.",["multi-factor-auth-required"]:"Proof of ownership of a second factor is required to complete sign-in.",["account-exists-with-different-credential"]:"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.",["network-request-failed"]:"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.",["no-auth-event"]:"An internal AuthError has occurred.",["no-such-provider"]:"User was not linked to an account with the given provider.",["null-user"]:"A null user object was provided as the argument for an operation which requires a non-null user object.",["operation-not-allowed"]:"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.",["operation-not-supported-in-this-environment"]:'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',["popup-blocked"]:"Unable to establish a connection with the popup. It may have been blocked by the browser.",["popup-closed-by-user"]:"The popup has been closed by the user before finalizing the operation.",["provider-already-linked"]:"User can only be linked to one identity for the given provider.",["quota-exceeded"]:"The project's quota for this operation has been exceeded.",["redirect-cancelled-by-user"]:"The redirect operation has been cancelled by the user before finalizing.",["redirect-operation-pending"]:"A redirect sign-in operation is already pending.",["rejected-credential"]:"The request contains malformed or mismatching credentials.",["second-factor-already-in-use"]:"The second factor is already enrolled on this account.",["maximum-second-factor-count-exceeded"]:"The maximum allowed number of second factors on a user has been exceeded.",["tenant-id-mismatch"]:"The provided tenant ID does not match the Auth instance's tenant ID",["timeout"]:"The operation has timed out.",["user-token-expired"]:"The user's credential is no longer valid. The user must sign in again.",["too-many-requests"]:"We have blocked all requests from this device due to unusual activity. Try again later.",["unauthorized-continue-uri"]:"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.",["unsupported-first-factor"]:"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.",["unsupported-persistence-type"]:"The current environment does not support the specified persistence type.",["unsupported-tenant-operation"]:"This operation is not supported in a multi-tenant context.",["unverified-email"]:"The operation requires a verified email.",["user-cancelled"]:"The user did not grant your application the permissions it requested.",["user-not-found"]:"There is no user record corresponding to this identifier. The user may have been deleted.",["user-disabled"]:"The user account has been disabled by an administrator.",["user-mismatch"]:"The supplied credentials do not correspond to the previously signed in user.",["user-signed-out"]:"",["weak-password"]:"The password must be 6 characters long or more.",["web-storage-unsupported"]:"This browser is not supported or 3rd party cookies and data may be disabled.",["already-initialized"]:"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.",["missing-recaptcha-token"]:"The reCAPTCHA token is missing when sending request to the backend.",["invalid-recaptcha-token"]:"The reCAPTCHA token is invalid when sending request to the backend.",["invalid-recaptcha-action"]:"The reCAPTCHA action is invalid when sending request to the backend.",["recaptcha-not-enabled"]:"reCAPTCHA Enterprise integration is not enabled for this project.",["missing-client-type"]:"The reCAPTCHA client type is missing when sending request to the backend.",["missing-recaptcha-version"]:"The reCAPTCHA version is missing when sending request to the backend.",["invalid-req-type"]:"Invalid request parameters.",["invalid-recaptcha-version"]:"The reCAPTCHA version is invalid when sending request to the backend.",["unsupported-password-policy-schema-version"]:"The password policy received from the backend uses a schema version that is not supported by this version of the Firebase SDK.",["password-does-not-meet-requirements"]:"The password does not meet the requirements."}}function f(){return{["dependent-sdk-initialized-before-auth"]:"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p=d,g=f,m=new i.FA("auth","Firebase",f()),v={ADMIN_ONLY_OPERATION:"auth/admin-restricted-operation",ARGUMENT_ERROR:"auth/argument-error",APP_NOT_AUTHORIZED:"auth/app-not-authorized",APP_NOT_INSTALLED:"auth/app-not-installed",CAPTCHA_CHECK_FAILED:"auth/captcha-check-failed",CODE_EXPIRED:"auth/code-expired",CORDOVA_NOT_READY:"auth/cordova-not-ready",CORS_UNSUPPORTED:"auth/cors-unsupported",CREDENTIAL_ALREADY_IN_USE:"auth/credential-already-in-use",CREDENTIAL_MISMATCH:"auth/custom-token-mismatch",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"auth/requires-recent-login",DEPENDENT_SDK_INIT_BEFORE_AUTH:"auth/dependent-sdk-initialized-before-auth",DYNAMIC_LINK_NOT_ACTIVATED:"auth/dynamic-link-not-activated",EMAIL_CHANGE_NEEDS_VERIFICATION:"auth/email-change-needs-verification",EMAIL_EXISTS:"auth/email-already-in-use",EMULATOR_CONFIG_FAILED:"auth/emulator-config-failed",EXPIRED_OOB_CODE:"auth/expired-action-code",EXPIRED_POPUP_REQUEST:"auth/cancelled-popup-request",INTERNAL_ERROR:"auth/internal-error",INVALID_API_KEY:"auth/invalid-api-key",INVALID_APP_CREDENTIAL:"auth/invalid-app-credential",INVALID_APP_ID:"auth/invalid-app-id",INVALID_AUTH:"auth/invalid-user-token",INVALID_AUTH_EVENT:"auth/invalid-auth-event",INVALID_CERT_HASH:"auth/invalid-cert-hash",INVALID_CODE:"auth/invalid-verification-code",INVALID_CONTINUE_URI:"auth/invalid-continue-uri",INVALID_CORDOVA_CONFIGURATION:"auth/invalid-cordova-configuration",INVALID_CUSTOM_TOKEN:"auth/invalid-custom-token",INVALID_DYNAMIC_LINK_DOMAIN:"auth/invalid-dynamic-link-domain",INVALID_EMAIL:"auth/invalid-email",INVALID_EMULATOR_SCHEME:"auth/invalid-emulator-scheme",INVALID_IDP_RESPONSE:"auth/invalid-credential",INVALID_LOGIN_CREDENTIALS:"auth/invalid-credential",INVALID_MESSAGE_PAYLOAD:"auth/invalid-message-payload",INVALID_MFA_SESSION:"auth/invalid-multi-factor-session",INVALID_OAUTH_CLIENT_ID:"auth/invalid-oauth-client-id",INVALID_OAUTH_PROVIDER:"auth/invalid-oauth-provider",INVALID_OOB_CODE:"auth/invalid-action-code",INVALID_ORIGIN:"auth/unauthorized-domain",INVALID_PASSWORD:"auth/wrong-password",INVALID_PERSISTENCE:"auth/invalid-persistence-type",INVALID_PHONE_NUMBER:"auth/invalid-phone-number",INVALID_PROVIDER_ID:"auth/invalid-provider-id",INVALID_RECIPIENT_EMAIL:"auth/invalid-recipient-email",INVALID_SENDER:"auth/invalid-sender",INVALID_SESSION_INFO:"auth/invalid-verification-id",INVALID_TENANT_ID:"auth/invalid-tenant-id",MFA_INFO_NOT_FOUND:"auth/multi-factor-info-not-found",MFA_REQUIRED:"auth/multi-factor-auth-required",MISSING_ANDROID_PACKAGE_NAME:"auth/missing-android-pkg-name",MISSING_APP_CREDENTIAL:"auth/missing-app-credential",MISSING_AUTH_DOMAIN:"auth/auth-domain-config-required",MISSING_CODE:"auth/missing-verification-code",MISSING_CONTINUE_URI:"auth/missing-continue-uri",MISSING_IFRAME_START:"auth/missing-iframe-start",MISSING_IOS_BUNDLE_ID:"auth/missing-ios-bundle-id",MISSING_OR_INVALID_NONCE:"auth/missing-or-invalid-nonce",MISSING_MFA_INFO:"auth/missing-multi-factor-info",MISSING_MFA_SESSION:"auth/missing-multi-factor-session",MISSING_PHONE_NUMBER:"auth/missing-phone-number",MISSING_SESSION_INFO:"auth/missing-verification-id",MODULE_DESTROYED:"auth/app-deleted",NEED_CONFIRMATION:"auth/account-exists-with-different-credential",NETWORK_REQUEST_FAILED:"auth/network-request-failed",NULL_USER:"auth/null-user",NO_AUTH_EVENT:"auth/no-auth-event",NO_SUCH_PROVIDER:"auth/no-such-provider",OPERATION_NOT_ALLOWED:"auth/operation-not-allowed",OPERATION_NOT_SUPPORTED:"auth/operation-not-supported-in-this-environment",POPUP_BLOCKED:"auth/popup-blocked",POPUP_CLOSED_BY_USER:"auth/popup-closed-by-user",PROVIDER_ALREADY_LINKED:"auth/provider-already-linked",QUOTA_EXCEEDED:"auth/quota-exceeded",REDIRECT_CANCELLED_BY_USER:"auth/redirect-cancelled-by-user",REDIRECT_OPERATION_PENDING:"auth/redirect-operation-pending",REJECTED_CREDENTIAL:"auth/rejected-credential",SECOND_FACTOR_ALREADY_ENROLLED:"auth/second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"auth/maximum-second-factor-count-exceeded",TENANT_ID_MISMATCH:"auth/tenant-id-mismatch",TIMEOUT:"auth/timeout",TOKEN_EXPIRED:"auth/user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"auth/too-many-requests",UNAUTHORIZED_DOMAIN:"auth/unauthorized-continue-uri",UNSUPPORTED_FIRST_FACTOR:"auth/unsupported-first-factor",UNSUPPORTED_PERSISTENCE:"auth/unsupported-persistence-type",UNSUPPORTED_TENANT_OPERATION:"auth/unsupported-tenant-operation",UNVERIFIED_EMAIL:"auth/unverified-email",USER_CANCELLED:"auth/user-cancelled",USER_DELETED:"auth/user-not-found",USER_DISABLED:"auth/user-disabled",USER_MISMATCH:"auth/user-mismatch",USER_SIGNED_OUT:"auth/user-signed-out",WEAK_PASSWORD:"auth/weak-password",WEB_STORAGE_UNSUPPORTED:"auth/web-storage-unsupported",ALREADY_INITIALIZED:"auth/already-initialized",RECAPTCHA_NOT_ENABLED:"auth/recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"auth/missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"auth/invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"auth/invalid-recaptcha-action",MISSING_CLIENT_TYPE:"auth/missing-client-type",MISSING_RECAPTCHA_VERSION:"auth/missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"auth/invalid-recaptcha-version",INVALID_REQ_TYPE:"auth/invalid-req-type"},y=new s.Vy("@firebase/auth");function w(t,...e){y.logLevel<=s.$b.WARN&&y.warn(`Auth (${r.MF}): ${t}`,...e)}function _(t,...e){y.logLevel<=s.$b.ERROR&&y.error(`Auth (${r.MF}): ${t}`,...e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b(t,...e){throw S(t,...e)}function x(t,...e){return S(t,...e)}function E(t,e,n){const r=Object.assign(Object.assign({},g()),{[e]:n}),s=new i.FA("auth","Firebase",r);return s.create(e,{appName:t.name})}function C(t,e,n){const i=n;if(!(e instanceof i))throw i.name!==e.constructor.name&&b(t,"argument-error"),E(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function S(t,...e){if("string"!==typeof t){const n=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=t.name),t._errorFactory.create(n,...i)}return m.create(t,...e)}function B(t,e,...n){if(!t)throw S(e,...n)}function T(t){const e="INTERNAL ASSERTION FAILED: "+t;throw _(e),new Error(e)}function I(t,e){t||T(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.href)||""}function L(){return"http:"===R()||"https:"===R()}function R(){var t;return"undefined"!==typeof self&&(null===(t=self.location)||void 0===t?void 0:t.protocol)||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(L()||(0,i.sr)()||"connection"in navigator))||navigator.onLine}function P(){if("undefined"===typeof navigator)return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N{constructor(t,e){this.shortDelay=t,this.longDelay=e,I(e>t,"Short delay should be less than long delay!"),this.isMobile=(0,i.jZ)()||(0,i.lV)()}get(){return M()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O(t,e){I(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{static initialize(t,e,n){this.fetchImpl=t,e&&(this.headersImpl=e),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void T("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void T("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void T("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={["CREDENTIAL_MISMATCH"]:"custom-token-mismatch",["MISSING_CUSTOM_TOKEN"]:"internal-error",["INVALID_IDENTIFIER"]:"invalid-email",["MISSING_CONTINUE_URI"]:"internal-error",["INVALID_PASSWORD"]:"wrong-password",["MISSING_PASSWORD"]:"missing-password",["INVALID_LOGIN_CREDENTIALS"]:"invalid-credential",["EMAIL_EXISTS"]:"email-already-in-use",["PASSWORD_LOGIN_DISABLED"]:"operation-not-allowed",["INVALID_IDP_RESPONSE"]:"invalid-credential",["INVALID_PENDING_TOKEN"]:"invalid-credential",["FEDERATED_USER_ID_ALREADY_LINKED"]:"credential-already-in-use",["MISSING_REQ_TYPE"]:"internal-error",["EMAIL_NOT_FOUND"]:"user-not-found",["RESET_PASSWORD_EXCEED_LIMIT"]:"too-many-requests",["EXPIRED_OOB_CODE"]:"expired-action-code",["INVALID_OOB_CODE"]:"invalid-action-code",["MISSING_OOB_CODE"]:"internal-error",["CREDENTIAL_TOO_OLD_LOGIN_AGAIN"]:"requires-recent-login",["INVALID_ID_TOKEN"]:"invalid-user-token",["TOKEN_EXPIRED"]:"user-token-expired",["USER_NOT_FOUND"]:"user-token-expired",["TOO_MANY_ATTEMPTS_TRY_LATER"]:"too-many-requests",["PASSWORD_DOES_NOT_MEET_REQUIREMENTS"]:"password-does-not-meet-requirements",["INVALID_CODE"]:"invalid-verification-code",["INVALID_SESSION_INFO"]:"invalid-verification-id",["INVALID_TEMPORARY_PROOF"]:"invalid-credential",["MISSING_SESSION_INFO"]:"missing-verification-id",["SESSION_EXPIRED"]:"code-expired",["MISSING_ANDROID_PACKAGE_NAME"]:"missing-android-pkg-name",["UNAUTHORIZED_DOMAIN"]:"unauthorized-continue-uri",["INVALID_OAUTH_CLIENT_ID"]:"invalid-oauth-client-id",["ADMIN_ONLY_OPERATION"]:"admin-restricted-operation",["INVALID_MFA_PENDING_CREDENTIAL"]:"invalid-multi-factor-session",["MFA_ENROLLMENT_NOT_FOUND"]:"multi-factor-info-not-found",["MISSING_MFA_ENROLLMENT_ID"]:"missing-multi-factor-info",["MISSING_MFA_PENDING_CREDENTIAL"]:"missing-multi-factor-session",["SECOND_FACTOR_EXISTS"]:"second-factor-already-in-use",["SECOND_FACTOR_LIMIT_EXCEEDED"]:"maximum-second-factor-count-exceeded",["BLOCKING_FUNCTION_ERROR_RESPONSE"]:"internal-error",["RECAPTCHA_NOT_ENABLED"]:"recaptcha-not-enabled",["MISSING_RECAPTCHA_TOKEN"]:"missing-recaptcha-token",["INVALID_RECAPTCHA_TOKEN"]:"invalid-recaptcha-token",["INVALID_RECAPTCHA_ACTION"]:"invalid-recaptcha-action",["MISSING_CLIENT_TYPE"]:"missing-client-type",["MISSING_RECAPTCHA_VERSION"]:"missing-recaptcha-version",["INVALID_RECAPTCHA_VERSION"]:"invalid-recaptcha-version",["INVALID_REQ_TYPE"]:"invalid-req-type"},U=new N(3e4,6e4);
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function G(t,e,n,r,s={}){return H(t,s,(async()=>{let s={},o={};r&&("GET"===e?o=r:s={body:JSON.stringify(r)});const a=(0,i.Am)(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode),k.fetch()(j(t,t.config.apiHost,n,a),Object.assign({method:e,headers:l,referrerPolicy:"no-referrer"},s))}))}async function H(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},D),e);try{const e=new z(t),i=await Promise.race([n(),e.promise]);e.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw K(t,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const e=i.ok?s.errorMessage:s.error.message,[n,o]=e.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw K(t,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw K(t,"email-already-in-use",s);if("USER_DISABLED"===n)throw K(t,"user-disabled",s);const a=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(o)throw E(t,a,o);b(t,a)}}catch(s){if(s instanceof i.g)throw s;b(t,"network-request-failed",{message:String(s)})}}async function V(t,e,n,i,r={}){const s=await G(t,e,n,i,r);return"mfaPendingCredential"in s&&b(t,"multi-factor-auth-required",{_serverResponse:s}),s}function j(t,e,n,i){const r=`${e}${n}?${i}`;return t.config.emulator?O(t.config,r):`${t.config.apiScheme}://${r}`}function W(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class z{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise(((t,e)=>{this.timer=setTimeout((()=>e(x(this.auth,"network-request-failed"))),U.get())}))}clearNetworkTimeout(){clearTimeout(this.timer)}}function K(t,e,n){const i={appName:t.name};n.email&&(i.email=n.email),n.phoneNumber&&(i.phoneNumber=n.phoneNumber);const r=x(t,e,i);return r.customData._tokenResponse=n,r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q(t){return void 0!==t&&void 0!==t.getResponse}function $(t){return void 0!==t&&void 0!==t.enterprise}class X{constructor(t){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===t.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=t.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=t.recaptchaEnforcementState}getProviderEnforcementState(t){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const e of this.recaptchaEnforcementState)if(e.provider&&e.provider===t)return W(e.enforcementState);return null}isProviderEnabled(t){return"ENFORCE"===this.getProviderEnforcementState(t)||"AUDIT"===this.getProviderEnforcementState(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Y(t){return(await G(t,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}async function Z(t,e){return G(t,"GET","/v2/recaptchaConfig",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function J(t,e){return G(t,"POST","/v1/accounts:delete",e)}async function tt(t,e){return G(t,"POST","/v1/accounts:update",e)}async function et(t,e){return G(t,"POST","/v1/accounts:lookup",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nt(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch(e){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function it(t,e=!1){return(0,i.Ku)(t).getIdToken(e)}async function rt(t,e=!1){const n=(0,i.Ku)(t),r=await n.getIdToken(e),s=ot(r);B(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o="object"===typeof s.firebase?s.firebase:void 0,a=null===o||void 0===o?void 0:o["sign_in_provider"];return{claims:s,token:r,authTime:nt(st(s.auth_time)),issuedAtTime:nt(st(s.iat)),expirationTime:nt(st(s.exp)),signInProvider:a||null,signInSecondFactor:(null===o||void 0===o?void 0:o["sign_in_second_factor"])||null}}function st(t){return 1e3*Number(t)}function ot(t){const[e,n,r]=t.split(".");if(void 0===e||void 0===n||void 0===r)return _("JWT malformed, contained fewer than 3 sections"),null;try{const t=(0,i.u)(n);return t?JSON.parse(t):(_("Failed to decode base64 JWT payload"),null)}catch(s){return _("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function at(t){const e=ot(t);return B(e,"internal-error"),B("undefined"!==typeof e.exp,"internal-error"),B("undefined"!==typeof e.iat,"internal-error"),Number(e.exp)-Number(e.iat)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lt(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof i.g&&ct(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function ct({code:t}){return"auth/user-disabled"===t||"auth/user-token-expired"===t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){const t=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),t}{this.errorBackoff=3e4;const t=null!==(e=this.user.stsTokenManager.expirationTime)&&void 0!==e?e:0,n=t-Date.now()-3e5;return Math.max(0,n)}}schedule(t=!1){if(!this.isRunning)return;const e=this.getInterval(t);this.timerId=setTimeout((async()=>{await this.iteration()}),e)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){return void("auth/network-request-failed"===(null===t||void 0===t?void 0:t.code)&&this.schedule(!0))}this.schedule()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=nt(this.lastLoginAt),this.creationTime=nt(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function At(t){var e;const n=t.auth,i=await t.getIdToken(),r=await lt(t,et(n,{idToken:i}));B(null===r||void 0===r?void 0:r.users.length,n,"internal-error");const s=r.users[0];t._notifyReloadListener(s);const o=(null===(e=s.providerUserInfo)||void 0===e?void 0:e.length)?pt(s.providerUserInfo):[],a=ft(t.providerData,o),l=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(null===a||void 0===a?void 0:a.length),u=!!l&&c,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ht(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,h)}async function dt(t){const e=(0,i.Ku)(t);await At(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function ft(t,e){const n=t.filter((t=>!e.some((e=>e.providerId===t.providerId))));return[...n,...e]}function pt(t){return t.map((t=>{var{providerId:e}=t,n=o(t,["providerId"]);return{providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gt(t,e){const n=await H(t,{},(async()=>{const n=(0,i.Am)({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=t.config,o=j(t,r,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",k.fetch()(o,{method:"POST",headers:a,body:n})}));return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function mt(t,e){return G(t,"POST","/v2/accounts:revokeToken",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){B(t.idToken,"internal-error"),B("undefined"!==typeof t.idToken,"internal-error"),B("undefined"!==typeof t.refreshToken,"internal-error");const e="expiresIn"in t&&"undefined"!==typeof t.expiresIn?Number(t.expiresIn):at(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}async getToken(t,e=!1){return B(!this.accessToken||this.refreshToken,t,"user-token-expired"),e||!this.accessToken||this.isExpired?this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null:this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(t,e){const{accessToken:n,refreshToken:i,expiresIn:r}=await gt(t,e);this.updateTokensAndExpiration(n,i,Number(r))}updateTokensAndExpiration(t,e,n){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(t,e){const{refreshToken:n,accessToken:i,expirationTime:r}=e,s=new vt;return n&&(B("string"===typeof n,"internal-error",{appName:t}),s.refreshToken=n),i&&(B("string"===typeof i,"internal-error",{appName:t}),s.accessToken=i),r&&(B("number"===typeof r,"internal-error",{appName:t}),s.expirationTime=r),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new vt,this.toJSON())}_performRefresh(){return T("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){B("string"===typeof t||"undefined"===typeof t,"internal-error",{appName:e})}class wt{constructor(t){var{uid:e,auth:n,stsTokenManager:i}=t,r=o(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ut(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=r.displayName||null,this.email=r.email||null,this.emailVerified=r.emailVerified||!1,this.phoneNumber=r.phoneNumber||null,this.photoURL=r.photoURL||null,this.isAnonymous=r.isAnonymous||!1,this.tenantId=r.tenantId||null,this.providerData=r.providerData?[...r.providerData]:[],this.metadata=new ht(r.createdAt||void 0,r.lastLoginAt||void 0)}async getIdToken(t){const e=await lt(this,this.stsTokenManager.getToken(this.auth,t));return B(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e}getIdTokenResult(t){return rt(this,t)}reload(){return dt(this)}_assign(t){this!==t&&(B(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map((t=>Object.assign({},t))),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const e=new wt(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){B(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,e=!1){let n=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),n=!0),e&&await At(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){const t=await this.getIdToken();return await lt(this,J(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map((t=>Object.assign({},t))),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var n,i,r,s,o,a,l,c;const u=null!==(n=e.displayName)&&void 0!==n?n:void 0,h=null!==(i=e.email)&&void 0!==i?i:void 0,A=null!==(r=e.phoneNumber)&&void 0!==r?r:void 0,d=null!==(s=e.photoURL)&&void 0!==s?s:void 0,f=null!==(o=e.tenantId)&&void 0!==o?o:void 0,p=null!==(a=e._redirectEventId)&&void 0!==a?a:void 0,g=null!==(l=e.createdAt)&&void 0!==l?l:void 0,m=null!==(c=e.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:y,isAnonymous:w,providerData:_,stsTokenManager:b}=e;B(v&&b,t,"internal-error");const x=vt.fromJSON(this.name,b);B("string"===typeof v,t,"internal-error"),yt(u,t.name),yt(h,t.name),B("boolean"===typeof y,t,"internal-error"),B("boolean"===typeof w,t,"internal-error"),yt(A,t.name),yt(d,t.name),yt(f,t.name),yt(p,t.name),yt(g,t.name),yt(m,t.name);const E=new wt({uid:v,auth:t,email:h,emailVerified:y,displayName:u,isAnonymous:w,photoURL:d,phoneNumber:A,tenantId:f,stsTokenManager:x,createdAt:g,lastLoginAt:m});return _&&Array.isArray(_)&&(E.providerData=_.map((t=>Object.assign({},t)))),p&&(E._redirectEventId=p),E}static async _fromIdTokenResponse(t,e,n=!1){const i=new vt;i.updateFromServerResponse(e);const r=new wt({uid:e.localId,auth:t,stsTokenManager:i,isAnonymous:n});return await At(r),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _t=new Map;function bt(t){I(t instanceof Function,"Expected a class definition");let e=_t.get(t);return e?(I(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,_t.set(t,e),e)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,e){this.storage[t]=e}async _get(t){const e=this.storage[t];return void 0===e?null:e}async _remove(t){delete this.storage[t]}_addListener(t,e){}_removeListener(t,e){}}xt.type="NONE";const Et=xt;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ct(t,e,n){return`firebase:${t}:${e}:${n}`}class St{constructor(t,e,n){this.persistence=t,this.auth=e,this.userKey=n;const{config:i,name:r}=this.auth;this.fullUserKey=Ct(this.userKey,i.apiKey,r),this.fullPersistenceKey=Ct("persistence",i.apiKey,r),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?wt._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const e=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=t,e?this.setCurrentUser(e):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,e,n="authUser"){if(!e.length)return new St(bt(Et),t,n);const i=(await Promise.all(e.map((async t=>{if(await t._isAvailable())return t})))).filter((t=>t));let r=i[0]||bt(Et);const s=Ct(n,t.config.apiKey,t.name);let o=null;for(const c of e)try{const e=await c._get(s);if(e){const n=wt._fromJSON(t,e);c!==r&&(o=n),r=c;break}}catch(l){}const a=i.filter((t=>t._shouldAllowMigration));return r._shouldAllowMigration&&a.length?(r=a[0],o&&await r._set(s,o.toJSON()),await Promise.all(e.map((async t=>{if(t!==r)try{await t._remove(s)}catch(l){}}))),new St(r,t,n)):new St(r,t,n)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bt(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lt(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Tt(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Mt(e))return"Blackberry";if(Pt(e))return"Webos";if(It(e))return"Safari";if((e.includes("chrome/")||Ft(e))&&!e.includes("edge/"))return"Chrome";if(Rt(e))return"Android";{const e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(e);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Tt(t=(0,i.ZQ)()){return/firefox\//i.test(t)}function It(t=(0,i.ZQ)()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Ft(t=(0,i.ZQ)()){return/crios\//i.test(t)}function Lt(t=(0,i.ZQ)()){return/iemobile/i.test(t)}function Rt(t=(0,i.ZQ)()){return/android/i.test(t)}function Mt(t=(0,i.ZQ)()){return/blackberry/i.test(t)}function Pt(t=(0,i.ZQ)()){return/webos/i.test(t)}function Nt(t=(0,i.ZQ)()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Ot(t=(0,i.ZQ)()){var e;return Nt(t)&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}function kt(){return(0,i.lT)()&&10===document.documentMode}function Dt(t=(0,i.ZQ)()){return Nt(t)||Rt(t)||Pt(t)||Mt(t)||/windows phone/i.test(t)||Lt(t)}function Ut(){try{return!(!window||window===window.top)}catch(t){return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(t,e=[]){let n;switch(t){case"Browser":n=Bt((0,i.ZQ)());break;case"Worker":n=`${Bt((0,i.ZQ)())}-${t}`;break;default:n=t}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${r.MF}/${s}`}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){const n=e=>new Promise(((n,i)=>{try{const i=t(e);n(i)}catch(r){i(r)}}));n.onAbort=e,this.queue.push(n);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const e=[];try{for(const n of this.queue)await n(t),n.onAbort&&e.push(n.onAbort)}catch(n){e.reverse();for(const t of e)try{t()}catch(i){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ht(t,e={}){return G(t,"GET","/v2/passwordPolicy",Q(t,e))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vt=6;class jt{constructor(t){var e,n,i,r;const s=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(e=s.minPasswordLength)&&void 0!==e?e:Vt,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(i=null===(n=t.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==i?i:"",this.forceUpgradeOnSignin=null!==(r=t.forceUpgradeOnSignin)&&void 0!==r&&r,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,n,i,r,s,o;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,a),this.validatePasswordCharacterOptions(t,a),a.isValid&&(a.isValid=null===(e=a.meetsMinPasswordLength)||void 0===e||e),a.isValid&&(a.isValid=null===(n=a.meetsMaxPasswordLength)||void 0===n||n),a.isValid&&(a.isValid=null===(i=a.containsLowercaseLetter)||void 0===i||i),a.isValid&&(a.isValid=null===(r=a.containsUppercaseLetter)||void 0===r||r),a.isValid&&(a.isValid=null===(s=a.containsNumericCharacter)||void 0===s||s),a.isValid&&(a.isValid=null===(o=a.containsNonAlphanumericCharacter)||void 0===o||o),a}validatePasswordLengthOptions(t,e){const n=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;n&&(e.meetsMinPasswordLength=t.length>=n),i&&(e.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,e){let n;this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);for(let i=0;i<t.length;i++)n=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(e,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(t,e,n,i,r){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=r))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wt{constructor(t,e,n,i){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=n,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kt(this),this.idTokenSubscription=new Kt(this),this.beforeStateQueue=new Gt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=bt(e)),this._initializationPromise=this.queue((async()=>{var n,i;if(!this._deleted&&(this.persistenceManager=await St.create(this,t),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(r){}await this.initializeCurrentUser(e),this.lastNotifiedUid=(null===(i=this.currentUser)||void 0===i?void 0:i.uid)||null,this._deleted||(this._isInitialized=!0)}})),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();return this.currentUser||t?this.currentUser&&t&&this.currentUser.uid===t.uid?(this._currentUser._assign(t),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(t,!0):void 0}async initializeCurrentUser(t){var e;const n=await this.assertedPersistence.getCurrentUser();let i=n,r=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(e=this.redirectUser)||void 0===e?void 0:e._redirectEventId,s=null===i||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(t);n&&n!==s||!(null===o||void 0===o?void 0:o.user)||(i=o.user,r=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=n,this._popupRedirectResolver._overrideRedirectResult(this,(()=>Promise.reject(s)))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return B(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let e=null;try{e=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch(n){await this._setRedirectUser(null)}return e}async reloadAndSetCurrentUserOrClear(t){try{await At(t)}catch(e){if("auth/network-request-failed"!==(null===e||void 0===e?void 0:e.code))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=P()}async _delete(){this._deleted=!0}async updateCurrentUser(t){const e=t?(0,i.Ku)(t):null;return e&&B(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))}async _updateCurrentUser(t,e=!1){if(!this._deleted)return t&&B(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||await this.beforeStateQueue.runMiddleware(t),this.queue((async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()}))}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(t){return this.queue((async()=>{await this.assertedPersistence.setPersistence(bt(t))}))}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Ht(this),e=new jt(t);null===this.tenantId?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new i.FA("auth","Firebase",t())}onAuthStateChanged(t,e,n){return this.registerStateListener(this.authStateSubscription,t,e,n)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,n){return this.registerStateListener(this.idTokenSubscription,t,e,n)}authStateReady(){return new Promise(((t,e)=>{if(this.currentUser)t();else{const n=this.onAuthStateChanged((()=>{n(),t()}),e)}}))}async revokeAccessToken(t){if(this.currentUser){const e=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};null!=this.tenantId&&(n.tenantId=this.tenantId),await mt(this,n)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(t=this._currentUser)||void 0===t?void 0:t.toJSON()}}async _setRedirectUser(t,e){const n=await this.getOrInitRedirectPersistenceManager(e);return null===t?n.removeCurrentUser():n.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const e=t&&bt(t)||this._popupRedirectResolver;B(e,this,"argument-error"),this.redirectPersistenceManager=await St.create(this,[bt(e._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var e,n;return this._isInitialized&&await this.queue((async()=>{})),(null===(e=this._currentUser)||void 0===e?void 0:e._redirectEventId)===t?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue((async()=>this.directlySetCurrentUser(t)))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,n,i){if(this._deleted)return()=>{};const r="function"===typeof e?e:e.next.bind(e);let s=!1;const o=this._isInitialized?Promise.resolve():this._initializationPromise;if(B(o,this,"internal-error"),o.then((()=>{s||r(this.currentUser)})),"function"===typeof e){const r=t.addObserver(e,n,i);return()=>{s=!0,r()}}{const n=t.addObserver(e);return()=>{s=!0,n()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return B(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){t&&!this.frameworks.includes(t)&&(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=Qt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const e={["X-Client-Version"]:this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;const e=await(null===(t=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===t?void 0:t.getToken());return(null===e||void 0===e?void 0:e.error)&&w(`Error while retrieving App Check token: ${e.error}`),null===e||void 0===e?void 0:e.token}}function zt(t){return(0,i.Ku)(t)}class Kt{constructor(t){this.auth=t,this.observer=null,this.addObserver=(0,i.tD)((t=>this.observer=t))}get next(){return B(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qt={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $t(t){qt=t}function Xt(t){return qt.loadJS(t)}function Yt(){return qt.recaptchaV2Script}function Zt(){return qt.recaptchaEnterpriseScript}function Jt(){return qt.gapiScript}function te(t){return`__${t}${Math.floor(1e6*Math.random())}`}const ee="recaptcha-enterprise",ne="NO_RECAPTCHA";class ie{constructor(t){this.type=ee,this.auth=zt(t)}async verify(t="verify",e=!1){async function n(t){if(!e){if(null==t.tenantId&&null!=t._agentRecaptchaConfig)return t._agentRecaptchaConfig.siteKey;if(null!=t.tenantId&&void 0!==t._tenantRecaptchaConfigs[t.tenantId])return t._tenantRecaptchaConfigs[t.tenantId].siteKey}return new Promise((async(e,n)=>{Z(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then((i=>{if(void 0!==i.recaptchaKey){const n=new X(i);return null==t.tenantId?t._agentRecaptchaConfig=n:t._tenantRecaptchaConfigs[t.tenantId]=n,e(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))})).catch((t=>{n(t)}))}))}function i(e,n,i){const r=window.grecaptcha;$(r)?r.enterprise.ready((()=>{r.enterprise.execute(e,{action:t}).then((t=>{n(t)})).catch((()=>{n(ne)}))})):i(Error("No reCAPTCHA enterprise script loaded."))}return new Promise(((t,r)=>{n(this.auth).then((n=>{if(!e&&$(window.grecaptcha))i(n,t,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let e=Zt();0!==e.length&&(e+=n),Xt(e).then((()=>{i(n,t,r)})).catch((t=>{r(t)}))}})).catch((t=>{r(t)}))}))}}async function re(t,e,n,i=!1){const r=new ie(t);let s;try{s=await r.verify(n)}catch(a){s=await r.verify(n,!0)}const o=Object.assign({},e);return i?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function se(t,e,n,i){var r;if(null===(r=t._getRecaptchaConfig())||void 0===r?void 0:r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const r=await re(t,e,n,"getOobCode"===n);return i(t,r)}return i(t,e).catch((async r=>{if("auth/missing-recaptcha-token"===r.code){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const r=await re(t,e,n,"getOobCode"===n);return i(t,r)}return Promise.reject(r)}))}async function oe(t){const e=zt(t),n=await Z(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),i=new X(n);if(null==e.tenantId?e._agentRecaptchaConfig=i:e._tenantRecaptchaConfigs[e.tenantId]=i,i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const t=new ie(e);t.verify()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,e){const n=(0,r.j6)(t,"auth");if(n.isInitialized()){const t=n.getImmediate(),r=n.getOptions();if((0,i.bD)(r,null!==e&&void 0!==e?e:{}))return t;b(t,"already-initialized")}const s=n.initialize({options:e});return s}function le(t,e){const n=(null===e||void 0===e?void 0:e.persistence)||[],i=(Array.isArray(n)?n:[n]).map(bt);(null===e||void 0===e?void 0:e.errorMap)&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(i,null===e||void 0===e?void 0:e.popupRedirectResolver)}function ce(t,e,n){const i=zt(t);B(i._canInitEmulator,i,"emulator-config-failed"),B(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!!(null===n||void 0===n?void 0:n.disableWarnings),s=ue(e),{host:o,port:a}=he(e),l=null===a?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||de()}function ue(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function he(t){const e=ue(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const i=n[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const t=r[1];return{host:t,port:Ae(i.substr(t.length+1))}}{const[t,e]=i.split(":");return{host:t,port:Ae(e)}}}function Ae(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function de(){function t(){const t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",t):t())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return T("not implemented")}_getIdTokenResponse(t){return T("not implemented")}_linkToIdToken(t,e){return T("not implemented")}_getReauthenticationResolver(t){return T("not implemented")}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pe(t,e){return G(t,"POST","/v1/accounts:resetPassword",Q(t,e))}async function ge(t,e){return G(t,"POST","/v1/accounts:update",e)}async function me(t,e){return G(t,"POST","/v1/accounts:signUp",e)}async function ve(t,e){return G(t,"POST","/v1/accounts:update",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ye(t,e){return V(t,"POST","/v1/accounts:signInWithPassword",Q(t,e))}async function we(t,e){return G(t,"POST","/v1/accounts:sendOobCode",Q(t,e))}async function _e(t,e){return we(t,e)}async function be(t,e){return we(t,e)}async function xe(t,e){return we(t,e)}async function Ee(t,e){return we(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ce(t,e){return V(t,"POST","/v1/accounts:signInWithEmailLink",Q(t,e))}async function Se(t,e){return V(t,"POST","/v1/accounts:signInWithEmailLink",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be extends fe{constructor(t,e,n,i=null){super("password",n),this._email=t,this._password=e,this._tenantId=i}static _fromEmailAndPassword(t,e){return new Be(t,e,"password")}static _fromEmailAndCode(t,e,n=null){return new Be(t,e,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t;if((null===e||void 0===e?void 0:e.email)&&(null===e||void 0===e?void 0:e.password)){if("password"===e.signInMethod)return this._fromEmailAndPassword(e.email,e.password);if("emailLink"===e.signInMethod)return this._fromEmailAndCode(e.email,e.password,e.tenantId)}return null}async _getIdTokenResponse(t){switch(this.signInMethod){case"password":const e={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return se(t,e,"signInWithPassword",ye);case"emailLink":return Ce(t,{email:this._email,oobCode:this._password});default:b(t,"internal-error")}}async _linkToIdToken(t,e){switch(this.signInMethod){case"password":const n={idToken:e,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return se(t,n,"signUpPassword",me);case"emailLink":return Se(t,{idToken:e,email:this._email,oobCode:this._password});default:b(t,"internal-error")}}_getReauthenticationResolver(t){return this._getIdTokenResponse(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Te(t,e){return V(t,"POST","/v1/accounts:signInWithIdp",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie="http://localhost";class Fe extends fe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const e=new Fe(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):b("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i}=e,r=o(e,["providerId","signInMethod"]);if(!n||!i)return null;const s=new Fe(n,i);return s.idToken=r.idToken||void 0,s.accessToken=r.accessToken||void 0,s.secret=r.secret,s.nonce=r.nonce,s.pendingToken=r.pendingToken||null,s}_getIdTokenResponse(t){const e=this.buildRequest();return Te(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Te(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Te(t,e)}buildRequest(){const t={requestUri:Ie,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const e={};this.idToken&&(e["id_token"]=this.idToken),this.accessToken&&(e["access_token"]=this.accessToken),this.secret&&(e["oauth_token_secret"]=this.secret),e["providerId"]=this.providerId,this.nonce&&!this.pendingToken&&(e["nonce"]=this.nonce),t.postBody=(0,i.Am)(e)}return t}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Le(t,e){return G(t,"POST","/v1/accounts:sendVerificationCode",Q(t,e))}async function Re(t,e){return V(t,"POST","/v1/accounts:signInWithPhoneNumber",Q(t,e))}async function Me(t,e){const n=await V(t,"POST","/v1/accounts:signInWithPhoneNumber",Q(t,e));if(n.temporaryProof)throw K(t,"account-exists-with-different-credential",n);return n}const Pe={["USER_NOT_FOUND"]:"user-not-found"};async function Ne(t,e){const n=Object.assign(Object.assign({},e),{operation:"REAUTH"});return V(t,"POST","/v1/accounts:signInWithPhoneNumber",Q(t,n),Pe)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe extends fe{constructor(t){super("phone","phone"),this.params=t}static _fromVerification(t,e){return new Oe({verificationId:t,verificationCode:e})}static _fromTokenResponse(t,e){return new Oe({phoneNumber:t,temporaryProof:e})}_getIdTokenResponse(t){return Re(t,this._makeVerificationRequest())}_linkToIdToken(t,e){return Me(t,Object.assign({idToken:e},this._makeVerificationRequest()))}_getReauthenticationResolver(t){return Ne(t,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:t,phoneNumber:e,verificationId:n,verificationCode:i}=this.params;return t&&e?{temporaryProof:t,phoneNumber:e}:{sessionInfo:n,code:i}}toJSON(){const t={providerId:this.providerId};return this.params.phoneNumber&&(t.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(t.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(t.verificationCode=this.params.verificationCode),this.params.verificationId&&(t.verificationId=this.params.verificationId),t}static fromJSON(t){"string"===typeof t&&(t=JSON.parse(t));const{verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}=t;return n||e||i||r?new Oe({verificationId:e,verificationCode:n,phoneNumber:i,temporaryProof:r}):null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ke(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function De(t){const e=(0,i.I9)((0,i.hp)(t))["link"],n=e?(0,i.I9)((0,i.hp)(e))["deep_link_id"]:null,r=(0,i.I9)((0,i.hp)(t))["deep_link_id"],s=r?(0,i.I9)((0,i.hp)(r))["link"]:null;return s||r||n||e||t}class Ue{constructor(t){var e,n,r,s,o,a;const l=(0,i.I9)((0,i.hp)(t)),c=null!==(e=l["apiKey"])&&void 0!==e?e:null,u=null!==(n=l["oobCode"])&&void 0!==n?n:null,h=ke(null!==(r=l["mode"])&&void 0!==r?r:null);B(c&&u&&h,"argument-error"),this.apiKey=c,this.operation=h,this.code=u,this.continueUrl=null!==(s=l["continueUrl"])&&void 0!==s?s:null,this.languageCode=null!==(o=l["languageCode"])&&void 0!==o?o:null,this.tenantId=null!==(a=l["tenantId"])&&void 0!==a?a:null}static parseLink(t){const e=De(t);try{return new Ue(e)}catch(n){return null}}}function Qe(t){return Ue.parseLink(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(){this.providerId=Ge.PROVIDER_ID}static credential(t,e){return Be._fromEmailAndPassword(t,e)}static credentialWithLink(t,e){const n=Ue.parseLink(e);return B(n,"argument-error"),Be._fromEmailAndCode(t,n.code,n.tenantId)}}Ge.PROVIDER_ID="password",Ge.EMAIL_PASSWORD_SIGN_IN_METHOD="password",Ge.EMAIL_LINK_SIGN_IN_METHOD="emailLink";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class He{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ve extends He{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}class je extends Ve{static credentialFromJSON(t){const e="string"===typeof t?JSON.parse(t):t;return B("providerId"in e&&"signInMethod"in e,"argument-error"),Fe._fromParams(e)}credential(t){return this._credential(Object.assign(Object.assign({},t),{nonce:t.rawNonce}))}_credential(t){return B(t.idToken||t.accessToken,"argument-error"),Fe._fromParams(Object.assign(Object.assign({},t),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(t){return je.oauthCredentialFromTaggedObject(t)}static credentialFromError(t){return je.oauthCredentialFromTaggedObject(t.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n,oauthTokenSecret:i,pendingToken:r,nonce:s,providerId:o}=t;if(!n&&!i&&!e&&!r)return null;if(!o)return null;try{return new je(o)._credential({idToken:e,accessToken:n,nonce:s,pendingToken:r})}catch(a){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We extends Ve{constructor(){super("facebook.com")}static credential(t){return Fe._fromParams({providerId:We.PROVIDER_ID,signInMethod:We.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return We.credentialFromTaggedObject(t)}static credentialFromError(t){return We.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return We.credential(t.oauthAccessToken)}catch(e){return null}}}We.FACEBOOK_SIGN_IN_METHOD="facebook.com",We.PROVIDER_ID="facebook.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class ze extends Ve{constructor(){super("google.com"),this.addScope("profile")}static credential(t,e){return Fe._fromParams({providerId:ze.PROVIDER_ID,signInMethod:ze.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:e})}static credentialFromResult(t){return ze.credentialFromTaggedObject(t)}static credentialFromError(t){return ze.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:e,oauthAccessToken:n}=t;if(!e&&!n)return null;try{return ze.credential(e,n)}catch(i){return null}}}ze.GOOGLE_SIGN_IN_METHOD="google.com",ze.PROVIDER_ID="google.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Ke extends Ve{constructor(){super("github.com")}static credential(t){return Fe._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ke.credentialFromTaggedObject(t)}static credentialFromError(t){return Ke.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Ke.credential(t.oauthAccessToken)}catch(e){return null}}}Ke.GITHUB_SIGN_IN_METHOD="github.com",Ke.PROVIDER_ID="github.com";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const qe="http://localhost";class $e extends fe{constructor(t,e){super(t,t),this.pendingToken=e}_getIdTokenResponse(t){const e=this.buildRequest();return Te(t,e)}_linkToIdToken(t,e){const n=this.buildRequest();return n.idToken=e,Te(t,n)}_getReauthenticationResolver(t){const e=this.buildRequest();return e.autoCreate=!1,Te(t,e)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(t){const e="string"===typeof t?JSON.parse(t):t,{providerId:n,signInMethod:i,pendingToken:r}=e;return n&&i&&r&&n===i?new $e(n,r):null}static _create(t,e){return new $e(t,e)}buildRequest(){return{requestUri:qe,returnSecureToken:!0,pendingToken:this.pendingToken}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xe="saml.";class Ye extends He{constructor(t){B(t.startsWith(Xe),"argument-error"),super(t)}static credentialFromResult(t){return Ye.samlCredentialFromTaggedObject(t)}static credentialFromError(t){return Ye.samlCredentialFromTaggedObject(t.customData||{})}static credentialFromJSON(t){const e=$e.fromJSON(t);return B(e,"argument-error"),e}static samlCredentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{pendingToken:e,providerId:n}=t;if(!e||!n)return null;try{return $e._create(n,e)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze extends Ve{constructor(){super("twitter.com")}static credential(t,e){return Fe._fromParams({providerId:Ze.PROVIDER_ID,signInMethod:Ze.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:e})}static credentialFromResult(t){return Ze.credentialFromTaggedObject(t)}static credentialFromError(t){return Ze.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:e,oauthTokenSecret:n}=t;if(!e||!n)return null;try{return Ze.credential(e,n)}catch(i){return null}}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
async function Je(t,e){return V(t,"POST","/v1/accounts:signUp",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ze.TWITTER_SIGN_IN_METHOD="twitter.com",Ze.PROVIDER_ID="twitter.com";class tn{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,e,n,i=!1){const r=await wt._fromIdTokenResponse(t,n,i),s=en(n),o=new tn({user:r,providerId:s,_tokenResponse:n,operationType:e});return o}static async _forOperation(t,e,n){await t._updateTokensIfNecessary(n,!0);const i=en(n);return new tn({user:t,providerId:i,_tokenResponse:n,operationType:e})}}function en(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nn(t){var e;const n=zt(t);if(await n._initializationPromise,null===(e=n.currentUser)||void 0===e?void 0:e.isAnonymous)return new tn({user:n.currentUser,providerId:null,operationType:"signIn"});const i=await Je(n,{returnSecureToken:!0}),r=await tn._fromIdTokenResponse(n,"signIn",i,!0);return await n._updateCurrentUser(r.user),r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn extends i.g{constructor(t,e,n,i){var r;super(e.code,e.message),this.operationType=n,this.user=i,Object.setPrototypeOf(this,rn.prototype),this.customData={appName:t.name,tenantId:null!==(r=t.tenantId)&&void 0!==r?r:void 0,_serverResponse:e.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(t,e,n,i){return new rn(t,e,n,i)}}function sn(t,e,n,i){const r="reauthenticate"===e?n._getReauthenticationResolver(t):n._getIdTokenResponse(t);return r.catch((n=>{if("auth/multi-factor-auth-required"===n.code)throw rn._fromErrorAndOperation(t,n,e,i);throw n}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function on(t){return new Set(t.map((({providerId:t})=>t)).filter((t=>!!t)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function an(t,e){const n=(0,i.Ku)(t);await cn(!0,n,e);const{providerUserInfo:r}=await tt(n.auth,{idToken:await n.getIdToken(),deleteProvider:[e]}),s=on(r||[]);return n.providerData=n.providerData.filter((t=>s.has(t.providerId))),s.has("phone")||(n.phoneNumber=null),await n.auth._persistUserIfCurrent(n),n}async function ln(t,e,n=!1){const i=await lt(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return tn._forOperation(t,"link",i)}async function cn(t,e,n){await At(e);const i=on(e.providerData),r=!1===t?"provider-already-linked":"no-such-provider";B(i.has(n)===t,e.auth,r)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function un(t,e,n=!1){const{auth:i}=t,r="reauthenticate";try{const s=await lt(t,sn(i,r,e,t),n);B(s.idToken,i,"internal-error");const o=ot(s.idToken);B(o,i,"internal-error");const{sub:a}=o;return B(t.uid===a,i,"user-mismatch"),tn._forOperation(t,r,s)}catch(s){throw"auth/user-not-found"===(null===s||void 0===s?void 0:s.code)&&b(i,"user-mismatch"),s}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hn(t,e,n=!1){const i="signIn",r=await sn(t,i,e),s=await tn._fromIdTokenResponse(t,i,r);return n||await t._updateCurrentUser(s.user),s}async function An(t,e){return hn(zt(t),e)}async function dn(t,e){const n=(0,i.Ku)(t);return await cn(!1,n,e.providerId),ln(n,e)}async function fn(t,e){return un((0,i.Ku)(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pn(t,e){return V(t,"POST","/v1/accounts:signInWithCustomToken",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gn(t,e){const n=zt(t),i=await pn(n,{token:e,returnSecureToken:!0}),r=await tn._fromIdTokenResponse(n,"signIn",i);return await n._updateCurrentUser(r.user),r}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,e){this.factorId=t,this.uid=e.mfaEnrollmentId,this.enrollmentTime=new Date(e.enrolledAt).toUTCString(),this.displayName=e.displayName}static _fromServerResponse(t,e){return"phoneInfo"in e?vn._fromServerResponse(t,e):"totpInfo"in e?yn._fromServerResponse(t,e):b(t,"internal-error")}}class vn extends mn{constructor(t){super("phone",t),this.phoneNumber=t.phoneInfo}static _fromServerResponse(t,e){return new vn(e)}}class yn extends mn{constructor(t){super("totp",t)}static _fromServerResponse(t,e){return new yn(e)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wn(t,e,n){var i;B((null===(i=n.url)||void 0===i?void 0:i.length)>0,t,"invalid-continue-uri"),B("undefined"===typeof n.dynamicLinkDomain||n.dynamicLinkDomain.length>0,t,"invalid-dynamic-link-domain"),e.continueUrl=n.url,e.dynamicLinkDomain=n.dynamicLinkDomain,e.canHandleCodeInApp=n.handleCodeInApp,n.iOS&&(B(n.iOS.bundleId.length>0,t,"missing-ios-bundle-id"),e.iOSBundleId=n.iOS.bundleId),n.android&&(B(n.android.packageName.length>0,t,"missing-android-pkg-name"),e.androidInstallApp=n.android.installApp,e.androidMinimumVersionCode=n.android.minimumVersion,e.androidPackageName=n.android.packageName)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _n(t){const e=zt(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bn(t,e,n){const i=zt(t),r={requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"};n&&wn(i,r,n),await se(i,r,"getOobCode",be)}async function xn(t,e,n){await pe((0,i.Ku)(t),{oobCode:e,newPassword:n}).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&_n(t),e}))}async function En(t,e){await ve((0,i.Ku)(t),{oobCode:e})}async function Cn(t,e){const n=(0,i.Ku)(t),r=await pe(n,{oobCode:e}),s=r.requestType;switch(B(s,n,"internal-error"),s){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":B(r.newEmail,n,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":B(r.mfaInfo,n,"internal-error");default:B(r.email,n,"internal-error")}let o=null;return r.mfaInfo&&(o=mn._fromServerResponse(zt(n),r.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.newEmail:r.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===r.requestType?r.email:r.newEmail)||null,multiFactorInfo:o},operation:s}}async function Sn(t,e){const{data:n}=await Cn((0,i.Ku)(t),e);return n.email}async function Bn(t,e,n){const i=zt(t),r={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},s=se(i,r,"signUpPassword",Je),o=await s.catch((e=>{throw"auth/password-does-not-meet-requirements"===e.code&&_n(t),e})),a=await tn._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function Tn(t,e,n){return An((0,i.Ku)(t),Ge.credential(e,n)).catch((async e=>{throw"auth/password-does-not-meet-requirements"===e.code&&_n(t),e}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function In(t,e,n){const i=zt(t),r={requestType:"EMAIL_SIGNIN",email:e,clientType:"CLIENT_TYPE_WEB"};function s(t,e){B(e.handleCodeInApp,i,"argument-error"),e&&wn(i,t,e)}s(r,n),await se(i,r,"getOobCode",xe)}function Fn(t,e){const n=Ue.parseLink(e);return"EMAIL_SIGNIN"===(null===n||void 0===n?void 0:n.operation)}async function Ln(t,e,n){const r=(0,i.Ku)(t),s=Ge.credentialWithLink(e,n||F());return B(s._tenantId===(r.tenantId||null),r,"tenant-id-mismatch"),An(r,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rn(t,e){return G(t,"POST","/v1/accounts:createAuthUri",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mn(t,e){const n=L()?F():"http://localhost",r={identifier:e,continueUri:n},{signinMethods:s}=await Rn((0,i.Ku)(t),r);return s||[]}async function Pn(t,e){const n=(0,i.Ku)(t),r=await t.getIdToken(),s={requestType:"VERIFY_EMAIL",idToken:r};e&&wn(n.auth,s,e);const{email:o}=await _e(n.auth,s);o!==t.email&&await t.reload()}async function Nn(t,e,n){const r=(0,i.Ku)(t),s=await t.getIdToken(),o={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:s,newEmail:e};n&&wn(r.auth,o,n);const{email:a}=await Ee(r.auth,o);a!==t.email&&await t.reload()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function On(t,e){return G(t,"POST","/v1/accounts:update",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kn(t,{displayName:e,photoURL:n}){if(void 0===e&&void 0===n)return;const r=(0,i.Ku)(t),s=await r.getIdToken(),o={idToken:s,displayName:e,photoUrl:n,returnSecureToken:!0},a=await lt(r,On(r.auth,o));r.displayName=a.displayName||null,r.photoURL=a.photoUrl||null;const l=r.providerData.find((({providerId:t})=>"password"===t));l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(a)}function Dn(t,e){return Qn((0,i.Ku)(t),e,null)}function Un(t,e){return Qn((0,i.Ku)(t),null,e)}async function Qn(t,e,n){const{auth:i}=t,r=await t.getIdToken(),s={idToken:r,returnSecureToken:!0};e&&(s.email=e),n&&(s.password=n);const o=await lt(t,ge(i,s));await t._updateTokensIfNecessary(o,!0)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gn(t){var e,n;if(!t)return null;const{providerId:i}=t,r=t.rawUserInfo?JSON.parse(t.rawUserInfo):{},s=t.isNewUser||"identitytoolkit#SignupNewUserResponse"===t.kind;if(!i&&(null===t||void 0===t?void 0:t.idToken)){const i=null===(n=null===(e=ot(t.idToken))||void 0===e?void 0:e.firebase)||void 0===n?void 0:n["sign_in_provider"];if(i){const t="anonymous"!==i&&"custom"!==i?i:null;return new Hn(s,t)}}if(!i)return null;switch(i){case"facebook.com":return new jn(s,r);case"github.com":return new Wn(s,r);case"google.com":return new zn(s,r);case"twitter.com":return new Kn(s,r,t.screenName||null);case"custom":case"anonymous":return new Hn(s,null);default:return new Hn(s,i,r)}}class Hn{constructor(t,e,n={}){this.isNewUser=t,this.providerId=e,this.profile=n}}class Vn extends Hn{constructor(t,e,n,i){super(t,e,n),this.username=i}}class jn extends Hn{constructor(t,e){super(t,"facebook.com",e)}}class Wn extends Vn{constructor(t,e){super(t,"github.com",e,"string"===typeof(null===e||void 0===e?void 0:e.login)?null===e||void 0===e?void 0:e.login:null)}}class zn extends Hn{constructor(t,e){super(t,"google.com",e)}}class Kn extends Vn{constructor(t,e,n){super(t,"twitter.com",e,n)}}function qn(t){const{user:e,_tokenResponse:n}=t;return e.isAnonymous&&!n?{providerId:null,isNewUser:!1,profile:null}:Gn(n)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t,e){return(0,i.Ku)(t).setPersistence(e)}function Xn(t){return oe(t)}async function Yn(t,e){const n=zt(t);return n.validatePassword(e)}function Zn(t,e,n,r){return(0,i.Ku)(t).onIdTokenChanged(e,n,r)}function Jn(t,e,n){return(0,i.Ku)(t).beforeAuthStateChanged(e,n)}function ti(t,e,n,r){return(0,i.Ku)(t).onAuthStateChanged(e,n,r)}function ei(t){(0,i.Ku)(t).useDeviceLanguage()}function ni(t,e){return(0,i.Ku)(t).updateCurrentUser(e)}function ii(t){return(0,i.Ku)(t).signOut()}function ri(t,e){const n=zt(t);return n.revokeAccessToken(e)}async function si(t){return(0,i.Ku)(t).delete()}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi{constructor(t,e,n){this.type=t,this.credential=e,this.user=n}static _fromIdtoken(t,e){return new oi("enroll",t,e)}static _fromMfaPendingCredential(t){return new oi("signin",t)}toJSON(){const t="enroll"===this.type?"idToken":"pendingCredential";return{multiFactorSession:{[t]:this.credential}}}static fromJSON(t){var e,n;if(null===t||void 0===t?void 0:t.multiFactorSession){if(null===(e=t.multiFactorSession)||void 0===e?void 0:e.pendingCredential)return oi._fromMfaPendingCredential(t.multiFactorSession.pendingCredential);if(null===(n=t.multiFactorSession)||void 0===n?void 0:n.idToken)return oi._fromIdtoken(t.multiFactorSession.idToken)}return null}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai{constructor(t,e,n){this.session=t,this.hints=e,this.signInResolver=n}static _fromError(t,e){const n=zt(t),i=e.customData._serverResponse,r=(i.mfaInfo||[]).map((t=>mn._fromServerResponse(n,t)));B(i.mfaPendingCredential,n,"internal-error");const s=oi._fromMfaPendingCredential(i.mfaPendingCredential);return new ai(s,r,(async t=>{const r=await t._process(n,s);delete i.mfaInfo,delete i.mfaPendingCredential;const o=Object.assign(Object.assign({},i),{idToken:r.idToken,refreshToken:r.refreshToken});switch(e.operationType){case"signIn":const t=await tn._fromIdTokenResponse(n,e.operationType,o);return await n._updateCurrentUser(t.user),t;case"reauthenticate":return B(e.user,n,"internal-error"),tn._forOperation(e.user,e.operationType,o);default:b(n,"internal-error")}}))}async resolveSignIn(t){const e=t;return this.signInResolver(e)}}function li(t,e){var n;const r=(0,i.Ku)(t),s=e;return B(e.customData.operationType,r,"argument-error"),B(null===(n=s.customData._serverResponse)||void 0===n?void 0:n.mfaPendingCredential,r,"argument-error"),ai._fromError(r,s)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ci(t,e){return G(t,"POST","/v2/accounts/mfaEnrollment:start",Q(t,e))}function ui(t,e){return G(t,"POST","/v2/accounts/mfaEnrollment:finalize",Q(t,e))}function hi(t,e){return G(t,"POST","/v2/accounts/mfaEnrollment:start",Q(t,e))}function Ai(t,e){return G(t,"POST","/v2/accounts/mfaEnrollment:finalize",Q(t,e))}function di(t,e){return G(t,"POST","/v2/accounts/mfaEnrollment:withdraw",Q(t,e))}class fi{constructor(t){this.user=t,this.enrolledFactors=[],t._onReload((e=>{e.mfaInfo&&(this.enrolledFactors=e.mfaInfo.map((e=>mn._fromServerResponse(t.auth,e))))}))}static _fromUser(t){return new fi(t)}async getSession(){return oi._fromIdtoken(await this.user.getIdToken(),this.user)}async enroll(t,e){const n=t,i=await this.getSession(),r=await lt(this.user,n._process(this.user.auth,i,e));return await this.user._updateTokensIfNecessary(r),this.user.reload()}async unenroll(t){const e="string"===typeof t?t:t.uid,n=await this.user.getIdToken();try{const t=await lt(this.user,di(this.user.auth,{idToken:n,mfaEnrollmentId:e}));this.enrolledFactors=this.enrolledFactors.filter((({uid:t})=>t!==e)),await this.user._updateTokensIfNecessary(t),await this.user.reload()}catch(i){throw i}}}const pi=new WeakMap;function gi(t){const e=(0,i.Ku)(t);return pi.has(e)||pi.set(e,fi._fromUser(e)),pi.get(e)}const mi="__sak";
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(mi,"1"),this.storage.removeItem(mi),Promise.resolve(!0)):Promise.resolve(!1)}catch(t){return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){const e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(){const t=(0,i.ZQ)();return It(t)||Nt(t)}const wi=1e3,_i=10;class bi extends vi{constructor(){super((()=>window.localStorage),"LOCAL"),this.boundEventHandler=(t,e)=>this.onStorageEvent(t,e),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=yi()&&Ut(),this.fallbackToPolling=Dt(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const e of Object.keys(this.listeners)){const n=this.storage.getItem(e),i=this.localCache[e];n!==i&&t(e,i,n)}}onStorageEvent(t,e=!1){if(!t.key)return void this.forAllChangedKeys(((t,e,n)=>{this.notifyListeners(t,n)}));const n=t.key;if(e?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const i=this.storage.getItem(n);if(t.newValue!==i)null!==t.newValue?this.storage.setItem(n,t.newValue):this.storage.removeItem(n);else if(this.localCache[n]===t.newValue&&!e)return}const i=()=>{const t=this.storage.getItem(n);(e||this.localCache[n]!==t)&&this.notifyListeners(n,t)},r=this.storage.getItem(n);kt()&&r!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,_i):i()}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e?JSON.parse(e):e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((()=>{this.forAllChangedKeys(((t,e,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:e,newValue:n}),!0)}))}),wi)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,e){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(t,e){await super._set(t,e),this.localCache[t]=JSON.stringify(e)}async _get(t){const e=await super._get(t);return this.localCache[t]=JSON.stringify(e),e}async _remove(t){await super._remove(t),delete this.localCache[t]}}bi.type="LOCAL";const xi=bi;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ei extends vi{constructor(){super((()=>window.sessionStorage),"SESSION")}_addListener(t,e){}_removeListener(t,e){}}Ei.type="SESSION";const Ci=Ei;
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Si(t){return Promise.all(t.map((async t=>{try{const e=await t;return{fulfilled:!0,value:e}}catch(e){return{fulfilled:!1,reason:e}}})))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const e=this.receivers.find((e=>e.isListeningto(t)));if(e)return e;const n=new Bi(t);return this.receivers.push(n),n}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const e=t,{eventId:n,eventType:i,data:r}=e.data,s=this.handlersMap[i];if(!(null===s||void 0===s?void 0:s.size))return;e.ports[0].postMessage({status:"ack",eventId:n,eventType:i});const o=Array.from(s).map((async t=>t(e.origin,r))),a=await Si(o);e.ports[0].postMessage({status:"done",eventId:n,eventType:i,response:a})}_subscribe(t,e){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(e)}_unsubscribe(t,e){this.handlersMap[t]&&e&&this.handlersMap[t].delete(e),e&&0!==this.handlersMap[t].size||delete this.handlersMap[t],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function Ti(t="",e=10){let n="";for(let i=0;i<e;i++)n+=Math.floor(10*Math.random());return t+n}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Bi.receivers=[];class Ii{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,e,n=50){const i="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let r,s;return new Promise(((o,a)=>{const l=Ti("",20);i.port1.start();const c=setTimeout((()=>{a(new Error("unsupported_event"))}),n);s={messageChannel:i,onMessage(t){const e=t;if(e.data.eventId===l)switch(e.data.status){case"ack":clearTimeout(c),r=setTimeout((()=>{a(new Error("timeout"))}),3e3);break;case"done":clearTimeout(r),o(e.data.response);break;default:clearTimeout(c),clearTimeout(r),a(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[i.port2])})).finally((()=>{s&&this.removeMessageHandler(s)}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(){return window}function Li(t){Fi().location.href=t}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(){return"undefined"!==typeof Fi()["WorkerGlobalScope"]&&"function"===typeof Fi()["importScripts"]}async function Mi(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{const t=await navigator.serviceWorker.ready;return t.active}catch(t){return null}}function Pi(){var t;return(null===(t=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===t?void 0:t.controller)||null}function Ni(){return Ri()?self:null}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oi="firebaseLocalStorageDb",ki=1,Di="firebaseLocalStorage",Ui="fbase_key";class Qi{constructor(t){this.request=t}toPromise(){return new Promise(((t,e)=>{this.request.addEventListener("success",(()=>{t(this.request.result)})),this.request.addEventListener("error",(()=>{e(this.request.error)}))}))}}function Gi(t,e){return t.transaction([Di],e?"readwrite":"readonly").objectStore(Di)}function Hi(){const t=indexedDB.deleteDatabase(Oi);return new Qi(t).toPromise()}function Vi(){const t=indexedDB.open(Oi,ki);return new Promise(((e,n)=>{t.addEventListener("error",(()=>{n(t.error)})),t.addEventListener("upgradeneeded",(()=>{const e=t.result;try{e.createObjectStore(Di,{keyPath:Ui})}catch(i){n(i)}})),t.addEventListener("success",(async()=>{const n=t.result;n.objectStoreNames.contains(Di)?e(n):(n.close(),await Hi(),e(await Vi()))}))}))}async function ji(t,e,n){const i=Gi(t,!0).put({[Ui]:e,value:n});return new Qi(i).toPromise()}async function Wi(t,e){const n=Gi(t,!1).get(e),i=await new Qi(n).toPromise();return void 0===i?null:i.value}function zi(t,e){const n=Gi(t,!0).delete(e);return new Qi(n).toPromise()}const Ki=800,qi=3;class $i{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then((()=>{}),(()=>{}))}async _openDb(){return this.db||(this.db=await Vi()),this.db}async _withRetries(t){let e=0;while(1)try{const e=await this._openDb();return await t(e)}catch(n){if(e++>qi)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Ri()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Bi._getInstance(Ni()),this.receiver._subscribe("keyChanged",(async(t,e)=>{const n=await this._poll();return{keyProcessed:n.includes(e.key)}})),this.receiver._subscribe("ping",(async(t,e)=>["keyChanged"]))}async initializeSender(){var t,e;if(this.activeServiceWorker=await Mi(),!this.activeServiceWorker)return;this.sender=new Ii(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(t=n[0])||void 0===t?void 0:t.fulfilled)&&(null===(e=n[0])||void 0===e?void 0:e.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(this.sender&&this.activeServiceWorker&&Pi()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch(e){}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await Vi();return await ji(t,mi,"1"),await zi(t,mi),!0}catch(t){}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,e){return this._withPendingWrite((async()=>(await this._withRetries((n=>ji(n,t,e))),this.localCache[t]=e,this.notifyServiceWorker(t))))}async _get(t){const e=await this._withRetries((e=>Wi(e,t)));return this.localCache[t]=e,e}async _remove(t){return this._withPendingWrite((async()=>(await this._withRetries((e=>zi(e,t))),delete this.localCache[t],this.notifyServiceWorker(t))))}async _poll(){const t=await this._withRetries((t=>{const e=Gi(t,!1).getAll();return new Qi(e).toPromise()}));if(!t)return[];if(0!==this.pendingWrites)return[];const e=[],n=new Set;if(0!==t.length)for(const{fbase_key:i,value:r}of t)n.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(r)&&(this.notifyListeners(i,r),e.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!n.has(i)&&(this.notifyListeners(i,null),e.push(i));return e}notifyListeners(t,e){this.localCache[t]=e;const n=this.listeners[t];if(n)for(const i of Array.from(n))i(e)}startPolling(){this.stopPolling(),this.pollTimer=setInterval((async()=>this._poll()),Ki)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,e){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(e)}_removeListener(t,e){this.listeners[t]&&(this.listeners[t].delete(e),0===this.listeners[t].size&&delete this.listeners[t]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$i.type="LOCAL";const Xi=$i;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t,e){return G(t,"POST","/v2/accounts/mfaSignIn:start",Q(t,e))}function Zi(t,e){return G(t,"POST","/v2/accounts/mfaSignIn:finalize",Q(t,e))}function Ji(t,e){return G(t,"POST","/v2/accounts/mfaSignIn:finalize",Q(t,e))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tr=500,er=6e4,nr=1e12;class ir{constructor(t){this.auth=t,this.counter=nr,this._widgets=new Map}render(t,e){const n=this.counter;return this._widgets.set(n,new rr(t,this.auth.name,e||{})),this.counter++,n}reset(t){var e;const n=t||nr;null===(e=this._widgets.get(n))||void 0===e||e.delete(),this._widgets.delete(n)}getResponse(t){var e;const n=t||nr;return(null===(e=this._widgets.get(n))||void 0===e?void 0:e.getResponse())||""}async execute(t){var e;const n=t||nr;return null===(e=this._widgets.get(n))||void 0===e||e.execute(),""}}class rr{constructor(t,e,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const i="string"===typeof t?document.getElementById(t):t;B(i,"argument-error",{appName:e}),this.container=i,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout((()=>{this.responseToken=sr(50);const{callback:t,"expired-callback":e}=this.params;if(t)try{t(this.responseToken)}catch(n){}this.timerId=window.setTimeout((()=>{if(this.timerId=null,this.responseToken=null,e)try{e()}catch(n){}this.isVisible&&this.execute()}),er)}),tr))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}function sr(t){const e=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let i=0;i<t;i++)e.push(n.charAt(Math.floor(Math.random()*n.length)));return e.join("")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const or=te("rcb"),ar=new N(3e4,6e4);class lr{constructor(){var t;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!(null===(t=Fi().grecaptcha)||void 0===t?void 0:t.render)}load(t,e=""){return B(cr(e),t,"argument-error"),this.shouldResolveImmediately(e)&&q(Fi().grecaptcha)?Promise.resolve(Fi().grecaptcha):new Promise(((n,r)=>{const s=Fi().setTimeout((()=>{r(x(t,"network-request-failed"))}),ar.get());Fi()[or]=()=>{Fi().clearTimeout(s),delete Fi()[or];const i=Fi().grecaptcha;if(!i||!q(i))return void r(x(t,"internal-error"));const o=i.render;i.render=(t,e)=>{const n=o(t,e);return this.counter++,n},this.hostLanguage=e,n(i)};const o=`${Yt()}?${(0,i.Am)({onload:or,render:"explicit",hl:e})}`;Xt(o).catch((()=>{clearTimeout(s),r(x(t,"internal-error"))}))}))}clearedOneInstance(){this.counter--}shouldResolveImmediately(t){var e;return!!(null===(e=Fi().grecaptcha)||void 0===e?void 0:e.render)&&(t===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}function cr(t){return t.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(t)}class ur{async load(t){return new ir(t)}clearedOneInstance(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr="recaptcha",Ar={theme:"light",type:"image"};class dr{constructor(t,e,n=Object.assign({},Ar)){this.parameters=n,this.type=hr,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=zt(t),this.isInvisible="invisible"===this.parameters.size,B("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const i="string"===typeof e?document.getElementById(e):e;B(i,this.auth,"argument-error"),this.container=i,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ur:new lr,this.validateStartingState()}async verify(){this.assertNotDestroyed();const t=await this.render(),e=this.getAssertedRecaptcha(),n=e.getResponse(t);return n||new Promise((n=>{const i=t=>{t&&(this.tokenChangeListeners.delete(i),n(t))};this.tokenChangeListeners.add(i),this.isInvisible&&e.execute(t)}))}render(){try{this.assertNotDestroyed()}catch(t){return Promise.reject(t)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch((t=>{throw this.renderPromise=null,t}))),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach((t=>{this.container.removeChild(t)}))}validateStartingState(){B(!this.parameters.sitekey,this.auth,"argument-error"),B(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),B("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(t){return e=>{if(this.tokenChangeListeners.forEach((t=>t(e))),"function"===typeof t)t(e);else if("string"===typeof t){const n=Fi()[t];"function"===typeof n&&n(e)}}}assertNotDestroyed(){B(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let t=this.container;if(!this.isInvisible){const e=document.createElement("div");t.appendChild(e),t=e}this.widgetId=this.getAssertedRecaptcha().render(t,this.parameters)}return this.widgetId}async init(){B(L()&&!Ri(),this.auth,"internal-error"),await fr(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const t=await Y(this.auth);B(t,this.auth,"internal-error"),this.parameters.sitekey=t}getAssertedRecaptcha(){return B(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}function fr(){let t=null;return new Promise((e=>{"complete"!==document.readyState?(t=()=>e(),window.addEventListener("load",t)):e()})).catch((e=>{throw t&&window.removeEventListener("load",t),e}))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pr{constructor(t,e){this.verificationId=t,this.onConfirmation=e}confirm(t){const e=Oe._fromVerification(this.verificationId,t);return this.onConfirmation(e)}}async function gr(t,e,n){const r=zt(t),s=await yr(r,e,(0,i.Ku)(n));return new pr(s,(t=>An(r,t)))}async function mr(t,e,n){const r=(0,i.Ku)(t);await cn(!1,r,"phone");const s=await yr(r.auth,e,(0,i.Ku)(n));return new pr(s,(t=>dn(r,t)))}async function vr(t,e,n){const r=(0,i.Ku)(t),s=await yr(r.auth,e,(0,i.Ku)(n));return new pr(s,(t=>fn(r,t)))}async function yr(t,e,n){var i;const r=await n.verify();try{let s;if(B("string"===typeof r,t,"argument-error"),B(n.type===hr,t,"argument-error"),s="string"===typeof e?{phoneNumber:e}:e,"session"in s){const e=s.session;if("phoneNumber"in s){B("enroll"===e.type,t,"internal-error");const n=await ci(t,{idToken:e.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,recaptchaToken:r}});return n.phoneSessionInfo.sessionInfo}{B("signin"===e.type,t,"internal-error");const n=(null===(i=s.multiFactorHint)||void 0===i?void 0:i.uid)||s.multiFactorUid;B(n,t,"missing-multi-factor-info");const o=await Yi(t,{mfaPendingCredential:e.credential,mfaEnrollmentId:n,phoneSignInInfo:{recaptchaToken:r}});return o.phoneResponseInfo.sessionInfo}}{const{sessionInfo:e}=await Le(t,{phoneNumber:s.phoneNumber,recaptchaToken:r});return e}}finally{n._reset()}}async function wr(t,e){await ln((0,i.Ku)(t),e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(t){this.providerId=_r.PROVIDER_ID,this.auth=zt(t)}verifyPhoneNumber(t,e){return yr(this.auth,t,(0,i.Ku)(e))}static credential(t,e){return Oe._fromVerification(t,e)}static credentialFromResult(t){const e=t;return _r.credentialFromTaggedObject(e)}static credentialFromError(t){return _r.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{phoneNumber:e,temporaryProof:n}=t;return e&&n?Oe._fromTokenResponse(e,n):null}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function br(t,e){return e?bt(e):(B(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */_r.PROVIDER_ID="phone",_r.PHONE_SIGN_IN_METHOD="phone";class xr extends fe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return Te(t,this._buildIdpRequest())}_linkToIdToken(t,e){return Te(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return Te(t,this._buildIdpRequest())}_buildIdpRequest(t){const e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}}function Er(t){return hn(t.auth,new xr(t),t.bypassAuthState)}function Cr(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),un(n,new xr(t),t.bypassAuthState)}async function Sr(t){const{auth:e,user:n}=t;return B(n,e,"internal-error"),ln(n,new xr(t),t.bypassAuthState)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Br{constructor(t,e,n,i,r=!1){this.auth=t,this.resolver=n,this.user=i,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((async(t,e)=>{this.pendingPromise={resolve:t,reject:e};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}}))}async onAuthEvent(t){const{urlResponse:e,sessionId:n,postBody:i,tenantId:r,error:s,type:o}=t;if(s)return void this.reject(s);const a={auth:this.auth,requestUri:e,sessionId:n,tenantId:r||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(o)(a))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return Er;case"linkViaPopup":case"linkViaRedirect":return Sr;case"reauthViaPopup":case"reauthViaRedirect":return Cr;default:b(this.auth,"internal-error")}}resolve(t){I(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){I(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tr=new N(2e3,1e4);async function Ir(t,e,n){const i=zt(t);C(t,e,He);const r=br(i,n),s=new Rr(i,"signInViaPopup",e,r);return s.executeNotNull()}async function Fr(t,e,n){const r=(0,i.Ku)(t);C(r.auth,e,He);const s=br(r.auth,n),o=new Rr(r.auth,"reauthViaPopup",e,s,r);return o.executeNotNull()}async function Lr(t,e,n){const r=(0,i.Ku)(t);C(r.auth,e,He);const s=br(r.auth,n),o=new Rr(r.auth,"linkViaPopup",e,s,r);return o.executeNotNull()}class Rr extends Br{constructor(t,e,n,i,r){super(t,e,i,r),this.provider=n,this.authWindow=null,this.pollId=null,Rr.currentPopupAction&&Rr.currentPopupAction.cancel(),Rr.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return B(t,this.auth,"internal-error"),t}async onExecution(){I(1===this.filter.length,"Popup operations only handle one event");const t=Ti();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch((t=>{this.reject(t)})),this.resolver._isIframeWebStorageSupported(this.auth,(t=>{t||this.reject(x(this.auth,"web-storage-unsupported"))})),this.pollUserCancellation()}get eventId(){var t;return(null===(t=this.authWindow)||void 0===t?void 0:t.associatedEvent)||null}cancel(){this.reject(x(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Rr.currentPopupAction=null}pollUserCancellation(){const t=()=>{var e,n;(null===(n=null===(e=this.authWindow)||void 0===e?void 0:e.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout((()=>{this.pollId=null,this.reject(x(this.auth,"popup-closed-by-user"))}),8e3):this.pollId=window.setTimeout(t,Tr.get())};t()}}Rr.currentPopupAction=null;
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
const Mr="pendingRedirect",Pr=new Map;class Nr extends Br{constructor(t,e,n=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,n),this.eventId=null}async execute(){let t=Pr.get(this.auth._key());if(!t){try{const e=await Or(this.resolver,this.auth),n=e?await super.execute():null;t=()=>Promise.resolve(n)}catch(e){t=()=>Promise.reject(e)}Pr.set(this.auth._key(),t)}return this.bypassAuthState||Pr.set(this.auth._key(),(()=>Promise.resolve(null))),t()}async onAuthEvent(t){if("signInViaRedirect"===t.type)return super.onAuthEvent(t);if("unknown"!==t.type){if(t.eventId){const e=await this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,super.onAuthEvent(t);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}async function Or(t,e){const n=Qr(e),i=Ur(t);if(!await i._isAvailable())return!1;const r="true"===await i._get(n);return await i._remove(n),r}async function kr(t,e){return Ur(t)._set(Qr(e),"true")}function Dr(t,e){Pr.set(t._key(),e)}function Ur(t){return bt(t._redirectPersistence)}function Qr(t){return Ct(Mr,t.config.apiKey,t.name)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t,e,n){return Hr(t,e,n)}async function Hr(t,e,n){const i=zt(t);C(t,e,He),await i._initializationPromise;const r=br(i,n);return await kr(r,i),r._openRedirect(i,e,"signInViaRedirect")}function Vr(t,e,n){return jr(t,e,n)}async function jr(t,e,n){const r=(0,i.Ku)(t);C(r.auth,e,He),await r.auth._initializationPromise;const s=br(r.auth,n);await kr(s,r.auth);const o=await $r(r);return s._openRedirect(r.auth,e,"reauthViaRedirect",o)}function Wr(t,e,n){return zr(t,e,n)}async function zr(t,e,n){const r=(0,i.Ku)(t);C(r.auth,e,He),await r.auth._initializationPromise;const s=br(r.auth,n);await cn(!1,r,e.providerId),await kr(s,r.auth);const o=await $r(r);return s._openRedirect(r.auth,e,"linkViaRedirect",o)}async function Kr(t,e){return await zt(t)._initializationPromise,qr(t,e,!1)}async function qr(t,e,n=!1){const i=zt(t),r=br(i,e),s=new Nr(i,r,n),o=await s.execute();return o&&!n&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}async function $r(t){const e=Ti(`${t.uid}:::`);return t._redirectEventId=e,await t.auth._setRedirectUser(t),await t.auth._persistUserIfCurrent(t),e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr=6e5;class Yr{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach((n=>{this.isEventForConsumer(t,n)&&(e=!0,this.sendToConsumer(t,n),this.saveEventToCache(t))})),this.hasHandledPotentialRedirect||!ts(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var n;if(t.error&&!Jr(t)){const i=(null===(n=t.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";e.onError(x(this.auth,i))}else e.onAuthEvent(t)}isEventForConsumer(t,e){const n=null===e.eventId||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&n}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=Xr&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zr(t))}saveEventToCache(t){this.cachedEventUids.add(Zr(t)),this.lastProcessedEventTime=Date.now()}}function Zr(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter((t=>t)).join("-")}function Jr({type:t,error:e}){return"unknown"===t&&"auth/no-auth-event"===(null===e||void 0===e?void 0:e.code)}function ts(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Jr(t);default:return!1}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function es(t,e={}){return G(t,"GET","/v1/projects",e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ns=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,is=/^https?/;async function rs(t){if(t.config.emulator)return;const{authorizedDomains:e}=await es(t);for(const i of e)try{if(ss(i))return}catch(n){}b(t,"unauthorized-domain")}function ss(t){const e=F(),{protocol:n,hostname:i}=new URL(e);if(t.startsWith("chrome-extension://")){const r=new URL(t);return""===r.hostname&&""===i?"chrome-extension:"===n&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):"chrome-extension:"===n&&r.hostname===i}if(!is.test(n))return!1;if(ns.test(t))return i===t;const r=t.replace(/\./g,"\\."),s=new RegExp("^(.+\\."+r+"|"+r+")$","i");return s.test(i)}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const os=new N(3e4,6e4);function as(){const t=Fi().___jsl;if(null===t||void 0===t?void 0:t.H)for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}function ls(t){return new Promise(((e,n)=>{var i,r,s;function o(){as(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{as(),n(x(t,"network-request-failed"))},timeout:os.get()})}if(null===(r=null===(i=Fi().gapi)||void 0===i?void 0:i.iframes)||void 0===r?void 0:r.Iframe)e(gapi.iframes.getContext());else{if(!(null===(s=Fi().gapi)||void 0===s?void 0:s.load)){const e=te("iframefcb");return Fi()[e]=()=>{gapi.load?o():n(x(t,"network-request-failed"))},Xt(`${Jt()}?onload=${e}`).catch((t=>n(t)))}o()}})).catch((t=>{throw cs=null,t}))}let cs=null;function us(t){return cs=cs||ls(t),cs}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hs=new N(5e3,15e3),As="__/auth/iframe",ds="emulator/auth/iframe",fs={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ps=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gs(t){const e=t.config;B(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?O(e,ds):`https://${t.config.authDomain}/${As}`,s={apiKey:e.apiKey,appName:t.name,v:r.MF},o=ps.get(t.config.apiHost);o&&(s.eid=o);const a=t._getFrameworks();return a.length&&(s.fw=a.join(",")),`${n}?${(0,i.Am)(s).slice(1)}`}async function ms(t){const e=await us(t),n=Fi().gapi;return B(n,t,"internal-error"),e.open({where:document.body,url:gs(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fs,dontclear:!0},(e=>new Promise((async(n,i)=>{await e.restyle({setHideOnLeave:!1});const r=x(t,"network-request-failed"),s=Fi().setTimeout((()=>{i(r)}),hs.get());function o(){Fi().clearTimeout(s),n(e)}e.ping(o).then(o,(()=>{i(r)}))}))))}
/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ys=500,ws=600,_s="_blank",bs="http://localhost";class xs{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(t){}}}function Es(t,e,n,r=ys,s=ws){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},vs),{width:r.toString(),height:s.toString(),top:o,left:a}),u=(0,i.ZQ)().toLowerCase();n&&(l=Ft(u)?_s:n),Tt(u)&&(e=e||bs,c.scrollbars="yes");const h=Object.entries(c).reduce(((t,[e,n])=>`${t}${e}=${n},`),"");if(Ot(u)&&"_self"!==l)return Cs(e||"",l),new xs(null);const A=window.open(e||"",l,h);B(A,t,"popup-blocked");try{A.focus()}catch(d){}return new xs(A)}function Cs(t,e){const n=document.createElement("a");n.href=t,n.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(i)}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss="__/auth/handler",Bs="emulator/auth/handler",Ts=encodeURIComponent("fac");async function Is(t,e,n,s,o,a){B(t.config.authDomain,t,"auth-domain-config-required"),B(t.config.apiKey,t,"invalid-api-key");const l={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:s,v:r.MF,eventId:o};if(e instanceof He){e.setDefaultLanguage(t.languageCode),l.providerId=e.providerId||"",(0,i.Im)(e.getCustomParameters())||(l.customParameters=JSON.stringify(e.getCustomParameters()));for(const[t,e]of Object.entries(a||{}))l[t]=e}if(e instanceof Ve){const t=e.getScopes().filter((t=>""!==t));t.length>0&&(l.scopes=t.join(","))}t.tenantId&&(l.tid=t.tenantId);const c=l;for(const i of Object.keys(c))void 0===c[i]&&delete c[i];const u=await t._getAppCheckToken(),h=u?`#${Ts}=${encodeURIComponent(u)}`:"";return`${Fs(t)}?${(0,i.Am)(c).slice(1)}${h}`}function Fs({config:t}){return t.emulator?O(t,Bs):`https://${t.authDomain}/${Ss}`}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ls="webStorageSupport";class Rs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ci,this._completeRedirectFn=qr,this._overrideRedirectResult=Dr}async _openPopup(t,e,n,i){var r;I(null===(r=this.eventManagers[t._key()])||void 0===r?void 0:r.manager,"_initialize() not called before _openPopup()");const s=await Is(t,e,n,F(),i);return Es(t,s,Ti())}async _openRedirect(t,e,n,i){await this._originValidation(t);const r=await Is(t,e,n,F(),i);return Li(r),new Promise((()=>{}))}_initialize(t){const e=t._key();if(this.eventManagers[e]){const{manager:t,promise:n}=this.eventManagers[e];return t?Promise.resolve(t):(I(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(t);return this.eventManagers[e]={promise:n},n.catch((()=>{delete this.eventManagers[e]})),n}async initAndGetManager(t){const e=await ms(t),n=new Yr(t);return e.register("authEvent",(e=>{B(null===e||void 0===e?void 0:e.authEvent,t,"invalid-auth-event");const i=n.onEvent(e.authEvent);return{status:i?"ACK":"ERROR"}}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:n},this.iframes[t._key()]=e,n}_isIframeWebStorageSupported(t,e){const n=this.iframes[t._key()];n.send(Ls,{type:Ls},(n=>{var i;const r=null===(i=null===n||void 0===n?void 0:n[0])||void 0===i?void 0:i[Ls];void 0!==r&&e(!!r),b(t,"internal-error")}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=rs(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return Dt()||It()||Nt()}}const Ms=Rs;class Ps{constructor(t){this.factorId=t}_process(t,e,n){switch(e.type){case"enroll":return this._finalizeEnroll(t,e.credential,n);case"signin":return this._finalizeSignIn(t,e.credential);default:return T("unexpected MultiFactorSessionType")}}}class Ns extends Ps{constructor(t){super("phone"),this.credential=t}static _fromCredential(t){return new Ns(t)}_finalizeEnroll(t,e,n){return ui(t,{idToken:e,displayName:n,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(t,e){return Zi(t,{mfaPendingCredential:e,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}class Os{constructor(){}static assertion(t){return Ns._fromCredential(t)}}Os.FACTOR_ID="phone";class ks{static assertionForEnrollment(t,e){return Ds._fromSecret(t,e)}static assertionForSignIn(t,e){return Ds._fromEnrollmentId(t,e)}static async generateSecret(t){var e;const n=t;B("undefined"!==typeof(null===(e=n.user)||void 0===e?void 0:e.auth),"internal-error");const i=await hi(n.user.auth,{idToken:n.credential,totpEnrollmentInfo:{}});return Us._fromStartTotpMfaEnrollmentResponse(i,n.user.auth)}}ks.FACTOR_ID="totp";class Ds extends Ps{constructor(t,e,n){super("totp"),this.otp=t,this.enrollmentId=e,this.secret=n}static _fromSecret(t,e){return new Ds(e,void 0,t)}static _fromEnrollmentId(t,e){return new Ds(e,t)}async _finalizeEnroll(t,e,n){return B("undefined"!==typeof this.secret,t,"argument-error"),Ai(t,{idToken:e,displayName:n,totpVerificationInfo:this.secret._makeTotpVerificationInfo(this.otp)})}async _finalizeSignIn(t,e){B(void 0!==this.enrollmentId&&void 0!==this.otp,t,"argument-error");const n={verificationCode:this.otp};return Ji(t,{mfaPendingCredential:e,mfaEnrollmentId:this.enrollmentId,totpVerificationInfo:n})}}class Us{constructor(t,e,n,i,r,s,o){this.sessionInfo=s,this.auth=o,this.secretKey=t,this.hashingAlgorithm=e,this.codeLength=n,this.codeIntervalSeconds=i,this.enrollmentCompletionDeadline=r}static _fromStartTotpMfaEnrollmentResponse(t,e){return new Us(t.totpSessionInfo.sharedSecretKey,t.totpSessionInfo.hashingAlgorithm,t.totpSessionInfo.verificationCodeLength,t.totpSessionInfo.periodSec,new Date(t.totpSessionInfo.finalizeEnrollmentTime).toUTCString(),t.totpSessionInfo.sessionInfo,e)}_makeTotpVerificationInfo(t){return{sessionInfo:this.sessionInfo,verificationCode:t}}generateQrCodeUrl(t,e){var n;let i=!1;return(Qs(t)||Qs(e))&&(i=!0),i&&(Qs(t)&&(t=(null===(n=this.auth.currentUser)||void 0===n?void 0:n.email)||"unknownuser"),Qs(e)&&(e=this.auth.name)),`otpauth://totp/${e}:${t}?secret=${this.secretKey}&issuer=${e}&algorithm=${this.hashingAlgorithm}&digits=${this.codeLength}`}}function Qs(t){return"undefined"===typeof t||0===(null===t||void 0===t?void 0:t.length)}var Gs="@firebase/auth",Hs="1.6.0";
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Vs{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),(null===(t=this.auth.currentUser)||void 0===t?void 0:t.uid)||null}async getToken(t){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;const e=await this.auth.currentUser.getIdToken(t);return{accessToken:e}}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const e=this.auth.onIdTokenChanged((e=>{t((null===e||void 0===e?void 0:e.stsTokenManager.accessToken)||null)}));this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){B(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Ws(t){(0,r.om)(new a.uA("auth",((e,{options:n})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;B(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qt(t)},c=new Wt(i,r,s,l);return le(c,n),c}),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback(((t,e,n)=>{const i=t.getProvider("auth-internal");i.initialize()}))),(0,r.om)(new a.uA("auth-internal",(t=>{const e=zt(t.getProvider("auth").getImmediate());return(t=>new Vs(t))(e)}),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,r.KO)(Gs,Hs,js(t)),(0,r.KO)(Gs,Hs,"esm2017")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zs=300,Ks=(0,i.XA)("authIdTokenMaxAge")||zs;let qs=null;const $s=t=>async e=>{const n=e&&await e.getIdTokenResult(),i=n&&((new Date).getTime()-Date.parse(n.issuedAtTime))/1e3;if(i&&i>Ks)return;const r=null===n||void 0===n?void 0:n.token;qs!==r&&(qs=r,await fetch(t,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Xs(t=(0,r.Sx)()){const e=(0,r.j6)(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ae(t,{popupRedirectResolver:Ms,persistence:[Xi,xi,Ci]}),s=(0,i.XA)("authTokenSyncURL");if(s){const t=$s(s);Jn(n,t,(()=>t(n.currentUser))),Zn(n,(e=>t(e)))}const o=(0,i.Tj)("auth");return o&&ce(n,`http://${o}`),n}function Ys(){var t,e;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}$t({loadJS(t){return new Promise(((e,n)=>{const i=document.createElement("script");i.setAttribute("src",t),i.onload=e,i.onerror=t=>{const e=x("internal-error");e.customData=t,n(e)},i.type="text/javascript",i.charset="UTF-8",Ys().appendChild(i)}))},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="}),Ws("Browser")},9675:function(t,e,n){"use strict";n.r(e),n.d(e,{AbstractUserDataWriter:function(){return pg},AggregateField:function(){return lp},AggregateQuerySnapshot:function(){return cp},Bytes:function(){return up},CACHE_SIZE_UNLIMITED:function(){return Wf},CollectionReference:function(){return Of},DocumentReference:function(){return Nf},DocumentSnapshot:function(){return Eg},FieldPath:function(){return hp},FieldValue:function(){return dp},Firestore:function(){return zf},FirestoreError:function(){return lr},GeoPoint:function(){return fp},LoadBundleTask:function(){return jf},PersistentCacheIndexManager:function(){return mm},Query:function(){return Pf},QueryCompositeFilterConstraint:function(){return Xp},QueryConstraint:function(){return zp},QueryDocumentSnapshot:function(){return Cg},QueryEndAtConstraint:function(){return ag},QueryFieldFilterConstraint:function(){return qp},QueryLimitConstraint:function(){return eg},QueryOrderByConstraint:function(){return Jp},QuerySnapshot:function(){return Sg},QueryStartAtConstraint:function(){return rg},SnapshotMetadata:function(){return xg},Timestamp:function(){return Er},Transaction:function(){return am},WriteBatch:function(){return sm},_AutoId:function(){return wr},_ByteString:function(){return qs},_DatabaseId:function(){return io},_DocumentKey:function(){return Fr},_EmptyAppCheckTokenProvider:function(){return vr},_EmptyAuthCredentialsProvider:function(){return hr},_FieldPath:function(){return Ir},_TestingHooks:function(){return Em},_cast:function(){return If},_debugAssert:function(){return sr},_isBase64Available:function(){return Ks},_logWarn:function(){return er},_validateIsNotUsedTogether:function(){return Cf},addDoc:function(){return Ug},aggregateFieldEqual:function(){return _g},aggregateQuerySnapshotEqual:function(){return bg},and:function(){return Zp},arrayRemove:function(){return Am},arrayUnion:function(){return hm},average:function(){return yg},clearIndexedDbPersistence:function(){return tp},collection:function(){return kf},collectionGroup:function(){return Df},connectFirestoreEmulator:function(){return Mf},count:function(){return wg},deleteAllPersistentCacheIndexes:function(){return _m},deleteDoc:function(){return Dg},deleteField:function(){return cm},disableNetwork:function(){return ip},disablePersistentCacheIndexAutoCreation:function(){return wm},doc:function(){return Uf},documentId:function(){return Ap},enableIndexedDbPersistence:function(){return Yf},enableMultiTabIndexedDbPersistence:function(){return Zf},enableNetwork:function(){return np},enablePersistentCacheIndexAutoCreation:function(){return ym},endAt:function(){return cg},endBefore:function(){return lg},ensureFirestoreConfigured:function(){return $f},executeWrite:function(){return Hg},getAggregateFromServer:function(){return Wg},getCountFromServer:function(){return jg},getDoc:function(){return Ig},getDocFromCache:function(){return Lg},getDocFromServer:function(){return Rg},getDocs:function(){return Mg},getDocsFromCache:function(){return Pg},getDocsFromServer:function(){return Ng},getFirestore:function(){return qf},getPersistentCacheIndexManager:function(){return vm},increment:function(){return dm},initializeFirestore:function(){return Kf},limit:function(){return ng},limitToLast:function(){return ig},loadBundle:function(){return sp},memoryEagerGarbageCollector:function(){return Xg},memoryLocalCache:function(){return Zg},memoryLruGarbageCollector:function(){return Yg},namedQuery:function(){return op},onSnapshot:function(){return Qg},onSnapshotsInSync:function(){return Gg},or:function(){return Yp},orderBy:function(){return tg},persistentLocalCache:function(){return Jg},persistentMultipleTabManager:function(){return im},persistentSingleTabManager:function(){return nm},query:function(){return Kp},queryEqual:function(){return Gf},refEqual:function(){return Qf},runTransaction:function(){return lm},serverTimestamp:function(){return um},setDoc:function(){return Og},setIndexConfiguration:function(){return pm},setLogLevel:function(){return Zi},snapshotEqual:function(){return Tg},startAfter:function(){return og},startAt:function(){return sg},sum:function(){return vg},terminate:function(){return rp},updateDoc:function(){return kg},waitForPendingWrites:function(){return ep},where:function(){return $p},writeBatch:function(){return fm}});n(4114),n(7467),n(4732),n(9577),n(6280),n(7913),n(7801),n(4979);var i,r=n(3405),s=n(852),o=n(1363),a=n(4046),l="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},c={},u=u||{},h=l||self;function A(t){var e=typeof t;return e="object"!=e?e:t?Array.isArray(t)?"array":e:"null","array"==e||"object"==e&&"number"==typeof t.length}function d(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function f(t){return Object.prototype.hasOwnProperty.call(t,p)&&t[p]||(t[p]=++g)}var p="closure_uid_"+(1e9*Math.random()>>>0),g=0;function m(t,e,n){return t.call.apply(t.bind,arguments)}function v(t,e,n){if(!t)throw Error();if(2<arguments.length){var i=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,i),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function y(t,e,n){return y=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?m:v,y.apply(null,arguments)}function w(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function _(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(t,n,i){for(var r=Array(arguments.length-2),s=2;s<arguments.length;s++)r[s-2]=arguments[s];return e.prototype[n].apply(t,r)}}function b(){this.s=this.s,this.o=this.o}var x=0;b.prototype.s=!1,b.prototype.sa=function(){this.s||(this.s=!0,this.N(),0==x)||f(this)},b.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"===typeof t)return"string"!==typeof e||1!=e.length?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function C(t){const e=t.length;if(0<e){const n=Array(e);for(let i=0;i<e;i++)n[i]=t[i];return n}return[]}function S(t,e){for(let n=1;n<arguments.length;n++){const e=arguments[n];if(A(e)){const n=t.length||0,i=e.length||0;t.length=n+i;for(let r=0;r<i;r++)t[n+r]=e[r]}else t.push(e)}}function B(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var T=function(){if(!h.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{const t=()=>{};h.addEventListener("test",t,e),h.removeEventListener("test",t,e)}catch(n){}return t}();function I(t){return/^[\s\xa0]*$/.test(t)}function F(){var t=h.navigator;return t&&(t=t.userAgent)?t:""}function L(t){return-1!=F().indexOf(t)}function R(t){return R[" "](t),t}function M(t,e){var n=wi;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}R[" "]=function(){};var P,N,O=L("Opera"),k=L("Trident")||L("MSIE"),D=L("Edge"),U=D||k,Q=L("Gecko")&&!(-1!=F().toLowerCase().indexOf("webkit")&&!L("Edge"))&&!(L("Trident")||L("MSIE"))&&!L("Edge"),G=-1!=F().toLowerCase().indexOf("webkit")&&!L("Edge");function H(){var t=h.document;return t?t.documentMode:void 0}t:{var V="",j=function(){var t=F();return Q?/rv:([^\);]+)(\)|;)/.exec(t):D?/Edge\/([\d\.]+)/.exec(t):k?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t):G?/WebKit\/(\S+)/.exec(t):O?/(?:Version)[ \/]?(\S+)/.exec(t):void 0}();if(j&&(V=j?j[1]:""),k){var W=H();if(null!=W&&W>parseFloat(V)){P=String(W);break t}}P=V}if(h.document&&k){var z=H();N=z||(parseInt(P,10)||void 0)}else N=void 0;var K=N;function q(t,e){if(B.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,i=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(Q){t:{try{R(e.nodeName);var r=!0;break t}catch(s){}r=!1}r||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,i?(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"===typeof t.pointerType?t.pointerType:$[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&q.$.h.call(this)}}_(q,B);var $={2:"touch",3:"pen",4:"mouse"};q.prototype.h=function(){q.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var X="closure_listenable_"+(1e6*Math.random()|0),Y=0;function Z(t,e,n,i,r){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!i,this.la=r,this.key=++Y,this.fa=this.ia=!1}function J(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function tt(t,e,n){for(const i in t)e.call(n,t[i],i,t)}function et(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function nt(t){const e={};for(const n in t)e[n]=t[n];return e}const it="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function rt(t,e){let n,i;for(let r=1;r<arguments.length;r++){for(n in i=arguments[r],i)t[n]=i[n];for(let e=0;e<it.length;e++)n=it[e],Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}}function st(t){this.src=t,this.g={},this.h=0}function ot(t,e){var n=e.type;if(n in t.g){var i,r=t.g[n],s=E(r,e);(i=0<=s)&&Array.prototype.splice.call(r,s,1),i&&(J(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function at(t,e,n,i){for(var r=0;r<t.length;++r){var s=t[r];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==i)return r}return-1}st.prototype.add=function(t,e,n,i,r){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=at(t,e,i,r);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new Z(e,this.src,s,!!i,r),e.ia=n,t.push(e)),e};var lt="closure_lm_"+(1e6*Math.random()|0),ct={};function ut(t,e,n,i,r){if(i&&i.once)return dt(t,e,n,i,r);if(Array.isArray(e)){for(var s=0;s<e.length;s++)ut(t,e[s],n,i,r);return null}return n=wt(n),t&&t[X]?t.O(e,n,d(i)?!!i.capture:!!i,r):ht(t,e,n,!1,i,r)}function ht(t,e,n,i,r,s){if(!e)throw Error("Invalid event type");var o=d(r)?!!r.capture:!!r,a=vt(t);if(a||(t[lt]=a=new st(t)),n=a.add(e,n,i,o,s),n.proxy)return n;if(i=At(),n.proxy=i,i.src=t,i.listener=n,t.addEventListener)T||(r=o),void 0===r&&(r=!1),t.addEventListener(e.toString(),i,r);else if(t.attachEvent)t.attachEvent(gt(e.toString()),i);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(i)}return n}function At(){function t(n){return e.call(t.src,t.listener,n)}const e=mt;return t}function dt(t,e,n,i,r){if(Array.isArray(e)){for(var s=0;s<e.length;s++)dt(t,e[s],n,i,r);return null}return n=wt(n),t&&t[X]?t.P(e,n,d(i)?!!i.capture:!!i,r):ht(t,e,n,!0,i,r)}function ft(t,e,n,i,r){if(Array.isArray(e))for(var s=0;s<e.length;s++)ft(t,e[s],n,i,r);else i=d(i)?!!i.capture:!!i,n=wt(n),t&&t[X]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=at(s,n,i,r),-1<n&&(J(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete t.g[e],t.h--)))):t&&(t=vt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=at(e,n,i,r)),(n=-1<t?e[t]:null)&&pt(n))}function pt(t){if("number"!==typeof t&&t&&!t.fa){var e=t.src;if(e&&e[X])ot(e.i,t);else{var n=t.type,i=t.proxy;e.removeEventListener?e.removeEventListener(n,i,t.capture):e.detachEvent?e.detachEvent(gt(n),i):e.addListener&&e.removeListener&&e.removeListener(i),(n=vt(e))?(ot(n,t),0==n.h&&(n.src=null,e[lt]=null)):J(t)}}}function gt(t){return t in ct?ct[t]:ct[t]="on"+t}function mt(t,e){if(t.fa)t=!0;else{e=new q(e,this);var n=t.listener,i=t.la||t.src;t.ia&&pt(t),t=n.call(i,e)}return t}function vt(t){return t=t[lt],t instanceof st?t:null}var yt="__closure_events_fn_"+(1e9*Math.random()>>>0);function wt(t){return"function"===typeof t?t:(t[yt]||(t[yt]=function(e){return t.handleEvent(e)}),t[yt])}function _t(){b.call(this),this.i=new st(this),this.S=this,this.J=null}function bt(t,e){var n,i=t.J;if(i)for(n=[];i;i=i.J)n.push(i);if(t=t.S,i=e.type||e,"string"===typeof e)e=new B(e,t);else if(e instanceof B)e.target=e.target||t;else{var r=e;e=new B(i,t),rt(e,r)}if(r=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];r=xt(o,i,!0,e)&&r}if(o=e.g=t,r=xt(o,i,!0,e)&&r,r=xt(o,i,!1,e)&&r,n)for(s=0;s<n.length;s++)o=e.g=n[s],r=xt(o,i,!1,e)&&r}function xt(t,e,n,i){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var r=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var a=o.listener,l=o.la||o.src;o.ia&&ot(t.i,o),r=!1!==a.call(l,i)&&r}}return r&&!i.defaultPrevented}_(_t,b),_t.prototype[X]=!0,_t.prototype.removeEventListener=function(t,e,n,i){ft(this,t,e,n,i)},_t.prototype.N=function(){if(_t.$.N.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],i=0;i<n.length;i++)J(n[i]);delete e.g[t],e.h--}}this.J=null},_t.prototype.O=function(t,e,n,i){return this.i.add(String(t),e,!1,n,i)},_t.prototype.P=function(t,e,n,i){return this.i.add(String(t),e,!0,n,i)};var Et=h.JSON.stringify;class Ct{constructor(t,e){this.i=t,this.j=e,this.h=0,this.g=null}get(){let t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t}}function St(){var t=Pt;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class Bt{constructor(){this.h=this.g=null}add(t,e){const n=Tt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n}}var Tt=new Ct((()=>new It),(t=>t.reset()));class It{constructor(){this.next=this.g=this.h=null}set(t,e){this.h=t,this.g=e,this.next=null}reset(){this.next=this.g=this.h=null}}function Ft(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function Lt(t){h.setTimeout((()=>{throw t}),0)}let Rt,Mt=!1,Pt=new Bt,Nt=()=>{const t=h.Promise.resolve(void 0);Rt=()=>{t.then(Ot)}};var Ot=()=>{for(var t;t=St();){try{t.h.call(t.g)}catch(n){Lt(n)}var e=Tt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Mt=!1};function kt(t,e){_t.call(this),this.h=t||1,this.g=e||h,this.j=y(this.qb,this),this.l=Date.now()}function Dt(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}function Ut(t,e,n){if("function"===typeof t)n&&(t=y(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=y(t.handleEvent,t)}return 2147483647<Number(e)?-1:h.setTimeout(t,e||0)}function Qt(t){t.g=Ut((()=>{t.g=null,t.i&&(t.i=!1,Qt(t))}),t.j);const e=t.h;t.h=null,t.m.apply(null,e)}_(kt,_t),i=kt.prototype,i.ga=!1,i.T=null,i.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),bt(this,"tick"),this.ga&&(Dt(this),this.start()))}},i.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},i.N=function(){kt.$.N.call(this),Dt(this),delete this.g};class Gt extends b{constructor(t,e){super(),this.m=t,this.j=e,this.h=null,this.i=!1,this.g=null}l(t){this.h=arguments,this.g?this.i=!0:Qt(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ht(t){b.call(this),this.h=t,this.g={}}_(Ht,b);var Vt=[];function jt(t,e,n,i){Array.isArray(n)||(n&&(Vt[0]=n.toString()),n=Vt);for(var r=0;r<n.length;r++){var s=ut(e,n[r],i||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function Wt(t){tt(t.g,(function(t,e){this.g.hasOwnProperty(e)&&pt(t)}),t),t.g={}}function zt(){this.g=!0}function Kt(t,e,n,i,r,s){t.info((function(){if(t.g)if(s)for(var o="",a=s.split("&"),l=0;l<a.length;l++){var c=a[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");o=2<=h.length&&"type"==h[1]?o+(u+"=")+c+"&":o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+i+") [attempt "+r+"]: "+e+"\n"+n+"\n"+o}))}function qt(t,e,n,i,r,s,o){t.info((function(){return"XMLHTTP RESP ("+i+") [ attempt "+r+"]: "+e+"\n"+n+"\n"+s+" "+o}))}function $t(t,e,n,i){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+Yt(t,n)+(i?" "+i:"")}))}function Xt(t,e){t.info((function(){return"TIMEOUT: "+e}))}function Yt(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var i=n[t];if(!(2>i.length)){var r=i[1];if(Array.isArray(r)&&!(1>r.length)){var s=r[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var o=1;o<r.length;o++)r[o]=""}}}return Et(n)}catch(a){return e}}Ht.prototype.N=function(){Ht.$.N.call(this),Wt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},zt.prototype.Ea=function(){this.g=!1},zt.prototype.info=function(){};var Zt={},Jt=null;function te(){return Jt=Jt||new _t}function ee(t){B.call(this,Zt.Ta,t)}function ne(t){const e=te();bt(e,new ee(e))}function ie(t,e){B.call(this,Zt.STAT_EVENT,t),this.stat=e}function re(t){const e=te();bt(e,new ie(e,t))}function se(t,e){B.call(this,Zt.Ua,t),this.size=e}function oe(t,e){if("function"!==typeof t)throw Error("Fn must not be null and must be a function");return h.setTimeout((function(){t()}),e)}Zt.Ta="serverreachability",_(ee,B),Zt.STAT_EVENT="statevent",_(ie,B),Zt.Ua="timingevent",_(se,B);var ae={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},le={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function ce(){}function ue(t){return t.h||(t.h=t.i())}function he(){}ce.prototype.h=null;var Ae,de={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function fe(){B.call(this,"d")}function pe(){B.call(this,"c")}function ge(){}function me(t,e,n,i){this.l=t,this.j=e,this.m=n,this.W=i||1,this.U=new Ht(this),this.P=ye,t=U?125:void 0,this.V=new kt(t),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new ve}function ve(){this.i=null,this.g="",this.h=!1}_(fe,B),_(pe,B),_(ge,ce),ge.prototype.g=function(){return new XMLHttpRequest},ge.prototype.i=function(){return{}},Ae=new ge;var ye=45e3,we={},_e={};function be(t,e,n){t.L=1,t.A=je(Ue(e)),t.u=n,t.S=!0,xe(t,null)}function xe(t,e){t.G=Date.now(),Be(t),t.B=Ue(t.A);var n=t.B,i=t.W;Array.isArray(i)||(i=[String(i)]),rn(n.i,"t",i),t.o=0,n=t.l.J,t.h=new ve,t.g=ci(t.l,n?e:null,!t.u),0<t.O&&(t.M=new Gt(y(t.Pa,t,t.g),t.O)),jt(t.U,t.g,"readystatechange",t.nb),e=t.I?nt(t.I):{},t.u?(t.v||(t.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.B,t.v,t.u,e)):(t.v="GET",t.g.ha(t.B,t.v,null,e)),ne(),Kt(t.j,t.v,t.B,t.m,t.W,t.u)}function Ee(t){return!!t.g&&("GET"==t.v&&2!=t.L&&t.l.Ha)}function Ce(t,e,n){let i,r=!0;for(;!t.J&&t.o<n.length;){if(i=Se(t,n),i==_e){4==e&&(t.s=4,re(14),r=!1),$t(t.j,t.m,null,"[Incomplete Response]");break}if(i==we){t.s=4,re(15),$t(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}$t(t.j,t.m,i,null),Re(t,i)}Ee(t)&&0!=t.o&&(t.h.g=t.h.g.slice(t.o),t.o=0),4!=e||0!=n.length||t.h.h||(t.s=1,re(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),ei(e),e.M=!0,re(11))):($t(t.j,t.m,n,"[Invalid Chunked Response]"),Le(t),Fe(t))}function Se(t,e){var n=t.o,i=e.indexOf("\n",n);return-1==i?_e:(n=Number(e.substring(n,i)),isNaN(n)?we:(i+=1,i+n>e.length?_e:(e=e.slice(i,i+n),t.o=i+n,e)))}function Be(t){t.Y=Date.now()+t.P,Te(t,t.P)}function Te(t,e){if(null!=t.C)throw Error("WatchDog timer not null");t.C=oe(y(t.lb,t),e)}function Ie(t){t.C&&(h.clearTimeout(t.C),t.C=null)}function Fe(t){0==t.l.H||t.J||ri(t.l,t)}function Le(t){Ie(t);var e=t.M;e&&"function"==typeof e.sa&&e.sa(),t.M=null,Dt(t.V),Wt(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function Re(t,e){try{var n=t.l;if(0!=n.H&&(n.g==t||An(n.i,t)))if(!t.K&&An(n.i,t)&&3==n.H){try{var i=n.Ja.g.parse(e)}catch(c){i=null}if(Array.isArray(i)&&3==i.length){var r=i;if(0==r[0]){t:if(!n.u){if(n.g){if(!(n.g.G+3e3<t.G))break t;ii(n),zn(n)}ti(n),re(18)}}else n.Fa=r[1],0<n.Fa-n.V&&37500>r[2]&&n.G&&0==n.A&&!n.v&&(n.v=oe(y(n.ib,n),6e3));if(1>=hn(n.i)&&n.oa){try{n.oa()}catch(c){}n.oa=void 0}}else oi(n,11)}else if((t.K||n.g==t)&&ii(n),!I(e))for(r=n.Ja.g.parse(e),e=0;e<r.length;e++){let c=r[e];if(n.V=c[0],c=c[1],2==n.H)if("c"==c[0]){n.K=c[1],n.pa=c[2];const e=c[3];null!=e&&(n.ra=e,n.l.info("VER="+n.ra));const r=c[4];null!=r&&(n.Ga=r,n.l.info("SVER="+n.Ga));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(i=1.5*u,n.L=i,n.l.info("backChannelRequestTimeoutMs_="+i)),i=n;const h=t.g;if(h){const t=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(t){var s=i.i;s.g||-1==t.indexOf("spdy")&&-1==t.indexOf("quic")&&-1==t.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(dn(s,s.h),s.h=null))}if(i.F){const t=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;t&&(i.Da=t,Ve(i.I,i.F,t))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),i=n;var o=t;if(i.wa=li(i,i.J?i.pa:null,i.Y),o.K){fn(i.i,o);var a=o,l=i.L;l&&a.setTimeout(l),a.C&&(Ie(a),Be(a)),i.g=o}else Jn(i);0<n.j.length&&qn(n)}else"stop"!=c[0]&&"close"!=c[0]||oi(n,7);else 3==n.H&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?oi(n,7):Wn(n):"noop"!=c[0]&&n.h&&n.h.Aa(c),n.A=0)}ne(4)}catch(c){}}function Me(t){if(t.Z&&"function"==typeof t.Z)return t.Z();if("undefined"!==typeof Map&&t instanceof Map||"undefined"!==typeof Set&&t instanceof Set)return Array.from(t.values());if("string"===typeof t)return t.split("");if(A(t)){for(var e=[],n=t.length,i=0;i<n;i++)e.push(t[i]);return e}for(i in e=[],n=0,t)e[n++]=t[i];return e}function Pe(t){if(t.ta&&"function"==typeof t.ta)return t.ta();if(!t.Z||"function"!=typeof t.Z){if("undefined"!==typeof Map&&t instanceof Map)return Array.from(t.keys());if(!("undefined"!==typeof Set&&t instanceof Set)){if(A(t)||"string"===typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const i in t)e[n++]=i;return e}}}function Ne(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(A(t)||"string"===typeof t)Array.prototype.forEach.call(t,e,void 0);else for(var n=Pe(t),i=Me(t),r=i.length,s=0;s<r;s++)e.call(void 0,i[s],n&&n[s],t)}i=me.prototype,i.setTimeout=function(t){this.P=t},i.nb=function(t){t=t.target;const e=this.M;e&&3==Dn(t)?e.l():this.Pa(t)},i.Pa=function(t){try{if(t==this.g)t:{const u=Dn(this.g);var e=this.g.Ia();const A=this.g.da();if(!(3>u)&&(3!=u||U||this.g&&(this.h.h||this.g.ja()||Un(this.g)))){this.J||4!=u||7==e||ne(8==e||0>=A?3:2),Ie(this);var n=this.g.da();this.ca=n;e:if(Ee(this)){var i=Un(this.g);t="";var r=i.length,s=4==Dn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Le(this),Fe(this);var o="";break e}this.h.i=new h.TextDecoder}for(e=0;e<r;e++)this.h.h=!0,t+=this.h.i.decode(i[e],{stream:s&&e==r-1});i.length=0,this.h.g+=t,this.o=0,o=this.h.g}else o=this.g.ja();if(this.i=200==n,qt(this.j,this.v,this.B,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){e:{if(this.g){var a,l=this.g;if((a=l.g?l.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!I(a)){var c=a;break e}}c=null}if(!(n=c)){this.i=!1,this.s=3,re(12),Le(this),Fe(this);break t}$t(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Re(this,n)}this.S?(Ce(this,u,o),U&&this.i&&3==u&&(jt(this.U,this.V,"tick",this.mb),this.V.start())):($t(this.j,this.m,o,null),Re(this,o)),4==u&&Le(this),this.i&&!this.J&&(4==u?ri(this.l,this):(this.i=!1,Be(this)))}else Qn(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,re(12)):(this.s=0,re(13)),Le(this),Fe(this)}}}catch(u){}},i.mb=function(){if(this.g){var t=Dn(this.g),e=this.g.ja();this.o<e.length&&(Ie(this),Ce(this,t,e),this.i&&4!=t&&Be(this))}},i.cancel=function(){this.J=!0,Le(this)},i.lb=function(){this.C=null;const t=Date.now();0<=t-this.Y?(Xt(this.j,this.B),2!=this.L&&(ne(),re(17)),Le(this),this.s=2,Fe(this)):Te(this,this.Y-t)};var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ke(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var i=t[n].indexOf("="),r=null;if(0<=i){var s=t[n].substring(0,i);r=t[n].substring(i+1)}else s=t[n];e(s,r?decodeURIComponent(r.replace(/\+/g," ")):"")}}}function De(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof De){this.h=t.h,Qe(this,t.j),this.s=t.s,this.g=t.g,Ge(this,t.m),this.l=t.l;var e=t.i,n=new Je;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),He(this,n),this.o=t.o}else t&&(e=String(t).match(Oe))?(this.h=!1,Qe(this,e[1]||"",!0),this.s=We(e[2]||""),this.g=We(e[3]||"",!0),Ge(this,e[4]),this.l=We(e[5]||"",!0),He(this,e[6]||"",!0),this.o=We(e[7]||"")):(this.h=!1,this.i=new Je(null,this.h))}function Ue(t){return new De(t)}function Qe(t,e,n){t.j=n?We(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Ge(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function He(t,e,n){e instanceof Je?(t.i=e,on(t.i,t.h)):(n||(e=ze(e,Ye)),t.i=new Je(e,t.h))}function Ve(t,e,n){t.i.set(e,n)}function je(t){return Ve(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function We(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ze(t,e,n){return"string"===typeof t?(t=encodeURI(t).replace(e,Ke),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ke(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(15&t).toString(16)}De.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ze(e,qe,!0),":");var n=this.g;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ze(e,qe,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,null!=n&&t.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&t.push("/"),t.push(ze(n,"/"==n.charAt(0)?Xe:$e,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ze(n,Ze)),t.join("")};var qe=/[#\/\?@]/g,$e=/[#\?:]/g,Xe=/[#\?]/g,Ye=/[#\?@]/g,Ze=/#/g;function Je(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tn(t){t.g||(t.g=new Map,t.h=0,t.i&&ke(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=sn(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function nn(t,e){return tn(t),e=sn(t,e),t.g.has(e)}function rn(t,e,n){en(t,e),0<n.length&&(t.i=null,t.g.set(sn(t,e),C(n)),t.h+=n.length)}function sn(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function on(t,e){e&&!t.j&&(tn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.j=e}i=Je.prototype,i.add=function(t,e){tn(this),this.i=null,t=sn(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},i.forEach=function(t,e){tn(this),this.g.forEach((function(n,i){n.forEach((function(n){t.call(e,n,i,this)}),this)}),this)},i.ta=function(){tn(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let i=0;i<e.length;i++){const r=t[i];for(let t=0;t<r.length;t++)n.push(e[i])}return n},i.Z=function(t){tn(this);let e=[];if("string"===typeof t)nn(this,t)&&(e=e.concat(this.g.get(sn(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e},i.set=function(t,e){return tn(this),this.i=null,t=sn(this,t),nn(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},i.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e},i.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var i=e[n];const s=encodeURIComponent(String(i)),o=this.Z(i);for(i=0;i<o.length;i++){var r=s;""!==o[i]&&(r+="="+encodeURIComponent(String(o[i]))),t.push(r)}}return this.i=t.join("&")};var an=class{constructor(t,e){this.g=t,this.map=e}};function ln(t){this.l=t||cn,h.PerformanceNavigationTiming?(t=h.performance.getEntriesByType("navigation"),t=0<t.length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol)):t=!!(h.g&&h.g.Ka&&h.g.Ka()&&h.g.Ka().dc),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var cn=10;function un(t){return!!t.h||!!t.g&&t.g.size>=t.j}function hn(t){return t.h?1:t.g?t.g.size:0}function An(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function dn(t,e){t.g?t.g.add(e):t.h=e}function fn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pn(t){if(null!=t.h)return t.i.concat(t.h.F);if(null!=t.g&&0!==t.g.size){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return C(t.i)}ln.prototype.cancel=function(){if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const t of this.g.values())t.cancel();this.g.clear()}};var gn=class{stringify(t){return h.JSON.stringify(t,void 0)}parse(t){return h.JSON.parse(t,void 0)}};function mn(){this.g=new gn}function vn(t,e,n){const i=n||"";try{Ne(t,(function(t,n){let r=t;d(t)&&(r=Et(t)),e.push(i+n+"="+encodeURIComponent(r))}))}catch(r){throw e.push(i+"type="+encodeURIComponent("_badmap")),r}}function yn(t,e){const n=new zt;if(h.Image){const i=new Image;i.onload=w(wn,n,i,"TestLoadImage: loaded",!0,e),i.onerror=w(wn,n,i,"TestLoadImage: error",!1,e),i.onabort=w(wn,n,i,"TestLoadImage: abort",!1,e),i.ontimeout=w(wn,n,i,"TestLoadImage: timeout",!1,e),h.setTimeout((function(){i.ontimeout&&i.ontimeout()}),1e4),i.src=t}else e(!1)}function wn(t,e,n,i,r){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,r(i)}catch(s){}}function _n(t){this.l=t.ec||null,this.j=t.ob||!1}function bn(t,e){_t.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=xn,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_(_n,ce),_n.prototype.g=function(){return new bn(this.l,this.j)},_n.prototype.i=function(t){return function(){return t}}({}),_(bn,_t);var xn=0;function En(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}function Cn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,Sn(t)}function Sn(t){t.onreadystatechange&&t.onreadystatechange.call(t)}i=bn.prototype,i.open=function(t,e){if(this.readyState!=xn)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,Sn(this)},i.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||h).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},i.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((()=>{})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Cn(this)),this.readyState=xn},i.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,Sn(this)),this.g&&(this.readyState=3,Sn(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if("undefined"!==typeof h.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;En(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))},i.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Cn(this):Sn(this),3==this.readyState&&En(this)}},i.Za=function(t){this.g&&(this.response=this.responseText=t,Cn(this))},i.Ya=function(t){this.g&&(this.response=t,Cn(this))},i.ka=function(){this.g&&Cn(this)},i.setRequestHeader=function(t,e){this.v.append(t,e)},i.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},i.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(bn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Bn=h.JSON.parse;function Tn(t){_t.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=In,this.L=this.M=!1}_(Tn,_t);var In="",Fn=/^https?$/i,Ln=["POST","PUT"];function Rn(t){return k&&"number"===typeof t.timeout&&void 0!==t.ontimeout}function Mn(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Pn(t),On(t)}function Pn(t){t.F||(t.F=!0,bt(t,"complete"),bt(t,"error"))}function Nn(t){if(t.h&&"undefined"!=typeof u&&(!t.C[1]||4!=Dn(t)||2!=t.da()))if(t.v&&4==Dn(t))Ut(t.La,0,t);else if(bt(t,"readystatechange"),4==Dn(t)){t.h=!1;try{const a=t.da();t:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break t;default:e=!1}var n;if(!(n=e)){var i;if(i=0===a){var r=String(t.I).match(Oe)[1]||null;!r&&h.self&&h.self.location&&(r=h.self.location.protocol.slice(0,-1)),i=!Fn.test(r?r.toLowerCase():"")}n=i}if(n)bt(t,"complete"),bt(t,"success");else{t.m=6;try{var s=2<Dn(t)?t.g.statusText:""}catch(o){s=""}t.j=s+" ["+t.da()+"]",Pn(t)}}finally{On(t)}}}function On(t,e){if(t.g){kn(t);const i=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||bt(t,"ready");try{i.onreadystatechange=r}catch(n){}}}function kn(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(h.clearTimeout(t.A),t.A=null)}function Dn(t){return t.g?t.g.readyState:0}function Un(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case In:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(Xi){return null}}function Qn(t){const e={};t=(t.g&&2<=Dn(t)&&t.g.getAllResponseHeaders()||"").split("\r\n");for(let i=0;i<t.length;i++){if(I(t[i]))continue;var n=Ft(t[i]);const r=n[0];if(n=n[1],"string"!==typeof n)continue;n=n.trim();const s=e[r]||[];e[r]=s,s.push(n)}et(e,(function(t){return t.join(", ")}))}function Gn(t){let e="";return tt(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}function Hn(t,e,n){t:{for(i in n){var i=!1;break t}i=!0}i||(n=Gn(n),"string"===typeof t?null!=n&&encodeURIComponent(String(n)):Ve(t,e,n))}function Vn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function jn(t){this.Ga=0,this.j=[],this.l=new zt,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vn("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vn("baseRetryDelayMs",5e3,t),this.hb=Vn("retryDelaySeedMs",1e4,t),this.eb=Vn("forwardChannelMaxRetries",2,t),this.xa=Vn("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.useFetchStreams||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new ln(t&&t.concurrentRequestLimit),this.Ja=new mn,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Wn(t){if(Kn(t),3==t.H){var e=t.W++,n=Ue(t.I);if(Ve(n,"SID",t.K),Ve(n,"RID",e),Ve(n,"TYPE","terminate"),Yn(t,n),e=new me(t,t.l,e),e.L=2,e.A=je(Ue(n)),n=!1,h.navigator&&h.navigator.sendBeacon)try{n=h.navigator.sendBeacon(e.A.toString(),"")}catch(i){}!n&&h.Image&&((new Image).src=e.A,n=!0),n||(e.g=ci(e.l,null),e.g.ha(e.A)),e.G=Date.now(),Be(e)}ai(t)}function zn(t){t.g&&(ei(t),t.g.cancel(),t.g=null)}function Kn(t){zn(t),t.u&&(h.clearTimeout(t.u),t.u=null),ii(t),t.i.cancel(),t.m&&("number"===typeof t.m&&h.clearTimeout(t.m),t.m=null)}function qn(t){if(!un(t.i)&&!t.m){t.m=!0;var e=t.Na;Rt||Nt(),Mt||(Rt(),Mt=!0),Pt.add(e,t),t.C=0}}function $n(t,e){return!(hn(t.i)>=t.i.j-(t.m?1:0))&&(t.m?(t.j=e.F.concat(t.j),!0):!(1==t.H||2==t.H||t.C>=(t.cb?0:t.eb))&&(t.m=oe(y(t.Na,t,e),si(t,t.C)),t.C++,!0))}function Xn(t,e){var n;n=e?e.m:t.W++;const i=Ue(t.I);Ve(i,"SID",t.K),Ve(i,"RID",n),Ve(i,"AID",t.V),Yn(t,i),t.o&&t.s&&Hn(i,t.o,t.s),n=new me(t,t.l,n,t.C+1),null===t.o&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Zn(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),dn(t.i,n),be(n,i,e)}function Yn(t,e){t.na&&tt(t.na,(function(t,n){Ve(e,n,t)})),t.h&&Ne({},(function(t,n){Ve(e,n,t)}))}function Zn(t,e,n){n=Math.min(t.j.length,n);var i=t.h?y(t.h.Va,t.h,t):null;t:{var r=t.j;let e=-1;for(;;){const t=["count="+n];-1==e?0<n?(e=r[0].g,t.push("ofs="+e)):e=0:t.push("ofs="+e);let s=!0;for(let o=0;o<n;o++){let n=r[o].g;const a=r[o].map;if(n-=e,0>n)e=Math.max(0,r[o].g-100),s=!1;else try{vn(a,t,"req"+n+"_")}catch(vs){i&&i(a)}}if(s){i=t.join("&");break t}}}return t=t.j.splice(0,n),e.F=t,i}function Jn(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Rt||Nt(),Mt||(Rt(),Mt=!0),Pt.add(e,t),t.A=0}}function ti(t){return!(t.g||t.u||3<=t.A)&&(t.ba++,t.u=oe(y(t.Ma,t),si(t,t.A)),t.A++,!0)}function ei(t){null!=t.B&&(h.clearTimeout(t.B),t.B=null)}function ni(t){t.g=new me(t,t.l,"rpc",t.ba),null===t.o&&(t.g.I=t.s),t.g.O=0;var e=Ue(t.wa);Ve(e,"RID","rpc"),Ve(e,"SID",t.K),Ve(e,"AID",t.V),Ve(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ve(e,"TO",t.qa),Ve(e,"TYPE","xmlhttp"),Yn(t,e),t.o&&t.s&&Hn(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.A=je(Ue(e)),n.u=null,n.S=!0,xe(n,t)}function ii(t){null!=t.v&&(h.clearTimeout(t.v),t.v=null)}function ri(t,e){var n=null;if(t.g==e){ii(t),ei(t),t.g=null;var i=2}else{if(!An(t.i,e))return;n=e.F,fn(t.i,e),i=1}if(0!=t.H)if(e.i)if(1==i){n=e.u?e.u.length:0,e=Date.now()-e.G;var r=t.C;i=te(),bt(i,new se(i,n)),qn(t)}else Jn(t);else if(r=e.s,3==r||0==r&&0<e.ca||!(1==i&&$n(t,e)||2==i&&ti(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),r){case 1:oi(t,5);break;case 4:oi(t,10);break;case 3:oi(t,6);break;default:oi(t,2)}}function si(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function oi(t,e){if(t.l.info("Error code "+e),2==e){var n=null;t.h&&(n=null);var i=y(t.pb,t);n||(n=new De("//www.google.com/images/cleardot.gif"),h.location&&"http"==h.location.protocol||Qe(n,"https"),je(n)),yn(n.toString(),i)}else re(2);t.H=0,t.h&&t.h.za(e),ai(t),Kn(t)}function ai(t){if(t.H=0,t.ma=[],t.h){const e=pn(t.i);0==e.length&&0==t.j.length||(S(t.ma,e),S(t.ma,t.j),t.i.i.length=0,C(t.j),t.j.length=0),t.h.ya()}}function li(t,e,n){var i=n instanceof De?Ue(n):new De(n);if(""!=i.g)e&&(i.g=e+"."+i.g),Ge(i,i.m);else{var r=h.location;i=r.protocol,e=e?e+"."+r.hostname:r.hostname,r=+r.port;var s=new De(null);i&&Qe(s,i),e&&(s.g=e),r&&Ge(s,r),n&&(s.l=n),i=s}return n=t.F,e=t.Da,n&&e&&Ve(i,n,e),Ve(i,"VER",t.ra),Yn(t,i),i}function ci(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=t.Ha&&!t.va?new Tn(new _n({ob:n})):new Tn(t.va),e.Oa(t.J),e}function ui(){}function hi(){if(k&&!(10<=Number(K)))throw Error("Environmental error: no available transport.")}function Ai(t,e){_t.call(this),this.g=new jn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!I(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!I(e)&&(this.g.F=e,t=this.h,null!==t&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new pi(this)}function di(t){fe.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){t:{for(const n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function fi(){pe.call(this),this.status=1}function pi(t){this.g=t}function gi(){this.blockSize=-1}function mi(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function vi(t,e,n){n||(n=0);var i=Array(16);if("string"===typeof e)for(var r=0;16>r;++r)i[r]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(r=0;16>r;++r)i[r]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],r=t.g[2];var s=t.g[3],o=e+(s^n&(r^s))+i[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[2]+606105819&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[3]+3250441966&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[6]+2821735955&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[7]+4249261313&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[10]+4294925233&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[11]+2304563134&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(s^n&(r^s))+i[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(r^e&(n^r))+i[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=r+(n^s&(e^n))+i[14]+2792965006&4294967295,r=s+(o<<17&4294967295|o>>>15),o=n+(e^r&(s^e))+i[15]+1236535329&4294967295,n=r+(o<<22&4294967295|o>>>10),o=e+(r^s&(n^r))+i[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[11]+643717713&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[0]+3921069994&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[15]+3634488961&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[4]+3889429448&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[3]+4107603335&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[8]+1163531501&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(r^s&(n^r))+i[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^r&(e^n))+i[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=r+(e^n&(s^e))+i[7]+1735328473&4294967295,r=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(r^s))+i[12]+2368359562&4294967295,n=r+(o<<20&4294967295|o>>>12),o=e+(n^r^s)+i[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[11]+1839030562&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[14]+4259657740&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[7]+4139469664&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[10]+3200236656&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[3]+3572445317&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[6]+76029189&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(n^r^s)+i[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^r)+i[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=r+(s^e^n)+i[15]+530742520&4294967295,r=s+(o<<16&4294967295|o>>>16),o=n+(r^s^e)+i[2]+3299628645&4294967295,n=r+(o<<23&4294967295|o>>>9),o=e+(r^(n|~s))+i[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[14]+2878612391&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[5]+4237533241&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[10]+4293915773&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[1]+2240044497&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[6]+2734768916&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[13]+1309151649&4294967295,n=r+(o<<21&4294967295|o>>>11),o=e+(r^(n|~s))+i[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~r))+i[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=r+(e^(s|~n))+i[2]+718787259&4294967295,r=s+(o<<15&4294967295|o>>>17),o=n+(s^(r|~e))+i[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(r+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+r&4294967295,t.g[3]=t.g[3]+s&4294967295}function yi(t,e){this.h=e;for(var n=[],i=!0,r=t.length-1;0<=r;r--){var s=0|t[r];i&&s==e||(n[r]=s,i=!1)}this.g=n}i=Tn.prototype,i.Oa=function(t){this.M=t},i.ha=function(t,e,n,i){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Ae.g(),this.C=this.u?ue(this.u):ue(Ae),this.g.onreadystatechange=y(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){return void Mn(this,s)}if(t=n||"",n=new Map(this.headers),i)if(Object.getPrototypeOf(i)===Object.prototype)for(var r in i)n.set(r,i[r]);else{if("function"!==typeof i.keys||"function"!==typeof i.get)throw Error("Unknown input type for opt_headers: "+String(i));for(const t of i.keys())n.set(t,i.get(t))}i=Array.from(n.keys()).find((t=>"content-type"==t.toLowerCase())),r=h.FormData&&t instanceof h.FormData,!(0<=E(Ln,e))||i||r||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,a]of n)this.g.setRequestHeader(o,a);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{kn(this),0<this.B&&((this.L=Rn(this.g))?(this.g.timeout=this.B,this.g.ontimeout=y(this.ua,this)):this.A=Ut(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){Mn(this,s)}},i.ua=function(){"undefined"!=typeof u&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,bt(this,"timeout"),this.abort(8))},i.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,bt(this,"complete"),bt(this,"abort"),On(this))},i.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),On(this,!0)),Tn.$.N.call(this)},i.La=function(){this.s||(this.G||this.v||this.l?Nn(this):this.kb())},i.kb=function(){Nn(this)},i.isActive=function(){return!!this.g},i.da=function(){try{return 2<Dn(this)?this.g.status:-1}catch(t){return-1}},i.ja=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},i.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Bn(e)}},i.Ia=function(){return this.m},i.Sa=function(){return"string"===typeof this.j?this.j:String(this.j)},i=jn.prototype,i.ra=8,i.H=1,i.Na=function(t){if(this.m)if(this.m=null,1==this.H){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const r=new me(this,this.l,t);let s=this.s;if(this.U&&(s?(s=nt(s),rt(s,this.U)):s=this.U),null!==this.o||this.O||(r.I=s,s=null),this.P)t:{for(var e=0,n=0;n<this.j.length;n++){var i=this.j[n];if(i="__data__"in i.map&&(i=i.map.__data__,"string"===typeof i)?i.length:void 0,void 0===i)break;if(e+=i,4096<e){e=n;break t}if(4096===e||n===this.j.length-1){e=n+1;break t}}e=1e3}else e=1e3;e=Zn(this,r,e),n=Ue(this.I),Ve(n,"RID",t),Ve(n,"CVER",22),this.F&&Ve(n,"X-HTTP-Session-Id",this.F),Yn(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(Gn(s)))+"&"+e:this.o&&Hn(n,this.o,s)),dn(this.i,r),this.bb&&Ve(n,"TYPE","init"),this.P?(Ve(n,"$req",e),Ve(n,"SID","null"),r.aa=!0,be(r,n,null)):be(r,n,e),this.H=2}}else 3==this.H&&(t?Xn(this,t):0==this.j.length||un(this.i)||Xn(this))},i.Ma=function(){if(this.u=null,ni(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=oe(y(this.jb,this),t)}},i.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,re(10),zn(this),ni(this))},i.ib=function(){null!=this.v&&(this.v=null,zn(this),ti(this),re(19))},i.pb=function(t){t?(this.l.info("Successfully pinged google.com"),re(2)):(this.l.info("Failed to ping google.com"),re(1))},i.isActive=function(){return!!this.h&&this.h.isActive(this)},i=ui.prototype,i.Ba=function(){},i.Aa=function(){},i.za=function(){},i.ya=function(){},i.isActive=function(){return!0},i.Va=function(){},hi.prototype.g=function(t,e){return new Ai(t,e)},_(Ai,_t),Ai.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;re(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=li(t,null,t.Y),qn(t)},Ai.prototype.close=function(){Wn(this.g)},Ai.prototype.u=function(t){var e=this.g;if("string"===typeof t){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Et(t),t=n);e.j.push(new an(e.fb++,t)),3==e.H&&qn(e)},Ai.prototype.N=function(){this.g.h=null,delete this.j,Wn(this.g),delete this.g,Ai.$.N.call(this)},_(di,fe),_(fi,pe),_(pi,ui),pi.prototype.Ba=function(){bt(this.g,"a")},pi.prototype.Aa=function(t){bt(this.g,new di(t))},pi.prototype.za=function(t){bt(this.g,new fi)},pi.prototype.ya=function(){bt(this.g,"b")},_(mi,gi),mi.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},mi.prototype.j=function(t,e){void 0===e&&(e=t.length);for(var n=e-this.blockSize,i=this.m,r=this.h,s=0;s<e;){if(0==r)for(;s<=n;)vi(this,t,s),s+=this.blockSize;if("string"===typeof t){for(;s<e;)if(i[r++]=t.charCodeAt(s++),r==this.blockSize){vi(this,i),r=0;break}}else for(;s<e;)if(i[r++]=t[s++],r==this.blockSize){vi(this,i),r=0;break}}this.h=r,this.i+=e},mi.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=255&n,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var i=0;32>i;i+=8)t[n++]=this.g[e]>>>i&255;return t};var wi={};function _i(t){return-128<=t&&128>t?M(t,(function(t){return new yi([0|t],0>t?-1:0)})):new yi([0|t],0>t?-1:0)}function bi(t){if(isNaN(t)||!isFinite(t))return Ci;if(0>t)return Fi(bi(-t));for(var e=[],n=1,i=0;t>=n;i++)e[i]=t/n|0,n*=Ei;return new yi(e,0)}function xi(t,e){if(0==t.length)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if("-"==t.charAt(0))return Fi(xi(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=bi(Math.pow(e,8)),i=Ci,r=0;r<t.length;r+=8){var s=Math.min(8,t.length-r),o=parseInt(t.substring(r,r+s),e);8>s?(s=bi(Math.pow(e,s)),i=i.R(s).add(bi(o))):(i=i.R(n),i=i.add(bi(o)))}return i}var Ei=4294967296,Ci=_i(0),Si=_i(1),Bi=_i(16777216);function Ti(t){if(0!=t.h)return!1;for(var e=0;e<t.g.length;e++)if(0!=t.g[e])return!1;return!0}function Ii(t){return-1==t.h}function Fi(t){for(var e=t.g.length,n=[],i=0;i<e;i++)n[i]=~t.g[i];return new yi(n,~t.h).add(Si)}function Li(t,e){return t.add(Fi(e))}function Ri(t,e){for(;(65535&t[e])!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Mi(t,e){this.g=t,this.h=e}function Pi(t,e){if(Ti(e))throw Error("division by zero");if(Ti(t))return new Mi(Ci,Ci);if(Ii(t))return e=Pi(Fi(t),e),new Mi(Fi(e.g),Fi(e.h));if(Ii(e))return e=Pi(t,Fi(e)),new Mi(Fi(e.g),e.h);if(30<t.g.length){if(Ii(t)||Ii(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Si,i=e;0>=i.X(t);)n=Ni(n),i=Ni(i);var r=Oi(n,1),s=Oi(i,1);for(i=Oi(i,2),n=Oi(n,2);!Ti(i);){var o=s.add(i);0>=o.X(t)&&(r=r.add(n),s=o),i=Oi(i,1),n=Oi(n,1)}return e=Li(t,r.R(e)),new Mi(r,e)}for(r=Ci;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),i=Math.ceil(Math.log(n)/Math.LN2),i=48>=i?1:Math.pow(2,i-48),s=bi(n),o=s.R(e);Ii(o)||0<o.X(t);)n-=i,s=bi(n),o=s.R(e);Ti(s)&&(s=Si),r=r.add(s),t=Li(t,o)}return new Mi(r,t)}function Ni(t){for(var e=t.g.length+1,n=[],i=0;i<e;i++)n[i]=t.D(i)<<1|t.D(i-1)>>>31;return new yi(n,t.h)}function Oi(t,e){var n=e>>5;e%=32;for(var i=t.g.length-n,r=[],s=0;s<i;s++)r[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new yi(r,t.h)}i=yi.prototype,i.ea=function(){if(Ii(this))return-Fi(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var i=this.D(n);t+=(0<=i?i:Ei+i)*e,e*=Ei}return t},i.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(Ti(this))return"0";if(Ii(this))return"-"+Fi(this).toString(t);for(var e=bi(Math.pow(t,6)),n=this,i="";;){var r=Pi(n,e).g;n=Li(n,r.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=r,Ti(n))return s+i;for(;6>s.length;)s="0"+s;i=s+i}},i.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h},i.X=function(t){return t=Li(this,t),Ii(t)?-1:Ti(t)?0:1},i.abs=function(){return Ii(this)?Fi(this):this},i.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0,r=0;r<=e;r++){var s=i+(65535&this.D(r))+(65535&t.D(r)),o=(s>>>16)+(this.D(r)>>>16)+(t.D(r)>>>16);i=o>>>16,s&=65535,o&=65535,n[r]=o<<16|s}return new yi(n,-2147483648&n[n.length-1]?-1:0)},i.R=function(t){if(Ti(this)||Ti(t))return Ci;if(Ii(this))return Ii(t)?Fi(this).R(Fi(t)):Fi(Fi(this).R(t));if(Ii(t))return Fi(this.R(Fi(t)));if(0>this.X(Bi)&&0>t.X(Bi))return bi(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],i=0;i<2*e;i++)n[i]=0;for(i=0;i<this.g.length;i++)for(var r=0;r<t.g.length;r++){var s=this.D(i)>>>16,o=65535&this.D(i),a=t.D(r)>>>16,l=65535&t.D(r);n[2*i+2*r]+=o*l,Ri(n,2*i+2*r),n[2*i+2*r+1]+=s*l,Ri(n,2*i+2*r+1),n[2*i+2*r+1]+=o*a,Ri(n,2*i+2*r+1),n[2*i+2*r+2]+=s*a,Ri(n,2*i+2*r+2)}for(i=0;i<e;i++)n[i]=n[2*i+1]<<16|n[2*i];for(i=e;i<2*e;i++)n[i]=0;return new yi(n,0)},i.gb=function(t){return Pi(this,t).h},i.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)&t.D(i);return new yi(n,this.h&t.h)},i.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)|t.D(i);return new yi(n,this.h|t.h)},i.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],i=0;i<e;i++)n[i]=this.D(i)^t.D(i);return new yi(n,this.h^t.h)},hi.prototype.createWebChannel=hi.prototype.g,Ai.prototype.send=Ai.prototype.u,Ai.prototype.open=Ai.prototype.m,Ai.prototype.close=Ai.prototype.close,ae.NO_ERROR=0,ae.TIMEOUT=8,ae.HTTP_ERROR=6,le.COMPLETE="complete",he.EventType=de,de.OPEN="a",de.CLOSE="b",de.ERROR="c",de.MESSAGE="d",_t.prototype.listen=_t.prototype.O,Tn.prototype.listenOnce=Tn.prototype.P,Tn.prototype.getLastError=Tn.prototype.Sa,Tn.prototype.getLastErrorCode=Tn.prototype.Ia,Tn.prototype.getStatus=Tn.prototype.da,Tn.prototype.getResponseJson=Tn.prototype.Wa,Tn.prototype.getResponseText=Tn.prototype.ja,Tn.prototype.send=Tn.prototype.ha,Tn.prototype.setWithCredentials=Tn.prototype.Oa,mi.prototype.digest=mi.prototype.l,mi.prototype.reset=mi.prototype.reset,mi.prototype.update=mi.prototype.j,yi.prototype.add=yi.prototype.add,yi.prototype.multiply=yi.prototype.R,yi.prototype.modulo=yi.prototype.gb,yi.prototype.compare=yi.prototype.X,yi.prototype.toNumber=yi.prototype.ea,yi.prototype.toString=yi.prototype.toString,yi.prototype.getBits=yi.prototype.D,yi.fromNumber=bi,yi.fromString=xi;var ki=c.createWebChannelTransport=function(){return new hi},Di=c.getStatEventTarget=function(){return te()},Ui=c.ErrorCode=ae,Qi=c.EventType=le,Gi=c.Event=Zt,Hi=c.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Vi=(c.FetchXmlHttpFactory=_n,c.WebChannel=he),ji=c.XhrIo=Tn,Wi=c.Md5=mi,zi=c.Integer=yi;const Ki="@firebase/firestore";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(t){this.uid=t}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}qi.UNAUTHENTICATED=new qi(null),qi.GOOGLE_CREDENTIALS=new qi("google-credentials-uid"),qi.FIRST_PARTY=new qi("first-party-uid"),qi.MOCK_USER=new qi("mock-user");
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let $i="10.8.0";
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xi=new o.Vy("@firebase/firestore");function Yi(){return Xi.logLevel}function Zi(t){Xi.setLogLevel(t)}function Ji(t,...e){if(Xi.logLevel<=o.$b.DEBUG){const n=e.map(nr);Xi.debug(`Firestore (${$i}): ${t}`,...n)}}function tr(t,...e){if(Xi.logLevel<=o.$b.ERROR){const n=e.map(nr);Xi.error(`Firestore (${$i}): ${t}`,...n)}}function er(t,...e){if(Xi.logLevel<=o.$b.WARN){const n=e.map(nr);Xi.warn(`Firestore (${$i}): ${t}`,...n)}}function nr(t){if("string"==typeof t)return t;try{
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */return function(t){return JSON.stringify(t)}(t)}catch(e){return t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ir(t="Unexpected state"){const e=`FIRESTORE (${$i}) INTERNAL ASSERTION FAILED: `+t;throw tr(e),new Error(e)}function rr(t,e){t||ir()}function sr(t,e){t||ir()}function or(t,e){return t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lr extends a.g{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cr{constructor(){this.promise=new Promise(((t,e)=>{this.resolve=t,this.reject=e}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ur{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class hr{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable((()=>e(qi.UNAUTHENTICATED)))}shutdown(){}}class Ar{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable((()=>e(this.token.user)))}shutdown(){this.changeListener=null}}class dr{constructor(t){this.t=t,this.currentUser=qi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let n=this.i;const i=t=>this.i!==n?(n=this.i,e(t)):Promise.resolve();let r=new cr;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new cr,t.enqueueRetryable((()=>i(this.currentUser)))};const s=()=>{const e=r;t.enqueueRetryable((async()=>{await e.promise,await i(this.currentUser)}))},o=t=>{Ji("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=t,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit((t=>o(t))),setTimeout((()=>{if(!this.auth){const t=this.t.getImmediate({optional:!0});t?o(t):(Ji("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new cr)}}),0),s()}getToken(){const t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then((e=>this.i!==t?(Ji("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):e?(rr("string"==typeof e.accessToken),new ur(e.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return rr(null===t||"string"==typeof t),new qi(t)}}class fr{constructor(t,e,n){this.l=t,this.h=e,this.P=n,this.type="FirstParty",this.user=qi.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class pr{constructor(t,e,n){this.l=t,this.h=e,this.P=n}getToken(){return Promise.resolve(new fr(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable((()=>e(qi.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class gr{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class mr{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){const n=t=>{null!=t.error&&Ji("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${t.error.message}`);const n=t.token!==this.R;return this.R=t.token,Ji("FirebaseAppCheckTokenProvider",`Received ${n?"new":"existing"} token.`),n?e(t.token):Promise.resolve()};this.o=e=>{t.enqueueRetryable((()=>n(e)))};const i=t=>{Ji("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=t,this.appCheck.addTokenListener(this.o)};this.A.onInit((t=>i(t))),setTimeout((()=>{if(!this.appCheck){const t=this.A.getImmediate({optional:!0});t?i(t):Ji("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((t=>t?(rr("string"==typeof t.token),this.R=t.token,new gr(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class vr{getToken(){return Promise.resolve(new gr(""))}invalidateToken(){}start(t,e){}shutdown(){}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(t){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let i=0;i<t;i++)n[i]=Math.floor(256*Math.random());return n}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length;let n="";for(;n.length<20;){const i=yr(40);for(let r=0;r<i.length;++r)n.length<20&&i[r]<e&&(n+=t.charAt(i[r]%t.length))}return n}}function _r(t,e){return t<e?-1:t>e?1:0}function br(t,e,n){return t.length===e.length&&t.every(((t,i)=>n(t,e[i])))}function xr(t){return t+"\0"}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new lr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new lr(ar.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new lr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new lr(ar.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Er.fromMillis(Date.now())}static fromDate(t){return Er.fromMillis(t.getTime())}static fromMillis(t){const e=Math.floor(t/1e3),n=Math.floor(1e6*(t-1e3*e));return new Er(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?_r(this.nanoseconds,t.nanoseconds):_r(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr{constructor(t){this.timestamp=t}static fromTimestamp(t){return new Cr(t)}static min(){return new Cr(new Er(0,0))}static max(){return new Cr(new Er(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(t,e,n){void 0===e?e=0:e>t.length&&ir(),void 0===n?n=t.length-e:n>t.length-e&&ir(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return 0===Sr.comparator(this,t)}child(t){const e=this.segments.slice(this.offset,this.limit());return t instanceof Sr?t.forEach((t=>{e.push(t)})):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return 0===this.length}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){const n=Math.min(t.length,e.length);for(let i=0;i<n;i++){const n=t.get(i),r=e.get(i);if(n<r)return-1;if(n>r)return 1}return t.length<e.length?-1:t.length>e.length?1:0}}class Br extends Sr{construct(t,e,n){return new Br(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const e=[];for(const n of t){if(n.indexOf("//")>=0)throw new lr(ar.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter((t=>t.length>0)))}return new Br(e)}static emptyPath(){return new Br([])}}const Tr=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ir extends Sr{construct(t,e,n){return new Ir(t,e,n)}static isValidIdentifier(t){return Tr.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ir.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ir(["__name__"])}static fromServerFormat(t){const e=[];let n="",i=0;const r=()=>{if(0===n.length)throw new lr(ar.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""};let s=!1;for(;i<t.length;){const e=t[i];if("\\"===e){if(i+1===t.length)throw new lr(ar.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const e=t[i+1];if("\\"!==e&&"."!==e&&"`"!==e)throw new lr(ar.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=e,i+=2}else"`"===e?(s=!s,i++):"."!==e||s?(n+=e,i++):(r(),i++)}if(r(),s)throw new lr(ar.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ir(e)}static emptyPath(){return new Ir([])}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fr{constructor(t){this.path=t}static fromPath(t){return new Fr(Br.fromString(t))}static fromName(t){return new Fr(Br.fromString(t).popFirst(5))}static empty(){return new Fr(Br.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return null!==t&&0===Br.comparator(this.path,t.path)}toString(){return this.path.toString()}static comparator(t,e){return Br.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Fr(new Br(t.slice()))}}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lr{constructor(t,e,n,i){this.indexId=t,this.collectionGroup=e,this.fields=n,this.indexState=i}}function Rr(t){return t.fields.find((t=>2===t.kind))}function Mr(t){return t.fields.filter((t=>2!==t.kind))}function Pr(t,e){let n=_r(t.collectionGroup,e.collectionGroup);if(0!==n)return n;for(let i=0;i<Math.min(t.fields.length,e.fields.length);++i)if(n=Or(t.fields[i],e.fields[i]),0!==n)return n;return _r(t.fields.length,e.fields.length)}Lr.UNKNOWN_ID=-1;class Nr{constructor(t,e){this.fieldPath=t,this.kind=e}}function Or(t,e){const n=Ir.comparator(t.fieldPath,e.fieldPath);return 0!==n?n:_r(t.kind,e.kind)}class kr{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new kr(0,Qr.min())}}function Dr(t,e){const n=t.toTimestamp().seconds,i=t.toTimestamp().nanoseconds+1,r=Cr.fromTimestamp(1e9===i?new Er(n+1,0):new Er(n,i));return new Qr(r,Fr.empty(),e)}function Ur(t){return new Qr(t.readTime,t.key,-1)}class Qr{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new Qr(Cr.min(),Fr.empty(),-1)}static max(){return new Qr(Cr.max(),Fr.empty(),-1)}}function Gr(t,e){let n=t.readTime.compareTo(e.readTime);return 0!==n?n:(n=Fr.comparator(t.documentKey,e.documentKey),0!==n?n:_r(t.largestBatchId,e.largestBatchId)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}const Hr="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vr{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jr(t){if(t.code!==ar.FAILED_PRECONDITION||t.message!==Hr)throw t;Ji("LocalStore","Unexpectedly lost primary lease")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wr{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&ir(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new Wr(((n,i)=>{this.nextCallback=e=>{this.wrapSuccess(t,e).next(n,i)},this.catchCallback=t=>{this.wrapFailure(e,t).next(n,i)}}))}toPromise(){return new Promise(((t,e)=>{this.next(t,e)}))}wrapUserFunction(t){try{const e=t();return e instanceof Wr?e:Wr.resolve(e)}catch(t){return Wr.reject(t)}}wrapSuccess(t,e){return t?this.wrapUserFunction((()=>t(e))):Wr.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction((()=>t(e))):Wr.reject(e)}static resolve(t){return new Wr(((e,n)=>{e(t)}))}static reject(t){return new Wr(((e,n)=>{n(t)}))}static waitFor(t){return new Wr(((e,n)=>{let i=0,r=0,s=!1;t.forEach((t=>{++i,t.next((()=>{++r,s&&r===i&&e()}),(t=>n(t)))})),s=!0,r===i&&e()}))}static or(t){let e=Wr.resolve(!1);for(const n of t)e=e.next((t=>t?Wr.resolve(t):n()));return e}static forEach(t,e){const n=[];return t.forEach(((t,i)=>{n.push(e.call(this,t,i))})),this.waitFor(n)}static mapArray(t,e){return new Wr(((n,i)=>{const r=t.length,s=new Array(r);let o=0;for(let a=0;a<r;a++){const l=a;e(t[l]).next((t=>{s[l]=t,++o,o===r&&n(s)}),(t=>i(t)))}}))}static doWhile(t,e){return new Wr(((n,i)=>{const r=()=>{!0===t()?e().next((()=>{r()}),i):n()};r()}))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.V=new cr,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{e.error?this.V.reject(new $r(t,e.error)):this.V.resolve()},this.transaction.onerror=e=>{const n=ts(e.target.error);this.V.reject(new $r(t,n))}}static open(t,e,n,i){try{return new zr(e,t.transaction(i,n))}catch(t){throw new $r(e,t)}}get m(){return this.V.promise}abort(t){t&&this.V.reject(t),this.aborted||(Ji("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const t=this.transaction;this.aborted||"function"!=typeof t.commit||t.commit()}store(t){const e=this.transaction.objectStore(t);return new Yr(e)}}class Kr{constructor(t,e,n){this.name=t,this.version=e,this.p=n,12.2===Kr.S((0,a.ZQ)())&&tr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return Ji("SimpleDb","Removing database:",t),Zr(window.indexedDB.deleteDatabase(t)).toPromise()}static D(){if(!(0,a.zW)())return!1;if(Kr.C())return!0;const t=(0,a.ZQ)(),e=Kr.S(t),n=0<e&&e<10,i=Kr.v(t),r=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||r)}static C(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.__PRIVATE_env)||void 0===t?void 0:t.F)}static M(t,e){return t.store(e)}static S(t){const e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}static v(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}async O(t){return this.db||(Ji("SimpleDb","Opening database:",this.name),this.db=await new Promise(((e,n)=>{const i=indexedDB.open(this.name,this.version);i.onsuccess=t=>{const n=t.target.result;e(n)},i.onblocked=()=>{n(new $r(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=e=>{const i=e.target.error;"VersionError"===i.name?n(new lr(ar.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===i.name?n(new lr(ar.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+i)):n(new $r(t,i))},i.onupgradeneeded=t=>{Ji("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',t.oldVersion);const e=t.target.result;this.p.N(e,i.transaction,t.oldVersion,this.version).next((()=>{Ji("SimpleDb","Database upgrade to version "+this.version+" complete")}))}}))),this.B&&(this.db.onversionchange=t=>this.B(t)),this.db}L(t){this.B=t,this.db&&(this.db.onversionchange=e=>t(e))}async runTransaction(t,e,n,i){const r="readonly"===e;let s=0;for(;;){++s;try{this.db=await this.O(t);const e=zr.open(this.db,t,r?"readonly":"readwrite",n),s=i(e).next((t=>(e.g(),t))).catch((t=>(e.abort(t),Wr.reject(t)))).toPromise();return s.catch((()=>{})),await e.m,s}catch(t){const e=t,n="FirebaseError"!==e.name&&s<3;if(Ji("SimpleDb","Transaction failed with error:",e.message,"Retrying:",n),this.close(),!n)return Promise.reject(e)}}}close(){this.db&&this.db.close(),this.db=void 0}}class qr{constructor(t){this.k=t,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(t){this.k=t}done(){this.q=!0}U(t){this.K=t}delete(){return Zr(this.k.delete())}}class $r extends lr{constructor(t,e){super(ar.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}}function Xr(t){return"IndexedDbTransactionError"===t.name}class Yr{constructor(t){this.store=t}put(t,e){let n;return void 0!==e?(Ji("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Ji("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Zr(n)}add(t){return Ji("SimpleDb","ADD",this.store.name,t,t),Zr(this.store.add(t))}get(t){return Zr(this.store.get(t)).next((e=>(void 0===e&&(e=null),Ji("SimpleDb","GET",this.store.name,t,e),e)))}delete(t){return Ji("SimpleDb","DELETE",this.store.name,t),Zr(this.store.delete(t))}count(){return Ji("SimpleDb","COUNT",this.store.name),Zr(this.store.count())}W(t,e){const n=this.options(t,e),i=n.index?this.store.index(n.index):this.store;if("function"==typeof i.getAll){const t=i.getAll(n.range);return new Wr(((e,n)=>{t.onerror=t=>{n(t.target.error)},t.onsuccess=t=>{e(t.target.result)}}))}{const t=this.cursor(n),e=[];return this.G(t,((t,n)=>{e.push(n)})).next((()=>e))}}j(t,e){const n=this.store.getAll(t,null===e?void 0:e);return new Wr(((t,e)=>{n.onerror=t=>{e(t.target.error)},n.onsuccess=e=>{t(e.target.result)}}))}H(t,e){Ji("SimpleDb","DELETE ALL",this.store.name);const n=this.options(t,e);n.J=!1;const i=this.cursor(n);return this.G(i,((t,e,n)=>n.delete()))}Y(t,e){let n;e?n=t:(n={},e=t);const i=this.cursor(n);return this.G(i,e)}Z(t){const e=this.cursor({});return new Wr(((n,i)=>{e.onerror=t=>{const e=ts(t.target.error);i(e)},e.onsuccess=e=>{const i=e.target.result;i?t(i.primaryKey,i.value).next((t=>{t?i.continue():n()})):n()}}))}G(t,e){const n=[];return new Wr(((i,r)=>{t.onerror=t=>{r(t.target.error)},t.onsuccess=t=>{const r=t.target.result;if(!r)return void i();const s=new qr(r),o=e(r.primaryKey,r.value,s);if(o instanceof Wr){const t=o.catch((t=>(s.done(),Wr.reject(t))));n.push(t)}s.isDone?i():null===s.$?r.continue():r.continue(s.$)}})).next((()=>Wr.waitFor(n)))}options(t,e){let n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){const n=this.store.index(t.index);return t.J?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)}}function Zr(t){return new Wr(((e,n)=>{t.onsuccess=t=>{const n=t.target.result;e(n)},t.onerror=t=>{const e=ts(t.target.error);n(e)}}))}let Jr=!1;function ts(t){const e=Kr.S((0,a.ZQ)());if(e>=12.2&&e<13){const e="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(e)>=0){const t=new lr("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Jr||(Jr=!0,setTimeout((()=>{throw t}),0)),t}}return t}class es{constructor(t,e){this.asyncQueue=t,this.X=e,this.task=null}start(){this.ee(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}ee(t){Ji("IndexBackfiller",`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{Ji("IndexBackfiller",`Documents written: ${await this.X.te()}`)}catch(t){Xr(t)?Ji("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",t):await jr(t)}await this.ee(6e4)}))}}class ns{constructor(t,e){this.localStore=t,this.persistence=e}async te(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(e=>this.ne(e,t)))}ne(t,e){const n=new Set;let i=e,r=!0;return Wr.doWhile((()=>!0===r&&i>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((e=>{if(null!==e&&!n.has(e))return Ji("IndexBackfiller",`Processing collection: ${e}`),this.re(t,e,i).next((t=>{i-=t,n.add(e)}));r=!1})))).next((()=>e-i))}re(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next((i=>this.localStore.localDocuments.getNextDocuments(t,e,i,n).next((n=>{const r=n.changes;return this.localStore.indexManager.updateIndexEntries(t,r).next((()=>this.ie(i,n))).next((n=>(Ji("IndexBackfiller",`Updating offset: ${n}`),this.localStore.indexManager.updateCollectionGroup(t,e,n)))).next((()=>r.size))}))))}ie(t,e){let n=t;return e.changes.forEach(((t,e)=>{const i=Ur(e);Gr(i,n)>0&&(n=i)})),new Qr(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class is{constructor(t,e){this.previousValue=t,e&&(e.sequenceNumberHandler=t=>this.se(t),this.oe=t=>e.writeSequenceNumber(t))}se(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.oe&&this.oe(t),t}}function rs(t){return null==t}function ss(t){return 0===t&&1/t==-1/0}function os(t){return"number"==typeof t&&Number.isInteger(t)&&!ss(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function as(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cs(e)),e=ls(t.get(n),e);return cs(e)}function ls(t,e){let n=e;const i=t.length;for(let r=0;r<i;r++){const e=t.charAt(r);switch(e){case"\0":n+="";break;case"":n+="";break;default:n+=e}}return n}function cs(t){return t+""}function us(t){const e=t.length;if(rr(e>=2),2===e)return rr(""===t.charAt(0)&&""===t.charAt(1)),Br.emptyPath();const n=e-2,i=[];let r="";for(let s=0;s<e;){const e=t.indexOf("",s);switch((e<0||e>n)&&ir(),t.charAt(e+1)){case"":const n=t.substring(s,e);let o;0===r.length?o=n:(r+=n,o=r,r=""),i.push(o);break;case"":r+=t.substring(s,e),r+="\0";break;case"":r+=t.substring(s,e+1);break;default:ir()}s=e+2}return new Br(i)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */is._e=-1;const hs=["userId","batchId"];
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function As(t,e){return[t,as(e)]}function ds(t,e,n){return[t,as(e),n]}const fs={},ps=["prefixPath","collectionGroup","readTime","documentId"],gs=["prefixPath","collectionGroup","documentId"],ms=["collectionGroup","readTime","prefixPath","documentId"],vs=["canonicalId","targetId"],ys=["targetId","path"],ws=["path","targetId"],_s=["collectionId","parent"],bs=["indexId","uid"],xs=["uid","sequenceNumber"],Es=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Cs=["indexId","uid","orderedDocumentKey"],Ss=["userId","collectionPath","documentId"],Bs=["userId","collectionPath","largestBatchId"],Ts=["userId","collectionGroup","largestBatchId"],Is=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Fs=[...Is,"documentOverlays"],Ls=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Rs=Ls,Ms=[...Rs,"indexConfiguration","indexState","indexEntries"];
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps extends Vr{constructor(t,e){super(),this.ae=t,this.currentSequenceNumber=e}}function Ns(t,e){const n=or(t);return Kr.M(n.ae,e)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Os(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ks(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ds(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t,e){this.comparator=t,this.root=e||Gs.EMPTY}insert(t,e){return new Us(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Gs.BLACK,null,null))}remove(t){return new Us(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gs.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){const n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){const i=this.comparator(t,n.key);if(0===i)return e+n.left.size;i<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((e,n)=>(t(e,n),!1)))}toString(){const t=[];return this.inorderTraversal(((e,n)=>(t.push(`${e}:${n}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Qs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Qs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Qs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Qs(this.root,t,this.comparator,!0)}}class Qs{constructor(t,e,n,i){this.isReverse=i,this.nodeStack=[];let r=1;for(;!t.isEmpty();)if(r=e?n(t.key,e):1,e&&i&&(r*=-1),r<0)t=this.isReverse?t.left:t.right;else{if(0===r){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Gs{constructor(t,e,n,i,r){this.key=t,this.value=e,this.color=null!=n?n:Gs.RED,this.left=null!=i?i:Gs.EMPTY,this.right=null!=r?r:Gs.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,n,i,r){return new Gs(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=i?i:this.left,null!=r?r:this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,n){let i=this;const r=n(t,i.key);return i=r<0?i.copy(null,null,null,i.left.insert(t,e,n),null):0===r?i.copy(null,e,null,null,null):i.copy(null,null,null,null,i.right.insert(t,e,n)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Gs.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let n,i=this;if(e(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,e),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===e(t,i.key)){if(i.right.isEmpty())return Gs.EMPTY;n=i.right.min(),i=i.copy(n.key,n.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,e))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Gs.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Gs.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ir();if(this.right.isRed())throw ir();const t=this.left.check();if(t!==this.right.check())throw ir();return t+(this.isRed()?0:1)}}Gs.EMPTY=null,Gs.RED=!0,Gs.BLACK=!1,Gs.EMPTY=new class{constructor(){this.size=0}get key(){throw ir()}get value(){throw ir()}get color(){throw ir()}get left(){throw ir()}get right(){throw ir()}copy(t,e,n,i,r){return this}insert(t,e,n){return new Gs(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
class Hs{constructor(t){this.comparator=t,this.data=new Us(this.comparator)}has(t){return null!==this.data.get(t)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((e,n)=>(t(e),!1)))}forEachInRange(t,e){const n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){const i=n.getNext();if(this.comparator(i.key,t[1])>=0)return;e(i.key)}}forEachWhile(t,e){let n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return}firstAfterOrEqual(t){const e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Vs(this.data.getIterator())}getIteratorFrom(t){return new Vs(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach((t=>{e=e.add(t)})),e}isEqual(t){if(!(t instanceof Hs))return!1;if(this.size!==t.size)return!1;const e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(0!==this.comparator(t,i))return!1}return!0}toArray(){const t=[];return this.forEach((e=>{t.push(e)})),t}toString(){const t=[];return this.forEach((e=>t.push(e))),"SortedSet("+t.toString()+")"}copy(t){const e=new Hs(this.comparator);return e.data=t,e}}class Vs{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function js(t){return t.hasNext()?t.getNext():void 0}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ws{constructor(t){this.fields=t,t.sort(Ir.comparator)}static empty(){return new Ws([])}unionWith(t){let e=new Hs(Ir.comparator);for(const n of this.fields)e=e.add(n);for(const n of t)e=e.add(n);return new Ws(e.toArray())}covers(t){for(const e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return br(this.fields,t.fields,((t,e)=>t.isEqual(e)))}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zs extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ks(){return"undefined"!=typeof atob}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(t){this.binaryString=t}static fromBase64String(t){const e=function(t){try{return atob(t)}catch(t){throw"undefined"!=typeof DOMException&&t instanceof DOMException?new zs("Invalid base64 string: "+t):t}}(t);return new qs(e)}static fromUint8Array(t){const e=function(t){let e="";for(let n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t);return new qs(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const e=new Uint8Array(t.length);for(let n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return _r(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}qs.EMPTY_BYTE_STRING=new qs("");const $s=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Xs(t){if(rr(!!t),"string"==typeof t){let e=0;const n=$s.exec(t);if(rr(!!n),n[1]){let t=n[1];t=(t+"000000000").substr(0,9),e=Number(t)}const i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ys(t.seconds),nanos:Ys(t.nanos)}}function Ys(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Zs(t){return"string"==typeof t?qs.fromBase64String(t):qs.fromUint8Array(t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Js(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function to(t){const e=t.mapValue.fields.__previous_value__;return Js(e)?to(e):e}function eo(t){const e=Xs(t.mapValue.fields.__local_write_time__.timestampValue);return new Er(e.seconds,e.nanos)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(t,e,n,i,r,s,o,a,l){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=i,this.ssl=r,this.forceLongPolling=s,this.autoDetectLongPolling=o,this.longPollingOptions=a,this.useFetchStreams=l}}class io{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new io("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(t){return t instanceof io&&t.projectId===this.projectId&&t.database===this.database}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ro={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},so={nullValue:"NULL_VALUE"};function oo(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Js(t)?4:bo(t)?9007199254740991:10:ir()}function ao(t,e){if(t===e)return!0;const n=oo(t);if(n!==oo(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return eo(t).isEqual(eo(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;const n=Xs(t.timestampValue),i=Xs(e.timestampValue);return n.seconds===i.seconds&&n.nanos===i.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Zs(t.bytesValue).isEqual(Zs(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Ys(t.geoPointValue.latitude)===Ys(e.geoPointValue.latitude)&&Ys(t.geoPointValue.longitude)===Ys(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Ys(t.integerValue)===Ys(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){const n=Ys(t.doubleValue),i=Ys(e.doubleValue);return n===i?ss(n)===ss(i):isNaN(n)&&isNaN(i)}return!1}(t,e);case 9:return br(t.arrayValue.values||[],e.arrayValue.values||[],ao);case 10:return function(t,e){const n=t.mapValue.fields||{},i=e.mapValue.fields||{};if(Os(n)!==Os(i))return!1;for(const r in n)if(n.hasOwnProperty(r)&&(void 0===i[r]||!ao(n[r],i[r])))return!1;return!0}(t,e);default:return ir()}}function lo(t,e){return void 0!==(t.values||[]).find((t=>ao(t,e)))}function co(t,e){if(t===e)return 0;const n=oo(t),i=oo(e);if(n!==i)return _r(n,i);switch(n){case 0:case 9007199254740991:return 0;case 1:return _r(t.booleanValue,e.booleanValue);case 2:return function(t,e){const n=Ys(t.integerValue||t.doubleValue),i=Ys(e.integerValue||e.doubleValue);return n<i?-1:n>i?1:n===i?0:isNaN(n)?isNaN(i)?0:-1:1}(t,e);case 3:return uo(t.timestampValue,e.timestampValue);case 4:return uo(eo(t),eo(e));case 5:return _r(t.stringValue,e.stringValue);case 6:return function(t,e){const n=Zs(t),i=Zs(e);return n.compareTo(i)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){const n=t.split("/"),i=e.split("/");for(let r=0;r<n.length&&r<i.length;r++){const t=_r(n[r],i[r]);if(0!==t)return t}return _r(n.length,i.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){const n=_r(Ys(t.latitude),Ys(e.latitude));return 0!==n?n:_r(Ys(t.longitude),Ys(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){const n=t.values||[],i=e.values||[];for(let r=0;r<n.length&&r<i.length;++r){const t=co(n[r],i[r]);if(t)return t}return _r(n.length,i.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){if(t===ro.mapValue&&e===ro.mapValue)return 0;if(t===ro.mapValue)return 1;if(e===ro.mapValue)return-1;const n=t.fields||{},i=Object.keys(n),r=e.fields||{},s=Object.keys(r);i.sort(),s.sort();for(let o=0;o<i.length&&o<s.length;++o){const t=_r(i[o],s[o]);if(0!==t)return t;const e=co(n[i[o]],r[s[o]]);if(0!==e)return e}return _r(i.length,s.length)}(t.mapValue,e.mapValue);default:throw ir()}}function uo(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return _r(t,e);const n=Xs(t),i=Xs(e),r=_r(n.seconds,i.seconds);return 0!==r?r:_r(n.nanos,i.nanos)}function ho(t){return Ao(t)}function Ao(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){const e=Xs(t);return`time(${e.seconds},${e.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(t){return Zs(t).toBase64()}(t.bytesValue):"referenceValue"in t?function(t){return Fr.fromName(t).toString()}(t.referenceValue):"geoPointValue"in t?function(t){return`geo(${t.latitude},${t.longitude})`}(t.geoPointValue):"arrayValue"in t?function(t){let e="[",n=!0;for(const i of t.values||[])n?n=!1:e+=",",e+=Ao(i);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){const e=Object.keys(t.fields||{}).sort();let n="{",i=!0;for(const r of e)i?i=!1:n+=",",n+=`${r}:${Ao(t.fields[r])}`;return n+"}"}(t.mapValue):ir()}function fo(t){switch(oo(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=to(t);return e?16+fo(e):16;case 5:return 2*t.stringValue.length;case 6:return Zs(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(t){return(t.values||[]).reduce(((t,e)=>t+fo(e)),0)}(t.arrayValue);case 10:return function(t){let e=0;return ks(t.fields,((t,n)=>{e+=t.length+fo(n)})),e}(t.mapValue);default:throw ir()}}function po(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function go(t){return!!t&&"integerValue"in t}function mo(t){return!!t&&"arrayValue"in t}function vo(t){return!!t&&"nullValue"in t}function yo(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function wo(t){return!!t&&"mapValue"in t}function _o(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return ks(t.mapValue.fields,((t,n)=>e.mapValue.fields[t]=_o(n))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_o(t.arrayValue.values[n]);return e}return Object.assign({},t)}function bo(t){return"__max__"===(((t.mapValue||{}).fields||{}).__type__||{}).stringValue}function xo(t){return"nullValue"in t?so:"booleanValue"in t?{booleanValue:!1}:"integerValue"in t||"doubleValue"in t?{doubleValue:NaN}:"timestampValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in t?{stringValue:""}:"bytesValue"in t?{bytesValue:""}:"referenceValue"in t?po(io.empty(),Fr.empty()):"geoPointValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in t?{arrayValue:{}}:"mapValue"in t?{mapValue:{}}:ir()}function Eo(t){return"nullValue"in t?{booleanValue:!1}:"booleanValue"in t?{doubleValue:NaN}:"integerValue"in t||"doubleValue"in t?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in t?{stringValue:""}:"stringValue"in t?{bytesValue:""}:"bytesValue"in t?po(io.empty(),Fr.empty()):"referenceValue"in t?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in t?{arrayValue:{}}:"arrayValue"in t?{mapValue:{}}:"mapValue"in t?ro:ir()}function Co(t,e){const n=co(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?-1:!t.inclusive&&e.inclusive?1:0}function So(t,e){const n=co(t.value,e.value);return 0!==n?n:t.inclusive&&!e.inclusive?1:!t.inclusive&&e.inclusive?-1:0}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bo{constructor(t){this.value=t}static empty(){return new Bo({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!wo(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=_o(e)}setAll(t){let e=Ir.emptyPath(),n={},i=[];t.forEach(((t,r)=>{if(!e.isImmediateParentOf(r)){const t=this.getFieldsMap(e);this.applyChanges(t,n,i),n={},i=[],e=r.popLast()}t?n[r.lastSegment()]=_o(t):i.push(r.lastSegment())}));const r=this.getFieldsMap(e);this.applyChanges(r,n,i)}delete(t){const e=this.field(t.popLast());wo(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return ao(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let i=e.mapValue.fields[t.get(n)];wo(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=i),e=i}return e.mapValue.fields}applyChanges(t,e,n){ks(e,((e,n)=>t[e]=n));for(const i of n)delete t[i]}clone(){return new Bo(_o(this.value))}}function To(t){const e=[];return ks(t.fields,((t,n)=>{const i=new Ir([t]);if(wo(n)){const t=To(n.mapValue).fields;if(0===t.length)e.push(i);else for(const n of t)e.push(i.child(n))}else e.push(i)})),new Ws(e)
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Io{constructor(t,e,n,i,r,s,o){this.key=t,this.documentType=e,this.version=n,this.readTime=i,this.createTime=r,this.data=s,this.documentState=o}static newInvalidDocument(t){return new Io(t,0,Cr.min(),Cr.min(),Cr.min(),Bo.empty(),0)}static newFoundDocument(t,e,n,i){return new Io(t,1,e,Cr.min(),n,i,0)}static newNoDocument(t,e){return new Io(t,2,e,Cr.min(),Cr.min(),Bo.empty(),0)}static newUnknownDocument(t,e){return new Io(t,3,e,Cr.min(),Cr.min(),Bo.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(Cr.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Bo.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Bo.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Cr.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(t){return t instanceof Io&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new Io(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fo{constructor(t,e){this.position=t,this.inclusive=e}}function Lo(t,e,n){let i=0;for(let r=0;r<t.position.length;r++){const s=e[r],o=t.position[r];if(i=s.field.isKeyField()?Fr.comparator(Fr.fromName(o.referenceValue),n.key):co(o,n.data.field(s.field)),"desc"===s.dir&&(i*=-1),0!==i)break}return i}function Ro(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!ao(t.position[n],e.position[n]))return!1;return!0}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo{constructor(t,e="asc"){this.field=t,this.dir=e}}function Po(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class No{}class Oo extends No{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?"in"===e||"not-in"===e?this.createKeyFieldInFilter(t,e,n):new zo(t,e,n):"array-contains"===e?new Xo(t,n):"in"===e?new Yo(t,n):"not-in"===e?new Zo(t,n):"array-contains-any"===e?new Jo(t,n):new Oo(t,e,n)}static createKeyFieldInFilter(t,e,n){return"in"===e?new Ko(t,n):new qo(t,n)}matches(t){const e=t.data.field(this.field);return"!="===this.op?null!==e&&this.matchesComparison(co(e,this.value)):null!==e&&oo(this.value)===oo(e)&&this.matchesComparison(co(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return ir()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class ko extends No{constructor(t,e){super(),this.filters=t,this.op=e,this.ue=null}static create(t,e){return new ko(t,e)}matches(t){return Do(this)?void 0===this.filters.find((e=>!e.matches(t))):void 0!==this.filters.find((e=>e.matches(t)))}getFlattenedFilters(){return null!==this.ue||(this.ue=this.filters.reduce(((t,e)=>t.concat(e.getFlattenedFilters())),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function Do(t){return"and"===t.op}function Uo(t){return"or"===t.op}function Qo(t){return Go(t)&&Do(t)}function Go(t){for(const e of t.filters)if(e instanceof ko)return!1;return!0}function Ho(t){if(t instanceof Oo)return t.field.canonicalString()+t.op.toString()+ho(t.value);if(Qo(t))return t.filters.map((t=>Ho(t))).join(",");{const e=t.filters.map((t=>Ho(t))).join(",");return`${t.op}(${e})`}}function Vo(t,e){return t instanceof Oo?function(t,e){return e instanceof Oo&&t.op===e.op&&t.field.isEqual(e.field)&&ao(t.value,e.value)}(t,e):t instanceof ko?function(t,e){return e instanceof ko&&t.op===e.op&&t.filters.length===e.filters.length&&t.filters.reduce(((t,n,i)=>t&&Vo(n,e.filters[i])),!0)}(t,e):void ir()}function jo(t,e){const n=t.filters.concat(e);return ko.create(n,t.op)}function Wo(t){return t instanceof Oo?function(t){return`${t.field.canonicalString()} ${t.op} ${ho(t.value)}`}(t):t instanceof ko?function(t){return t.op.toString()+" {"+t.getFilters().map(Wo).join(" ,")+"}"}(t):"Filter"}class zo extends Oo{constructor(t,e,n){super(t,e,n),this.key=Fr.fromName(n.referenceValue)}matches(t){const e=Fr.comparator(t.key,this.key);return this.matchesComparison(e)}}class Ko extends Oo{constructor(t,e){super(t,"in",e),this.keys=$o("in",e)}matches(t){return this.keys.some((e=>e.isEqual(t.key)))}}class qo extends Oo{constructor(t,e){super(t,"not-in",e),this.keys=$o("not-in",e)}matches(t){return!this.keys.some((e=>e.isEqual(t.key)))}}function $o(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((t=>Fr.fromName(t.referenceValue)))}class Xo extends Oo{constructor(t,e){super(t,"array-contains",e)}matches(t){const e=t.data.field(this.field);return mo(e)&&lo(e.arrayValue,this.value)}}class Yo extends Oo{constructor(t,e){super(t,"in",e)}matches(t){const e=t.data.field(this.field);return null!==e&&lo(this.value.arrayValue,e)}}class Zo extends Oo{constructor(t,e){super(t,"not-in",e)}matches(t){if(lo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const e=t.data.field(this.field);return null!==e&&!lo(this.value.arrayValue,e)}}class Jo extends Oo{constructor(t,e){super(t,"array-contains-any",e)}matches(t){const e=t.data.field(this.field);return!(!mo(e)||!e.arrayValue.values)&&e.arrayValue.values.some((t=>lo(this.value.arrayValue,t)))}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(t,e=null,n=[],i=[],r=null,s=null,o=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=i,this.limit=r,this.startAt=s,this.endAt=o,this.ce=null}}function ea(t,e=null,n=[],i=[],r=null,s=null,o=null){return new ta(t,e,n,i,r,s,o)}function na(t){const e=or(t);if(null===e.ce){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((t=>Ho(t))).join(","),t+="|ob:",t+=e.orderBy.map((t=>function(t){return t.field.canonicalString()+t.dir}(t))).join(","),rs(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((t=>ho(t))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((t=>ho(t))).join(",")),e.ce=t}return e.ce}function ia(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!Po(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Vo(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ro(t.startAt,e.startAt)&&Ro(t.endAt,e.endAt)}function ra(t){return Fr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}function sa(t,e){return t.filters.filter((t=>t instanceof Oo&&t.field.isEqual(e)))}function oa(t,e,n){let i=so,r=!0;for(const s of sa(t,e)){let t=so,e=!0;switch(s.op){case"<":case"<=":t=xo(s.value);break;case"==":case"in":case">=":t=s.value;break;case">":t=s.value,e=!1;break;case"!=":case"not-in":t=so}Co({value:i,inclusive:r},{value:t,inclusive:e})<0&&(i=t,r=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];Co({value:i,inclusive:r},{value:t,inclusive:n.inclusive})<0&&(i=t,r=n.inclusive);break}return{value:i,inclusive:r}}function aa(t,e,n){let i=ro,r=!0;for(const s of sa(t,e)){let t=ro,e=!0;switch(s.op){case">=":case">":t=Eo(s.value),e=!1;break;case"==":case"in":case"<=":t=s.value;break;case"<":t=s.value,e=!1;break;case"!=":case"not-in":t=ro}So({value:i,inclusive:r},{value:t,inclusive:e})>0&&(i=t,r=e)}if(null!==n)for(let s=0;s<t.orderBy.length;++s)if(t.orderBy[s].field.isEqual(e)){const t=n.position[s];So({value:i,inclusive:r},{value:t,inclusive:n.inclusive})>0&&(i=t,r=n.inclusive);break}return{value:i,inclusive:r}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la{constructor(t,e=null,n=[],i=[],r=null,s="F",o=null,a=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=i,this.limit=r,this.limitType=s,this.startAt=o,this.endAt=a,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function ca(t,e,n,i,r,s,o,a){return new la(t,e,n,i,r,s,o,a)}function ua(t){return new la(t)}function ha(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}function Aa(t){return null!==t.collectionGroup}function da(t){const e=or(t);if(null===e.le){e.le=[];const t=new Set;for(const r of e.explicitOrderBy)e.le.push(r),t.add(r.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc",i=function(t){let e=new Hs(Ir.comparator);return t.filters.forEach((t=>{t.getFlattenedFilters().forEach((t=>{t.isInequality()&&(e=e.add(t.field))}))})),e}(e);i.forEach((i=>{t.has(i.canonicalString())||i.isKeyField()||e.le.push(new Mo(i,n))})),t.has(Ir.keyField().canonicalString())||e.le.push(new Mo(Ir.keyField(),n))}return e.le}function fa(t){const e=or(t);return e.he||(e.he=pa(e,da(t))),e.he}function pa(t,e){if("F"===t.limitType)return ea(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((t=>{const e="desc"===t.dir?"asc":"desc";return new Mo(t.field,e)}));const n=t.endAt?new Fo(t.endAt.position,t.endAt.inclusive):null,i=t.startAt?new Fo(t.startAt.position,t.startAt.inclusive):null;return ea(t.path,t.collectionGroup,e,t.filters,t.limit,n,i)}}function ga(t,e){const n=t.filters.concat([e]);return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function ma(t,e,n){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function va(t,e){return ia(fa(t),fa(e))&&t.limitType===e.limitType}function ya(t){return`${na(fa(t))}|lt:${t.limitType}`}function wa(t){return`Query(target=${function(t){let e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=`, filters: [${t.filters.map((t=>Wo(t))).join(", ")}]`),rs(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=`, orderBy: [${t.orderBy.map((t=>function(t){return`${t.field.canonicalString()} (${t.dir})`}(t))).join(", ")}]`),t.startAt&&(e+=", startAt: ",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map((t=>ho(t))).join(",")),t.endAt&&(e+=", endAt: ",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map((t=>ho(t))).join(",")),`Target(${e})`}(fa(t))}; limitType=${t.limitType})`}function _a(t,e){return e.isFoundDocument()&&function(t,e){const n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Fr.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(const n of da(t))if(!n.field.isKeyField()&&null===e.data.field(n.field))return!1;return!0}(t,e)&&function(t,e){for(const n of t.filters)if(!n.matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!function(t,e,n){const i=Lo(t,e,n);return t.inclusive?i<=0:i<0}(t.startAt,da(t),e))&&!(t.endAt&&!function(t,e,n){const i=Lo(t,e,n);return t.inclusive?i>=0:i>0}(t.endAt,da(t),e))}(t,e)}function ba(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function xa(t){return(e,n)=>{let i=!1;for(const r of da(t)){const t=Ea(r,e,n);if(0!==t)return t;i=i||r.field.isKeyField()}return 0}}function Ea(t,e,n){const i=t.field.isKeyField()?Fr.comparator(e.key,n.key):function(t,e,n){const i=e.data.field(t),r=n.data.field(t);return null!==i&&null!==r?co(i,r):ir()}(t.field,e,n);switch(t.dir){case"asc":return i;case"desc":return-1*i;default:return ir()}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(const[i,r]of n)if(this.equalsFn(i,t))return r}has(t){return void 0!==this.get(t)}set(t,e){const n=this.mapKeyFn(t),i=this.inner[n];if(void 0===i)return this.inner[n]=[[t,e]],void this.innerSize++;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return void(i[r]=[t,e]);i.push([t,e]),this.innerSize++}delete(t){const e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(let i=0;i<n.length;i++)if(this.equalsFn(n[i][0],t))return 1===n.length?delete this.inner[e]:n.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ks(this.inner,((e,n)=>{for(const[i,r]of n)t(i,r)}))}isEmpty(){return Ds(this.inner)}size(){return this.innerSize}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sa=new Us(Fr.comparator);function Ba(){return Sa}const Ta=new Us(Fr.comparator);function Ia(...t){let e=Ta;for(const n of t)e=e.insert(n.key,n);return e}function Fa(t){let e=Ta;return t.forEach(((t,n)=>e=e.insert(t,n.overlayedDocument))),e}function La(){return Ma()}function Ra(){return Ma()}function Ma(){return new Ca((t=>t.toString()),((t,e)=>t.isEqual(e)))}const Pa=new Us(Fr.comparator),Na=new Hs(Fr.comparator);function Oa(...t){let e=Na;for(const n of t)e=e.add(n);return e}const ka=new Hs(_r);function Da(){return ka}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ss(e)?"-0":e}}function Qa(t){return{integerValue:""+t}}function Ga(t,e){return os(e)?Qa(e):Ua(t,e)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this._=void 0}}function Va(t,e,n){return t instanceof za?function(t,e){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&Js(e)&&(e=to(e)),e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Ka?qa(t,e):t instanceof $a?Xa(t,e):function(t,e){const n=Wa(t,e),i=Za(n)+Za(t.Ie);return go(n)&&go(t.Ie)?Qa(i):Ua(t.serializer,i)}(t,e)}function ja(t,e,n){return t instanceof Ka?qa(t,e):t instanceof $a?Xa(t,e):n}function Wa(t,e){return t instanceof Ya?function(t){return go(t)||function(t){return!!t&&"doubleValue"in t}(t)}(e)?e:{integerValue:0}:null}class za extends Ha{}class Ka extends Ha{constructor(t){super(),this.elements=t}}function qa(t,e){const n=Ja(e);for(const i of t.elements)n.some((t=>ao(t,i)))||n.push(i);return{arrayValue:{values:n}}}class $a extends Ha{constructor(t){super(),this.elements=t}}function Xa(t,e){let n=Ja(e);for(const i of t.elements)n=n.filter((t=>!ao(t,i)));return{arrayValue:{values:n}}}class Ya extends Ha{constructor(t,e){super(),this.serializer=t,this.Ie=e}}function Za(t){return Ys(t.integerValue||t.doubleValue)}function Ja(t){return mo(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(t,e){this.field=t,this.transform=e}}function el(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Ka&&e instanceof Ka||t instanceof $a&&e instanceof $a?br(t.elements,e.elements,ao):t instanceof Ya&&e instanceof Ya?ao(t.Ie,e.Ie):t instanceof za&&e instanceof za}(t.transform,e.transform)}class nl{constructor(t,e){this.version=t,this.transformResults=e}}class il{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new il}static exists(t){return new il(void 0,t)}static updateTime(t){return new il(t)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function rl(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}class sl{}function ol(t,e){if(!t.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return t.isNoDocument()?new gl(t.key,il.none()):new hl(t.key,t.data,il.none());{const n=t.data,i=Bo.empty();let r=new Hs(Ir.comparator);for(let t of e.fields)if(!r.has(t)){let e=n.field(t);null===e&&t.length>1&&(t=t.popLast(),e=n.field(t)),null===e?i.delete(t):i.set(t,e),r=r.add(t)}return new Al(t.key,i,new Ws(r.toArray()),il.none())}}function al(t,e,n){t instanceof hl?function(t,e,n){const i=t.value.clone(),r=fl(t.fieldTransforms,e,n.transformResults);i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(t,e,n):t instanceof Al?function(t,e,n){if(!rl(t.precondition,e))return void e.convertToUnknownDocument(n.version);const i=fl(t.fieldTransforms,e,n.transformResults),r=e.data;r.setAll(dl(t)),r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ll(t,e,n,i){return t instanceof hl?function(t,e,n,i){if(!rl(t.precondition,e))return n;const r=t.value.clone(),s=pl(t.fieldTransforms,i,e);return r.setAll(s),e.convertToFoundDocument(e.version,r).setHasLocalMutations(),null}(t,e,n,i):t instanceof Al?function(t,e,n,i){if(!rl(t.precondition,e))return n;const r=pl(t.fieldTransforms,i,e),s=e.data;return s.setAll(dl(t)),s.setAll(r),e.convertToFoundDocument(e.version,s).setHasLocalMutations(),null===n?null:n.unionWith(t.fieldMask.fields).unionWith(t.fieldTransforms.map((t=>t.field)))}(t,e,n,i):function(t,e,n){return rl(t.precondition,e)?(e.convertToNoDocument(e.version).setHasLocalMutations(),null):n}(t,e,n)}function cl(t,e){let n=null;for(const i of t.fieldTransforms){const t=e.data.field(i.field),r=Wa(i.transform,t||null);null!=r&&(null===n&&(n=Bo.empty()),n.set(i.field,r))}return n||null}function ul(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&br(t,e,((t,e)=>el(t,e)))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class hl extends sl{constructor(t,e,n,i=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Al extends sl{constructor(t,e,n,i,r=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=i,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function dl(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const i=t.data.field(n);e.set(n,i)}})),e}function fl(t,e,n){const i=new Map;rr(t.length===n.length);for(let r=0;r<n.length;r++){const s=t[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,ja(o,a,n[r]))}return i}function pl(t,e,n){const i=new Map;for(const r of t){const t=r.transform,s=n.data.field(r.field);i.set(r.field,Va(t,s,e))}return i}class gl extends sl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class ml extends sl{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vl{constructor(t,e,n,i){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=i}applyToRemoteDocument(t,e){const n=e.mutationResults;for(let i=0;i<this.mutations.length;i++){const e=this.mutations[i];e.key.isEqual(t.key)&&al(e,t,n[i])}}applyToLocalView(t,e){for(const n of this.baseMutations)n.key.isEqual(t.key)&&(e=ll(n,t,e,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(t.key)&&(e=ll(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){const n=Ra();return this.mutations.forEach((i=>{const r=t.get(i.key),s=r.overlayedDocument;let o=this.applyToLocalView(s,r.mutatedFields);o=e.has(i.key)?null:o;const a=ol(s,o);null!==a&&n.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(Cr.min())})),n}keys(){return this.mutations.reduce(((t,e)=>t.add(e.key)),Oa())}isEqual(t){return this.batchId===t.batchId&&br(this.mutations,t.mutations,((t,e)=>ul(t,e)))&&br(this.baseMutations,t.baseMutations,((t,e)=>ul(t,e)))}}class yl{constructor(t,e,n,i){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=i}static from(t,e,n){rr(t.mutations.length===n.length);let i=function(){return Pa}();const r=t.mutations;for(let s=0;s<r.length;s++)i=i.insert(r[s].key,n[s].version);return new yl(t,e,n,i)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return null!==t&&this.mutation===t.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _l{constructor(t,e,n){this.alias=t,this.aggregateType=e,this.fieldPath=n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t,e){this.count=t,this.unchangedNames=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xl,El;function Cl(t){switch(t){default:return ir();case ar.CANCELLED:case ar.UNKNOWN:case ar.DEADLINE_EXCEEDED:case ar.RESOURCE_EXHAUSTED:case ar.INTERNAL:case ar.UNAVAILABLE:case ar.UNAUTHENTICATED:return!1;case ar.INVALID_ARGUMENT:case ar.NOT_FOUND:case ar.ALREADY_EXISTS:case ar.PERMISSION_DENIED:case ar.FAILED_PRECONDITION:case ar.ABORTED:case ar.OUT_OF_RANGE:case ar.UNIMPLEMENTED:case ar.DATA_LOSS:return!0}}function Sl(t){if(void 0===t)return tr("GRPC error has no .code"),ar.UNKNOWN;switch(t){case xl.OK:return ar.OK;case xl.CANCELLED:return ar.CANCELLED;case xl.UNKNOWN:return ar.UNKNOWN;case xl.DEADLINE_EXCEEDED:return ar.DEADLINE_EXCEEDED;case xl.RESOURCE_EXHAUSTED:return ar.RESOURCE_EXHAUSTED;case xl.INTERNAL:return ar.INTERNAL;case xl.UNAVAILABLE:return ar.UNAVAILABLE;case xl.UNAUTHENTICATED:return ar.UNAUTHENTICATED;case xl.INVALID_ARGUMENT:return ar.INVALID_ARGUMENT;case xl.NOT_FOUND:return ar.NOT_FOUND;case xl.ALREADY_EXISTS:return ar.ALREADY_EXISTS;case xl.PERMISSION_DENIED:return ar.PERMISSION_DENIED;case xl.FAILED_PRECONDITION:return ar.FAILED_PRECONDITION;case xl.ABORTED:return ar.ABORTED;case xl.OUT_OF_RANGE:return ar.OUT_OF_RANGE;case xl.UNIMPLEMENTED:return ar.UNIMPLEMENTED;case xl.DATA_LOSS:return ar.DATA_LOSS;default:return ir()}}(El=xl||(xl={}))[El.OK=0]="OK",El[El.CANCELLED=1]="CANCELLED",El[El.UNKNOWN=2]="UNKNOWN",El[El.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",El[El.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",El[El.NOT_FOUND=5]="NOT_FOUND",El[El.ALREADY_EXISTS=6]="ALREADY_EXISTS",El[El.PERMISSION_DENIED=7]="PERMISSION_DENIED",El[El.UNAUTHENTICATED=16]="UNAUTHENTICATED",El[El.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",El[El.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",El[El.ABORTED=10]="ABORTED",El[El.OUT_OF_RANGE=11]="OUT_OF_RANGE",El[El.UNIMPLEMENTED=12]="UNIMPLEMENTED",El[El.INTERNAL=13]="INTERNAL",El[El.UNAVAILABLE=14]="UNAVAILABLE",El[El.DATA_LOSS=15]="DATA_LOSS";
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
let Bl=null;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(){return new TextEncoder}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new zi([4294967295,4294967295],0);function Fl(t){const e=Tl().encode(t),n=new Wi;return n.update(e),new Uint8Array(n.digest())}function Ll(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new zi([n,i],0),new zi([r,s],0)]}class Rl{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new Ml(`Invalid padding: ${e}`);if(n<0)throw new Ml(`Invalid hash count: ${n}`);if(t.length>0&&0===this.hashCount)throw new Ml(`Invalid hash count: ${n}`);if(0===t.length&&0!==e)throw new Ml(`Invalid padding when bitmap length is 0: ${e}`);this.Te=8*t.length-e,this.Ee=zi.fromNumber(this.Te)}de(t,e,n){let i=t.add(e.multiply(zi.fromNumber(n)));return 1===i.compare(Il)&&(i=new zi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ee).toNumber()}Ae(t){return 0!=(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(0===this.Te)return!1;const e=Fl(t),[n,i]=Ll(e);for(let r=0;r<this.hashCount;r++){const t=this.de(n,i,r);if(!this.Ae(t))return!1}return!0}static create(t,e,n){const i=t%8==0?0:8-t%8,r=new Uint8Array(Math.ceil(t/8)),s=new Rl(r,i,e);return n.forEach((t=>s.insert(t))),s}insert(t){if(0===this.Te)return;const e=Fl(t),[n,i]=Ll(e);for(let r=0;r<this.hashCount;r++){const t=this.de(n,i,r);this.Re(t)}}Re(t){const e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}}class Ml extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(t,e,n,i,r){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=i,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(t,e,n){const i=new Map;return i.set(t,Nl.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new Pl(Cr.min(),i,new Us(_r),Ba(),Oa())}}class Nl{constructor(t,e,n,i,r){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=i,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new Nl(n,e,Oa(),Oa(),Oa())}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol{constructor(t,e,n,i){this.Ve=t,this.removedTargetIds=e,this.key=n,this.me=i}}class kl{constructor(t,e){this.targetId=t,this.fe=e}}class Dl{constructor(t,e,n=qs.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=i}}class Ul{constructor(){this.ge=0,this.pe=Hl(),this.ye=qs.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return 0!==this.ge}get De(){return this.Se}Ce(t){t.approximateByteSize()>0&&(this.Se=!0,this.ye=t)}ve(){let t=Oa(),e=Oa(),n=Oa();return this.pe.forEach(((i,r)=>{switch(r){case 0:t=t.add(i);break;case 2:e=e.add(i);break;case 1:n=n.add(i);break;default:ir()}})),new Nl(this.ye,this.we,t,e,n)}Fe(){this.Se=!1,this.pe=Hl()}Me(t,e){this.Se=!0,this.pe=this.pe.insert(t,e)}xe(t){this.Se=!0,this.pe=this.pe.remove(t)}Oe(){this.ge+=1}Ne(){this.ge-=1,rr(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class Ql{constructor(t){this.Le=t,this.ke=new Map,this.qe=Ba(),this.Qe=Gl(),this.Ke=new Us(_r)}$e(t){for(const e of t.Ve)t.me&&t.me.isFoundDocument()?this.Ue(e,t.me):this.We(e,t.key,t.me);for(const e of t.removedTargetIds)this.We(e,t.key,t.me)}Ge(t){this.forEachTarget(t,(e=>{const n=this.ze(e);switch(t.state){case 0:this.je(e)&&n.Ce(t.resumeToken);break;case 1:n.Ne(),n.be||n.Fe(),n.Ce(t.resumeToken);break;case 2:n.Ne(),n.be||this.removeTarget(e);break;case 3:this.je(e)&&(n.Be(),n.Ce(t.resumeToken));break;case 4:this.je(e)&&(this.He(e),n.Ce(t.resumeToken));break;default:ir()}}))}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.ke.forEach(((t,n)=>{this.je(n)&&e(n)}))}Je(t){const e=t.targetId,n=t.fe.count,i=this.Ye(e);if(i){const r=i.target;if(ra(r))if(0===n){const t=new Fr(r.path);this.We(e,t,Io.newNoDocument(t,Cr.min()))}else rr(1===n);else{const i=this.Ze(e);if(i!==n){const n=this.Xe(t),r=n?this.et(n,t,i):1;if(0!==r){this.He(e);const t=2===r?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(e,t)}null==Bl||Bl.tt(function(t,e,n,i,r){var s,o,a,l,c,u;const h={localCacheCount:t,existenceFilterCount:e.count,databaseId:n.database,projectId:n.projectId},A=e.unchangedNames;return A&&(h.bloomFilter={applied:0===r,hashCount:null!==(s=null==A?void 0:A.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(a=null===(o=null==A?void 0:A.bits)||void 0===o?void 0:o.bitmap)||void 0===a?void 0:a.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==A?void 0:A.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:t=>{var e;return null!==(e=null==i?void 0:i.mightContain(t))&&void 0!==e&&e}}),h}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i,t.fe,this.Le.nt(),n,r))}}}}Xe(t){const e=t.fe.unchangedNames;if(!e||!e.bits)return null;const{bits:{bitmap:n="",padding:i=0},hashCount:r=0}=e;let s,o;try{s=Zs(n).toUint8Array()}catch(t){if(t instanceof zs)return er("Decoding the base64 bloom filter in existence filter failed ("+t.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw t}try{o=new Rl(s,i,r)}catch(t){return er(t instanceof Ml?"BloomFilter error: ":"Applying bloom filter failed: ",t),null}return 0===o.Te?null:o}et(t,e,n){return e.fe.count===n-this.rt(t,e.targetId)?0:2}rt(t,e){const n=this.Le.getRemoteKeysForTarget(e);let i=0;return n.forEach((n=>{const r=this.Le.nt(),s=`projects/${r.projectId}/databases/${r.database}/documents/${n.path.canonicalString()}`;t.mightContain(s)||(this.We(e,n,null),i++)})),i}it(t){const e=new Map;this.ke.forEach(((n,i)=>{const r=this.Ye(i);if(r){if(n.current&&ra(r.target)){const e=new Fr(r.target.path);null!==this.qe.get(e)||this.st(i,e)||this.We(i,e,Io.newNoDocument(e,t))}n.De&&(e.set(i,n.ve()),n.Fe())}}));let n=Oa();this.Qe.forEach(((t,e)=>{let i=!0;e.forEachWhile((t=>{const e=this.Ye(t);return!e||"TargetPurposeLimboResolution"===e.purpose||(i=!1,!1)})),i&&(n=n.add(t))})),this.qe.forEach(((e,n)=>n.setReadTime(t)));const i=new Pl(t,e,this.Ke,this.qe,n);return this.qe=Ba(),this.Qe=Gl(),this.Ke=new Us(_r),i}Ue(t,e){if(!this.je(t))return;const n=this.st(t,e.key)?2:0;this.ze(t).Me(e.key,n),this.qe=this.qe.insert(e.key,e),this.Qe=this.Qe.insert(e.key,this.ot(e.key).add(t))}We(t,e,n){if(!this.je(t))return;const i=this.ze(t);this.st(t,e)?i.Me(e,1):i.xe(e),this.Qe=this.Qe.insert(e,this.ot(e).delete(t)),n&&(this.qe=this.qe.insert(e,n))}removeTarget(t){this.ke.delete(t)}Ze(t){const e=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}Oe(t){this.ze(t).Oe()}ze(t){let e=this.ke.get(t);return e||(e=new Ul,this.ke.set(t,e)),e}ot(t){let e=this.Qe.get(t);return e||(e=new Hs(_r),this.Qe=this.Qe.insert(t,e)),e}je(t){const e=null!==this.Ye(t);return e||Ji("WatchChangeAggregator","Detected inactive target",t),e}Ye(t){const e=this.ke.get(t);return e&&e.be?null:this.Le._t(t)}He(t){this.ke.set(t,new Ul),this.Le.getRemoteKeysForTarget(t).forEach((e=>{this.We(t,e,null)}))}st(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}}function Gl(){return new Us(Fr.comparator)}function Hl(){return new Us(Fr.comparator)}const Vl=(()=>{const t={asc:"ASCENDING",desc:"DESCENDING"};return t})(),jl=(()=>{const t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};return t})(),Wl=(()=>{const t={and:"AND",or:"OR"};return t})();class zl{constructor(t,e){this.databaseId=t,this.useProto3Json=e}}function Kl(t,e){return t.useProto3Json||rs(e)?e:{value:e}}function ql(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function $l(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Xl(t,e){return ql(t,e.toTimestamp())}function Yl(t){return rr(!!t),Cr.fromTimestamp(function(t){const e=Xs(t);return new Er(e.seconds,e.nanos)}(t))}function Zl(t,e){return Jl(t,e).canonicalString()}function Jl(t,e){const n=function(t){return new Br(["projects",t.projectId,"databases",t.database])}(t).child("documents");return void 0===e?n:n.child(e)}function tc(t){const e=Br.fromString(t);return rr(Sc(e)),e}function ec(t,e){return Zl(t.databaseId,e.path)}function nc(t,e){const n=tc(e);if(n.get(1)!==t.databaseId.projectId)throw new lr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new lr(ar.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Fr(oc(n))}function ic(t,e){return Zl(t.databaseId,e)}function rc(t){const e=tc(t);return 4===e.length?Br.emptyPath():oc(e)}function sc(t){return new Br(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oc(t){return rr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function ac(t,e,n){return{name:ec(t,e),fields:n.value.mapValue.fields}}function lc(t,e,n){const i=nc(t,e.name),r=Yl(e.updateTime),s=e.createTime?Yl(e.createTime):Cr.min(),o=new Bo({mapValue:{fields:e.fields}}),a=Io.newFoundDocument(i,r,s,o);return n&&a.setHasCommittedMutations(),n?a.setHasCommittedMutations():a}function cc(t,e){return"found"in e?function(t,e){rr(!!e.found),e.found.name,e.found.updateTime;const n=nc(t,e.found.name),i=Yl(e.found.updateTime),r=e.found.createTime?Yl(e.found.createTime):Cr.min(),s=new Bo({mapValue:{fields:e.found.fields}});return Io.newFoundDocument(n,i,r,s)}(t,e):"missing"in e?function(t,e){rr(!!e.missing),rr(!!e.readTime);const n=nc(t,e.missing),i=Yl(e.readTime);return Io.newNoDocument(n,i)}(t,e):ir()}function uc(t,e){let n;if("targetChange"in e){e.targetChange;const i=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:ir()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(t,e){return t.useProto3Json?(rr(void 0===e||"string"==typeof e),qs.fromBase64String(e||"")):(rr(void 0===e||e instanceof Uint8Array),qs.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(t){const e=void 0===t.code?ar.UNKNOWN:Sl(t.code);return new lr(e,t.message||"")}(o);n=new Dl(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=nc(t,i.document.name),s=Yl(i.document.updateTime),o=i.document.createTime?Yl(i.document.createTime):Cr.min(),a=new Bo({mapValue:{fields:i.document.fields}}),l=Io.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];n=new Ol(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=nc(t,i.document),s=i.readTime?Yl(i.readTime):Cr.min(),o=Io.newNoDocument(r,s),a=i.removedTargetIds||[];n=new Ol([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=nc(t,i.document),s=i.removedTargetIds||[];n=new Ol([],s,r,null)}else{if(!("filter"in e))return ir();{e.filter;const t=e.filter;t.targetId;const{count:i=0,unchangedNames:r}=t,s=new bl(i,r),o=t.targetId;n=new kl(o,s)}}return n}function hc(t,e){let n;if(e instanceof hl)n={update:ac(t,e.key,e.value)};else if(e instanceof gl)n={delete:ec(t,e.key)};else if(e instanceof Al)n={update:ac(t,e.key,e.data),updateMask:Cc(e.fieldMask)};else{if(!(e instanceof ml))return ir();n={verify:ec(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((t=>function(t,e){const n=e.transform;if(n instanceof za)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ka)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof $a)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ya)return{fieldPath:e.field.canonicalString(),increment:n.Ie};throw ir()}(0,t)))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Xl(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:ir()}(t,e.precondition)),n}function Ac(t,e){const n=e.currentDocument?function(t){return void 0!==t.updateTime?il.updateTime(Yl(t.updateTime)):void 0!==t.exists?il.exists(t.exists):il.none()}(e.currentDocument):il.none(),i=e.updateTransforms?e.updateTransforms.map((e=>function(t,e){let n=null;if("setToServerValue"in e)rr("REQUEST_TIME"===e.setToServerValue),n=new za;else if("appendMissingElements"in e){const t=e.appendMissingElements.values||[];n=new Ka(t)}else if("removeAllFromArray"in e){const t=e.removeAllFromArray.values||[];n=new $a(t)}else"increment"in e?n=new Ya(t,e.increment):ir();const i=Ir.fromServerFormat(e.fieldPath);return new tl(i,n)}(t,e))):[];if(e.update){e.update.name;const r=nc(t,e.update.name),s=new Bo({mapValue:{fields:e.update.fields}});if(e.updateMask){const t=function(t){const e=t.fieldPaths||[];return new Ws(e.map((t=>Ir.fromServerFormat(t))))}(e.updateMask);return new Al(r,s,t,n,i)}return new hl(r,s,n,i)}if(e.delete){const i=nc(t,e.delete);return new gl(i,n)}if(e.verify){const i=nc(t,e.verify);return new ml(i,n)}return ir()}function dc(t,e){return t&&t.length>0?(rr(void 0!==e),t.map((t=>function(t,e){let n=t.updateTime?Yl(t.updateTime):Yl(e);return n.isEqual(Cr.min())&&(n=Yl(e)),new nl(n,t.transformResults||[])}(t,e)))):[]}function fc(t,e){return{documents:[ic(t,e.path)]}}function pc(t,e){const n={structuredQuery:{}},i=e.path;let r;null!==e.collectionGroup?(r=i,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),n.structuredQuery.from=[{collectionId:i.lastSegment()}]),n.parent=ic(t,r);const s=function(t){if(0!==t.length)return Ec(ko.create(t,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(t){if(0!==t.length)return t.map((t=>function(t){return{field:bc(t.field),direction:yc(t.dir)}}(t)))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=Kl(t,e.limit);return null!==a&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(t){return{before:t.inclusive,values:t.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(t){return{before:!t.inclusive,values:t.position}}(e.endAt)),{ut:n,parent:r}}function gc(t){let e=rc(t.parent);const n=t.structuredQuery,i=n.from?n.from.length:0;let r=null;if(i>0){rr(1===i);const t=n.from[0];t.allDescendants?r=t.collectionId:e=e.child(t.collectionId)}let s=[];n.where&&(s=function(t){const e=vc(t);return e instanceof ko&&Qo(e)?e.getFilters():[e]}(n.where));let o=[];n.orderBy&&(o=function(t){return t.map((t=>function(t){return new Mo(xc(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)))}(n.orderBy));let a=null;n.limit&&(a=function(t){let e;return e="object"==typeof t?t.value:t,rs(e)?null:e}(n.limit));let l=null;n.startAt&&(l=function(t){const e=!!t.before,n=t.values||[];return new Fo(n,e)}(n.startAt));let c=null;return n.endAt&&(c=function(t){const e=!t.before,n=t.values||[];return new Fo(n,e)}(n.endAt)),ca(e,r,o,s,a,"F",l,c)}function mc(t,e){const n=function(t){switch(t){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ir()}}(e.purpose);return null==n?null:{"goog-listen-tags":n}}function vc(t){return void 0!==t.unaryFilter?function(t){switch(t.unaryFilter.op){case"IS_NAN":const e=xc(t.unaryFilter.field);return Oo.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=xc(t.unaryFilter.field);return Oo.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=xc(t.unaryFilter.field);return Oo.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const r=xc(t.unaryFilter.field);return Oo.create(r,"!=",{nullValue:"NULL_VALUE"});default:return ir()}}(t):void 0!==t.fieldFilter?function(t){return Oo.create(xc(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ir()}}(t.fieldFilter.op),t.fieldFilter.value)}(t):void 0!==t.compositeFilter?function(t){return ko.create(t.compositeFilter.filters.map((t=>vc(t))),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ir()}}(t.compositeFilter.op))}(t):ir()}function yc(t){return Vl[t]}function wc(t){return jl[t]}function _c(t){return Wl[t]}function bc(t){return{fieldPath:t.canonicalString()}}function xc(t){return Ir.fromServerFormat(t.fieldPath)}function Ec(t){return t instanceof Oo?function(t){if("=="===t.op){if(yo(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NAN"}};if(vo(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(yo(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NAN"}};if(vo(t.value))return{unaryFilter:{field:bc(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:bc(t.field),op:wc(t.op),value:t.value}}}(t):t instanceof ko?function(t){const e=t.getFilters().map((t=>Ec(t)));return 1===e.length?e[0]:{compositeFilter:{op:_c(t.op),filters:e}}}(t):ir()}function Cc(t){const e=[];return t.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Sc(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(t,e,n,i,r=Cr.min(),s=Cr.min(),o=qs.EMPTY_BYTE_STRING,a=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=i,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=o,this.expectedCount=a}withSequenceNumber(t){return new Bc(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Bc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(t){this.ct=t}}function Ic(t,e){let n;if(e.document)n=lc(t.ct,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const t=Fr.fromSegments(e.noDocument.path),i=Mc(e.noDocument.readTime);n=Io.newNoDocument(t,i),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return ir();{const t=Fr.fromSegments(e.unknownDocument.path),i=Mc(e.unknownDocument.version);n=Io.newUnknownDocument(t,i)}}return e.readTime&&n.setReadTime(function(t){const e=new Er(t[0],t[1]);return Cr.fromTimestamp(e)}(e.readTime)),n}function Fc(t,e){const n=e.key,i={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Lc(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())i.document=function(t,e){return{name:ec(t,e.key),fields:e.data.value.mapValue.fields,updateTime:ql(t,e.version.toTimestamp()),createTime:ql(t,e.createTime.toTimestamp())}}(t.ct,e);else if(e.isNoDocument())i.noDocument={path:n.path.toArray(),readTime:Rc(e.version)};else{if(!e.isUnknownDocument())return ir();i.unknownDocument={path:n.path.toArray(),version:Rc(e.version)}}return i}function Lc(t){const e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Rc(t){const e=t.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mc(t){const e=new Er(t.seconds,t.nanoseconds);return Cr.fromTimestamp(e)}function Pc(t,e){const n=(e.baseMutations||[]).map((e=>Ac(t.ct,e)));for(let s=0;s<e.mutations.length-1;++s){const t=e.mutations[s];if(s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform){const n=e.mutations[s+1];t.updateTransforms=n.transform.fieldTransforms,e.mutations.splice(s+1,1),++s}}const i=e.mutations.map((e=>Ac(t.ct,e))),r=Er.fromMillis(e.localWriteTimeMs);return new vl(e.batchId,r,n,i)}function Nc(t){const e=Mc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Mc(t.lastLimboFreeSnapshotVersion):Cr.min();let i;return i=function(t){return void 0!==t.documents}(t.query)?function(t){return rr(1===t.documents.length),fa(ua(rc(t.documents[0])))}(t.query):function(t){return fa(gc(t))}(t.query),new Bc(i,t.targetId,"TargetPurposeListen",t.lastListenSequenceNumber,e,n,qs.fromBase64String(t.resumeToken))}function Oc(t,e){const n=Rc(e.snapshotVersion),i=Rc(e.lastLimboFreeSnapshotVersion);let r;r=ra(e.target)?fc(t.ct,e.target):pc(t.ct,e.target).ut;const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:na(e.target),readTime:n,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:r}}function kc(t){const e=gc({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?ma(e,e.limit,"L"):e}function Dc(t,e){return new wl(e.largestBatchId,Ac(t.ct,e.overlayMutation))}function Uc(t,e){const n=e.path.lastSegment();return[t,as(e.path.popLast()),n]}function Qc(t,e,n,i){return{indexId:t,uid:e,sequenceNumber:n,readTime:Rc(i.readTime),documentKey:as(i.documentKey.path),largestBatchId:i.largestBatchId}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc{getBundleMetadata(t,e){return Hc(t).get(e).next((t=>{if(t)return function(t){return{id:t.bundleId,createTime:Mc(t.createTime),version:t.version}}(t)}))}saveBundleMetadata(t,e){return Hc(t).put(function(t){return{bundleId:t.id,createTime:Rc(Yl(t.createTime)),version:t.version}}(e))}getNamedQuery(t,e){return Vc(t).get(e).next((t=>{if(t)return function(t){return{name:t.name,query:kc(t.bundledQuery),readTime:Mc(t.readTime)}}(t)}))}saveNamedQuery(t,e){return Vc(t).put(function(t){return{name:t.name,readTime:Rc(Yl(t.readTime)),bundledQuery:t.bundledQuery}}(e))}}function Hc(t){return Ns(t,"bundles")}function Vc(t){return Ns(t,"namedQueries")}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(t,e){this.serializer=t,this.userId=e}static lt(t,e){const n=e.uid||"";return new jc(t,n)}getOverlay(t,e){return Wc(t).get(Uc(this.userId,e)).next((t=>t?Dc(this.serializer,t):null))}getOverlays(t,e){const n=La();return Wr.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){const i=[];return n.forEach(((n,r)=>{const s=new wl(e,r);i.push(this.ht(t,s))})),Wr.waitFor(i)}removeOverlaysForBatchId(t,e,n){const i=new Set;e.forEach((t=>i.add(as(t.getCollectionPath()))));const r=[];return i.forEach((e=>{const i=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,n+1],!1,!0);r.push(Wc(t).H("collectionPathOverlayIndex",i))})),Wr.waitFor(r)}getOverlaysForCollection(t,e,n){const i=La(),r=as(e),s=IDBKeyRange.bound([this.userId,r,n],[this.userId,r,Number.POSITIVE_INFINITY],!0);return Wc(t).W("collectionPathOverlayIndex",s).next((t=>{for(const e of t){const t=Dc(this.serializer,e);i.set(t.getKey(),t)}return i}))}getOverlaysForCollectionGroup(t,e,n,i){const r=La();let s;const o=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Wc(t).Y({index:"collectionGroupOverlayIndex",range:o},((t,e,n)=>{const o=Dc(this.serializer,e);r.size()<i||o.largestBatchId===s?(r.set(o.getKey(),o),s=o.largestBatchId):n.done()})).next((()=>r))}ht(t,e){return Wc(t).put(function(t,e,n){const[i,r,s]=Uc(e,n.mutation.key);return{userId:e,collectionPath:r,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:hc(t.ct,n.mutation)}}(this.serializer,this.userId,e))}}function Wc(t){return Ns(t,"documentOverlays")}
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(){}Pt(t,e){this.It(t,e),e.Tt()}It(t,e){if("nullValue"in t)this.Et(e,5);else if("booleanValue"in t)this.Et(e,10),e.dt(t.booleanValue?1:0);else if("integerValue"in t)this.Et(e,15),e.dt(Ys(t.integerValue));else if("doubleValue"in t){const n=Ys(t.doubleValue);isNaN(n)?this.Et(e,13):(this.Et(e,15),ss(n)?e.dt(0):e.dt(n))}else if("timestampValue"in t){const n=t.timestampValue;this.Et(e,20),"string"==typeof n?e.At(n):(e.At(`${n.seconds||""}`),e.dt(n.nanos||0))}else if("stringValue"in t)this.Rt(t.stringValue,e),this.Vt(e);else if("bytesValue"in t)this.Et(e,30),e.ft(Zs(t.bytesValue)),this.Vt(e);else if("referenceValue"in t)this.gt(t.referenceValue,e);else if("geoPointValue"in t){const n=t.geoPointValue;this.Et(e,45),e.dt(n.latitude||0),e.dt(n.longitude||0)}else"mapValue"in t?bo(t)?this.Et(e,Number.MAX_SAFE_INTEGER):(this.yt(t.mapValue,e),this.Vt(e)):"arrayValue"in t?(this.wt(t.arrayValue,e),this.Vt(e)):ir()}Rt(t,e){this.Et(e,25),this.St(t,e)}St(t,e){e.At(t)}yt(t,e){const n=t.fields||{};this.Et(e,55);for(const i of Object.keys(n))this.Rt(i,e),this.It(n[i],e)}wt(t,e){const n=t.values||[];this.Et(e,50);for(const i of n)this.It(i,e)}gt(t,e){this.Et(e,37),Fr.fromName(t).path.forEach((t=>{this.Et(e,60),this.St(t,e)}))}Et(t,e){t.dt(e)}Vt(t){t.dt(2)}}function Kc(t){if(0===t)return 8;let e=0;return t>>4==0&&(e+=4,t<<=4),t>>6==0&&(e+=2,t<<=2),t>>7==0&&(e+=1),e}function qc(t){const e=64-function(t){let e=0;for(let n=0;n<8;++n){const i=Kc(255&t[n]);if(e+=i,8!==i)break}return e}(t);return Math.ceil(e/8)}zc.bt=new zc;class $c{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Dt(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Ct(n.value),n=e.next();this.vt()}Ft(t){const e=t[Symbol.iterator]();let n=e.next();for(;!n.done;)this.Mt(n.value),n=e.next();this.xt()}Ot(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Ct(t);else if(t<2048)this.Ct(960|t>>>6),this.Ct(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Ct(480|t>>>12),this.Ct(128|63&t>>>6),this.Ct(128|63&t);else{const t=e.codePointAt(0);this.Ct(240|t>>>18),this.Ct(128|63&t>>>12),this.Ct(128|63&t>>>6),this.Ct(128|63&t)}}this.vt()}Nt(t){for(const e of t){const t=e.charCodeAt(0);if(t<128)this.Mt(t);else if(t<2048)this.Mt(960|t>>>6),this.Mt(128|63&t);else if(e<"\ud800"||"\udbff"<e)this.Mt(480|t>>>12),this.Mt(128|63&t>>>6),this.Mt(128|63&t);else{const t=e.codePointAt(0);this.Mt(240|t>>>18),this.Mt(128|63&t>>>12),this.Mt(128|63&t>>>6),this.Mt(128|63&t)}}this.xt()}Bt(t){const e=this.Lt(t),n=qc(e);this.kt(1+n),this.buffer[this.position++]=255&n;for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=255&e[i]}qt(t){const e=this.Lt(t),n=qc(e);this.kt(1+n),this.buffer[this.position++]=~(255&n);for(let i=e.length-n;i<e.length;++i)this.buffer[this.position++]=~(255&e[i])}Qt(){this.Kt(255),this.Kt(255)}$t(){this.Ut(255),this.Ut(255)}reset(){this.position=0}seed(t){this.kt(t.length),this.buffer.set(t,this.position),this.position+=t.length}Wt(){return this.buffer.slice(0,this.position)}Lt(t){const e=function(t){const e=new DataView(new ArrayBuffer(8));return e.setFloat64(0,t,!1),new Uint8Array(e.buffer)}(t),n=0!=(128&e[0]);e[0]^=n?255:128;for(let i=1;i<e.length;++i)e[i]^=n?255:0;return e}Ct(t){const e=255&t;0===e?(this.Kt(0),this.Kt(255)):255===e?(this.Kt(255),this.Kt(0)):this.Kt(e)}Mt(t){const e=255&t;0===e?(this.Ut(0),this.Ut(255)):255===e?(this.Ut(255),this.Ut(0)):this.Ut(t)}vt(){this.Kt(0),this.Kt(1)}xt(){this.Ut(0),this.Ut(1)}Kt(t){this.kt(1),this.buffer[this.position++]=t}Ut(t){this.kt(1),this.buffer[this.position++]=~t}kt(t){const e=t+this.position;if(e<=this.buffer.length)return;let n=2*this.buffer.length;n<e&&(n=e);const i=new Uint8Array(n);i.set(this.buffer),this.buffer=i}}class Xc{constructor(t){this.Gt=t}ft(t){this.Gt.Dt(t)}At(t){this.Gt.Ot(t)}dt(t){this.Gt.Bt(t)}Tt(){this.Gt.Qt()}}class Yc{constructor(t){this.Gt=t}ft(t){this.Gt.Ft(t)}At(t){this.Gt.Nt(t)}dt(t){this.Gt.qt(t)}Tt(){this.Gt.$t()}}class Zc{constructor(){this.Gt=new $c,this.zt=new Xc(this.Gt),this.jt=new Yc(this.Gt)}seed(t){this.Gt.seed(t)}Ht(t){return 0===t?this.zt:this.jt}Wt(){return this.Gt.Wt()}reset(){this.Gt.reset()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(t,e,n,i){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=i}Jt(){const t=this.directionalValue.length,e=0===t||255===this.directionalValue[t-1]?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new Jc(this.indexId,this.documentKey,this.arrayValue,n)}}function tu(t,e){let n=t.indexId-e.indexId;return 0!==n?n:(n=eu(t.arrayValue,e.arrayValue),0!==n?n:(n=eu(t.directionalValue,e.directionalValue),0!==n?n:Fr.comparator(t.documentKey,e.documentKey)))}function eu(t,e){for(let n=0;n<t.length&&n<e.length;++n){const i=t[n]-e[n];if(0!==i)return i}return t.length-e.length}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nu{constructor(t){this.Yt=new Hs(((t,e)=>Ir.comparator(t.field,e.field))),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Zt=t.orderBy,this.Xt=[];for(const e of t.filters){const t=e;t.isInequality()?this.Yt=this.Yt.add(t):this.Xt.push(t)}}get en(){return this.Yt.size>1}tn(t){if(rr(t.collectionGroup===this.collectionId),this.en)return!1;const e=Rr(t);if(void 0!==e&&!this.nn(e))return!1;const n=Mr(t);let i=new Set,r=0,s=0;for(;r<n.length&&this.nn(n[r]);++r)i=i.add(n[r].fieldPath.canonicalString());if(r===n.length)return!0;if(this.Yt.size>0){const t=this.Yt.getIterator().getNext();if(!i.has(t.field.canonicalString())){const e=n[r];if(!this.rn(t,e)||!this.sn(this.Zt[s++],e))return!1}++r}for(;r<n.length;++r){const t=n[r];if(s>=this.Zt.length||!this.sn(this.Zt[s++],t))return!1}return!0}on(){if(this.en)return null;let t=new Hs(Ir.comparator);const e=[];for(const n of this.Xt)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)e.push(new Nr(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),e.push(new Nr(n.field,0))}for(const n of this.Zt)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),e.push(new Nr(n.field,"asc"===n.dir?0:1)));return new Lr(Lr.UNKNOWN_ID,this.collectionId,e,kr.empty())}nn(t){for(const e of this.Xt)if(this.rn(e,t))return!0;return!1}rn(t,e){if(void 0===t||!t.field.isEqual(e.fieldPath))return!1;const n="array-contains"===t.op||"array-contains-any"===t.op;return 2===e.kind===n}sn(t,e){return!!t.field.isEqual(e.fieldPath)&&(0===e.kind&&"asc"===t.dir||1===e.kind&&"desc"===t.dir)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(t){var e,n;if(rr(t instanceof Oo||t instanceof ko),t instanceof Oo){if(t instanceof Yo){const i=(null===(n=null===(e=t.value.arrayValue)||void 0===e?void 0:e.values)||void 0===n?void 0:n.map((e=>Oo.create(t.field,"==",e))))||[];return ko.create(i,"or")}return t}const i=t.filters.map((t=>iu(t)));return ko.create(i,t.op)}function ru(t){if(0===t.getFilters().length)return[];const e=lu(iu(t));return rr(au(e)),su(e)||ou(e)?[e]:e.getFilters()}function su(t){return t instanceof Oo}function ou(t){return t instanceof ko&&Qo(t)}function au(t){return su(t)||ou(t)||function(t){if(t instanceof ko&&Uo(t)){for(const e of t.getFilters())if(!su(e)&&!ou(e))return!1;return!0}return!1}(t)}function lu(t){if(rr(t instanceof Oo||t instanceof ko),t instanceof Oo)return t;if(1===t.filters.length)return lu(t.filters[0]);const e=t.filters.map((t=>lu(t)));let n=ko.create(e,t.op);return n=hu(n),au(n)?n:(rr(n instanceof ko),rr(Do(n)),rr(n.filters.length>1),n.filters.reduce(((t,e)=>cu(t,e))))}function cu(t,e){let n;return rr(t instanceof Oo||t instanceof ko),rr(e instanceof Oo||e instanceof ko),n=t instanceof Oo?e instanceof Oo?function(t,e){return ko.create([t,e],"and")}(t,e):uu(t,e):e instanceof Oo?uu(e,t):function(t,e){if(rr(t.filters.length>0&&e.filters.length>0),Do(t)&&Do(e))return jo(t,e.getFilters());const n=Uo(t)?t:e,i=Uo(t)?e:t,r=n.filters.map((t=>cu(t,i)));return ko.create(r,"or")}(t,e),hu(n)}function uu(t,e){if(Do(e))return jo(e,t.getFilters());{const n=e.filters.map((e=>cu(t,e)));return ko.create(n,"or")}}function hu(t){if(rr(t instanceof Oo||t instanceof ko),t instanceof Oo)return t;const e=t.getFilters();if(1===e.length)return hu(e[0]);if(Go(t))return t;const n=e.map((t=>hu(t))),i=[];return n.forEach((e=>{e instanceof Oo?i.push(e):e instanceof ko&&(e.op===t.op?i.push(...e.filters):i.push(e))})),1===i.length?i[0]:ko.create(i,t.op)
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Au{constructor(){this._n=new du}addToCollectionParentIndex(t,e){return this._n.add(e),Wr.resolve()}getCollectionParents(t,e){return Wr.resolve(this._n.getEntries(e))}addFieldIndex(t,e){return Wr.resolve()}deleteFieldIndex(t,e){return Wr.resolve()}deleteAllFieldIndexes(t){return Wr.resolve()}createTargetIndexes(t,e){return Wr.resolve()}getDocumentsMatchingTarget(t,e){return Wr.resolve(null)}getIndexType(t,e){return Wr.resolve(0)}getFieldIndexes(t,e){return Wr.resolve([])}getNextCollectionGroupToUpdate(t){return Wr.resolve(null)}getMinOffset(t,e){return Wr.resolve(Qr.min())}getMinOffsetFromCollectionGroup(t,e){return Wr.resolve(Qr.min())}updateCollectionGroup(t,e,n){return Wr.resolve()}updateIndexEntries(t,e){return Wr.resolve()}}class du{constructor(){this.index={}}add(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e]||new Hs(Br.comparator),r=!i.has(n);return this.index[e]=i.add(n),r}has(t){const e=t.lastSegment(),n=t.popLast(),i=this.index[e];return i&&i.has(n)}getEntries(t){return(this.index[t]||new Hs(Br.comparator)).toArray()}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=new Uint8Array(0);class pu{constructor(t,e){this.databaseId=e,this.an=new du,this.un=new Ca((t=>na(t)),((t,e)=>ia(t,e))),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.an.has(e)){const n=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((()=>{this.an.add(e)}));const r={collectionId:n,parent:as(i)};return gu(t).put(r)}return Wr.resolve()}getCollectionParents(t,e){const n=[],i=IDBKeyRange.bound([e,""],[xr(e),""],!1,!0);return gu(t).W(i).next((t=>{for(const i of t){if(i.collectionId!==e)break;n.push(us(i.parent))}return n}))}addFieldIndex(t,e){const n=vu(t),i=function(t){return{indexId:t.indexId,collectionGroup:t.collectionGroup,fields:t.fields.map((t=>[t.fieldPath.canonicalString(),t.kind]))}}(e);delete i.indexId;const r=n.add(i);if(e.indexState){const n=yu(t);return r.next((t=>{n.put(Qc(t,this.uid,e.indexState.sequenceNumber,e.indexState.offset))}))}return r.next()}deleteFieldIndex(t,e){const n=vu(t),i=yu(t),r=mu(t);return n.delete(e.indexId).next((()=>i.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))).next((()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const e=vu(t),n=mu(t),i=yu(t);return e.H().next((()=>n.H())).next((()=>i.H()))}createTargetIndexes(t,e){return Wr.forEach(this.cn(e),(e=>this.getIndexType(t,e).next((n=>{if(0===n||1===n){const n=new nu(e).on();if(null!=n)return this.addFieldIndex(t,n)}}))))}getDocumentsMatchingTarget(t,e){const n=mu(t);let i=!0;const r=new Map;return Wr.forEach(this.cn(e),(e=>this.ln(t,e).next((t=>{i&&(i=!!t),r.set(e,t)})))).next((()=>{if(i){let t=Oa();const i=[];return Wr.forEach(r,((r,s)=>{Ji("IndexedDbIndexManager",`Using index ${function(t){return`id=${t.indexId}|cg=${t.collectionGroup}|f=${t.fields.map((t=>`${t.fieldPath}:${t.kind}`)).join(",")}`}(r)} to execute ${na(e)}`);const o=function(t,e){const n=Rr(e);if(void 0===n)return null;for(const i of sa(t,n.fieldPath))switch(i.op){case"array-contains-any":return i.value.arrayValue.values||[];case"array-contains":return[i.value]}return null}(s,r),a=function(t,e){const n=new Map;for(const i of Mr(e))for(const e of sa(t,i.fieldPath))switch(e.op){case"==":case"in":n.set(i.fieldPath.canonicalString(),e.value);break;case"not-in":case"!=":return n.set(i.fieldPath.canonicalString(),e.value),Array.from(n.values())}return null}(s,r),l=function(t,e){const n=[];let i=!0;for(const r of Mr(e)){const e=0===r.kind?oa(t,r.fieldPath,t.startAt):aa(t,r.fieldPath,t.startAt);n.push(e.value),i&&(i=e.inclusive)}return new Fo(n,i)}(s,r),c=function(t,e){const n=[];let i=!0;for(const r of Mr(e)){const e=0===r.kind?aa(t,r.fieldPath,t.endAt):oa(t,r.fieldPath,t.endAt);n.push(e.value),i&&(i=e.inclusive)}return new Fo(n,i)}(s,r),u=this.hn(r,s,l),h=this.hn(r,s,c),A=this.Pn(r,s,a),d=this.In(r.indexId,o,u,l.inclusive,h,c.inclusive,A);return Wr.forEach(d,(r=>n.j(r,e.limit).next((e=>{e.forEach((e=>{const n=Fr.fromSegments(e.documentKey);t.has(n)||(t=t.add(n),i.push(n))}))}))))})).next((()=>i))}return Wr.resolve(null)}))}cn(t){let e=this.un.get(t);return e||(e=0===t.filters.length?[t]:ru(ko.create(t.filters,"and")).map((e=>ea(t.path,t.collectionGroup,t.orderBy,e.getFilters(),t.limit,t.startAt,t.endAt))),this.un.set(t,e),e)}In(t,e,n,i,r,s,o){const a=(null!=e?e.length:1)*Math.max(n.length,r.length),l=a/(null!=e?e.length:1),c=[];for(let u=0;u<a;++u){const a=e?this.Tn(e[u/l]):fu,h=this.En(t,a,n[u%l],i),A=this.dn(t,a,r[u%l],s),d=o.map((e=>this.En(t,a,e,!0)));c.push(...this.createRange(h,A,d))}return c}En(t,e,n,i){const r=new Jc(t,Fr.empty(),e,n);return i?r:r.Jt()}dn(t,e,n,i){const r=new Jc(t,Fr.empty(),e,n);return i?r.Jt():r}ln(t,e){const n=new nu(e),i=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,i).next((t=>{let e=null;for(const i of t)n.tn(i)&&(!e||i.fields.length>e.fields.length)&&(e=i);return e}))}getIndexType(t,e){let n=2;const i=this.cn(e);return Wr.forEach(i,(e=>this.ln(t,e).next((t=>{t?0!==n&&t.fields.length<function(t){let e=new Hs(Ir.comparator),n=!1;for(const i of t.filters)for(const t of i.getFlattenedFilters())t.field.isKeyField()||("array-contains"===t.op||"array-contains-any"===t.op?n=!0:e=e.add(t.field));for(const i of t.orderBy)i.field.isKeyField()||(e=e.add(i.field));return e.size+(n?1:0)}(e)&&(n=1):n=0})))).next((()=>function(t){return null!==t.limit}(e)&&i.length>1&&2===n?1:n))}An(t,e){const n=new Zc;for(const i of Mr(t)){const t=e.data.field(i.fieldPath);if(null==t)return null;const r=n.Ht(i.kind);zc.bt.Pt(t,r)}return n.Wt()}Tn(t){const e=new Zc;return zc.bt.Pt(t,e.Ht(0)),e.Wt()}Rn(t,e){const n=new Zc;return zc.bt.Pt(po(this.databaseId,e),n.Ht(function(t){const e=Mr(t);return 0===e.length?0:e[e.length-1].kind}(t))),n.Wt()}Pn(t,e,n){if(null===n)return[];let i=[];i.push(new Zc);let r=0;for(const s of Mr(t)){const t=n[r++];for(const n of i)if(this.Vn(e,s.fieldPath)&&mo(t))i=this.mn(i,s,t);else{const e=n.Ht(s.kind);zc.bt.Pt(t,e)}}return this.fn(i)}hn(t,e,n){return this.Pn(t,e,n.position)}fn(t){const e=[];for(let n=0;n<t.length;++n)e[n]=t[n].Wt();return e}mn(t,e,n){const i=[...t],r=[];for(const s of n.arrayValue.values||[])for(const t of i){const n=new Zc;n.seed(t.Wt()),zc.bt.Pt(s,n.Ht(e.kind)),r.push(n)}return r}Vn(t,e){return!!t.filters.find((t=>t instanceof Oo&&t.field.isEqual(e)&&("in"===t.op||"not-in"===t.op)))}getFieldIndexes(t,e){const n=vu(t),i=yu(t);return(e?n.W("collectionGroupIndex",IDBKeyRange.bound(e,e)):n.W()).next((t=>{const e=[];return Wr.forEach(t,(t=>i.get([t.indexId,this.uid]).next((n=>{e.push(function(t,e){const n=e?new kr(e.sequenceNumber,new Qr(Mc(e.readTime),new Fr(us(e.documentKey)),e.largestBatchId)):kr.empty(),i=t.fields.map((([t,e])=>new Nr(Ir.fromServerFormat(t),e)));return new Lr(t.indexId,t.collectionGroup,i,n)}(t,n))})))).next((()=>e))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((t=>0===t.length?null:(t.sort(((t,e)=>{const n=t.indexState.sequenceNumber-e.indexState.sequenceNumber;return 0!==n?n:_r(t.collectionGroup,e.collectionGroup)})),t[0].collectionGroup)))}updateCollectionGroup(t,e,n){const i=vu(t),r=yu(t);return this.gn(t).next((t=>i.W("collectionGroupIndex",IDBKeyRange.bound(e,e)).next((e=>Wr.forEach(e,(e=>r.put(Qc(e.indexId,this.uid,t,n))))))))}updateIndexEntries(t,e){const n=new Map;return Wr.forEach(e,((e,i)=>{const r=n.get(e.collectionGroup);return(r?Wr.resolve(r):this.getFieldIndexes(t,e.collectionGroup)).next((r=>(n.set(e.collectionGroup,r),Wr.forEach(r,(n=>this.pn(t,e,n).next((e=>{const r=this.yn(i,n);return e.isEqual(r)?Wr.resolve():this.wn(t,i,n,e,r)})))))))}))}Sn(t,e,n,i){return mu(t).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.Rn(n,e.key),documentKey:e.key.path.toArray()})}bn(t,e,n,i){return mu(t).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.Rn(n,e.key),e.key.path.toArray()])}pn(t,e,n){const i=mu(t);let r=new Hs(tu);return i.Y({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.Rn(n,e)])},((t,i)=>{r=r.add(new Jc(n.indexId,e,i.arrayValue,i.directionalValue))})).next((()=>r))}yn(t,e){let n=new Hs(tu);const i=this.An(e,t);if(null==i)return n;const r=Rr(e);if(null!=r){const s=t.data.field(r.fieldPath);if(mo(s))for(const r of s.arrayValue.values||[])n=n.add(new Jc(e.indexId,t.key,this.Tn(r),i))}else n=n.add(new Jc(e.indexId,t.key,fu,i));return n}wn(t,e,n,i,r){Ji("IndexedDbIndexManager","Updating index entries for document '%s'",e.key);const s=[];return function(t,e,n,i,r){const s=t.getIterator(),o=e.getIterator();let a=js(s),l=js(o);for(;a||l;){let t=!1,e=!1;if(a&&l){const i=n(a,l);i<0?e=!0:i>0&&(t=!0)}else null!=a?e=!0:t=!0;t?(i(l),l=js(o)):e?(r(a),a=js(s)):(a=js(s),l=js(o))}}(i,r,tu,(i=>{s.push(this.Sn(t,e,n,i))}),(i=>{s.push(this.bn(t,e,n,i))})),Wr.waitFor(s)}gn(t){let e=1;return yu(t).Y({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((t,n,i)=>{i.done(),e=n.sequenceNumber+1})).next((()=>e))}createRange(t,e,n){n=n.sort(((t,e)=>tu(t,e))).filter(((t,e,n)=>!e||0!==tu(t,n[e-1])));const i=[];i.push(t);for(const s of n){const n=tu(s,t),r=tu(s,e);if(0===n)i[0]=t.Jt();else if(n>0&&r<0)i.push(s),i.push(s.Jt());else if(r>0)break}i.push(e);const r=[];for(let s=0;s<i.length;s+=2){if(this.Dn(i[s],i[s+1]))return[];const t=[i[s].indexId,this.uid,i[s].arrayValue,i[s].directionalValue,fu,[]],e=[i[s+1].indexId,this.uid,i[s+1].arrayValue,i[s+1].directionalValue,fu,[]];r.push(IDBKeyRange.bound(t,e))}return r}Dn(t,e){return tu(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(wu)}getMinOffset(t,e){return Wr.mapArray(this.cn(e),(e=>this.ln(t,e).next((t=>t||ir())))).next(wu)}}function gu(t){return Ns(t,"collectionParents")}function mu(t){return Ns(t,"indexEntries")}function vu(t){return Ns(t,"indexConfiguration")}function yu(t){return Ns(t,"indexState")}function wu(t){rr(0!==t.length);let e=t[0].indexState.offset,n=e.largestBatchId;for(let i=1;i<t.length;i++){const r=t[i].indexState.offset;Gr(r,e)<0&&(e=r),n<r.largestBatchId&&(n=r.largestBatchId)}return new Qr(e.readTime,e.documentKey,n)}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _u={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class bu{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new bu(t,bu.DEFAULT_COLLECTION_PERCENTILE,bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xu(t,e,n){const i=t.store("mutations"),r=t.store("documentMutations"),s=[],o=IDBKeyRange.only(n.batchId);let a=0;const l=i.Y({range:o},((t,e,n)=>(a++,n.delete())));s.push(l.next((()=>{rr(1===a)})));const c=[];for(const u of n.mutations){const t=ds(e,u.key.path,n.batchId);s.push(r.delete(t)),c.push(u.key)}return Wr.waitFor(s).next((()=>c))}function Eu(t){if(!t)return 0;let e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw ir();e=t.noDocument}return JSON.stringify(e).length}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */bu.DEFAULT_COLLECTION_PERCENTILE=10,bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,bu.DEFAULT=new bu(41943040,bu.DEFAULT_COLLECTION_PERCENTILE,bu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),bu.DISABLED=new bu(-1,0,0);class Cu{constructor(t,e,n,i){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=i,this.Cn={}}static lt(t,e,n,i){rr(""!==t.uid);const r=t.isAuthenticated()?t.uid:"";return new Cu(r,e,n,i)}checkEmpty(t){let e=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Bu(t).Y({index:"userMutationsIndex",range:n},((t,n,i)=>{e=!1,i.done()})).next((()=>e))}addMutationBatch(t,e,n,i){const r=Tu(t),s=Bu(t);return s.add({}).next((o=>{rr("number"==typeof o);const a=new vl(o,e,n,i),l=function(t,e,n){const i=n.baseMutations.map((e=>hc(t.ct,e))),r=n.mutations.map((e=>hc(t.ct,e)));return{userId:e,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:i,mutations:r}}(this.serializer,this.userId,a),c=[];let u=new Hs(((t,e)=>_r(t.canonicalString(),e.canonicalString())));for(const t of i){const e=ds(this.userId,t.key.path,o);u=u.add(t.key.path.popLast()),c.push(s.put(l)),c.push(r.put(e,fs))}return u.forEach((e=>{c.push(this.indexManager.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((()=>{this.Cn[o]=a.keys()})),Wr.waitFor(c).next((()=>a))}))}lookupMutationBatch(t,e){return Bu(t).get(e).next((t=>t?(rr(t.userId===this.userId),Pc(this.serializer,t)):null))}vn(t,e){return this.Cn[e]?Wr.resolve(this.Cn[e]):this.lookupMutationBatch(t,e).next((t=>{if(t){const n=t.keys();return this.Cn[e]=n,n}return null}))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=IDBKeyRange.lowerBound([this.userId,n]);let r=null;return Bu(t).Y({index:"userMutationsIndex",range:i},((t,e,i)=>{e.userId===this.userId&&(rr(e.batchId>=n),r=Pc(this.serializer,e)),i.done()})).next((()=>r))}getHighestUnacknowledgedBatchId(t){const e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return Bu(t).Y({index:"userMutationsIndex",range:e,reverse:!0},((t,e,i)=>{n=e.batchId,i.done()})).next((()=>n))}getAllMutationBatches(t){const e=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Bu(t).W("userMutationsIndex",e).next((t=>t.map((t=>Pc(this.serializer,t)))))}getAllMutationBatchesAffectingDocumentKey(t,e){const n=As(this.userId,e.path),i=IDBKeyRange.lowerBound(n),r=[];return Tu(t).Y({range:i},((n,i,s)=>{const[o,a,l]=n,c=us(a);if(o===this.userId&&e.path.isEqual(c))return Bu(t).get(l).next((t=>{if(!t)throw ir();rr(t.userId===this.userId),r.push(Pc(this.serializer,t))}));s.done()})).next((()=>r))}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Hs(_r);const i=[];return e.forEach((e=>{const r=As(this.userId,e.path),s=IDBKeyRange.lowerBound(r),o=Tu(t).Y({range:s},((t,i,r)=>{const[s,o,a]=t,l=us(o);s===this.userId&&e.path.isEqual(l)?n=n.add(a):r.done()}));i.push(o)})),Wr.waitFor(i).next((()=>this.Fn(t,n)))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1,r=As(this.userId,n),s=IDBKeyRange.lowerBound(r);let o=new Hs(_r);return Tu(t).Y({range:s},((t,e,r)=>{const[s,a,l]=t,c=us(a);s===this.userId&&n.isPrefixOf(c)?c.length===i&&(o=o.add(l)):r.done()})).next((()=>this.Fn(t,o)))}Fn(t,e){const n=[],i=[];return e.forEach((e=>{i.push(Bu(t).get(e).next((t=>{if(null===t)throw ir();rr(t.userId===this.userId),n.push(Pc(this.serializer,t))})))})),Wr.waitFor(i).next((()=>n))}removeMutationBatch(t,e){return xu(t.ae,this.userId,e).next((n=>(t.addOnCommittedListener((()=>{this.Mn(e.batchId)})),Wr.forEach(n,(e=>this.referenceDelegate.markPotentiallyOrphaned(t,e))))))}Mn(t){delete this.Cn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((e=>{if(!e)return Wr.resolve();const n=IDBKeyRange.lowerBound(function(t){return[t]}(this.userId)),i=[];return Tu(t).Y({range:n},((t,e,n)=>{if(t[0]===this.userId){const e=us(t[1]);i.push(e)}else n.done()})).next((()=>{rr(0===i.length)}))}))}containsKey(t,e){return Su(t,this.userId,e)}xn(t){return Iu(t).get(this.userId).next((t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}))}}function Su(t,e,n){const i=As(e,n.path),r=i[1],s=IDBKeyRange.lowerBound(i);let o=!1;return Tu(t).Y({range:s,J:!0},((t,n,i)=>{const[s,a,l]=t;s===e&&a===r&&(o=!0),i.done()})).next((()=>o))}function Bu(t){return Ns(t,"mutations")}function Tu(t){return Ns(t,"documentMutations")}function Iu(t){return Ns(t,"mutationQueues")}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fu{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new Fu(0)}static Bn(){return new Fu(-1)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lu{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.Ln(t).next((e=>{const n=new Fu(e.highestTargetId);return e.highestTargetId=n.next(),this.kn(t,e).next((()=>e.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.Ln(t).next((t=>Cr.fromTimestamp(new Er(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.Ln(t).next((t=>t.highestListenSequenceNumber))}setTargetsMetadata(t,e,n){return this.Ln(t).next((i=>(i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),this.kn(t,i))))}addTargetData(t,e){return this.qn(t,e).next((()=>this.Ln(t).next((n=>(n.targetCount+=1,this.Qn(e,n),this.kn(t,n))))))}updateTargetData(t,e){return this.qn(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next((()=>Ru(t).delete(e.targetId))).next((()=>this.Ln(t))).next((e=>(rr(e.targetCount>0),e.targetCount-=1,this.kn(t,e))))}removeTargets(t,e,n){let i=0;const r=[];return Ru(t).Y(((s,o)=>{const a=Nc(o);a.sequenceNumber<=e&&null===n.get(a.targetId)&&(i++,r.push(this.removeTargetData(t,a)))})).next((()=>Wr.waitFor(r))).next((()=>i))}forEachTarget(t,e){return Ru(t).Y(((t,n)=>{const i=Nc(n);e(i)}))}Ln(t){return Mu(t).get("targetGlobalKey").next((t=>(rr(null!==t),t)))}kn(t,e){return Mu(t).put("targetGlobalKey",e)}qn(t,e){return Ru(t).put(Oc(this.serializer,e))}Qn(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.Ln(t).next((t=>t.targetCount))}getTargetData(t,e){const n=na(e),i=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let r=null;return Ru(t).Y({range:i,index:"queryTargetsIndex"},((t,n,i)=>{const s=Nc(n);ia(e,s.target)&&(r=s,i.done())})).next((()=>r))}addMatchingKeys(t,e,n){const i=[],r=Pu(t);return e.forEach((e=>{const s=as(e.path);i.push(r.put({targetId:n,path:s})),i.push(this.referenceDelegate.addReference(t,n,e))})),Wr.waitFor(i)}removeMatchingKeys(t,e,n){const i=Pu(t);return Wr.forEach(e,(e=>{const r=as(e.path);return Wr.waitFor([i.delete([n,r]),this.referenceDelegate.removeReference(t,n,e)])}))}removeMatchingKeysForTargetId(t,e){const n=Pu(t),i=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(i)}getMatchingKeysForTargetId(t,e){const n=IDBKeyRange.bound([e],[e+1],!1,!0),i=Pu(t);let r=Oa();return i.Y({range:n,J:!0},((t,e,n)=>{const i=us(t[1]),s=new Fr(i);r=r.add(s)})).next((()=>r))}containsKey(t,e){const n=as(e.path),i=IDBKeyRange.bound([n],[xr(n)],!1,!0);let r=0;return Pu(t).Y({index:"documentTargetsIndex",J:!0,range:i},(([t,e],n,i)=>{0!==t&&(r++,i.done())})).next((()=>r>0))}_t(t,e){return Ru(t).get(e).next((t=>t?Nc(t):null))}}function Ru(t){return Ns(t,"targets")}function Mu(t){return Ns(t,"targetGlobal")}function Pu(t){return Ns(t,"targetDocuments")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nu([t,e],[n,i]){const r=_r(t,n);return 0===r?_r(e,i):r}class Ou{constructor(t){this.Kn=t,this.buffer=new Hs(Nu),this.$n=0}Un(){return++this.$n}Wn(t){const e=[t,this.Un()];if(this.buffer.size<this.Kn)this.buffer=this.buffer.add(e);else{const t=this.buffer.last();Nu(e,t)<0&&(this.buffer=this.buffer.delete(t).add(e))}}get maxValue(){return this.buffer.last()[0]}}class ku{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.zn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}zn(t){Ji("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Gn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Xr(t)?Ji("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await jr(t)}await this.zn(3e5)}))}}class Du{constructor(t,e){this.jn=t,this.params=e}calculateTargetCount(t,e){return this.jn.Hn(t).next((t=>Math.floor(e/100*t)))}nthSequenceNumber(t,e){if(0===e)return Wr.resolve(is._e);const n=new Ou(e);return this.jn.forEachTarget(t,(t=>n.Wn(t.sequenceNumber))).next((()=>this.jn.Jn(t,(t=>n.Wn(t))))).next((()=>n.maxValue))}removeTargets(t,e,n){return this.jn.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.jn.removeOrphanedDocuments(t,e)}collect(t,e){return-1===this.params.cacheSizeCollectionThreshold?(Ji("LruGarbageCollector","Garbage collection skipped; disabled"),Wr.resolve(_u)):this.getCacheSize(t).next((n=>n<this.params.cacheSizeCollectionThreshold?(Ji("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),_u):this.Yn(t,e)))}getCacheSize(t){return this.jn.getCacheSize(t)}Yn(t,e){let n,i,r,s,a,l,c;const u=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((e=>(e>this.params.maximumSequenceNumbersToCollect?(Ji("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${e}`),i=this.params.maximumSequenceNumbersToCollect):i=e,s=Date.now(),this.nthSequenceNumber(t,i)))).next((i=>(n=i,a=Date.now(),this.removeTargets(t,n,e)))).next((e=>(r=e,l=Date.now(),this.removeOrphanedDocuments(t,n)))).next((t=>(c=Date.now(),Yi()<=o.$b.DEBUG&&Ji("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${s-u}ms\n\tDetermined least recently used ${i} in `+(a-s)+"ms\n"+`\tRemoved ${r} targets in `+(l-a)+"ms\n"+`\tRemoved ${t} documents in `+(c-l)+"ms\n"+`Total Duration: ${c-u}ms`),Wr.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:r,documentsRemoved:t}))))}}function Uu(t,e){return new Du(t,e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(t,e){this.db=t,this.garbageCollector=Uu(this,e)}Hn(t){const e=this.Zn(t);return this.db.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Zn(t){let e=0;return this.Jn(t,(t=>{e++})).next((()=>e))}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}Jn(t,e){return this.Xn(t,((t,n)=>e(n)))}addReference(t,e,n){return Gu(t,n)}removeReference(t,e,n){return Gu(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return Gu(t,e)}er(t,e){return function(t,e){let n=!1;return Iu(t).Z((i=>Su(t,i,e).next((t=>(t&&(n=!0),Wr.resolve(!t)))))).next((()=>n))}(t,e)}removeOrphanedDocuments(t,e){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let r=0;return this.Xn(t,((s,o)=>{if(o<=e){const e=this.er(t,s).next((e=>{if(!e)return r++,n.getEntry(t,s).next((()=>(n.removeEntry(s,Cr.min()),Pu(t).delete(function(t){return[0,as(t.path)]}(s)))))}));i.push(e)}})).next((()=>Wr.waitFor(i))).next((()=>n.apply(t))).next((()=>r))}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return Gu(t,e)}Xn(t,e){const n=Pu(t);let i,r=is._e;return n.Y({index:"documentTargetsIndex"},(([t,n],{path:s,sequenceNumber:o})=>{0===t?(r!==is._e&&e(new Fr(us(i)),r),r=o,i=s):r=is._e})).next((()=>{r!==is._e&&e(new Fr(us(i)),r)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function Gu(t,e){return Pu(t).put(function(t,e){return{targetId:0,path:as(t.path),sequenceNumber:e}}(e,t.currentSequenceNumber))}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this.changes=new Ca((t=>t.toString()),((t,e)=>t.isEqual(e))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,Io.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();const n=this.changes.get(e);return void 0!==n?Wr.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return Ku(t).put(n)}removeEntry(t,e,n){return Ku(t).delete(function(t,e){const n=t.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Lc(e),n[n.length-1]]}(e,n))}updateMetadata(t,e){return this.getMetadata(t).next((n=>(n.byteSize+=e,this.tr(t,n))))}getEntry(t,e){let n=Io.newInvalidDocument(e);return Ku(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(qu(e))},((t,i)=>{n=this.nr(e,i)})).next((()=>n))}rr(t,e){let n={size:0,document:Io.newInvalidDocument(e)};return Ku(t).Y({index:"documentKeyIndex",range:IDBKeyRange.only(qu(e))},((t,i)=>{n={document:this.nr(e,i),size:Eu(i)}})).next((()=>n))}getEntries(t,e){let n=Ba();return this.ir(t,e,((t,e)=>{const i=this.nr(t,e);n=n.insert(t,i)})).next((()=>n))}sr(t,e){let n=Ba(),i=new Us(Fr.comparator);return this.ir(t,e,((t,e)=>{const r=this.nr(t,e);n=n.insert(t,r),i=i.insert(t,Eu(e))})).next((()=>({documents:n,_r:i})))}ir(t,e,n){if(e.isEmpty())return Wr.resolve();let i=new Hs(Xu);e.forEach((t=>i=i.add(t)));const r=IDBKeyRange.bound(qu(i.first()),qu(i.last())),s=i.getIterator();let o=s.getNext();return Ku(t).Y({index:"documentKeyIndex",range:r},((t,e,i)=>{const r=Fr.fromSegments([...e.prefixPath,e.collectionGroup,e.documentId]);for(;o&&Xu(o,r)<0;)n(o,null),o=s.getNext();o&&o.isEqual(r)&&(n(o,e),o=s.hasNext()?s.getNext():null),o?i.U(qu(o)):i.done()})).next((()=>{for(;o;)n(o,null),o=s.hasNext()?s.getNext():null}))}getDocumentsMatchingQuery(t,e,n,i,r){const s=e.path,o=[s.popLast().toArray(),s.lastSegment(),Lc(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],a=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ku(t).W(IDBKeyRange.bound(o,a,!0)).next((t=>{null==r||r.incrementDocumentReadCount(t.length);let n=Ba();for(const r of t){const t=this.nr(Fr.fromSegments(r.prefixPath.concat(r.collectionGroup,r.documentId)),r);t.isFoundDocument()&&(_a(e,t)||i.has(t.key))&&(n=n.insert(t.key,t))}return n}))}getAllFromCollectionGroup(t,e,n,i){let r=Ba();const s=$u(e,n),o=$u(e,Qr.max());return Ku(t).Y({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,o,!0)},((t,e,n)=>{const s=this.nr(Fr.fromSegments(e.prefixPath.concat(e.collectionGroup,e.documentId)),e);r=r.insert(s.key,s),r.size===i&&n.done()})).next((()=>r))}newChangeBuffer(t){return new Wu(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((t=>t.byteSize))}getMetadata(t){return zu(t).get("remoteDocumentGlobalKey").next((t=>(rr(!!t),t)))}tr(t,e){return zu(t).put("remoteDocumentGlobalKey",e)}nr(t,e){if(e){const t=Ic(this.serializer,e);if(!t.isNoDocument()||!t.version.isEqual(Cr.min()))return t}return Io.newInvalidDocument(t)}}function ju(t){return new Vu(t)}class Wu extends Hu{constructor(t,e){super(),this.ar=t,this.trackRemovals=e,this.ur=new Ca((t=>t.toString()),((t,e)=>t.isEqual(e)))}applyChanges(t){const e=[];let n=0,i=new Hs(((t,e)=>_r(t.canonicalString(),e.canonicalString())));return this.changes.forEach(((r,s)=>{const o=this.ur.get(r);if(e.push(this.ar.removeEntry(t,r,o.readTime)),s.isValidDocument()){const a=Fc(this.ar.serializer,s);i=i.add(r.path.popLast());const l=Eu(a);n+=l-o.size,e.push(this.ar.addEntry(t,r,a))}else if(n-=o.size,this.trackRemovals){const n=Fc(this.ar.serializer,s.convertToNoDocument(Cr.min()));e.push(this.ar.addEntry(t,r,n))}})),i.forEach((n=>{e.push(this.ar.indexManager.addToCollectionParentIndex(t,n))})),e.push(this.ar.updateMetadata(t,n)),Wr.waitFor(e)}getFromCache(t,e){return this.ar.rr(t,e).next((t=>(this.ur.set(e,{size:t.size,readTime:t.document.readTime}),t.document)))}getAllFromCache(t,e){return this.ar.sr(t,e).next((({documents:t,_r:e})=>(e.forEach(((e,n)=>{this.ur.set(e,{size:n,readTime:t.get(e).readTime})})),t)))}}function zu(t){return Ns(t,"remoteDocumentGlobal")}function Ku(t){return Ns(t,"remoteDocumentsV14")}function qu(t){const e=t.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function $u(t,e){const n=e.documentKey.path.toArray();return[t,Lc(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Xu(t,e){const n=t.path.toArray(),i=e.path.toArray();let r=0;for(let s=0;s<n.length-2&&s<i.length-2;++s)if(r=_r(n[s],i[s]),r)return r;return r=_r(n.length,i.length),r||(r=_r(n[n.length-2],i[i.length-2]),r||_r(n[n.length-1],i[i.length-1])
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)}class Yu{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(t,e,n,i){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=i}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next((i=>(n=i,this.remoteDocumentCache.getEntry(t,e)))).next((t=>(null!==n&&ll(n.mutation,t,Ws.empty(),Er.now()),t)))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.getLocalViewOfDocuments(t,e,Oa()).next((()=>e))))}getLocalViewOfDocuments(t,e,n=Oa()){const i=La();return this.populateOverlays(t,i,e).next((()=>this.computeViews(t,e,i,n).next((t=>{let e=Ia();return t.forEach(((t,n)=>{e=e.insert(t,n.overlayedDocument)})),e}))))}getOverlayedDocuments(t,e){const n=La();return this.populateOverlays(t,n,e).next((()=>this.computeViews(t,e,n,Oa())))}populateOverlays(t,e,n){const i=[];return n.forEach((t=>{e.has(t)||i.push(t)})),this.documentOverlayCache.getOverlays(t,i).next((t=>{t.forEach(((t,n)=>{e.set(t,n)}))}))}computeViews(t,e,n,i){let r=Ba();const s=Ma(),o=function(){return Ma()}();return e.forEach(((t,e)=>{const o=n.get(e.key);i.has(e.key)&&(void 0===o||o.mutation instanceof Al)?r=r.insert(e.key,e):void 0!==o?(s.set(e.key,o.mutation.getFieldMask()),ll(o.mutation,e,o.mutation.getFieldMask(),Er.now())):s.set(e.key,Ws.empty())})),this.recalculateAndSaveOverlays(t,r).next((t=>(t.forEach(((t,e)=>s.set(t,e))),e.forEach(((t,e)=>{var n;return o.set(t,new Yu(e,null!==(n=s.get(t))&&void 0!==n?n:null))})),o)))}recalculateAndSaveOverlays(t,e){const n=Ma();let i=new Us(((t,e)=>t-e)),r=Oa();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next((t=>{for(const r of t)r.keys().forEach((t=>{const s=e.get(t);if(null===s)return;let o=n.get(t)||Ws.empty();o=r.applyToLocalView(s,o),n.set(t,o);const a=(i.get(r.batchId)||Oa()).add(t);i=i.insert(r.batchId,a)}))})).next((()=>{const s=[],o=i.getReverseIterator();for(;o.hasNext();){const i=o.getNext(),a=i.key,l=i.value,c=Ra();l.forEach((t=>{if(!r.has(t)){const i=ol(e.get(t),n.get(t));null!==i&&c.set(t,i),r=r.add(t)}})),s.push(this.documentOverlayCache.saveOverlays(t,a,c))}return Wr.waitFor(s)})).next((()=>n))}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next((e=>this.recalculateAndSaveOverlays(t,e)))}getDocumentsMatchingQuery(t,e,n,i){return function(t){return Fr.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):Aa(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,i):this.getDocumentsMatchingCollectionQuery(t,e,n,i)}getNextDocuments(t,e,n,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,i).next((r=>{const s=i-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,i-r.size):Wr.resolve(La());let o=-1,a=r;return s.next((e=>Wr.forEach(e,((e,n)=>(o<n.largestBatchId&&(o=n.largestBatchId),r.get(e)?Wr.resolve():this.remoteDocumentCache.getEntry(t,e).next((t=>{a=a.insert(e,t)}))))).next((()=>this.populateOverlays(t,e,r))).next((()=>this.computeViews(t,a,e,Oa()))).next((t=>({batchId:o,changes:Fa(t)})))))}))}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Fr(e)).next((t=>{let e=Ia();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))}getDocumentsMatchingCollectionGroupQuery(t,e,n,i){const r=e.collectionGroup;let s=Ia();return this.indexManager.getCollectionParents(t,r).next((o=>Wr.forEach(o,(o=>{const a=function(t,e){return new la(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,o.child(r));return this.getDocumentsMatchingCollectionQuery(t,a,n,i).next((t=>{t.forEach(((t,e)=>{s=s.insert(t,e)}))}))})).next((()=>s))))}getDocumentsMatchingCollectionQuery(t,e,n,i){let r;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next((s=>(r=s,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,r,i)))).next((t=>{r.forEach(((e,n)=>{const i=n.getKey();null===t.get(i)&&(t=t.insert(i,Io.newInvalidDocument(i)))}));let n=Ia();return t.forEach(((t,i)=>{const s=r.get(t);void 0!==s&&ll(s.mutation,i,Ws.empty(),Er.now()),_a(e,i)&&(n=n.insert(t,i))})),n}))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,e){return Wr.resolve(this.cr.get(e))}saveBundleMetadata(t,e){return this.cr.set(e.id,function(t){return{id:t.id,version:t.version,createTime:Yl(t.createTime)}}(e)),Wr.resolve()}getNamedQuery(t,e){return Wr.resolve(this.lr.get(e))}saveNamedQuery(t,e){return this.lr.set(e.name,function(t){return{name:t.name,query:kc(t.bundledQuery),readTime:Yl(t.readTime)}}(e)),Wr.resolve()}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class th{constructor(){this.overlays=new Us(Fr.comparator),this.hr=new Map}getOverlay(t,e){return Wr.resolve(this.overlays.get(e))}getOverlays(t,e){const n=La();return Wr.forEach(e,(e=>this.getOverlay(t,e).next((t=>{null!==t&&n.set(e,t)})))).next((()=>n))}saveOverlays(t,e,n){return n.forEach(((n,i)=>{this.ht(t,e,i)})),Wr.resolve()}removeOverlaysForBatchId(t,e,n){const i=this.hr.get(n);return void 0!==i&&(i.forEach((t=>this.overlays=this.overlays.remove(t))),this.hr.delete(n)),Wr.resolve()}getOverlaysForCollection(t,e,n){const i=La(),r=e.length+1,s=new Fr(e.child("")),o=this.overlays.getIteratorFrom(s);for(;o.hasNext();){const t=o.getNext().value,s=t.getKey();if(!e.isPrefixOf(s.path))break;s.path.length===r&&t.largestBatchId>n&&i.set(t.getKey(),t)}return Wr.resolve(i)}getOverlaysForCollectionGroup(t,e,n,i){let r=new Us(((t,e)=>t-e));const s=this.overlays.getIterator();for(;s.hasNext();){const t=s.getNext().value;if(t.getKey().getCollectionGroup()===e&&t.largestBatchId>n){let e=r.get(t.largestBatchId);null===e&&(e=La(),r=r.insert(t.largestBatchId,e)),e.set(t.getKey(),t)}}const o=La(),a=r.getIterator();for(;a.hasNext();)if(a.getNext().value.forEach(((t,e)=>o.set(t,e))),o.size()>=i)break;return Wr.resolve(o)}ht(t,e,n){const i=this.overlays.get(n.key);if(null!==i){const t=this.hr.get(i.largestBatchId).delete(n.key);this.hr.set(i.largestBatchId,t)}this.overlays=this.overlays.insert(n.key,new wl(e,n));let r=this.hr.get(e);void 0===r&&(r=Oa(),this.hr.set(e,r)),this.hr.set(e,r.add(n.key))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eh{constructor(){this.Pr=new Hs(nh.Ir),this.Tr=new Hs(nh.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,e){const n=new nh(t,e);this.Pr=this.Pr.add(n),this.Tr=this.Tr.add(n)}dr(t,e){t.forEach((t=>this.addReference(t,e)))}removeReference(t,e){this.Ar(new nh(t,e))}Rr(t,e){t.forEach((t=>this.removeReference(t,e)))}Vr(t){const e=new Fr(new Br([])),n=new nh(e,t),i=new nh(e,t+1),r=[];return this.Tr.forEachInRange([n,i],(t=>{this.Ar(t),r.push(t.key)})),r}mr(){this.Pr.forEach((t=>this.Ar(t)))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const e=new Fr(new Br([])),n=new nh(e,t),i=new nh(e,t+1);let r=Oa();return this.Tr.forEachInRange([n,i],(t=>{r=r.add(t.key)})),r}containsKey(t){const e=new nh(t,0),n=this.Pr.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)}}class nh{constructor(t,e){this.key=t,this.pr=e}static Ir(t,e){return Fr.comparator(t.key,e.key)||_r(t.pr,e.pr)}static Er(t,e){return _r(t.pr,e.pr)||Fr.comparator(t.key,e.key)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ih{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.yr=1,this.wr=new Hs(nh.Ir)}checkEmpty(t){return Wr.resolve(0===this.mutationQueue.length)}addMutationBatch(t,e,n,i){const r=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new vl(r,e,n,i);this.mutationQueue.push(s);for(const o of i)this.wr=this.wr.add(new nh(o.key,r)),this.indexManager.addToCollectionParentIndex(t,o.key.path.popLast());return Wr.resolve(s)}lookupMutationBatch(t,e){return Wr.resolve(this.Sr(e))}getNextMutationBatchAfterBatchId(t,e){const n=e+1,i=this.br(n),r=i<0?0:i;return Wr.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return Wr.resolve(0===this.mutationQueue.length?-1:this.yr-1)}getAllMutationBatches(t){return Wr.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){const n=new nh(e,0),i=new nh(e,Number.POSITIVE_INFINITY),r=[];return this.wr.forEachInRange([n,i],(t=>{const e=this.Sr(t.pr);r.push(e)})),Wr.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new Hs(_r);return e.forEach((t=>{const e=new nh(t,0),i=new nh(t,Number.POSITIVE_INFINITY);this.wr.forEachInRange([e,i],(t=>{n=n.add(t.pr)}))})),Wr.resolve(this.Dr(n))}getAllMutationBatchesAffectingQuery(t,e){const n=e.path,i=n.length+1;let r=n;Fr.isDocumentKey(r)||(r=r.child(""));const s=new nh(new Fr(r),0);let o=new Hs(_r);return this.wr.forEachWhile((t=>{const e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===i&&(o=o.add(t.pr)),!0)}),s),Wr.resolve(this.Dr(o))}Dr(t){const e=[];return t.forEach((t=>{const n=this.Sr(t);null!==n&&e.push(n)})),e}removeMutationBatch(t,e){rr(0===this.Cr(e.batchId,"removed")),this.mutationQueue.shift();let n=this.wr;return Wr.forEach(e.mutations,(i=>{const r=new nh(i.key,e.batchId);return n=n.delete(r),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((()=>{this.wr=n}))}Mn(t){}containsKey(t,e){const n=new nh(e,0),i=this.wr.firstAfterOrEqual(n);return Wr.resolve(e.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Wr.resolve()}Cr(t,e){return this.br(t)}br(t){return 0===this.mutationQueue.length?0:t-this.mutationQueue[0].batchId}Sr(t){const e=this.br(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rh{constructor(t){this.vr=t,this.docs=function(){return new Us(Fr.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){const n=e.key,i=this.docs.get(n),r=i?i.size:0,s=this.vr(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:s}),this.size+=s-r,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){const e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){const n=this.docs.get(e);return Wr.resolve(n?n.document.mutableCopy():Io.newInvalidDocument(e))}getEntries(t,e){let n=Ba();return e.forEach((t=>{const e=this.docs.get(t);n=n.insert(t,e?e.document.mutableCopy():Io.newInvalidDocument(t))})),Wr.resolve(n)}getDocumentsMatchingQuery(t,e,n,i){let r=Ba();const s=e.path,o=new Fr(s.child("")),a=this.docs.getIteratorFrom(o);for(;a.hasNext();){const{key:t,value:{document:o}}=a.getNext();if(!s.isPrefixOf(t.path))break;t.path.length>s.length+1||Gr(Ur(o),n)<=0||(i.has(o.key)||_a(e,o))&&(r=r.insert(o.key,o.mutableCopy()))}return Wr.resolve(r)}getAllFromCollectionGroup(t,e,n,i){ir()}Fr(t,e){return Wr.forEach(this.docs,(t=>e(t)))}newChangeBuffer(t){return new sh(this)}getSize(t){return Wr.resolve(this.size)}}class sh extends Hu{constructor(t){super(),this.ar=t}applyChanges(t){const e=[];return this.changes.forEach(((n,i)=>{i.isValidDocument()?e.push(this.ar.addEntry(t,i)):this.ar.removeEntry(n)})),Wr.waitFor(e)}getFromCache(t,e){return this.ar.getEntry(t,e)}getAllFromCache(t,e){return this.ar.getEntries(t,e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(t){this.persistence=t,this.Mr=new Ca((t=>na(t)),ia),this.lastRemoteSnapshotVersion=Cr.min(),this.highestTargetId=0,this.Or=0,this.Nr=new eh,this.targetCount=0,this.Br=Fu.Nn()}forEachTarget(t,e){return this.Mr.forEach(((t,n)=>e(n))),Wr.resolve()}getLastRemoteSnapshotVersion(t){return Wr.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Wr.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),Wr.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Or&&(this.Or=e),Wr.resolve()}qn(t){this.Mr.set(t.target,t);const e=t.targetId;e>this.highestTargetId&&(this.Br=new Fu(e),this.highestTargetId=e),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,e){return this.qn(e),this.targetCount+=1,Wr.resolve()}updateTargetData(t,e){return this.qn(e),Wr.resolve()}removeTargetData(t,e){return this.Mr.delete(e.target),this.Nr.Vr(e.targetId),this.targetCount-=1,Wr.resolve()}removeTargets(t,e,n){let i=0;const r=[];return this.Mr.forEach(((s,o)=>{o.sequenceNumber<=e&&null===n.get(o.targetId)&&(this.Mr.delete(s),r.push(this.removeMatchingKeysForTargetId(t,o.targetId)),i++)})),Wr.waitFor(r).next((()=>i))}getTargetCount(t){return Wr.resolve(this.targetCount)}getTargetData(t,e){const n=this.Mr.get(e)||null;return Wr.resolve(n)}addMatchingKeys(t,e,n){return this.Nr.dr(e,n),Wr.resolve()}removeMatchingKeys(t,e,n){this.Nr.Rr(e,n);const i=this.persistence.referenceDelegate,r=[];return i&&e.forEach((e=>{r.push(i.markPotentiallyOrphaned(t,e))})),Wr.waitFor(r)}removeMatchingKeysForTargetId(t,e){return this.Nr.Vr(e),Wr.resolve()}getMatchingKeysForTargetId(t,e){const n=this.Nr.gr(e);return Wr.resolve(n)}containsKey(t,e){return Wr.resolve(this.Nr.containsKey(e))}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ah{constructor(t,e){this.Lr={},this.overlays={},this.kr=new is(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new oh(this),this.indexManager=new Au,this.remoteDocumentCache=function(t){return new rh(t)}((t=>this.referenceDelegate.Kr(t))),this.serializer=new Tc(e),this.$r=new Ju(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new th,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.Lr[t.toKey()];return n||(n=new ih(e,this.referenceDelegate),this.Lr[t.toKey()]=n),n}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,e,n){Ji("MemoryPersistence","Starting transaction:",t);const i=new lh(this.kr.next());return this.referenceDelegate.Ur(),n(i).next((t=>this.referenceDelegate.Wr(i).next((()=>t)))).toPromise().then((t=>(i.raiseOnCommittedEvent(),t)))}Gr(t,e){return Wr.or(Object.values(this.Lr).map((n=>()=>n.containsKey(t,e))))}}class lh extends Vr{constructor(t){super(),this.currentSequenceNumber=t}}class ch{constructor(t){this.persistence=t,this.zr=new eh,this.jr=null}static Hr(t){return new ch(t)}get Jr(){if(this.jr)return this.jr;throw ir()}addReference(t,e,n){return this.zr.addReference(n,e),this.Jr.delete(n.toString()),Wr.resolve()}removeReference(t,e,n){return this.zr.removeReference(n,e),this.Jr.add(n.toString()),Wr.resolve()}markPotentiallyOrphaned(t,e){return this.Jr.add(e.toString()),Wr.resolve()}removeTarget(t,e){this.zr.Vr(e.targetId).forEach((t=>this.Jr.add(t.toString())));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(t,e.targetId).next((t=>{t.forEach((t=>this.Jr.add(t.toString())))})).next((()=>n.removeTargetData(t,e)))}Ur(){this.jr=new Set}Wr(t){const e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Wr.forEach(this.Jr,(n=>{const i=Fr.fromPath(n);return this.Yr(t,i).next((t=>{t||e.removeEntry(i,Cr.min())}))})).next((()=>(this.jr=null,e.apply(t))))}updateLimboDocument(t,e){return this.Yr(t,e).next((t=>{t?this.Jr.delete(e.toString()):this.Jr.add(e.toString())}))}Kr(t){return 0}Yr(t,e){return Wr.or([()=>Wr.resolve(this.zr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.Gr(t,e)])}}class uh{constructor(t,e){this.persistence=t,this.Zr=new Ca((t=>as(t.path)),((t,e)=>t.isEqual(e))),this.garbageCollector=Uu(this,e)}static Hr(t,e){return new uh(t,e)}Ur(){}Wr(t){return Wr.resolve()}forEachTarget(t,e){return this.persistence.getTargetCache().forEachTarget(t,e)}Hn(t){const e=this.Zn(t);return this.persistence.getTargetCache().getTargetCount(t).next((t=>e.next((e=>t+e))))}Zn(t){let e=0;return this.Jn(t,(t=>{e++})).next((()=>e))}Jn(t,e){return Wr.forEach(this.Zr,((n,i)=>this.er(t,n,i).next((t=>t?Wr.resolve():e(i)))))}removeTargets(t,e,n){return this.persistence.getTargetCache().removeTargets(t,e,n)}removeOrphanedDocuments(t,e){let n=0;const i=this.persistence.getRemoteDocumentCache(),r=i.newChangeBuffer();return i.Fr(t,(i=>this.er(t,i,e).next((t=>{t||(n++,r.removeEntry(i,Cr.min()))})))).next((()=>r.apply(t))).next((()=>n))}markPotentiallyOrphaned(t,e){return this.Zr.set(e,t.currentSequenceNumber),Wr.resolve()}removeTarget(t,e){const n=e.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,n)}addReference(t,e,n){return this.Zr.set(n,t.currentSequenceNumber),Wr.resolve()}removeReference(t,e,n){return this.Zr.set(n,t.currentSequenceNumber),Wr.resolve()}updateLimboDocument(t,e){return this.Zr.set(e,t.currentSequenceNumber),Wr.resolve()}Kr(t){let e=t.key.toString().length;return t.isFoundDocument()&&(e+=fo(t.data.value)),e}er(t,e,n){return Wr.or([()=>this.persistence.Gr(t,e),()=>this.persistence.getTargetCache().containsKey(t,e),()=>{const t=this.Zr.get(e);return Wr.resolve(void 0!==t&&t>n)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hh{constructor(t){this.serializer=t}N(t,e,n,i){const r=new zr("createOrUpgrade",e);n<1&&i>=1&&(function(t){t.createObjectStore("owner")}(t),function(t){t.createObjectStore("mutationQueues",{keyPath:"userId"}),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hs,{unique:!0}),t.createObjectStore("documentMutations")}(t),Ah(t),function(t){t.createObjectStore("remoteDocuments")}(t));let s=Wr.resolve();return n<3&&i>=3&&(0!==n&&(function(t){t.deleteObjectStore("targetDocuments"),t.deleteObjectStore("targets"),t.deleteObjectStore("targetGlobal")}(t),Ah(t)),s=s.next((()=>function(t){const e=t.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Cr.min().toTimestamp(),targetCount:0};return e.put("targetGlobalKey",n)}(r)))),n<4&&i>=4&&(0!==n&&(s=s.next((()=>function(t,e){return e.store("mutations").W().next((n=>{t.deleteObjectStore("mutations"),t.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",hs,{unique:!0});const i=e.store("mutations"),r=n.map((t=>i.put(t)));return Wr.waitFor(r)}))}(t,r)))),s=s.next((()=>{!function(t){t.createObjectStore("clientMetadata",{keyPath:"clientId"})}(t)}))),n<5&&i>=5&&(s=s.next((()=>this.Xr(r)))),n<6&&i>=6&&(s=s.next((()=>(function(t){t.createObjectStore("remoteDocumentGlobal")}(t),this.ei(r))))),n<7&&i>=7&&(s=s.next((()=>this.ti(r)))),n<8&&i>=8&&(s=s.next((()=>this.ni(t,r)))),n<9&&i>=9&&(s=s.next((()=>{!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t)}))),n<10&&i>=10&&(s=s.next((()=>this.ri(r)))),n<11&&i>=11&&(s=s.next((()=>{!function(t){t.createObjectStore("bundles",{keyPath:"bundleId"})}(t),function(t){t.createObjectStore("namedQueries",{keyPath:"name"})}(t)}))),n<12&&i>=12&&(s=s.next((()=>{!function(t){const e=t.createObjectStore("documentOverlays",{keyPath:Ss});e.createIndex("collectionPathOverlayIndex",Bs,{unique:!1}),e.createIndex("collectionGroupOverlayIndex",Ts,{unique:!1})}(t)}))),n<13&&i>=13&&(s=s.next((()=>function(t){const e=t.createObjectStore("remoteDocumentsV14",{keyPath:ps});e.createIndex("documentKeyIndex",gs),e.createIndex("collectionGroupIndex",ms)}(t))).next((()=>this.ii(t,r))).next((()=>t.deleteObjectStore("remoteDocuments")))),n<14&&i>=14&&(s=s.next((()=>this.si(t,r)))),n<15&&i>=15&&(s=s.next((()=>function(t){t.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),t.createObjectStore("indexState",{keyPath:bs}).createIndex("sequenceNumberIndex",xs,{unique:!1}),t.createObjectStore("indexEntries",{keyPath:Es}).createIndex("documentKeyIndex",Cs,{unique:!1})}(t)))),s}ei(t){let e=0;return t.store("remoteDocuments").Y(((t,n)=>{e+=Eu(n)})).next((()=>{const n={byteSize:e};return t.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}Xr(t){const e=t.store("mutationQueues"),n=t.store("mutations");return e.W().next((e=>Wr.forEach(e,(e=>{const i=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return n.W("userMutationsIndex",i).next((n=>Wr.forEach(n,(n=>{rr(n.userId===e.userId);const i=Pc(this.serializer,n);return xu(t,e.userId,i).next((()=>{}))}))))}))))}ti(t){const e=t.store("targetDocuments"),n=t.store("remoteDocuments");return t.store("targetGlobal").get("targetGlobalKey").next((t=>{const i=[];return n.Y(((n,r)=>{const s=new Br(n),o=function(t){return[0,as(t)]}(s);i.push(e.get(o).next((n=>n?Wr.resolve():(n=>e.put({targetId:0,path:as(n),sequenceNumber:t.highestListenSequenceNumber}))(s))))})).next((()=>Wr.waitFor(i)))}))}ni(t,e){t.createObjectStore("collectionParents",{keyPath:_s});const n=e.store("collectionParents"),i=new du,r=t=>{if(i.add(t)){const e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:as(i)})}};return e.store("remoteDocuments").Y({J:!0},((t,e)=>{const n=new Br(t);return r(n.popLast())})).next((()=>e.store("documentMutations").Y({J:!0},(([t,e,n],i)=>{const s=us(e);return r(s.popLast())}))))}ri(t){const e=t.store("targets");return e.Y(((t,n)=>{const i=Nc(n),r=Oc(this.serializer,i);return e.put(r)}))}ii(t,e){const n=e.store("remoteDocuments"),i=[];return n.Y(((t,n)=>{const r=e.store("remoteDocumentsV14"),s=function(t){return t.document?new Fr(Br.fromString(t.document.name).popFirst(5)):t.noDocument?Fr.fromSegments(t.noDocument.path):t.unknownDocument?Fr.fromSegments(t.unknownDocument.path):ir()}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n).path.toArray(),o={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};i.push(r.put(o))})).next((()=>Wr.waitFor(i)))}si(t,e){const n=e.store("mutations"),i=ju(this.serializer),r=new ah(ch.Hr,this.serializer.ct);return n.W().next((t=>{const n=new Map;return t.forEach((t=>{var e;let i=null!==(e=n.get(t.userId))&&void 0!==e?e:Oa();Pc(this.serializer,t).keys().forEach((t=>i=i.add(t))),n.set(t.userId,i)})),Wr.forEach(n,((t,n)=>{const s=new qi(n),o=jc.lt(this.serializer,s),a=r.getIndexManager(s),l=Cu.lt(s,this.serializer,a,r.referenceDelegate);return new Zu(i,l,o,a).recalculateAndSaveOverlaysForDocumentKeys(new Ps(e,is._e),t).next()}))}))}}function Ah(t){t.createObjectStore("targetDocuments",{keyPath:ys}).createIndex("documentTargetsIndex",ws,{unique:!0}),t.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",vs,{unique:!0}),t.createObjectStore("targetGlobal")}const dh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class fh{constructor(t,e,n,i,r,s,o,a,l,c,u=15){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.oi=r,this.window=s,this.document=o,this._i=l,this.ai=c,this.ui=u,this.kr=null,this.qr=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.li=null,this.hi=null,this.Pi=Number.NEGATIVE_INFINITY,this.Ii=t=>Promise.resolve(),!fh.D())throw new lr(ar.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Qu(this,i),this.Ti=e+"main",this.serializer=new Tc(a),this.Ei=new Kr(this.Ti,this.ui,new hh(this.serializer)),this.Qr=new Lu(this.referenceDelegate,this.serializer),this.remoteDocumentCache=ju(this.serializer),this.$r=new Gc,this.window&&this.window.localStorage?this.di=this.window.localStorage:(this.di=null,!1===c&&tr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Ai().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new lr(ar.FAILED_PRECONDITION,dh);return this.Ri(),this.Vi(),this.mi(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Qr.getHighestSequenceNumber(t)))})).then((t=>{this.kr=new is(t,this._i)})).then((()=>{this.qr=!0})).catch((t=>(this.Ei&&this.Ei.close(),Promise.reject(t))))}fi(t){return this.Ii=async e=>{if(this.started)return t(e)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ei.L((async e=>{null===e.newVersion&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.oi.enqueueAndForget((async()=>{this.started&&await this.Ai()})))}Ai(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>gh(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.gi(t).next((t=>{t||(this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))))}))})).next((()=>this.pi(t))).next((e=>this.isPrimary&&!e?this.yi(t).next((()=>!1)):!!e&&this.wi(t).next((()=>!0)))))).catch((t=>{if(Xr(t))return Ji("IndexedDbPersistence","Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return Ji("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.oi.enqueueRetryable((()=>this.Ii(t))),this.isPrimary=t}))}gi(t){return ph(t).get("owner").next((t=>Wr.resolve(this.Si(t))))}bi(t){return gh(t).delete(this.clientId)}async Di(){if(this.isPrimary&&!this.Ci(this.Pi,18e5)){this.Pi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(t=>{const e=Ns(t,"clientMetadata");return e.W().next((t=>{const n=this.vi(t,18e5),i=t.filter((t=>-1===n.indexOf(t)));return Wr.forEach(i,(t=>e.delete(t.clientId))).next((()=>i))}))})).catch((()=>[]));if(this.di)for(const e of t)this.di.removeItem(this.Fi(e.clientId))}}mi(){this.hi=this.oi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Ai().then((()=>this.Di())).then((()=>this.mi()))))}Si(t){return!!t&&t.ownerId===this.clientId}pi(t){return this.ai?Wr.resolve(!0):ph(t).get("owner").next((e=>{if(null!==e&&this.Ci(e.leaseTimestampMs,5e3)&&!this.Mi(e.ownerId)){if(this.Si(e)&&this.networkEnabled)return!0;if(!this.Si(e)){if(!e.allowTabSynchronization)throw new lr(ar.FAILED_PRECONDITION,dh);return!1}}return!(!this.networkEnabled||!this.inForeground)||gh(t).W().next((t=>void 0===this.vi(t,5e3).find((t=>{if(this.clientId!==t.clientId){const e=!this.networkEnabled&&t.networkEnabled,n=!this.inForeground&&t.inForeground,i=this.networkEnabled===t.networkEnabled;if(e||n&&i)return!0}return!1}))))})).next((t=>(this.isPrimary!==t&&Ji("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t)))}async shutdown(){this.qr=!1,this.xi(),this.hi&&(this.hi.cancel(),this.hi=null),this.Oi(),this.Ni(),await this.Ei.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(t=>{const e=new Ps(t,is._e);return this.yi(e).next((()=>this.bi(e)))})),this.Ei.close(),this.Bi()}vi(t,e){return t.filter((t=>this.Ci(t.updateTimeMs,e)&&!this.Mi(t.clientId)))}Li(){return this.runTransaction("getActiveClients","readonly",(t=>gh(t).W().next((t=>this.vi(t,18e5).map((t=>t.clientId))))))}get started(){return this.qr}getMutationQueue(t,e){return Cu.lt(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new pu(t,this.serializer.ct.databaseId)}getDocumentOverlayCache(t){return jc.lt(this.serializer,t)}getBundleCache(){return this.$r}runTransaction(t,e,n){Ji("IndexedDbPersistence","Starting transaction:",t);const i="readonly"===e?"readonly":"readwrite",r=function(t){return 15===t?Ms:14===t?Rs:13===t?Ls:12===t?Fs:11===t?Is:void ir()}(this.ui);let s;return this.Ei.runTransaction(t,i,r,(i=>(s=new Ps(i,this.kr?this.kr.next():is._e),"readwrite-primary"===e?this.gi(s).next((t=>!!t||this.pi(s))).next((e=>{if(!e)throw tr(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.oi.enqueueRetryable((()=>this.Ii(!1))),new lr(ar.FAILED_PRECONDITION,Hr);return n(s)})).next((t=>this.wi(s).next((()=>t)))):this.ki(s).next((()=>n(s)))))).then((t=>(s.raiseOnCommittedEvent(),t)))}ki(t){return ph(t).get("owner").next((t=>{if(null!==t&&this.Ci(t.leaseTimestampMs,5e3)&&!this.Mi(t.ownerId)&&!this.Si(t)&&!(this.ai||this.allowTabSynchronization&&t.allowTabSynchronization))throw new lr(ar.FAILED_PRECONDITION,dh)}))}wi(t){const e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ph(t).put("owner",e)}static D(){return Kr.D()}yi(t){const e=ph(t);return e.get("owner").next((t=>this.Si(t)?(Ji("IndexedDbPersistence","Releasing primary lease."),e.delete("owner")):Wr.resolve()))}Ci(t,e){const n=Date.now();return!(t<n-e)&&(!(t>n)||(tr(`Detected an update time that is in the future: ${t} > ${n}`),!1))}Ri(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.li=()=>{this.oi.enqueueAndForget((()=>(this.inForeground="visible"===this.document.visibilityState,this.Ai())))},this.document.addEventListener("visibilitychange",this.li),this.inForeground="visible"===this.document.visibilityState)}Oi(){this.li&&(this.document.removeEventListener("visibilitychange",this.li),this.li=null)}Vi(){var t;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,a.nr)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.oi.enterRestrictedMode(!0),this.oi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.ci))}Ni(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Mi(t){var e;try{const n=null!==(null===(e=this.di)||void 0===e?void 0:e.getItem(this.Fi(t)));return Ji("IndexedDbPersistence",`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(t){return tr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}}xi(){if(this.di)try{this.di.setItem(this.Fi(this.clientId),String(Date.now()))}catch(t){tr("Failed to set zombie client id.",t)}}Bi(){if(this.di)try{this.di.removeItem(this.Fi(this.clientId))}catch(t){}}Fi(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function ph(t){return Ns(t,"owner")}function gh(t){return Ns(t,"clientMetadata")}function mh(t,e){let n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class vh{constructor(t,e,n,i){this.targetId=t,this.fromCache=e,this.qi=n,this.Qi=i}static Ki(t,e){let n=Oa(),i=Oa();for(const r of e.docChanges)switch(r.type){case 0:n=n.add(r.doc.key);break;case 1:i=i.add(r.doc.key)}return new vh(t,e.fromCache,n,i)}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wh{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return(0,a.nr)()?8:Kr.v((0,a.ZQ)())>0?6:4}()}initialize(t,e){this.zi=t,this.indexManager=e,this.$i=!0}getDocumentsMatchingQuery(t,e,n,i){const r={result:null};return this.ji(t,e).next((t=>{r.result=t})).next((()=>{if(!r.result)return this.Hi(t,e,i,n).next((t=>{r.result=t}))})).next((()=>{if(r.result)return;const n=new yh;return this.Ji(t,e,n).next((i=>{if(r.result=i,this.Ui)return this.Yi(t,e,n,i.size)}))})).next((()=>r.result))}Yi(t,e,n,i){return n.documentReadCount<this.Wi?(Yi()<=o.$b.DEBUG&&Ji("QueryEngine","SDK will not create cache indexes for query:",wa(e),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Wr.resolve()):(Yi()<=o.$b.DEBUG&&Ji("QueryEngine","Query:",wa(e),"scans",n.documentReadCount,"local documents and returns",i,"documents as results."),n.documentReadCount>this.Gi*i?(Yi()<=o.$b.DEBUG&&Ji("QueryEngine","The SDK decides to create cache indexes for query:",wa(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,fa(e))):Wr.resolve())}ji(t,e){if(ha(e))return Wr.resolve(null);let n=fa(e);return this.indexManager.getIndexType(t,n).next((i=>0===i?null:(null!==e.limit&&1===i&&(e=ma(e,null,"F"),n=fa(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next((i=>{const r=Oa(...i);return this.zi.getDocuments(t,r).next((i=>this.indexManager.getMinOffset(t,n).next((n=>{const s=this.Zi(e,i);return this.Xi(e,s,r,n.readTime)?this.ji(t,ma(e,null,"F")):this.es(t,s,e,n)}))))})))))}Hi(t,e,n,i){return ha(e)||i.isEqual(Cr.min())?Wr.resolve(null):this.zi.getDocuments(t,n).next((r=>{const s=this.Zi(e,r);return this.Xi(e,s,n,i)?Wr.resolve(null):(Yi()<=o.$b.DEBUG&&Ji("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),wa(e)),this.es(t,s,e,Dr(i,-1)).next((t=>t)))}))}Zi(t,e){let n=new Hs(xa(t));return e.forEach(((e,i)=>{_a(t,i)&&(n=n.add(i))})),n}Xi(t,e,n,i){if(null===t.limit)return!1;if(n.size!==e.size)return!0;const r="F"===t.limitType?e.last():e.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(i)>0)}Ji(t,e,n){return Yi()<=o.$b.DEBUG&&Ji("QueryEngine","Using full collection scan to execute query:",wa(e)),this.zi.getDocumentsMatchingQuery(t,e,Qr.min(),n)}es(t,e,n,i){return this.zi.getDocumentsMatchingQuery(t,n,i).next((t=>(e.forEach((e=>{t=t.insert(e.key,e)})),t)))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(t,e,n,i){this.persistence=t,this.ts=e,this.serializer=i,this.ns=new Us(_r),this.rs=new Ca((t=>na(t)),ia),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(n)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Zu(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(e=>t.collect(e,this.ns)))}}function bh(t,e,n,i){return new _h(t,e,n,i)}async function xh(t,e){const n=or(t);return await n.persistence.runTransaction("Handle user change","readonly",(t=>{let i;return n.mutationQueue.getAllMutationBatches(t).next((r=>(i=r,n._s(e),n.mutationQueue.getAllMutationBatches(t)))).next((e=>{const r=[],s=[];let o=Oa();for(const t of i){r.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}for(const t of e){s.push(t.batchId);for(const e of t.mutations)o=o.add(e.key)}return n.localDocuments.getDocuments(t,o).next((t=>({us:t,removedBatchIds:r,addedBatchIds:s})))}))}))}function Eh(t,e){const n=or(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(t=>{const i=e.batch.keys(),r=n.os.newChangeBuffer({trackRemovals:!0});return function(t,e,n,i){const r=n.batch,s=r.keys();let o=Wr.resolve();return s.forEach((t=>{o=o.next((()=>i.getEntry(e,t))).next((e=>{const s=n.docVersions.get(t);rr(null!==s),e.version.compareTo(s)<0&&(r.applyToRemoteDocument(e,n),e.isValidDocument()&&(e.setReadTime(n.commitVersion),i.addEntry(e)))}))})),o.next((()=>t.mutationQueue.removeMutationBatch(e,r)))}(n,t,e,r).next((()=>r.apply(t))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,function(t){let e=Oa();for(let n=0;n<t.mutationResults.length;++n)t.mutationResults[n].transformResults.length>0&&(e=e.add(t.batch.mutations[n].key));return e}(e)))).next((()=>n.localDocuments.getDocuments(t,i)))}))}function Ch(t){const e=or(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Qr.getLastRemoteSnapshotVersion(t)))}function Sh(t,e){const n=or(t),i=e.snapshotVersion;let r=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(t=>{const s=n.os.newChangeBuffer({trackRemovals:!0});r=n.ns;const o=[];e.targetChanges.forEach(((s,a)=>{const l=r.get(a);if(!l)return;o.push(n.Qr.removeMatchingKeys(t,s.removedDocuments,a).next((()=>n.Qr.addMatchingKeys(t,s.addedDocuments,a))));let c=l.withSequenceNumber(t.currentSequenceNumber);null!==e.targetMismatches.get(a)?c=c.withResumeToken(qs.EMPTY_BYTE_STRING,Cr.min()).withLastLimboFreeSnapshotVersion(Cr.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,i)),r=r.insert(a,c),function(t,e,n){return 0===t.resumeToken.approximateByteSize()||(e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,s)&&o.push(n.Qr.updateTargetData(t,c))}));let a=Ba(),l=Oa();if(e.documentUpdates.forEach((i=>{e.resolvedLimboDocuments.has(i)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(t,i))})),o.push(Bh(t,s,e.documentUpdates).next((t=>{a=t.cs,l=t.ls}))),!i.isEqual(Cr.min())){const e=n.Qr.getLastRemoteSnapshotVersion(t).next((e=>n.Qr.setTargetsMetadata(t,t.currentSequenceNumber,i)));o.push(e)}return Wr.waitFor(o).next((()=>s.apply(t))).next((()=>n.localDocuments.getLocalViewOfDocuments(t,a,l))).next((()=>a))})).then((t=>(n.ns=r,t)))}function Bh(t,e,n){let i=Oa(),r=Oa();return n.forEach((t=>i=i.add(t))),e.getEntries(t,i).next((t=>{let i=Ba();return n.forEach(((n,s)=>{const o=t.get(n);s.isFoundDocument()!==o.isFoundDocument()&&(r=r.add(n)),s.isNoDocument()&&s.version.isEqual(Cr.min())?(e.removeEntry(n,s.readTime),i=i.insert(n,s)):!o.isValidDocument()||s.version.compareTo(o.version)>0||0===s.version.compareTo(o.version)&&o.hasPendingWrites?(e.addEntry(s),i=i.insert(n,s)):Ji("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",s.version)})),{cs:i,ls:r}}))}function Th(t,e){const n=or(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(t=>(void 0===e&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(t,e))))}function Ih(t,e){const n=or(t);return n.persistence.runTransaction("Allocate target","readwrite",(t=>{let i;return n.Qr.getTargetData(t,e).next((r=>r?(i=r,Wr.resolve(i)):n.Qr.allocateTargetId(t).next((r=>(i=new Bc(e,r,"TargetPurposeListen",t.currentSequenceNumber),n.Qr.addTargetData(t,i).next((()=>i)))))))})).then((t=>{const i=n.ns.get(t.targetId);return(null===i||t.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(t.targetId,t),n.rs.set(e,t.targetId)),t}))}async function Fh(t,e,n){const i=or(t),r=i.ns.get(e),s=n?"readwrite":"readwrite-primary";try{n||await i.persistence.runTransaction("Release target",s,(t=>i.persistence.referenceDelegate.removeTarget(t,r)))}catch(t){if(!Xr(t))throw t;Ji("LocalStore",`Failed to update sequence numbers for target ${e}: ${t}`)}i.ns=i.ns.remove(e),i.rs.delete(r.target)}function Lh(t,e,n){const i=or(t);let r=Cr.min(),s=Oa();return i.persistence.runTransaction("Execute query","readwrite",(t=>function(t,e,n){const i=or(t),r=i.rs.get(n);return void 0!==r?Wr.resolve(i.ns.get(r)):i.Qr.getTargetData(e,n)}(i,t,fa(e)).next((e=>{if(e)return r=e.lastLimboFreeSnapshotVersion,i.Qr.getMatchingKeysForTargetId(t,e.targetId).next((t=>{s=t}))})).next((()=>i.ts.getDocumentsMatchingQuery(t,e,n?r:Cr.min(),n?s:Oa()))).next((t=>(Ph(i,ba(e),t),{documents:t,hs:s})))))}function Rh(t,e){const n=or(t),i=or(n.Qr),r=n.ns.get(e);return r?Promise.resolve(r.target):n.persistence.runTransaction("Get target data","readonly",(t=>i._t(t,e).next((t=>t?t.target:null))))}function Mh(t,e){const n=or(t),i=n.ss.get(e)||Cr.min();return n.persistence.runTransaction("Get new document changes","readonly",(t=>n.os.getAllFromCollectionGroup(t,e,Dr(i,-1),Number.MAX_SAFE_INTEGER))).then((t=>(Ph(n,e,t),t)))}function Ph(t,e,n){let i=t.ss.get(e)||Cr.min();n.forEach(((t,e)=>{e.readTime.compareTo(i)>0&&(i=e.readTime)})),t.ss.set(e,i)}async function Nh(t,e,n,i){const r=or(t);let s=Oa(),o=Ba();for(const c of n){const t=e.Ps(c.metadata.name);c.document&&(s=s.add(t));const n=e.Is(c);n.setReadTime(e.Ts(c.metadata.readTime)),o=o.insert(t,n)}const a=r.os.newChangeBuffer({trackRemovals:!0}),l=await Ih(r,function(t){return fa(ua(Br.fromString(`__bundle__/docs/${t}`)))}(i));return r.persistence.runTransaction("Apply bundle documents","readwrite",(t=>Bh(t,a,o).next((e=>(a.apply(t),e))).next((e=>r.Qr.removeMatchingKeysForTargetId(t,l.targetId).next((()=>r.Qr.addMatchingKeys(t,s,l.targetId))).next((()=>r.localDocuments.getLocalViewOfDocuments(t,e.cs,e.ls))).next((()=>e.cs))))))}async function Oh(t,e,n=Oa()){const i=await Ih(t,fa(kc(e.bundledQuery))),r=or(t);return r.persistence.runTransaction("Save named query","readwrite",(t=>{const s=Yl(e.readTime);if(i.snapshotVersion.compareTo(s)>=0)return r.$r.saveNamedQuery(t,e);const o=i.withResumeToken(qs.EMPTY_BYTE_STRING,s);return r.ns=r.ns.insert(o.targetId,o),r.Qr.updateTargetData(t,o).next((()=>r.Qr.removeMatchingKeysForTargetId(t,i.targetId))).next((()=>r.Qr.addMatchingKeys(t,n,i.targetId))).next((()=>r.$r.saveNamedQuery(t,e)))}))}function kh(t,e){return`firestore_clients_${t}_${e}`}function Dh(t,e,n){let i=`firestore_mutations_${t}_${n}`;return e.isAuthenticated()&&(i+=`_${e.uid}`),i}function Uh(t,e){return`firestore_targets_${t}_${e}`}class Qh{constructor(t,e,n,i){this.user=t,this.batchId=e,this.state=n,this.error=i}static Es(t,e,n){const i=JSON.parse(n);let r,s="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return s&&i.error&&(s="string"==typeof i.error.message&&"string"==typeof i.error.code,s&&(r=new lr(i.error.code,i.error.message))),s?new Qh(t,e,i.state,r):(tr("SharedClientState",`Failed to parse mutation state for ID '${e}': ${n}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Gh{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static Es(t,e){const n=JSON.parse(e);let i,r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code,r&&(i=new lr(n.error.code,n.error.message))),r?new Gh(t,n.state,i):(tr("SharedClientState",`Failed to parse target state for ID '${t}': ${e}`),null)}ds(){const t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}}class Hh{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static Es(t,e){const n=JSON.parse(e);let i="object"==typeof n&&n.activeTargetIds instanceof Array,r=Da();for(let s=0;i&&s<n.activeTargetIds.length;++s)i=os(n.activeTargetIds[s]),r=r.add(n.activeTargetIds[s]);return i?new Hh(t,r):(tr("SharedClientState",`Failed to parse client data for instance '${t}': ${e}`),null)}}class Vh{constructor(t,e){this.clientId=t,this.onlineState=e}static Es(t){const e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Vh(e.clientId,e.onlineState):(tr("SharedClientState",`Failed to parse online state: ${t}`),null)}}class jh{constructor(){this.activeTargetIds=Da()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class Wh{constructor(t,e,n,i,r){this.window=t,this.oi=e,this.persistenceKey=n,this.Vs=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.fs=this.gs.bind(this),this.ps=new Us(_r),this.started=!1,this.ys=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=r,this.ws=kh(this.persistenceKey,this.Vs),this.Ss=function(t){return`firestore_sequence_number_${t}`}
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.persistenceKey),this.ps=this.ps.insert(this.Vs,new jh),this.bs=new RegExp(`^firestore_clients_${s}_([^_]*)$`),this.Ds=new RegExp(`^firestore_mutations_${s}_(\\d+)(?:_(.*))?$`),this.Cs=new RegExp(`^firestore_targets_${s}_(\\d+)$`),this.vs=function(t){return`firestore_online_state_${t}`}(this.persistenceKey),this.Fs=function(t){return`firestore_bundle_loaded_v2_${t}`}(this.persistenceKey),this.window.addEventListener("storage",this.fs)}static D(t){return!(!t||!t.localStorage)}async start(){const t=await this.syncEngine.Li();for(const n of t){if(n===this.Vs)continue;const t=this.getItem(kh(this.persistenceKey,n));if(t){const e=Hh.Es(n,t);e&&(this.ps=this.ps.insert(e.clientId,e))}}this.Ms();const e=this.storage.getItem(this.vs);if(e){const t=this.xs(e);t&&this.Os(t)}for(const n of this.ys)this.gs(n);this.ys=[],this.window.addEventListener("pagehide",(()=>this.shutdown())),this.started=!0}writeSequenceNumber(t){this.setItem(this.Ss,JSON.stringify(t))}getAllActiveQueryTargets(){return this.Ns(this.ps)}isActiveQueryTarget(t){let e=!1;return this.ps.forEach(((n,i)=>{i.activeTargetIds.has(t)&&(e=!0)})),e}addPendingMutation(t){this.Bs(t,"pending")}updateMutationState(t,e,n){this.Bs(t,e,n),this.Ls(t)}addLocalQueryTarget(t){let e="not-current";if(this.isActiveQueryTarget(t)){const n=this.storage.getItem(Uh(this.persistenceKey,t));if(n){const i=Gh.Es(t,n);i&&(e=i.state)}}return this.ks.As(t),this.Ms(),e}removeLocalQueryTarget(t){this.ks.Rs(t),this.Ms()}isLocalQueryTarget(t){return this.ks.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(Uh(this.persistenceKey,t))}updateQueryState(t,e,n){this.qs(t,e,n)}handleUserChange(t,e,n){e.forEach((t=>{this.Ls(t)})),this.currentUser=t,n.forEach((t=>{this.addPendingMutation(t)}))}setOnlineState(t){this.Qs(t)}notifyBundleLoaded(t){this.Ks(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.fs),this.removeItem(this.ws),this.started=!1)}getItem(t){const e=this.storage.getItem(t);return Ji("SharedClientState","READ",t,e),e}setItem(t,e){Ji("SharedClientState","SET",t,e),this.storage.setItem(t,e)}removeItem(t){Ji("SharedClientState","REMOVE",t),this.storage.removeItem(t)}gs(t){const e=t;if(e.storageArea===this.storage){if(Ji("SharedClientState","EVENT",e.key,e.newValue),e.key===this.ws)return void tr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.oi.enqueueRetryable((async()=>{if(this.started){if(null!==e.key)if(this.bs.test(e.key)){if(null==e.newValue){const t=this.$s(e.key);return this.Us(t,null)}{const t=this.Ws(e.key,e.newValue);if(t)return this.Us(t.clientId,t)}}else if(this.Ds.test(e.key)){if(null!==e.newValue){const t=this.Gs(e.key,e.newValue);if(t)return this.zs(t)}}else if(this.Cs.test(e.key)){if(null!==e.newValue){const t=this.js(e.key,e.newValue);if(t)return this.Hs(t)}}else if(e.key===this.vs){if(null!==e.newValue){const t=this.xs(e.newValue);if(t)return this.Os(t)}}else if(e.key===this.Ss){const t=function(t){let e=is._e;if(null!=t)try{const n=JSON.parse(t);rr("number"==typeof n),e=n}catch(t){tr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(e.newValue);t!==is._e&&this.sequenceNumberHandler(t)}else if(e.key===this.Fs){const t=this.Js(e.newValue);await Promise.all(t.map((t=>this.syncEngine.Ys(t))))}}else this.ys.push(e)}))}}get ks(){return this.ps.get(this.Vs)}Ms(){this.setItem(this.ws,this.ks.ds())}Bs(t,e,n){const i=new Qh(this.currentUser,t,e,n),r=Dh(this.persistenceKey,this.currentUser,t);this.setItem(r,i.ds())}Ls(t){const e=Dh(this.persistenceKey,this.currentUser,t);this.removeItem(e)}Qs(t){const e={clientId:this.Vs,onlineState:t};this.storage.setItem(this.vs,JSON.stringify(e))}qs(t,e,n){const i=Uh(this.persistenceKey,t),r=new Gh(t,e,n);this.setItem(i,r.ds())}Ks(t){const e=JSON.stringify(Array.from(t));this.setItem(this.Fs,e)}$s(t){const e=this.bs.exec(t);return e?e[1]:null}Ws(t,e){const n=this.$s(t);return Hh.Es(n,e)}Gs(t,e){const n=this.Ds.exec(t),i=Number(n[1]),r=void 0!==n[2]?n[2]:null;return Qh.Es(new qi(r),i,e)}js(t,e){const n=this.Cs.exec(t),i=Number(n[1]);return Gh.Es(i,e)}xs(t){return Vh.Es(t)}Js(t){return JSON.parse(t)}async zs(t){if(t.user.uid===this.currentUser.uid)return this.syncEngine.Zs(t.batchId,t.state,t.error);Ji("SharedClientState",`Ignoring mutation for non-active user ${t.user.uid}`)}Hs(t){return this.syncEngine.Xs(t.targetId,t.state,t.error)}Us(t,e){const n=e?this.ps.insert(t,e):this.ps.remove(t),i=this.Ns(this.ps),r=this.Ns(n),s=[],o=[];return r.forEach((t=>{i.has(t)||s.push(t)})),i.forEach((t=>{r.has(t)||o.push(t)})),this.syncEngine.eo(s,o).then((()=>{this.ps=n}))}Os(t){this.ps.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}Ns(t){let e=Da();return t.forEach(((t,n)=>{e=e.unionWith(n.activeTargetIds)})),e}}class zh{constructor(){this.no=new jh,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,e,n){this.ro[t]=e}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new jh,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kh{io(t){}shutdown(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qh{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){Ji("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){Ji("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h=null;function Xh(){return null===$h?$h=function(){return 268435456+Math.round(2147483648*Math.random())}():$h++,"0x"+$h.toString(16)
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const Yh={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zh{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}onMessage(t){this.Ao=t}close(){this.ho()}send(t){this.lo(t)}Ro(){this.Io()}Vo(t){this.Eo(t)}mo(t){this.Ao(t)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jh="WebChannelConnection";class tA extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const e=t.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.fo=e+"://"+t.host,this.po=`projects/${n}/databases/${i}`,this.yo="(default)"===this.databaseId.database?`project_id=${n}`:`project_id=${n}&database_id=${i}`}get wo(){return!1}So(t,e,n,i,r){const s=Xh(),o=this.bo(t,e.toUriEncodedString());Ji("RestConnection",`Sending RPC '${t}' ${s}:`,o,n);const a={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(a,i,r),this.Co(t,o,a,n).then((e=>(Ji("RestConnection",`Received RPC '${t}' ${s}: `,e),e)),(e=>{throw er("RestConnection",`RPC '${t}' ${s} failed with error: `,e,"url: ",o,"request:",n),e}))}vo(t,e,n,i,r,s){return this.So(t,e,n,i,r)}Do(t,e,n){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+$i}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e&&e.headers.forEach(((e,n)=>t[n]=e)),n&&n.headers.forEach(((e,n)=>t[n]=e))}bo(t,e){const n=Yh[t];return`${this.fo}/v1/${e}:${n}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Co(t,e,n,i){const r=Xh();return new Promise(((s,o)=>{const a=new ji;a.setWithCredentials(!0),a.listenOnce(Qi.COMPLETE,(()=>{try{switch(a.getLastErrorCode()){case Ui.NO_ERROR:const e=a.getResponseJson();Ji(Jh,`XHR for RPC '${t}' ${r} received:`,JSON.stringify(e)),s(e);break;case Ui.TIMEOUT:Ji(Jh,`RPC '${t}' ${r} timed out`),o(new lr(ar.DEADLINE_EXCEEDED,"Request time out"));break;case Ui.HTTP_ERROR:const n=a.getStatus();if(Ji(Jh,`RPC '${t}' ${r} failed with status:`,n,"response text:",a.getResponseText()),n>0){let t=a.getResponseJson();Array.isArray(t)&&(t=t[0]);const e=null==t?void 0:t.error;if(e&&e.status&&e.message){const t=function(t){const e=t.toLowerCase().replace(/_/g,"-");return Object.values(ar).indexOf(e)>=0?e:ar.UNKNOWN}(e.status);o(new lr(t,e.message))}else o(new lr(ar.UNKNOWN,"Server responded with status "+a.getStatus()))}else o(new lr(ar.UNAVAILABLE,"Connection failed."));break;default:ir()}}finally{Ji(Jh,`RPC '${t}' ${r} completed.`)}}));const l=JSON.stringify(i);Ji(Jh,`RPC '${t}' ${r} sending request:`,i),a.send(e,"POST",l,n,15)}))}Fo(t,e,n){const i=Xh(),r=[this.fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],s=ki(),o=Di(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(a.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(a.useFetchStreams=!0),this.Do(a.initMessageHeaders,e,n),a.encodeInitMessageHeaders=!0;const c=r.join("");Ji(Jh,`Creating RPC '${t}' stream ${i}: ${c}`,a);const u=s.createWebChannel(c,a);let h=!1,A=!1;const d=new Zh({lo:e=>{A?Ji(Jh,`Not sending because RPC '${t}' stream ${i} is closed:`,e):(h||(Ji(Jh,`Opening RPC '${t}' stream ${i} transport.`),u.open(),h=!0),Ji(Jh,`RPC '${t}' stream ${i} sending:`,e),u.send(e))},ho:()=>u.close()}),f=(t,e,n)=>{t.listen(e,(t=>{try{n(t)}catch(t){setTimeout((()=>{throw t}),0)}}))};return f(u,Vi.EventType.OPEN,(()=>{A||Ji(Jh,`RPC '${t}' stream ${i} transport opened.`)})),f(u,Vi.EventType.CLOSE,(()=>{A||(A=!0,Ji(Jh,`RPC '${t}' stream ${i} transport closed`),d.Vo())})),f(u,Vi.EventType.ERROR,(e=>{A||(A=!0,er(Jh,`RPC '${t}' stream ${i} transport errored:`,e),d.Vo(new lr(ar.UNAVAILABLE,"The operation could not be completed")))})),f(u,Vi.EventType.MESSAGE,(e=>{var n;if(!A){const r=e.data[0];rr(!!r);const s=r,o=s.error||(null===(n=s[0])||void 0===n?void 0:n.error);if(o){Ji(Jh,`RPC '${t}' stream ${i} received error:`,o);const e=o.status;let n=function(t){const e=xl[t];if(void 0!==e)return Sl(e)}(e),r=o.message;void 0===n&&(n=ar.INTERNAL,r="Unknown error status: "+e+" with message "+o.message),A=!0,d.Vo(new lr(n,r)),u.close()}else Ji(Jh,`RPC '${t}' stream ${i} received:`,r),d.mo(r)}})),f(o,Gi.STAT_EVENT,(e=>{e.stat===Hi.PROXY?Ji(Jh,`RPC '${t}' stream ${i} detected buffering proxy`):e.stat===Hi.NOPROXY&&Ji(Jh,`RPC '${t}' stream ${i} detected no buffering proxy`)})),setTimeout((()=>{d.Ro()}),0),d}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(){return"undefined"!=typeof window?window:null}function nA(){return"undefined"!=typeof document?document:null}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iA(t){return new zl(t,!0)}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(t,e,n=1e3,i=1.5,r=6e4){this.oi=t,this.timerId=e,this.Mo=n,this.xo=i,this.Oo=r,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(t){this.cancel();const e=Math.floor(this.No+this.Qo()),n=Math.max(0,Date.now()-this.Lo),i=Math.max(0,e-n);i>0&&Ji("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.No} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,i,(()=>(this.Lo=Date.now(),t()))),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){null!==this.Bo&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){null!==this.Bo&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(t,e,n,i,r,s,o,a){this.oi=t,this.$o=n,this.Uo=i,this.connection=r,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=o,this.listener=a,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new rA(t,e)}Ho(){return 1===this.state||5===this.state||this.Jo()}Jo(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&null===this.Go&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,(()=>this.e_())))}t_(t){this.n_(),this.stream.send(t)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(t,e){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,4!==t?this.jo.reset():e&&e.code===ar.RESOURCE_EXHAUSTED?(tr(e.toString()),tr("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):e&&e.code===ar.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.i_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.To(e)}i_(){}auth(){this.state=1;const t=this.s_(this.Wo),e=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([t,n])=>{this.Wo===e&&this.o_(t,n)}),(e=>{t((()=>{const t=new lr(ar.UNKNOWN,"Fetching auth token failed: "+e.message);return this.__(t)}))}))}o_(t,e){const n=this.s_(this.Wo);this.stream=this.a_(t,e),this.stream.Po((()=>{n((()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,(()=>(this.Jo()&&(this.state=3),Promise.resolve()))),this.listener.Po())))})),this.stream.To((t=>{n((()=>this.__(t)))})),this.stream.onMessage((t=>{n((()=>this.onMessage(t)))}))}Yo(){this.state=5,this.jo.qo((async()=>{this.state=0,this.start()}))}__(t){return Ji("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}s_(t){return e=>{this.oi.enqueueAndForget((()=>this.Wo===t?e():(Ji("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class oA extends sA{constructor(t,e,n,i,r,s){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r}a_(t,e){return this.connection.Fo("Listen",t,e)}onMessage(t){this.jo.reset();const e=uc(this.serializer,t),n=function(t){if(!("targetChange"in t))return Cr.min();const e=t.targetChange;return e.targetIds&&e.targetIds.length?Cr.min():e.readTime?Yl(e.readTime):Cr.min()}(t);return this.listener.u_(e,n)}c_(t){const e={};e.database=sc(this.serializer),e.addTarget=function(t,e){let n;const i=e.target;if(n=ra(i)?{documents:fc(t,i)}:{query:pc(t,i).ut},n.targetId=e.targetId,e.resumeToken.approximateByteSize()>0){n.resumeToken=$l(t,e.resumeToken);const i=Kl(t,e.expectedCount);null!==i&&(n.expectedCount=i)}else if(e.snapshotVersion.compareTo(Cr.min())>0){n.readTime=ql(t,e.snapshotVersion.toTimestamp());const i=Kl(t,e.expectedCount);null!==i&&(n.expectedCount=i)}return n}(this.serializer,t);const n=mc(this.serializer,t);n&&(e.labels=n),this.t_(e)}l_(t){const e={};e.database=sc(this.serializer),e.removeTarget=t,this.t_(e)}}class aA extends sA{constructor(t,e,n,i,r,s){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,i,s),this.serializer=r,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(t,e){return this.connection.Fo("Write",t,e)}onMessage(t){if(rr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.h_){this.jo.reset();const e=dc(t.writeResults,t.commitTime),n=Yl(t.commitTime);return this.listener.T_(n,e)}return rr(!t.writeResults||0===t.writeResults.length),this.h_=!0,this.listener.E_()}d_(){const t={};t.database=sc(this.serializer),this.t_(t)}I_(t){const e={streamToken:this.lastStreamToken,writes:t.map((t=>hc(this.serializer,t)))};this.t_(e)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA extends class{}{constructor(t,e,n,i){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=i,this.A_=!1}R_(){if(this.A_)throw new lr(ar.FAILED_PRECONDITION,"The client has already been terminated.")}So(t,e,n,i){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,s])=>this.connection.So(t,Jl(e,n),i,r,s))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new lr(ar.UNKNOWN,t.toString())}))}vo(t,e,n,i,r){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.vo(t,Jl(e,n),i,s,o,r))).catch((t=>{throw"FirebaseError"===t.name?(t.code===ar.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),t):new lr(ar.UNKNOWN,t.toString())}))}terminate(){this.A_=!0,this.connection.terminate()}}async function cA(t,e,n){var i;const r=or(t),{request:s,V_:o,parent:a}=function(t,e,n){const{ut:i,parent:r}=pc(t,e),s={},o=[];let a=0;return n.forEach((t=>{const e="aggregate_"+a++;s[e]=t.alias,"count"===t.aggregateType?o.push({alias:e,count:{}}):"avg"===t.aggregateType?o.push({alias:e,avg:{field:bc(t.fieldPath)}}):"sum"===t.aggregateType&&o.push({alias:e,sum:{field:bc(t.fieldPath)}})})),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},V_:s,parent:r}}(r.serializer,function(t){const e=or(t);return e.Pe||(e.Pe=pa(e,t.explicitOrderBy)),e.Pe}(e),n);r.connection.wo||delete s.parent;const l=(await r.vo("RunAggregationQuery",r.serializer.databaseId,a,s,1)).filter((t=>!!t.result));rr(1===l.length);const c=null===(i=l[0].result)||void 0===i?void 0:i.aggregateFields;return Object.keys(c).reduce(((t,e)=>(t[o[e]]=c[e],t)),{})}class uA{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){0===this.m_&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve()))))}S_(t){"Online"===this.state?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.y_("Offline")))}set(t){this.b_(),this.m_=0,"Online"===t&&(this.g_=!1),this.y_(t)}y_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}w_(t){const e=`Could not reach Cloud Firestore backend. ${t}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(tr(e),this.g_=!1):Ji("OnlineStateTracker",e)}b_(){null!==this.f_&&(this.f_.cancel(),this.f_=null)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hA{constructor(t,e,n,i,r){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=r,this.M_.io((t=>{n.enqueueAndForget((async()=>{wA(this)&&(Ji("RemoteStore","Restarting streams for network reachability change."),await async function(t){const e=or(t);e.v_.add(4),await dA(e),e.x_.set("Unknown"),e.v_.delete(4),await AA(e)}(this))}))})),this.x_=new uA(n,i)}}async function AA(t){if(wA(t))for(const e of t.F_)await e(!0)}async function dA(t){for(const e of t.F_)await e(!1)}function fA(t,e){const n=or(t);n.C_.has(e.targetId)||(n.C_.set(e.targetId,e),yA(n)?vA(n):DA(n).Jo()&&gA(n,e))}function pA(t,e){const n=or(t),i=DA(n);n.C_.delete(e),i.Jo()&&mA(n,e),0===n.C_.size&&(i.Jo()?i.Xo():wA(n)&&n.x_.set("Unknown"))}function gA(t,e){if(t.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Cr.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}DA(t).c_(e)}function mA(t,e){t.O_.Oe(e),DA(t).l_(e)}function vA(t){t.O_=new Ql({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>t.C_.get(e)||null,nt:()=>t.datastore.serializer.databaseId}),DA(t).start(),t.x_.p_()}function yA(t){return wA(t)&&!DA(t).Ho()&&t.C_.size>0}function wA(t){return 0===or(t).v_.size}function _A(t){t.O_=void 0}async function bA(t){t.C_.forEach(((e,n)=>{gA(t,e)}))}async function xA(t,e){_A(t),yA(t)?(t.x_.S_(e),vA(t)):t.x_.set("Unknown")}async function EA(t,e,n){if(t.x_.set("Online"),e instanceof Dl&&2===e.state&&e.cause)try{await async function(t,e){const n=e.cause;for(const i of e.targetIds)t.C_.has(i)&&(await t.remoteSyncer.rejectListen(i,n),t.C_.delete(i),t.O_.removeTarget(i))}(t,e)}catch(n){Ji("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await CA(t,n)}else if(e instanceof Ol?t.O_.$e(e):e instanceof kl?t.O_.Je(e):t.O_.Ge(e),!n.isEqual(Cr.min()))try{const e=await Ch(t.localStore);n.compareTo(e)>=0&&await function(t,e){const n=t.O_.it(e);return n.targetChanges.forEach(((n,i)=>{if(n.resumeToken.approximateByteSize()>0){const r=t.C_.get(i);r&&t.C_.set(i,r.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach(((e,n)=>{const i=t.C_.get(e);if(!i)return;t.C_.set(e,i.withResumeToken(qs.EMPTY_BYTE_STRING,i.snapshotVersion)),mA(t,e);const r=new Bc(i.target,e,n,i.sequenceNumber);gA(t,r)})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)}catch(e){Ji("RemoteStore","Failed to raise snapshot:",e),await CA(t,e)}}async function CA(t,e,n){if(!Xr(e))throw e;t.v_.add(1),await dA(t),t.x_.set("Offline"),n||(n=()=>Ch(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Ji("RemoteStore","Retrying IndexedDB access"),await n(),t.v_.delete(1),await AA(t)}))}function SA(t,e){return e().catch((n=>CA(t,n,e)))}async function BA(t){const e=or(t),n=UA(e);let i=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;TA(e);)try{const t=await Th(e.localStore,i);if(null===t){0===e.D_.length&&n.Xo();break}i=t.batchId,IA(e,t)}catch(t){await CA(e,t)}FA(e)&&LA(e)}function TA(t){return wA(t)&&t.D_.length<10}function IA(t,e){t.D_.push(e);const n=UA(t);n.Jo()&&n.P_&&n.I_(e.mutations)}function FA(t){return wA(t)&&!UA(t).Ho()&&t.D_.length>0}function LA(t){UA(t).start()}async function RA(t){UA(t).d_()}async function MA(t){const e=UA(t);for(const n of t.D_)e.I_(n.mutations)}async function PA(t,e,n){const i=t.D_.shift(),r=yl.from(i,e,n);await SA(t,(()=>t.remoteSyncer.applySuccessfulWrite(r))),await BA(t)}async function NA(t,e){e&&UA(t).P_&&await async function(t,e){if(function(t){return Cl(t)&&t!==ar.ABORTED}(e.code)){const n=t.D_.shift();UA(t).Zo(),await SA(t,(()=>t.remoteSyncer.rejectFailedWrite(n.batchId,e))),await BA(t)}}(t,e),FA(t)&&LA(t)}async function OA(t,e){const n=or(t);n.asyncQueue.verifyOperationInProgress(),Ji("RemoteStore","RemoteStore received new credentials");const i=wA(n);n.v_.add(3),await dA(n),i&&n.x_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.v_.delete(3),await AA(n)}async function kA(t,e){const n=or(t);e?(n.v_.delete(2),await AA(n)):e||(n.v_.add(2),await dA(n),n.x_.set("Unknown"))}function DA(t){return t.N_||(t.N_=function(t,e,n){const i=or(t);return i.R_(),new oA(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)
/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}(t.datastore,t.asyncQueue,{Po:bA.bind(null,t),To:xA.bind(null,t),u_:EA.bind(null,t)}),t.F_.push((async e=>{e?(t.N_.Zo(),yA(t)?vA(t):t.x_.set("Unknown")):(await t.N_.stop(),_A(t))}))),t.N_}function UA(t){return t.B_||(t.B_=function(t,e,n){const i=or(t);return i.R_(),new aA(e,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,n)}(t.datastore,t.asyncQueue,{Po:RA.bind(null,t),To:NA.bind(null,t),E_:MA.bind(null,t),T_:PA.bind(null,t)}),t.F_.push((async e=>{e?(t.B_.Zo(),await BA(t)):(await t.B_.stop(),t.D_.length>0&&(Ji("RemoteStore",`Stopping write stream with ${t.D_.length} pending writes`),t.D_=[]))}))),t.B_
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class QA{constructor(t,e,n,i,r){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=i,this.removalCallback=r,this.deferred=new cr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((t=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,i,r){const s=Date.now()+n,o=new QA(t,e,s,i,r);return o.start(n),o}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new lr(ar.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function GA(t,e){if(tr("AsyncQueue",`${e}: ${t}`),Xr(t))return new lr(ar.UNAVAILABLE,`${e}: ${t}`);throw t}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HA{constructor(t){this.comparator=t?(e,n)=>t(e,n)||Fr.comparator(e.key,n.key):(t,e)=>Fr.comparator(t.key,e.key),this.keyedMap=Ia(),this.sortedSet=new Us(this.comparator)}static emptySet(t){return new HA(t.comparator)}has(t){return null!=this.keyedMap.get(t)}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((e,n)=>(t(e),!1)))}add(t){const e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){const e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof HA))return!1;if(this.size!==t.size)return!1;const e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){const t=e.getNext().key,i=n.getNext().key;if(!t.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach((e=>{t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"}copy(t,e){const n=new HA;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VA{constructor(){this.L_=new Us(Fr.comparator)}track(t){const e=t.doc.key,n=this.L_.get(e);n?0!==t.type&&3===n.type?this.L_=this.L_.insert(e,t):3===t.type&&1!==n.type?this.L_=this.L_.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.L_=this.L_.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.L_=this.L_.remove(e):1===t.type&&2===n.type?this.L_=this.L_.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.L_=this.L_.insert(e,{type:2,doc:t.doc}):ir():this.L_=this.L_.insert(e,t)}k_(){const t=[];return this.L_.inorderTraversal(((e,n)=>{t.push(n)})),t}}class jA{constructor(t,e,n,i,r,s,o,a,l){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=i,this.mutatedKeys=r,this.fromCache=s,this.syncStateChanged=o,this.excludesMetadataChanges=a,this.hasCachedResults=l}static fromInitialDocuments(t,e,n,i,r){const s=[];return e.forEach((t=>{s.push({type:0,doc:t})})),new jA(t,e,HA.emptySet(e),s,n,i,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&va(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let i=0;i<e.length;i++)if(e[i].type!==n[i].type||!e[i].doc.isEqual(n[i].doc))return!1;return!0}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WA{constructor(){this.q_=void 0,this.Q_=[]}}class zA{constructor(){this.queries=new Ca((t=>ya(t)),va),this.onlineState="Unknown",this.K_=new Set}}async function KA(t,e){const n=or(t),i=e.query;let r=!1,s=n.queries.get(i);if(s||(r=!0,s=new WA),r)try{s.q_=await n.onListen(i)}catch(t){const n=GA(t,`Initialization of query '${wa(e.query)}' failed`);return void e.onError(n)}n.queries.set(i,s),s.Q_.push(e),e.U_(n.onlineState),s.q_&&e.W_(s.q_)&&YA(n)}async function qA(t,e){const n=or(t),i=e.query;let r=!1;const s=n.queries.get(i);if(s){const t=s.Q_.indexOf(e);t>=0&&(s.Q_.splice(t,1),r=0===s.Q_.length)}if(r)return n.queries.delete(i),n.onUnlisten(i)}function $A(t,e){const n=or(t);let i=!1;for(const r of e){const t=r.query,e=n.queries.get(t);if(e){for(const t of e.Q_)t.W_(r)&&(i=!0);e.q_=r}}i&&YA(n)}function XA(t,e,n){const i=or(t),r=i.queries.get(e);if(r)for(const s of r.Q_)s.onError(n);i.queries.delete(e)}function YA(t){t.K_.forEach((t=>{t.next()}))}class ZA{constructor(t,e,n){this.query=t,this.G_=e,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=n||{}}W_(t){if(!this.options.includeMetadataChanges){const e=[];for(const n of t.docChanges)3!==n.type&&e.push(n);t=new jA(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.z_?this.H_(t)&&(this.G_.next(t),e=!0):this.J_(t,this.onlineState)&&(this.Y_(t),e=!0),this.j_=t,e}onError(t){this.G_.error(t)}U_(t){this.onlineState=t;let e=!1;return this.j_&&!this.z_&&this.J_(this.j_,t)&&(this.Y_(this.j_),e=!0),e}J_(t,e){if(!t.fromCache)return!0;const n="Offline"!==e;return(!this.options.Z_||!n)&&(!t.docs.isEmpty()||t.hasCachedResults||"Offline"===e)}H_(t){if(t.docChanges.length>0)return!0;const e=this.j_&&this.j_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges}Y_(t){t=jA.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.z_=!0,this.G_.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(t,e){this.X_=t,this.byteLength=e}ea(){return"metadata"in this.X_}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class td{constructor(t){this.serializer=t}Ps(t){return nc(this.serializer,t)}Is(t){return t.metadata.exists?lc(this.serializer,t.document,!1):Io.newNoDocument(this.Ps(t.metadata.name),this.Ts(t.metadata.readTime))}Ts(t){return Yl(t)}}class ed{constructor(t,e,n){this.ta=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=nd(t)}na(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.X_.namedQuery)this.queries.push(t.X_.namedQuery);else if(t.X_.documentMetadata){this.documents.push({metadata:t.X_.documentMetadata}),t.X_.documentMetadata.exists||++e;const n=Br.fromString(t.X_.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.X_.document&&(this.documents[this.documents.length-1].document=t.X_.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}ra(t){const e=new Map,n=new td(this.serializer);for(const i of t)if(i.metadata.queries){const t=n.Ps(i.metadata.name);for(const n of i.metadata.queries){const i=(e.get(n)||Oa()).add(t);e.set(n,i)}}return e}async complete(){const t=await Nh(this.localStore,new td(this.serializer),this.documents,this.ta.id),e=this.ra(this.documents);for(const n of this.queries)await Oh(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",{progress:this.progress,ia:this.collectionGroups,sa:t}}}function nd(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class id{constructor(t){this.key=t}}class rd{constructor(t){this.key=t}}class sd{constructor(t,e){this.query=t,this.oa=e,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=Oa(),this.mutatedKeys=Oa(),this.ua=xa(t),this.ca=new HA(this.ua)}get la(){return this.oa}ha(t,e){const n=e?e.Pa:new VA,i=e?e.ca:this.ca;let r=e?e.mutatedKeys:this.mutatedKeys,s=i,o=!1;const a="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,l="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(((t,e)=>{const c=i.get(t),u=_a(this.query,e)?e:null,h=!!c&&this.mutatedKeys.has(c.key),A=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let d=!1;c&&u?c.data.isEqual(u.data)?h!==A&&(n.track({type:3,doc:u}),d=!0):this.Ia(c,u)||(n.track({type:2,doc:u}),d=!0,(a&&this.ua(u,a)>0||l&&this.ua(u,l)<0)&&(o=!0)):!c&&u?(n.track({type:0,doc:u}),d=!0):c&&!u&&(n.track({type:1,doc:c}),d=!0,(a||l)&&(o=!0)),d&&(u?(s=s.add(u),r=A?r.add(t):r.delete(t)):(s=s.delete(t),r=r.delete(t)))})),null!==this.query.limit)for(;s.size>this.query.limit;){const t="F"===this.query.limitType?s.last():s.first();s=s.delete(t.key),r=r.delete(t.key),n.track({type:1,doc:t})}return{ca:s,Pa:n,Xi:o,mutatedKeys:r}}Ia(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,i){const r=this.ca;this.ca=t.ca,this.mutatedKeys=t.mutatedKeys;const s=t.Pa.k_();s.sort(((t,e)=>function(t,e){const n=t=>{switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ir()}};return n(t)-n(e)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t.type,e.type)||this.ua(t.doc,e.doc))),this.Ta(n),i=null!=i&&i;const o=e&&!i?this.Ea():[],a=0===this.aa.size&&this.current&&!i?1:0,l=a!==this._a;return this._a=a,0!==s.length||l?{snapshot:new jA(this.query,t.ca,r,s,t.mutatedKeys,0===a,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),da:o}:{da:o}}U_(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new VA,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(t){return!this.oa.has(t)&&!!this.ca.has(t)&&!this.ca.get(t).hasLocalMutations}Ta(t){t&&(t.addedDocuments.forEach((t=>this.oa=this.oa.add(t))),t.modifiedDocuments.forEach((t=>{})),t.removedDocuments.forEach((t=>this.oa=this.oa.delete(t))),this.current=t.current)}Ea(){if(!this.current)return[];const t=this.aa;this.aa=Oa(),this.ca.forEach((t=>{this.Aa(t.key)&&(this.aa=this.aa.add(t.key))}));const e=[];return t.forEach((t=>{this.aa.has(t)||e.push(new rd(t))})),this.aa.forEach((n=>{t.has(n)||e.push(new id(n))})),e}Ra(t){this.oa=t.hs,this.aa=Oa();const e=this.ha(t.documents);return this.applyChanges(e,!0)}Va(){return jA.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,0===this._a,this.hasCachedResults)}}class od{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}}class ad{constructor(t){this.key=t,this.ma=!1}}class ld{constructor(t,e,n,i,r,s){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=i,this.currentUser=r,this.maxConcurrentLimboResolutions=s,this.fa={},this.ga=new Ca((t=>ya(t)),va),this.pa=new Map,this.ya=new Set,this.wa=new Us(Fr.comparator),this.Sa=new Map,this.ba=new eh,this.Da={},this.Ca=new Map,this.va=Fu.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return!0===this.Fa}}async function cd(t,e){const n=Dd(t);let i,r;const s=n.ga.get(e);if(s)i=s.targetId,n.sharedClientState.addLocalQueryTarget(i),r=s.view.Va();else{const t=await Ih(n.localStore,fa(e)),s=n.sharedClientState.addLocalQueryTarget(t.targetId);i=t.targetId,r=await ud(n,e,i,"current"===s,t.resumeToken),n.isPrimaryClient&&fA(n.remoteStore,t)}return r}async function ud(t,e,n,i,r){t.Ma=(e,n,i)=>async function(t,e,n,i){let r=e.view.ha(n);r.Xi&&(r=await Lh(t.localStore,e.query,!1).then((({documents:t})=>e.view.ha(t,r))));const s=i&&i.targetChanges.get(e.targetId),o=i&&null!=i.targetMismatches.get(e.targetId),a=e.view.applyChanges(r,t.isPrimaryClient,s,o);return xd(t,e.targetId,a.da),a.snapshot}(t,e,n,i);const s=await Lh(t.localStore,e,!0),o=new sd(e,s.hs),a=o.ha(s.documents),l=Nl.createSynthesizedTargetChangeForCurrentChange(n,i&&"Offline"!==t.onlineState,r),c=o.applyChanges(a,t.isPrimaryClient,l);xd(t,n,c.da);const u=new od(e,n,o);return t.ga.set(e,u),t.pa.has(n)?t.pa.get(n).push(e):t.pa.set(n,[e]),c.snapshot}async function hd(t,e){const n=or(t),i=n.ga.get(e),r=n.pa.get(i.targetId);if(r.length>1)return n.pa.set(i.targetId,r.filter((t=>!va(t,e)))),void n.ga.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(i.targetId),n.sharedClientState.isActiveQueryTarget(i.targetId)||await Fh(n.localStore,i.targetId,!1).then((()=>{n.sharedClientState.clearQueryState(i.targetId),pA(n.remoteStore,i.targetId),_d(n,i.targetId)})).catch(jr)):(_d(n,i.targetId),await Fh(n.localStore,i.targetId,!0))}async function Ad(t,e,n){const i=Ud(t);try{const t=await function(t,e){const n=or(t),i=Er.now(),r=e.reduce(((t,e)=>t.add(e.key)),Oa());let s,o;return n.persistence.runTransaction("Locally write mutations","readwrite",(t=>{let a=Ba(),l=Oa();return n.os.getEntries(t,r).next((t=>{a=t,a.forEach(((t,e)=>{e.isValidDocument()||(l=l.add(t))}))})).next((()=>n.localDocuments.getOverlayedDocuments(t,a))).next((r=>{s=r;const o=[];for(const t of e){const e=cl(t,s.get(t.key).overlayedDocument);null!=e&&o.push(new Al(t.key,e,To(e.value.mapValue),il.exists(!0)))}return n.mutationQueue.addMutationBatch(t,i,o,e)})).next((e=>{o=e;const i=e.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(t,e.batchId,i)}))})).then((()=>({batchId:o.batchId,changes:Fa(s)})))}(i.localStore,e);i.sharedClientState.addPendingMutation(t.batchId),function(t,e,n){let i=t.Da[t.currentUser.toKey()];i||(i=new Us(_r)),i=i.insert(e,n),t.Da[t.currentUser.toKey()]=i}(i,t.batchId,n),await Sd(i,t.changes),await BA(i.remoteStore)}catch(t){const e=GA(t,"Failed to persist write");n.reject(e)}}async function dd(t,e){const n=or(t);try{const t=await Sh(n.localStore,e);e.targetChanges.forEach(((t,e)=>{const i=n.Sa.get(e);i&&(rr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?i.ma=!0:t.modifiedDocuments.size>0?rr(i.ma):t.removedDocuments.size>0&&(rr(i.ma),i.ma=!1))})),await Sd(n,t,e)}catch(t){await jr(t)}}function fd(t,e,n){const i=or(t);if(i.isPrimaryClient&&0===n||!i.isPrimaryClient&&1===n){const t=[];i.ga.forEach(((n,i)=>{const r=i.view.U_(e);r.snapshot&&t.push(r.snapshot)})),function(t,e){const n=or(t);n.onlineState=e;let i=!1;n.queries.forEach(((t,n)=>{for(const r of n.Q_)r.U_(e)&&(i=!0)})),i&&YA(n)}(i.eventManager,e),t.length&&i.fa.u_(t),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function pd(t,e,n){const i=or(t);i.sharedClientState.updateQueryState(e,"rejected",n);const r=i.Sa.get(e),s=r&&r.key;if(s){let t=new Us(Fr.comparator);t=t.insert(s,Io.newNoDocument(s,Cr.min()));const n=Oa().add(s),r=new Pl(Cr.min(),new Map,new Us(_r),t,n);await dd(i,r),i.wa=i.wa.remove(s),i.Sa.delete(e),Cd(i)}else await Fh(i.localStore,e,!1).then((()=>_d(i,e,n))).catch(jr)}async function gd(t,e){const n=or(t),i=e.batch.batchId;try{const t=await Eh(n.localStore,e);wd(n,i,null),yd(n,i),n.sharedClientState.updateMutationState(i,"acknowledged"),await Sd(n,t)}catch(t){await jr(t)}}async function md(t,e,n){const i=or(t);try{const t=await function(t,e){const n=or(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(t=>{let i;return n.mutationQueue.lookupMutationBatch(t,e).next((e=>(rr(null!==e),i=e.keys(),n.mutationQueue.removeMutationBatch(t,e)))).next((()=>n.mutationQueue.performConsistencyCheck(t))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(t,i,e))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(t,i))).next((()=>n.localDocuments.getDocuments(t,i)))}))}(i.localStore,e);wd(i,e,n),yd(i,e),i.sharedClientState.updateMutationState(e,"rejected",n),await Sd(i,t)}catch(n){await jr(n)}}async function vd(t,e){const n=or(t);wA(n.remoteStore)||Ji("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const t=await function(t){const e=or(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(t=>e.mutationQueue.getHighestUnacknowledgedBatchId(t)))}(n.localStore);if(-1===t)return void e.resolve();const i=n.Ca.get(t)||[];i.push(e),n.Ca.set(t,i)}catch(t){const n=GA(t,"Initialization of waitForPendingWrites() operation failed");e.reject(n)}}function yd(t,e){(t.Ca.get(e)||[]).forEach((t=>{t.resolve()})),t.Ca.delete(e)}function wd(t,e,n){const i=or(t);let r=i.Da[i.currentUser.toKey()];if(r){const t=r.get(e);t&&(n?t.reject(n):t.resolve(),r=r.remove(e)),i.Da[i.currentUser.toKey()]=r}}function _d(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const i of t.pa.get(e))t.ga.delete(i),n&&t.fa.xa(i,n);t.pa.delete(e),t.isPrimaryClient&&t.ba.Vr(e).forEach((e=>{t.ba.containsKey(e)||bd(t,e)}))}function bd(t,e){t.ya.delete(e.path.canonicalString());const n=t.wa.get(e);null!==n&&(pA(t.remoteStore,n),t.wa=t.wa.remove(e),t.Sa.delete(n),Cd(t))}function xd(t,e,n){for(const i of n)i instanceof id?(t.ba.addReference(i.key,e),Ed(t,i)):i instanceof rd?(Ji("SyncEngine","Document no longer in limbo: "+i.key),t.ba.removeReference(i.key,e),t.ba.containsKey(i.key)||bd(t,i.key)):ir()}function Ed(t,e){const n=e.key,i=n.path.canonicalString();t.wa.get(n)||t.ya.has(i)||(Ji("SyncEngine","New document in limbo: "+n),t.ya.add(i),Cd(t))}function Cd(t){for(;t.ya.size>0&&t.wa.size<t.maxConcurrentLimboResolutions;){const e=t.ya.values().next().value;t.ya.delete(e);const n=new Fr(Br.fromString(e)),i=t.va.next();t.Sa.set(i,new ad(n)),t.wa=t.wa.insert(n,i),fA(t.remoteStore,new Bc(fa(ua(n.path)),i,"TargetPurposeLimboResolution",is._e))}}async function Sd(t,e,n){const i=or(t),r=[],s=[],o=[];i.ga.isEmpty()||(i.ga.forEach(((t,a)=>{o.push(i.Ma(a,e,n).then((t=>{if((t||n)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(a.targetId,(null==t?void 0:t.fromCache)?"not-current":"current"),t){r.push(t);const e=vh.Ki(a.targetId,t);s.push(e)}})))})),await Promise.all(o),i.fa.u_(r),await async function(t,e){const n=or(t);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(t=>Wr.forEach(e,(e=>Wr.forEach(e.qi,(i=>n.persistence.referenceDelegate.addReference(t,e.targetId,i))).next((()=>Wr.forEach(e.Qi,(i=>n.persistence.referenceDelegate.removeReference(t,e.targetId,i)))))))))}catch(t){if(!Xr(t))throw t;Ji("LocalStore","Failed to update sequence numbers: "+t)}for(const i of e){const t=i.targetId;if(!i.fromCache){const e=n.ns.get(t),i=e.snapshotVersion,r=e.withLastLimboFreeSnapshotVersion(i);n.ns=n.ns.insert(t,r)}}}(i.localStore,s))}async function Bd(t,e){const n=or(t);if(!n.currentUser.isEqual(e)){Ji("SyncEngine","User change. New user:",e.toKey());const t=await xh(n.localStore,e);n.currentUser=e,function(t,e){t.Ca.forEach((t=>{t.forEach((t=>{t.reject(new lr(ar.CANCELLED,e))}))})),t.Ca.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,t.removedBatchIds,t.addedBatchIds),await Sd(n,t.us)}}function Td(t,e){const n=or(t),i=n.Sa.get(e);if(i&&i.ma)return Oa().add(i.key);{let t=Oa();const i=n.pa.get(e);if(!i)return t;for(const e of i){const i=n.ga.get(e);t=t.unionWith(i.view.la)}return t}}async function Id(t,e){const n=or(t),i=await Lh(n.localStore,e.query,!0),r=e.view.Ra(i);return n.isPrimaryClient&&xd(n,e.targetId,r.da),r}async function Fd(t,e){const n=or(t);return Mh(n.localStore,e).then((t=>Sd(n,t)))}async function Ld(t,e,n,i){const r=or(t),s=await function(t,e){const n=or(t),i=or(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(t=>i.vn(t,e).next((e=>e?n.localDocuments.getDocuments(t,e):Wr.resolve(null)))))}(r.localStore,e);null!==s?("pending"===n?await BA(r.remoteStore):"acknowledged"===n||"rejected"===n?(wd(r,e,i||null),yd(r,e),function(t,e){or(or(t).mutationQueue).Mn(e)}(r.localStore,e)):ir(),await Sd(r,s)):Ji("SyncEngine","Cannot apply mutation batch with id: "+e)}async function Rd(t,e){const n=or(t);if(Dd(n),Ud(n),!0===e&&!0!==n.Fa){const t=n.sharedClientState.getAllActiveQueryTargets(),e=await Md(n,t.toArray());n.Fa=!0,await kA(n.remoteStore,!0);for(const i of e)fA(n.remoteStore,i)}else if(!1===e&&!1!==n.Fa){const t=[];let e=Promise.resolve();n.pa.forEach(((i,r)=>{n.sharedClientState.isLocalQueryTarget(r)?t.push(r):e=e.then((()=>(_d(n,r),Fh(n.localStore,r,!0)))),pA(n.remoteStore,r)})),await e,await Md(n,t),function(t){const e=or(t);e.Sa.forEach(((t,n)=>{pA(e.remoteStore,n)})),e.ba.mr(),e.Sa=new Map,e.wa=new Us(Fr.comparator)}(n),n.Fa=!1,await kA(n.remoteStore,!1)}}async function Md(t,e,n){const i=or(t),r=[],s=[];for(const o of e){let t;const e=i.pa.get(o);if(e&&0!==e.length){t=await Ih(i.localStore,fa(e[0]));for(const t of e){const e=i.ga.get(t),n=await Id(i,e);n.snapshot&&s.push(n.snapshot)}}else{const e=await Rh(i.localStore,o);t=await Ih(i.localStore,e),await ud(i,Pd(e),o,!1,t.resumeToken)}r.push(t)}return i.fa.u_(s),r}function Pd(t){return ca(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Nd(t){return function(t){return or(or(t).persistence).Li()}(or(t).localStore)}async function Od(t,e,n,i){const r=or(t);if(r.Fa)return void Ji("SyncEngine","Ignoring unexpected query state notification.");const s=r.pa.get(e);if(s&&s.length>0)switch(n){case"current":case"not-current":{const t=await Mh(r.localStore,ba(s[0])),i=Pl.createSynthesizedRemoteEventForCurrentChange(e,"current"===n,qs.EMPTY_BYTE_STRING);await Sd(r,t,i);break}case"rejected":await Fh(r.localStore,e,!0),_d(r,e,i);break;default:ir()}}async function kd(t,e,n){const i=Dd(t);if(i.Fa){for(const t of e){if(i.pa.has(t)){Ji("SyncEngine","Adding an already active target "+t);continue}const e=await Rh(i.localStore,t),n=await Ih(i.localStore,e);await ud(i,Pd(e),n.targetId,!1,n.resumeToken),fA(i.remoteStore,n)}for(const t of n)i.pa.has(t)&&await Fh(i.localStore,t,!1).then((()=>{pA(i.remoteStore,t),_d(i,t)})).catch(jr)}}function Dd(t){const e=or(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dd.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Td.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=pd.bind(null,e),e.fa.u_=$A.bind(null,e.eventManager),e.fa.xa=XA.bind(null,e.eventManager),e}function Ud(t){const e=or(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=gd.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=md.bind(null,e),e}function Qd(t,e,n){const i=or(t);(async function(t,e,n){try{const i=await e.getMetadata();if(await function(t,e){const n=or(t),i=Yl(e.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(t=>n.$r.getBundleMetadata(t,e.id))).then((t=>!!t&&t.createTime.compareTo(i)>=0))}(t.localStore,i))return await e.close(),n._completeWith(function(t){return{taskState:"Success",documentsLoaded:t.totalDocuments,bytesLoaded:t.totalBytes,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(i)),Promise.resolve(new Set);n._updateProgress(nd(i));const r=new ed(i,t.localStore,e.serializer);let s=await e.Oa();for(;s;){const t=await r.na(s);t&&n._updateProgress(t),s=await e.Oa()}const o=await r.complete();return await Sd(t,o.sa,void 0),await function(t,e){const n=or(t);return n.persistence.runTransaction("Save bundle","readwrite",(t=>n.$r.saveBundleMetadata(t,e)))}(t.localStore,i),n._completeWith(o.progress),Promise.resolve(o.ia)}catch(t){return er("SyncEngine",`Loading bundle failed with ${t}`),n._failWith(t),Promise.resolve(new Set)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */)(i,e,n).then((t=>{i.sharedClientState.notifyBundleLoaded(t)}))}class Gd{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=iA(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return bh(this.persistence,new wh,t.initialUser,this.serializer)}createPersistence(t){return new ah(ch.Hr,this.serializer)}createSharedClientState(t){return new zh}async terminate(){var t,e;null===(t=this.gcScheduler)||void 0===t||t.stop(),null===(e=this.indexBackfillerScheduler)||void 0===e||e.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Hd extends Gd{constructor(t){super(),this.cacheSizeBytes=t}createGarbageCollectionScheduler(t,e){rr(this.persistence.referenceDelegate instanceof uh);const n=this.persistence.referenceDelegate.garbageCollector;return new ku(n,t.asyncQueue,e)}createPersistence(t){const e=void 0!==this.cacheSizeBytes?bu.withCacheSize(this.cacheSizeBytes):bu.DEFAULT;return new ah((t=>uh.Hr(t,e)),this.serializer)}}class Vd extends Gd{constructor(t,e,n){super(),this.Na=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.Na.initialize(this,t),await Ud(this.Na.syncEngine),await BA(this.Na.remoteStore),await this.persistence.fi((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}createLocalStore(t){return bh(this.persistence,new wh,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){const n=this.persistence.referenceDelegate.garbageCollector;return new ku(n,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){const n=new ns(e,this.persistence);return new es(t.asyncQueue,n)}createPersistence(t){const e=mh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?bu.withCacheSize(this.cacheSizeBytes):bu.DEFAULT;return new fh(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,eA(),nA(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new zh}}class jd extends Vd{constructor(t,e){super(t,e,!1),this.Na=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}async initialize(t){await super.initialize(t);const e=this.Na.syncEngine;this.sharedClientState instanceof Wh&&(this.sharedClientState.syncEngine={Zs:Ld.bind(null,e),Xs:Od.bind(null,e),eo:kd.bind(null,e),Li:Nd.bind(null,e),Ys:Fd.bind(null,e)},await this.sharedClientState.start()),await this.persistence.fi((async t=>{await Rd(this.Na.syncEngine,t),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start():t||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(t&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():t||this.indexBackfillerScheduler.stop())}))}createSharedClientState(t){const e=eA();if(!Wh.D(e))throw new lr(ar.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=mh(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Wh(e,t.asyncQueue,n,t.clientId,t.initialUser)}}class Wd{async initialize(t,e){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=t=>fd(this.syncEngine,t,1),this.remoteStore.remoteSyncer.handleCredentialChange=Bd.bind(null,this.syncEngine),await kA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new zA}()}createDatastore(t){const e=iA(t.databaseInfo.databaseId),n=function(t){return new tA(t)}(t.databaseInfo);return function(t,e,n,i){return new lA(t,e,n,i)}(t.authCredentials,t.appCheckCredentials,n,e)}createRemoteStore(t){return function(t,e,n,i,r){return new hA(t,e,n,i,r)}(this.localStore,this.datastore,t.asyncQueue,(t=>fd(this.syncEngine,t,0)),function(){return qh.D()?new qh:new Kh}())}createSyncEngine(t,e){return function(t,e,n,i,r,s,o){const a=new ld(t,e,n,i,r,s);return o&&(a.Fa=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}async terminate(){var t;await async function(t){const e=or(t);Ji("RemoteStore","RemoteStore shutting down."),e.v_.add(5),await dA(e),e.M_.shutdown(),e.x_.set("Unknown")}(this.remoteStore),null===(t=this.datastore)||void 0===t||t.terminate()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(t,e=10240){let n=0;return{async read(){if(n<t.byteLength){const i={value:t.slice(n,n+e),done:!1};return n+=e,i}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ba(this.observer.next,t)}error(t){this.observer.error?this.Ba(this.observer.error,t):tr("Uncaught Error in snapshot listener:",t.toString())}La(){this.muted=!0}Ba(t,e){this.muted||setTimeout((()=>{this.muted||t(e)}),0)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(t,e){this.ka=t,this.serializer=e,this.metadata=new cr,this.buffer=new Uint8Array,this.qa=function(){return new TextDecoder("utf-8")}(),this.Qa().then((t=>{t&&t.ea()?this.metadata.resolve(t.X_.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==t?void 0:t.X_)}`))}),(t=>this.metadata.reject(t)))}close(){return this.ka.cancel()}async getMetadata(){return this.metadata.promise}async Oa(){return await this.getMetadata(),this.Qa()}async Qa(){const t=await this.Ka();if(null===t)return null;const e=this.qa.decode(t),n=Number(e);isNaN(n)&&this.$a(`length string (${e}) is not valid number`);const i=await this.Ua(n);return new JA(JSON.parse(i),t.length+n)}Wa(){return this.buffer.findIndex((t=>t==="{".charCodeAt(0)))}async Ka(){for(;this.Wa()<0;)if(await this.Ga())break;if(0===this.buffer.length)return null;const t=this.Wa();t<0&&this.$a("Reached the end of bundle when a length string is expected.");const e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e}async Ua(t){for(;this.buffer.length<t;)await this.Ga()&&this.$a("Reached the end of bundle when more is expected.");const e=this.qa.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e}$a(t){throw this.ka.cancel(),new Error(`Invalid bundle format: ${t}`)}async Ga(){const t=await this.ka.read();if(!t.done){const e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $d{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(t){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new lr(ar.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const e=await async function(t,e){const n=or(t),i={documents:e.map((t=>ec(n.serializer,t)))},r=await n.vo("BatchGetDocuments",n.serializer.databaseId,Br.emptyPath(),i,e.length),s=new Map;r.forEach((t=>{const e=cc(n.serializer,t);s.set(e.key.toString(),e)}));const o=[];return e.forEach((t=>{const e=s.get(t.toString());rr(!!e),o.push(e)})),o}(this.datastore,t);return e.forEach((t=>this.recordVersion(t))),e}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastTransactionError=t}this.writtenDocs.add(t.toString())}delete(t){this.write(new gl(t,this.precondition(t))),this.writtenDocs.add(t.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const t=this.readVersions;this.mutations.forEach((e=>{t.delete(e.key.toString())})),t.forEach(((t,e)=>{const n=Fr.fromPath(e);this.mutations.push(new ml(n,this.precondition(n)))})),await async function(t,e){const n=or(t),i={writes:e.map((t=>hc(n.serializer,t)))};await n.So("Commit",n.serializer.databaseId,Br.emptyPath(),i)}(this.datastore,this.mutations),this.committed=!0}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw ir();e=Cr.min()}const n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new lr(ar.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){const e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Cr.min())?il.exists(!1):il.updateTime(e):il.none()}preconditionForUpdate(t){const e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Cr.min()))throw new lr(ar.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return il.updateTime(e)}return il.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(t,e,n,i,r){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=i,this.deferred=r,this.za=n.maxAttempts,this.jo=new rA(this.asyncQueue,"transaction_retry")}ja(){this.za-=1,this.Ha()}Ha(){this.jo.qo((async()=>{const t=new $d(this.datastore),e=this.Ja(t);e&&e.then((e=>{this.asyncQueue.enqueueAndForget((()=>t.commit().then((()=>{this.deferred.resolve(e)})).catch((t=>{this.Ya(t)}))))})).catch((t=>{this.Ya(t)}))}))}Ja(t){try{const e=this.updateFunction(t);return!rs(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Ya(t){this.za>0&&this.Za(t)?(this.za-=1,this.asyncQueue.enqueueAndForget((()=>(this.Ha(),Promise.resolve())))):this.deferred.reject(t)}Za(t){if("FirebaseError"===t.name){const e=t.code;return"aborted"===e||"failed-precondition"===e||"already-exists"===e||!Cl(e)}return!1}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{constructor(t,e,n,i){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=i,this.user=qi.UNAUTHENTICATED,this.clientId=wr.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(n,(async t=>{Ji("FirestoreClient","Received user=",t.uid),await this.authCredentialListener(t),this.user=t})),this.appCheckCredentials.start(n,(t=>(Ji("FirestoreClient","Received new app check token=",t),this.appCheckCredentialListener(t,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new lr(ar.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new cr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){const n=GA(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}}async function Zd(t,e){t.asyncQueue.verifyOperationInProgress(),Ji("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let i=n.initialUser;t.setCredentialChangeListener((async t=>{i.isEqual(t)||(await xh(e.localStore,t),i=t)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function Jd(t,e){t.asyncQueue.verifyOperationInProgress();const n=await ef(t);Ji("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((t=>OA(e.remoteStore,t))),t.setAppCheckTokenChangeListener(((t,n)=>OA(e.remoteStore,n))),t._onlineComponents=e}function tf(t){return"FirebaseError"===t.name?t.code===ar.FAILED_PRECONDITION||t.code===ar.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}async function ef(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ji("FirestoreClient","Using user provided OfflineComponentProvider");try{await Zd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!tf(n))throw n;er("Error using user provided cache. Falling back to memory cache: "+n),await Zd(t,new Gd)}}else Ji("FirestoreClient","Using default OfflineComponentProvider"),await Zd(t,new Gd);return t._offlineComponents}async function nf(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ji("FirestoreClient","Using user provided OnlineComponentProvider"),await Jd(t,t._uninitializedComponentsProvider._online)):(Ji("FirestoreClient","Using default OnlineComponentProvider"),await Jd(t,new Wd))),t._onlineComponents}function rf(t){return ef(t).then((t=>t.persistence))}function sf(t){return ef(t).then((t=>t.localStore))}function of(t){return nf(t).then((t=>t.remoteStore))}function af(t){return nf(t).then((t=>t.syncEngine))}function lf(t){return nf(t).then((t=>t.datastore))}async function cf(t){const e=await nf(t),n=e.eventManager;return n.onListen=cd.bind(null,e.syncEngine),n.onUnlisten=hd.bind(null,e.syncEngine),n}function uf(t){return t.asyncQueue.enqueue((async()=>{const e=await rf(t),n=await of(t);return e.setNetworkEnabled(!0),function(t){const e=or(t);return e.v_.delete(0),AA(e)}(n)}))}function hf(t){return t.asyncQueue.enqueue((async()=>{const e=await rf(t),n=await of(t);return e.setNetworkEnabled(!1),async function(t){const e=or(t);e.v_.add(0),await dA(e),e.x_.set("Offline")}(n)}))}function Af(t,e){const n=new cr;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await function(t,e){const n=or(t);return n.persistence.runTransaction("read document","readonly",(t=>n.localDocuments.getDocument(t,e)))}(t,e);i.isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new lr(ar.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(t){const i=GA(t,`Failed to get document '${e} from cache`);n.reject(i)}}(await sf(t),e,n))),n.promise}function df(t,e,n={}){const i=new cr;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new Kd({next:s=>{e.enqueueAndForget((()=>qA(t,o)));const a=s.docs.has(n);!a&&s.fromCache?r.reject(new lr(ar.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&s.fromCache&&i&&"server"===i.source?r.reject(new lr(ar.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(s)},error:t=>r.reject(t)}),o=new ZA(ua(n.path),s,{includeMetadataChanges:!0,Z_:!0});return KA(t,o)}(await cf(t),t.asyncQueue,e,n,i))),i.promise}function ff(t,e){const n=new cr;return t.asyncQueue.enqueueAndForget((async()=>async function(t,e,n){try{const i=await Lh(t,e,!0),r=new sd(e,i.hs),s=r.ha(i.documents),o=r.applyChanges(s,!1);n.resolve(o.snapshot)}catch(t){const i=GA(t,`Failed to execute query '${e} against cache`);n.reject(i)}}(await sf(t),e,n))),n.promise}function pf(t,e,n={}){const i=new cr;return t.asyncQueue.enqueueAndForget((async()=>function(t,e,n,i,r){const s=new Kd({next:n=>{e.enqueueAndForget((()=>qA(t,o))),n.fromCache&&"server"===i.source?r.reject(new lr(ar.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(n)},error:t=>r.reject(t)}),o=new ZA(n,s,{includeMetadataChanges:!0,Z_:!0});return KA(t,o)}(await cf(t),t.asyncQueue,e,n,i))),i.promise}function gf(t,e){const n=new Kd(e);return t.asyncQueue.enqueueAndForget((async()=>function(t,e){or(t).K_.add(e),e.next()}(await cf(t),n))),()=>{n.La(),t.asyncQueue.enqueueAndForget((async()=>function(t,e){or(t).K_.delete(e)}(await cf(t),n)))}}function mf(t,e,n,i){const r=function(t,e){let n;return n="string"==typeof t?Tl().encode(t):t,function(t,e){return new qd(t,e)}(function(t,e){if(t instanceof Uint8Array)return zd(t,e);if(t instanceof ArrayBuffer)return zd(new Uint8Array(t),e);if(t instanceof ReadableStream)return t.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),e)}(n,iA(e));t.asyncQueue.enqueueAndForget((async()=>{Qd(await af(t),r,i)}))}function vf(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){const n=or(t);return n.persistence.runTransaction("Get named query","readonly",(t=>n.$r.getNamedQuery(t,e)))}(await sf(t),e)))}function yf(t,e){return t.asyncQueue.enqueue((async()=>async function(t,e){const n=or(t),i=n.indexManager,r=[];return n.persistence.runTransaction("Configure indexes","readwrite",(t=>i.getFieldIndexes(t).next((n=>
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
function(t,e,n,i,r){t=[...t],e=[...e],t.sort(n),e.sort(n);const s=t.length,o=e.length;let a=0,l=0;for(;a<o&&l<s;){const s=n(t[l],e[a]);s<0?r(t[l++]):s>0?i(e[a++]):(a++,l++)}for(;a<o;)i(e[a++]);for(;l<s;)r(t[l++])}(n,e,Pr,(e=>{r.push(i.addFieldIndex(t,e))}),(e=>{r.push(i.deleteFieldIndex(t,e))})))).next((()=>Wr.waitFor(r)))))}(await sf(t),e)))}function wf(t,e){return t.asyncQueue.enqueue((async()=>function(t,e){or(t).ts.Ui=e}(await sf(t),e)))}function _f(t){return t.asyncQueue.enqueue((async()=>function(t){const e=or(t),n=e.indexManager;return e.persistence.runTransaction("Delete All Indexes","readwrite",(t=>n.deleteAllFieldIndexes(t)))}
/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(await sf(t))))}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){const e={};return void 0!==t.timeoutSeconds&&(e.timeoutSeconds=t.timeoutSeconds),e
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}const xf=new Map;
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ef(t,e,n){if(!n)throw new lr(ar.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Cf(t,e,n,i){if(!0===e&&!0===i)throw new lr(ar.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Sf(t){if(!Fr.isDocumentKey(t))throw new lr(ar.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Bf(t){if(Fr.isDocumentKey(t))throw new lr(ar.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Tf(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";{const e=function(t){return t.constructor?t.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return"function"==typeof t?"a function":ir()}function If(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new lr(ar.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Tf(t);throw new lr(ar.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ff(t,e){if(e<=0)throw new lr(ar.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(t){var e,n;if(void 0===t.host){if(void 0!==t.ssl)throw new lr(ar.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new lr(ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Cf("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===t.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bf(null!==(n=t.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(t){if(void 0!==t.timeoutSeconds){if(isNaN(t.timeoutSeconds))throw new lr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (must not be NaN)`);if(t.timeoutSeconds<5)throw new lr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (minimum allowed value is 5)`);if(t.timeoutSeconds>30)throw new lr(ar.INVALID_ARGUMENT,`invalid long polling timeout: ${t.timeoutSeconds} (maximum allowed value is 30)`)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(t,e){return t.timeoutSeconds===e.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Rf{constructor(t,e,n,i){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Lf({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new lr(ar.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(t){if(this._settingsFrozen)throw new lr(ar.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Lf(t),void 0!==t.credentials&&(this._authCredentials=function(t){if(!t)return new hr;switch(t.type){case"firstParty":return new pr(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new lr(ar.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const e=xf.get(t);e&&(Ji("ComponentProvider","Removing Datastore"),xf.delete(t),e.terminate())}(this),Promise.resolve()}}function Mf(t,e,n,i={}){var r;const s=(t=If(t,Rf))._getSettings(),o=`${e}:${n}`;if("firestore.googleapis.com"!==s.host&&s.host!==o&&er("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let e,n;if("string"==typeof i.mockUserToken)e=i.mockUserToken,n=qi.MOCK_USER;else{e=(0,a.Fy)(i.mockUserToken,null===(r=t._app)||void 0===r?void 0:r.options.projectId);const s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new lr(ar.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new qi(s)}t._authCredentials=new Ar(new ur(e,n))}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new Pf(this.firestore,t,this._query)}}class Nf{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Of(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Nf(this.firestore,t,this._key)}}class Of extends Pf{constructor(t,e,n){super(t,e,ua(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Nf(this.firestore,null,new Fr(t))}withConverter(t){return new Of(this.firestore,t,this._path)}}function kf(t,e,...n){if(t=(0,a.Ku)(t),Ef("collection","path",e),t instanceof Rf){const i=Br.fromString(e,...n);return Bf(i),new Of(t,null,i)}{if(!(t instanceof Nf||t instanceof Of))throw new lr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Br.fromString(e,...n));return Bf(i),new Of(t.firestore,null,i)}}function Df(t,e){if(t=If(t,Rf),Ef("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new lr(ar.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Pf(t,null,function(t){return new la(Br.emptyPath(),t)}(e))}function Uf(t,e,...n){if(t=(0,a.Ku)(t),1===arguments.length&&(e=wr.newId()),Ef("doc","path",e),t instanceof Rf){const i=Br.fromString(e,...n);return Sf(i),new Nf(t,null,new Fr(i))}{if(!(t instanceof Nf||t instanceof Of))throw new lr(ar.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=t._path.child(Br.fromString(e,...n));return Sf(i),new Nf(t.firestore,t instanceof Of?t.converter:null,new Fr(i))}}function Qf(t,e){return t=(0,a.Ku)(t),e=(0,a.Ku)(e),(t instanceof Nf||t instanceof Of)&&(e instanceof Nf||e instanceof Of)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Gf(t,e){return t=(0,a.Ku)(t),e=(0,a.Ku)(e),t instanceof Pf&&e instanceof Pf&&t.firestore===e.firestore&&va(t._query,e._query)&&t.converter===e.converter
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}class Hf{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new rA(this,"async_queue_retry"),this._u=()=>{const t=nA();t&&Ji("AsyncQueue","Visibility state changed to "+t.visibilityState),this.jo.Ko()};const t=nA();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.au(),this.uu(t)}enterRestrictedMode(t){if(!this.tu){this.tu=!0,this.su=t||!1;const e=nA();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this._u)}}enqueue(t){if(this.au(),this.tu)return new Promise((()=>{}));const e=new cr;return this.uu((()=>this.tu&&this.su?Promise.resolve():(t().then(e.resolve,e.reject),e.promise))).then((()=>e.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.eu.push(t),this.cu())))}async cu(){if(0!==this.eu.length){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(t){if(!Xr(t))throw t;Ji("AsyncQueue","Operation failed with retryable error: "+t)}this.eu.length>0&&this.jo.qo((()=>this.cu()))}}uu(t){const e=this.Xa.then((()=>(this.iu=!0,t().catch((t=>{this.ru=t,this.iu=!1;const e=function(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t);throw tr("INTERNAL UNHANDLED ERROR: ",e),t})).then((t=>(this.iu=!1,t))))));return this.Xa=e,e}enqueueAfterDelay(t,e,n){this.au(),this.ou.indexOf(t)>-1&&(e=0);const i=QA.createAndSchedule(this,t,e,n,(t=>this.lu(t)));return this.nu.push(i),i}au(){this.ru&&ir()}verifyOperationInProgress(){}async hu(){let t;do{t=this.Xa,await t}while(t!==this.Xa)}Pu(t){for(const e of this.nu)if(e.timerId===t)return!0;return!1}Iu(t){return this.hu().then((()=>{this.nu.sort(((t,e)=>t.targetTimeMs-e.targetTimeMs));for(const e of this.nu)if(e.skipDelay(),"all"!==t&&e.timerId===t)break;return this.hu()}))}Tu(t){this.ou.push(t)}lu(t){const e=this.nu.indexOf(t);this.nu.splice(e,1)}}function Vf(t){return function(t,e){if("object"!=typeof t||null===t)return!1;const n=t;for(const i of e)if(i in n&&"function"==typeof n[i])return!0;return!1}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(t,["next","error","complete"])}class jf{constructor(){this._progressObserver={},this._taskCompletionResolver=new cr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wf=-1;class zf extends Rf{constructor(t,e,n,i){super(t,e,n,i),this.type="firestore",this._queue=function(){return new Hf}(),this._persistenceKey=(null==i?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||Xf(this),this._firestoreClient.terminate()}}function Kf(t,e,n){n||(n="(default)");const i=(0,r.j6)(t,"firestore");if(i.isInitialized(n)){const t=i.getImmediate({identifier:n}),r=i.getOptions(n);if((0,a.bD)(r,e))return t;throw new lr(ar.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==e.cacheSizeBytes&&void 0!==e.localCache)throw new lr(ar.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==e.cacheSizeBytes&&-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new lr(ar.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return i.initialize({options:e,instanceIdentifier:n})}function qf(t,e){const n="object"==typeof t?t:(0,r.Sx)(),i="string"==typeof t?t:e||"(default)",s=(0,r.j6)(n,"firestore").getImmediate({identifier:i});if(!s._initialized){const t=(0,a.yU)("firestore");t&&Mf(s,...t)}return s}function $f(t){return t._firestoreClient||Xf(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Xf(t){var e,n,i;const r=t._freezeSettings(),s=function(t,e,n,i){return new no(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,bf(i.experimentalLongPollingOptions),i.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,r);t._firestoreClient=new Yd(t._authCredentials,t._appCheckCredentials,t._queue,s),(null===(n=r.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(i=r.localCache)||void 0===i?void 0:i._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}function Yf(t,e){ap(t=If(t,zf));const n=$f(t);if(n._uninitializedComponentsProvider)throw new lr(ar.FAILED_PRECONDITION,"SDK cache is already specified.");er("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const i=t._freezeSettings(),r=new Wd;return Jf(n,r,new Vd(r,i.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Zf(t){ap(t=If(t,zf));const e=$f(t);if(e._uninitializedComponentsProvider)throw new lr(ar.FAILED_PRECONDITION,"SDK cache is already specified.");er("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=t._freezeSettings(),i=new Wd;return Jf(e,i,new jd(i,n.cacheSizeBytes))}function Jf(t,e,n){const i=new cr;return t.asyncQueue.enqueue((async()=>{try{await Zd(t,n),await Jd(t,e),i.resolve()}catch(t){const n=t;if(!tf(n))throw n;er("Error enabling indexeddb cache. Falling back to memory cache: "+n),i.reject(n)}})).then((()=>i.promise))}function tp(t){if(t._initialized&&!t._terminated)throw new lr(ar.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new cr;return t._queue.enqueueAndForgetEvenWhileRestricted((async()=>{try{await async function(t){if(!Kr.D())return Promise.resolve();const e=t+"main";await Kr.delete(e)}(mh(t._databaseId,t._persistenceKey)),e.resolve()}catch(t){e.reject(t)}})),e.promise}function ep(t){return function(t){const e=new cr;return t.asyncQueue.enqueueAndForget((async()=>vd(await af(t),e))),e.promise}($f(t=If(t,zf)))}function np(t){return uf($f(t=If(t,zf)))}function ip(t){return hf($f(t=If(t,zf)))}function rp(t){return(0,r.Us)(t.app,"firestore",t._databaseId.database),t._delete()}function sp(t,e){const n=$f(t=If(t,zf)),i=new jf;return mf(n,t._databaseId,e,i),i}function op(t,e){return vf($f(t=If(t,zf)),e).then((e=>e?new Pf(t,null,e.query):null))}function ap(t){if(t._initialized||t._terminated)throw new lr(ar.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(t="count",e){this._internalFieldPath=e,this.type="AggregateField",this.aggregateType=t}}class cp{constructor(t,e,n){this._userDataWriter=e,this._data=n,this.type="AggregateQuerySnapshot",this.query=t}data(){return this._userDataWriter.convertObjectMap(this._data)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class up{constructor(t){this._byteString=t}static fromBase64String(t){try{return new up(qs.fromBase64String(t))}catch(t){throw new lr(ar.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(t){return new up(qs.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(...t){for(let e=0;e<t.length;++e)if(0===t[e].length)throw new lr(ar.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ir(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}function Ap(){return new hp("__name__")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(t){this._methodName=t}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fp{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new lr(ar.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new lr(ar.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return _r(this._lat,t._lat)||_r(this._long,t._long)}}
/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp=/^__.*__$/;class gp{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return null!==this.fieldMask?new Al(t,this.data,this.fieldMask,e,this.fieldTransforms):new hl(t,this.data,e,this.fieldTransforms)}}class mp{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Al(t,this.data,this.fieldMask,e,this.fieldTransforms)}}function vp(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ir()}}class yp{constructor(t,e,n,i,r,s){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=i,void 0===r&&this.Eu(),this.fieldTransforms=r||[],this.fieldMask=s||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(t){return new yp(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.mu(t),i}fu(t){var e;const n=null===(e=this.path)||void 0===e?void 0:e.child(t),i=this.Au({path:n,Vu:!1});return i.Eu(),i}gu(t){return this.Au({path:void 0,Vu:!0})}pu(t){return Up(t,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(t){return void 0!==this.fieldMask.find((e=>t.isPrefixOf(e)))||void 0!==this.fieldTransforms.find((e=>t.isPrefixOf(e.field)))}Eu(){if(this.path)for(let t=0;t<this.path.length;t++)this.mu(this.path.get(t))}mu(t){if(0===t.length)throw this.pu("Document fields must not be empty");if(vp(this.du)&&pp.test(t))throw this.pu('Document fields cannot begin and end with "__"')}}class wp{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||iA(t)}Su(t,e,n,i=!1){return new yp({du:t,methodName:e,wu:n,path:Ir.emptyPath(),Vu:!1,yu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function _p(t){const e=t._freezeSettings(),n=iA(t._databaseId);return new wp(t._databaseId,!!e.ignoreUndefinedProperties,n)}function bp(t,e,n,i,r,s={}){const o=t.Su(s.merge||s.mergeFields?2:0,e,n,r);Np("Data must be an object, but it was:",o,i);const a=Mp(i,o);let l,c;if(s.merge)l=new Ws(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const t=[];for(const i of s.mergeFields){const r=Op(e,i,n);if(!o.contains(r))throw new lr(ar.INVALID_ARGUMENT,`Field '${r}' is specified in your field mask but missing from your input data.`);Qp(t,r)||t.push(r)}l=new Ws(t),c=o.fieldTransforms.filter((t=>l.covers(t.field)))}else l=null,c=o.fieldTransforms;return new gp(new Bo(a),l,c)}class xp extends dp{_toFieldTransform(t){if(2!==t.du)throw 1===t.du?t.pu(`${this._methodName}() can only appear at the top level of your update data`):t.pu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof xp}}function Ep(t,e,n){return new yp({du:3,wu:e.settings.wu,methodName:t._methodName,Vu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Cp extends dp{_toFieldTransform(t){return new tl(t.path,new za)}isEqual(t){return t instanceof Cp}}class Sp extends dp{constructor(t,e){super(t),this.bu=e}_toFieldTransform(t){const e=Ep(this,t,!0),n=this.bu.map((t=>Rp(t,e))),i=new Ka(n);return new tl(t.path,i)}isEqual(t){return t instanceof Sp&&(0,a.bD)(this.bu,t.bu)}}class Bp extends dp{constructor(t,e){super(t),this.bu=e}_toFieldTransform(t){const e=Ep(this,t,!0),n=this.bu.map((t=>Rp(t,e))),i=new $a(n);return new tl(t.path,i)}isEqual(t){return t instanceof Bp&&(0,a.bD)(this.bu,t.bu)}}class Tp extends dp{constructor(t,e){super(t),this.Du=e}_toFieldTransform(t){const e=new Ya(t.serializer,Ga(t.serializer,this.Du));return new tl(t.path,e)}isEqual(t){return t instanceof Tp&&this.Du===t.Du}}function Ip(t,e,n,i){const r=t.Su(1,e,n);Np("Data must be an object, but it was:",r,i);const s=[],o=Bo.empty();ks(i,((t,i)=>{const l=Dp(e,t,n);i=(0,a.Ku)(i);const c=r.fu(l);if(i instanceof xp)s.push(l);else{const t=Rp(i,c);null!=t&&(s.push(l),o.set(l,t))}}));const l=new Ws(s);return new mp(o,l,r.fieldTransforms)}function Fp(t,e,n,i,r,s){const o=t.Su(1,e,n),l=[Op(e,i,n)],c=[r];if(s.length%2!=0)throw new lr(ar.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let a=0;a<s.length;a+=2)l.push(Op(e,s[a])),c.push(s[a+1]);const u=[],h=Bo.empty();for(let d=l.length-1;d>=0;--d)if(!Qp(u,l[d])){const t=l[d];let e=c[d];e=(0,a.Ku)(e);const n=o.fu(t);if(e instanceof xp)u.push(t);else{const i=Rp(e,n);null!=i&&(u.push(t),h.set(t,i))}}const A=new Ws(u);return new mp(h,A,o.fieldTransforms)}function Lp(t,e,n,i=!1){return Rp(n,t.Su(i?4:3,e))}function Rp(t,e){if(Pp(t=(0,a.Ku)(t)))return Np("Unsupported field value:",e,t),Mp(t,e);if(t instanceof dp)return function(t,e){if(!vp(e.du))throw e.pu(`${t._methodName}() can only be used with update() and set()`);if(!e.path)throw e.pu(`${t._methodName}() is not currently supported inside arrays`);const n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Vu&&4!==e.du)throw e.pu("Nested arrays are not supported");return function(t,e){const n=[];let i=0;for(const r of t){let t=Rp(r,e.gu(i));null==t&&(t={nullValue:"NULL_VALUE"}),n.push(t),i++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,a.Ku)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Ga(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const n=Er.fromDate(t);return{timestampValue:ql(e.serializer,n)}}if(t instanceof Er){const n=new Er(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:ql(e.serializer,n)}}if(t instanceof fp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof up)return{bytesValue:$l(e.serializer,t._byteString)};if(t instanceof Nf){const n=e.databaseId,i=t.firestore._databaseId;if(!i.isEqual(n))throw e.pu(`Document reference is for database ${i.projectId}/${i.database} but should be for database ${n.projectId}/${n.database}`);return{referenceValue:Zl(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.pu(`Unsupported field value: ${Tf(t)}`)}(t,e)}function Mp(t,e){const n={};return Ds(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ks(t,((t,i)=>{const r=Rp(i,e.Ru(t));null!=r&&(n[t]=r)})),{mapValue:{fields:n}}}function Pp(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof Er||t instanceof fp||t instanceof up||t instanceof Nf||t instanceof dp)}function Np(t,e,n){if(!Pp(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){const i=Tf(n);throw"an object"===i?e.pu(t+" a custom object"):e.pu(t+" "+i)}}function Op(t,e,n){if((e=(0,a.Ku)(e))instanceof hp)return e._internalPath;if("string"==typeof e)return Dp(t,e);throw Up("Field path arguments must be of type string or ",t,!1,void 0,n)}const kp=new RegExp("[~\\*/\\[\\]]");function Dp(t,e,n){if(e.search(kp)>=0)throw Up(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new hp(...e.split("."))._internalPath}catch(_){throw Up(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Up(t,e,n,i,r){const s=i&&!i.isEmpty(),o=void 0!==r;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new lr(ar.INVALID_ARGUMENT,a+t+l)}function Qp(t,e){return t.some((t=>t.isEqual(e)))}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gp{constructor(t,e,n,i,r){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=i,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new Nf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const t=new Hp(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const e=this._document.data.field(Vp("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}}}class Hp extends Gp{data(){return super.data()}}function Vp(t,e){return"string"==typeof e?Dp(t,e):e instanceof hp?e._internalPath:e._delegate._internalPath}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jp(t){if("L"===t.limitType&&0===t.explicitOrderBy.length)throw new lr(ar.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wp{}class zp extends Wp{}function Kp(t,e,...n){let i=[];e instanceof Wp&&i.push(e),i=i.concat(n),function(t){const e=t.filter((t=>t instanceof Xp)).length,n=t.filter((t=>t instanceof qp)).length;if(e>1||e>0&&n>0)throw new lr(ar.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(i);for(const r of i)t=r._apply(t);return t}class qp extends zp{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new qp(t,e,n)}_apply(t){const e=this._parse(t);return dg(t._query,e),new Pf(t.firestore,t.converter,ga(t._query,e))}_parse(t){const e=_p(t.firestore),n=function(t,e,n,i,r,s,o){let a;if(r.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new lr(ar.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if("in"===s||"not-in"===s){Ag(o,s);const e=[];for(const n of o)e.push(hg(i,t,n));a={arrayValue:{values:e}}}else a=hg(i,t,o)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Ag(o,s),a=Lp(n,e,o,"in"===s||"not-in"===s);return Oo.create(r,s,a)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value);return n}}function $p(t,e,n){const i=e,r=Vp("where",t);return qp._create(r,i,n)}class Xp extends Wp{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new Xp(t,e)}_parse(t){const e=this._queryConstraints.map((e=>e._parse(t))).filter((t=>t.getFilters().length>0));return 1===e.length?e[0]:ko.create(e,this._getOperator())}_apply(t){const e=this._parse(t);return 0===e.getFilters().length?t:(function(t,e){let n=t;const i=e.getFlattenedFilters();for(const r of i)dg(n,r),n=ga(n,r)}(t._query,e),new Pf(t.firestore,t.converter,ga(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function Yp(...t){return t.forEach((t=>fg("or",t))),Xp._create("or",t)}function Zp(...t){return t.forEach((t=>fg("and",t))),Xp._create("and",t)}class Jp extends zp{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new Jp(t,e)}_apply(t){const e=function(t,e,n){if(null!==t.startAt)throw new lr(ar.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new lr(ar.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Mo(e,n)}(t._query,this._field,this._direction);return new Pf(t.firestore,t.converter,function(t,e){const n=t.explicitOrderBy.concat([e]);return new la(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))}}function tg(t,e="asc"){const n=e,i=Vp("orderBy",t);return Jp._create(i,n)}class eg extends zp{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new eg(t,e,n)}_apply(t){return new Pf(t.firestore,t.converter,ma(t._query,this._limit,this._limitType))}}function ng(t){return Ff("limit",t),eg._create("limit",t,"F")}function ig(t){return Ff("limitToLast",t),eg._create("limitToLast",t,"L")}class rg extends zp{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new rg(t,e,n)}_apply(t){const e=ug(t,this.type,this._docOrFields,this._inclusive);return new Pf(t.firestore,t.converter,function(t,e){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))}}function sg(...t){return rg._create("startAt",t,!0)}function og(...t){return rg._create("startAfter",t,!1)}class ag extends zp{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new ag(t,e,n)}_apply(t){const e=ug(t,this.type,this._docOrFields,this._inclusive);return new Pf(t.firestore,t.converter,function(t,e){return new la(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))}}function lg(...t){return ag._create("endBefore",t,!1)}function cg(...t){return ag._create("endAt",t,!0)}function ug(t,e,n,i){if(n[0]=(0,a.Ku)(n[0]),n[0]instanceof Gp)return function(t,e,n,i,r){if(!i)throw new lr(ar.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${n}().`);const s=[];for(const o of da(t))if(o.field.isKeyField())s.push(po(e,i.key));else{const t=i.data.field(o.field);if(Js(t))throw new lr(ar.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===t){const t=o.field.canonicalString();throw new lr(ar.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${t}' (used as the orderBy) does not exist.`)}s.push(t)}return new Fo(s,r)}(t._query,t.firestore._databaseId,e,n[0]._document,i);{const r=_p(t.firestore);return function(t,e,n,i,r,s){const o=t.explicitOrderBy;if(r.length>o.length)throw new lr(ar.INVALID_ARGUMENT,`Too many arguments provided to ${i}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const a=[];for(let l=0;l<r.length;l++){const s=r[l];if(o[l].field.isKeyField()){if("string"!=typeof s)throw new lr(ar.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${i}(), but got a ${typeof s}`);if(!Aa(t)&&-1!==s.indexOf("/"))throw new lr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${i}() must be a plain document ID, but '${s}' contains a slash.`);const n=t.path.child(Br.fromString(s));if(!Fr.isDocumentKey(n))throw new lr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${i}() must result in a valid document path, but '${n}' is not because it contains an odd number of segments.`);const r=new Fr(n);a.push(po(e,r))}else{const t=Lp(n,i,s);a.push(t)}}return new Fo(a,s)}(t._query,t.firestore._databaseId,r,e,n,i)}}function hg(t,e,n){if("string"==typeof(n=(0,a.Ku)(n))){if(""===n)throw new lr(ar.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Aa(e)&&-1!==n.indexOf("/"))throw new lr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const i=e.path.child(Br.fromString(n));if(!Fr.isDocumentKey(i))throw new lr(ar.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return po(t,new Fr(i))}if(n instanceof Nf)return po(t,n._key);throw new lr(ar.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tf(n)}.`)}function Ag(t,e){if(!Array.isArray(t)||0===t.length)throw new lr(ar.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function dg(t,e){const n=function(t,e){for(const n of t)for(const t of n.getFlattenedFilters())if(e.indexOf(t.op)>=0)return t.op;return null}(t.filters,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==n)throw n===e.op?new lr(ar.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lr(ar.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}function fg(t,e){if(!(e instanceof qp||e instanceof Xp))throw new lr(ar.INVALID_ARGUMENT,`Function ${t}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}class pg{convertValue(t,e="none"){switch(oo(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Ys(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Zs(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw ir()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){const n={};return ks(t,((t,i)=>{n[t]=this.convertValue(i,e)})),n}convertGeoPoint(t){return new fp(Ys(t.latitude),Ys(t.longitude))}convertArray(t,e){return(t.values||[]).map((t=>this.convertValue(t,e)))}convertServerTimestamp(t,e){switch(e){case"previous":const n=to(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(eo(t));default:return null}}convertTimestamp(t){const e=Xs(t);return new Er(e.seconds,e.nanos)}convertDocumentKey(t,e){const n=Br.fromString(t);rr(Sc(n));const i=new io(n.get(1),n.get(3)),r=new Fr(n.popFirst(5));return i.isEqual(e)||tr(`Document ${r} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),r}}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gg(t,e,n){let i;return i=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,i}class mg extends pg{constructor(t){super(),this.firestore=t}convertBytes(t){return new up(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Nf(this.firestore,null,e)}}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(t){return new lp("sum",Op("sum",t))}function yg(t){return new lp("avg",Op("average",t))}function wg(){return new lp("count")}function _g(t,e){var n,i;return t instanceof lp&&e instanceof lp&&t.aggregateType===e.aggregateType&&(null===(n=t._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(i=e._internalFieldPath)||void 0===i?void 0:i.canonicalString())}function bg(t,e){return Gf(t.query,e.query)&&(0,a.bD)(t.data(),e.data())}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class Eg extends Gp{constructor(t,e,n,i,r,s){super(t,e,n,i,s),this._firestore=t,this._firestoreImpl=t,this.metadata=r}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const e=new Cg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){const n=this._document.data.field(Vp("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}}class Cg extends Eg{data(t={}){return super.data(t)}}class Sg{constructor(t,e,n,i){this._firestore=t,this._userDataWriter=e,this._snapshot=i,this.metadata=new xg(i.hasPendingWrites,i.fromCache),this.query=n}get docs(){const t=[];return this.forEach((e=>t.push(e))),t}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(t,e){this._snapshot.docs.forEach((n=>{t.call(e,new Cg(this._firestore,this._userDataWriter,n.key,n,new xg(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new lr(ar.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){let e=0;return t._snapshot.docChanges.map((n=>{const i=new Cg(t._firestore,t._userDataWriter,n.doc.key,n.doc,new xg(t._snapshot.mutatedKeys.has(n.doc.key),t._snapshot.fromCache),t.query.converter);return n.doc,{type:"added",doc:i,oldIndex:-1,newIndex:e++}}))}{let n=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((t=>e||3!==t.type)).map((e=>{const i=new Cg(t._firestore,t._userDataWriter,e.doc.key,e.doc,new xg(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter);let r=-1,s=-1;return 0!==e.type&&(r=n.indexOf(e.doc.key),n=n.delete(e.doc.key)),1!==e.type&&(n=n.add(e.doc),s=n.indexOf(e.doc.key)),{type:Bg(e.type),doc:i,oldIndex:r,newIndex:s}}))}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Bg(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ir()}}function Tg(t,e){return t instanceof Eg&&e instanceof Eg?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Sg&&e instanceof Sg&&t._firestore===e._firestore&&Gf(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ig(t){t=If(t,Nf);const e=If(t.firestore,zf);return df($f(e),t._key).then((n=>Vg(e,t,n)))}class Fg extends pg{constructor(t){super(),this.firestore=t}convertBytes(t){return new up(t)}convertReference(t){const e=this.convertDocumentKey(t,this.firestore._databaseId);return new Nf(this.firestore,null,e)}}function Lg(t){t=If(t,Nf);const e=If(t.firestore,zf),n=$f(e),i=new Fg(e);return Af(n,t._key).then((n=>new Eg(e,i,t._key,n,new xg(null!==n&&n.hasLocalMutations,!0),t.converter)))}function Rg(t){t=If(t,Nf);const e=If(t.firestore,zf);return df($f(e),t._key,{source:"server"}).then((n=>Vg(e,t,n)))}function Mg(t){t=If(t,Pf);const e=If(t.firestore,zf),n=$f(e),i=new Fg(e);return jp(t._query),pf(n,t._query).then((n=>new Sg(e,i,t,n)))}function Pg(t){t=If(t,Pf);const e=If(t.firestore,zf),n=$f(e),i=new Fg(e);return ff(n,t._query).then((n=>new Sg(e,i,t,n)))}function Ng(t){t=If(t,Pf);const e=If(t.firestore,zf),n=$f(e),i=new Fg(e);return pf(n,t._query,{source:"server"}).then((n=>new Sg(e,i,t,n)))}function Og(t,e,n){t=If(t,Nf);const i=If(t.firestore,zf),r=gg(t.converter,e,n);return Hg(i,[bp(_p(i),"setDoc",t._key,r,null!==t.converter,n).toMutation(t._key,il.none())])}function kg(t,e,n,...i){t=If(t,Nf);const r=If(t.firestore,zf),s=_p(r);let o;return o="string"==typeof(e=(0,a.Ku)(e))||e instanceof hp?Fp(s,"updateDoc",t._key,e,n,i):Ip(s,"updateDoc",t._key,e),Hg(r,[o.toMutation(t._key,il.exists(!0))])}function Dg(t){return Hg(If(t.firestore,zf),[new gl(t._key,il.none())])}function Ug(t,e){const n=If(t.firestore,zf),i=Uf(t),r=gg(t.converter,e);return Hg(n,[bp(_p(t.firestore),"addDoc",i._key,r,null!==t.converter,{}).toMutation(i._key,il.exists(!1))]).then((()=>i))}function Qg(t,...e){var n,i,r;t=(0,a.Ku)(t);let s={includeMetadataChanges:!1},o=0;"object"!=typeof e[o]||Vf(e[o])||(s=e[o],o++);const l={includeMetadataChanges:s.includeMetadataChanges};if(Vf(e[o])){const t=e[o];e[o]=null===(n=t.next)||void 0===n?void 0:n.bind(t),e[o+1]=null===(i=t.error)||void 0===i?void 0:i.bind(t),e[o+2]=null===(r=t.complete)||void 0===r?void 0:r.bind(t)}let c,u,h;if(t instanceof Nf)u=If(t.firestore,zf),h=ua(t._key.path),c={next:n=>{e[o]&&e[o](Vg(u,t,n))},error:e[o+1],complete:e[o+2]};else{const n=If(t,Pf);u=If(n.firestore,zf),h=n._query;const i=new Fg(u);c={next:t=>{e[o]&&e[o](new Sg(u,i,n,t))},error:e[o+1],complete:e[o+2]},jp(t._query)}return function(t,e,n,i){const r=new Kd(i),s=new ZA(e,r,n);return t.asyncQueue.enqueueAndForget((async()=>KA(await cf(t),s))),()=>{r.La(),t.asyncQueue.enqueueAndForget((async()=>qA(await cf(t),s)))}}($f(u),h,l,c)}function Gg(t,e){return gf($f(t=If(t,zf)),Vf(e)?e:{next:e})}function Hg(t,e){return function(t,e){const n=new cr;return t.asyncQueue.enqueueAndForget((async()=>Ad(await af(t),e,n))),n.promise}($f(t),e)}function Vg(t,e,n){const i=n.docs.get(e._key),r=new Fg(t);return new Eg(t,r,e._key,i,new xg(n.hasPendingWrites,n.fromCache),e.converter)}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jg(t){return Wg(t,{count:wg()})}function Wg(t,e){const n=If(t.firestore,zf),i=$f(n),r=function(t,e){const n=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&n.push(e(t[i],i,t));return n}(e,((t,e)=>new _l(e,t.aggregateType,t._internalFieldPath)));return function(t,e,n){const i=new cr;return t.asyncQueue.enqueueAndForget((async()=>{try{const r=await lf(t);i.resolve(cA(r,e,n))}catch(t){i.reject(t)}})),i.promise}(i,t._query,r).then((e=>function(t,e,n){const i=new Fg(t);return new cp(e,i,n)}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */(n,t,e)))}class zg{constructor(t){this.kind="memory",this._onlineComponentProvider=new Wd,(null==t?void 0:t.garbageCollector)?this._offlineComponentProvider=t.garbageCollector._offlineComponentProvider:this._offlineComponentProvider=new Gd}toJSON(){return{kind:this.kind}}}class Kg{constructor(t){let e;this.kind="persistent",(null==t?void 0:t.tabManager)?(t.tabManager._initialize(t),e=t.tabManager):(e=nm(void 0),e._initialize(t)),this._onlineComponentProvider=e._onlineComponentProvider,this._offlineComponentProvider=e._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class qg{constructor(){this.kind="memoryEager",this._offlineComponentProvider=new Gd}toJSON(){return{kind:this.kind}}}class $g{constructor(t){this.kind="memoryLru",this._offlineComponentProvider=new Hd(t)}toJSON(){return{kind:this.kind}}}function Xg(){return new qg}function Yg(t){return new $g(null==t?void 0:t.cacheSizeBytes)}function Zg(t){return new zg(t)}function Jg(t){return new Kg(t)}class tm{constructor(t){this.forceOwnership=t,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=new Wd,this._offlineComponentProvider=new Vd(this._onlineComponentProvider,null==t?void 0:t.cacheSizeBytes,this.forceOwnership)}}class em{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(t){this._onlineComponentProvider=new Wd,this._offlineComponentProvider=new jd(this._onlineComponentProvider,null==t?void 0:t.cacheSizeBytes)}}function nm(t){return new tm(null==t?void 0:t.forceOwnership)}function im(){return new em}
/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rm={maxAttempts:5};
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=_p(t)}set(t,e,n){this._verifyNotCommitted();const i=om(t,this._firestore),r=gg(i.converter,e,n),s=bp(this._dataReader,"WriteBatch.set",i._key,r,null!==i.converter,n);return this._mutations.push(s.toMutation(i._key,il.none())),this}update(t,e,n,...i){this._verifyNotCommitted();const r=om(t,this._firestore);let s;return s="string"==typeof(e=(0,a.Ku)(e))||e instanceof hp?Fp(this._dataReader,"WriteBatch.update",r._key,e,n,i):Ip(this._dataReader,"WriteBatch.update",r._key,e),this._mutations.push(s.toMutation(r._key,il.exists(!0))),this}delete(t){this._verifyNotCommitted();const e=om(t,this._firestore);return this._mutations=this._mutations.concat(new gl(e._key,il.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new lr(ar.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function om(t,e){if((t=(0,a.Ku)(t)).firestore!==e)throw new lr(ar.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am extends class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=_p(t)}get(t){const e=om(t,this._firestore),n=new mg(this._firestore);return this._transaction.lookup([e._key]).then((t=>{if(!t||1!==t.length)return ir();const i=t[0];if(i.isFoundDocument())return new Gp(this._firestore,n,i.key,i,e.converter);if(i.isNoDocument())return new Gp(this._firestore,n,e._key,null,e.converter);throw ir()}))}set(t,e,n){const i=om(t,this._firestore),r=gg(i.converter,e,n),s=bp(this._dataReader,"Transaction.set",i._key,r,null!==i.converter,n);return this._transaction.set(i._key,s),this}update(t,e,n,...i){const r=om(t,this._firestore);let s;return s="string"==typeof(e=(0,a.Ku)(e))||e instanceof hp?Fp(this._dataReader,"Transaction.update",r._key,e,n,i):Ip(this._dataReader,"Transaction.update",r._key,e),this._transaction.update(r._key,s),this}delete(t){const e=om(t,this._firestore);return this._transaction.delete(e._key),this}}{constructor(t,e){super(t,e),this._firestore=t}get(t){const e=om(t,this._firestore),n=new Fg(this._firestore);return super.get(t).then((t=>new Eg(this._firestore,n,e._key,t._document,new xg(!1,!1),e.converter)))}}function lm(t,e,n){t=If(t,zf);const i=Object.assign(Object.assign({},rm),n);return function(t){if(t.maxAttempts<1)throw new lr(ar.INVALID_ARGUMENT,"Max attempts must be at least 1")}(i),function(t,e,n){const i=new cr;return t.asyncQueue.enqueueAndForget((async()=>{const r=await lf(t);new Xd(t.asyncQueue,r,n,e,i).ja()})),i.promise}($f(t),(n=>e(new am(t,n))),i)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(){return new xp("deleteField")}function um(){return new Cp("serverTimestamp")}function hm(...t){return new Sp("arrayUnion",t)}function Am(...t){return new Bp("arrayRemove",t)}function dm(t){return new Tp("increment",t)}
/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fm(t){return $f(t=If(t,zf)),new sm(t,(e=>Hg(t,e)))
/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */}function pm(t,e){var n;const i=$f(t=If(t,zf));if(!i._uninitializedComponentsProvider||"memory"===(null===(n=i._uninitializedComponentsProvider)||void 0===n?void 0:n._offlineKind))return er("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(t){const e="string"==typeof t?function(t){try{return JSON.parse(t)}catch(t){throw new lr(ar.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==t?void 0:t.message))}}(t):t,n=[];if(Array.isArray(e.indexes))for(const i of e.indexes){const t=gm(i,"collectionGroup"),e=[];if(Array.isArray(i.fields))for(const n of i.fields){const t=Dp("setIndexConfiguration",gm(n,"fieldPath"));"CONTAINS"===n.arrayConfig?e.push(new Nr(t,2)):"ASCENDING"===n.order?e.push(new Nr(t,0)):"DESCENDING"===n.order&&e.push(new Nr(t,1))}n.push(new Lr(Lr.UNKNOWN_ID,t,e,kr.empty()))}return n}(e);return yf(i,r)}function gm(t,e){if("string"!=typeof t[e])throw new lr(ar.INVALID_ARGUMENT,"Missing string value for: "+e);return t[e]}
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(t){this._client=t,this.type="PersistentCacheIndexManager"}}function vm(t){var e;t=If(t,zf);const n=xm.get(t);if(n)return n;const i=$f(t);if("persistent"!==(null===(e=i._uninitializedComponentsProvider)||void 0===e?void 0:e._offlineKind))return null;const r=new mm(i);return xm.set(t,r),r}function ym(t){bm(t,!0)}function wm(t){bm(t,!1)}function _m(t){t._client.verifyNotTerminated(),_f(t._client).then((t=>Ji("deleting all persistent cache indexes succeeded"))).catch((t=>er("deleting all persistent cache indexes failed",t)))}function bm(t,e){t._client.verifyNotTerminated(),wf(t._client,e).then((t=>Ji(`setting persistent cache index auto creation isEnabled=${e} succeeded`))).catch((t=>er(`setting persistent cache index auto creation isEnabled=${e} failed`,t)))}const xm=new WeakMap;
/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(t){return Cm.instance.onExistenceFilterMismatch(t)}}class Cm{constructor(){this.Cu=new Map}static get instance(){return Sm||(Sm=new Cm,function(t){if(Bl)throw new Error("a TestingHooksSpi instance is already set");Bl=t}(Sm)),Sm}tt(t){this.Cu.forEach((e=>e(t)))}onExistenceFilterMismatch(t){const e=Symbol(),n=this.Cu;return n.set(e,t),()=>n.delete(e)}}let Sm=null;!function(t,e=!0){!function(t){$i=t}(r.MF),(0,r.om)(new s.uA("firestore",((t,{instanceIdentifier:n,options:i})=>{const r=t.getProvider("app").getImmediate(),s=new zf(new dr(t.getProvider("auth-internal")),new mr(t.getProvider("app-check-internal")),function(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new lr(ar.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new io(t.options.projectId,e)}(r,n),r);return i=Object.assign({useFetchStreams:e},i),s._setSettings(i),s}),"PUBLIC").setMultipleInstances(!0)),(0,r.KO)(Ki,"4.4.2",t),(0,r.KO)(Ki,"4.4.2","esm2017")}()},4329:function(t,e,n){"use strict";n.d(e,{$:function(){return i},AC:function(){return c},Hm:function(){return A},NZ:function(){return s},S3:function(){return h},TZ:function(){return u},s$:function(){return a},ub:function(){return l}});const i={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},r={};for(const f in i)i.hasOwnProperty(f)&&(r[i[f]]=parseInt(f,10));const s=[r.BitsPerSample,r.ExtraSamples,r.SampleFormat,r.StripByteCounts,r.StripOffsets,r.StripRowCounts,r.TileByteCounts,r.TileOffsets,r.SubIFDs],o={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={};for(const f in o)o.hasOwnProperty(f)&&(a[o[f]]=parseInt(f,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},c={Unspecified:0,Assocalpha:1,Unassalpha:2},u={Version:0,AddCompression:1},h={None:0,Deflate:1,Zstandard:2},A={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},d={};for(const f in A)A.hasOwnProperty(f)&&(d[A[f]]=parseInt(f,10))},5234:function(t,e,n){"use strict";n.d(e,{Ey:function(){return tt}});n(4114),n(4603),n(7566),n(8721);var i=n(144),r=n(6768),s=!1;var o=n(179);
/*!
 * pinia v2.1.7
 * (c) 2023 Eduardo San Martin Morote
 * @license MIT
 */
let a;const l=t=>a=t,c=Symbol();var u;(function(t){t["direct"]="direct",t["patchObject"]="patch object",t["patchFunction"]="patch function"})(u||(u={}));const h="undefined"!==typeof window,A=!1,d=(()=>"object"===typeof window&&window.window===window?window:"object"===typeof self&&self.self===self?self:"object"===typeof global&&global.global===global?global:"object"===typeof globalThis?globalThis:{HTMLElement:null})();function f(t,{autoBom:e=!1}={}){return e&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}function p(t,e,n){const i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){w(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function g(t){const e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(n){}return e.status>=200&&e.status<=299}function m(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){const n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}}const v="object"===typeof navigator?navigator:{userAgent:""},y=(()=>/Macintosh/.test(v.userAgent)&&/AppleWebKit/.test(v.userAgent)&&!/Safari/.test(v.userAgent))(),w=h?"undefined"!==typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype&&!y?_:"msSaveOrOpenBlob"in v?b:x:()=>{};function _(t,e="download",n){const i=document.createElement("a");i.download=e,i.rel="noopener","string"===typeof t?(i.href=t,i.origin!==location.origin?g(i.href)?p(t,e,n):(i.target="_blank",m(i)):m(i)):(i.href=URL.createObjectURL(t),setTimeout((function(){URL.revokeObjectURL(i.href)}),4e4),setTimeout((function(){m(i)}),0))}function b(t,e="download",n){if("string"===typeof t)if(g(t))p(t,e,n);else{const e=document.createElement("a");e.href=t,e.target="_blank",setTimeout((function(){m(e)}))}else navigator.msSaveOrOpenBlob(f(t,n),e)}function x(t,e,n,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"===typeof t)return p(t,e,n);const r="application/octet-stream"===t.type,s=/constructor/i.test(String(d.HTMLElement))||"safari"in d,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&s||y)&&"undefined"!==typeof FileReader){const e=new FileReader;e.onloadend=function(){let t=e.result;if("string"!==typeof t)throw i=null,new Error("Wrong reader.result type");t=o?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location.assign(t),i=null},e.readAsDataURL(t)}else{const e=URL.createObjectURL(t);i?i.location.assign(e):location.href=e,i=null,setTimeout((function(){URL.revokeObjectURL(e)}),4e4)}}function E(t,e){const n=" "+t;"function"===typeof __VUE_DEVTOOLS_TOAST__?__VUE_DEVTOOLS_TOAST__(n,e):"error"===e?console.error(n):"warn"===e?console.warn(n):console.log(n)}function C(t){return"_a"in t&&"install"in t}function S(){if(!("clipboard"in navigator))return E("Your browser doesn't support the Clipboard API","error"),!0}function B(t){return!!(t instanceof Error&&t.message.toLowerCase().includes("document is not focused"))&&(E('You need to activate the "Emulate a focused page" setting in the "Rendering" panel of devtools.',"warn"),!0)}async function T(t){if(!S())try{await navigator.clipboard.writeText(JSON.stringify(t.state.value)),E("Global state copied to clipboard.")}catch(e){if(B(e))return;E("Failed to serialize the state. Check the console for more details.","error"),console.error(e)}}async function I(t){if(!S())try{P(t,JSON.parse(await navigator.clipboard.readText())),E("Global state pasted from clipboard.")}catch(e){if(B(e))return;E("Failed to deserialize the state from clipboard. Check the console for more details.","error"),console.error(e)}}async function F(t){try{w(new Blob([JSON.stringify(t.state.value)],{type:"text/plain;charset=utf-8"}),"pinia-state.json")}catch(e){E("Failed to export the state as JSON. Check the console for more details.","error"),console.error(e)}}let L;function R(){function t(){return new Promise(((t,e)=>{L.onchange=async()=>{const e=L.files;if(!e)return t(null);const n=e.item(0);return t(n?{text:await n.text(),file:n}:null)},L.oncancel=()=>t(null),L.onerror=e,L.click()}))}return L||(L=document.createElement("input"),L.type="file",L.accept=".json"),t}async function M(t){try{const e=R(),n=await e();if(!n)return;const{text:i,file:r}=n;P(t,JSON.parse(i)),E(`Global state imported from "${r.name}".`)}catch(e){E("Failed to import the state from JSON. Check the console for more details.","error"),console.error(e)}}function P(t,e){for(const n in e){const i=t.state.value[n];i?Object.assign(i,e[n]):t.state.value[n]=e[n]}}function N(t){return{_custom:{display:t}}}const O=" Pinia (root)",k="_root";function D(t){return C(t)?{id:k,label:O}:{id:t.$id,label:t.$id}}function U(t){if(C(t)){const e=Array.from(t._s.keys()),n=t._s,i={state:e.map((e=>({editable:!0,key:e,value:t.state.value[e]}))),getters:e.filter((t=>n.get(t)._getters)).map((t=>{const e=n.get(t);return{editable:!1,key:t,value:e._getters.reduce(((t,n)=>(t[n]=e[n],t)),{})}}))};return i}const e={state:Object.keys(t.$state).map((e=>({editable:!0,key:e,value:t.$state[e]})))};return t._getters&&t._getters.length&&(e.getters=t._getters.map((e=>({editable:!1,key:e,value:t[e]})))),t._customProperties.size&&(e.customProperties=Array.from(t._customProperties).map((e=>({editable:!0,key:e,value:t[e]})))),e}function Q(t){return t?Array.isArray(t)?t.reduce(((t,e)=>(t.keys.push(e.key),t.operations.push(e.type),t.oldValue[e.key]=e.oldValue,t.newValue[e.key]=e.newValue,t)),{oldValue:{},keys:[],operations:[],newValue:{}}):{operation:N(t.type),key:N(t.key),oldValue:t.oldValue,newValue:t.newValue}:{}}function G(t){switch(t){case u.direct:return"mutation";case u.patchFunction:return"$patch";case u.patchObject:return"$patch";default:return"unknown"}}let H=!0;const V=[],j="pinia:mutations",W="pinia",{assign:z}=Object,K=t=>" "+t;function q(t,e){(0,o.$q)({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:V,app:t},(n=>{"function"!==typeof n.now&&E("You seem to be using an outdated version of Vue Devtools. Are you still using the Beta release instead of the stable one? You can find the links at https://devtools.vuejs.org/guide/installation.html."),n.addTimelineLayer({id:j,label:"Pinia ",color:15064968}),n.addInspector({id:W,label:"Pinia ",icon:"storage",treeFilterPlaceholder:"Search stores",actions:[{icon:"content_copy",action:()=>{T(e)},tooltip:"Serialize and copy the state"},{icon:"content_paste",action:async()=>{await I(e),n.sendInspectorTree(W),n.sendInspectorState(W)},tooltip:"Replace the state with the content of your clipboard"},{icon:"save",action:()=>{F(e)},tooltip:"Save the state as a JSON file"},{icon:"folder_open",action:async()=>{await M(e),n.sendInspectorTree(W),n.sendInspectorState(W)},tooltip:"Import the state from a JSON file"}],nodeActions:[{icon:"restore",tooltip:'Reset the state (with "$reset")',action:t=>{const n=e._s.get(t);n?"function"!==typeof n.$reset?E(`Cannot reset "${t}" store because it doesn't have a "$reset" method implemented.`,"warn"):(n.$reset(),E(`Store "${t}" reset.`)):E(`Cannot reset "${t}" store because it wasn't found.`,"warn")}}]}),n.on.inspectComponent(((t,e)=>{const n=t.componentInstance&&t.componentInstance.proxy;if(n&&n._pStores){const e=t.componentInstance.proxy._pStores;Object.values(e).forEach((e=>{t.instanceData.state.push({type:K(e.$id),key:"state",editable:!0,value:e._isOptionsAPI?{_custom:{value:(0,i.ux)(e.$state),actions:[{icon:"restore",tooltip:"Reset the state of this store",action:()=>e.$reset()}]}}:Object.keys(e.$state).reduce(((t,n)=>(t[n]=e.$state[n],t)),{})}),e._getters&&e._getters.length&&t.instanceData.state.push({type:K(e.$id),key:"getters",editable:!1,value:e._getters.reduce(((t,n)=>{try{t[n]=e[n]}catch(i){t[n]=i}return t}),{})})}))}})),n.on.getInspectorTree((n=>{if(n.app===t&&n.inspectorId===W){let t=[e];t=t.concat(Array.from(e._s.values())),n.rootNodes=(n.filter?t.filter((t=>"$id"in t?t.$id.toLowerCase().includes(n.filter.toLowerCase()):O.toLowerCase().includes(n.filter.toLowerCase()))):t).map(D)}})),n.on.getInspectorState((n=>{if(n.app===t&&n.inspectorId===W){const t=n.nodeId===k?e:e._s.get(n.nodeId);if(!t)return;t&&(n.state=U(t))}})),n.on.editInspectorState(((n,i)=>{if(n.app===t&&n.inspectorId===W){const t=n.nodeId===k?e:e._s.get(n.nodeId);if(!t)return E(`store "${n.nodeId}" not found`,"error");const{path:i}=n;C(t)?i.unshift("state"):1===i.length&&t._customProperties.has(i[0])&&!(i[0]in t.$state)||i.unshift("$state"),H=!1,n.set(t,i,n.state.value),H=!0}})),n.on.editComponentState((t=>{if(t.type.startsWith("")){const n=t.type.replace(/^\s*/,""),i=e._s.get(n);if(!i)return E(`store "${n}" not found`,"error");const{path:r}=t;if("state"!==r[0])return E(`Invalid path for store "${n}":\n${r}\nOnly state can be modified.`);r[0]="$state",H=!1,t.set(i,r,t.state.value),H=!0}}))}))}function $(t,e){V.includes(K(e.$id))||V.push(K(e.$id)),(0,o.$q)({id:"dev.esm.pinia",label:"Pinia ",logo:"https://pinia.vuejs.org/logo.svg",packageName:"pinia",homepage:"https://pinia.vuejs.org",componentStateTypes:V,app:t,settings:{logStoreChanges:{label:"Notify about new/deleted stores",type:"boolean",defaultValue:!0}}},(t=>{const n="function"===typeof t.now?t.now.bind(t):Date.now;e.$onAction((({after:i,onError:r,name:s,args:o})=>{const a=Y++;t.addTimelineEvent({layerId:j,event:{time:n(),title:" "+s,subtitle:"start",data:{store:N(e.$id),action:N(s),args:o},groupId:a}}),i((i=>{X=void 0,t.addTimelineEvent({layerId:j,event:{time:n(),title:" "+s,subtitle:"end",data:{store:N(e.$id),action:N(s),args:o,result:i},groupId:a}})})),r((i=>{X=void 0,t.addTimelineEvent({layerId:j,event:{time:n(),logType:"error",title:" "+s,subtitle:"end",data:{store:N(e.$id),action:N(s),args:o,error:i},groupId:a}})}))}),!0),e._customProperties.forEach((s=>{(0,r.wB)((()=>(0,i.R1)(e[s])),((e,i)=>{t.notifyComponentUpdate(),t.sendInspectorState(W),H&&t.addTimelineEvent({layerId:j,event:{time:n(),title:"Change",subtitle:s,data:{newValue:e,oldValue:i},groupId:X}})}),{deep:!0})})),e.$subscribe((({events:i,type:r},s)=>{if(t.notifyComponentUpdate(),t.sendInspectorState(W),!H)return;const o={time:n(),title:G(r),data:z({store:N(e.$id)},Q(i)),groupId:X};r===u.patchFunction?o.subtitle="":r===u.patchObject?o.subtitle="":i&&!Array.isArray(i)&&(o.subtitle=i.type),i&&(o.data["rawEvent(s)"]={_custom:{display:"DebuggerEvent",type:"object",tooltip:"raw DebuggerEvent[]",value:i}}),t.addTimelineEvent({layerId:j,event:o})}),{detached:!0,flush:"sync"});const s=e._hotUpdate;e._hotUpdate=(0,i.IG)((i=>{s(i),t.addTimelineEvent({layerId:j,event:{time:n(),title:" "+e.$id,subtitle:"HMR update",data:{store:N(e.$id),info:N("HMR update")}}}),t.notifyComponentUpdate(),t.sendInspectorTree(W),t.sendInspectorState(W)}));const{$dispose:o}=e;e.$dispose=()=>{o(),t.notifyComponentUpdate(),t.sendInspectorTree(W),t.sendInspectorState(W),t.getSettings().logStoreChanges&&E(`Disposed "${e.$id}" store `)},t.notifyComponentUpdate(),t.sendInspectorTree(W),t.sendInspectorState(W),t.getSettings().logStoreChanges&&E(`"${e.$id}" store installed `)}))}let X,Y=0;function Z(t,e,n){const r=e.reduce(((e,n)=>(e[n]=(0,i.ux)(t)[n],e)),{});for(const i in r)t[i]=function(){const e=Y,s=n?new Proxy(t,{get(...t){return X=e,Reflect.get(...t)},set(...t){return X=e,Reflect.set(...t)}}):t;X=e;const o=r[i].apply(s,arguments);return X=void 0,o}}function J({app:t,store:e,options:n}){if(e.$id.startsWith("__hot:"))return;e._isOptionsAPI=!!n.state,Z(e,Object.keys(n.actions),e._isOptionsAPI);const r=e._hotUpdate;(0,i.ux)(e)._hotUpdate=function(t){r.apply(this,arguments),Z(e,Object.keys(t._hmrPayload.actions),!!e._isOptionsAPI)},$(t,e)}function tt(){const t=(0,i.uY)(!0),e=t.run((()=>(0,i.KR)({})));let n=[],r=[];const o=(0,i.IG)({install(t){l(o),s||(o._a=t,t.provide(c,o),t.config.globalProperties.$pinia=o,A&&q(t,o),r.forEach((t=>n.push(t))),r=[])},use(t){return this._a||s?n.push(t):r.push(t),this},_p:n,_a:null,_e:t,_s:new Map,state:e});return A&&"undefined"!==typeof Proxy&&o.use(J),o}Symbol();const{assign:et}=Object},1387:function(t,e,n){"use strict";n.d(e,{LA:function(){return ot},aE:function(){return ee}});n(4114);var i=n(6768),r=n(144);
/*!
  * vue-router v4.3.0
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */
const s="undefined"!==typeof document;function o(t){return t.__esModule||"Module"===t[Symbol.toStringTag]}const a=Object.assign;function l(t,e){const n={};for(const i in e){const r=e[i];n[i]=u(r)?r.map(t):t(r)}return n}const c=()=>{},u=Array.isArray;const h=/#/g,A=/&/g,d=/\//g,f=/=/g,p=/\?/g,g=/\+/g,m=/%5B/g,v=/%5D/g,y=/%5E/g,w=/%60/g,_=/%7B/g,b=/%7C/g,x=/%7D/g,E=/%20/g;function C(t){return encodeURI(""+t).replace(b,"|").replace(m,"[").replace(v,"]")}function S(t){return C(t).replace(_,"{").replace(x,"}").replace(y,"^")}function B(t){return C(t).replace(g,"%2B").replace(E,"+").replace(h,"%23").replace(A,"%26").replace(w,"`").replace(_,"{").replace(x,"}").replace(y,"^")}function T(t){return B(t).replace(f,"%3D")}function I(t){return C(t).replace(h,"%23").replace(p,"%3F")}function F(t){return null==t?"":I(t).replace(d,"%2F")}function L(t){try{return decodeURIComponent(""+t)}catch(e){}return""+t}const R=/\/$/,M=t=>t.replace(R,"");function P(t,e,n="/"){let i,r={},s="",o="";const a=e.indexOf("#");let l=e.indexOf("?");return a<l&&a>=0&&(l=-1),l>-1&&(i=e.slice(0,l),s=e.slice(l+1,a>-1?a:e.length),r=t(s)),a>-1&&(i=i||e.slice(0,a),o=e.slice(a,e.length)),i=H(null!=i?i:e,n),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:L(o)}}function N(t,e){const n=e.query?t(e.query):"";return e.path+(n&&"?")+n+(e.hash||"")}function O(t,e){return e&&t.toLowerCase().startsWith(e.toLowerCase())?t.slice(e.length)||"/":t}function k(t,e,n){const i=e.matched.length-1,r=n.matched.length-1;return i>-1&&i===r&&D(e.matched[i],n.matched[r])&&U(e.params,n.params)&&t(e.query)===t(n.query)&&e.hash===n.hash}function D(t,e){return(t.aliasOf||t)===(e.aliasOf||e)}function U(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const n in t)if(!Q(t[n],e[n]))return!1;return!0}function Q(t,e){return u(t)?G(t,e):u(e)?G(e,t):t===e}function G(t,e){return u(e)?t.length===e.length&&t.every(((t,n)=>t===e[n])):1===t.length&&t[0]===e}function H(t,e){if(t.startsWith("/"))return t;if(!t)return e;const n=e.split("/"),i=t.split("/"),r=i[i.length-1];".."!==r&&"."!==r||i.push("");let s,o,a=n.length-1;for(s=0;s<i.length;s++)if(o=i[s],"."!==o){if(".."!==o)break;a>1&&a--}return n.slice(0,a).join("/")+"/"+i.slice(s).join("/")}var V,j;(function(t){t["pop"]="pop",t["push"]="push"})(V||(V={})),function(t){t["back"]="back",t["forward"]="forward",t["unknown"]=""}(j||(j={}));function W(t){if(!t)if(s){const e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^\w+:\/\/[^\/]+/,"")}else t="/";return"/"!==t[0]&&"#"!==t[0]&&(t="/"+t),M(t)}const z=/^[^#]+#/;function K(t,e){return t.replace(z,"#")+e}function q(t,e){const n=document.documentElement.getBoundingClientRect(),i=t.getBoundingClientRect();return{behavior:e.behavior,left:i.left-n.left-(e.left||0),top:i.top-n.top-(e.top||0)}}const $=()=>({left:window.scrollX,top:window.scrollY});function X(t){let e;if("el"in t){const n=t.el,i="string"===typeof n&&n.startsWith("#");0;const r="string"===typeof n?i?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!r)return;e=q(r,t)}else e=t;"scrollBehavior"in document.documentElement.style?window.scrollTo(e):window.scrollTo(null!=e.left?e.left:window.scrollX,null!=e.top?e.top:window.scrollY)}function Y(t,e){const n=history.state?history.state.position-e:-1;return n+t}const Z=new Map;function J(t,e){Z.set(t,e)}function tt(t){const e=Z.get(t);return Z.delete(t),e}let et=()=>location.protocol+"//"+location.host;function nt(t,e){const{pathname:n,search:i,hash:r}=e,s=t.indexOf("#");if(s>-1){let e=r.includes(t.slice(s))?t.slice(s).length:1,n=r.slice(e);return"/"!==n[0]&&(n="/"+n),O(n,"")}const o=O(n,t);return o+i+r}function it(t,e,n,i){let r=[],s=[],o=null;const l=({state:s})=>{const a=nt(t,location),l=n.value,c=e.value;let u=0;if(s){if(n.value=a,e.value=s,o&&o===l)return void(o=null);u=c?s.position-c.position:0}else i(a);r.forEach((t=>{t(n.value,l,{delta:u,type:V.pop,direction:u?u>0?j.forward:j.back:j.unknown})}))};function c(){o=n.value}function u(t){r.push(t);const e=()=>{const e=r.indexOf(t);e>-1&&r.splice(e,1)};return s.push(e),e}function h(){const{history:t}=window;t.state&&t.replaceState(a({},t.state,{scroll:$()}),"")}function A(){for(const t of s)t();s=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",h)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",h,{passive:!0}),{pauseListeners:c,listen:u,destroy:A}}function rt(t,e,n,i=!1,r=!1){return{back:t,current:e,forward:n,replaced:i,position:window.history.length,scroll:r?$():null}}function st(t){const{history:e,location:n}=window,i={value:nt(t,n)},r={value:e.state};function s(i,s,o){const a=t.indexOf("#"),l=a>-1?(n.host&&document.querySelector("base")?t:t.slice(a))+i:et()+t+i;try{e[o?"replaceState":"pushState"](s,"",l),r.value=s}catch(c){console.error(c),n[o?"replace":"assign"](l)}}function o(t,n){const o=a({},e.state,rt(r.value.back,t,r.value.forward,!0),n,{position:r.value.position});s(t,o,!0),i.value=t}function l(t,n){const o=a({},r.value,e.state,{forward:t,scroll:$()});s(o.current,o,!0);const l=a({},rt(i.value,t,null),{position:o.position+1},n);s(t,l,!1),i.value=t}return r.value||s(i.value,{back:null,current:i.value,forward:null,position:e.length-1,replaced:!0,scroll:null},!0),{location:i,state:r,push:l,replace:o}}function ot(t){t=W(t);const e=st(t),n=it(t,e.state,e.location,e.replace);function i(t,e=!0){e||n.pauseListeners(),history.go(t)}const r=a({location:"",base:t,go:i,createHref:K.bind(null,t)},e,n);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>e.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>e.state.value}),r}function at(t){return"string"===typeof t||t&&"object"===typeof t}function lt(t){return"string"===typeof t||"symbol"===typeof t}const ct={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0},ut=Symbol("");var ht;(function(t){t[t["aborted"]=4]="aborted",t[t["cancelled"]=8]="cancelled",t[t["duplicated"]=16]="duplicated"})(ht||(ht={}));function At(t,e){return a(new Error,{type:t,[ut]:!0},e)}function dt(t,e){return t instanceof Error&&ut in t&&(null==e||!!(t.type&e))}const ft="[^/]+?",pt={sensitive:!1,strict:!1,start:!0,end:!0},gt=/[.+*?^${}()[\]/\\]/g;function mt(t,e){const n=a({},pt,e),i=[];let r=n.start?"^":"";const s=[];for(const a of t){const t=a.length?[]:[90];n.strict&&!a.length&&(r+="/");for(let e=0;e<a.length;e++){const i=a[e];let o=40+(n.sensitive?.25:0);if(0===i.type)e||(r+="/"),r+=i.value.replace(gt,"\\$&"),o+=40;else if(1===i.type){const{value:t,repeatable:n,optional:l,regexp:c}=i;s.push({name:t,repeatable:n,optional:l});const u=c||ft;if(u!==ft){o+=10;try{new RegExp(`(${u})`)}catch(h){throw new Error(`Invalid custom RegExp for param "${t}" (${u}): `+h.message)}}let A=n?`((?:${u})(?:/(?:${u}))*)`:`(${u})`;e||(A=l&&a.length<2?`(?:/${A})`:"/"+A),l&&(A+="?"),r+=A,o+=20,l&&(o+=-8),n&&(o+=-20),".*"===u&&(o+=-50)}t.push(o)}i.push(t)}if(n.strict&&n.end){const t=i.length-1;i[t][i[t].length-1]+=.7000000000000001}n.strict||(r+="/?"),n.end?r+="$":n.strict&&(r+="(?:/|$)");const o=new RegExp(r,n.sensitive?"":"i");function l(t){const e=t.match(o),n={};if(!e)return null;for(let i=1;i<e.length;i++){const t=e[i]||"",r=s[i-1];n[r.name]=t&&r.repeatable?t.split("/"):t}return n}function c(e){let n="",i=!1;for(const r of t){i&&n.endsWith("/")||(n+="/"),i=!1;for(const t of r)if(0===t.type)n+=t.value;else if(1===t.type){const{value:s,repeatable:o,optional:a}=t,l=s in e?e[s]:"";if(u(l)&&!o)throw new Error(`Provided param "${s}" is an array but it is not repeatable (* or + modifiers)`);const c=u(l)?l.join("/"):l;if(!c){if(!a)throw new Error(`Missing required param "${s}"`);r.length<2&&(n.endsWith("/")?n=n.slice(0,-1):i=!0)}n+=c}}return n||"/"}return{re:o,score:i,keys:s,parse:l,stringify:c}}function vt(t,e){let n=0;while(n<t.length&&n<e.length){const i=e[n]-t[n];if(i)return i;n++}return t.length<e.length?1===t.length&&80===t[0]?-1:1:t.length>e.length?1===e.length&&80===e[0]?1:-1:0}function yt(t,e){let n=0;const i=t.score,r=e.score;while(n<i.length&&n<r.length){const t=vt(i[n],r[n]);if(t)return t;n++}if(1===Math.abs(r.length-i.length)){if(wt(i))return 1;if(wt(r))return-1}return r.length-i.length}function wt(t){const e=t[t.length-1];return t.length>0&&e[e.length-1]<0}const _t={type:0,value:""},bt=/[a-zA-Z0-9_]/;function xt(t){if(!t)return[[]];if("/"===t)return[[_t]];if(!t.startsWith("/"))throw new Error(`Invalid path "${t}"`);function e(t){throw new Error(`ERR (${n})/"${c}": ${t}`)}let n=0,i=n;const r=[];let s;function o(){s&&r.push(s),s=[]}let a,l=0,c="",u="";function h(){c&&(0===n?s.push({type:0,value:c}):1===n||2===n||3===n?(s.length>1&&("*"===a||"+"===a)&&e(`A repeatable param (${c}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:c,regexp:u,repeatable:"*"===a||"+"===a,optional:"*"===a||"?"===a})):e("Invalid state to consume buffer"),c="")}function A(){c+=a}while(l<t.length)if(a=t[l++],"\\"!==a||2===n)switch(n){case 0:"/"===a?(c&&h(),o()):":"===a?(h(),n=1):A();break;case 4:A(),n=i;break;case 1:"("===a?n=2:bt.test(a)?A():(h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--);break;case 2:")"===a?"\\"==u[u.length-1]?u=u.slice(0,-1)+a:n=3:u+=a;break;case 3:h(),n=0,"*"!==a&&"?"!==a&&"+"!==a&&l--,u="";break;default:e("Unknown state");break}else i=n,n=4;return 2===n&&e(`Unfinished custom RegExp for param "${c}"`),h(),o(),r}function Et(t,e,n){const i=mt(xt(t.path),n);const r=a(i,{record:t,parent:e,children:[],alias:[]});return e&&!r.record.aliasOf===!e.record.aliasOf&&e.children.push(r),r}function Ct(t,e){const n=[],i=new Map;function r(t){return i.get(t)}function s(t,n,i){const r=!i,l=Bt(t);l.aliasOf=i&&i.record;const h=Lt(e,t),A=[l];if("alias"in t){const e="string"===typeof t.alias?[t.alias]:t.alias;for(const t of e)A.push(a({},l,{components:i?i.record.components:l.components,path:t,aliasOf:i?i.record:l}))}let d,f;for(const e of A){const{path:a}=e;if(n&&"/"!==a[0]){const t=n.record.path,i="/"===t[t.length-1]?"":"/";e.path=n.record.path+(a&&i+a)}if(d=Et(e,n,h),i?i.alias.push(d):(f=f||d,f!==d&&f.alias.push(d),r&&t.name&&!It(d)&&o(t.name)),l.children){const t=l.children;for(let e=0;e<t.length;e++)s(t[e],d,i&&i.children[e])}i=i||d,(d.record.components&&Object.keys(d.record.components).length||d.record.name||d.record.redirect)&&u(d)}return f?()=>{o(f)}:c}function o(t){if(lt(t)){const e=i.get(t);e&&(i.delete(t),n.splice(n.indexOf(e),1),e.children.forEach(o),e.alias.forEach(o))}else{const e=n.indexOf(t);e>-1&&(n.splice(e,1),t.record.name&&i.delete(t.record.name),t.children.forEach(o),t.alias.forEach(o))}}function l(){return n}function u(t){let e=0;while(e<n.length&&yt(t,n[e])>=0&&(t.record.path!==n[e].record.path||!Rt(t,n[e])))e++;n.splice(e,0,t),t.record.name&&!It(t)&&i.set(t.record.name,t)}function h(t,e){let r,s,o,l={};if("name"in t&&t.name){if(r=i.get(t.name),!r)throw At(1,{location:t});0,o=r.record.name,l=a(St(e.params,r.keys.filter((t=>!t.optional)).concat(r.parent?r.parent.keys.filter((t=>t.optional)):[]).map((t=>t.name))),t.params&&St(t.params,r.keys.map((t=>t.name)))),s=r.stringify(l)}else if(null!=t.path)s=t.path,r=n.find((t=>t.re.test(s))),r&&(l=r.parse(s),o=r.record.name);else{if(r=e.name?i.get(e.name):n.find((t=>t.re.test(e.path))),!r)throw At(1,{location:t,currentLocation:e});o=r.record.name,l=a({},e.params,t.params),s=r.stringify(l)}const c=[];let u=r;while(u)c.unshift(u.record),u=u.parent;return{name:o,path:s,params:l,matched:c,meta:Ft(c)}}return e=Lt({strict:!1,end:!0,sensitive:!1},e),t.forEach((t=>s(t))),{addRoute:s,resolve:h,removeRoute:o,getRoutes:l,getRecordMatcher:r}}function St(t,e){const n={};for(const i of e)i in t&&(n[i]=t[i]);return n}function Bt(t){return{path:t.path,redirect:t.redirect,name:t.name,meta:t.meta||{},aliasOf:void 0,beforeEnter:t.beforeEnter,props:Tt(t),children:t.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in t?t.components||null:t.component&&{default:t.component}}}function Tt(t){const e={},n=t.props||!1;if("component"in t)e.default=n;else for(const i in t.components)e[i]="object"===typeof n?n[i]:n;return e}function It(t){while(t){if(t.record.aliasOf)return!0;t=t.parent}return!1}function Ft(t){return t.reduce(((t,e)=>a(t,e.meta)),{})}function Lt(t,e){const n={};for(const i in t)n[i]=i in e?e[i]:t[i];return n}function Rt(t,e){return e.children.some((e=>e===t||Rt(t,e)))}function Mt(t){const e={};if(""===t||"?"===t)return e;const n="?"===t[0],i=(n?t.slice(1):t).split("&");for(let r=0;r<i.length;++r){const t=i[r].replace(g," "),n=t.indexOf("="),s=L(n<0?t:t.slice(0,n)),o=n<0?null:L(t.slice(n+1));if(s in e){let t=e[s];u(t)||(t=e[s]=[t]),t.push(o)}else e[s]=o}return e}function Pt(t){let e="";for(let n in t){const i=t[n];if(n=T(n),null==i){void 0!==i&&(e+=(e.length?"&":"")+n);continue}const r=u(i)?i.map((t=>t&&B(t))):[i&&B(i)];r.forEach((t=>{void 0!==t&&(e+=(e.length?"&":"")+n,null!=t&&(e+="="+t))}))}return e}function Nt(t){const e={};for(const n in t){const i=t[n];void 0!==i&&(e[n]=u(i)?i.map((t=>null==t?null:""+t)):null==i?i:""+i)}return e}const Ot=Symbol(""),kt=Symbol(""),Dt=Symbol(""),Ut=Symbol(""),Qt=Symbol("");function Gt(){let t=[];function e(e){return t.push(e),()=>{const n=t.indexOf(e);n>-1&&t.splice(n,1)}}function n(){t=[]}return{add:e,list:()=>t.slice(),reset:n}}function Ht(t,e,n,i,r,s=(t=>t())){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise(((a,l)=>{const c=t=>{!1===t?l(At(4,{from:n,to:e})):t instanceof Error?l(t):at(t)?l(At(2,{from:e,to:t})):(o&&i.enterCallbacks[r]===o&&"function"===typeof t&&o.push(t),a())},u=s((()=>t.call(i&&i.instances[r],e,n,c)));let h=Promise.resolve(u);t.length<3&&(h=h.then(c)),h.catch((t=>l(t)))}))}function Vt(t,e,n,i,r=(t=>t())){const s=[];for(const a of t){0;for(const t in a.components){let l=a.components[t];if("beforeRouteEnter"===e||a.instances[t])if(jt(l)){const o=l.__vccOpts||l,c=o[e];c&&s.push(Ht(c,n,i,a,t,r))}else{let c=l();0,s.push((()=>c.then((s=>{if(!s)return Promise.reject(new Error(`Couldn't resolve component "${t}" at "${a.path}"`));const l=o(s)?s.default:s;a.components[t]=l;const c=l.__vccOpts||l,u=c[e];return u&&Ht(u,n,i,a,t,r)()}))))}}}return s}function jt(t){return"object"===typeof t||"displayName"in t||"props"in t||"__vccOpts"in t}function Wt(t){const e=(0,i.WQ)(Dt),n=(0,i.WQ)(Ut),s=(0,i.EW)((()=>e.resolve((0,r.R1)(t.to)))),o=(0,i.EW)((()=>{const{matched:t}=s.value,{length:e}=t,i=t[e-1],r=n.matched;if(!i||!r.length)return-1;const o=r.findIndex(D.bind(null,i));if(o>-1)return o;const a=Xt(t[e-2]);return e>1&&Xt(i)===a&&r[r.length-1].path!==a?r.findIndex(D.bind(null,t[e-2])):o})),a=(0,i.EW)((()=>o.value>-1&&$t(n.params,s.value.params))),l=(0,i.EW)((()=>o.value>-1&&o.value===n.matched.length-1&&U(n.params,s.value.params)));function u(n={}){return qt(n)?e[(0,r.R1)(t.replace)?"replace":"push"]((0,r.R1)(t.to)).catch(c):Promise.resolve()}return{route:s,href:(0,i.EW)((()=>s.value.href)),isActive:a,isExactActive:l,navigate:u}}const zt=(0,i.pM)({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:Wt,setup(t,{slots:e}){const n=(0,r.Kh)(Wt(t)),{options:s}=(0,i.WQ)(Dt),o=(0,i.EW)((()=>({[Yt(t.activeClass,s.linkActiveClass,"router-link-active")]:n.isActive,[Yt(t.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive})));return()=>{const r=e.default&&e.default(n);return t.custom?r:(0,i.h)("a",{"aria-current":n.isExactActive?t.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:o.value},r)}}}),Kt=zt;function qt(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){const e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function $t(t,e){for(const n in e){const i=e[n],r=t[n];if("string"===typeof i){if(i!==r)return!1}else if(!u(r)||r.length!==i.length||i.some(((t,e)=>t!==r[e])))return!1}return!0}function Xt(t){return t?t.aliasOf?t.aliasOf.path:t.path:""}const Yt=(t,e,n)=>null!=t?t:null!=e?e:n,Zt=(0,i.pM)({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(t,{attrs:e,slots:n}){const s=(0,i.WQ)(Qt),o=(0,i.EW)((()=>t.route||s.value)),l=(0,i.WQ)(kt,0),c=(0,i.EW)((()=>{let t=(0,r.R1)(l);const{matched:e}=o.value;let n;while((n=e[t])&&!n.components)t++;return t})),u=(0,i.EW)((()=>o.value.matched[c.value]));(0,i.Gt)(kt,(0,i.EW)((()=>c.value+1))),(0,i.Gt)(Ot,u),(0,i.Gt)(Qt,o);const h=(0,r.KR)();return(0,i.wB)((()=>[h.value,u.value,t.name]),(([t,e,n],[i,r,s])=>{e&&(e.instances[n]=t,r&&r!==e&&t&&t===i&&(e.leaveGuards.size||(e.leaveGuards=r.leaveGuards),e.updateGuards.size||(e.updateGuards=r.updateGuards))),!t||!e||r&&D(e,r)&&i||(e.enterCallbacks[n]||[]).forEach((e=>e(t)))}),{flush:"post"}),()=>{const r=o.value,s=t.name,l=u.value,c=l&&l.components[s];if(!c)return Jt(n.default,{Component:c,route:r});const A=l.props[s],d=A?!0===A?r.params:"function"===typeof A?A(r):A:null,f=t=>{t.component.isUnmounted&&(l.instances[s]=null)},p=(0,i.h)(c,a({},d,e,{onVnodeUnmounted:f,ref:h}));return Jt(n.default,{Component:p,route:r})||p}}});function Jt(t,e){if(!t)return null;const n=t(e);return 1===n.length?n[0]:n}const te=Zt;function ee(t){const e=Ct(t.routes,t),n=t.parseQuery||Mt,o=t.stringifyQuery||Pt,h=t.history;const A=Gt(),d=Gt(),f=Gt(),p=(0,r.IJ)(ct);let g=ct;s&&t.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const m=l.bind(null,(t=>""+t)),v=l.bind(null,F),y=l.bind(null,L);function w(t,n){let i,r;return lt(t)?(i=e.getRecordMatcher(t),r=n):r=t,e.addRoute(r,i)}function _(t){const n=e.getRecordMatcher(t);n&&e.removeRoute(n)}function b(){return e.getRoutes().map((t=>t.record))}function x(t){return!!e.getRecordMatcher(t)}function E(t,i){if(i=a({},i||p.value),"string"===typeof t){const r=P(n,t,i.path),s=e.resolve({path:r.path},i),o=h.createHref(r.fullPath);return a(r,s,{params:y(s.params),hash:L(r.hash),redirectedFrom:void 0,href:o})}let r;if(null!=t.path)r=a({},t,{path:P(n,t.path,i.path).path});else{const e=a({},t.params);for(const t in e)null==e[t]&&delete e[t];r=a({},t,{params:v(e)}),i.params=v(i.params)}const s=e.resolve(r,i),l=t.hash||"";s.params=m(y(s.params));const c=N(o,a({},t,{hash:S(l),path:s.path})),u=h.createHref(c);return a({fullPath:c,hash:l,query:o===Pt?Nt(t.query):t.query||{}},s,{redirectedFrom:void 0,href:u})}function C(t){return"string"===typeof t?P(n,t,p.value.path):a({},t)}function B(t,e){if(g!==t)return At(8,{from:e,to:t})}function T(t){return M(t)}function I(t){return T(a(C(t),{replace:!0}))}function R(t){const e=t.matched[t.matched.length-1];if(e&&e.redirect){const{redirect:n}=e;let i="function"===typeof n?n(t):n;return"string"===typeof i&&(i=i.includes("?")||i.includes("#")?i=C(i):{path:i},i.params={}),a({query:t.query,hash:t.hash,params:null!=i.path?{}:t.params},i)}}function M(t,e){const n=g=E(t),i=p.value,r=t.state,s=t.force,l=!0===t.replace,c=R(n);if(c)return M(a(C(c),{state:"object"===typeof c?a({},r,c.state):r,force:s,replace:l}),e||n);const u=n;let h;return u.redirectedFrom=e,!s&&k(o,i,n)&&(h=At(16,{to:u,from:i}),nt(i,i,!0,!1)),(h?Promise.resolve(h):U(u,i)).catch((t=>dt(t)?dt(t,2)?t:et(t):q(t,u,i))).then((t=>{if(t){if(dt(t,2))return M(a({replace:l},C(t.to),{state:"object"===typeof t.to?a({},r,t.to.state):r,force:s}),e||u)}else t=G(u,i,!0,l,r);return Q(u,i,t),t}))}function O(t,e){const n=B(t,e);return n?Promise.reject(n):Promise.resolve()}function D(t){const e=st.values().next().value;return e&&"function"===typeof e.runWithContext?e.runWithContext(t):t()}function U(t,e){let n;const[i,r,s]=ne(t,e);n=Vt(i.reverse(),"beforeRouteLeave",t,e);for(const a of i)a.leaveGuards.forEach((i=>{n.push(Ht(i,t,e))}));const o=O.bind(null,t,e);return n.push(o),at(n).then((()=>{n=[];for(const i of A.list())n.push(Ht(i,t,e));return n.push(o),at(n)})).then((()=>{n=Vt(r,"beforeRouteUpdate",t,e);for(const i of r)i.updateGuards.forEach((i=>{n.push(Ht(i,t,e))}));return n.push(o),at(n)})).then((()=>{n=[];for(const i of s)if(i.beforeEnter)if(u(i.beforeEnter))for(const r of i.beforeEnter)n.push(Ht(r,t,e));else n.push(Ht(i.beforeEnter,t,e));return n.push(o),at(n)})).then((()=>(t.matched.forEach((t=>t.enterCallbacks={})),n=Vt(s,"beforeRouteEnter",t,e,D),n.push(o),at(n)))).then((()=>{n=[];for(const i of d.list())n.push(Ht(i,t,e));return n.push(o),at(n)})).catch((t=>dt(t,8)?t:Promise.reject(t)))}function Q(t,e,n){f.list().forEach((i=>D((()=>i(t,e,n)))))}function G(t,e,n,i,r){const o=B(t,e);if(o)return o;const l=e===ct,c=s?history.state:{};n&&(i||l?h.replace(t.fullPath,a({scroll:l&&c&&c.scroll},r)):h.push(t.fullPath,r)),p.value=t,nt(t,e,n,l),et()}let H;function j(){H||(H=h.listen(((t,e,n)=>{if(!ot.listening)return;const i=E(t),r=R(i);if(r)return void M(a(r,{replace:!0}),i).catch(c);g=i;const o=p.value;s&&J(Y(o.fullPath,n.delta),$()),U(i,o).catch((t=>dt(t,12)?t:dt(t,2)?(M(t.to,i).then((t=>{dt(t,20)&&!n.delta&&n.type===V.pop&&h.go(-1,!1)})).catch(c),Promise.reject()):(n.delta&&h.go(-n.delta,!1),q(t,i,o)))).then((t=>{t=t||G(i,o,!1),t&&(n.delta&&!dt(t,8)?h.go(-n.delta,!1):n.type===V.pop&&dt(t,20)&&h.go(-1,!1)),Q(i,o,t)})).catch(c)})))}let W,z=Gt(),K=Gt();function q(t,e,n){et(t);const i=K.list();return i.length?i.forEach((i=>i(t,e,n))):console.error(t),Promise.reject(t)}function Z(){return W&&p.value!==ct?Promise.resolve():new Promise(((t,e)=>{z.add([t,e])}))}function et(t){return W||(W=!t,j(),z.list().forEach((([e,n])=>t?n(t):e())),z.reset()),t}function nt(e,n,r,o){const{scrollBehavior:a}=t;if(!s||!a)return Promise.resolve();const l=!r&&tt(Y(e.fullPath,0))||(o||!r)&&history.state&&history.state.scroll||null;return(0,i.dY)().then((()=>a(e,n,l))).then((t=>t&&X(t))).catch((t=>q(t,e,n)))}const it=t=>h.go(t);let rt;const st=new Set,ot={currentRoute:p,listening:!0,addRoute:w,removeRoute:_,hasRoute:x,getRoutes:b,resolve:E,options:t,push:T,replace:I,go:it,back:()=>it(-1),forward:()=>it(1),beforeEach:A.add,beforeResolve:d.add,afterEach:f.add,onError:K.add,isReady:Z,install(t){const e=this;t.component("RouterLink",Kt),t.component("RouterView",te),t.config.globalProperties.$router=e,Object.defineProperty(t.config.globalProperties,"$route",{enumerable:!0,get:()=>(0,r.R1)(p)}),s&&!rt&&p.value===ct&&(rt=!0,T(h.location).catch((t=>{0})));const n={};for(const r in ct)Object.defineProperty(n,r,{get:()=>p.value[r],enumerable:!0});t.provide(Dt,e),t.provide(Ut,(0,r.Gc)(n)),t.provide(Qt,p);const i=t.unmount;st.add(t),t.unmount=function(){st.delete(t),st.size<1&&(g=ct,H&&H(),H=null,p.value=ct,rt=!1,W=!1),i()}}};function at(t){return t.reduce(((t,e)=>t.then((()=>D(e)))),Promise.resolve())}return ot}function ne(t,e){const n=[],i=[],r=[],s=Math.max(e.matched.length,t.matched.length);for(let o=0;o<s;o++){const s=e.matched[o];s&&(t.matched.find((t=>D(t,s)))?i.push(s):n.push(s));const a=t.matched[o];a&&(e.matched.find((t=>D(t,a)))||r.push(a))}return[n,i,r]}},7934:function(t,e,n){"use strict";n.d(e,{Ay:function(){return Yz}});var i={};n.r(i),n.d(i,{applyTransform:function(){return se},approximatelyEquals:function(){return Ft},boundingExtent:function(){return dt},buffer:function(){return pt},clone:function(){return gt},closestSquaredDistanceXY:function(){return mt},containsCoordinate:function(){return vt},containsExtent:function(){return yt},containsXY:function(){return wt},coordinateRelationship:function(){return _t},createEmpty:function(){return bt},createOrUpdate:function(){return xt},createOrUpdateEmpty:function(){return Et},createOrUpdateFromCoordinate:function(){return Ct},createOrUpdateFromCoordinates:function(){return St},createOrUpdateFromFlatCoordinates:function(){return Bt},createOrUpdateFromRings:function(){return Tt},equals:function(){return It},extend:function(){return Lt},extendCoordinate:function(){return Rt},extendCoordinates:function(){return Mt},extendFlatCoordinates:function(){return Pt},extendRings:function(){return Nt},extendXY:function(){return Ot},forEachCorner:function(){return kt},getArea:function(){return Dt},getBottomLeft:function(){return Ut},getBottomRight:function(){return Qt},getCenter:function(){return Gt},getCorner:function(){return Ht},getEnlargedArea:function(){return Vt},getForViewAndSize:function(){return jt},getHeight:function(){return zt},getIntersection:function(){return qt},getIntersectionArea:function(){return Kt},getMargin:function(){return $t},getRotatedViewport:function(){return Wt},getSize:function(){return Xt},getTopLeft:function(){return Yt},getTopRight:function(){return Zt},getWidth:function(){return Jt},intersects:function(){return te},intersectsSegment:function(){return re},isEmpty:function(){return ee},returnOrUpdate:function(){return ne},scaleFromCenter:function(){return ie},wrapAndSliceX:function(){return ae},wrapX:function(){return oe}});var r={};n.r(r),n.d(r,{Circle:function(){return ei},Geometry:function(){return jn},GeometryCollection:function(){return ri},LineString:function(){return Gi},LinearRing:function(){return Ci},MultiLineString:function(){return Vi},MultiPoint:function(){return Ki},MultiPolygon:function(){return hr},Point:function(){return Wi},Polygon:function(){return rr},SimpleGeometry:function(){return $n}});var s={};n.r(s),n.d(s,{EsriJSON:function(){return zr},GML:function(){return go},GPX:function(){return Aa},GeoJSON:function(){return hs},IGC:function(){return _a},IIIFInfo:function(){return Ra},KML:function(){return BA},MVT:function(){return NA},OWS:function(){return gd},Polyline:function(){return Td},TopoJSON:function(){return Vd},WFS:function(){return Yf},WKB:function(){return sp},WKT:function(){return Sp},WMSCapabilities:function(){return fg},WMSGetFeatureInfo:function(){return vg},WMTSCapabilities:function(){return Kg}});var o={};n.r(o),n.d(o,{all:function(){return qg},bbox:function(){return $g},tile:function(){return Xg}});var a={};n.r(a),n.d(a,{all:function(){return Zg},altKeyOnly:function(){return Jg},altShiftKeysOnly:function(){return tm},always:function(){return im},click:function(){return rm},doubleClick:function(){return cm},focus:function(){return em},focusWithTabindex:function(){return nm},mouseActionButton:function(){return sm},mouseOnly:function(){return pm},never:function(){return om},noModifierKeys:function(){return um},penOnly:function(){return mm},platformModifierKey:function(){return Am},platformModifierKeyOnly:function(){return hm},pointerMove:function(){return am},primaryAction:function(){return vm},shiftKeyOnly:function(){return dm},singleClick:function(){return lm},targetNotEditable:function(){return fm},touchOnly:function(){return gm}});var l={};n.r(l),n.d(l,{easeIn:function(){return ym},easeOut:function(){return wm},inAndOut:function(){return _m},linear:function(){return bm},upAndDown:function(){return xm}});n(4114),n(9479),n(7467),n(4732),n(9577),n(6280),n(7913),n(7801),n(4979);class c{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}function u(t){t.stopPropagation()}var h=c,A={PROPERTYCHANGE:"propertychange"};class d{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}var f=d;function p(t,e,n){let i,r;n=n||g;let s=0,o=t.length,a=!1;while(s<o)i=s+(o-s>>1),r=+n(t[i],e),r<0?s=i+1:(o=i,a=!r);return a?s:~s}function g(t,e){return t>e?1:t<e?-1:0}function m(t,e){return t<e?1:t>e?-1:0}function v(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if("function"===typeof n){for(let r=1;r<i;++r){const i=t[r];if(i===e)return r;if(i<e)return n(e,t[r-1],i)>0?r-1:r}return i-1}if(n>0){for(let n=1;n<i;++n)if(t[n]<e)return n-1;return i-1}if(n<0){for(let n=1;n<i;++n)if(t[n]<=e)return n;return i-1}for(let r=1;r<i;++r){if(t[r]==e)return r;if(t[r]<e)return t[r-1]-e<e-t[r]?r-1:r}return i-1}function y(t,e,n){while(e<n){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function w(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let r=0;r<i;r++)t[t.length]=n[r]}function _(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function b(t,e,n){const i=e||g;return t.every((function(e,r){if(0===r)return!0;const s=i(t[r-1],e);return!(s>0||n&&0===s)}))}function x(){return!0}function E(){return!1}function C(){}function S(t){let e,n,i,r=!1;return function(){const s=Array.prototype.slice.call(arguments);return r&&this===i&&_(s,n)||(r=!0,i=this,n=s,e=t.apply(this,arguments)),e}}function B(t){function e(){let e;try{e=t()}catch(n){return Promise.reject(n)}return e instanceof Promise?e:Promise.resolve(e)}return e()}function T(t){for(const e in t)delete t[e]}function I(t){let e;for(e in t)return!1;return!e}class F extends f{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"===typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const r=e?new h(t):t;r.target||(r.target=this.eventTarget_||this);const s=this.dispatching_||(this.dispatching_={}),o=this.pendingRemovals_||(this.pendingRemovals_={});let a;n in s||(s[n]=0,o[n]=0),++s[n];for(let l=0,c=i.length;l<c;++l)if(a="handleEvent"in i[l]?i[l].handleEvent(r):i[l].call(this,r),!1===a||r.propagationStopped){a=!1;break}if(0===--s[n]){let t=o[n];delete o[n];while(t--)this.removeEventListener(n,C);delete s[n]}return a}disposeInternal(){this.listeners_&&T(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=C,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}var L=F,R={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"};function M(t,e,n,i,r){if(i&&i!==t&&(n=n.bind(i)),r){const i=n;n=function(){t.removeEventListener(e,n),i.apply(this,arguments)}}const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function P(t,e,n,i){return M(t,e,n,i,!0)}function N(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),T(t))}class O extends L{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(R.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=M(this,t[r],e);return i}return M(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=P(this,t[r],e)}else n=P(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)k(n);else if(Array.isArray(t))for(let i=0,r=t.length;i<r;++i)this.removeEventListener(t[i],e);else this.removeEventListener(t,e)}}function k(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)N(t[e]);else N(t)}O.prototype.on,O.prototype.once,O.prototype.un;var D=O;function U(){throw new Error("Unimplemented abstract method.")}let Q=0;function G(t){return t.ol_uid||(t.ol_uid=String(++Q))}const H="9.0.0";class V extends h{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class j extends D{constructor(t){super(),this.on,this.once,this.un,G(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new V(n,t,e)),n=A.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new V(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],I(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}var W=j;function z(t,e){if(!t)throw new Error(e)}class K extends W{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"===typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new K(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(N(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=M(t,R.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?q(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function q(t){if("function"===typeof t)return t;let e;if(Array.isArray(t))e=t;else{z("function"===typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`");const n=t;e=[n]}return function(){return e}}var $=K;const X=new Array(6);function Y(){return[1,0,0,1,0,0]}function Z(t){return tt(t,1,0,0,1,0,0)}function J(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],c=e[1],u=e[2],h=e[3],A=e[4],d=e[5];return t[0]=n*l+r*c,t[1]=i*l+s*c,t[2]=n*u+r*h,t[3]=i*u+s*h,t[4]=n*A+r*d+o,t[5]=i*A+s*d+a,t}function tt(t,e,n,i,r,s,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t}function et(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function nt(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function it(t,e){const n=Math.cos(e),i=Math.sin(e);return J(t,tt(X,n,i,-i,n,0,0))}function rt(t,e,n){return J(t,tt(X,e,0,0,n,0,0))}function st(t,e,n){return tt(t,e,0,0,n,0,0)}function ot(t,e,n){return J(t,tt(X,1,0,0,1,e,n))}function at(t,e,n,i,r,s,o,a){const l=Math.sin(s),c=Math.cos(s);return t[0]=i*c,t[1]=r*l,t[2]=-i*l,t[3]=r*c,t[4]=o*i*c-a*i*l+e,t[5]=o*r*l+a*r*c+n,t}function lt(t,e){const n=ct(e);z(0!==n,"Transformation matrix cannot be inverted");const i=e[0],r=e[1],s=e[2],o=e[3],a=e[4],l=e[5];return t[0]=o/n,t[1]=-r/n,t[2]=-s/n,t[3]=i/n,t[4]=(s*l-o*a)/n,t[5]=-(i*l-r*a)/n,t}function ct(t){return t[0]*t[3]-t[1]*t[2]}const ut=[1e6,1e6,1e6,1e6,2,2];function ht(t){const e="matrix("+t.map(((t,e)=>Math.round(t*ut[e])/ut[e])).join(", ")+")";return e}var At={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function dt(t){const e=bt();for(let n=0,i=t.length;n<i;++n)Rt(e,t[n]);return e}function ft(t,e,n){const i=Math.min.apply(null,t),r=Math.min.apply(null,e),s=Math.max.apply(null,t),o=Math.max.apply(null,e);return xt(i,r,s,o,n)}function pt(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function gt(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function mt(t,e,n){let i,r;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function vt(t,e){return wt(t,e[0],e[1])}function yt(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function wt(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function _t(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=e[0],a=e[1];let l=At.UNKNOWN;return o<n?l|=At.LEFT:o>r&&(l|=At.RIGHT),a<i?l|=At.BELOW:a>s&&(l|=At.ABOVE),l===At.UNKNOWN&&(l=At.INTERSECTING),l}function bt(){return[1/0,1/0,-1/0,-1/0]}function xt(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function Et(t){return xt(1/0,1/0,-1/0,-1/0,t)}function Ct(t,e){const n=t[0],i=t[1];return xt(n,i,n,i,e)}function St(t,e){const n=Et(e);return Mt(n,t)}function Bt(t,e,n,i,r){const s=Et(r);return Pt(s,t,e,n,i)}function Tt(t,e){const n=Et(e);return Nt(n,t)}function It(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function Ft(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function Lt(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function Rt(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function Mt(t,e){for(let n=0,i=e.length;n<i;++n)Rt(t,e[n]);return t}function Pt(t,e,n,i,r){for(;n<i;n+=r)Ot(t,e[n],e[n+1]);return t}function Nt(t,e){for(let n=0,i=e.length;n<i;++n)Mt(t,e[n]);return t}function Ot(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function kt(t,e){let n;return n=e(Ut(t)),n||(n=e(Qt(t)),n||(n=e(Zt(t)),n||(n=e(Yt(t)),n||!1)))}function Dt(t){let e=0;return ee(t)||(e=Jt(t)*zt(t)),e}function Ut(t){return[t[0],t[1]]}function Qt(t){return[t[2],t[1]]}function Gt(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function Ht(t,e){let n;if("bottom-left"===e)n=Ut(t);else if("bottom-right"===e)n=Qt(t);else if("top-left"===e)n=Yt(t);else{if("top-right"!==e)throw new Error("Invalid corner");n=Zt(t)}return n}function Vt(t,e){const n=Math.min(t[0],e[0]),i=Math.min(t[1],e[1]),r=Math.max(t[2],e[2]),s=Math.max(t[3],e[3]);return(r-n)*(s-i)}function jt(t,e,n,i,r){const[s,o,a,l,c,u,h,A]=Wt(t,e,n,i);return xt(Math.min(s,a,c,h),Math.min(o,l,u,A),Math.max(s,a,c,h),Math.max(o,l,u,A),r)}function Wt(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,c=r*a,u=s*o,h=s*a,A=t[0],d=t[1];return[A-l+h,d-c-u,A-l-h,d-c+u,A+l-h,d+c+u,A+l+h,d+c-u,A-l+h,d-c-u]}function zt(t){return t[3]-t[1]}function Kt(t,e){const n=qt(t,e);return Dt(n)}function qt(t,e,n){const i=n||bt();return te(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):Et(i),i}function $t(t){return Jt(t)+zt(t)}function Xt(t){return[t[2]-t[0],t[3]-t[1]]}function Yt(t){return[t[0],t[3]]}function Zt(t){return[t[2],t[3]]}function Jt(t){return t[2]-t[0]}function te(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function ee(t){return t[2]<t[0]||t[3]<t[1]}function ne(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function ie(t,e){const n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function re(t,e,n){let i=!1;const r=_t(t,e),s=_t(t,n);if(r===At.INTERSECTING||s===At.INTERSECTING)i=!0;else{const o=t[0],a=t[1],l=t[2],c=t[3],u=e[0],h=e[1],A=n[0],d=n[1],f=(d-h)/(A-u);let p,g;s&At.ABOVE&&!(r&At.ABOVE)&&(p=A-(d-c)/f,i=p>=o&&p<=l),i||!(s&At.RIGHT)||r&At.RIGHT||(g=d-(A-l)*f,i=g>=a&&g<=c),i||!(s&At.BELOW)||r&At.BELOW||(p=A-(d-a)/f,i=p>=o&&p<=l),i||!(s&At.LEFT)||r&At.LEFT||(g=d-(A-o)*f,i=g>=a&&g<=c)}return i}function se(t,e,n,i){if(ee(t))return Et(n);let r=[];if(i>1){const e=t[2]-t[0],n=t[3]-t[1];for(let s=0;s<i;++s)r.push(t[0]+e*s/i,t[1],t[2],t[1]+n*s/i,t[2]-e*s/i,t[3],t[0],t[3]-n*s/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const s=[],o=[];for(let a=0,l=r.length;a<l;a+=2)s.push(r[a]),o.push(r[a+1]);return ft(s,o,n)}function oe(t,e){const n=e.getExtent(),i=Gt(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=Jt(n),r=Math.floor((i[0]-n[0])/e),s=r*e;t[0]-=s,t[2]-=s}return t}function ae(t,e){if(e.canWrapX()){const n=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[n[0],t[1],n[2],t[3]]];oe(t,e);const i=Jt(n);if(Jt(t)>i)return[[n[0],t[1],n[2],t[3]]];if(t[0]<n[0])return[[t[0]+i,t[1],n[2],t[3]],[n[0],t[1],t[2],t[3]]];if(t[2]>n[2])return[[t[0],t[1],n[2],t[3]],[n[0],t[1],t[2]-i,t[3]]]}return[t]}const le={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function ce(t){return le[t]}const ue={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class he{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ue[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}var Ae=he;const de=6378137,fe=Math.PI*de,pe=[-fe,-fe,fe,fe],ge=[-180,-85,180,85],me=de*Math.log(Math.tan(Math.PI/2));class ve extends Ae{constructor(t){super({code:t,units:"m",extent:pe,global:!0,worldExtent:ge,getPointResolution:function(t,e){return t/Math.cosh(e[1]/de)}})}}const ye=[new ve("EPSG:3857"),new ve("EPSG:102100"),new ve("EPSG:102113"),new ve("EPSG:900913"),new ve("http://www.opengis.net/def/crs/EPSG/0/3857"),new ve("http://www.opengis.net/gml/srs/epsg.xml#3857")];function we(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n){e[r]=fe*t[r]/180;let n=de*Math.log(Math.tan(Math.PI*(+t[r+1]+90)/360));n>me?n=me:n<-me&&(n=-me),e[r+1]=n}return e}function _e(t,e,n){const i=t.length;n=n>1?n:2,void 0===e&&(e=n>2?t.slice():new Array(i));for(let r=0;r<i;r+=n)e[r]=180*t[r]/fe,e[r+1]=360*Math.atan(Math.exp(t[r+1]/de))/Math.PI-90;return e}const be=6378137,xe=[-180,-90,180,90],Ee=Math.PI*be/180;class Ce extends Ae{constructor(t,e){super({code:t,units:"degrees",extent:xe,axisOrientation:e,global:!0,metersPerUnit:Ee,worldExtent:xe})}}const Se=[new Ce("CRS:84"),new Ce("EPSG:4326","neu"),new Ce("urn:ogc:def:crs:OGC:1.3:CRS84"),new Ce("urn:ogc:def:crs:OGC:2:84"),new Ce("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new Ce("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new Ce("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let Be={};function Te(t){return Be[t]||Be[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function Ie(t,e){Be[t]=e}let Fe={};function Le(t,e,n){const i=t.getCode(),r=e.getCode();i in Fe||(Fe[i]={}),Fe[i][r]=n}function Re(t,e){let n;return t in Fe&&e in Fe[t]&&(n=Fe[t][e]),n}function Me(t,e,n){return Math.min(Math.max(t,e),n)}function Pe(t,e,n,i,r,s){const o=r-n,a=s-i;if(0!==o||0!==a){const l=((t-n)*o+(e-i)*a)/(o*o+a*a);l>1?(n=r,i=s):l>0&&(n+=o*l,i+=a*l)}return Ne(t,e,n,i)}function Ne(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function Oe(t){const e=t.length;for(let i=0;i<e;i++){let n=i,r=Math.abs(t[i][i]);for(let o=i+1;o<e;o++){const e=Math.abs(t[o][i]);e>r&&(r=e,n=o)}if(0===r)return null;const s=t[n];t[n]=t[i],t[i]=s;for(let o=i+1;o<e;o++){const n=-t[o][i]/t[i][i];for(let r=i;r<e+1;r++)i==r?t[o][r]=0:t[o][r]+=n*t[i][r]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function ke(t){return 180*t/Math.PI}function De(t){return t*Math.PI/180}function Ue(t,e){const n=t%e;return n*e<0?n+e:n}function Qe(t,e,n){return t+n*(e-t)}function Ge(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function He(t,e){return Math.round(Ge(t,e))}function Ve(t,e){return Math.floor(Ge(t,e))}function je(t,e){return Math.ceil(Ge(t,e))}function We(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function ze(t,e){const n=e.getRadius(),i=e.getCenter(),r=i[0],s=i[1],o=t[0],a=t[1];let l=o-r;const c=a-s;0===l&&0===c&&(l=1);const u=Math.sqrt(l*l+c*c),h=r+n*l/u,A=s+n*c/u;return[h,A]}function Ke(t,e){const n=t[0],i=t[1],r=e[0],s=e[1],o=r[0],a=r[1],l=s[0],c=s[1],u=l-o,h=c-a,A=0===u&&0===h?0:(u*(n-o)+h*(i-a))/(u*u+h*h||0);let d,f;return A<=0?(d=o,f=a):A>=1?(d=l,f=c):(d=o+A*u,f=a+A*h),[d,f]}function qe(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function $e(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function Xe(t,e){return t[0]*=e,t[1]*=e,t}function Ye(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function Ze(t,e){return Math.sqrt(Ye(t,e))}function Je(t,e){return Ye(t,Ke(t,e))}function tn(t,e){if(e.canWrapX()){const n=Jt(e.getExtent()),i=en(t,e,n);i&&(t[0]-=i*n)}return t}function en(t,e,n){const i=e.getExtent();let r=0;return e.canWrapX()&&(t[0]<i[0]||t[0]>i[2])&&(n=n||Jt(i),r=Math.floor((t[0]-i[0])/n)),r}const nn=6371008.8;function rn(t,e,n){n=n||nn;const i=De(t[1]),r=De(e[1]),s=(r-i)/2,o=De(e[0]-t[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(r);return 2*n*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function sn(t,e,n,i){i=i||nn;const r=De(t[1]),s=De(t[0]),o=e/i,a=Math.asin(Math.sin(r)*Math.cos(o)+Math.cos(r)*Math.sin(o)*Math.cos(n)),l=s+Math.atan2(Math.sin(n)*Math.sin(o)*Math.cos(r),Math.cos(o)-Math.sin(r)*Math.sin(a));return[ke(l),ke(a)]}const on={info:1,warn:2,error:3,none:4};let an=on.info;function ln(...t){an>on.warn||console.warn(...t)}function cn(...t){an>on.error||console.error(...t)}let un=!0;function hn(t){const e=void 0===t||t;un=!e}function An(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function dn(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function fn(t){Ie(t.getCode(),t),Le(t,t,An)}function pn(t){t.forEach(fn)}function gn(t){return"string"===typeof t?Te(t):t||null}function mn(t,e,n,i){let r;t=gn(t);const s=t.getPointResolutionFunc();if(s){if(r=s(e,n),i&&i!==t.getUnits()){const e=t.getMetersPerUnit();e&&(r=r*e/ue[i])}}else{const s=t.getUnits();if("degrees"==s&&!i||"degrees"==i)r=e;else{const o=En(t,gn("EPSG:4326"));if(o===dn&&"degrees"!==s)r=e*t.getMetersPerUnit();else{let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=o(t,t,2);const i=rn(t.slice(0,2),t.slice(2,4)),s=rn(t.slice(4,6),t.slice(6,8));r=(i+s)/2}const a=i?ue[i]:t.getMetersPerUnit();void 0!==a&&(r/=a)}}return r}function vn(t){pn(t),t.forEach((function(e){t.forEach((function(t){e!==t&&Le(e,t,An)}))}))}function yn(t,e,n,i){t.forEach((function(t){e.forEach((function(e){Le(t,e,n),Le(e,t,i)}))}))}function wn(t,e){return t?"string"===typeof t?gn(t):t:gn(e)}function _n(t){return function(e,n,i){const r=e.length;i=void 0!==i?i:2,n=void 0!==n?n:new Array(r);for(let s=0;s<r;s+=i){const r=t(e.slice(s,s+i)),o=r.length;for(let t=0,a=i;t<a;++t)n[s+t]=t>=o?e[s+t]:r[t]}return n}}function bn(t,e,n,i){const r=gn(t),s=gn(e);Le(r,s,_n(n)),Le(s,r,_n(i))}function xn(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;const i=En(t,e);return i===An&&n}function En(t,e){const n=t.getCode(),i=e.getCode();let r=Re(n,i);return r||(r=dn),r}function Cn(t,e){const n=gn(t),i=gn(e);return En(n,i)}function Sn(t,e,n){const i=Cn(e,n);return i(t,void 0,t.length)}function Bn(t,e,n,i){const r=Cn(e,n);return se(t,r,void 0,i)}let Tn=null;function In(){return Tn}function Fn(t,e){return Tn?Sn(t,e,Tn):t}function Ln(t,e){return Tn?Sn(t,Tn,e):(un&&!qe(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(un=!1,ln("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function Rn(t,e){return Tn?Bn(t,e,Tn):t}function Mn(t,e){return Tn?Bn(t,Tn,e):t}function Pn(t,e){if(!Tn)return t;const n=gn(e).getMetersPerUnit(),i=Tn.getMetersPerUnit();return n&&i?t*n/i:t}function Nn(t,e){if(!Tn)return t;const n=gn(e).getMetersPerUnit(),i=Tn.getMetersPerUnit();return n&&i?t*i/n:t}function On(t,e,n){return function(i){let r,s;if(t.canWrapX()){const e=t.getExtent(),o=Jt(e);i=i.slice(0),s=en(i,t,o),s&&(i[0]=i[0]-s*o),i[0]=Me(i[0],e[0],e[2]),i[1]=Me(i[1],e[1],e[3]),r=n(i)}else r=n(i);return s&&e.canWrapX()&&(r[0]+=s*Jt(e.getExtent())),r}}function kn(){vn(ye),vn(Se),yn(Se,ye,we,_e)}function Dn(t,e,n,i,r,s){s=s||[];let o=0;for(let a=e;a<n;a+=i){const e=t[a],n=t[a+1];s[o++]=r[0]*e+r[2]*n+r[4],s[o++]=r[1]*e+r[3]*n+r[5]}return s&&s.length!=o&&(s.length=o),s}function Un(t,e,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),c=s[0],u=s[1];let h=0;for(let A=e;A<n;A+=i){const e=t[A]-c,n=t[A+1]-u;o[h++]=c+e*a-n*l,o[h++]=u+e*l+n*a;for(let r=A+2;r<A+i;++r)o[h++]=t[r]}return o&&o.length!=h&&(o.length=h),o}function Qn(t,e,n,i,r,s,o,a){a=a||[];const l=o[0],c=o[1];let u=0;for(let h=e;h<n;h+=i){const e=t[h]-l,n=t[h+1]-c;a[u++]=l+r*e,a[u++]=c+s*n;for(let r=h+2;r<h+i;++r)a[u++]=t[r]}return a&&a.length!=u&&(a.length=u),a}function Gn(t,e,n,i,r,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let e=l+2;e<l+i;++e)o[a++]=t[e]}return o&&o.length!=a&&(o.length=a),o}kn();const Hn=Y();class Vn extends W{constructor(){super(),this.extent_=bt(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=S(((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return U()}closestPointXY(t,e,n,i){return U()}containsXY(t,e){const n=this.getClosestPoint([t,e]);return n[0]===t&&n[1]===e}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return U()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&Et(t),this.extentRevision_=this.getRevision()}return ne(this.extent_,t)}rotate(t,e){U()}scale(t,e,n){U()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return U()}getType(){return U()}applyTransform(t){U()}intersectsExtent(t){return U()}translate(t,e){U()}transform(t,e){const n=gn(t),i="tile-pixels"==n.getUnits()?function(t,i,r){const s=n.getExtent(),o=n.getWorldExtent(),a=zt(o)/zt(s);return at(Hn,o[0],o[3],a,-a,0,0,0),Dn(t,0,t.length,r,Hn,i),Cn(n,e)(t,i,r)}:Cn(n,e);return this.applyTransform(i),this}}var jn=Vn;class Wn extends jn{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return Bt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return U()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t),n=e.getFlatCoordinates();return n.length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Kn(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){U()}setLayout(t,e,n){let i;if(t)i=Kn(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=zn(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Un(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=Gt(this.getExtent()));const i=this.getFlatCoordinates();if(i){const r=this.getStride();Qn(i,0,i.length,r,t,e,n,i),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();Gn(n,0,n.length,i,t,e,n),this.changed()}}}function zn(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function Kn(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function qn(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const r=t.getStride();return Dn(i,0,i.length,r,e,n)}var $n=Wn;function Xn(t,e,n,i){for(let r=0,s=n.length;r<s;++r)t[e++]=n[r];return e}function Yn(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const s=n[r];for(let n=0;n<i;++n)t[e++]=s[n]}return e}function Zn(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=Yn(t,e,n[o],i);r[s++]=a,e=a}return r.length=s,r}function Jn(t,e,n,i,r){r=r||[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=Zn(t,e,n[o],i,r[s]);0===a.length&&(a[0]=e),r[s++]=a,e=a[a.length-1]}return r.length=s,r}class ti extends $n{constructor(t,e,n){super(),void 0!==n&&void 0===e?this.setFlatCoordinates(n,t):(e=e||0,this.setCenterAndRadius(t,e,n))}clone(){const t=new ti(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,s=t-r[0],o=e-r[1],a=s*s+o*o;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)n[t]=r[t];else{const t=this.getRadius()/Math.sqrt(a);n[0]=r[0]+t*s,n[1]=r[1]+t*o;for(let e=2;e<this.stride;++e)n[e]=r[e]}return n.length=this.stride,a}return i}containsXY(t,e){const n=this.flatCoordinates,i=t-n[0],r=e-n[1];return i*i+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,n=e[this.stride]-e[0];return xt(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if(te(t,e)){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||kt(t,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(let r=1;r<e;++r)i[e+r]=t[r];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let r=Xn(i,0,t,this.stride);i[r++]=i[0]+e;for(let s=1,o=this.stride;s<o;++s)i[r++]=i[s];i.length=r,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const n=this.getCenter(),i=this.getStride();this.setCenter(Un(n,0,n.length,i,t,e,n)),this.changed()}}ti.prototype.transform;var ei=ti;class ni extends jn{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(N),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,n=t.length;e<n;++e)this.changeEventsKeys_.push(M(t[e],R.CHANGE,this.changed,this))}clone(){const t=new ni(ii(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<mt(this.getExtent(),t,e))return i;const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)i=r[s].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){Et(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)Lt(t,e[n].getExtent());return t}getGeometries(){return ii(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let r=0,s=n.length;r<s;++r){const s=n[r],o=s.getSimplifiedGeometry(t);e.push(o),o!==s&&(i=!0)}if(i){const t=new ni(e);return t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=Gt(this.getExtent()));const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(ii(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function ii(t){return t.map((t=>t.clone()))}var ri=ni;function si(t,e,n,i,r,s,o){const a=t[e],l=t[e+1],c=t[n]-a,u=t[n+1]-l;let h;if(0===c&&0===u)h=e;else{const A=((r-a)*c+(s-l)*u)/(c*c+u*u);if(A>1)h=n;else{if(A>0){for(let r=0;r<i;++r)o[r]=Qe(t[e+r],t[n+r],A);return void(o.length=i)}h=e}}for(let A=0;A<i;++A)o[A]=t[h+A];o.length=i}function oi(t,e,n,i,r){let s=t[e],o=t[e+1];for(e+=i;e<n;e+=i){const n=t[e],i=t[e+1],a=Ne(s,o,n,i);a>r&&(r=a),s=n,o=i}return r}function ai(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];r=oi(t,e,o,i,r),e=o}return r}function li(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];r=ai(t,e,o,i,r),e=o[o.length-1]}return r}function ci(t,e,n,i,r,s,o,a,l,c,u){if(e==n)return c;let h,A;if(0===r){if(A=Ne(o,a,t[e],t[e+1]),A<c){for(h=0;h<i;++h)l[h]=t[e+h];return l.length=i,A}return c}u=u||[NaN,NaN];let d=e+i;while(d<n)if(si(t,d-i,d,i,o,a,u),A=Ne(o,a,u[0],u[1]),A<c){for(c=A,h=0;h<i;++h)l[h]=u[h];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(A)-Math.sqrt(c))/r|0,1);if(s&&(si(t,n-i,e,i,o,a,u),A=Ne(o,a,u[0],u[1]),A<c)){for(c=A,h=0;h<i;++h)l[h]=u[h];l.length=i}return c}function ui(t,e,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,A=n.length;h<A;++h){const A=n[h];c=ci(t,e,A,i,r,s,o,a,l,c,u),e=A}return c}function hi(t,e,n,i,r,s,o,a,l,c,u){u=u||[NaN,NaN];for(let h=0,A=n.length;h<A;++h){const A=n[h];c=ui(t,e,A,i,r,s,o,a,l,c,u),e=A[A.length-1]}return c}function Ai(t,e,n,i,r,s,o){const a=(n-e)/i;if(a<3){for(;e<n;e+=i)s[o++]=t[e],s[o++]=t[e+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const c=[e,n-i];let u=0;while(c.length>0){const n=c.pop(),s=c.pop();let o=0;const a=t[s],h=t[s+1],A=t[n],d=t[n+1];for(let e=s+i;e<n;e+=i){const n=t[e],i=t[e+1],r=Pe(n,i,a,h,A,d);r>o&&(u=e,o=r)}o>r&&(l[(u-e)/i]=1,s+i<u&&c.push(s,u),u+i<n&&c.push(u,n))}for(let h=0;h<a;++h)l[h]&&(s[o++]=t[e+h*i],s[o++]=t[e+h*i+1]);return o}function di(t,e,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const c=n[l];o=Ai(t,e,c,i,r,s,o),a.push(o),e=c}return o}function fi(t,e){return e*Math.round(t/e)}function pi(t,e,n,i,r,s,o){if(e==n)return o;let a,l,c=fi(t[e],r),u=fi(t[e+1],r);e+=i,s[o++]=c,s[o++]=u;do{if(a=fi(t[e],r),l=fi(t[e+1],r),e+=i,e==n)return s[o++]=a,s[o++]=l,o}while(a==c&&l==u);while(e<n){const n=fi(t[e],r),h=fi(t[e+1],r);if(e+=i,n==a&&h==l)continue;const A=a-c,d=l-u,f=n-c,p=h-u;A*p==d*f&&(A<0&&f<A||A==f||A>0&&f>A)&&(d<0&&p<d||d==p||d>0&&p>d)?(a=n,l=h):(s[o++]=a,s[o++]=l,c=a,u=l,a=n,l=h)}return s[o++]=a,s[o++]=l,o}function gi(t,e,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const c=n[l];o=pi(t,e,c,i,r,s,o),a.push(o),e=c}return o}function mi(t,e,n,i,r,s,o,a){for(let l=0,c=n.length;l<c;++l){const c=n[l],u=[];o=gi(t,e,c,i,r,s,o,u),a.push(u),e=c[c.length-1]}return o}function vi(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function yi(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=n[o];r[s++]=vi(t,e,a,i,r[s]),e=a}return r.length=s,r}function wi(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=0,a=n.length;o<a;++o){const a=n[o];r[s++]=1===a.length&&a[0]===e?[]:yi(t,e,a,i,r[s]),e=a[a.length-1]}return r.length=s,r}function _i(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=o*n-s*i,s=n,o=i}return r/2}function bi(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s];r+=_i(t,e,o,i),e=o}return r}function xi(t,e,n,i){let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s];r+=bi(t,e,o,i),e=o[o.length-1]}return r}class Ei extends $n{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new Ei(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,i){return i<mt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(oi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ci(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,i))}getArea(){return _i(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Ai(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Ei(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yn(this.flatCoordinates,0,t,this.stride),this.changed()}}var Ci=Ei;function Si(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function Bi(t,e,n,i,r,s,o){let a,l;const c=(n-e)/i;if(1===c)a=e;else if(2===c)a=e,l=r;else if(0!==c){let s=t[e],o=t[e+1],c=0;const u=[0];for(let r=e+i;r<n;r+=i){const e=t[r],n=t[r+1];c+=Math.sqrt((e-s)*(e-s)+(n-o)*(n-o)),u.push(c),s=e,o=n}const h=r*c,A=p(u,h);A<0?(l=(h-u[-A-2])/(u[-A-1]-u[-A-2]),a=e+(-A-2)*i):a=e+A*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=void 0===a?NaN:void 0===l?t[a+u]:Qe(t[a+u],t[a+i+u],l);return s}function Ti(t,e,n,i,r,s){if(n==e)return null;let o;if(r<t[e+i-1])return s?(o=t.slice(e,e+i),o[i-1]=r,o):null;if(t[n-1]<r)return s?(o=t.slice(n-i,n),o[i-1]=r,o):null;if(r==t[e+i-1])return t.slice(e,e+i);let a=e/i,l=n/i;while(a<l){const e=a+l>>1;r<t[(e+1)*i-1]?l=e:a=e+1}const c=t[a*i-1];if(r==c)return t.slice((a-1)*i,(a-1)*i+i);const u=t[(a+1)*i-1],h=(r-c)/(u-c);o=[];for(let A=0;A<i-1;++A)o.push(Qe(t[(a-1)*i+A],t[a*i+A],h));return o.push(r),o}function Ii(t,e,n,i,r,s,o){if(o)return Ti(t,e,n[n.length-1],i,r,s);let a;if(r<t[i-1])return s?(a=t.slice(0,i),a[i-1]=r,a):null;if(t[t.length-1]<r)return s?(a=t.slice(t.length-i),a[i-1]=r,a):null;for(let l=0,c=n.length;l<c;++l){const s=n[l];if(e!=s){if(r<t[e+i-1])return null;if(r<=t[s-1])return Ti(t,e,s,i,r,!1);e=s}}return null}function Fi(t,e,n,i,r){const s=kt(r,(function(r){return!Li(t,e,n,i,r[0],r[1])}));return!s}function Li(t,e,n,i,r,s){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=s?i>s&&(n-a)*(s-l)-(r-a)*(i-l)>0&&o++:i<=s&&(n-a)*(s-l)-(r-a)*(i-l)<0&&o--,a=n,l=i}return 0!==o}function Ri(t,e,n,i,r,s){if(0===n.length)return!1;if(!Li(t,e,n[0],i,r,s))return!1;for(let o=1,a=n.length;o<a;++o)if(Li(t,n[o-1],n[o],i,r,s))return!1;return!0}function Mi(t,e,n,i,r,s){if(0===n.length)return!1;for(let o=0,a=n.length;o<a;++o){const a=n[o];if(Ri(t,e,a,i,r,s))return!0;e=a[a.length-1]}return!1}function Pi(t,e,n,i,r){const s=Pt(bt(),t,e,n,i);return!!te(r,s)&&(!!yt(r,s)||(s[0]>=r[0]&&s[2]<=r[2]||(s[1]>=r[1]&&s[3]<=r[3]||Si(t,e,n,i,(function(t,e){return re(r,t,e)})))))}function Ni(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){if(Pi(t,e,n[s],i,r))return!0;e=n[s]}return!1}function Oi(t,e,n,i,r){return!!Pi(t,e,n,i,r)||(!!Li(t,e,n,i,r[0],r[1])||(!!Li(t,e,n,i,r[0],r[3])||(!!Li(t,e,n,i,r[2],r[1])||!!Li(t,e,n,i,r[2],r[3]))))}function ki(t,e,n,i,r){if(!Oi(t,e,n[0],i,r))return!1;if(1===n.length)return!0;for(let s=1,o=n.length;s<o;++s)if(Fi(t,n[s-1],n[s],i,r)&&!Pi(t,n[s-1],n[s],i,r))return!1;return!0}function Di(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];if(ki(t,e,o,i,r))return!0;e=o[o.length-1]}return!1}function Ui(t,e,n,i){let r=t[e],s=t[e+1],o=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];o+=Math.sqrt((e-r)*(e-r)+(n-s)*(n-s)),r=e,s=n}return o}class Qi extends $n{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){w(this.flatCoordinates,t),this.changed()}clone(){const t=new Qi(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<mt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(oi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ci(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return Si(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,Ti(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return Bi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Ui(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=Ai(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new Qi(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return Pi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yn(this.flatCoordinates,0,t,this.stride),this.changed()}}var Gi=Qi;class Hi extends $n{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const e=t,n=[],i=[];for(let t=0,s=e.length;t<s;++t){const r=e[t];w(n,r.getFlatCoordinates()),i.push(n.length)}const r=0===e.length?this.getLayout():e[0].getLayout();this.setFlatCoordinates(r,n),this.ends_=i}}appendLineString(t){w(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new Hi(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<mt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ai(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ui(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,Ii(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return yi(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new Gi(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let r=0;for(let s=0,o=e.length;s<o;++s){const o=e[s],a=new Gi(t.slice(r,o),n);i.push(a),r=o}return i}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const i=this.ends_,r=this.stride;for(let s=0,o=i.length;s<o;++s){const o=i[s],a=Bi(e,n,o,r,.5);w(t,a),n=o}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=di(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new Hi(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return Ni(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Zn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}var Vi=Hi;class ji extends $n{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new ji(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,s=Ne(t,e,r[0],r[1]);if(s<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=r[e];return n.length=t,s}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return Ct(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return wt(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Xn(this.flatCoordinates,0,t,this.stride),this.changed()}}var Wi=ji;class zi extends $n{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){w(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new zi(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<mt(this.getExtent(),t,e))return i;const r=this.flatCoordinates,s=this.stride;for(let o=0,a=r.length;o<a;o+=s){const a=Ne(t,e,r[o],r[o+1]);if(a<i){i=a;for(let t=0;t<s;++t)n[t]=r[o+t];n.length=s}}return i}getCoordinates(){return vi(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new Wi(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let r=0,s=t.length;r<s;r+=n){const s=new Wi(t.slice(r,r+n),e);i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,r=e.length;i<r;i+=n){const n=e[i],r=e[i+1];if(wt(t,n,r))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Yn(this.flatCoordinates,0,t,this.stride),this.changed()}}var Ki=zi;function qi(t,e,n,i,r,s,o){let a,l,c,u,h,A,d;const f=r[s+1],p=[];for(let g=0,y=n.length;g<y;++g){const r=n[g];for(u=t[r-i],A=t[r-i+1],a=e;a<r;a+=i)h=t[a],d=t[a+1],(f<=A&&d<=f||A<=f&&f<=d)&&(c=(f-A)/(d-A)*(h-u)+u,p.push(c)),u=h,A=d}let m=NaN,v=-1/0;for(p.sort(g),u=p[0],a=1,l=p.length;a<l;++a){h=p[a];const r=Math.abs(h-u);r>v&&(c=(u+h)/2,Ri(t,e,n,i,c,f)&&(m=c,v=r)),u=h}return isNaN(m)&&(m=r[s]),o?(o.push(m,f,v),o):[m,f,v]}function $i(t,e,n,i,r){let s=[];for(let o=0,a=n.length;o<a;++o){const a=n[o];s=qi(t,e,a,i,r,2*o,s),e=a[a.length-1]}return s}function Xi(t,e,n,i){while(e<n-i){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function Yi(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=(n-s)*(i+o),s=n,o=i}return 0===r?void 0:r>0}function Zi(t,e,n,i,r){r=void 0!==r&&r;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=Yi(t,e,o,i);if(0===s){if(r&&a||!r&&!a)return!1}else if(r&&!a||!r&&a)return!1;e=o}return!0}function Ji(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];if(!Zi(t,e,o,i,r))return!1;o.length&&(e=o[o.length-1])}return!0}function tr(t,e,n,i,r){r=void 0!==r&&r;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=Yi(t,e,o,i),l=0===s?r&&a||!r&&!a:r&&!a||!r&&a;l&&Xi(t,e,o,i),e=o}return e}function er(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s)e=tr(t,e,n[s],i,r);return e}function nr(t,e){const n=[];let i,r=0,s=0;for(let o=0,a=e.length;o<a;++o){const a=e[o],l=Yi(t,r,a,2);if(void 0===i&&(i=l),l===i)n.push(e.slice(s,o+1));else{if(0===n.length)continue;n[n.length-1].push(e[s])}s=o+1,r=a}return n}class ir extends $n{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?w(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ir(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<mt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ai(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ui(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Ri(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return bi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),tr(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,yi(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=Gt(this.getExtent());this.flatInteriorPoint_=qi(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new Wi(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new Ci(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s],a=new Ci(e.slice(r,o),t);i.push(a),r=o}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Zi(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=tr(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=gi(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new ir(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return ki(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Zn(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}var rr=ir;function sr(t,e,n,i){n=n||32;const r=[];for(let s=0;s<n;++s)w(r,sn(t,e,2*Math.PI*s/n,i));return r.push(r[0],r[1]),new ir(r,"XY",[r.length])}function or(t){if(ee(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],r=t[3],s=[e,n,e,r,i,r,i,n,e,n];return new ir(s,"XY",[s.length])}function ar(t,e,n){e=e||32;const i=t.getStride(),r=t.getLayout(),s=t.getCenter(),o=i*(e+1),a=new Array(o);for(let u=0;u<o;u+=i){a[u]=0,a[u+1]=0;for(let t=2;t<i;t++)a[u+t]=s[t]}const l=[a.length],c=new ir(a,r,l);return lr(c,s,t.getRadius(),n),c}function lr(t,e,n,i){const r=t.getFlatCoordinates(),s=t.getStride(),o=r.length/s-1,a=i||0;for(let l=0;l<=o;++l){const t=l*s,i=a+2*Ue(l,o)*Math.PI/o;r[t]=e[0]+n*Math.cos(i),r[t+1]=e[1]+n*Math.sin(i)}t.changed()}function cr(t,e,n,i){const r=[];let s=bt();for(let o=0,a=n.length;o<a;++o){const a=n[o];s=Bt(t,e,a[0],i),r.push((s[0]+s[2])/2,(s[1]+s[3])/2),e=a[a.length-1]}return r}class ur extends $n{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const i=t,r=[],s=[];for(let t=0,e=i.length;t<e;++t){const e=i[t],n=r.length,o=e.getEnds();for(let t=0,i=o.length;t<i;++t)o[t]+=n;w(r,e.getFlatCoordinates()),s.push(o)}e=0===i.length?this.getLayout():i[0].getLayout(),t=r,n=s}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;w(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();const n=new ur(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<mt(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(li(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),hi(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return Mi(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return xi(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),er(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,wi(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=cr(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=$i(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new Ki(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Ji(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=er(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=mi(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new ur(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let r=0,s=n.length;r<s;++r)n[r]-=e;return new rr(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s].slice(),a=o[o.length-1];if(0!==r)for(let t=0,e=o.length;t<e;++t)o[t]-=r;const l=new rr(e.slice(r,a),t,o);i.push(l),r=a}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return Di(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Jn(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var hr=ur;const Ar=Y();class dr{constructor(t,e,n,i,r,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=r,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?Ct(this.flatCoordinates_):Bt(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=Gt(this.getExtent());this.flatInteriorPoints_=qi(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=nr(this.flatCoordinates_,this.ends_),e=cr(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=$i(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Bi(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let i=0,r=n.length;i<r;++i){const r=n[i],s=Bi(t,e,r,2,.5);w(this.flatMidpoints_,s),e=r}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=gn(t);const e=t.getExtent(),n=t.getWorldExtent();if(e&&n){const t=zt(n)/zt(e);at(Ar,n[0],n[3],t,-t,0,0,0),Dn(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Ar,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new dr(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=S(((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=Ai(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=di(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i);break;case"Polygon":i=[],n.length=gi(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i);break;default:}return i&&(this.simplifiedGeometry_=new dr(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_})),this}}dr.prototype.getFlatCoordinates=dr.prototype.getOrientedFlatCoordinates;var fr=dr;class pr{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=$,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?gn(e.dataProjection):this.readProjection(t);e.extent&&n&&"tile-pixels"===n.getUnits()&&(n=gn(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return U()}readFeature(t,e){return U()}readFeatures(t,e){return U()}readGeometry(t,e){return U()}readProjection(t){return U()}writeFeature(t,e){return U()}writeFeatures(t,e){return U()}writeGeometry(t,e){return U()}}var gr=pr;function mr(t,e,n){const i=n?gn(n.featureProjection):null,r=n?gn(n.dataProjection):null;let s=t;if(i&&r&&!xn(i,r)){e&&(s=t.clone());const n=e?i:r,o=e?r:i;"tile-pixels"===n.getUnits()?s.transform(n,o):s.applyTransform(Cn(n,o))}if(e&&n&&void 0!==n.decimals){const e=Math.pow(10,n.decimals),i=function(t){for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e)/e;return t};s===t&&(s=t.clone()),s.applyTransform(i)}return s}function vr(t,e){const n=e?gn(e.featureProjection):null,i=e?gn(e.dataProjection):null;return n&&i&&!xn(n,i)?Bn(t,i,n):t}const yr={Point:Wi,LineString:Gi,Polygon:rr,MultiPoint:Ki,MultiLineString:Vi,MultiPolygon:hr};function wr(t,e,n){return Array.isArray(e[0])?(Ji(t,0,e,n)||(t=t.slice(),er(t,0,e,n)),t):(Zi(t,0,e,n)||(t=t.slice(),tr(t,0,e,n)),t)}function _r(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map((e=>_r({...t,geometry:e}))).flat();const i="MultiPolygon"===n.type?"Polygon":n.type;if("GeometryCollection"===i||"Circle"===i)throw new Error("Unsupported geometry type: "+i);const r=n.layout.length;return mr(new fr(i,"Polygon"===i?wr(n.flatCoordinates,n.ends,r):n.flatCoordinates,n.ends?.flat(),r,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function br(t,e){if(!t)return null;if(Array.isArray(t)){const n=t.map((t=>br(t,e)));return new ri(n)}const n=yr[t.type];return mr(new n(t.flatCoordinates,t.layout,t.ends),!1,e)}class xr extends gr{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(Er(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(Er(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return U()}readFeaturesFromObject(t,e){return U()}readGeometry(t,e){return this.readGeometryFromObject(Er(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return U()}readProjection(t){return this.readProjectionFromObject(Er(t))}readProjectionFromObject(t){return U()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return U()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return U()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return U()}}function Er(t){if("string"===typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}var Cr=xr;const Sr={Point:Lr,LineString:Rr,Polygon:kr,MultiPoint:Nr,MultiLineString:Mr,MultiPolygon:Or},Br={Point:Dr,LineString:Qr,Polygon:Gr,MultiPoint:Vr,MultiLineString:Hr,MultiPolygon:jr};class Tr extends Cr{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,e,n){const i=t,r=Ir(i.geometry,e),s=new $;if(this.geometryName_&&s.setGeometryName(this.geometryName_),s.setGeometry(r),i.attributes){s.setProperties(i.attributes,!0);const t=i.attributes[n];void 0!==t&&s.setId(t)}return s}readFeaturesFromObject(t,e){if(e=e||{},t["features"]){const n=t,i=[],r=n.features;for(let s=0,o=r.length;s<o;++s)i.push(this.readFeatureFromObject(r[s],e,t.objectIdFieldName));return i}return[this.readFeatureFromObject(t,e)]}readGeometryFromObject(t,e){return Ir(t,e)}readProjectionFromObject(t){if(t["spatialReference"]&&void 0!==t["spatialReference"]["wkid"]){const e=t["spatialReference"],n=e.wkid;return gn("EPSG:"+n)}return null}writeGeometryObject(t,e){return Wr(t,this.adaptOptions(e))}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={};if(!t.hasProperties())return n["attributes"]={},n;const i=t.getProperties(),r=t.getGeometry();if(r){n["geometry"]=Wr(r,e);const s=e&&(e.dataProjection||e.featureProjection);s&&(n["geometry"]["spatialReference"]={wkid:Number(gn(s).getCode().split(":").pop())}),delete i[t.getGeometryName()]}return I(i)?n["attributes"]={}:n["attributes"]=i,n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{features:n}}}function Ir(t,e){if(!t)return null;let n;if("number"===typeof t["x"]&&"number"===typeof t["y"])n="Point";else if(t["points"])n="MultiPoint";else if(t["paths"]){const e=t;n=1===e.paths.length?"LineString":"MultiLineString"}else if(t["rings"]){const e=t,i=Pr(e),r=Fr(e.rings,i);1===r.length?(n="Polygon",t=Object.assign({},t,{["rings"]:r[0]})):(n="MultiPolygon",t=Object.assign({},t,{["rings"]:r}))}const i=Sr[n];return mr(i(t),!1,e)}function Fr(t,e){const n=[],i=[],r=[];let s,o;for(s=0,o=t.length;s<o;++s){n.length=0,Yn(n,0,t[s],e.length);const o=Yi(n,0,n.length,e.length);o?i.push([t[s]]):r.push(t[s])}while(r.length){const t=r.shift();let e=!1;for(s=i.length-1;s>=0;s--){const n=i[s][0],r=yt(new Ci(n).getExtent(),new Ci(t).getExtent());if(r){i[s].push(t),e=!0;break}}e||i.push([t.reverse()])}return i}function Lr(t){let e;return e=void 0!==t.m&&void 0!==t.z?new Wi([t.x,t.y,t.z,t.m],"XYZM"):void 0!==t.z?new Wi([t.x,t.y,t.z],"XYZ"):void 0!==t.m?new Wi([t.x,t.y,t.m],"XYM"):new Wi([t.x,t.y]),e}function Rr(t){const e=Pr(t);return new Gi(t.paths[0],e)}function Mr(t){const e=Pr(t);return new Vi(t.paths,e)}function Pr(t){let e="XY";return!0===t.hasZ&&!0===t.hasM?e="XYZM":!0===t.hasZ?e="XYZ":!0===t.hasM&&(e="XYM"),e}function Nr(t){const e=Pr(t);return new Ki(t.points,e)}function Or(t){const e=Pr(t);return new hr(t.rings,e)}function kr(t){const e=Pr(t);return new rr(t.rings,e)}function Dr(t,e){const n=t.getCoordinates();let i;const r=t.getLayout();if("XYZ"===r)i={x:n[0],y:n[1],z:n[2]};else if("XYM"===r)i={x:n[0],y:n[1],m:n[2]};else if("XYZM"===r)i={x:n[0],y:n[1],z:n[2],m:n[3]};else{if("XY"!==r)throw new Error("Invalid geometry layout");i={x:n[0],y:n[1]}}return i}function Ur(t){const e=t.getLayout();return{hasZ:"XYZ"===e||"XYZM"===e,hasM:"XYM"===e||"XYZM"===e}}function Qr(t,e){const n=Ur(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:[t.getCoordinates()]}}function Gr(t,e){const n=Ur(t);return{hasZ:n.hasZ,hasM:n.hasM,rings:t.getCoordinates(!1)}}function Hr(t,e){const n=Ur(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:t.getCoordinates()}}function Vr(t,e){const n=Ur(t);return{hasZ:n.hasZ,hasM:n.hasM,points:t.getCoordinates()}}function jr(t,e){const n=Ur(t),i=t.getCoordinates(!1),r=[];for(let s=0;s<i.length;s++)for(let t=i[s].length-1;t>=0;t--)r.push(i[s][t]);return{hasZ:n.hasZ,hasM:n.hasM,rings:r}}function Wr(t,e){const n=Br[t.getType()];return n(mr(t,!0,e),e)}var zr=Tr;class Kr extends Cr{constructor(t){t=t||{},super(),this.dataProjection=gn(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=gn(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;n="Feature"===t["type"]?t:{type:"Feature",geometry:t,properties:null};const i=qr(n["geometry"],e);if(this.featureClass===fr)return _r({geometry:i,id:n["id"],properties:n["properties"]},e);const r=new $;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&n["geometry_name"]&&r.setGeometryName(n["geometry_name"]),r.setGeometry(br(i,e)),"id"in n&&r.setId(n["id"]),n["properties"]&&r.setProperties(n["properties"],!0),r}readFeaturesFromObject(t,e){const n=t;let i=null;if("FeatureCollection"===n["type"]){const n=t;i=[];const r=n["features"];for(let t=0,s=r.length;t<s;++t){const n=this.readFeatureFromObject(r[t],e);n&&i.push(n)}}else i=[this.readFeatureFromObject(t,e)];return i.flat()}readGeometryFromObject(t,e){return $r(t,e)}readProjectionFromObject(t){const e=t["crs"];let n;if(e)if("name"==e["type"])n=gn(e["properties"]["name"]);else{if("EPSG"!==e["type"])throw new Error("Unknown SRS type");n=gn("EPSG:"+e["properties"]["code"])}else n=this.dataProjection;return n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(n.id=i),!t.hasProperties())return n;const r=t.getProperties(),s=t.getGeometry();return s&&(n.geometry=is(s,e),delete r[t.getGeometryName()]),I(r)||(n.properties=r),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return is(t,this.adaptOptions(e))}}function qr(t,e){if(!t)return null;let n;switch(t["type"]){case"Point":n=Yr(t);break;case"LineString":n=Zr(t);break;case"Polygon":n=ns(t);break;case"MultiPoint":n=ts(t);break;case"MultiLineString":n=Jr(t);break;case"MultiPolygon":n=es(t);break;case"GeometryCollection":n=Xr(t);break;default:throw new Error("Unsupported GeoJSON type: "+t["type"])}return n}function $r(t,e){const n=qr(t,e);return br(n,e)}function Xr(t,e){const n=t["geometries"].map((function(t){return qr(t,e)}));return n}function Yr(t){const e=t["coordinates"];return{type:"Point",flatCoordinates:e,layout:zn(e.length)}}function Zr(t){const e=t["coordinates"],n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:zn(e[0]?.length||2)}}function Jr(t){const e=t["coordinates"],n=e[0]?.[0]?.length||2,i=[],r=Zn(i,0,e,n);return{type:"MultiLineString",flatCoordinates:i,ends:r,layout:zn(n)}}function ts(t){const e=t["coordinates"];return{type:"MultiPoint",flatCoordinates:e.flat(),layout:zn(e[0]?.length||2)}}function es(t){const e=t["coordinates"],n=[],i=e[0]?.[0]?.[0].length||2,r=Jn(n,0,e,i);return{type:"MultiPolygon",flatCoordinates:n,ends:r,layout:zn(i)}}function ns(t){const e=t["coordinates"],n=[],i=e[0]?.[0]?.length,r=Zn(n,0,e,i);return{type:"Polygon",flatCoordinates:n,ends:r,layout:zn(i)}}function is(t,e){t=mr(t,!0,e);const n=t.getType();let i;switch(n){case"Point":i=cs(t,e);break;case"LineString":i=ss(t,e);break;case"Polygon":i=us(t,e);break;case"MultiPoint":i=as(t,e);break;case"MultiLineString":i=os(t,e);break;case"MultiPolygon":i=ls(t,e);break;case"GeometryCollection":i=rs(t,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}function rs(t,e){e=Object.assign({},e),delete e.featureProjection;const n=t.getGeometriesArray().map((function(t){return is(t,e)}));return{type:"GeometryCollection",geometries:n}}function ss(t,e){return{type:"LineString",coordinates:t.getCoordinates()}}function os(t,e){return{type:"MultiLineString",coordinates:t.getCoordinates()}}function as(t,e){return{type:"MultiPoint",coordinates:t.getCoordinates()}}function ls(t,e){let n;return e&&(n=e.rightHanded),{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}function cs(t,e){return{type:"Point",coordinates:t.getCoordinates()}}function us(t,e){let n;return e&&(n=e.rightHanded),{type:"Polygon",coordinates:t.getCoordinates(n)}}var hs=Kr;const As="http://www.w3.org/2001/XMLSchema-instance";function ds(t,e){return ks().createElementNS(t,e)}function fs(t,e){return ps(t,e,[]).join("")}function ps(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else{let i;for(i=t.firstChild;i;i=i.nextSibling)ps(i,e,n)}return n}function gs(t){return"documentElement"in t}function ms(t,e,n){return t.getAttributeNS(e,n)||""}function vs(t){return(new DOMParser).parseFromString(t,"application/xml")}function ys(t,e){return function(n,i){const r=t.call(void 0!==e?e:this,n,i);if(void 0!==r){const t=i[i.length-1];w(t,r)}}}function ws(t,e){return function(n,i){const r=t.call(void 0!==e?e:this,n,i);if(void 0!==r){const t=i[i.length-1];t.push(r)}}}function _s(t,e){return function(n,i){const r=t.call(void 0!==e?e:this,n,i);void 0!==r&&(i[i.length-1]=r)}}function bs(t,e,n){return function(i,r){const s=t.call(void 0!==n?n:this,i,r);if(void 0!==s){const t=r[r.length-1],n=void 0!==e?e:i.localName;let o;n in t?o=t[n]:(o=[],t[n]=o),o.push(s)}}}function xs(t,e,n){return function(i,r){const s=t.call(void 0!==n?n:this,i,r);if(void 0!==s){const t=r[r.length-1],n=void 0!==e?e:i.localName;t[n]=s}}}function Es(t,e){return function(n,i,r){t.call(void 0!==e?e:this,n,i,r);const s=r[r.length-1],o=s.node;o.appendChild(n)}}function Cs(t,e){let n,i;return function(e,r,s){if(void 0===n){n={};const r={};r[e.localName]=t,n[e.namespaceURI]=r,i=Ss(e.localName)}Rs(n,i,r,s)}}function Ss(t,e){return function(n,i,r){const s=i[i.length-1],o=s.node;let a=t;void 0===a&&(a=r);const l=void 0!==e?e:o.namespaceURI;return ds(l,a)}}const Bs=Ss();function Ts(t,e){const n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=t[e[r]];return i}function Is(t,e,n){let i,r;for(n=void 0!==n?n:{},i=0,r=t.length;i<r;++i)n[t[i]]=e;return n}function Fs(t,e,n,i){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const e=t[r.namespaceURI];if(void 0!==e){const t=e[r.localName];void 0!==t&&t.call(i,r,n)}}}function Ls(t,e,n,i,r){return i.push(t),Fs(e,n,i,r),i.pop()}function Rs(t,e,n,i,r,s){const o=(void 0!==r?r:n).length;let a,l;for(let c=0;c<o;++c)a=n[c],void 0!==a&&(l=e.call(void 0!==s?s:this,a,i,void 0!==r?r[c]:void 0),void 0!==l&&t[l.namespaceURI][l.localName].call(s,l,a,i))}function Ms(t,e,n,i,r,s,o){return r.push(t),Rs(e,n,i,r,s,o),r.pop()}let Ps,Ns;function Os(){return void 0===Ps&&"undefined"!==typeof XMLSerializer&&(Ps=new XMLSerializer),Ps}function ks(){return void 0===Ns&&"undefined"!==typeof document&&(Ns=document.implementation.createDocument("","",null)),Ns}class Ds extends gr{constructor(){super(),this.xmlSerializer_=Os()}getType(){return"xml"}readFeature(t,e){if(!t)return null;if("string"===typeof t){const n=vs(t);return this.readFeatureFromDocument(n,e)}return gs(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const n=this.readFeaturesFromDocument(t,e);return n.length>0?n[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if("string"===typeof t){const n=vs(t);return this.readFeaturesFromDocument(n,e)}return gs(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const n=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&w(n,this.readFeaturesFromNode(i,e));return n}readFeaturesFromNode(t,e){return U()}readGeometry(t,e){if(!t)return null;if("string"===typeof t){const n=vs(t);return this.readGeometryFromDocument(n,e)}return gs(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if("string"===typeof t){const e=vs(t);return this.readProjectionFromDocument(e)}return gs(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const n=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const n=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const n=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(t,e){return null}}var Us=Ds;const Qs="http://www.opengis.net/gml",Gs=/^\s*$/;class Hs extends Us{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:ws(this.readFeaturesInternal),featureMembers:_s(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,e){const n=t.localName;let i=null;if("FeatureCollection"==n)i=Ls([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==n||"featureMember"==n||"member"==n){const r=e[0];let s=r["featureType"],o=r["featureNS"];const a="p",l="p0";if(!s&&t.childNodes){s=[],o={};for(let e=0,n=t.childNodes.length;e<n;++e){const n=t.childNodes[e];if(1===n.nodeType){const t=n.nodeName.split(":").pop();if(!s.includes(t)){let e="",i=0;const r=n.namespaceURI;for(const t in o){if(o[t]===r){e=t;break}++i}e||(e=a+i,o[e]=r),s.push(e+":"+t)}}}"featureMember"!=n&&(r["featureType"]=s,r["featureNS"]=o)}if("string"===typeof o){const t=o;o={},o[l]=t}const c={},u=Array.isArray(s)?s:[s];for(const t in o){const e={};for(let i=0,r=u.length;i<r;++i){const r=u[i].includes(":")?u[i].split(":")[0]:l;r===t&&(e[u[i].split(":").pop()]="featureMembers"==n?ws(this.readFeatureElement,this):_s(this.readFeatureElement,this))}c[o[t]]=e}i=Ls("featureMember"==n||"member"==n?void 0:[],c,t,e)}return null===i&&(i=[]),i}readGeometryOrExtent(t,e){const n=e[0];return n["srsName"]=t.firstElementChild.getAttribute("srsName"),n["srsDimension"]=t.firstElementChild.getAttribute("srsDimension"),Ls(null,this.GEOMETRY_PARSERS,t,e,this)}readExtentElement(t,e){const n=e[0],i=this.readGeometryOrExtent(t,e);return i?vr(i,n):void 0}readGeometryElement(t,e){const n=e[0],i=this.readGeometryOrExtent(t,e);return i?mr(i,!1,n):void 0}readFeatureElementInternal(t,e,n){let i;const r={};for(let a=t.firstElementChild;a;a=a.nextElementSibling){let t;const s=a.localName;0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)?(t=fs(a,!1),Gs.test(t)&&(t=void 0)):(n&&(t="boundedBy"===s?this.readExtentElement(a,e):this.readGeometryElement(a,e)),t?"boundedBy"!==s&&(i=s):t=this.readFeatureElementInternal(a,e,!1));const o=a.attributes.length;if(o>0&&!(t instanceof jn)){t={_content_:t};for(let e=0;e<o;e++){const n=a.attributes[e].name;t[n]=a.attributes[e].value}}r[s]?(r[s]instanceof Array||(r[s]=[r[s]]),r[s].push(t)):r[s]=t}if(!n)return r;const s=new $(r);i&&s.setGeometryName(i);const o=t.getAttribute("fid")||ms(t,this.namespace,"id");return o&&s.setId(o),s}readFeatureElement(t,e){return this.readFeatureElementInternal(t,e,!0)}readPoint(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new Wi(n,"XYZ")}readMultiPoint(t,e){const n=Ls([],this.MULTIPOINT_PARSERS,t,e,this);if(n)return new Ki(n)}readMultiLineString(t,e){const n=Ls([],this.MULTILINESTRING_PARSERS,t,e,this);if(n)return new Vi(n)}readMultiPolygon(t,e){const n=Ls([],this.MULTIPOLYGON_PARSERS,t,e,this);if(n)return new hr(n)}pointMemberParser(t,e){Fs(this.POINTMEMBER_PARSERS,t,e,this)}lineStringMemberParser(t,e){Fs(this.LINESTRINGMEMBER_PARSERS,t,e,this)}polygonMemberParser(t,e){Fs(this.POLYGONMEMBER_PARSERS,t,e,this)}readLineString(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n){const t=new Gi(n,"XYZ");return t}}readFlatLinearRing(t,e){const n=Ls(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);if(n)return n}readLinearRing(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new Ci(n,"XYZ")}readPolygon(t,e){const n=Ls([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(n&&n[0]){const t=n[0],e=[t.length];let i,r;for(i=1,r=n.length;i<r;++i)w(t,n[i]),e.push(t.length);return new rr(t,"XYZ",e)}}readFlatCoordinatesFromNode(t,e){return Ls(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}readGeometryFromNode(t,e){const n=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return n||null}readFeaturesFromNode(t,e){const n={featureType:this.featureType,featureNS:this.featureNS};n&&Object.assign(n,this.getReadOptions(t,e));const i=this.readFeaturesInternal(t,[n]);return i||[]}readProjectionFromNode(t){return gn(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}Hs.prototype.namespace=Qs,Hs.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},Hs.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},Hs.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},Hs.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:ws(Hs.prototype.pointMemberParser),pointMembers:ws(Hs.prototype.pointMemberParser)}},Hs.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:ws(Hs.prototype.lineStringMemberParser),lineStringMembers:ws(Hs.prototype.lineStringMemberParser)}},Hs.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:ws(Hs.prototype.polygonMemberParser),polygonMembers:ws(Hs.prototype.polygonMemberParser)}},Hs.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:ws(Hs.prototype.readFlatCoordinatesFromNode)}},Hs.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ws(Hs.prototype.readLineString)}},Hs.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ws(Hs.prototype.readPolygon)}},Hs.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:_s(Hs.prototype.readFlatLinearRing)}};var Vs=Hs;function js(t,e,n){const i=void 0!==n?t.toFixed(n):""+t;let r=i.indexOf(".");return r=-1===r?i.length:r,r>e?i:new Array(1+e-r).join("0")+i}function Ws(t,e){const n=(""+t).split("."),i=(""+e).split(".");for(let r=0;r<Math.max(n.length,i.length);r++){const t=parseInt(n[r]||"0",10),e=parseInt(i[r]||"0",10);if(t>e)return 1;if(e>t)return-1}return 0}function zs(t){const e=fs(t,!1);return Ks(e)}function Ks(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return void 0!==e[1]||!1}function qs(t){const e=fs(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function $s(t){const e=fs(t,!1);return Xs(e)}function Xs(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function Ys(t){const e=fs(t,!1);return Zs(e)}function Zs(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function Js(t){return fs(t,!1).trim()}function to(t,e){so(t,e?"1":"0")}function eo(t,e){t.appendChild(ks().createCDATASection(e))}function no(t,e){const n=new Date(1e3*e),i=n.getUTCFullYear()+"-"+js(n.getUTCMonth()+1,2)+"-"+js(n.getUTCDate(),2)+"T"+js(n.getUTCHours(),2)+":"+js(n.getUTCMinutes(),2)+":"+js(n.getUTCSeconds(),2)+"Z";t.appendChild(ks().createTextNode(i))}function io(t,e){const n=e.toPrecision();t.appendChild(ks().createTextNode(n))}function ro(t,e){const n=e.toString();t.appendChild(ks().createTextNode(n))}function so(t,e){t.appendChild(ks().createTextNode(e))}const oo=Qs+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",ao={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class lo extends Vs{constructor(t){t=t||{},super(t),this.FEATURE_COLLECTION_PARSERS[Qs]["featureMember"]=ws(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:oo}readFlatCoordinates(t,e){const n=fs(t,!1).replace(/^\s*|\s*$/g,""),i=e[0],r=i["srsName"];let s="enu";if(r){const t=gn(r);t&&(s=t.getAxisOrientation())}const o=n.trim().split(/\s+/),a=[];for(let l=0,c=o.length;l<c;l++){const t=o[l].split(/,+/),e=parseFloat(t[0]),n=parseFloat(t[1]),i=3===t.length?parseFloat(t[2]):0;"en"===s.substr(0,2)?a.push(e,n,i):a.push(n,e,i)}return a}readBox(t,e){const n=Ls([null],this.BOX_PARSERS_,t,e,this);return xt(n[1][0],n[1][1],n[1][3],n[1][4])}innerBoundaryIsParser(t,e){const n=Ls(void 0,this.RING_PARSERS,t,e,this);if(n){const t=e[e.length-1];t.push(n)}}outerBoundaryIsParser(t,e){const n=Ls(void 0,this.RING_PARSERS,t,e,this);if(n){const t=e[e.length-1];t[0]=n}}GEOMETRY_NODE_FACTORY_(t,e,n){const i=e[e.length-1],r=i["multiSurface"],s=i["surface"],o=i["multiCurve"];return Array.isArray(t)?n="Envelope":(n=t.getType(),"MultiPolygon"===n&&!0===r?n="MultiSurface":"Polygon"===n&&!0===s?n="Surface":"MultiLineString"===n&&!0===o&&(n="MultiCurve")),ds("http://www.opengis.net/gml",n)}writeFeatureElement(t,e,n){const i=e.getId();i&&t.setAttribute("fid",i);const r=n[n.length-1],s=r["featureNS"],o=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[s]={});const a=[],l=[];if(e.hasProperties()){const t=e.getProperties();for(const e in t){const n=t[e];null!==n&&(a.push(e),l.push(n),e==o||"function"===typeof n.getSimplifiedGeometry?e in r.serializers[s]||(r.serializers[s][e]=Es(this.writeGeometryElement,this)):e in r.serializers[s]||(r.serializers[s][e]=Es(so)))}}const c=Object.assign({},r);c.node=t,Ms(c,r.serializers,Ss(void 0,s),l,n,a)}writeCurveOrLineString(t,e,n){const i=n[n.length-1],r=i["srsName"];if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,n)}else if("Curve"===t.nodeName){const i=ds(t.namespaceURI,"segments");t.appendChild(i),this.writeCurveSegments_(i,e,n)}}writeLineStringOrCurveMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeCurveOrLineString(i,e,n))}writeMultiCurveOrLineString(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"],o=i["curve"];s&&t.setAttribute("srsName",s);const a=e.getLineStrings();Ms({node:t,hasZ:r,srsName:s,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,n,void 0,this)}writeGeometryElement(t,e,n){const i=n[n.length-1],r=Object.assign({},i);let s;r["node"]=t,s=Array.isArray(e)?vr(e,i):mr(e,!0,i),Ms(r,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],n,void 0,this)}createCoordinatesNode_(t){const e=ds(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}writeCoordinates_(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"],o=e.getCoordinates(),a=o.length,l=new Array(a);for(let c=0;c<a;++c){const t=o[c];l[c]=this.getCoords_(t,s,r)}so(t,l.join(" "))}writeCurveSegments_(t,e,n){const i=ds(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,e,n)}writeSurfaceOrPolygon(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"];if("PolygonPatch"!==t.nodeName&&s&&t.setAttribute("srsName",s),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const i=e.getLinearRings();Ms({node:t,hasZ:r,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,i,n,void 0,this)}else if("Surface"===t.nodeName){const i=ds(t.namespaceURI,"patches");t.appendChild(i),this.writeSurfacePatches_(i,e,n)}}RING_NODE_FACTORY_(t,e,n){const i=e[e.length-1],r=i.node,s=i["exteriorWritten"];return void 0===s&&(i["exteriorWritten"]=!0),ds(r.namespaceURI,void 0!==s?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,e,n){const i=ds(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n)}writeRing(t,e,n){const i=ds(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,e,n)}getCoords_(t,e,n){let i="enu";e&&(i=gn(e).getAxisOrientation());let r="en"===i.substr(0,2)?t[0]+","+t[1]:t[1]+","+t[0];if(n){const e=t[2]||0;r+=","+e}return r}writePoint(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"];s&&t.setAttribute("srsName",s);const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o);const a=e.getCoordinates(),l=this.getCoords_(a,s,r);so(o,l)}writeMultiPoint(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"];s&&t.setAttribute("srsName",s);const o=e.getPoints();Ms({node:t,hasZ:r,srsName:s},this.POINTMEMBER_SERIALIZERS,Ss("pointMember"),o,n,void 0,this)}writePointMember(t,e,n){const i=ds(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,e,n)}writeLinearRing(t,e,n){const i=n[n.length-1],r=i["srsName"];r&&t.setAttribute("srsName",r);const s=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(s),this.writeCoordinates_(s,e,n)}writeMultiSurfaceOrPolygon(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"],o=i["surface"];s&&t.setAttribute("srsName",s);const a=e.getPolygons();Ms({node:t,hasZ:r,srsName:s,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,n,void 0,this)}writeSurfaceOrPolygonMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n))}writeEnvelope(t,e,n){const i=n[n.length-1],r=i["srsName"];r&&t.setAttribute("srsName",r);const s=["lowerCorner","upperCorner"],o=[e[0]+" "+e[1],e[2]+" "+e[3]];Ms({node:t},this.ENVELOPE_SERIALIZERS,Bs,o,n,s,this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,n){const i=e[e.length-1].node;return ds("http://www.opengis.net/gml",ao[i.nodeName])}}lo.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:_s(lo.prototype.readFlatCoordinates)}},lo.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:lo.prototype.innerBoundaryIsParser,outerBoundaryIs:lo.prototype.outerBoundaryIsParser}},lo.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:ws(lo.prototype.readFlatCoordinates)}},lo.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:_s(Vs.prototype.readPoint),MultiPoint:_s(Vs.prototype.readMultiPoint),LineString:_s(Vs.prototype.readLineString),MultiLineString:_s(Vs.prototype.readMultiLineString),LinearRing:_s(Vs.prototype.readLinearRing),Polygon:_s(Vs.prototype.readPolygon),MultiPolygon:_s(Vs.prototype.readMultiPolygon),Box:_s(lo.prototype.readBox)}},lo.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Es(lo.prototype.writeCurveOrLineString),MultiCurve:Es(lo.prototype.writeMultiCurveOrLineString),Point:Es(lo.prototype.writePoint),MultiPoint:Es(lo.prototype.writeMultiPoint),LineString:Es(lo.prototype.writeCurveOrLineString),MultiLineString:Es(lo.prototype.writeMultiCurveOrLineString),LinearRing:Es(lo.prototype.writeLinearRing),Polygon:Es(lo.prototype.writeSurfaceOrPolygon),MultiPolygon:Es(lo.prototype.writeMultiSurfaceOrPolygon),Surface:Es(lo.prototype.writeSurfaceOrPolygon),MultiSurface:Es(lo.prototype.writeMultiSurfaceOrPolygon),Envelope:Es(lo.prototype.writeEnvelope)}},lo.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Es(lo.prototype.writeLineStringOrCurveMember),curveMember:Es(lo.prototype.writeLineStringOrCurveMember)}},lo.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:Es(lo.prototype.writeRing),innerBoundaryIs:Es(lo.prototype.writeRing)}},lo.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Es(lo.prototype.writePointMember)}},lo.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Es(lo.prototype.writeSurfaceOrPolygonMember),polygonMember:Es(lo.prototype.writeSurfaceOrPolygonMember)}},lo.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Es(so),upperCorner:Es(so)}};var co=lo;const uo=Qs+" http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd",ho={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class Ao extends Vs{constructor(t){t=t||{},super(t),this.surface_=void 0!==t.surface&&t.surface,this.curve_=void 0!==t.curve&&t.curve,this.multiCurve_=void 0===t.multiCurve||t.multiCurve,this.multiSurface_=void 0===t.multiSurface||t.multiSurface,this.schemaLocation=t.schemaLocation?t.schemaLocation:uo,this.hasZ=void 0!==t.hasZ&&t.hasZ}readMultiCurve(t,e){const n=Ls([],this.MULTICURVE_PARSERS,t,e,this);if(n){const t=new Vi(n);return t}}readFlatCurveRing(t,e){const n=Ls([],this.MULTICURVE_PARSERS,t,e,this),i=[];for(let r=0,s=n.length;r<s;++r)w(i,n[r].getFlatCoordinates());return i}readMultiSurface(t,e){const n=Ls([],this.MULTISURFACE_PARSERS,t,e,this);if(n)return new hr(n)}curveMemberParser(t,e){Fs(this.CURVEMEMBER_PARSERS,t,e,this)}surfaceMemberParser(t,e){Fs(this.SURFACEMEMBER_PARSERS,t,e,this)}readPatch(t,e){return Ls([null],this.PATCHES_PARSERS,t,e,this)}readSegment(t,e){return Ls([],this.SEGMENTS_PARSERS,t,e,this)}readPolygonPatch(t,e){return Ls([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this)}readLineStringSegment(t,e){return Ls([null],this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}interiorParser(t,e){const n=Ls(void 0,this.RING_PARSERS,t,e,this);if(n){const t=e[e.length-1];t.push(n)}}exteriorParser(t,e){const n=Ls(void 0,this.RING_PARSERS,t,e,this);if(n){const t=e[e.length-1];t[0]=n}}readSurface(t,e){const n=Ls([null],this.SURFACE_PARSERS,t,e,this);if(n&&n[0]){const t=n[0],e=[t.length];let i,r;for(i=1,r=n.length;i<r;++i)w(t,n[i]),e.push(t.length);return new rr(t,"XYZ",e)}}readCurve(t,e){const n=Ls([null],this.CURVE_PARSERS,t,e,this);if(n){const t=new Gi(n,"XYZ");return t}}readEnvelope(t,e){const n=Ls([null],this.ENVELOPE_PARSERS,t,e,this);return xt(n[1][0],n[1][1],n[2][0],n[2][1])}readFlatPos(t,e){let n=fs(t,!1);const i=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/,r=[];let s;while(s=i.exec(n))r.push(parseFloat(s[1])),n=n.substr(s[0].length);if(""!==n)return;const o=e[0],a=o["srsName"];let l="enu";if(a){const t=gn(a);l=t.getAxisOrientation()}if("neu"===l){let t,e;for(t=0,e=r.length;t<e;t+=3){const e=r[t],n=r[t+1];r[t]=n,r[t+1]=e}}const c=r.length;return 2==c&&r.push(0),0!==c?r:void 0}readFlatPosList(t,e){const n=fs(t,!1).replace(/^\s*|\s*$/g,""),i=e[0],r=i["srsName"],s=i["srsDimension"];let o="enu";if(r){const t=gn(r);o=t.getAxisOrientation()}const a=n.split(/\s+/);let l,c,u,h=2;t.getAttribute("srsDimension")?h=Zs(t.getAttribute("srsDimension")):t.getAttribute("dimension")?h=Zs(t.getAttribute("dimension")):t.parentNode.getAttribute("srsDimension")?h=Zs(t.parentNode.getAttribute("srsDimension")):s&&(h=Zs(s));const A=[];for(let d=0,f=a.length;d<f;d+=h)l=parseFloat(a[d]),c=parseFloat(a[d+1]),u=3===h?parseFloat(a[d+2]):0,"en"===o.substr(0,2)?A.push(l,c,u):A.push(c,l,u);return A}writePos_(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=r?"3":"2";t.setAttribute("srsDimension",s);const o=i["srsName"];let a="enu";o&&(a=gn(o).getAxisOrientation());const l=e.getCoordinates();let c;if(c="en"===a.substr(0,2)?l[0]+" "+l[1]:l[1]+" "+l[0],r){const t=l[2]||0;c+=" "+t}so(t,c)}getCoords_(t,e,n){let i="enu";e&&(i=gn(e).getAxisOrientation());let r="en"===i.substr(0,2)?t[0]+" "+t[1]:t[1]+" "+t[0];if(n){const e=t[2]||0;r+=" "+e}return r}writePosList_(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=r?"3":"2";t.setAttribute("srsDimension",s);const o=i["srsName"],a=e.getCoordinates(),l=a.length,c=new Array(l);let u;for(let h=0;h<l;++h)u=a[h],c[h]=this.getCoords_(u,o,r);so(t,c.join(" "))}writePoint(t,e,n){const i=n[n.length-1],r=i["srsName"];r&&t.setAttribute("srsName",r);const s=ds(t.namespaceURI,"pos");t.appendChild(s),this.writePos_(s,e,n)}writeEnvelope(t,e,n){const i=n[n.length-1],r=i["srsName"];r&&t.setAttribute("srsName",r);const s=["lowerCorner","upperCorner"],o=[e[0]+" "+e[1],e[2]+" "+e[3]];Ms({node:t},this.ENVELOPE_SERIALIZERS,Bs,o,n,s,this)}writeLinearRing(t,e,n){const i=n[n.length-1],r=i["srsName"];r&&t.setAttribute("srsName",r);const s=ds(t.namespaceURI,"posList");t.appendChild(s),this.writePosList_(s,e,n)}RING_NODE_FACTORY_(t,e,n){const i=e[e.length-1],r=i.node,s=i["exteriorWritten"];return void 0===s&&(i["exteriorWritten"]=!0),ds(r.namespaceURI,void 0!==s?"interior":"exterior")}writeSurfaceOrPolygon(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"];if("PolygonPatch"!==t.nodeName&&s&&t.setAttribute("srsName",s),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const i=e.getLinearRings();Ms({node:t,hasZ:r,srsName:s},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,i,n,void 0,this)}else if("Surface"===t.nodeName){const i=ds(t.namespaceURI,"patches");t.appendChild(i),this.writeSurfacePatches_(i,e,n)}}writeCurveOrLineString(t,e,n){const i=n[n.length-1],r=i["srsName"];if("LineStringSegment"!==t.nodeName&&r&&t.setAttribute("srsName",r),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const i=ds(t.namespaceURI,"posList");t.appendChild(i),this.writePosList_(i,e,n)}else if("Curve"===t.nodeName){const i=ds(t.namespaceURI,"segments");t.appendChild(i),this.writeCurveSegments_(i,e,n)}}writeMultiSurfaceOrPolygon(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"],o=i["surface"];s&&t.setAttribute("srsName",s);const a=e.getPolygons();Ms({node:t,hasZ:r,srsName:s,surface:o},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,n,void 0,this)}writeMultiPoint(t,e,n){const i=n[n.length-1],r=i["srsName"],s=i["hasZ"];r&&t.setAttribute("srsName",r);const o=e.getPoints();Ms({node:t,hasZ:s,srsName:r},this.POINTMEMBER_SERIALIZERS,Ss("pointMember"),o,n,void 0,this)}writeMultiCurveOrLineString(t,e,n){const i=n[n.length-1],r=i["hasZ"],s=i["srsName"],o=i["curve"];s&&t.setAttribute("srsName",s);const a=e.getLineStrings();Ms({node:t,hasZ:r,srsName:s,curve:o},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,a,n,void 0,this)}writeRing(t,e,n){const i=ds(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,e,n)}writeSurfaceOrPolygonMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n))}writePointMember(t,e,n){const i=ds(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,e,n)}writeLineStringOrCurveMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeCurveOrLineString(i,e,n))}writeSurfacePatches_(t,e,n){const i=ds(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n)}writeCurveSegments_(t,e,n){const i=ds(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,e,n)}writeGeometryElement(t,e,n){const i=n[n.length-1],r=Object.assign({},i);let s;r["node"]=t,s=Array.isArray(e)?vr(e,i):mr(e,!0,i),Ms(r,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[s],n,void 0,this)}writeFeatureElement(t,e,n){const i=e.getId();i&&t.setAttribute("fid",i);const r=n[n.length-1],s=r["featureNS"],o=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[s]={});const a=[],l=[];if(e.hasProperties()){const t=e.getProperties();for(const e in t){const n=t[e];null!==n&&(a.push(e),l.push(n),e==o||"function"===typeof n.getSimplifiedGeometry?e in r.serializers[s]||(r.serializers[s][e]=Es(this.writeGeometryElement,this)):e in r.serializers[s]||(r.serializers[s][e]=Es(so)))}}const c=Object.assign({},r);c.node=t,Ms(c,r.serializers,Ss(void 0,s),l,n,a)}writeFeatureMembers_(t,e,n){const i=n[n.length-1],r=i["featureType"],s=i["featureNS"],o={};o[s]={},o[s][r]=Es(this.writeFeatureElement,this);const a=Object.assign({},i);a.node=t,Ms(a,o,Ss(r,s),e,n)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,n){const i=e[e.length-1].node;return ds(this.namespace,ho[i.nodeName])}GEOMETRY_NODE_FACTORY_(t,e,n){const i=e[e.length-1],r=i["multiSurface"],s=i["surface"],o=i["curve"],a=i["multiCurve"];return Array.isArray(t)?n="Envelope":(n=t.getType(),"MultiPolygon"===n&&!0===r?n="MultiSurface":"Polygon"===n&&!0===s?n="Surface":"LineString"===n&&!0===o?n="Curve":"MultiLineString"===n&&!0===a&&(n="MultiCurve")),ds(this.namespace,n)}writeGeometryNode(t,e){e=this.adaptOptions(e);const n=ds(this.namespace,"geom"),i={node:n,hasZ:this.hasZ,srsName:this.srsName,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_};return e&&Object.assign(i,e),this.writeGeometryElement(n,t,[i]),n}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=ds(this.namespace,"featureMembers");n.setAttributeNS(As,"xsi:schemaLocation",this.schemaLocation);const i={srsName:this.srsName,hasZ:this.hasZ,curve:this.curve_,surface:this.surface_,multiSurface:this.multiSurface_,multiCurve:this.multiCurve_,featureNS:this.featureNS,featureType:this.featureType};return e&&Object.assign(i,e),this.writeFeatureMembers_(n,t,[i]),n}}Ao.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{pos:_s(Ao.prototype.readFlatPos),posList:_s(Ao.prototype.readFlatPosList),coordinates:_s(co.prototype.readFlatCoordinates)}},Ao.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{interior:Ao.prototype.interiorParser,exterior:Ao.prototype.exteriorParser}},Ao.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:_s(Vs.prototype.readPoint),MultiPoint:_s(Vs.prototype.readMultiPoint),LineString:_s(Vs.prototype.readLineString),MultiLineString:_s(Vs.prototype.readMultiLineString),LinearRing:_s(Vs.prototype.readLinearRing),Polygon:_s(Vs.prototype.readPolygon),MultiPolygon:_s(Vs.prototype.readMultiPolygon),Surface:_s(Ao.prototype.readSurface),MultiSurface:_s(Ao.prototype.readMultiSurface),Curve:_s(Ao.prototype.readCurve),MultiCurve:_s(Ao.prototype.readMultiCurve),Envelope:_s(Ao.prototype.readEnvelope)}},Ao.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml":{curveMember:ws(Ao.prototype.curveMemberParser),curveMembers:ws(Ao.prototype.curveMemberParser)}},Ao.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml":{surfaceMember:ws(Ao.prototype.surfaceMemberParser),surfaceMembers:ws(Ao.prototype.surfaceMemberParser)}},Ao.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:ws(Vs.prototype.readLineString),Curve:ws(Ao.prototype.readCurve)}},Ao.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:ws(Vs.prototype.readPolygon),Surface:ws(Ao.prototype.readSurface)}},Ao.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml":{patches:_s(Ao.prototype.readPatch)}},Ao.prototype.CURVE_PARSERS={"http://www.opengis.net/gml":{segments:_s(Ao.prototype.readSegment)}},Ao.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml":{lowerCorner:ws(Ao.prototype.readFlatPosList),upperCorner:ws(Ao.prototype.readFlatPosList)}},Ao.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml":{PolygonPatch:_s(Ao.prototype.readPolygonPatch)}},Ao.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml":{LineStringSegment:ys(Ao.prototype.readLineStringSegment)}},Vs.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:_s(Vs.prototype.readFlatLinearRing),Ring:_s(Ao.prototype.readFlatCurveRing)}},Ao.prototype.writeFeatures,Ao.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{exterior:Es(Ao.prototype.writeRing),interior:Es(Ao.prototype.writeRing)}},Ao.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:Es(so),upperCorner:Es(so)}},Ao.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:Es(Ao.prototype.writeSurfaceOrPolygonMember),polygonMember:Es(Ao.prototype.writeSurfaceOrPolygonMember)}},Ao.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:Es(Ao.prototype.writePointMember)}},Ao.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:Es(Ao.prototype.writeLineStringOrCurveMember),curveMember:Es(Ao.prototype.writeLineStringOrCurveMember)}},Ao.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:Es(Ao.prototype.writeCurveOrLineString),MultiCurve:Es(Ao.prototype.writeMultiCurveOrLineString),Point:Es(Ao.prototype.writePoint),MultiPoint:Es(Ao.prototype.writeMultiPoint),LineString:Es(Ao.prototype.writeCurveOrLineString),MultiLineString:Es(Ao.prototype.writeMultiCurveOrLineString),LinearRing:Es(Ao.prototype.writeLinearRing),Polygon:Es(Ao.prototype.writeSurfaceOrPolygon),MultiPolygon:Es(Ao.prototype.writeMultiSurfaceOrPolygon),Surface:Es(Ao.prototype.writeSurfaceOrPolygon),MultiSurface:Es(Ao.prototype.writeMultiSurfaceOrPolygon),Envelope:Es(Ao.prototype.writeEnvelope)}};var fo=Ao;const po=fo;po.prototype.writeFeatures,po.prototype.writeFeaturesNode;var go=po;const mo=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],vo="http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd",yo={rte:ia,trk:ra,wpt:sa},wo=Is(mo,{rte:ws(ia),trk:ws(ra),wpt:ws(sa)}),_o=Is(mo,{text:xs(Js,"linkText"),type:xs(Js,"linkType")}),bo=Is(mo,{name:xs(Js),email:Yo,link:Zo}),xo=Is(mo,{name:xs(Js),desc:xs(Js),author:xs(qo),copyright:xs($o),link:Zo,time:xs(qs),keywords:xs(Js),bounds:Xo,extensions:Jo}),Eo=Is(mo,{year:xs(Ys),license:xs(Js)}),Co=Is(mo,{rte:Es(la),trk:Es(ca),wpt:Es(ha)});class So extends Us{constructor(t){super(),t=t||{},this.dataProjection=gn("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let e=0,n=t.length;e<n;++e){const n=t[e];if(this.readExtensions_){const t=n.get("extensionsNode_")||null;this.readExtensions_(n,t)}n.set("extensionsNode_",void 0)}}readMetadata(t){return t?"string"===typeof t?this.readMetadataFromDocument(vs(t)):gs(t)?this.readMetadataFromDocument(t):this.readMetadataFromNode(t):null}readMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType===Node.ELEMENT_NODE){const t=this.readMetadataFromNode(e);if(t)return t}return null}readMetadataFromNode(t){if(!mo.includes(t.namespaceURI))return null;for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(mo.includes(e.namespaceURI)&&"metadata"===e.localName)return Ls({},xo,e,[]);return null}readFeatureFromNode(t,e){if(!mo.includes(t.namespaceURI))return null;const n=yo[t.localName];if(!n)return null;const i=n(t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(t,e){if(!mo.includes(t.namespaceURI))return[];if("gpx"==t.localName){const n=Ls([],wo,t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_(n),n):[]}return[]}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=ds("http://www.topografix.com/GPX/1/1","gpx"),i="http://www.w3.org/2000/xmlns/";return n.setAttributeNS(i,"xmlns:xsi",As),n.setAttributeNS(As,"xsi:schemaLocation",vo),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),Ms({node:n},Co,Wo,t,[e]),n}}const Bo=Is(mo,{name:xs(Js),cmt:xs(Js),desc:xs(Js),src:xs(Js),link:Zo,number:xs(Ys),extensions:Jo,type:xs(Js),rtept:ta}),To=Is(mo,{ele:xs($s),time:xs(qs)}),Io=Is(mo,{name:xs(Js),cmt:xs(Js),desc:xs(Js),src:xs(Js),link:Zo,number:xs(Ys),type:xs(Js),extensions:Jo,trkseg:na}),Fo=Is(mo,{trkpt:ea}),Lo=Is(mo,{ele:xs($s),time:xs(qs)}),Ro=Is(mo,{ele:xs($s),time:xs(qs),magvar:xs($s),geoidheight:xs($s),name:xs(Js),cmt:xs(Js),desc:xs(Js),src:xs(Js),link:Zo,sym:xs(Js),type:xs(Js),fix:xs(Js),sat:xs(Ys),hdop:xs($s),vdop:xs($s),pdop:xs($s),ageofdgpsdata:xs($s),dgpsid:xs(Ys),extensions:Jo}),Mo=["text","type"],Po=Is(mo,{text:Es(so),type:Es(so)}),No=Is(mo,["name","cmt","desc","src","link","number","type","rtept"]),Oo=Is(mo,{name:Es(so),cmt:Es(so),desc:Es(so),src:Es(so),link:Es(oa),number:Es(ro),type:Es(so),rtept:Cs(Es(aa))}),ko=Is(mo,["ele","time"]),Do=Is(mo,["name","cmt","desc","src","link","number","type","trkseg"]),Uo=Is(mo,{name:Es(so),cmt:Es(so),desc:Es(so),src:Es(so),link:Es(oa),number:Es(ro),type:Es(so),trkseg:Cs(Es(ua))}),Qo=Ss("trkpt"),Go=Is(mo,{trkpt:Es(aa)}),Ho=Is(mo,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),Vo=Is(mo,{ele:Es(io),time:Es(no),magvar:Es(io),geoidheight:Es(io),name:Es(so),cmt:Es(so),desc:Es(so),src:Es(so),link:Es(oa),sym:Es(so),type:Es(so),fix:Es(so),sat:Es(ro),hdop:Es(io),vdop:Es(io),pdop:Es(io),ageofdgpsdata:Es(io),dgpsid:Es(ro)}),jo={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Wo(t,e,n){const i=t.getGeometry();if(i){const t=jo[i.getType()];if(t){const n=e[e.length-1].node;return ds(n.namespaceURI,t)}}}function zo(t,e,n,i){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in i?(t.push(i["ele"]),delete i["ele"],e.hasZ=!0):t.push(0),"time"in i?(t.push(i["time"]),delete i["time"],e.hasM=!0):t.push(0),t}function Ko(t,e,n){let i="XY",r=2;if(t.hasZ&&t.hasM?(i="XYZM",r=4):t.hasZ?(i="XYZ",r=3):t.hasM&&(i="XYM",r=3),4!==r){for(let n=0,i=e.length/4;n<i;n++)e[n*r]=e[4*n],e[n*r+1]=e[4*n+1],t.hasZ&&(e[n*r+2]=e[4*n+2]),t.hasM&&(e[n*r+2]=e[4*n+3]);if(e.length=e.length/4*r,n)for(let t=0,e=n.length;t<e;t++)n[t]=n[t]/4*r}return i}function qo(t,e){const n=Ls({},bo,t,e);if(n)return n}function $o(t,e){const n=Ls({},Eo,t,e);if(n){const e=t.getAttribute("author");return null!==e&&(n["author"]=e),n}}function Xo(t,e){const n=e[e.length-1],i=t.getAttribute("minlat"),r=t.getAttribute("minlon"),s=t.getAttribute("maxlat"),o=t.getAttribute("maxlon");null!==r&&null!==i&&null!==o&&null!==s&&(n["bounds"]=[[parseFloat(r),parseFloat(i)],[parseFloat(o),parseFloat(s)]])}function Yo(t,e){const n=e[e.length-1],i=t.getAttribute("id"),r=t.getAttribute("domain");null!==i&&null!==r&&(n["email"]=`${i}@${r}`)}function Zo(t,e){const n=e[e.length-1],i=t.getAttribute("href");null!==i&&(n["link"]=i),Fs(_o,t,e)}function Jo(t,e){const n=e[e.length-1];n["extensionsNode_"]=t}function ta(t,e){const n=Ls({},To,t,e);if(n){const i=e[e.length-1],r=i["flatCoordinates"],s=i["layoutOptions"];zo(r,s,t,n)}}function ea(t,e){const n=Ls({},Lo,t,e);if(n){const i=e[e.length-1],r=i["flatCoordinates"],s=i["layoutOptions"];zo(r,s,t,n)}}function na(t,e){const n=e[e.length-1];Fs(Fo,t,e);const i=n["flatCoordinates"],r=n["ends"];r.push(i.length)}function ia(t,e){const n=e[0],i=Ls({flatCoordinates:[],layoutOptions:{}},Bo,t,e);if(!i)return;const r=i["flatCoordinates"];delete i["flatCoordinates"];const s=i["layoutOptions"];delete i["layoutOptions"];const o=Ko(s,r),a=new Gi(r,o);mr(a,!1,n);const l=new $(a);return l.setProperties(i,!0),l}function ra(t,e){const n=e[0],i=Ls({flatCoordinates:[],ends:[],layoutOptions:{}},Io,t,e);if(!i)return;const r=i["flatCoordinates"];delete i["flatCoordinates"];const s=i["ends"];delete i["ends"];const o=i["layoutOptions"];delete i["layoutOptions"];const a=Ko(o,r,s),l=new Vi(r,a,s);mr(l,!1,n);const c=new $(l);return c.setProperties(i,!0),c}function sa(t,e){const n=e[0],i=Ls({},Ro,t,e);if(!i)return;const r={},s=zo([],r,t,i),o=Ko(r,s),a=new Wi(s,o);mr(a,!1,n);const l=new $(a);return l.setProperties(i,!0),l}function oa(t,e,n){t.setAttribute("href",e);const i=n[n.length-1],r=i["properties"],s=[r["linkText"],r["linkType"]];Ms({node:t},Po,Bs,s,n,Mo)}function aa(t,e,n){const i=n[n.length-1],r=i.node,s=r.namespaceURI,o=i["properties"];t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0]));const a=i["geometryLayout"];switch(a){case"XYZM":0!==e[3]&&(o["time"]=e[3]);case"XYZ":0!==e[2]&&(o["ele"]=e[2]);break;case"XYM":0!==e[2]&&(o["time"]=e[2]);break;default:}const l="rtept"==t.nodeName?ko[s]:Ho[s],c=Ts(o,l);Ms({node:t,properties:o},Vo,Bs,c,n,l)}function la(t,e,n){const i=n[0],r=e.getProperties(),s={node:t};s["properties"]=r;const o=e.getGeometry();if("LineString"==o.getType()){const t=mr(o,!0,i);s["geometryLayout"]=t.getLayout(),r["rtept"]=t.getCoordinates()}const a=n[n.length-1].node,l=No[a.namespaceURI],c=Ts(r,l);Ms(s,Oo,Bs,c,n,l)}function ca(t,e,n){const i=n[0],r=e.getProperties(),s={node:t};s["properties"]=r;const o=e.getGeometry();if("MultiLineString"==o.getType()){const t=mr(o,!0,i);r["trkseg"]=t.getLineStrings()}const a=n[n.length-1].node,l=Do[a.namespaceURI],c=Ts(r,l);Ms(s,Uo,Bs,c,n,l)}function ua(t,e,n){const i={node:t};i["geometryLayout"]=e.getLayout(),i["properties"]={},Ms(i,Go,Qo,e.getCoordinates(),n)}function ha(t,e,n){const i=n[0],r=n[n.length-1];r["properties"]=e.getProperties();const s=e.getGeometry();if("Point"==s.getType()){const e=mr(s,!0,i);r["geometryLayout"]=e.getLayout(),aa(t,e.getCoordinates(),n)}}var Aa=So;class da extends gr{constructor(){super()}getType(){return"text"}readFeature(t,e){return this.readFeatureFromText(fa(t),this.adaptOptions(e))}readFeatureFromText(t,e){return U()}readFeatures(t,e){return this.readFeaturesFromText(fa(t),this.adaptOptions(e))}readFeaturesFromText(t,e){return U()}readGeometry(t,e){return this.readGeometryFromText(fa(t),this.adaptOptions(e))}readGeometryFromText(t,e){return U()}readProjection(t){return this.readProjectionFromText(fa(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,e){return this.writeFeatureText(t,this.adaptOptions(e))}writeFeatureText(t,e){return U()}writeFeatures(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))}writeFeaturesText(t,e){return U()}writeGeometry(t,e){return this.writeGeometryText(t,this.adaptOptions(e))}writeGeometryText(t,e){return U()}}function fa(t){return"string"===typeof t?t:""}var pa=da;const ga=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,ma=/^H.([A-Z]{3}).*?:(.*)/,va=/^HFDTE(\d{2})(\d{2})(\d{2})/,ya=/\r\n|\r|\n/;class wa extends pa{constructor(t){super(),t=t||{},this.dataProjection=gn("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none"}readFeatureFromText(t,e){const n=this.altitudeMode_,i=t.split(ya),r={},s=[];let o,a,l=2e3,c=0,u=1,h=-1;for(o=0,a=i.length;o<a;++o){const t=i[o];let e;if("B"==t.charAt(0)){if(e=ga.exec(t),e){const t=parseInt(e[1],10),i=parseInt(e[2],10),r=parseInt(e[3],10);let o=parseInt(e[4],10)+parseInt(e[5],10)/6e4;"S"==e[6]&&(o=-o);let a=parseInt(e[7],10)+parseInt(e[8],10)/6e4;if("W"==e[9]&&(a=-a),s.push(a,o),"none"!=n){let t;t="gps"==n?parseInt(e[11],10):"barometric"==n?parseInt(e[12],10):0,s.push(t)}let A=Date.UTC(l,c,u,t,i,r);A<h&&(A=Date.UTC(l,c,u+1,t,i,r)),s.push(A/1e3),h=A}}else"H"==t.charAt(0)&&(e=va.exec(t),e?(u=parseInt(e[1],10),c=parseInt(e[2],10)-1,l=2e3+parseInt(e[3],10)):(e=ma.exec(t),e&&(r[e[1]]=e[2].trim())))}if(0===s.length)return null;const A="none"==n?"XYM":"XYZM",d=new Gi(s,A),f=new $(mr(d,!1,e));return f.setProperties(r,!0),f}readFeaturesFromText(t,e){const n=this.readFeatureFromText(t,e);return n?[n]:[]}}var _a=wa;const ba={VERSION1:"version1",VERSION2:"version2",VERSION3:"version3"},xa={};xa[ba.VERSION1]={level0:{supports:[],formats:[],qualities:["native"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["native"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["native","color","grey","bitonal"]}},xa[ba.VERSION2]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","sizeByW","sizeByH","sizeByPct"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByDistortedWh","sizeByWh"],formats:["jpg","png"],qualities:["default","bitonal"]}},xa[ba.VERSION3]={level0:{supports:[],formats:["jpg"],qualities:["default"]},level1:{supports:["regionByPx","regionSquare","sizeByW","sizeByH","sizeByWh"],formats:["jpg"],qualities:["default"]},level2:{supports:["regionByPx","regionSquare","regionByPct","sizeByW","sizeByH","sizeByPct","sizeByConfinedWh","sizeByWh"],formats:["jpg","png"],qualities:["default"]}},xa["none"]={none:{supports:[],formats:[],qualities:[]}};const Ea=/^https?:\/\/library\.stanford\.edu\/iiif\/image-api\/(?:1\.1\/)?compliance\.html#level[0-2]$/,Ca=/^https?:\/\/iiif\.io\/api\/image\/2\/level[0-2](?:\.json)?$/,Sa=/(^https?:\/\/iiif\.io\/api\/image\/3\/level[0-2](?:\.json)?$)|(^level[0-2]$)/;function Ba(t){let e=t.getComplianceLevelSupportedFeatures();return void 0===e&&(e=xa[ba.VERSION1]["level0"]),{url:void 0===t.imageInfo["@id"]?void 0:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),supports:e.supports,formats:[...e.formats,void 0===t.imageInfo.formats?[]:t.imageInfo.formats],qualities:[...e.qualities,void 0===t.imageInfo.qualities?[]:t.imageInfo.qualities],resolutions:t.imageInfo.scale_factors,tileSize:void 0!==t.imageInfo.tile_width?void 0!==t.imageInfo.tile_height?[t.imageInfo.tile_width,t.imageInfo.tile_height]:[t.imageInfo.tile_width,t.imageInfo.tile_width]:void 0!=t.imageInfo.tile_height?[t.imageInfo.tile_height,t.imageInfo.tile_height]:void 0}}function Ta(t){const e=t.getComplianceLevelSupportedFeatures(),n=Array.isArray(t.imageInfo.profile)&&t.imageInfo.profile.length>1,i=n&&t.imageInfo.profile[1].supports?t.imageInfo.profile[1].supports:[],r=n&&t.imageInfo.profile[1].formats?t.imageInfo.profile[1].formats:[],s=n&&t.imageInfo.profile[1].qualities?t.imageInfo.profile[1].qualities:[];return{url:t.imageInfo["@id"].replace(/\/?(?:info\.json)?$/g,""),sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return void 0===t.height?t.width:t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:[...e.supports,...i],formats:[...e.formats,...r],qualities:[...e.qualities,...s]}}function Ia(t){const e=t.getComplianceLevelSupportedFeatures(),n=void 0===t.imageInfo.extraFormats?e.formats:[...e.formats,...t.imageInfo.extraFormats],i=void 0!==t.imageInfo.preferredFormats&&Array.isArray(t.imageInfo.preferredFormats)&&t.imageInfo.preferredFormats.length>0?t.imageInfo.preferredFormats.filter((function(t){return["jpg","png","gif"].includes(t)})).reduce((function(t,e){return void 0===t&&n.includes(e)?e:t}),void 0):void 0;return{url:t.imageInfo["id"],sizes:void 0===t.imageInfo.sizes?void 0:t.imageInfo.sizes.map((function(t){return[t.width,t.height]})),tileSize:void 0===t.imageInfo.tiles?void 0:[t.imageInfo.tiles.map((function(t){return t.width}))[0],t.imageInfo.tiles.map((function(t){return t.height}))[0]],resolutions:void 0===t.imageInfo.tiles?void 0:t.imageInfo.tiles.map((function(t){return t.scaleFactors}))[0],supports:void 0===t.imageInfo.extraFeatures?e.supports:[...e.supports,...t.imageInfo.extraFeatures],formats:n,qualities:void 0===t.imageInfo.extraQualities?e.qualities:[...e.qualities,...t.imageInfo.extraQualities],preferredFormat:i}}const Fa={};Fa[ba.VERSION1]=Ba,Fa[ba.VERSION2]=Ta,Fa[ba.VERSION3]=Ia;class La{constructor(t){this.setImageInfo(t)}setImageInfo(t){this.imageInfo="string"==typeof t?JSON.parse(t):t}getImageApiVersion(){if(void 0===this.imageInfo)return;let t=this.imageInfo["@context"]||"ol-no-context";"string"==typeof t&&(t=[t]);for(let e=0;e<t.length;e++)switch(t[e]){case"http://library.stanford.edu/iiif/image-api/1.1/context.json":case"http://iiif.io/api/image/1/context.json":return ba.VERSION1;case"http://iiif.io/api/image/2/context.json":return ba.VERSION2;case"http://iiif.io/api/image/3/context.json":return ba.VERSION3;case"ol-no-context":if(this.getComplianceLevelEntryFromProfile(ba.VERSION1)&&this.imageInfo.identifier)return ba.VERSION1;break;default:}z(!1,"Cannot determine IIIF Image API version from provided image information JSON")}getComplianceLevelEntryFromProfile(t){if(void 0!==this.imageInfo&&void 0!==this.imageInfo.profile)switch(void 0===t&&(t=this.getImageApiVersion()),t){case ba.VERSION1:if(Ea.test(this.imageInfo.profile))return this.imageInfo.profile;break;case ba.VERSION3:if(Sa.test(this.imageInfo.profile))return this.imageInfo.profile;break;case ba.VERSION2:if("string"===typeof this.imageInfo.profile&&Ca.test(this.imageInfo.profile))return this.imageInfo.profile;if(Array.isArray(this.imageInfo.profile)&&this.imageInfo.profile.length>0&&"string"===typeof this.imageInfo.profile[0]&&Ca.test(this.imageInfo.profile[0]))return this.imageInfo.profile[0];break;default:}}getComplianceLevelFromProfile(t){const e=this.getComplianceLevelEntryFromProfile(t);if(void 0===e)return;const n=e.match(/level[0-2](?:\.json)?$/g);return Array.isArray(n)?n[0].replace(".json",""):void 0}getComplianceLevelSupportedFeatures(){if(void 0===this.imageInfo)return;const t=this.getImageApiVersion(),e=this.getComplianceLevelFromProfile(t);return void 0===e?xa["none"]["none"]:xa[t][e]}getTileSourceOptions(t){const e=t||{},n=this.getImageApiVersion();if(void 0===n)return;const i=void 0===n?void 0:Fa[n](this);return void 0!==i?{url:i.url,version:n,size:[this.imageInfo.width,this.imageInfo.height],sizes:i.sizes,format:void 0!==e.format&&i.formats.includes(e.format)?e.format:void 0!==i.preferredFormat?i.preferredFormat:"jpg",supports:i.supports,quality:e.quality&&i.qualities.includes(e.quality)?e.quality:i.qualities.includes("native")?"native":"default",resolutions:Array.isArray(i.resolutions)?i.resolutions.sort((function(t,e){return e-t})):void 0,tileSize:i.tileSize}:void 0}}var Ra=La,Ma=(n(4603),n(7566),n(8721),{IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}),Pa={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]},Na={name:"xyz",min:[0,0,0],channel:["X","Y","Z"],alias:["XYZ","ciexyz","cie1931"],whitepoint:{2:{A:[109.85,100,35.585],C:[98.074,100,118.232],D50:[96.422,100,82.521],D55:[95.682,100,92.149],D65:[95.045592705167,100,108.9057750759878],D75:[94.972,100,122.638],F2:[99.187,100,67.395],F7:[95.044,100,108.755],F11:[100.966,100,64.37],E:[100,100,100]},10:{A:[111.144,100,35.2],C:[97.285,100,116.145],D50:[96.72,100,81.427],D55:[95.799,100,90.926],D65:[94.811,100,107.304],D75:[94.416,100,120.641],F2:[103.28,100,69.026],F7:[95.792,100,107.687],F11:[103.866,100,65.627],E:[100,100,100]}}};Na.max=Na.whitepoint[2].D65,Na.rgb=function(t,e){e=e||Na.whitepoint[2].E;var n,i,r,s=t[0]/e[0],o=t[1]/e[1],a=t[2]/e[2];return n=3.240969941904521*s+-1.537383177570093*o+-.498610760293*a,i=-.96924363628087*s+1.87596750150772*o+.041555057407175*a,r=.055630079696993*s+-.20397695888897*o+1.056971514242878*a,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,i=i>.0031308?1.055*Math.pow(i,1/2.4)-.055:i*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,n=Math.min(Math.max(0,n),1),i=Math.min(Math.max(0,i),1),r=Math.min(Math.max(0,r),1),[255*n,255*i,255*r]},Pa.xyz=function(t,e){var n=t[0]/255,i=t[1]/255,r=t[2]/255;n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92,i=i>.04045?Math.pow((i+.055)/1.055,2.4):i/12.92,r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92;var s=.41239079926595*n+.35758433938387*i+.18048078840183*r,o=.21263900587151*n+.71516867876775*i+.072192315360733*r,a=.019330818715591*n+.11919477979462*i+.95053215224966*r;return e=e||Na.whitepoint[2].E,[s*e[0],o*e[1],a*e[2]]};var Oa=Na,ka={name:"luv",min:[0,-134,-140],max:[100,224,122],channel:["lightness","u","v"],alias:["LUV","cieluv","cie1976"],xyz:function(t,e,n){var i,r,s,o,a,l,c,u,h,A,d,f,p;if(s=t[0],o=t[1],a=t[2],0===s)return[0,0,0];var g=.0011070564598794539;return e=e||"D65",n=n||2,h=Oa.whitepoint[n][e][0],A=Oa.whitepoint[n][e][1],d=Oa.whitepoint[n][e][2],f=4*h/(h+15*A+3*d),p=9*A/(h+15*A+3*d),i=o/(13*s)+f||0,r=a/(13*s)+p||0,c=s>8?A*Math.pow((s+16)/116,3):A*s*g,l=9*c*i/(4*r)||0,u=c*(12-3*i-20*r)/(4*r)||0,[l,c,u]}};Oa.luv=function(t,e,n){var i,r,s,o,a,l,c,u,h,A,d,f,p,g=.008856451679035631,m=903.2962962962961;e=e||"D65",n=n||2,h=Oa.whitepoint[n][e][0],A=Oa.whitepoint[n][e][1],d=Oa.whitepoint[n][e][2],f=4*h/(h+15*A+3*d),p=9*A/(h+15*A+3*d),l=t[0],c=t[1],u=t[2],i=4*l/(l+15*c+3*u)||0,r=9*c/(l+15*c+3*u)||0;var v=c/A;return s=v<=g?m*v:116*Math.pow(v,1/3)-16,o=13*s*(i-f),a=13*s*(r-p),[s,o,a]};var Da={name:"lchuv",channel:["lightness","chroma","hue"],alias:["LCHuv","cielchuv"],min:[0,0,0],max:[100,100,360],luv:function(t){var e,n,i,r=t[0],s=t[1],o=t[2];return i=o/360*2*Math.PI,e=s*Math.cos(i),n=s*Math.sin(i),[r,e,n]},xyz:function(t){return ka.xyz(Da.luv(t))}},Ua=Da;ka.lchuv=function(t){var e=t[0],n=t[1],i=t[2],r=Math.sqrt(n*n+i*i),s=Math.atan2(i,n),o=360*s/2/Math.PI;return o<0&&(o+=360),[e,r,o]},Oa.lchuv=function(t){return ka.lchuv(Oa.luv(t))};var Qa={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Ga=Va,Ha={red:0,orange:60,yellow:120,green:180,blue:240,purple:300};function Va(t){var e,n,i=[],r=1;if("number"===typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if("number"===typeof t)return{space:"rgb",values:[t>>>16,(65280&t)>>>8,255&t],alpha:1};if(t=String(t).toLowerCase(),Qa[t])i=Qa[t].slice(),n="rgb";else if("transparent"===t)r=0,n="rgb",i=[0,0,0];else if("#"===t[0]){var s=t.slice(1),o=s.length,a=o<=4;r=1,a?(i=[parseInt(s[0]+s[0],16),parseInt(s[1]+s[1],16),parseInt(s[2]+s[2],16)],4===o&&(r=parseInt(s[3]+s[3],16)/255)):(i=[parseInt(s[0]+s[1],16),parseInt(s[2]+s[3],16),parseInt(s[4]+s[5],16)],8===o&&(r=parseInt(s[6]+s[7],16)/255)),i[0]||(i[0]=0),i[1]||(i[1]=0),i[2]||(i[2]=0),n="rgb"}else if(e=/^((?:rgba?|hs[lvb]a?|hwba?|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms|oklch|oklab|color))\s*\(([^\)]*)\)/.exec(t)){var l=e[1];n=l.replace(/a$/,"");var c="cmyk"===n?4:"gray"===n?1:3;i=e[2].trim().split(/\s*[,\/]\s*|\s+/),"color"===n&&(n=i.shift()),i=i.map((function(t,e){if("%"===t[t.length-1])return t=parseFloat(t)/100,3===e?t:"rgb"===n?255*t:"h"===n[0]?100*t:"l"!==n[0]||e?"lab"===n?125*t:"lch"===n?e<2?150*t:360*t:"o"!==n[0]||e?"oklab"===n?.4*t:"oklch"===n?e<2?.4*t:360*t:t:t:100*t;if("h"===n[e]||2===e&&"h"===n[n.length-1]){if(void 0!==Ha[t])return Ha[t];if(t.endsWith("deg"))return parseFloat(t);if(t.endsWith("turn"))return 360*parseFloat(t);if(t.endsWith("grad"))return 360*parseFloat(t)/400;if(t.endsWith("rad"))return 180*parseFloat(t)/Math.PI}return"none"===t?0:parseFloat(t)})),r=i.length>c?i.pop():1}else/[0-9](?:\s|\/|,)/.test(t)&&(i=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),n=t.match(/([a-z])/gi)?.join("")?.toLowerCase()||"rgb");return{space:n,values:i,alpha:r}}var ja={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,n,i,r,s,o=t[0]/360,a=t[1]/100,l=t[2]/100,c=0;if(0===a)return s=255*l,[s,s,s];for(n=l<.5?l*(1+a):l+a-l*a,e=2*l-n,r=[0,0,0];c<3;)i=o+1/3*-(c-1),i<0?i++:i>1&&i--,s=6*i<1?e+6*(n-e)*i:2*i<1?n:3*i<2?e+(n-e)*(2/3-i)*6:e,r[c++]=255*s;return r}};function Wa(t){var e;Array.isArray(t)&&t.raw&&(t=String.raw(...arguments)),t instanceof Number&&(t=+t);var n=Ga(t);if(!n.space)return[];const i="h"===n.space[0]?ja.min:Pa.min,r="h"===n.space[0]?ja.max:Pa.max;return e=Array(3),e[0]=Math.min(Math.max(n.values[0],i[0]),r[0]),e[1]=Math.min(Math.max(n.values[1],i[1]),r[1]),e[2]=Math.min(Math.max(n.values[2],i[2]),r[2]),"h"===n.space[0]&&(e=ja.rgb(e)),e.push(Math.min(Math.max(n.alpha,0),1)),e}function za(t){return"string"===typeof t?t:nl(t)}Pa.hsl=function(t){var e,n,i,r=t[0]/255,s=t[1]/255,o=t[2]/255,a=Math.min(r,s,o),l=Math.max(r,s,o),c=l-a;return l===a?e=0:r===l?e=(s-o)/c:s===l?e=2+(o-r)/c:o===l&&(e=4+(r-s)/c),e=Math.min(60*e,360),e<0&&(e+=360),i=(a+l)/2,n=l===a?0:i<=.5?c/(l+a):c/(2-l-a),[e,100*n,100*i]};const Ka=1024,qa={};let $a=0;function Xa(t){if(4===t.length)return t;const e=t.slice();return e[3]=1,e}function Ya(t){const e=Oa.lchuv(Pa.xyz(t));return e[3]=t[3],e}function Za(t){const e=Oa.rgb(Ua.xyz(t));return e[3]=t[3],e}function Ja(t){if(qa.hasOwnProperty(t))return qa[t];if($a>=Ka){let t=0;for(const e in qa)0===(3&t++)&&(delete qa[e],--$a)}const e=Wa(t);if(4!==e.length)throw new Error('Failed to parse "'+t+'" as color');for(const n of e)if(isNaN(n))throw new Error('Failed to parse "'+t+'" as color');return el(e),qa[t]=e,++$a,e}function tl(t){return Array.isArray(t)?t:Ja(t)}function el(t){return t[0]=Me(t[0]+.5|0,0,255),t[1]=Me(t[1]+.5|0,0,255),t[2]=Me(t[2]+.5|0,0,255),t[3]=Me(t[3],0,1),t}function nl(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];i!=(0|i)&&(i=i+.5|0);const r=void 0===t[3]?1:Math.round(1e3*t[3])/1e3;return"rgba("+e+","+n+","+i+","+r+")"}function il(t){try{return Ja(t),!0}catch(IR){return!1}}const rl="undefined"!==typeof navigator&&"undefined"!==typeof navigator.userAgent?navigator.userAgent.toLowerCase():"",sl=rl.includes("firefox"),ol=rl.includes("safari")&&!rl.includes("chrom"),al=ol&&(rl.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(rl)),ll=rl.includes("webkit")&&!rl.includes("edge"),cl=rl.includes("macintosh"),ul="undefined"!==typeof devicePixelRatio?devicePixelRatio:1,hl="undefined"!==typeof WorkerGlobalScope&&"undefined"!==typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,Al="undefined"!==typeof Image&&Image.prototype.decode,dl="function"===typeof createImageBitmap,fl=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch(e){}return t}();function pl(t,e,n,i){let r;return r=n&&n.length?n.shift():hl?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("2d",i)}let gl;function ml(){return gl||(gl=pl(1,1)),gl}function vl(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function yl(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function wl(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function _l(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function bl(t){return t&&t.parentNode?t.parentNode.removeChild(t):null}function xl(t){while(t.lastChild)t.removeChild(t.lastChild)}function El(t,e){const n=t.childNodes;for(let i=0;1;++i){const r=n[i],s=e[i];if(!r&&!s)break;r!==s&&(r?s?t.insertBefore(s,r):(t.removeChild(r),--i):t.appendChild(s))}}class Cl extends L{constructor(t,e,n,i){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state="function"===typeof i?Ma.IDLE:i,this.image_=null,this.loader="function"===typeof i?i:null}changed(){this.dispatchEvent(R.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==Ma.IDLE&&this.loader){this.state=Ma.LOADING,this.changed();const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;B((()=>this.loader(this.getExtent(),e,this.getPixelRatio()))).then((t=>{"image"in t&&(this.image_=t.image),"extent"in t&&(this.extent=t.extent),"resolution"in t&&(this.resolution=t.resolution),"pixelRatio"in t&&(this.pixelRatio_=t.pixelRatio),(t instanceof HTMLImageElement||t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)&&(this.image_=t),this.state=Ma.LOADED})).catch((t=>{this.state=Ma.ERROR,console.error(t)})).finally((()=>this.changed()))}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function Sl(t,e,n){const i=t;let r=!0,s=!1,o=!1;const a=[P(i,R.LOAD,(function(){o=!0,s||e()}))];return i.src&&Al?(s=!0,i.decode().then((function(){r&&e()})).catch((function(t){r&&(o?e():n())}))):a.push(P(i,R.ERROR,n)),function(){r=!1,a.forEach(N)}}function Bl(t,e){return new Promise(((n,i)=>{function r(){o(),n(t)}function s(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s),e&&(t.src=e)}))}function Tl(t,e){return e&&(t.src=e),t.src&&Al?new Promise(((e,n)=>t.decode().then((()=>e(t))).catch((i=>t.complete&&t.width?e(t):n(i))))):Bl(t)}function Il(t,e){return e&&(t.src=e),t.src&&Al&&dl?t.decode().then((()=>createImageBitmap(t))).catch((e=>{if(t.complete&&t.width)return t;throw e})):Tl(t)}var Fl=Cl;class Ll{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=32}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];0!==(3&t++)||n.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,n){const i=Rl(t,e,n);return i in this.cache_?this.cache_[i]:null}getPattern(t,e,n){const i=Rl(t,e,n);return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,n,i,r){const s=Rl(t,e,n),o=s in this.cache_;this.cache_[s]=i,r&&(i.getImageState()===Ma.IDLE&&i.load(),i.getImageState()===Ma.LOADING?i.ready().then((()=>{this.patternCache_[s]=ml().createPattern(i.getImage(1),"repeat")})):this.patternCache_[s]=ml().createPattern(i.getImage(1),"repeat")),o||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function Rl(t,e,n){const i=n?tl(n):"null";return e+":"+t+":"+i}const Ml=new Ll;let Pl=null;class Nl extends L{constructor(t,e,n,i,r){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=r,this.imageState_=void 0===i?Ma.IDLE:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===Ma.LOADED){Pl||(Pl=pl(1,1,void 0,{willReadFrequently:!0})),Pl.drawImage(this.image_,0,0);try{Pl.getImageData(0,0,1,1),this.tainted_=!1}catch(Rdt){Pl=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(R.CHANGE)}handleImageError_(){this.imageState_=Ma.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=Ma.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=pl(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===Ma.IDLE){this.image_||this.initializeImage_(),this.imageState_=Ma.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(Rdt){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&Tl(this.image_,this.src_).then((t=>{this.image_=t,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==Ma.LOADED)return;const e=this.image_,n=document.createElement("canvas");n.width=Math.ceil(e.width*t),n.height=Math.ceil(e.height*t);const i=n.getContext("2d");i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=za(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise((t=>{this.imageState_===Ma.LOADED||this.imageState_===Ma.ERROR?t():this.addEventListener(R.CHANGE,(function e(){this.imageState_!==Ma.LOADED&&this.imageState_!==Ma.ERROR||(this.removeEventListener(R.CHANGE,e),t())}))}))),this.ready_}}function Ol(t,e,n,i,r,s){let o=void 0===e?void 0:Ml.get(e,n,r);return o||(o=new Nl(t,t instanceof HTMLImageElement?t.src||void 0:e,n,i,r),Ml.set(e,n,r,o,s)),s&&o&&!Ml.getPattern(e,n,r)&&Ml.set(e,n,r,o,s),o}class kl{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){const t=this.getColor();return new kl({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"===typeof t&&"src"in t){const e=Ol(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then((()=>{this.patternImage_=null})),e.getImageState()===Ma.IDLE&&e.load(),e.getImageState()===Ma.LOADING&&(this.patternImage_=e)}this.color_=t}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}var Dl=kl;function Ul(t){return t[0]>0&&t[1]>0}function Ql(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function Gl(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}class Hl{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=Gl(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Hl({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return U()}getImage(t){return U()}getHitDetectionImage(){return U()}getPixelRatio(t){return 1}getImageState(){return U()}getImageSize(){return U()}getOrigin(){return U()}getSize(){return U()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Gl(t)}listenImageChange(t){U()}load(){U()}unlistenImageChange(t){U()}ready(){return Promise.resolve()}}var Vl=Hl;function jl(t,e,n,i){return void 0!==n&&void 0!==i?[n/t,i/e]:void 0!==n?n/t:void 0!==i?i/e:1}class Wl extends Vl{constructor(t){t=t||{};const e=void 0!==t.opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,i=void 0!==t.scale?t.scale:1,r=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:n,scale:i,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:r,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const s=void 0!==t.img?t.img:null;let o,a=t.src;if(z(!(void 0!==a&&s),"`image` and `src` cannot be provided at the same time"),void 0!==a&&0!==a.length||!s||(a=s.src||G(s)),z(void 0!==a&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),z(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?o=Ma.IDLE:void 0!==s&&(o=s instanceof HTMLImageElement?s.complete?s.src?Ma.LOADED:Ma.IDLE:Ma.LOADING:Ma.LOADED),this.color_=void 0!==t.color?tl(t.color):null,this.iconImage_=Ol(s,a,this.crossOrigin_,o,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,n;if(t.size)[e,n]=t.size;else{const i=this.getImage(1);if(i.width&&i.height)e=i.width,n=i.height;else if(i instanceof HTMLImageElement){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const n=this.iconImage_.getSize();this.setScale(jl(n[0],n[1],t.width,t.height))};return void this.listenImageChange(e)}}void 0!==e&&this.setScale(jl(e,n,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Wl({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==Ma.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==Ma.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(R.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(R.CHANGE,t)}ready(){return this.iconImage_.ready()}}var zl=Wl;class Kl{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new Kl({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var ql=Kl;function $l(t){return t?Array.isArray(t)?nl(t):"object"===typeof t&&"src"in t?Xl(t):t:null}function Xl(t){if(!t.offset||!t.size)return Ml.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=Ml.getPattern(e,void 0,t.color);if(n)return n;const i=Ml.get(t.src,"anonymous",null);if(i.getImageState()!==Ma.LOADED)return null;const r=pl(t.size[0],t.size[1]);return r.drawImage(i.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),Ol(r.canvas,e,void 0,Ma.LOADED,t.color,!0),Ml.getPattern(e,void 0,t.color)}const Yl="ol-hidden",Zl="ol-selectable",Jl="ol-unselectable",tc="ol-unsupported",ec="ol-control",nc="ol-collapsed",ic=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z]+?)\\s*$"].join(""),"i"),rc=["style","variant","weight","size","lineHeight","family"],sc=function(t){const e=t.match(ic);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,r=rc.length;i<r;++i){const t=e[i+1];void 0!==t&&(n[rc[i]]=t)}return n.families=n.family.split(/,\s?/),n},oc="10px sans-serif",ac="#000",lc="round",cc=[],uc=0,hc="round",Ac=10,dc="#000",fc="center",pc="middle",gc=[0,0,0,0],mc=1,vc=new W;let yc,wc=null;const _c={},bc=function(){const t=100,e="32px ",n=["monospace","serif"],i=n.length,r="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(t,s,a){let l=!0;for(let c=0;c<i;++c){const i=n[c];if(o=Cc(t+" "+s+" "+e+i,r),a!=i){const n=Cc(t+" "+s+" "+e+a+","+i,r);l=l&&n!=o}}return!!l}function l(){let e=!0;const n=vc.getKeys();for(let i=0,r=n.length;i<r;++i){const r=n[i];vc.get(r)<t&&(a.apply(this,r.split("\n"))?(T(_c),wc=null,yc=void 0,vc.set(r,t)):(vc.set(r,vc.get(r)+1,!0),e=!1))}e&&(clearInterval(s),s=void 0)}return function(e){const n=sc(e);if(!n)return;const i=n.families;for(let r=0,o=i.length;r<o;++r){const e=i[r],o=n.style+"\n"+n.weight+"\n"+e;void 0===vc.get(o)&&(vc.set(o,t,!0),a(n.style,n.weight,e)||(vc.set(o,0,!0),void 0===s&&(s=setInterval(l,32))))}}}(),xc=function(){let t;return function(e){let n=_c[e];if(void 0==n){if(hl){const t=sc(e),i=Ec(e,"g"),r=isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight);n=r*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);_c[e]=n}return n}}();function Ec(t,e){return wc||(wc=pl(1,1)),t!=yc&&(wc.font=t,yc=wc.font),wc.measureText(e)}function Cc(t,e){return Ec(t,e).width}function Sc(t,e,n){if(e in n)return n[e];const i=e.split("\n").reduce(((e,n)=>Math.max(e,Cc(t,n))),0);return n[e]=i,i}function Bc(t,e){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let c=0,u=e.length;c<=u;c+=2){const h=e[c];if("\n"===h||c===u){s=Math.max(s,o),r.push(o),o=0,a+=l;continue}const A=e[c+1]||t.font,d=Cc(A,h);n.push(d),o+=d;const f=xc(A);i.push(f),l=Math.max(l,f)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function Tc(t,e,n,i,r,s,o,a,l,c,u){t.save(),1!==n&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,c),t.scale(u[0],u[1]),Ic(i,t)):u[0]<0||u[1]<0?(t.translate(l,c),t.scale(u[0],u[1]),t.drawImage(i,r,s,o,a,0,0,o,a)):t.drawImage(i,r,s,o,a,l,c,o*u[0],a*u[1]),t.restore()}function Ic(t,e){const n=t.contextInstructions;for(let i=0,r=n.length;i<r;i+=2)Array.isArray(n[i+1])?e[n[i]].apply(e,n[i+1]):e[n[i]]=n[i+1]}class Fc extends Vl{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.canvases_,this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius_=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?Ma.LOADING:Ma.LOADED,this.imageState_===Ma.LOADING&&this.ready().then((()=>this.imageState_=Ma.LOADED)),this.render()}clone(){const t=this.getScale(),e=new Fc({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){let e=this.canvases_[t];if(!e){const n=this.renderOptions_,i=pl(n.size*t,n.size*t);this.draw_(n,i,t),e=i.canvas,this.canvases_[t]=e}return e}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius_}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let i=this.radius_,r=void 0===this.radius2_?i:this.radius2_;if(i<r){const t=i;i=r,r=t}const s=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/s,a=r*Math.sin(o),l=Math.sqrt(r*r-a*a),c=i-l,u=Math.sqrt(a*a+c*c),h=u/a;if("miter"===t&&h<=n)return h*e;const A=e/2/h,d=e/2*(c/u),f=Math.sqrt((i+A)*(i+A)+d*d),p=f-i;if(void 0===this.radius2_||"bevel"===t)return 2*p;const g=i*Math.sin(o),m=Math.sqrt(i*i-g*g),v=r-m,y=Math.sqrt(g*g+v*v),w=y/g;if(w<=n){const t=w*e/2-r-i;return 2*Math.max(p,t)}return 2*p}createRenderOptions(){let t,e=lc,n=hc,i=0,r=null,s=0,o=0;this.stroke_&&(t=$l(this.stroke_.getColor()??dc),o=this.stroke_.getWidth()??mc,r=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??hc,e=this.stroke_.getLineCap()??lc,i=this.stroke_.getMiterLimit()??Ac);const a=this.calculateLineJoinSize_(n,o,i),l=Math.max(this.radius_,this.radius2_||0),c=Math.ceil(2*l+a);return{strokeStyle:t,strokeWidth:o,size:c,lineCap:e,lineDash:r,lineDashOffset:s,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.canvases_={},this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=ac),e.fillStyle=$l(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let n=this.fill_.getColor(),i=0;"string"===typeof n&&(n=tl(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i&&(e=pl(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const n=this.radius_;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let o=0;o<e;o++){const e=r+o*s,a=o%2===0?n:i;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=ac,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}var Lc=Fc;class Rc extends Lc{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new Rc({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}var Mc=Rc;class Pc{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=Uc,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"===typeof t&&(t=t.clone()),new Pc({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"===typeof t?this.geometryFunction_=t:"string"===typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=Uc,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Nc(t){let e;if("function"===typeof t)e=t;else{let n;if(Array.isArray(t))n=t;else{z("function"===typeof t.getZIndex,"Expected an `Style` or an array of `Style`");const e=t;n=[e]}e=function(){return n}}return e}let Oc=null;function kc(t,e){if(!Oc){const t=new Dl({color:"rgba(255,255,255,0.4)"}),e=new ql({color:"#3399CC",width:1.25});Oc=[new Pc({image:new Mc({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return Oc}function Dc(){const t={},e=[255,255,255,1],n=[0,153,255,1],i=3;return t["Polygon"]=[new Pc({fill:new Dl({color:[255,255,255,.5]})})],t["MultiPolygon"]=t["Polygon"],t["LineString"]=[new Pc({stroke:new ql({color:e,width:i+2})}),new Pc({stroke:new ql({color:n,width:i})})],t["MultiLineString"]=t["LineString"],t["Circle"]=t["Polygon"].concat(t["LineString"]),t["Point"]=[new Pc({image:new Mc({radius:2*i,fill:new Dl({color:n}),stroke:new ql({color:e,width:i/2})}),zIndex:1/0})],t["MultiPoint"]=t["Point"],t["GeometryCollection"]=t["Polygon"].concat(t["LineString"],t["Point"]),t}function Uc(t){return t.getGeometry()}var Qc=Pc;const Gc="#333";class Hc{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=Gl(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new Dl({color:Gc}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new Hc({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=Gl(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var Vc=Hc;const jc=["http://www.google.com/kml/ext/2.2"],Wc=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],zc="http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd",Kc={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},qc=Is(Wc,{ExtendedData:uh,Region:hh,MultiGeometry:xs(th,"geometry"),LineString:xs(Yu,"geometry"),LinearRing:xs(Zu,"geometry"),Point:xs(eh,"geometry"),Polygon:xs(ih,"geometry"),Style:xs(sh),StyleMap:fh,address:xs(Js),description:xs(Js),name:xs(Js),open:xs(zs),phoneNumber:xs(Js),styleUrl:xs(Su),visibility:xs(zs)},Is(jc,{MultiTrack:xs(Vu,"geometry"),Track:xs(Wu,"geometry")})),$c=Is(Wc,{ExtendedData:uh,Region:hh,Link:Sh,address:xs(Js),description:xs(Js),name:xs(Js),open:xs(zs),phoneNumber:xs(Js),visibility:xs(zs)}),Xc=Is(Wc,{href:xs(Cu)}),Yc=Is(Wc,{Altitude:xs($s),Longitude:xs($s),Latitude:xs($s),Tilt:xs($s),AltitudeMode:xs(Js),Heading:xs($s),Roll:xs($s)}),Zc=Is(Wc,{LatLonAltBox:yh,Lod:_h}),Jc=Is(Wc,["Document","Placemark"]),tu=Is(Wc,{Document:Es(Oh),Placemark:Es(hA)});let eu,nu,iu,ru,su,ou,au=null;let lu,cu=null;let uu,hu=null;let Au=null;let du=null;let fu,pu=null;function gu(t){return 32/Math.min(t[0],t[1])}function mu(){eu=[255,255,255,1],au=new Dl({color:eu}),nu=[20,2],iu="pixels",ru="pixels",su=[64,64],ou="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",cu=new zl({anchor:nu,anchorOrigin:"bottom-left",anchorXUnits:iu,anchorYUnits:ru,crossOrigin:"anonymous",rotation:0,scale:gu(su),size:su,src:ou}),lu="NO_IMAGE",hu=new ql({color:eu,width:1}),uu=new ql({color:[51,51,51,1],width:2}),Au=new Vc({font:"bold 16px Helvetica",fill:au,stroke:uu,scale:.8}),du=new Qc({fill:au,image:cu,text:Au,stroke:hu,zIndex:0}),pu=[du]}function vu(t){return t}class yu extends Us{constructor(t){super(),t=t||{},pu||mu(),this.dataProjection=gn("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:pu,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:vu,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,e){const n=Is(Wc,{Document:ys(this.readDocumentOrFolder_,this),Folder:ys(this.readDocumentOrFolder_,this),Placemark:ws(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=Ls([],n,t,e,this);if(i)return i}readPlacemark_(t,e){const n=Ls({geometry:null},qc,t,e,this);if(!n)return;const i=new $,r=t.getAttribute("id");null!==r&&i.setId(r);const s=e[0],o=n["geometry"];if(o&&mr(o,!1,s),i.setGeometry(o),delete n["geometry"],this.extractStyles_){const t=n["Style"],e=n["styleUrl"],r=_u(t,e,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);i.setStyle(r)}return delete n["Style"],i.setProperties(n,!0),i}readSharedStyle_(t,e){const n=t.getAttribute("id");if(null!==n){const i=sh.call(this,t,e);if(i){let e,r=t.baseURI;if(r&&"about:blank"!=r||(r=window.location.href),r){const t=new URL("#"+n,r);e=t.href}else e="#"+n;this.sharedStyles_[e]=i}}}readSharedStyleMap_(t,e){const n=t.getAttribute("id");if(null===n)return;const i=Fu.call(this,t,e);if(!i)return;let r,s=t.baseURI;if(s&&"about:blank"!=s||(s=window.location.href),s){const t=new URL("#"+n,s);r=t.href}else r="#"+n;this.sharedStyles_[r]=i}readFeatureFromNode(t,e){if(!Wc.includes(t.namespaceURI))return null;const n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n||null}readFeaturesFromNode(t,e){if(!Wc.includes(t.namespaceURI))return[];let n;const i=t.localName;if("Document"==i||"Folder"==i)return n=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]),n||[];if("Placemark"==i){const n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n?[n]:[]}if("kml"==i){n=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=this.readFeaturesFromNode(i,e);t&&w(n,t)}return n}return[]}readName(t){if(t){if("string"===typeof t){const e=vs(t);return this.readNameFromDocument(e)}return gs(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const t=this.readNameFromNode(e);if(t)return t}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(Wc.includes(e.namespaceURI)&&"name"==e.localName)return Js(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const t=e.localName;if(Wc.includes(e.namespaceURI)&&("Document"==t||"Folder"==t||"Placemark"==t||"kml"==t)){const t=this.readNameFromNode(e);if(t)return t}}}readNetworkLinks(t){const e=[];if("string"===typeof t){const n=vs(t);w(e,this.readNetworkLinksFromDocument(n))}else gs(t)?w(e,this.readNetworkLinksFromDocument(t)):w(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&w(e,this.readNetworkLinksFromNode(n));return e}readNetworkLinksFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(Wc.includes(n.namespaceURI)&&"NetworkLink"==n.localName){const t=Ls({},$c,n,[]);e.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=n.localName;!Wc.includes(n.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||w(e,this.readNetworkLinksFromNode(n))}return e}readRegion(t){const e=[];if("string"===typeof t){const n=vs(t);w(e,this.readRegionFromDocument(n))}else gs(t)?w(e,this.readRegionFromDocument(t)):w(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&w(e,this.readRegionFromNode(n));return e}readRegionFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(Wc.includes(n.namespaceURI)&&"Region"==n.localName){const t=Ls({},Zc,n,[]);e.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=n.localName;!Wc.includes(n.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||w(e,this.readRegionFromNode(n))}return e}readCamera(t){const e=[];if("string"===typeof t){const n=vs(t);w(e,this.readCameraFromDocument(n))}else gs(t)?w(e,this.readCameraFromDocument(t)):w(e,this.readCameraFromNode(t));return e}readCameraFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&w(e,this.readCameraFromNode(n));return e}readCameraFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(Wc.includes(n.namespaceURI)&&"Camera"===n.localName){const t=Ls({},Yc,n,[]);e.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=n.localName;!Wc.includes(n.namespaceURI)||"Document"!==t&&"Folder"!==t&&"Placemark"!==t&&"kml"!==t||w(e,this.readCameraFromNode(n))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=ds(Wc[4],"kml"),i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:gx",jc[0]),n.setAttributeNS(i,"xmlns:xsi",As),n.setAttributeNS(As,"xsi:schemaLocation",zc);const r={node:n},s={};t.length>1?s["Document"]=t:1==t.length&&(s["Placemark"]=t[0]);const o=Jc[n.namespaceURI],a=Ts(s,o);return Ms(r,tu,Bs,a,[e],o,this),n}}function wu(t,e){const n=[0,0];let i="start";const r=t.getImage();if(r){const t=r.getSize();if(t&&2==t.length){const e=r.getScaleArray(),s=r.getAnchor();n[0]=e[0]*(t[0]-s[0]),n[1]=e[1]*(t[1]/2-s[1]),i="left"}}let s=t.getText();s?(s=s.clone(),s.setFont(s.getFont()||Au.getFont()),s.setScale(s.getScale()||Au.getScale()),s.setFill(s.getFill()||Au.getFill()),s.setStroke(s.getStroke()||uu)):s=Au.clone(),s.setText(e),s.setOffsetX(n[0]),s.setOffsetY(n[1]),s.setTextAlign(i);const o=new Qc({image:r,text:s});return o}function _u(t,e,n,i,r){return function(s,o){let a=r,l="",c=[];if(a){const t=s.getGeometry();if(t)if(t instanceof ri)c=t.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Point"===e||"MultiPoint"===e})),a=c.length>0;else{const e=t.getType();a="Point"===e||"MultiPoint"===e}}a&&(l=s.get("name"),a=a&&!!l,a&&/&[^&]+;/.test(l)&&(fu||(fu=document.createElement("textarea")),fu.innerHTML=l,l=fu.value));let u=n;if(t?u=t:e&&(u=bu(e,n,i)),a){const t=wu(u[0],l);if(c.length>0){t.setGeometry(new ri(c));const e=new Qc({geometry:u[0].getGeometry(),image:null,fill:u[0].getFill(),stroke:u[0].getStroke(),text:null});return[t,e].concat(u.slice(1))}return t}return u}}function bu(t,e,n){return Array.isArray(t)?t:"string"===typeof t?bu(n[t],e,n):e}function xu(t){const e=fs(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){const t=n[1];return[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}}function Eu(t){let e=fs(t,!1);const n=[];e=e.replace(/\s*,\s*/g,",");const i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let r;while(r=i.exec(e)){const t=parseFloat(r[1]),i=parseFloat(r[2]),s=r[3]?parseFloat(r[3]):0;n.push(t,i,s),e=e.substr(r[0].length)}if(""===e)return n}function Cu(t){const e=fs(t,!1).trim();let n=t.baseURI;if(n&&"about:blank"!=n||(n=window.location.href),n){const t=new URL(e,n);return t.href}return e}function Su(t){const e=fs(t,!1).trim().replace(/^(?!.*#)/,"#");let n=t.baseURI;if(n&&"about:blank"!=n||(n=window.location.href),n){const t=new URL(e,n);return t.href}return e}function Bu(t){const e=t.getAttribute("xunits"),n=t.getAttribute("yunits");let i;return i="insetPixels"!==e?"insetPixels"!==n?"bottom-left":"top-left":"insetPixels"!==n?"bottom-right":"top-right",{x:parseFloat(t.getAttribute("x")),xunits:Kc[e],y:parseFloat(t.getAttribute("y")),yunits:Kc[n],origin:i}}function Tu(t){return $s(t)}const Iu=Is(Wc,{Pair:dh});function Fu(t,e){return Ls(void 0,Iu,t,e,this)}const Lu=Is(Wc,{Icon:xs(Ku),color:xs(xu),heading:xs($s),hotSpot:xs(Bu),scale:xs(Tu)});function Ru(t,e){const n=Ls({},Lu,t,e);if(!n)return;const i=e[e.length-1],r="Icon"in n?n["Icon"]:{},s=!("Icon"in n)||Object.keys(r).length>0;let o;const a=r["href"];let l,c,u;a?o=a:s&&(o=ou);let h="bottom-left";const A=n["hotSpot"];let d;A?(l=[A.x,A.y],c=A.xunits,u=A.yunits,h=A.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(o)&&(o.includes("pushpin")?(l=nu,c=iu,u=ru):o.includes("arrow-reverse")?(l=[54,42],c=iu,u=ru):o.includes("paddle")&&(l=[32,1],c=iu,u=ru));const f=r["x"],p=r["y"];let g;void 0!==f&&void 0!==p&&(d=[f,p]);const m=r["w"],v=r["h"];let y;void 0!==m&&void 0!==v&&(g=[m,v]);const w=n["heading"];void 0!==w&&(y=De(w));const _=n["scale"],b=n["color"];if(s){o==ou&&(g=su);const t=new zl({anchor:l,anchorOrigin:h,anchorXUnits:c,anchorYUnits:u,crossOrigin:this.crossOrigin_,offset:d,offsetOrigin:"bottom-left",rotation:y,scale:_,size:g,src:this.iconUrlFunction_(o),color:b}),e=t.getScaleArray()[0],n=t.getSize();if(null===n){const n=t.getImageState();if(n===Ma.IDLE||n===Ma.LOADING){const i=function(){const n=t.getImageState();if(n!==Ma.IDLE&&n!==Ma.LOADING){const n=t.getSize();if(n&&2==n.length){const i=gu(n);t.setScale(e*i)}t.unlistenImageChange(i)}};t.listenImageChange(i),n===Ma.IDLE&&t.load()}}else if(2==n.length){const i=gu(n);t.setScale(e*i)}i["imageStyle"]=t}else i["imageStyle"]=lu}const Mu=Is(Wc,{color:xs(xu),scale:xs(Tu)});function Pu(t,e){const n=Ls({},Mu,t,e);if(!n)return;const i=e[e.length-1],r=new Vc({fill:new Dl({color:"color"in n?n["color"]:eu}),scale:n["scale"]});i["textStyle"]=r}const Nu=Is(Wc,{color:xs(xu),width:xs($s)});function Ou(t,e){const n=Ls({},Nu,t,e);if(!n)return;const i=e[e.length-1],r=new ql({color:"color"in n?n["color"]:eu,width:"width"in n?n["width"]:1});i["strokeStyle"]=r}const ku=Is(Wc,{color:xs(xu),fill:xs(zs),outline:xs(zs)});function Du(t,e){const n=Ls({},ku,t,e);if(!n)return;const i=e[e.length-1],r=new Dl({color:"color"in n?n["color"]:eu});i["fillStyle"]=r;const s=n["fill"];void 0!==s&&(i["fill"]=s);const o=n["outline"];void 0!==o&&(i["outline"]=o)}const Uu=Is(Wc,{coordinates:_s(Eu)});function Qu(t,e){return Ls(null,Uu,t,e)}function Gu(t,e){const n=e[e.length-1],i=n.coordinates,r=fs(t,!1),s=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i,o=s.exec(r);if(o){const t=parseFloat(o[1]),e=parseFloat(o[2]),n=parseFloat(o[3]);i.push([t,e,n])}else i.push([])}const Hu=Is(jc,{Track:ws(Wu)});function Vu(t,e){const n=Ls([],Hu,t,e);if(n)return new Vi(n)}const ju=Is(Wc,{when:Bh},Is(jc,{coord:Gu}));function Wu(t,e){const n=Ls({coordinates:[],whens:[]},ju,t,e);if(!n)return;const i=[],r=n.coordinates,s=n.whens;for(let o=0,a=Math.min(r.length,s.length);o<a;++o)3==r[o].length&&i.push(r[o][0],r[o][1],r[o][2],s[o]);return new Gi(i,"XYZM")}const zu=Is(Wc,{href:xs(Cu)},Is(jc,{x:xs($s),y:xs($s),w:xs($s),h:xs($s)}));function Ku(t,e){const n=Ls({},zu,t,e);return n||null}const qu=Is(Wc,{coordinates:_s(Eu)});function $u(t,e){return Ls(null,qu,t,e)}const Xu=Is(Wc,{extrude:xs(zs),tessellate:xs(zs),altitudeMode:xs(Js)});function Yu(t,e){const n=Ls({},Xu,t,e),i=$u(t,e);if(i){const t=new Gi(i,"XYZ");return t.setProperties(n,!0),t}}function Zu(t,e){const n=Ls({},Xu,t,e),i=$u(t,e);if(i){const t=new rr(i,"XYZ",[i.length]);return t.setProperties(n,!0),t}}const Ju=Is(Wc,{LineString:ws(Yu),LinearRing:ws(Zu),MultiGeometry:ws(th),Point:ws(eh),Polygon:ws(ih)});function th(t,e){const n=Ls([],Ju,t,e);if(!n)return null;if(0===n.length)return new ri(n);let i,r=!0;const s=n[0].getType();let o;for(let a=1,l=n.length;a<l;++a)if(o=n[a],o.getType()!=s){r=!1;break}if(r){let t,e;if("Point"==s){const r=n[0];t=r.getLayout(),e=r.getFlatCoordinates();for(let t=1,i=n.length;t<i;++t)o=n[t],w(e,o.getFlatCoordinates());i=new Ki(e,t),oh(i,n)}else if("LineString"==s)i=new Vi(n),oh(i,n);else if("Polygon"==s)i=new hr(n),oh(i,n);else{if("GeometryCollection"!=s)throw new Error("Unknown geometry type found");i=new ri(n)}}else i=new ri(n);return i}function eh(t,e){const n=Ls({},Xu,t,e),i=$u(t,e);if(i){const t=new Wi(i,"XYZ");return t.setProperties(n,!0),t}}const nh=Is(Wc,{innerBoundaryIs:xh,outerBoundaryIs:Ch});function ih(t,e){const n=Ls({},Xu,t,e),i=Ls([null],nh,t,e);if(i&&i[0]){const t=i[0],e=[t.length];for(let n=1,s=i.length;n<s;++n)w(t,i[n]),e.push(t.length);const r=new rr(t,"XYZ",e);return r.setProperties(n,!0),r}}const rh=Is(Wc,{IconStyle:Ru,LabelStyle:Pu,LineStyle:Ou,PolyStyle:Du});function sh(t,e){const n=Ls({},rh,t,e,this);if(!n)return null;let i="fillStyle"in n?n["fillStyle"]:au;const r=n["fill"];let s;void 0===r||r||(i=null),"imageStyle"in n?n["imageStyle"]!=lu&&(s=n["imageStyle"]):s=cu;const o="textStyle"in n?n["textStyle"]:Au,a="strokeStyle"in n?n["strokeStyle"]:hu,l=n["outline"];return void 0===l||l?[new Qc({fill:i,image:s,stroke:a,text:o,zIndex:void 0})]:[new Qc({geometry:function(t){const e=t.getGeometry(),n=e.getType();if("GeometryCollection"===n){const t=e;return new ri(t.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"!==e&&"MultiPolygon"!==e})))}if("Polygon"!==n&&"MultiPolygon"!==n)return e},fill:i,image:s,stroke:a,text:o,zIndex:void 0}),new Qc({geometry:function(t){const e=t.getGeometry(),n=e.getType();if("GeometryCollection"===n){const t=e;return new ri(t.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"===e||"MultiPolygon"===e})))}if("Polygon"===n||"MultiPolygon"===n)return e},fill:i,stroke:null,zIndex:void 0})]}function oh(t,e){const n=e.length,i=new Array(e.length),r=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let c=0;c<n;++c){const t=e[c];i[c]=t.get("extrude"),r[c]=t.get("tessellate"),s[c]=t.get("altitudeMode"),o=o||void 0!==i[c],a=a||void 0!==r[c],l=l||s[c]}o&&t.set("extrude",i),a&&t.set("tessellate",r),l&&t.set("altitudeMode",s)}const ah=Is(Wc,{displayName:xs(Js),value:xs(Js)});function lh(t,e){const n=t.getAttribute("name");Fs(ah,t,e);const i=e[e.length-1];n&&i.displayName?i[n]={value:i.value,displayName:i.displayName,toString:function(){return i.value}}:null!==n?i[n]=i.value:null!==i.displayName&&(i[i.displayName]=i.value),delete i["value"]}const ch=Is(Wc,{Data:lh,SchemaData:gh});function uh(t,e){Fs(ch,t,e)}function hh(t,e){Fs(Zc,t,e)}const Ah=Is(Wc,{Style:xs(sh),key:xs(Js),styleUrl:xs(Su)});function dh(t,e){const n=Ls({},Ah,t,e,this);if(!n)return;const i=n["key"];if(i&&"normal"==i){const t=n["styleUrl"];t&&(e[e.length-1]=t);const i=n["Style"];i&&(e[e.length-1]=i)}}function fh(t,e){const n=Fu.call(this,t,e);if(!n)return;const i=e[e.length-1];if(Array.isArray(n))i["Style"]=n;else{if("string"!==typeof n)throw new Error("`styleMapValue` has an unknown type");i["styleUrl"]=n}}const ph=Is(Wc,{SimpleData:mh});function gh(t,e){Fs(ph,t,e)}function mh(t,e){const n=t.getAttribute("name");if(null!==n){const i=Js(t),r=e[e.length-1];r[n]=i}}const vh=Is(Wc,{altitudeMode:xs(Js),minAltitude:xs($s),maxAltitude:xs($s),north:xs($s),south:xs($s),east:xs($s),west:xs($s)});function yh(t,e){const n=Ls({},vh,t,e);if(!n)return;const i=e[e.length-1],r=[parseFloat(n["west"]),parseFloat(n["south"]),parseFloat(n["east"]),parseFloat(n["north"])];i["extent"]=r,i["altitudeMode"]=n["altitudeMode"],i["minAltitude"]=parseFloat(n["minAltitude"]),i["maxAltitude"]=parseFloat(n["maxAltitude"])}const wh=Is(Wc,{minLodPixels:xs($s),maxLodPixels:xs($s),minFadeExtent:xs($s),maxFadeExtent:xs($s)});function _h(t,e){const n=Ls({},wh,t,e);if(!n)return;const i=e[e.length-1];i["minLodPixels"]=parseFloat(n["minLodPixels"]),i["maxLodPixels"]=parseFloat(n["maxLodPixels"]),i["minFadeExtent"]=parseFloat(n["minFadeExtent"]),i["maxFadeExtent"]=parseFloat(n["maxFadeExtent"])}const bh=Is(Wc,{LinearRing:ws(Qu)});function xh(t,e){const n=Ls([],bh,t,e);if(n.length>0){const t=e[e.length-1];t.push(...n)}}const Eh=Is(Wc,{LinearRing:_s(Qu)});function Ch(t,e){const n=Ls(void 0,Eh,t,e);if(n){const t=e[e.length-1];t[0]=n}}function Sh(t,e){Fs(Xc,t,e)}function Bh(t,e){const n=e[e.length-1],i=n.whens,r=fs(t,!1),s=Date.parse(r);i.push(isNaN(s)?0:s)}function Th(t,e){const n=tl(e),i=4==n.length?n[3]:1,r=[255*i,n[2],n[1],n[0]];for(let s=0;s<4;++s){const t=Math.floor(r[s]).toString(16);r[s]=1==t.length?"0"+t:t}so(t,r.join(""))}function Ih(t,e,n){const i=n[n.length-1],r=i["layout"],s=i["stride"];let o;if("XY"==r||"XYM"==r)o=2;else{if("XYZ"!=r&&"XYZM"!=r)throw new Error("Invalid geometry layout");o=3}const a=e.length;let l="";if(a>0){l+=e[0];for(let t=1;t<o;++t)l+=","+e[t];for(let t=s;t<a;t+=s){l+=" "+e[t];for(let n=1;n<o;++n)l+=","+e[t+n]}}so(t,l)}const Fh=Is(Wc,{Data:Es(Lh),value:Es(Mh),displayName:Es(Rh)});function Lh(t,e,n){t.setAttribute("name",e.name);const i={node:t},r=e.value;"object"==typeof r?(null!==r&&r.displayName&&Ms(i,Fh,Bs,[r.displayName],n,["displayName"]),null!==r&&r.value&&Ms(i,Fh,Bs,[r.value],n,["value"])):Ms(i,Fh,Bs,[r],n,["value"])}function Rh(t,e){eo(t,e)}function Mh(t,e){so(t,e)}const Ph=Is(Wc,{Placemark:Es(hA)}),Nh=function(t,e,n){const i=e[e.length-1].node;return ds(i.namespaceURI,"Placemark")};function Oh(t,e,n){const i={node:t};Ms(i,Ph,Nh,e,n,void 0,this)}const kh=Ss("Data");function Dh(t,e,n){const i={node:t},r=e.names,s=e.values,o=r.length;for(let a=0;a<o;a++)Ms(i,Fh,kh,[{name:r[a],value:s[a]}],n)}const Uh=Is(Wc,["href"],Is(jc,["x","y","w","h"])),Qh=Is(Wc,{href:Es(so)},Is(jc,{x:Es(io),y:Es(io),w:Es(io),h:Es(io)})),Gh=function(t,e,n){return ds(jc[0],"gx:"+n)};function Hh(t,e,n){const i={node:t},r=n[n.length-1].node;let s=Uh[r.namespaceURI],o=Ts(e,s);Ms(i,Qh,Bs,o,n,s),s=Uh[jc[0]],o=Ts(e,s),Ms(i,Qh,Gh,o,n,s)}const Vh=Is(Wc,["scale","heading","Icon","color","hotSpot"]),jh=Is(Wc,{Icon:Es(Hh),color:Es(Th),heading:Es(io),hotSpot:Es(SA),scale:Es(bA)});function Wh(t,e,n){const i={node:t},r={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l["w"]=o[0],l["h"]=o[1];const t=e.getAnchor(),n=e.getOrigin();if(n&&a&&0!==n[0]&&n[1]!==o[1]&&(l["x"]=n[0],l["y"]=a[1]-(n[1]+o[1])),t&&(t[0]!==o[0]/2||t[1]!==o[1]/2)){const e={x:t[0],xunits:"pixels",y:o[1]-t[1],yunits:"pixels"};r["hotSpot"]=e}}r["Icon"]=l;let c=e.getScaleArray()[0],u=o;if(null===u&&(u=su),2==u.length){const t=gu(u);c/=t}1!==c&&(r["scale"]=c);const h=e.getRotation();0!==h&&(r["heading"]=h);const A=e.getColor();A&&(r["color"]=A);const d=n[n.length-1].node,f=Vh[d.namespaceURI],p=Ts(r,f);Ms(i,jh,Bs,p,n,f)}const zh=Is(Wc,["color","scale"]),Kh=Is(Wc,{color:Es(Th),scale:Es(bA)});function qh(t,e,n){const i={node:t},r={},s=e.getFill();s&&(r["color"]=s.getColor());const o=e.getScale();o&&1!==o&&(r["scale"]=o);const a=n[n.length-1].node,l=zh[a.namespaceURI],c=Ts(r,l);Ms(i,Kh,Bs,c,n,l)}const $h=Is(Wc,["color","width"]),Xh=Is(Wc,{color:Es(Th),width:Es(io)});function Yh(t,e,n){const i={node:t},r={color:e.getColor(),width:Number(e.getWidth())||1},s=n[n.length-1].node,o=$h[s.namespaceURI],a=Ts(r,o);Ms(i,Xh,Bs,a,n,o)}const Zh={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},Jh=function(t,e,n){if(t){const n=e[e.length-1].node;return ds(n.namespaceURI,Zh[t.getType()])}},tA=Ss("Point"),eA=Ss("LineString"),nA=Ss("LinearRing"),iA=Ss("Polygon"),rA=Is(Wc,{LineString:Es(fA),Point:Es(fA),Polygon:Es(yA),GeometryCollection:Es(sA)});function sA(t,e,n){const i={node:t},r=e.getType();let s,o=[];if("GeometryCollection"===r)e.getGeometriesArrayRecursive().forEach((function(t){const e=t.getType();if("MultiPoint"===e)o=o.concat(t.getPoints());else if("MultiLineString"===e)o=o.concat(t.getLineStrings());else if("MultiPolygon"===e)o=o.concat(t.getPolygons());else{if("Point"!==e&&"LineString"!==e&&"Polygon"!==e)throw new Error("Unknown geometry type");o.push(t)}})),s=Jh;else if("MultiPoint"===r)o=e.getPoints(),s=tA;else if("MultiLineString"===r)o=e.getLineStrings(),s=eA;else{if("MultiPolygon"!==r)throw new Error("Unknown geometry type");o=e.getPolygons(),s=iA}Ms(i,rA,s,o,n)}const oA=Is(Wc,{LinearRing:Es(fA)});function aA(t,e,n){const i={node:t};Ms(i,oA,nA,[e],n)}const lA=Is(Wc,{ExtendedData:Es(Dh),MultiGeometry:Es(sA),LineString:Es(fA),LinearRing:Es(fA),Point:Es(fA),Polygon:Es(yA),Style:Es(CA),address:Es(so),description:Es(so),name:Es(so),open:Es(to),phoneNumber:Es(so),styleUrl:Es(so),visibility:Es(to)}),cA=Is(Wc,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),uA=Ss("ExtendedData");function hA(t,e,n){const i={node:t};e.getId()&&t.setAttribute("id",e.getId());const r=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(r||{}).sort().filter((function(t){return!s[t]})),a=e.getStyleFunction();if(a){const t=a(e,0);if(t){const n=Array.isArray(t)?t:[t];let i=n;if(e.getGeometry()&&(i=n.filter((function(t){const n=t.getGeometryFunction()(e);if(n){const t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Point"===e||"MultiPoint"===e})).length:"Point"===t||"MultiPoint"===t}}))),this.writeStyles_){let t=n,s=n;e.getGeometry()&&(t=n.filter((function(t){const n=t.getGeometryFunction()(e);if(n){const t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"LineString"===e||"MultiLineString"===e})).length:"LineString"===t||"MultiLineString"===t}})),s=n.filter((function(t){const n=t.getGeometryFunction()(e);if(n){const t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"===e||"MultiPolygon"===e})).length:"Polygon"===t||"MultiPolygon"===t}}))),r["Style"]={pointStyles:i,lineStyles:t,polyStyles:s}}if(i.length&&void 0===r["name"]){const t=i[0].getText();t&&(r["name"]=t.getText())}}}const l=n[n.length-1].node,c=cA[l.namespaceURI],u=Ts(r,c);if(Ms(i,lA,Bs,u,n,c),o.length>0){const t=Ts(r,o),e={names:o,values:t};Ms(i,lA,uA,[e],n)}const h=n[0];let A=e.getGeometry();A&&(A=mr(A,!0,h)),Ms(i,lA,Jh,[A],n)}const AA=Is(Wc,["extrude","tessellate","altitudeMode","coordinates"]),dA=Is(Wc,{extrude:Es(to),tessellate:Es(to),altitudeMode:Es(so),coordinates:Es(Ih)});function fA(t,e,n){const i=e.getFlatCoordinates(),r={node:t};r["layout"]=e.getLayout(),r["stride"]=e.getStride();const s=e.getProperties();s.coordinates=i;const o=n[n.length-1].node,a=AA[o.namespaceURI],l=Ts(s,a);Ms(r,dA,Bs,l,n,a)}const pA=Is(Wc,["color","fill","outline"]),gA=Is(Wc,{outerBoundaryIs:Es(aA),innerBoundaryIs:Es(aA)}),mA=Ss("innerBoundaryIs"),vA=Ss("outerBoundaryIs");function yA(t,e,n){const i=e.getLinearRings(),r=i.shift(),s={node:t};Ms(s,gA,mA,i,n),Ms(s,gA,vA,[r],n)}const wA=Is(Wc,{color:Es(Th),fill:Es(to),outline:Es(to)});function _A(t,e,n){const i={node:t},r=e.getFill(),s=e.getStroke(),o={color:r?r.getColor():void 0,fill:!!r&&void 0,outline:!!s&&void 0},a=n[n.length-1].node,l=pA[a.namespaceURI],c=Ts(o,l);Ms(i,wA,Bs,c,n,l)}function bA(t,e){io(t,Math.round(1e6*e)/1e6)}const xA=Is(Wc,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),EA=Is(Wc,{IconStyle:Es(Wh),LabelStyle:Es(qh),LineStyle:Es(Yh),PolyStyle:Es(_A)});function CA(t,e,n){const i={node:t},r={};if(e.pointStyles.length){const t=e.pointStyles[0].getText();t&&(r["LabelStyle"]=t);const n=e.pointStyles[0].getImage();n&&"function"===typeof n.getSrc&&(r["IconStyle"]=n)}if(e.lineStyles.length){const t=e.lineStyles[0].getStroke();t&&(r["LineStyle"]=t)}if(e.polyStyles.length){const t=e.polyStyles[0].getStroke();t&&!r["LineStyle"]&&(r["LineStyle"]=t),r["PolyStyle"]=e.polyStyles[0]}const s=n[n.length-1].node,o=xA[s.namespaceURI],a=Ts(r,o);Ms(i,EA,Bs,a,n,o)}function SA(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}var BA=yu,TA=n(8062);class IA extends gr{constructor(t){super(),t=t||{},this.dataProjection=new Ae({code:"",units:"tile-pixels"}),this.featureClass_=t.featureClass?t.featureClass:fr,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,n,i){t.pos=e.geometry;const r=t.readVarint()+t.pos;let s=1,o=0,a=0,l=0,c=0,u=0;while(t.pos<r){if(!o){const e=t.readVarint();s=7&e,o=e>>3}if(o--,1===s||2===s)a+=t.readSVarint(),l+=t.readSVarint(),1===s&&c>u&&(i.push(c),u=c),n.push(a,l),c+=2;else{if(7!==s)throw new Error("Invalid command found in the PBF");c>u&&(n.push(n[u],n[u+1]),c+=2)}}c>u&&(i.push(c),u=c)}createFeature_(t,e,n){const i=e.type;if(0===i)return null;let r;const s=e.properties;let o;this.idProperty_?(o=s[this.idProperty_],delete s[this.idProperty_]):o=e.id,s[this.layerName_]=e.layer.name;const a=[],l=[];this.readRawGeometry_(t,e,a,l);const c=PA(i,l.length);if(this.featureClass_===fr)r=new this.featureClass_(c,a,l,2,s,o),r.transform(n.dataProjection);else{let t;if("Polygon"==c){const e=nr(a,l);t=e.length>1?new hr(a,"XY",e):new rr(a,"XY",l)}else t="Point"===c?new Wi(a,"XY"):"LineString"===c?new Gi(a,"XY"):"MultiPoint"===c?new Ki(a,"XY"):"MultiLineString"===c?new Vi(a,"XY",l):null;const e=this.featureClass_;r=new e,this.geometryName_&&r.setGeometryName(this.geometryName_);const i=mr(t,!1,n);r.setGeometry(i),void 0!==o&&r.setId(o),r.setProperties(s,!0)}return r}getType(){return"arraybuffer"}readFeatures(t,e){const n=this.layers_;e=this.adaptOptions(e);const i=gn(e.dataProjection);i.setWorldExtent(e.extent),e.dataProjection=i;const r=new TA(t),s=r.readFields(FA,{}),o=[];for(const a in s){if(n&&!n.includes(a))continue;const t=s[a],l=t?[0,0,t.extent,t.extent]:null;i.setExtent(l);for(let n=0,i=t.length;n<i;++n){const i=MA(r,t,n),s=this.createFeature_(r,i,e);null!==s&&o.push(s)}}return o}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function FA(t,e,n){if(3===t){const t={keys:[],values:[],features:[]},i=n.readVarint()+n.pos;n.readFields(LA,t,i),t.length=t.features.length,t.length&&(e[t.name]=t)}}function LA(t,e,n){if(15===t)e.version=n.readVarint();else if(1===t)e.name=n.readString();else if(5===t)e.extent=n.readVarint();else if(2===t)e.features.push(n.pos);else if(3===t)e.keys.push(n.readString());else if(4===t){let i=null;const r=n.readVarint()+n.pos;while(n.pos<r)t=n.readVarint()>>3,i=1===t?n.readString():2===t?n.readFloat():3===t?n.readDouble():4===t?n.readVarint64():5===t?n.readVarint():6===t?n.readSVarint():7===t?n.readBoolean():null;e.values.push(i)}}function RA(t,e,n){if(1==t)e.id=n.readVarint();else if(2==t){const t=n.readVarint()+n.pos;while(n.pos<t){const t=e.layer.keys[n.readVarint()],i=e.layer.values[n.readVarint()];e.properties[t]=i}}else 3==t?e.type=n.readVarint():4==t&&(e.geometry=n.pos)}function MA(t,e,n){t.pos=e.features[n];const i=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(RA,r,i),r}function PA(t,e){let n;return 1===t?n=1===e?"Point":"MultiPoint":2===t?n=1===e?"LineString":"MultiLineString":3===t&&(n="Polygon"),n}var NA=IA;class OA{read(t){if(!t)return null;if("string"===typeof t){const e=vs(t);return this.readFromDocument(e)}return gs(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}readFromNode(t){U()}}var kA=OA;const DA="http://www.w3.org/1999/xlink";function UA(t){return t.getAttributeNS(DA,"href")}const QA=[null,"http://www.opengis.net/ows/1.1"],GA=Is(QA,{ServiceIdentification:xs(Ad),ServiceProvider:xs(fd),OperationsMetadata:xs(ud)});class HA extends kA{constructor(){super()}readFromNode(t){const e=Ls({},GA,t,[]);return e||null}}const VA=Is(QA,{DeliveryPoint:xs(Js),City:xs(Js),AdministrativeArea:xs(Js),PostalCode:xs(Js),Country:xs(Js),ElectronicMailAddress:xs(Js)}),jA=Is(QA,{Value:bs(pd)}),WA=Is(QA,{AllowedValues:xs(id)}),zA=Is(QA,{Phone:xs(hd),Address:xs(nd)}),KA=Is(QA,{HTTP:xs(ld)}),qA=Is(QA,{Get:bs(ad),Post:void 0}),$A=Is(QA,{DCP:xs(od)}),XA=Is(QA,{Operation:cd}),YA=Is(QA,{Voice:xs(Js),Facsimile:xs(Js)}),ZA=Is(QA,{Constraint:bs(rd)}),JA=Is(QA,{IndividualName:xs(Js),PositionName:xs(Js),ContactInfo:xs(sd)}),td=Is(QA,{Abstract:xs(Js),AccessConstraints:xs(Js),Fees:xs(Js),Title:xs(Js),ServiceTypeVersion:xs(Js),ServiceType:xs(Js)}),ed=Is(QA,{ProviderName:xs(Js),ProviderSite:xs(UA),ServiceContact:xs(dd)});function nd(t,e){return Ls({},VA,t,e)}function id(t,e){return Ls({},jA,t,e)}function rd(t,e){const n=t.getAttribute("name");if(n)return Ls({name:n},WA,t,e)}function sd(t,e){return Ls({},zA,t,e)}function od(t,e){return Ls({},KA,t,e)}function ad(t,e){const n=UA(t);if(n)return Ls({href:n},ZA,t,e)}function ld(t,e){return Ls({},qA,t,e)}function cd(t,e){const n=t.getAttribute("name"),i=Ls({},$A,t,e);if(!i)return;const r=e[e.length-1];r[n]=i}function ud(t,e){return Ls({},XA,t,e)}function hd(t,e){return Ls({},YA,t,e)}function Ad(t,e){return Ls({},td,t,e)}function dd(t,e){return Ls({},JA,t,e)}function fd(t,e){return Ls({},ed,t,e)}function pd(t,e){return Js(t)}var gd=HA;function md(t,e,n,i,r,s){void 0!==r?s=void 0!==s?s:0:(r=[],s=0);let o=e;while(o<n){const e=t[o++];r[s++]=t[o++],r[s++]=e;for(let n=2;n<i;++n)r[s++]=t[o++]}return r.length=s,r}class vd extends pa{constructor(t){super(),t=t||{},this.dataProjection=gn("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY"}readFeatureFromText(t,e){const n=this.readGeometryFromText(t,e);return new $(n)}readFeaturesFromText(t,e){const n=this.readFeatureFromText(t,e);return[n]}readGeometryFromText(t,e){const n=Kn(this.geometryLayout_),i=wd(t,n,this.factor_);md(i,0,i.length,n,i);const r=vi(i,0,i.length,n),s=new Gi(r,this.geometryLayout_);return mr(s,!1,this.adaptOptions(e))}writeFeatureText(t,e){const n=t.getGeometry();if(n)return this.writeGeometryText(n,e);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(t,e){return this.writeFeatureText(t[0],e)}writeGeometryText(t,e){t=mr(t,!0,this.adaptOptions(e));const n=t.getFlatCoordinates(),i=t.getStride();return md(n,0,n.length,i,n),yd(n,i,this.factor_)}}function yd(t,e,n){let i;n=n||1e5;const r=new Array(e);for(i=0;i<e;++i)r[i]=0;for(let s=0,o=t.length;s<o;)for(i=0;i<e;++i,++s){const e=t[s],n=e-r[i];r[i]=e,t[s]=n}return _d(t,n)}function wd(t,e,n){let i;n=n||1e5;const r=new Array(e);for(i=0;i<e;++i)r[i]=0;const s=bd(t,n);for(let o=0,a=s.length;o<a;)for(i=0;i<e;++i,++o)r[i]+=s[o],s[o]=r[i];return s}function _d(t,e){e=e||1e5;for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e);return xd(t)}function bd(t,e){e=e||1e5;const n=Ed(t);for(let i=0,r=n.length;i<r;++i)n[i]/=e;return n}function xd(t){for(let e=0,n=t.length;e<n;++e){const n=t[e];t[e]=n<0?~(n<<1):n<<1}return Cd(t)}function Ed(t){const e=Sd(t);for(let n=0,i=e.length;n<i;++n){const t=e[n];e[n]=1&t?~(t>>1):t>>1}return e}function Cd(t){let e="";for(let n=0,i=t.length;n<i;++n)e+=Bd(t[n]);return e}function Sd(t){const e=[];let n=0,i=0;for(let r=0,s=t.length;r<s;++r){const s=t.charCodeAt(r)-63;n|=(31&s)<<i,s<32?(e.push(n),n=0,i=0):i+=5}return e}function Bd(t){let e,n="";while(t>=32)e=63+(32|31&t),n+=String.fromCharCode(e),t>>=5;return e=t+63,n+=String.fromCharCode(e),n}var Td=vd;class Id extends Cr{constructor(t){super(),t=t||{},this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.dataProjection=gn(t.dataProjection?t.dataProjection:"EPSG:4326")}readFeaturesFromObject(t,e){if("Topology"==t.type){const n=t;let i,r=null,s=null;n["transform"]&&(i=n["transform"],r=i["scale"],s=i["translate"]);const o=n["arcs"];i&&Qd(o,r,s);const a=[],l=n["objects"],c=this.layerName_;let u;for(const t in l)this.layers_&&!this.layers_.includes(t)||("GeometryCollection"===l[t].type?(u=l[t],a.push.apply(a,Dd(u,o,r,s,c,t,e))):(u=l[t],a.push(Ud(u,o,r,s,c,t,e))));return a}return[]}readProjectionFromObject(t){return this.dataProjection}}const Fd={Point:Rd,LineString:Pd,Polygon:Od,MultiPoint:Md,MultiLineString:Nd,MultiPolygon:kd};function Ld(t,e){const n=[];let i;for(let r=0,s=t.length;r<s;++r)if(i=t[r],r>0&&n.pop(),i>=0){const t=e[i];for(let e=0,i=t.length;e<i;++e)n.push(t[e].slice(0))}else{const t=e[~i];for(let e=t.length-1;e>=0;--e)n.push(t[e].slice(0))}return n}function Rd(t,e,n){const i=t["coordinates"];return e&&n&&Hd(i,e,n),new Wi(i)}function Md(t,e,n){const i=t["coordinates"];if(e&&n)for(let r=0,s=i.length;r<s;++r)Hd(i[r],e,n);return new Ki(i)}function Pd(t,e){const n=Ld(t["arcs"],e);return new Gi(n)}function Nd(t,e){const n=[];for(let i=0,r=t["arcs"].length;i<r;++i)n[i]=Ld(t["arcs"][i],e);return new Vi(n)}function Od(t,e){const n=[];for(let i=0,r=t["arcs"].length;i<r;++i)n[i]=Ld(t["arcs"][i],e);return new rr(n)}function kd(t,e){const n=[];for(let i=0,r=t["arcs"].length;i<r;++i){const r=t["arcs"][i],s=[];for(let t=0,n=r.length;t<n;++t)s[t]=Ld(r[t],e);n[i]=s}return new hr(n)}function Dd(t,e,n,i,r,s,o){const a=t["geometries"],l=[];for(let c=0,u=a.length;c<u;++c)l[c]=Ud(a[c],e,n,i,r,s,o);return l}function Ud(t,e,n,i,r,s,o){let a=null;const l=t.type;if(l){const r=Fd[l];a="Point"===l||"MultiPoint"===l?r(t,n,i):r(t,e),a=mr(a,!1,o)}const c=new $({geometry:a});void 0!==t.id&&c.setId(t.id);let u=t.properties;return r&&(u||(u={}),u[r]=s),u&&c.setProperties(u,!0),c}function Qd(t,e,n){for(let i=0,r=t.length;i<r;++i)Gd(t[i],e,n)}function Gd(t,e,n){let i=0,r=0;for(let s=0,o=t.length;s<o;++s){const o=t[s];i+=o[0],r+=o[1],o[0]=i,o[1]=r,Hd(o,e,n)}}function Hd(t,e,n){t[0]=t[0]*e[0]+n[0],t[1]=t[1]*e[1]+n[1]}var Vd=Id;class jd extends fo{constructor(t){t=t||{},super(t),this.schemaLocation=t.schemaLocation?t.schemaLocation:this.namespace+" http://schemas.opengis.net/gml/3.2.1/gml.xsd"}writeGeometryElement(t,e,n){const i=n[n.length-1];n[n.length-1]=Object.assign({multiCurve:!0,multiSurface:!0},i),super.writeGeometryElement(t,e,n)}}jd.prototype.namespace="http://www.opengis.net/gml/3.2",jd.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml/3.2":{pos:_s(fo.prototype.readFlatPos),posList:_s(fo.prototype.readFlatPosList),coordinates:_s(co.prototype.readFlatCoordinates)}},jd.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml/3.2":{interior:fo.prototype.interiorParser,exterior:fo.prototype.exteriorParser}},jd.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml/3.2":{Point:_s(Vs.prototype.readPoint),MultiPoint:_s(Vs.prototype.readMultiPoint),LineString:_s(Vs.prototype.readLineString),MultiLineString:_s(Vs.prototype.readMultiLineString),LinearRing:_s(Vs.prototype.readLinearRing),Polygon:_s(Vs.prototype.readPolygon),MultiPolygon:_s(Vs.prototype.readMultiPolygon),Surface:_s(jd.prototype.readSurface),MultiSurface:_s(fo.prototype.readMultiSurface),Curve:_s(jd.prototype.readCurve),MultiCurve:_s(fo.prototype.readMultiCurve),Envelope:_s(jd.prototype.readEnvelope)}},jd.prototype.MULTICURVE_PARSERS={"http://www.opengis.net/gml/3.2":{curveMember:ws(fo.prototype.curveMemberParser),curveMembers:ws(fo.prototype.curveMemberParser)}},jd.prototype.MULTISURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{surfaceMember:ws(fo.prototype.surfaceMemberParser),surfaceMembers:ws(fo.prototype.surfaceMemberParser)}},jd.prototype.CURVEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ws(Vs.prototype.readLineString),Curve:ws(fo.prototype.readCurve)}},jd.prototype.SURFACEMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ws(Vs.prototype.readPolygon),Surface:ws(fo.prototype.readSurface)}},jd.prototype.SURFACE_PARSERS={"http://www.opengis.net/gml/3.2":{patches:_s(fo.prototype.readPatch)}},jd.prototype.CURVE_PARSERS={"http://www.opengis.net/gml/3.2":{segments:_s(fo.prototype.readSegment)}},jd.prototype.ENVELOPE_PARSERS={"http://www.opengis.net/gml/3.2":{lowerCorner:ws(fo.prototype.readFlatPosList),upperCorner:ws(fo.prototype.readFlatPosList)}},jd.prototype.PATCHES_PARSERS={"http://www.opengis.net/gml/3.2":{PolygonPatch:_s(fo.prototype.readPolygonPatch)}},jd.prototype.SEGMENTS_PARSERS={"http://www.opengis.net/gml/3.2":{LineStringSegment:ys(fo.prototype.readLineStringSegment)}},jd.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml/3.2":{pointMember:ws(Vs.prototype.pointMemberParser),pointMembers:ws(Vs.prototype.pointMemberParser)}},jd.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml/3.2":{lineStringMember:ws(Vs.prototype.lineStringMemberParser),lineStringMembers:ws(Vs.prototype.lineStringMemberParser)}},jd.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml/3.2":{polygonMember:ws(Vs.prototype.polygonMemberParser),polygonMembers:ws(Vs.prototype.polygonMemberParser)}},jd.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Point:ws(Vs.prototype.readFlatCoordinatesFromNode)}},jd.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{LineString:ws(Vs.prototype.readLineString)}},jd.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml/3.2":{Polygon:ws(Vs.prototype.readPolygon)}},jd.prototype.RING_PARSERS={"http://www.opengis.net/gml/3.2":{LinearRing:_s(Vs.prototype.readFlatLinearRing),Ring:_s(jd.prototype.readFlatCurveRing)}},jd.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml/3.2":{exterior:Es(fo.prototype.writeRing),interior:Es(fo.prototype.writeRing)}},jd.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lowerCorner:Es(so),upperCorner:Es(so)}},jd.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{surfaceMember:Es(fo.prototype.writeSurfaceOrPolygonMember),polygonMember:Es(fo.prototype.writeSurfaceOrPolygonMember)}},jd.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{pointMember:Es(fo.prototype.writePointMember)}},jd.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml/3.2":{lineStringMember:Es(fo.prototype.writeLineStringOrCurveMember),curveMember:Es(fo.prototype.writeLineStringOrCurveMember)}},jd.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml/3.2":{Curve:Es(fo.prototype.writeCurveOrLineString),MultiCurve:Es(fo.prototype.writeMultiCurveOrLineString),Point:Es(jd.prototype.writePoint),MultiPoint:Es(fo.prototype.writeMultiPoint),LineString:Es(fo.prototype.writeCurveOrLineString),MultiLineString:Es(fo.prototype.writeMultiCurveOrLineString),LinearRing:Es(fo.prototype.writeLinearRing),Polygon:Es(fo.prototype.writeSurfaceOrPolygon),MultiPolygon:Es(fo.prototype.writeMultiSurfaceOrPolygon),Surface:Es(fo.prototype.writeSurfaceOrPolygon),MultiSurface:Es(fo.prototype.writeMultiSurfaceOrPolygon),Envelope:Es(fo.prototype.writeEnvelope)}};var Wd=jd;class zd{constructor(t){this.tagName_=t}getTagName(){return this.tagName_}}var Kd=zd;class qd extends Kd{constructor(t,e){super(t),this.conditions=e,z(this.conditions.length>=2,"At least 2 conditions are required")}}var $d=qd;class Xd extends $d{constructor(t){super("And",Array.prototype.slice.call(arguments))}}var Yd=Xd;class Zd extends Kd{constructor(t,e,n){if(super("BBOX"),this.geometryName=t,this.extent=e,4!==e.length)throw new Error("Expected an extent with four values ([minX, minY, maxX, maxY])");this.srsName=n}}var Jd=Zd;function tf(t){const e=[null].concat(Array.prototype.slice.call(arguments));return new(Function.prototype.bind.apply(Yd,e))}function ef(t,e,n){return new Jd(t,e,n)}const nf={"http://www.opengis.net/gml":{boundedBy:xs(Vs.prototype.readExtentElement,"bounds")},"http://www.opengis.net/wfs/2.0":{member:ws(Vs.prototype.readFeaturesInternal)}},rf={"http://www.opengis.net/wfs":{totalInserted:xs(Ys),totalUpdated:xs(Ys),totalDeleted:xs(Ys)},"http://www.opengis.net/wfs/2.0":{totalInserted:xs(Ys),totalUpdated:xs(Ys),totalDeleted:xs(Ys)}},sf={"http://www.opengis.net/wfs":{TransactionSummary:xs(yf,"transactionSummary"),InsertResults:xs(xf,"insertIds")},"http://www.opengis.net/wfs/2.0":{TransactionSummary:xs(yf,"transactionSummary"),InsertResults:xs(xf,"insertIds")}},of={"http://www.opengis.net/wfs":{PropertyName:Es(so)},"http://www.opengis.net/wfs/2.0":{PropertyName:Es(so)}},af={"http://www.opengis.net/wfs":{Insert:Es(Ef),Update:Es(Tf),Delete:Es(Bf),Property:Es(If),Native:Es(Ff)},"http://www.opengis.net/wfs/2.0":{Insert:Es(Ef),Update:Es(Tf),Delete:Es(Bf),Property:Es(If),Native:Es(Ff)}},lf="feature",cf="http://www.w3.org/2000/xmlns/",uf={"2.0.0":"http://www.opengis.net/ogc/1.1","1.1.0":"http://www.opengis.net/ogc","1.0.0":"http://www.opengis.net/ogc"},hf={"2.0.0":"http://www.opengis.net/wfs/2.0","1.1.0":"http://www.opengis.net/wfs","1.0.0":"http://www.opengis.net/wfs"},Af={"2.0.0":"http://www.opengis.net/fes/2.0","1.1.0":"http://www.opengis.net/fes","1.0.0":"http://www.opengis.net/fes"},df={"2.0.0":"http://www.opengis.net/wfs/2.0 http://schemas.opengis.net/wfs/2.0/wfs.xsd","1.1.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.1.0/wfs.xsd","1.0.0":"http://www.opengis.net/wfs http://schemas.opengis.net/wfs/1.0.0/wfs.xsd"},ff={"2.0.0":Wd,"1.1.0":fo,"1.0.0":co},pf="1.1.0";class gf extends Us{constructor(t){super(),t=t||{},this.version_=t.version?t.version:pf,this.featureType_=t.featureType,this.featureNS_=t.featureNS,this.gmlFormat_=t.gmlFormat?t.gmlFormat:new ff[this.version_],this.schemaLocation_=t.schemaLocation?t.schemaLocation:df[this.version_]}getFeatureType(){return this.featureType_}setFeatureType(t){this.featureType_=t}readFeaturesFromNode(t,e){const n={node:t};Object.assign(n,{featureType:this.featureType_,featureNS:this.featureNS_}),Object.assign(n,this.getReadOptions(t,e||{}));const i=[n];let r;r="2.0.0"===this.version_?nf:this.gmlFormat_.FEATURE_COLLECTION_PARSERS;let s=Ls([],r,t,i,this.gmlFormat_);return s||(s=[]),s}readTransactionResponse(t){if(t){if("string"===typeof t){const e=vs(t);return this.readTransactionResponseFromDocument(e)}return gs(t)?this.readTransactionResponseFromDocument(t):this.readTransactionResponseFromNode(t)}}readFeatureCollectionMetadata(t){if(t){if("string"===typeof t){const e=vs(t);return this.readFeatureCollectionMetadataFromDocument(e)}return gs(t)?this.readFeatureCollectionMetadataFromDocument(t):this.readFeatureCollectionMetadataFromNode(t)}}readFeatureCollectionMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFeatureCollectionMetadataFromNode(e)}readFeatureCollectionMetadataFromNode(t){const e={},n=Zs(t.getAttribute("numberOfFeatures"));return e["numberOfFeatures"]=n,Ls(e,nf,t,[],this.gmlFormat_)}readTransactionResponseFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readTransactionResponseFromNode(e)}readTransactionResponseFromNode(t){return Ls({},sf,t,[])}writeGetFeature(t){const e=ds(hf[this.version_],"GetFeature");e.setAttribute("service","WFS"),e.setAttribute("version",this.version_),t.handle&&e.setAttribute("handle",t.handle),t.outputFormat&&e.setAttribute("outputFormat",t.outputFormat),void 0!==t.maxFeatures&&e.setAttribute("maxFeatures",String(t.maxFeatures)),t.resultType&&e.setAttribute("resultType",t.resultType),void 0!==t.startIndex&&e.setAttribute("startIndex",String(t.startIndex)),void 0!==t.count&&e.setAttribute("count",String(t.count)),void 0!==t.viewParams&&e.setAttribute("viewParams",t.viewParams),e.setAttributeNS(As,"xsi:schemaLocation",this.schemaLocation_);const n={node:e};if(Object.assign(n,{version:this.version_,srsName:t.srsName,featureNS:t.featureNS?t.featureNS:this.featureNS_,featurePrefix:t.featurePrefix,propertyNames:t.propertyNames?t.propertyNames:[]}),z(Array.isArray(t.featureTypes),"`options.featureTypes` must be an Array"),"string"===typeof t.featureTypes[0]){let i=t.filter;t.bbox&&(z(t.geometryName,"`options.geometryName` must also be provided when `options.bbox` is set"),i=this.combineBboxAndFilter(t.geometryName,t.bbox,t.srsName,i)),Object.assign(n,{geometryName:t.geometryName,filter:i}),$f(e,t.featureTypes,[n])}else t.featureTypes.forEach((i=>{const r=this.combineBboxAndFilter(i.geometryName,i.bbox,t.srsName,t.filter);Object.assign(n,{geometryName:i.geometryName,filter:r}),$f(e,[i.name],[n])}));return e}combineBboxAndFilter(t,e,n,i){const r=ef(t,e,n);return i?tf(i,r):r}writeTransaction(t,e,n,i){const r=[],s=i.version?i.version:this.version_,o=ds(hf[s],"Transaction");let a;o.setAttribute("service","WFS"),o.setAttribute("version",s),i&&(a=i.gmlOptions?i.gmlOptions:{},i.handle&&o.setAttribute("handle",i.handle)),o.setAttributeNS(As,"xsi:schemaLocation",df[s]);const l=mf(o,a,s,i);return t&&vf("Insert",t,r,l),e&&vf("Update",e,r,l),n&&vf("Delete",n,r,l),i.nativeElements&&vf("Native",i.nativeElements,r,l),o}readProjectionFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readProjectionFromNode(e);return null}readProjectionFromNode(t){if(t.firstElementChild&&t.firstElementChild.firstElementChild){t=t.firstElementChild.firstElementChild;for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(0!==e.childNodes.length&&(1!==e.childNodes.length||3!==e.firstChild.nodeType)){const t=[{}];return this.gmlFormat_.readGeometryElement(e,t),gn(t.pop().srsName)}}return null}}function mf(t,e,n,i){const r=i.featurePrefix?i.featurePrefix:lf;let s;"1.0.0"===n?s=2:"1.1.0"===n?s=3:"2.0.0"===n&&(s=3.2);const o=Object.assign({node:t},{version:n,featureNS:i.featureNS,featureType:i.featureType,featurePrefix:r,gmlVersion:s,hasZ:i.hasZ,srsName:i.srsName},e);return o}function vf(t,e,n,i){Ms(i,af,Ss(t),e,n)}function yf(t,e){return Ls({},rf,t,e)}const wf={"http://www.opengis.net/ogc":{FeatureId:ws((function(t,e){return t.getAttribute("fid")}))},"http://www.opengis.net/ogc/1.1":{FeatureId:ws((function(t,e){return t.getAttribute("fid")}))}};function _f(t,e){Fs(wf,t,e)}const bf={"http://www.opengis.net/wfs":{Feature:_f},"http://www.opengis.net/wfs/2.0":{Feature:_f}};function xf(t,e){return Ls([],bf,t,e)}function Ef(t,e,n){const i=n[n.length-1],r=i["featureType"],s=i["featureNS"],o=i["gmlVersion"],a=ds(s,r);t.appendChild(a),2===o?co.prototype.writeFeatureElement(a,e,n):3===o?fo.prototype.writeFeatureElement(a,e,n):Wd.prototype.writeFeatureElement(a,e,n)}function Cf(t,e,n){const i=n[n.length-1],r=i["version"],s=uf[r],o=ds(s,"Filter"),a=ds(s,"FeatureId");o.appendChild(a),a.setAttribute("fid",e),t.appendChild(o)}function Sf(t,e){t=t||lf;const n=t+":";return e.startsWith(n)?e:n+e}function Bf(t,e,n){const i=n[n.length-1];z(void 0!==e.getId(),"Features must have an id set");const r=i["featureType"],s=i["featurePrefix"],o=i["featureNS"],a=Sf(s,r);t.setAttribute("typeName",a),t.setAttributeNS(cf,"xmlns:"+s,o);const l=e.getId();void 0!==l&&Cf(t,l,n)}function Tf(t,e,n){const i=n[n.length-1];z(void 0!==e.getId(),"Features must have an id set");const r=i["version"],s=i["featureType"],o=i["featurePrefix"],a=i["featureNS"],l=Sf(o,s),c=e.getGeometryName();t.setAttribute("typeName",l),t.setAttributeNS(cf,"xmlns:"+o,a);const u=e.getId();if(void 0!==u){const s=e.getKeys(),o=[];for(let t=0,n=s.length;t<n;t++){const n=e.get(s[t]);if(void 0!==n){let e=s[t];n&&"function"===typeof n.getSimplifiedGeometry&&(e=c),o.push({name:e,value:n})}}Ms({version:r,gmlVersion:i["gmlVersion"],node:t,hasZ:i["hasZ"],srsName:i["srsName"]},af,Ss("Property"),o,n),Cf(t,u,n)}}function If(t,e,n){const i=n[n.length-1],r=i["version"],s=hf[r],o="2.0.0"===r?"ValueReference":"Name",a=ds(s,o),l=i["gmlVersion"];if(t.appendChild(a),so(a,e.name),void 0!==e.value&&null!==e.value){const i=ds(s,"Value");t.appendChild(i),e.value&&"function"===typeof e.value.getSimplifiedGeometry?2===l?co.prototype.writeGeometryElement(i,e.value,n):3===l?fo.prototype.writeGeometryElement(i,e.value,n):Wd.prototype.writeGeometryElement(i,e.value,n):so(i,e.value)}}function Ff(t,e,n){e.vendorId&&t.setAttribute("vendorId",e.vendorId),void 0!==e.safeToIgnore&&t.setAttribute("safeToIgnore",String(e.safeToIgnore)),void 0!==e.value&&so(t,e.value)}const Lf={"http://www.opengis.net/wfs":{Query:Es(Rf)},"http://www.opengis.net/wfs/2.0":{Query:Es(Rf)},"http://www.opengis.net/ogc":{During:Es(Df),And:Es(Uf),Or:Es(Uf),Not:Es(Qf),BBOX:Es(Pf),Contains:Es(Of),Intersects:Es(Of),Within:Es(Of),DWithin:Es(kf),PropertyIsEqualTo:Es(Gf),PropertyIsNotEqualTo:Es(Gf),PropertyIsLessThan:Es(Gf),PropertyIsLessThanOrEqualTo:Es(Gf),PropertyIsGreaterThan:Es(Gf),PropertyIsGreaterThanOrEqualTo:Es(Gf),PropertyIsNull:Es(Hf),PropertyIsBetween:Es(Vf),PropertyIsLike:Es(jf)},"http://www.opengis.net/fes/2.0":{During:Es(Df),And:Es(Uf),Or:Es(Uf),Not:Es(Qf),BBOX:Es(Pf),Contains:Es(Of),Disjoint:Es(Of),Intersects:Es(Of),ResourceId:Es(Nf),Within:Es(Of),DWithin:Es(kf),PropertyIsEqualTo:Es(Gf),PropertyIsNotEqualTo:Es(Gf),PropertyIsLessThan:Es(Gf),PropertyIsLessThanOrEqualTo:Es(Gf),PropertyIsGreaterThan:Es(Gf),PropertyIsGreaterThanOrEqualTo:Es(Gf),PropertyIsNull:Es(Hf),PropertyIsBetween:Es(Vf),PropertyIsLike:Es(jf)}};function Rf(t,e,n){const i=n[n.length-1],r=i["version"],s=i["featurePrefix"],o=i["featureNS"],a=i["propertyNames"],l=i["srsName"];let c,u;c=s?Sf(s,e):e,u="2.0.0"===r?"typeNames":"typeName",t.setAttribute(u,c),l&&t.setAttribute("srsName",l),o&&t.setAttributeNS(cf,"xmlns:"+s,o);const h=Object.assign({},i);h.node=t,Ms(h,of,Ss("PropertyName"),a,n);const A=i["filter"];if(A){const e=ds(Xf(r),"Filter");t.appendChild(e),Mf(e,A,n)}}function Mf(t,e,n){const i=n[n.length-1],r={node:t};Object.assign(r,{context:i}),Ms(r,Lf,Ss(e.getTagName()),[e],n)}function Pf(t,e,n){const i=n[n.length-1],r=i["context"],s=r["version"];i["srsName"]=e.srsName;const o=ff[s];Kf(s,t,e.geometryName),o.prototype.writeGeometryElement(t,e.extent,n)}function Nf(t,e,n){t.setAttribute("rid",e.rid)}function Of(t,e,n){const i=n[n.length-1],r=i["context"],s=r["version"];i["srsName"]=e.srsName;const o=ff[s];Kf(s,t,e.geometryName),o.prototype.writeGeometryElement(t,e.geometry,n)}function kf(t,e,n){const i=n[n.length-1],r=i["context"],s=r["version"];Of(t,e,n);const o=ds(Xf(s),"Distance");so(o,e.distance.toString()),"2.0.0"===s?o.setAttribute("uom",e.unit):o.setAttribute("units",e.unit),t.appendChild(o)}function Df(t,e,n){const i=n[n.length-1],r=i["context"],s=r["version"];Wf(Af[s],"ValueReference",t,e.propertyName);const o=ds(Qs,"TimePeriod");t.appendChild(o);const a=ds(Qs,"begin");o.appendChild(a),qf(a,e.begin);const l=ds(Qs,"end");o.appendChild(l),qf(l,e.end)}function Uf(t,e,n){const i=n[n.length-1],r=i["context"],s={node:t};Object.assign(s,{context:r});const o=e.conditions;for(let a=0,l=o.length;a<l;++a){const t=o[a];Ms(s,Lf,Ss(t.getTagName()),[t],n)}}function Qf(t,e,n){const i=n[n.length-1],r=i["context"],s={node:t};Object.assign(s,{context:r});const o=e.condition;Ms(s,Lf,Ss(o.getTagName()),[o],n)}function Gf(t,e,n){const i=n[n.length-1],r=i["context"],s=r["version"];void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Kf(s,t,e.propertyName),zf(s,t,""+e.expression)}function Hf(t,e,n){const i=n[n.length-1],r=i["context"],s=r["version"];Kf(s,t,e.propertyName)}function Vf(t,e,n){const i=n[n.length-1],r=i["context"],s=r["version"],o=Xf(s);Kf(s,t,e.propertyName);const a=ds(o,"LowerBoundary");t.appendChild(a),zf(s,a,""+e.lowerBoundary);const l=ds(o,"UpperBoundary");t.appendChild(l),zf(s,l,""+e.upperBoundary)}function jf(t,e,n){const i=n[n.length-1],r=i["context"],s=r["version"];t.setAttribute("wildCard",e.wildCard),t.setAttribute("singleChar",e.singleChar),t.setAttribute("escapeChar",e.escapeChar),void 0!==e.matchCase&&t.setAttribute("matchCase",e.matchCase.toString()),Kf(s,t,e.propertyName),zf(s,t,""+e.pattern)}function Wf(t,e,n,i){const r=ds(t,e);so(r,i),n.appendChild(r)}function zf(t,e,n){Wf(Xf(t),"Literal",e,n)}function Kf(t,e,n){"2.0.0"===t?Wf(Af[t],"ValueReference",e,n):Wf(uf[t],"PropertyName",e,n)}function qf(t,e){const n=ds(Qs,"TimeInstant");t.appendChild(n);const i=ds(Qs,"timePosition");n.appendChild(i),so(i,e)}function $f(t,e,n){const i=n[n.length-1],r=Object.assign({},i);r.node=t,Ms(r,Lf,Ss("Query"),e,n)}function Xf(t){let e;return e="2.0.0"===t?Af[t]:uf[t],e}var Yf=gf;const Zf={POINT:1,LINE_STRING:2,POLYGON:3,MULTI_POINT:4,MULTI_LINE_STRING:5,MULTI_POLYGON:6,GEOMETRY_COLLECTION:7,POLYHEDRAL_SURFACE:15,TIN:16,TRIANGLE:17};class Jf{constructor(t){this.view_=t,this.pos_=0,this.initialized_=!1,this.isLittleEndian_=!1,this.hasZ_=!1,this.hasM_=!1,this.srid_=null,this.layout_="XY"}readUint8(){return this.view_.getUint8(this.pos_++)}readUint32(t){return this.view_.getUint32((this.pos_+=4)-4,void 0!==t?t:this.isLittleEndian_)}readDouble(t){return this.view_.getFloat64((this.pos_+=8)-8,void 0!==t?t:this.isLittleEndian_)}readPoint(){const t=[];return t.push(this.readDouble()),t.push(this.readDouble()),this.hasZ_&&t.push(this.readDouble()),this.hasM_&&t.push(this.readDouble()),t}readLineString(){const t=this.readUint32(),e=[];for(let n=0;n<t;n++)e.push(this.readPoint());return e}readPolygon(){const t=this.readUint32(),e=[];for(let n=0;n<t;n++)e.push(this.readLineString());return e}readWkbHeader(t){const e=this.readUint8(),n=e>0,i=this.readUint32(n),r=Math.floor((268435455&i)/1e3),s=Boolean(2147483648&i)||1===r||3===r,o=Boolean(1073741824&i)||2===r||3===r,a=Boolean(536870912&i),l=(268435455&i)%1e3,c=["XY",s?"Z":"",o?"M":""].join(""),u=a?this.readUint32(n):null;if(void 0!==t&&t!==l)throw new Error("Unexpected WKB geometry type "+l);if(this.initialized_){if(this.isLittleEndian_!==n)throw new Error("Inconsistent endian");if(this.layout_!==c)throw new Error("Inconsistent geometry layout");if(u&&this.srid_!==u)throw new Error("Inconsistent coordinate system (SRID)")}else this.isLittleEndian_=n,this.hasZ_=s,this.hasM_=o,this.layout_=c,this.srid_=u,this.initialized_=!0;return l}readWkbPayload(t){switch(t){case Zf.POINT:return this.readPoint();case Zf.LINE_STRING:return this.readLineString();case Zf.POLYGON:case Zf.TRIANGLE:return this.readPolygon();case Zf.MULTI_POINT:return this.readMultiPoint();case Zf.MULTI_LINE_STRING:return this.readMultiLineString();case Zf.MULTI_POLYGON:case Zf.POLYHEDRAL_SURFACE:case Zf.TIN:return this.readMultiPolygon();case Zf.GEOMETRY_COLLECTION:return this.readGeometryCollection();default:throw new Error("Unsupported WKB geometry type "+t+" is found")}}readWkbBlock(t){return this.readWkbPayload(this.readWkbHeader(t))}readWkbCollection(t,e){const n=this.readUint32(),i=[];for(let r=0;r<n;r++){const n=t.call(this,e);n&&i.push(n)}return i}readMultiPoint(){return this.readWkbCollection(this.readWkbBlock,Zf.POINT)}readMultiLineString(){return this.readWkbCollection(this.readWkbBlock,Zf.LINE_STRING)}readMultiPolygon(){return this.readWkbCollection(this.readWkbBlock,Zf.POLYGON)}readGeometryCollection(){return this.readWkbCollection(this.readGeometry)}readGeometry(){const t=this.readWkbHeader(),e=this.readWkbPayload(t);switch(t){case Zf.POINT:return new Wi(e,this.layout_);case Zf.LINE_STRING:return new Gi(e,this.layout_);case Zf.POLYGON:case Zf.TRIANGLE:return new rr(e,this.layout_);case Zf.MULTI_POINT:return new Ki(e,this.layout_);case Zf.MULTI_LINE_STRING:return new Vi(e,this.layout_);case Zf.MULTI_POLYGON:case Zf.POLYHEDRAL_SURFACE:case Zf.TIN:return new hr(e,this.layout_);case Zf.GEOMETRY_COLLECTION:return new ri(e);default:return null}}getSrid(){return this.srid_}}class tp{constructor(t){t=t||{},this.layout_=t.layout,this.isLittleEndian_=!1!==t.littleEndian,this.isEWKB_=!1!==t.ewkb,this.writeQueue_=[],this.nodata_=Object.assign({X:0,Y:0,Z:0,M:0},t.nodata)}writeUint8(t){this.writeQueue_.push([1,t])}writeUint32(t){this.writeQueue_.push([4,t])}writeDouble(t){this.writeQueue_.push([8,t])}writePoint(t,e){const n=Object.assign.apply(null,e.split("").map(((e,n)=>({[e]:t[n]}))));for(const i of this.layout_)this.writeDouble(i in n?n[i]:this.nodata_[i])}writeLineString(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writePoint(t[n],e)}writePolygon(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeLineString(t[n],e)}writeWkbHeader(t,e){t%=1e3,this.layout_.includes("Z")&&(t+=this.isEWKB_?2147483648:1e3),this.layout_.includes("M")&&(t+=this.isEWKB_?1073741824:2e3),this.isEWKB_&&Number.isInteger(e)&&(t|=536870912),this.writeUint8(this.isLittleEndian_?1:0),this.writeUint32(t),this.isEWKB_&&Number.isInteger(e)&&this.writeUint32(e)}writeMultiPoint(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(1),this.writePoint(t[n],e)}writeMultiLineString(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(2),this.writeLineString(t[n],e)}writeMultiPolygon(t,e){this.writeUint32(t.length);for(let n=0;n<t.length;n++)this.writeWkbHeader(3),this.writePolygon(t[n],e)}writeGeometryCollection(t){this.writeUint32(t.length);for(let e=0;e<t.length;e++)this.writeGeometry(t[e])}findMinimumLayout(t,e="XYZM"){const n=(t,e)=>t===e?t:"XYZM"===t?e:"XYZM"===e?t:"XY";if(t instanceof $n)return n(t.getLayout(),e);if(t instanceof ri){const n=t.getGeometriesArray();for(let t=0;t<n.length&&"XY"!==e;t++)e=this.findMinimumLayout(n[t],e)}return e}writeGeometry(t,e){const n={Point:Zf.POINT,LineString:Zf.LINE_STRING,Polygon:Zf.POLYGON,MultiPoint:Zf.MULTI_POINT,MultiLineString:Zf.MULTI_LINE_STRING,MultiPolygon:Zf.MULTI_POLYGON,GeometryCollection:Zf.GEOMETRY_COLLECTION},i=t.getType(),r=n[i];if(!r)throw new Error("GeometryType "+i+" is not supported");if(this.layout_||(this.layout_=this.findMinimumLayout(t)),this.writeWkbHeader(r,e),t instanceof $n){const e={Point:this.writePoint,LineString:this.writeLineString,Polygon:this.writePolygon,MultiPoint:this.writeMultiPoint,MultiLineString:this.writeMultiLineString,MultiPolygon:this.writeMultiPolygon};e[i].call(this,t.getCoordinates(),t.getLayout())}else t instanceof ri&&this.writeGeometryCollection(t.getGeometriesArray())}getBuffer(){const t=this.writeQueue_.reduce(((t,e)=>t+e[0]),0),e=new ArrayBuffer(t),n=new DataView(e);let i=0;return this.writeQueue_.forEach((t=>{switch(t[0]){case 1:n.setUint8(i,t[1]);break;case 4:n.setUint32(i,t[1],this.isLittleEndian_);break;case 8:n.setFloat64(i,t[1],this.isLittleEndian_);break;default:break}i+=t[0]})),e}}class ep extends gr{constructor(t){super(),t=t||{},this.splitCollection=Boolean(t.splitCollection),this.viewCache_=null,this.hex_=!1!==t.hex,this.littleEndian_=!1!==t.littleEndian,this.ewkb_=!1!==t.ewkb,this.layout_=t.geometryLayout,this.nodataZ_=t.nodataZ||0,this.nodataM_=t.nodataM||0,this.srid_=t.srid}getType(){return this.hex_?"text":"arraybuffer"}readFeature(t,e){return new $({geometry:this.readGeometry(t,e)})}readFeatures(t,e){let n=[];const i=this.readGeometry(t,e);return n=this.splitCollection&&i instanceof ri?i.getGeometriesArray():[i],n.map((t=>new $({geometry:t})))}readGeometry(t,e){const n=rp(t);if(!n)return null;const i=new Jf(n),r=i.readGeometry();return this.viewCache_=n,e=this.getReadOptions(t,e),this.viewCache_=null,mr(r,!1,e)}readProjection(t){const e=this.viewCache_||rp(t);if(!e)return;const n=new Jf(e);return n.readWkbHeader(),n.getSrid()&&gn("EPSG:"+n.getSrid())||void 0}writeFeature(t,e){return this.writeGeometry(t.getGeometry(),e)}writeFeatures(t,e){return this.writeGeometry(new ri(t.map((t=>t.getGeometry()))),e)}writeGeometry(t,e){e=this.adaptOptions(e);const n=new tp({layout:this.layout_,littleEndian:this.littleEndian_,ewkb:this.ewkb_,nodata:{Z:this.nodataZ_,M:this.nodataM_}});let i=Number.isInteger(this.srid_)?Number(this.srid_):null;if(!1!==this.srid_&&!Number.isInteger(this.srid_)){const t=e.dataProjection&&gn(e.dataProjection);if(t){const e=t.getCode();e.startsWith("EPSG:")&&(i=Number(e.substring(5)))}}n.writeGeometry(mr(t,!0,e),i);const r=n.getBuffer();return this.hex_?np(r):r}}function np(t){const e=new Uint8Array(t);return Array.from(e.values()).map((t=>(t<16?"0":"")+Number(t).toString(16).toUpperCase())).join("")}function ip(t){const e=new Uint8Array(t.length/2);for(let n=0;n<t.length/2;n++)e[n]=parseInt(t.substr(2*n,2),16);return new DataView(e.buffer)}function rp(t){return"string"===typeof t?ip(t):ArrayBuffer.isView(t)?t instanceof DataView?t:new DataView(t.buffer,t.byteOffset,t.byteLength):t instanceof ArrayBuffer?new DataView(t):null}var sp=ep;const op={POINT:Wi,LINESTRING:Gi,POLYGON:rr,MULTIPOINT:Ki,MULTILINESTRING:Vi,MULTIPOLYGON:hr},ap="EMPTY",lp="Z",cp="M",up="ZM",hp={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},Ap={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class dp{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return e=void 0!==e&&e,t>="0"&&t<="9"||"."==t&&!e}isWhiteSpace_(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let n,i=t;if("("==t)n=hp.LEFT_PAREN;else if(","==t)n=hp.COMMA;else if(")"==t)n=hp.RIGHT_PAREN;else if(this.isNumeric_(t)||"-"==t)n=hp.NUMBER,i=this.readNumber_();else if(this.isAlpha_(t))n=hp.TEXT,i=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);n=hp.EOF}return{position:e,value:i,type:n}}readNumber_(){let t;const e=this.index_;let n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class fp{constructor(t){this.lexer_=t,this.token_={position:0,type:hp.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY";const e=this.token_;if(this.isTokenType(hp.TEXT)){const n=e.value;n===lp?t="XYZ":n===cp?t="XYM":n===up&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(hp.LEFT_PAREN)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(hp.COMMA));if(this.match(hp.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(hp.LEFT_PAREN)){const t=this.parsePoint_();if(this.match(hp.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(hp.LEFT_PAREN)){const t=this.parsePointList_();if(this.match(hp.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(hp.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(hp.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(hp.LEFT_PAREN)){let t;if(t=this.token_.type==hp.LEFT_PAREN?this.parsePointTextList_():this.parsePointList_(),this.match(hp.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(hp.LEFT_PAREN)){const t=this.parseLineStringTextList_();if(this.match(hp.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(hp.LEFT_PAREN)){const t=this.parsePolygonTextList_();if(this.match(hp.RIGHT_PAREN))return t}throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let n=0;n<e;++n){const e=this.token_;if(!this.match(hp.NUMBER))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];while(this.match(hp.COMMA))t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];while(this.match(hp.COMMA))t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];while(this.match(hp.COMMA))t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];while(this.match(hp.COMMA))t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(hp.TEXT)&&this.token_.value==ap;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.token_;if(this.match(hp.TEXT)){const e=t.value;this.layout_=this.parseGeometryLayout_();const n=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==e){if(n)return new ri([]);const t=this.parseGeometryCollectionText_();return new ri(t)}const i=op[e];if(!i)throw new Error("Invalid geometry type: "+e);let r;if(n)r="POINT"==e?[NaN,NaN]:[];else switch(e){case"POINT":r=this.parsePointText_();break;case"LINESTRING":r=this.parseLineStringText_();break;case"POLYGON":r=this.parsePolygonText_();break;case"MULTIPOINT":r=this.parseMultiPointText_();break;case"MULTILINESTRING":r=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":r=this.parseMultiPolygonText_();break;default:break}return new i(r,this.layout_)}throw new Error(this.formatErrorMessage_())}}class pp extends pa{constructor(t){super(),t=t||{},this.splitCollection_=void 0!==t.splitCollection&&t.splitCollection}parse_(t){const e=new dp(t),n=new fp(e);return n.parse()}readFeatureFromText(t,e){const n=this.readGeometryFromText(t,e),i=new $;return i.setGeometry(n),i}readFeaturesFromText(t,e){let n=[];const i=this.readGeometryFromText(t,e);n=this.splitCollection_&&"GeometryCollection"==i.getType()?i.getGeometriesArray():[i];const r=[];for(let s=0,o=n.length;s<o;++s){const t=new $;t.setGeometry(n[s]),r.push(t)}return r}readGeometryFromText(t,e){const n=this.parse_(t);return mr(n,!1,e)}writeFeatureText(t,e){const n=t.getGeometry();return n?this.writeGeometryText(n,e):""}writeFeaturesText(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);const n=[];for(let r=0,s=t.length;r<s;++r)n.push(t[r].getGeometry());const i=new ri(n);return this.writeGeometryText(i,e)}writeGeometryText(t,e){return Cp(mr(t,!0,e))}}function gp(t){const e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function mp(t){const e=[],n=t.getPoints();for(let i=0,r=n.length;i<r;++i)e.push("("+gp(n[i])+")");return e.join(",")}function vp(t){const e=[],n=t.getGeometries();for(let i=0,r=n.length;i<r;++i)e.push(Cp(n[i]));return e.join(",")}function yp(t){const e=t.getCoordinates(),n=[];for(let i=0,r=e.length;i<r;++i)n.push(e[i].join(" "));return n.join(",")}function wp(t){const e=[],n=t.getLineStrings();for(let i=0,r=n.length;i<r;++i)e.push("("+yp(n[i])+")");return e.join(",")}function _p(t){const e=[],n=t.getLinearRings();for(let i=0,r=n.length;i<r;++i)e.push("("+yp(n[i])+")");return e.join(",")}function bp(t){const e=[],n=t.getPolygons();for(let i=0,r=n.length;i<r;++i)e.push("("+_p(n[i])+")");return e.join(",")}function xp(t){const e=t.getLayout();let n="";return"XYZ"!==e&&"XYZM"!==e||(n+=lp),"XYM"!==e&&"XYZM"!==e||(n+=cp),n}const Ep={Point:gp,LineString:yp,Polygon:_p,MultiPoint:mp,MultiLineString:wp,MultiPolygon:bp,GeometryCollection:vp};function Cp(t){const e=t.getType(),n=Ep[e],i=n(t);let r=Ap[e];if("function"===typeof t.getFlatCoordinates){const e=xp(t);e.length>0&&(r+=" "+e)}return 0===i.length?r+" "+ap:r+"("+i+")"}var Sp=pp;const Bp=[null,"http://www.opengis.net/wms"],Tp=Is(Bp,{Service:xs(Xp),Capability:xs($p)}),Ip=Is(Bp,{Request:xs(sg),Exception:xs(tg),Layer:xs(eg)});class Fp extends kA{constructor(){super(),this.version=void 0}readFromNode(t){this.version=t.getAttribute("version").trim();const e=Ls({version:this.version},Tp,t,[]);return e||null}}const Lp=Is(Bp,{Name:xs(Js),Title:xs(Js),Abstract:xs(Js),KeywordList:xs(dg),OnlineResource:xs(UA),ContactInformation:xs(Yp),Fees:xs(Js),AccessConstraints:xs(Js),LayerLimit:xs(Ys),MaxWidth:xs(Ys),MaxHeight:xs(Ys)}),Rp=Is(Bp,{ContactPersonPrimary:xs(Zp),ContactPosition:xs(Js),ContactAddress:xs(Jp),ContactVoiceTelephone:xs(Js),ContactFacsimileTelephone:xs(Js),ContactElectronicMailAddress:xs(Js)}),Mp=Is(Bp,{ContactPerson:xs(Js),ContactOrganization:xs(Js)}),Pp=Is(Bp,{AddressType:xs(Js),Address:xs(Js),City:xs(Js),StateOrProvince:xs(Js),PostCode:xs(Js),Country:xs(Js)}),Np=Is(Bp,{Format:ws(Js)}),Op=Is(Bp,{Name:xs(Js),Title:xs(Js),Abstract:xs(Js),KeywordList:xs(dg),CRS:bs(Js),EX_GeographicBoundingBox:xs(qp),BoundingBox:bs(Kp),Dimension:bs(ig),Attribution:xs(zp),AuthorityURL:bs(ug),Identifier:bs(Js),MetadataURL:bs(hg),DataURL:bs(rg),FeatureListURL:bs(rg),Style:bs(Ag),MinScaleDenominator:xs($s),MaxScaleDenominator:xs($s),Layer:bs(ng)}),kp=Is(Bp,{Title:xs(Js),OnlineResource:xs(UA),LogoURL:xs(cg)}),Dp=Is(Bp,{westBoundLongitude:xs($s),eastBoundLongitude:xs($s),southBoundLatitude:xs($s),northBoundLatitude:xs($s)}),Up=Is(Bp,{GetCapabilities:xs(lg),GetMap:xs(lg),GetFeatureInfo:xs(lg)}),Qp=Is(Bp,{Format:bs(Js),DCPType:bs(og)}),Gp=Is(Bp,{HTTP:xs(ag)}),Hp=Is(Bp,{Get:xs(rg),Post:xs(rg)}),Vp=Is(Bp,{Name:xs(Js),Title:xs(Js),Abstract:xs(Js),LegendURL:bs(cg),StyleSheetURL:xs(rg),StyleURL:xs(rg)}),jp=Is(Bp,{Format:xs(Js),OnlineResource:xs(UA)}),Wp=Is(Bp,{Keyword:ws(Js)});function zp(t,e){return Ls({},kp,t,e)}function Kp(t,e){const n=[Xs(t.getAttribute("minx")),Xs(t.getAttribute("miny")),Xs(t.getAttribute("maxx")),Xs(t.getAttribute("maxy"))],i=[Xs(t.getAttribute("resx")),Xs(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:n,res:i}}function qp(t,e){const n=Ls({},Dp,t,e);if(!n)return;const i=n["westBoundLongitude"],r=n["southBoundLatitude"],s=n["eastBoundLongitude"],o=n["northBoundLatitude"];return void 0!==i&&void 0!==r&&void 0!==s&&void 0!==o?[i,r,s,o]:void 0}function $p(t,e){return Ls({},Ip,t,e)}function Xp(t,e){return Ls({},Lp,t,e)}function Yp(t,e){return Ls({},Rp,t,e)}function Zp(t,e){return Ls({},Mp,t,e)}function Jp(t,e){return Ls({},Pp,t,e)}function tg(t,e){return Ls([],Np,t,e)}function eg(t,e){const n=Ls({},Op,t,e);return void 0===n["Layer"]?Object.assign(n,ng(t,e)):n}function ng(t,e){const n=e[e.length-1],i=Ls({},Op,t,e);if(!i)return;let r=Ks(t.getAttribute("queryable"));void 0===r&&(r=n["queryable"]),i["queryable"]=void 0!==r&&r;let s=Zs(t.getAttribute("cascaded"));void 0===s&&(s=n["cascaded"]),i["cascaded"]=s;let o=Ks(t.getAttribute("opaque"));void 0===o&&(o=n["opaque"]),i["opaque"]=void 0!==o&&o;let a=Ks(t.getAttribute("noSubsets"));void 0===a&&(a=n["noSubsets"]),i["noSubsets"]=void 0!==a&&a;let l=Xs(t.getAttribute("fixedWidth"));l||(l=n["fixedWidth"]),i["fixedWidth"]=l;let c=Xs(t.getAttribute("fixedHeight"));c||(c=n["fixedHeight"]),i["fixedHeight"]=c;const u=["Style","CRS","AuthorityURL"];u.forEach((function(t){if(t in n){const e=i[t]||[];i[t]=e.concat(n[t])}}));const h=["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"];return h.forEach((function(t){if(!(t in i)){const e=n[t];i[t]=e}})),i}function ig(t,e){const n={name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:Ks(t.getAttribute("multipleValues")),nearestValue:Ks(t.getAttribute("nearestValue")),current:Ks(t.getAttribute("current")),values:Js(t)};return n}function rg(t,e){return Ls({},jp,t,e)}function sg(t,e){return Ls({},Up,t,e)}function og(t,e){return Ls({},Gp,t,e)}function ag(t,e){return Ls({},Hp,t,e)}function lg(t,e){return Ls({},Qp,t,e)}function cg(t,e){const n=rg(t,e);if(n){const e=[Zs(t.getAttribute("width")),Zs(t.getAttribute("height"))];return n["size"]=e,n}}function ug(t,e){const n=rg(t,e);if(n)return n["name"]=t.getAttribute("name"),n}function hg(t,e){const n=rg(t,e);if(n)return n["type"]=t.getAttribute("type"),n}function Ag(t,e){return Ls({},Vp,t,e)}function dg(t,e){return Ls([],Wp,t,e)}var fg=Fp;const pg="_feature",gg="_layer";class mg extends Us{constructor(t){super(),t=t||{},this.featureNS_="http://mapserver.gis.umn.edu/mapserver",this.gmlFormat_=new co,this.layers_=t.layers?t.layers:null}getLayers(){return this.layers_}setLayers(t){this.layers_=t}readFeatures_(t,e){t.setAttribute("namespaceURI",this.featureNS_);const n=t.localName;let i=[];if(0===t.childNodes.length)return i;if("msGMLOutput"==n)for(let r=0,s=t.childNodes.length;r<s;r++){const n=t.childNodes[r];if(n.nodeType!==Node.ELEMENT_NODE)continue;const s=n,o=e[0],a=gg,l=s.localName.replace(a,"");if(this.layers_&&!this.layers_.includes(l))continue;const c=l+pg;o["featureType"]=c,o["featureNS"]=this.featureNS_;const u={};u[c]=ws(this.gmlFormat_.readFeatureElement,this.gmlFormat_);const h=Is([o["featureNS"],null],u);s.setAttribute("namespaceURI",this.featureNS_);const A=Ls([],h,s,e,this.gmlFormat_);A&&w(i,A)}if("FeatureCollection"==n){const e=Ls([],this.gmlFormat_.FEATURE_COLLECTION_PARSERS,t,[{}],this.gmlFormat_);e&&(i=e)}return i}readFeaturesFromNode(t,e){const n={};return e&&Object.assign(n,this.getReadOptions(t,e)),this.readFeatures_(t,[n])}}var vg=mg;const yg=[null,"http://www.opengis.net/wmts/1.0"],wg=[null,"http://www.opengis.net/ows/1.1"],_g=Is(yg,{Contents:xs(Mg)});class bg extends kA{constructor(){super(),this.owsParser_=new gd}readFromNode(t){let e=t.getAttribute("version");e&&(e=e.trim());let n=this.owsParser_.readFromNode(t);return n?(n["version"]=e,n=Ls(n,_g,t,[]),n||null):null}}const xg=Is(yg,{Layer:bs(Pg),TileMatrixSet:bs(Ng)}),Eg=Is(yg,{Style:bs(Og),Format:bs(Js),TileMatrixSetLink:bs(kg),Dimension:bs(Dg),ResourceURL:bs(Ug)},Is(wg,{Title:xs(Js),Abstract:xs(Js),WGS84BoundingBox:xs(Qg),BoundingBox:bs(Gg),Identifier:xs(Js)})),Cg=Is(yg,{LegendURL:bs(Hg)},Is(wg,{Title:xs(Js),Identifier:xs(Js)})),Sg=Is(yg,{TileMatrixSet:xs(Js),TileMatrixSetLimits:xs(Wg)}),Bg=Is(yg,{TileMatrixLimits:ws(zg)}),Tg=Is(yg,{TileMatrix:xs(Js),MinTileRow:xs(Ys),MaxTileRow:xs(Ys),MinTileCol:xs(Ys),MaxTileCol:xs(Ys)}),Ig=Is(yg,{Default:xs(Js),Value:bs(Js)},Is(wg,{Identifier:xs(Js)})),Fg=Is(wg,{LowerCorner:ws(Vg),UpperCorner:ws(Vg)}),Lg=Is(yg,{WellKnownScaleSet:xs(Js),TileMatrix:bs(jg)},Is(wg,{SupportedCRS:xs(Js),Identifier:xs(Js),BoundingBox:xs(Qg)})),Rg=Is(yg,{TopLeftCorner:xs(Vg),ScaleDenominator:xs($s),TileWidth:xs(Ys),TileHeight:xs(Ys),MatrixWidth:xs(Ys),MatrixHeight:xs(Ys)},Is(wg,{Identifier:xs(Js)}));function Mg(t,e){return Ls({},xg,t,e)}function Pg(t,e){return Ls({},Eg,t,e)}function Ng(t,e){return Ls({},Lg,t,e)}function Og(t,e){const n=Ls({},Cg,t,e);if(!n)return;const i="true"===t.getAttribute("isDefault");return n["isDefault"]=i,n}function kg(t,e){return Ls({},Sg,t,e)}function Dg(t,e){return Ls({},Ig,t,e)}function Ug(t,e){const n=t.getAttribute("format"),i=t.getAttribute("template"),r=t.getAttribute("resourceType"),s={};return n&&(s["format"]=n),i&&(s["template"]=i),r&&(s["resourceType"]=r),s}function Qg(t,e){const n=Ls([],Fg,t,e);if(2==n.length)return dt(n)}function Gg(t,e){const n=t.getAttribute("crs"),i=Ls([],Fg,t,e);if(2==i.length)return{extent:dt(i),crs:n}}function Hg(t,e){const n={};return n["format"]=t.getAttribute("format"),n["href"]=UA(t),n}function Vg(t,e){const n=Js(t).split(/\s+/);if(!n||2!=n.length)return;const i=+n[0],r=+n[1];return isNaN(i)||isNaN(r)?void 0:[i,r]}function jg(t,e){return Ls({},Rg,t,e)}function Wg(t,e){return Ls([],Bg,t,e)}function zg(t,e){return Ls({},Tg,t,e)}var Kg=bg;function qg(t,e){return[[-1/0,-1/0,1/0,1/0]]}function $g(t,e){return[t]}function Xg(t){return function(e,n,i){const r=t.getZForResolution(Nn(n,i)),s=t.getTileRangeForExtentAndZ(Mn(e,i),r),o=[],a=[r,0,0];for(a[1]=s.minX;a[1]<=s.maxX;++a[1])for(a[2]=s.minY;a[2]<=s.maxY;++a[2])o.push(Rn(t.getTileCoordExtent(a),i));return o}}var Yg={SINGLECLICK:"singleclick",CLICK:R.CLICK,DBLCLICK:R.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};function Zg(t){const e=arguments;return function(t){let n=!0;for(let i=0,r=e.length;i<r;++i)if(n=n&&e[i](t),!n)break;return n}}const Jg=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},tm=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},em=function(t){const e=t.map.getTargetElement(),n=t.map.getOwnerDocument().activeElement;return e.contains(n)},nm=function(t){return!t.map.getTargetElement().hasAttribute("tabindex")||em(t)},im=x,rm=function(t){return t.type==Yg.CLICK},sm=function(t){const e=t.originalEvent;return 0==e.button&&!(ll&&cl&&e.ctrlKey)},om=E,am=function(t){return"pointermove"==t.type},lm=function(t){return t.type==Yg.SINGLECLICK},cm=function(t){return t.type==Yg.DBLCLICK},um=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},hm=function(t){const e=t.originalEvent;return!e.altKey&&(cl?e.metaKey:e.ctrlKey)&&!e.shiftKey},Am=function(t){const e=t.originalEvent;return cl?e.metaKey:e.ctrlKey},dm=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},fm=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},pm=function(t){const e=t.originalEvent;return z(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"mouse"==e.pointerType},gm=function(t){const e=t.originalEvent;return z(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"touch"===e.pointerType},mm=function(t){const e=t.originalEvent;return z(void 0!==e,"mapBrowserEvent must originate from a pointer event"),"pen"===e.pointerType},vm=function(t){const e=t.originalEvent;return z(void 0!==e,"mapBrowserEvent must originate from a pointer event"),e.isPrimary&&0===e.button};function ym(t){return Math.pow(t,3)}function wm(t){return 1-ym(1-t)}function _m(t){return 3*t*t-2*t*t*t}function bm(t){return t}function xm(t){return t<.5?_m(2*t):1-_m(2*(t-.5))}var Em=n(6768),Cm=n(144);const Sm={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"},Bm={ERROR:"error"};class Tm extends h{constructor(t){super(Bm.ERROR),this.code=t.code,this.message=t.message}}class Im extends W{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=dn,this.watchId_=void 0,this.addChangeListener(Sm.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(Sm.TRACKING,this.handleTrackingChanged_),void 0!==t.projection&&this.setProjection(t.projection),void 0!==t.trackingOptions&&this.setTrackingOptions(t.trackingOptions),this.setTracking(void 0!==t.tracking&&t.tracking)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const t=this.getProjection();t&&(this.transform_=En(gn("EPSG:4326"),t),this.position_&&this.set(Sm.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){const e=t.coords;this.set(Sm.ACCURACY,e.accuracy),this.set(Sm.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(Sm.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(Sm.HEADING,null===e.heading?void 0:De(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const n=this.transform_(this.position_);this.set(Sm.POSITION,n.slice()),this.set(Sm.SPEED,null===e.speed?void 0:e.speed);const i=sr(this.position_,e.accuracy);i.applyTransform(this.transform_),this.set(Sm.ACCURACY_GEOMETRY,i),this.changed()}positionError_(t){this.dispatchEvent(new Tm(t))}getAccuracy(){return this.get(Sm.ACCURACY)}getAccuracyGeometry(){return this.get(Sm.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(Sm.ALTITUDE)}getAltitudeAccuracy(){return this.get(Sm.ALTITUDE_ACCURACY)}getHeading(){return this.get(Sm.HEADING)}getPosition(){return this.get(Sm.POSITION)}getProjection(){return this.get(Sm.PROJECTION)}getSpeed(){return this.get(Sm.SPEED)}getTracking(){return this.get(Sm.TRACKING)}getTrackingOptions(){return this.get(Sm.TRACKING_OPTIONS)}setProjection(t){this.set(Sm.PROJECTION,gn(t))}setTracking(t){this.set(Sm.TRACKING,t)}setTrackingOptions(t){this.set(Sm.TRACKING_OPTIONS,t)}}var Fm=Im,Lm={ADD:"add",REMOVE:"remove"};const Rm={LENGTH:"length"};class Mm extends h{constructor(t,e,n){super(t),this.element=e,this.index=n}}class Pm extends W{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let n=0,i=this.array_.length;n<i;++n)this.assertUnique_(this.array_[n],n);this.updateLength_()}clear(){while(this.getLength()>0)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Rm.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new Mm(Lm.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new Mm(Lm.REMOVE,e,t)),e}setAt(t,e){const n=this.getLength();if(t>=n)return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const i=this.array_[t];this.array_[t]=e,this.dispatchEvent(new Mm(Lm.REMOVE,i,t)),this.dispatchEvent(new Mm(Lm.ADD,e,t))}updateLength_(){this.set(Rm.LENGTH,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}}var Nm=Pm,Om={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class km extends W{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"===typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[Om.OPACITY]=void 0!==t.opacity?t.opacity:1,z("number"===typeof e[Om.OPACITY],"Layer opacity must be a number"),e[Om.VISIBLE]=void 0===t.visible||t.visible,e[Om.Z_INDEX]=t.zIndex,e[Om.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[Om.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[Om.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[Om.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=Me(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return U()}getLayerStatesArray(t){return U()}getExtent(){return this.get(Om.EXTENT)}getMaxResolution(){return this.get(Om.MAX_RESOLUTION)}getMinResolution(){return this.get(Om.MIN_RESOLUTION)}getMinZoom(){return this.get(Om.MIN_ZOOM)}getMaxZoom(){return this.get(Om.MAX_ZOOM)}getOpacity(){return this.get(Om.OPACITY)}getSourceState(){return U()}getVisible(){return this.get(Om.VISIBLE)}getZIndex(){return this.get(Om.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(Om.EXTENT,t)}setMaxResolution(t){this.set(Om.MAX_RESOLUTION,t)}setMinResolution(t){this.set(Om.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(Om.MAX_ZOOM,t)}setMinZoom(t){this.set(Om.MIN_ZOOM,t)}setOpacity(t){z("number"===typeof t,"Layer opacity must be a number"),this.set(Om.OPACITY,t)}setVisible(t){this.set(Om.VISIBLE,t)}setZIndex(t){this.set(Om.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}var Dm=km,Um={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"},Qm={ANIMATING:0,INTERACTING:1},Gm={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};const Hm=42,Vm=256;function jm(t,e,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const l=e?0:s[0]*r,c=e?0:s[1]*r,u=a?a[0]:0,h=a?a[1]:0;let A=t[0]+l/2+u,d=t[2]-l/2+u,f=t[1]+c/2+h,p=t[3]-c/2+h;A>d&&(A=(d+A)/2,d=A),f>p&&(f=(p+f)/2,p=f);let g=Me(i[0],A,d),m=Me(i[1],f,p);if(o&&n&&r){const t=30*r;g+=-t*Math.log(1+Math.max(0,A-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-d)/t),m+=-t*Math.log(1+Math.max(0,f-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-p)/t)}return[g,m]}}function Wm(t){return t}function zm(t,e,n,i){const r=Jt(e)/n[0],s=zt(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function Km(t,e,n){let i=Math.min(t,e);const r=50;return i*=Math.log(1+r*Math.max(0,t/e-1))/r+1,n&&(i=Math.max(i,n),i/=Math.log(1+r*Math.max(0,n/t-1))/r+1),Me(i,n/2,2*e)}function qm(t,e,n,i){return e=void 0===e||e,function(r,s,o,a){if(void 0!==r){const l=t[0],c=t[t.length-1],u=n?zm(l,n,o,i):l;if(a)return e?Km(r,u,c):Me(r,c,u);const h=Math.min(u,r),A=Math.floor(v(t,h,s));return t[A]>u&&A<t.length-1?t[A+1]:t[A]}}}function $m(t,e,n,i,r,s){return i=void 0===i||i,n=void 0!==n?n:0,function(o,a,l,c){if(void 0!==o){const u=r?zm(e,r,l,s):e;if(c)return i?Km(o,u,n):Me(o,n,u);const h=1e-9,A=Math.ceil(Math.log(e/u)/Math.log(t)-h),d=-a*(.5-h)+.5,f=Math.min(u,o),p=Math.floor(Math.log(e/f)/Math.log(t)+d),g=Math.max(A,p),m=e/Math.pow(t,g);return Me(m,n,u)}}}function Xm(t,e,n,i,r){return n=void 0===n||n,function(s,o,a,l){if(void 0!==s){const o=i?zm(t,i,a,r):t;return n&&l?Km(s,o,e):Me(s,e,o)}}}function Ym(t){if(void 0!==t)return 0}function Zm(t){if(void 0!==t)return t}function Jm(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?(t=Math.floor(t/e+.5)*e,t):void 0}}function tv(t){const e=void 0===t?De(5):t;return function(t,n){return n||void 0===t?t:Math.abs(t)<=e?0:t}}const ev=0;class nv extends W{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=wn(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&hn(),t.center&&(t.center=Ln(t.center,this.projection_)),t.extent&&(t.extent=Mn(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const o in Gm)delete e[o];this.setProperties(e,!0);const n=sv(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=rv(t),r=n.constraint,s=ov(t);this.constraints_={center:i,resolution:r,rotation:s},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),s=r/2*(i[3]-e[3]+e[1]-i[1]),o=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+s,n[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let n=0;n<e.length;++n){let t=arguments[n];t.center&&(t=Object.assign({},t),t.center=Ln(t.center,this.getProjection())),t.anchor&&(t=Object.assign({},t),t.anchor=Ln(t.anchor,this.getProjection())),e[n]=t}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"===typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&iv(e,!0));let r=Date.now(),s=this.targetCenter_.slice(),o=this.targetResolution_,a=this.targetRotation_;const l=[];for(;i<n;++i){const t=arguments[i],n={start:r,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||_m,callback:e};if(t.center&&(n.sourceCenter=s,n.targetCenter=t.center.slice(),s=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=o,n.targetResolution=this.getResolutionForZoom(t.zoom),o=n.targetResolution):t.resolution&&(n.sourceResolution=o,n.targetResolution=t.resolution,o=n.targetResolution),void 0!==t.rotation){n.sourceRotation=a;const e=Ue(t.rotation-a+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=a+e,a=n.targetRotation}av(n)?n.complete=!0:r+=n.duration,l.push(n)}this.animations_.push(l),this.setHint(Qm.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Qm.ANIMATING]>0}getInteracting(){return this.hints_[Qm.INTERACTING]>0}cancelAnimations(){let t;this.setHint(Qm.ANIMATING,-this.hints_[Qm.ANIMATING]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&iv(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let r=!0;for(let n=0,s=i.length;n<s;++n){const s=i[n];if(s.complete)continue;const o=t-s.start;let a=s.duration>0?o/s.duration:1;a>=1?(s.complete=!0,a=1):r=!1;const l=s.easing(a);if(s.sourceCenter){const t=s.sourceCenter[0],e=s.sourceCenter[1],n=s.targetCenter[0],i=s.targetCenter[1];this.nextCenter_=s.targetCenter;const r=t+l*(n-t),o=e+l*(i-e);this.targetCenter_=[r,o]}if(s.sourceResolution&&s.targetResolution){const t=1===l?s.targetResolution:s.sourceResolution+l*(s.targetResolution-s.sourceResolution);if(s.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,s.anchor)}this.nextResolution_=s.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==s.sourceRotation&&void 0!==s.targetRotation){const t=1===l?Ue(s.targetRotation+Math.PI,2*Math.PI)-Math.PI:s.sourceRotation+l*(s.targetRotation-s.sourceRotation);if(s.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,s.anchor)}this.nextRotation_=s.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!s.complete)break}if(r){this.animations_[n]=null,this.setHint(Qm.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&iv(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],$e(n,t-this.getRotation()),We(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),r=this.getResolution();if(void 0!==i&&void 0!==r){const s=e[0]-t*(e[0]-i[0])/r,o=e[1]-t*(e[1]-i[1])/r;n=[s,o]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?Fn(t,this.getProjection()):t}getCenterInternal(){return this.get(Gm.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Rn(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();z(e,"The view center is not defined");const n=this.getResolution();z(void 0!==n,"The view resolution is not defined");const i=this.getRotation();return z(void 0!==i,"The view rotation is not defined"),jt(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Gm.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Mn(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=Jt(t)/e[0],i=zt(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){const r=e/Math.pow(t,n*i);return r}}getRotation(){return this.get(Gm.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){const i=Math.log(n/t)/e/r;return i}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();i=lv(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const r=v(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_){if(this.resolutions_.length<=1)return 0;const e=Me(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,Me(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if(z(Array.isArray(t)||"function"===typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){z(!ee(t),"Cannot fit empty extent provided as `geometry`");const e=Mn(t,this.getProjection());n=or(e)}else if("Circle"===t.getType()){const e=Mn(t.getExtent(),this.getProjection());n=or(e),n.rotate(this.getRotation(),Gt(e))}else{const e=In();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),s=t.getStride();let o=1/0,a=1/0,l=-1/0,c=-1/0;for(let u=0,h=r.length;u<h;u+=s){const t=r[u]*n-r[u+1]*i,e=r[u]*i+r[u+1]*n;o=Math.min(o,t),a=Math.min(a,e),l=Math.max(l,t),c=Math.max(c,e)}return[o,a,l,c]}fitInternal(t,e){e=e||{};let n=e.size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let s;s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const o=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(o,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),c=Math.sin(l),u=Math.cos(l),h=Gt(o);h[0]+=(i[1]-i[3])/2*a,h[1]+=(i[0]-i[2])/2*a;const A=h[0]*u-h[1]*c,d=h[1]*u+h[0]*c,f=this.getConstrainedCenter([A,d],a),p=e.callback?e.callback:C;void 0!==e.duration?this.animateInternal({resolution:a,center:f,duration:e.duration,easing:e.easing},p):(this.targetResolution_=a,this.targetCenter_=f,this.applyTargetState_(!1,!0),iv(p,!0))}centerOn(t,e,n){this.centerOnInternal(Ln(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(lv(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r;const s=this.padding_;if(s&&t){const o=this.getViewportSizeMinusPadding_(-n),a=lv(t,i,[o[0]/2+s[3],o[1]/2+s[0]],e,n);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=Fn(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&Ln(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=Ln(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?Ln(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),s=this.constraints_.resolution(this.targetResolution_,0,r,n),o=this.constraints_.center(this.targetCenter_,s,r,n,this.calculateCenterShift(this.targetCenter_,s,i,r));this.get(Gm.ROTATION)!==i&&this.set(Gm.ROTATION,i),this.get(Gm.RESOLUTION)!==s&&(this.set(Gm.RESOLUTION,s),this.set("zoom",this.getZoom(),!0)),o&&this.get(Gm.CENTER)&&qe(this.get(Gm.CENTER),o)||this.set(Gm.CENTER,o),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,i,s),a=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,r,s));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&qe(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:o,duration:t,easing:wm,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Qm.INTERACTING,1)}endInteraction(t,e,n){n=n&&Ln(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(Qm.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function iv(t,e){setTimeout((function(){t(e)}),0)}function rv(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return jm(t.extent,t.constrainOnlyCenter,e)}const e=wn(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,jm(t,!1,!1)}return Wm}function sv(t){let e,n,i;const r=28,s=2;let o=void 0!==t.minZoom?t.minZoom:ev,a=void 0!==t.maxZoom?t.maxZoom:r;const l=void 0!==t.zoomFactor?t.zoomFactor:s,c=void 0!==t.multiWorld&&t.multiWorld,u=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,h=void 0!==t.showFullExtent&&t.showFullExtent,A=wn(t.projection,"EPSG:3857"),d=A.getExtent();let f=t.constrainOnlyCenter,p=t.extent;if(c||p||!A.isGlobal()||(f=!1,p=d),void 0!==t.resolutions){const r=t.resolutions;n=r[o],i=void 0!==r[a]?r[a]:r[r.length-1],e=t.constrainResolution?qm(r,u,!f&&p,h):Xm(n,i,u,!f&&p,h)}else{const c=d?Math.max(Jt(d),zt(d)):360*ue.degrees/A.getMetersPerUnit(),g=c/Vm/Math.pow(s,ev),m=g/Math.pow(s,r-ev);n=t.maxResolution,void 0!==n?o=0:n=g/Math.pow(l,o),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(l,a):g/Math.pow(l,a):m),a=o+Math.floor(Math.log(n/i)/Math.log(l)),i=n/Math.pow(l,a-o),e=t.constrainResolution?$m(l,n,i,u,!f&&p,h):Xm(n,i,u,!f&&p,h)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:o,zoomFactor:l}}function ov(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?tv():!1===e?Zm:"number"===typeof e?Jm(e):Zm}return Ym}function av(t){return!(t.sourceCenter&&t.targetCenter&&!qe(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function lv(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;const c=a*s-l*o,u=l*s+a*o;return[c,u]}var cv=nv;class uv extends Dm{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(Om.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(Om.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(N(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=M(t,R.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0))),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let i;!t&&n&&(t=n.getView()),e=t instanceof cv?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),i=e.layerStatesArray?e.layerStatesArray.find((t=>t.layer===this)):this.getLayerState();const r=this.getExtent();return hv(i,e.viewState)&&(!r||te(r,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];let e;const n=this.getSource();if(n&&(e=n.getAttributions()),!e)return[];const i=t instanceof cv?t.getViewStateAndExtent():t;let r=e(i);return Array.isArray(r)||(r=[r]),r}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(Om.MAP,t)}getMapInternal(){return this.get(Om.MAP)}setMap(t){this.mapPrecomposeKey_&&(N(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(N(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=M(t,Um.PRECOMPOSE,(function(t){const e=t,n=e.frameState.layerStatesArray,i=this.getLayerState(!1);z(!n.some((function(t){return t.layer===i.layer})),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),n.push(i)}),this),this.mapRenderKey_=M(this,R.CHANGE,t.render,t),this.changed())}setSource(t){this.set(Om.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}disposeInternal(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_),this.setSource(null),super.disposeInternal()}}function hv(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}var Av=uv,dv=n(2220);let fv=0;const pv=0,gv=1<<fv++,mv=1<<fv++,vv=1<<fv++,yv=1<<fv++,wv=1<<fv++,_v=Math.pow(2,fv)-1,bv={[gv]:"boolean",[mv]:"number",[vv]:"string",[yv]:"color",[wv]:"number[]"},xv=Object.keys(bv).map(Number).sort(g);function Ev(t){const e=[];for(const n of xv)Cv(t,n)&&e.push(bv[n]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function Cv(t,e){return(t&e)===e}function Sv(t,e){return!!(t&e)}function Bv(t,e){return t===e}class Tv{constructor(t,e){this.type=t,this.value=e}}class Iv{constructor(t,e,...n){this.type=t,this.operator=e,this.args=n}}function Fv(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,style:{}}}function Lv(t){switch(t){case"string":return vv;case"color":return yv;case"number":return mv;case"boolean":return gv;case"number[]":return wv;default:throw new Error(`Unrecognized type hint: ${t}`)}}function Rv(t,e,n){switch(typeof t){case"boolean":return new Tv(gv,t);case"number":return new Tv(mv,t);case"string":{let e=vv;return il(t)&&(e|=yv),Bv(e&n,pv)||(e&=n),new Tv(e,t)}default:}if(!Array.isArray(t))throw new Error("Expression must be an array or a primitive value");if(0===t.length)throw new Error("Empty expression");if("string"===typeof t[0])return Yv(t,e,n);for(const r of t)if("number"!==typeof r)throw new Error("Expected an array of numbers");let i=wv;return 3!==t.length&&4!==t.length||(i|=yv),n&&(i&=n),new Tv(i,t)}const Mv={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},Pv={[Mv.Get]:Xv((([t,e])=>void 0!==e?Lv(e.value):_v),Qv(1,2),Nv),[Mv.Var]:Xv((([t])=>t.type),Qv(1,1),Ov),[Mv.Id]:Xv(mv|vv,Uv,kv),[Mv.Concat]:Xv(vv,Qv(2,1/0),Gv(_v)),[Mv.GeometryType]:Xv(vv,Uv,Dv),[Mv.Resolution]:Xv(mv,Uv),[Mv.Zoom]:Xv(mv,Uv),[Mv.Time]:Xv(mv,Uv),[Mv.Any]:Xv(gv,Qv(2,1/0),Gv(gv)),[Mv.All]:Xv(gv,Qv(2,1/0),Gv(gv)),[Mv.Not]:Xv(gv,Qv(1,1),Gv(gv)),[Mv.Equal]:Xv(gv,Qv(2,2),Gv(_v),Hv),[Mv.NotEqual]:Xv(gv,Qv(2,2),Gv(_v),Hv),[Mv.GreaterThan]:Xv(gv,Qv(2,2),Gv(_v),Hv),[Mv.GreaterThanOrEqualTo]:Xv(gv,Qv(2,2),Gv(_v),Hv),[Mv.LessThan]:Xv(gv,Qv(2,2),Gv(_v),Hv),[Mv.LessThanOrEqualTo]:Xv(gv,Qv(2,2),Gv(_v),Hv),[Mv.Multiply]:Xv((t=>{let e=mv|yv;for(let n=0;n<t.length;n++)e&=t[n].type;return e}),Qv(2,1/0),Gv(mv|yv),Hv),[Mv.Coalesce]:Xv((t=>{let e=_v;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e}),Qv(2,1/0),Gv(_v),Hv),[Mv.Divide]:Xv(mv,Qv(2,2),Gv(mv)),[Mv.Add]:Xv(mv,Qv(2,1/0),Gv(mv)),[Mv.Subtract]:Xv(mv,Qv(2,2),Gv(mv)),[Mv.Clamp]:Xv(mv,Qv(3,3),Gv(mv)),[Mv.Mod]:Xv(mv,Qv(2,2),Gv(mv)),[Mv.Pow]:Xv(mv,Qv(2,2),Gv(mv)),[Mv.Abs]:Xv(mv,Qv(1,1),Gv(mv)),[Mv.Floor]:Xv(mv,Qv(1,1),Gv(mv)),[Mv.Ceil]:Xv(mv,Qv(1,1),Gv(mv)),[Mv.Round]:Xv(mv,Qv(1,1),Gv(mv)),[Mv.Sin]:Xv(mv,Qv(1,1),Gv(mv)),[Mv.Cos]:Xv(mv,Qv(1,1),Gv(mv)),[Mv.Atan]:Xv(mv,Qv(1,2),Gv(mv)),[Mv.Sqrt]:Xv(mv,Qv(1,1),Gv(mv)),[Mv.Match]:Xv((t=>{let e=_v;for(let n=2;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e}),Qv(4,1/0),jv,Wv),[Mv.Between]:Xv(gv,Qv(3,3),Gv(mv)),[Mv.Interpolate]:Xv((t=>{let e=yv|mv;for(let n=3;n<t.length;n+=2)e&=t[n].type;return e}),Qv(6,1/0),jv,zv),[Mv.Case]:Xv((t=>{let e=_v;for(let n=1;n<t.length;n+=2)e&=t[n].type;return e&=t[t.length-1].type,e}),Qv(3,1/0),Vv,Kv),[Mv.In]:Xv(gv,Qv(2,2),qv),[Mv.Number]:Xv(mv,Qv(1,1/0),Gv(_v)),[Mv.String]:Xv(vv,Qv(1,1/0),Gv(_v)),[Mv.Array]:Xv((t=>3===t.length||4===t.length?wv|yv:wv),Qv(1,1/0),Gv(mv)),[Mv.Color]:Xv(yv,Qv(1,4),Gv(mv)),[Mv.Band]:Xv(mv,Qv(1,3),Gv(mv)),[Mv.Palette]:Xv(yv,Qv(2,2),$v)};function Nv(t,e){const n=Rv(t[1],e);if(!(n instanceof Tv))throw new Error("Expected a literal argument for get operation");if("string"!==typeof n.value)throw new Error("Expected a string argument for get operation");if(e.properties.add(n.value),3===t.length){const i=Rv(t[2],e);return[n,i]}return[n]}function Ov(t,e,n,i){const r=t[1];if("string"!==typeof r)throw new Error("Expected a string argument for var operation");if(e.variables.add(r),!("variables"in e.style)||void 0===e.style.variables[r])return[new Tv(_v,r)];const s=e.style.variables[r],o=Rv(s,e);if(o.value=r,i&&!Sv(i,o.type))throw new Error(`The variable ${r} has type ${Ev(o.type)} but the following type was expected: ${Ev(i)}`);return[o]}function kv(t,e){e.featureId=!0}function Dv(t,e){e.geometryType=!0}function Uv(t,e){const n=t[0];if(1!==t.length)throw new Error(`Expected no arguments for ${n} operation`);return[]}function Qv(t,e){return function(n,i){const r=n[0],s=n.length-1;if(t===e){if(s!==t){const e=1===t?"":"s";throw new Error(`Expected ${t} argument${e} for ${r}, got ${s}`)}}else if(s<t||s>e){const n=e===1/0?`${t} or more`:`${t} to ${e}`;throw new Error(`Expected ${n} arguments for ${r}, got ${s}`)}}}function Gv(t){return function(e,n){const i=e[0],r=e.length-1,s=new Array(r);for(let o=0;o<r;++o){const r=Rv(e[o+1],n);if(!Sv(t,r.type)){const e=Ev(t),n=Ev(r.type);throw new Error(`Unexpected type for argument ${o} of ${i} operation, got ${e} but expected ${n}`)}r.type&=t,s[o]=r}return s}}function Hv(t,e,n){const i=t[0],r=t.length-1;let s=_v;for(let a=0;a<n.length;++a)s&=n[a].type;if(s===pv)throw new Error(`No common type could be found for arguments of ${i} operation`);const o=new Array(r);for(let a=0;a<r;++a)o[a]=Rv(t[a+1],e,s);return o}function Vv(t,e){const n=t[0],i=t.length-1;if(i%2===0)throw new Error(`An odd amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function jv(t,e){const n=t[0],i=t.length-1;if(i%2===1)throw new Error(`An even amount of arguments was expected for operation ${n}, got ${JSON.stringify(i)} instead`)}function Wv(t,e,n,i){const r=t.length-1,s=Rv(t[1],e);let o=s.type;const a=Rv(t[t.length-1],e);let l=void 0!==i?i&a.type:a.type;const c=new Array(r-2);for(let h=0;h<r-2;h+=2){const n=Rv(t[h+2],e),i=Rv(t[h+3],e);o&=n.type,l&=i.type,c[h]=n,c[h+1]=i}const u=vv|mv|gv;if(!Sv(u,o))throw new Error(`Expected an input of type ${Ev(u)} for the interpolate operation, got ${Ev(o)} instead`);if(Bv(l,pv))throw new Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let h=0;h<r-2;h+=2){const n=Rv(t[h+2],e,o),i=Rv(t[h+3],e,l);c[h]=n,c[h+1]=i}return[Rv(t[1],e,o),...c,Rv(t[t.length-1],e,l)]}function zv(t,e,n,i){const r=t[1];let s;switch(r[0]){case"linear":s=1;break;case"exponential":if(s=r[1],"number"!==typeof s)throw new Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(s)} instead`);break;default:s=null}if(!s)throw new Error(`Invalid interpolation type: ${JSON.stringify(r)}`);s=Rv(s,e);let o=Rv(t[2],e);if(!Sv(mv,o.type))throw new Error(`Expected an input of type number for the interpolate operation, got ${Ev(o.type)} instead`);o=Rv(t[2],e,mv);const a=new Array(t.length-3);for(let l=0;l<a.length;l+=2){let n=Rv(t[l+3],e);if(!Sv(mv,n.type))throw new Error(`Expected all stop input values in the interpolate operation to be of type number, got ${Ev(n.type)} at position ${l+2} instead`);let i=Rv(t[l+4],e);if(!Sv(mv|yv,i.type))throw new Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${Ev(i.type)} at position ${l+3} instead`);n=Rv(t[l+3],e,mv),i=Rv(t[l+4],e,mv|yv),a[l]=n,a[l+1]=i}return[s,o,...a]}function Kv(t,e,n,i){const r=Rv(t[t.length-1],e);let s=void 0!==i?i&r.type:r.type;const o=new Array(t.length-1);for(let a=0;a<o.length-1;a+=2){const n=Rv(t[a+1],e),i=Rv(t[a+2],e);if(!Sv(gv,n.type))throw new Error(`Expected all conditions in the case operation to be of type boolean, got ${Ev(n.type)} at position ${a} instead`);s&=i.type,o[a]=n,o[a+1]=i}if(Bv(s,pv))throw new Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let a=0;a<o.length-1;a+=2)o[a+1]=Rv(t[a+2],e,s);return o[o.length-1]=Rv(t[t.length-1],e,s),o}function qv(t,e){let n=t[2];if(!Array.isArray(n))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"===typeof n[0]){if("literal"!==n[0])throw new Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(n[1]))throw new Error('The "in" operator was provided a literal value which was not an array as second argument.');n=n[1]}let i=vv|mv;const r=new Array(n.length);for(let o=0;o<r.length;o++){const t=Rv(n[o],e);i&=t.type,r[o]=t}if(Bv(i,pv))throw new Error("Could not find a common type for the following in operation: "+JSON.stringify(t));const s=Rv(t[1],e,i);return[s,...r]}function $v(t,e){const n=Rv(t[1],e,mv);if(n.type!==mv)throw new Error(`The first argument of palette must be an number, got ${Ev(n.type)} instead`);const i=t[2];if(!Array.isArray(i))throw new Error("The second argument of palette must be an array");const r=new Array(i.length);for(let s=0;s<r.length;s++){const t=Rv(i[s],e,yv);if(!(t instanceof Tv))throw new Error(`The palette color at index ${s} must be a literal value`);if(!Sv(t.type,yv))throw new Error(`The palette color at index ${s} should be of type color, got ${Ev(t.type)} instead`);r[s]=t}return[n,...r]}function Xv(t,...e){return function(n,i,r){const s=n[0];let o=[];for(let t=0;t<e.length;t++)o=e[t](n,i,o,r)||o;let a="function"===typeof t?t(o):t;if(void 0!==r){if(!Sv(a,r))throw new Error(`The following expression was expected to return ${Ev(r)}, but returns ${Ev(a)} instead: ${JSON.stringify(n)}`);a&=r}if(a===pv)throw new Error(`No matching type was found for the following expression: ${JSON.stringify(n)}`);return new Iv(a,s,...o)}}function Yv(t,e,n){const i=t[0],r=Pv[i];if(!r)throw new Error(`Unknown operator: ${i}`);return r(t,e,n)}function Zv(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return Zv(t.getGeometries()[0]);default:return""}}function Jv(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function ty(t,e,n){const i=Rv(t,n);if(!Sv(e,i.type)){const t=Ev(e),n=Ev(i.type);throw new Error(`Expected expression to be of type ${t}, got ${n}`)}return ey(i,n)}function ey(t,e){if(t instanceof Tv){if(t.type===yv&&"string"===typeof t.value){const e=Ja(t.value);return function(){return e}}return function(){return t.value}}const n=t.operator;switch(n){case Mv.Number:case Mv.String:case Mv.Coalesce:return ny(t,e);case Mv.Get:case Mv.Var:return iy(t,e);case Mv.Id:return t=>t.featureId;case Mv.GeometryType:return t=>t.geometryType;case Mv.Concat:{const n=t.args.map((t=>ey(t,e)));return t=>"".concat(...n.map((e=>e(t).toString())))}case Mv.Resolution:return t=>t.resolution;case Mv.Any:case Mv.All:case Mv.Not:return sy(t,e);case Mv.Equal:case Mv.NotEqual:case Mv.LessThan:case Mv.LessThanOrEqualTo:case Mv.GreaterThan:case Mv.GreaterThanOrEqualTo:return ry(t,e);case Mv.Multiply:case Mv.Divide:case Mv.Add:case Mv.Subtract:case Mv.Clamp:case Mv.Mod:case Mv.Pow:case Mv.Abs:case Mv.Floor:case Mv.Ceil:case Mv.Round:case Mv.Sin:case Mv.Cos:case Mv.Atan:case Mv.Sqrt:return oy(t,e);case Mv.Case:return ay(t,e);case Mv.Match:return ly(t,e);case Mv.Interpolate:return cy(t,e);default:throw new Error(`Unsupported operator ${n}`)}}function ny(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=ey(t.args[s],e);switch(n){case Mv.Coalesce:return t=>{for(let e=0;e<i;++e){const n=r[e](t);if("undefined"!==typeof n&&null!==n)return n}throw new Error("Expected one of the values to be non-null")};case Mv.Number:case Mv.String:return t=>{for(let e=0;e<i;++e){const i=r[e](t);if(typeof i===n)return i}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}function iy(t,e){const n=t.args[0],i=n.value;switch(t.operator){case Mv.Get:return t=>t.properties[i];case Mv.Var:return t=>t.variables[i];default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}function ry(t,e){const n=t.operator,i=ey(t.args[0],e),r=ey(t.args[1],e);switch(n){case Mv.Equal:return t=>i(t)===r(t);case Mv.NotEqual:return t=>i(t)!==r(t);case Mv.LessThan:return t=>i(t)<r(t);case Mv.LessThanOrEqualTo:return t=>i(t)<=r(t);case Mv.GreaterThan:return t=>i(t)>r(t);case Mv.GreaterThanOrEqualTo:return t=>i(t)>=r(t);default:throw new Error(`Unsupported comparison operator ${n}`)}}function sy(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=ey(t.args[s],e);switch(n){case Mv.Any:return t=>{for(let e=0;e<i;++e)if(r[e](t))return!0;return!1};case Mv.All:return t=>{for(let e=0;e<i;++e)if(!r[e](t))return!1;return!0};case Mv.Not:return t=>!r[0](t);default:throw new Error(`Unsupported logical operator ${n}`)}}function oy(t,e){const n=t.operator,i=t.args.length,r=new Array(i);for(let s=0;s<i;++s)r[s]=ey(t.args[s],e);switch(n){case Mv.Multiply:return t=>{let e=1;for(let n=0;n<i;++n)e*=r[n](t);return e};case Mv.Divide:return t=>r[0](t)/r[1](t);case Mv.Add:return t=>{let e=0;for(let n=0;n<i;++n)e+=r[n](t);return e};case Mv.Subtract:return t=>r[0](t)-r[1](t);case Mv.Clamp:return t=>{const e=r[0](t),n=r[1](t);if(e<n)return n;const i=r[2](t);return e>i?i:e};case Mv.Mod:return t=>r[0](t)%r[1](t);case Mv.Pow:return t=>Math.pow(r[0](t),r[1](t));case Mv.Abs:return t=>Math.abs(r[0](t));case Mv.Floor:return t=>Math.floor(r[0](t));case Mv.Ceil:return t=>Math.ceil(r[0](t));case Mv.Round:return t=>Math.round(r[0](t));case Mv.Sin:return t=>Math.sin(r[0](t));case Mv.Cos:return t=>Math.cos(r[0](t));case Mv.Atan:return 2===i?t=>Math.atan2(r[0](t),r[1](t)):t=>Math.atan(r[0](t));case Mv.Sqrt:return t=>Math.sqrt(r[0](t));default:throw new Error(`Unsupported numeric operator ${n}`)}}function ay(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=ey(t.args[r],e);return t=>{for(let e=0;e<n-1;e+=2){const n=i[e](t);if(n)return i[e+1](t)}return i[n-1](t)}}function ly(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=ey(t.args[r],e);return t=>{const e=i[0](t);for(let r=1;r<n;r+=2)if(e===i[r](t))return i[r+1](t);return i[n-1](t)}}function cy(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=ey(t.args[r],e);return t=>{const e=i[0](t),r=i[1](t);let s,o;for(let a=2;a<n;a+=2){const n=i[a](t);let l=i[a+1](t);const c=Array.isArray(l);if(c&&(l=Xa(l)),n>=r)return 2===a?l:c?hy(e,r,s,o,n,l):uy(e,r,s,o,n,l);s=n,o=l}return o}}function uy(t,e,n,i,r,s){const o=r-n;if(0===o)return i;const a=e-n,l=1===t?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1);return i+l*(s-i)}function hy(t,e,n,i,r,s){const o=r-n;if(0===o)return i;const a=Ya(i),l=Ya(s);let c=l[2]-a[2];c>180?c-=360:c<-180&&(c+=360);const u=[uy(t,e,n,a[0],r,l[0]),uy(t,e,n,a[1],r,l[1]),a[2]+uy(t,e,n,0,r,c),uy(t,e,n,i[3],r,s[3])];return el(Za(u))}function Ay(t){return!0}function dy(t){const e=Fv(),n=py(t,e),i=Jv();return function(t,r){if(i.properties=t.getPropertiesInternal(),i.resolution=r,e.featureId){const e=t.getId();i.featureId=void 0!==e?e:null}return e.geometryType&&(i.geometryType=Zv(t.getGeometry())),n(i)}}function fy(t){const e=Fv(),n=t.length,i=new Array(n);for(let o=0;o<n;++o)i[o]=gy(t[o],e);const r=Jv(),s=new Array(n);return function(t,o){if(r.properties=t.getPropertiesInternal(),r.resolution=o,e.featureId){const e=t.getId();r.featureId=void 0!==e?e:null}let a=0;for(let e=0;e<n;++e){const t=i[e](r);t&&(s[a]=t,a+=1)}return s.length=a,s}}function py(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const n=t[r],s="filter"in n?ty(n.filter,gv,e):Ay;let o;if(Array.isArray(n.style)){const t=n.style.length;o=new Array(t);for(let i=0;i<t;++i)o[i]=gy(n.style[i],e)}else o=[gy(n.style,e)];i[r]={filter:s,styles:o}}return function(e){const r=[];let s=!1;for(let o=0;o<n;++o){const n=i[o].filter;if(n(e)&&(!t[o].else||!s)){s=!0;for(const t of i[o].styles){const n=t(e);n&&r.push(n)}}}return r}}function gy(t,e){const n=my(t,"",e),i=vy(t,"",e),r=yy(t,e),s=wy(t,e),o=Ey(t,"z-index",e);if(!n&&!i&&!r&&!s&&!I(t))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const a=new Qc;return function(t){let e=!0;if(n){const i=n(t);i&&(e=!1),a.setFill(i)}if(i){const n=i(t);n&&(e=!1),a.setStroke(n)}if(r){const n=r(t);n&&(e=!1),a.setText(n)}if(s){const n=s(t);n&&(e=!1),a.setImage(n)}return o&&a.setZIndex(o(t)),e?null:a}}function my(t,e,n){let i;if(i=e+"fill-pattern-src"in t?Sy(t,e+"fill-",n):Ty(t,e+"fill-color",n),!i)return null;const r=new Dl;return function(t){const e=i(t);return"none"===e?null:(r.setColor(e),r)}}function vy(t,e,n){const i=Ey(t,e+"stroke-width",n),r=Ty(t,e+"stroke-color",n);if(!i&&!r)return null;const s=Cy(t,e+"stroke-line-cap",n),o=Cy(t,e+"stroke-line-join",n),a=Iy(t,e+"stroke-line-dash",n),l=Ey(t,e+"stroke-line-dash-offset",n),c=Ey(t,e+"stroke-miter-limit",n),u=new ql;return function(t){if(r){const e=r(t);if("none"===e)return null;u.setColor(e)}if(i&&u.setWidth(i(t)),s){const e=s(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap");u.setLineCap(e)}if(o){const e=o(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(e)}return a&&u.setLineDash(a(t)),l&&u.setLineDashOffset(l(t)),c&&u.setMiterLimit(c(t)),u}}function yy(t,e){const n="text-",i=Cy(t,n+"value",e);if(!i)return null;const r=my(t,n,e),s=my(t,n+"background-",e),o=vy(t,n,e),a=vy(t,n+"background-",e),l=Cy(t,n+"font",e),c=Ey(t,n+"max-angle",e),u=Ey(t,n+"offset-x",e),h=Ey(t,n+"offset-y",e),A=By(t,n+"overflow",e),d=Cy(t,n+"placement",e),f=Ey(t,n+"repeat",e),p=Ry(t,n+"scale",e),g=By(t,n+"rotate-with-view",e),m=Ey(t,n+"rotation",e),v=Cy(t,n+"align",e),y=Cy(t,n+"justify",e),w=Cy(t,n+"baseline",e),_=Iy(t,n+"padding",e),b=Uy(t,n+"declutter-mode"),x=new Vc({declutterMode:b});return function(t){if(x.setText(i(t)),r&&x.setFill(r(t)),s&&x.setBackgroundFill(s(t)),o&&x.setStroke(o(t)),a&&x.setBackgroundStroke(a(t)),l&&x.setFont(l(t)),c&&x.setMaxAngle(c(t)),u&&x.setOffsetX(u(t)),h&&x.setOffsetY(h(t)),A&&x.setOverflow(A(t)),d){const e=d(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");x.setPlacement(e)}if(f&&x.setRepeat(f(t)),p&&x.setScale(p(t)),g&&x.setRotateWithView(g(t)),m&&x.setRotation(m(t)),v){const e=v(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align");x.setTextAlign(e)}if(y){const e=y(t);if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify");x.setJustify(e)}if(w){const e=w(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");x.setTextBaseline(e)}return _&&x.setPadding(_(t)),x}}function wy(t,e){return"icon-src"in t?_y(t,e):"shape-points"in t?by(t,e):"circle-radius"in t?xy(t,e):null}function _y(t,e){const n="icon-",i=n+"src",r=Hy(t[i],i),s=Fy(t,n+"anchor",e),o=Ry(t,n+"scale",e),a=Ey(t,n+"opacity",e),l=Fy(t,n+"displacement",e),c=Ey(t,n+"rotation",e),u=By(t,n+"rotate-with-view",e),h=Oy(t,n+"anchor-origin"),A=ky(t,n+"anchor-x-units"),d=ky(t,n+"anchor-y-units"),f=Qy(t,n+"color"),p=Ny(t,n+"cross-origin"),g=Dy(t,n+"offset"),m=Oy(t,n+"offset-origin"),v=My(t,n+"width"),y=My(t,n+"height"),w=Py(t,n+"size"),_=Uy(t,n+"declutter-mode"),b=new zl({src:r,anchorOrigin:h,anchorXUnits:A,anchorYUnits:d,color:f,crossOrigin:p,offset:g,offsetOrigin:m,height:y,width:v,size:w,declutterMode:_});return function(t){return a&&b.setOpacity(a(t)),l&&b.setDisplacement(l(t)),c&&b.setRotation(c(t)),u&&b.setRotateWithView(u(t)),o&&b.setScale(o(t)),s&&b.setAnchor(s(t)),b}}function by(t,e){const n="shape-",i=n+"points",r=n+"radius",s=Vy(t[i],i),o=Vy(t[r],r),a=my(t,n,e),l=vy(t,n,e),c=Ry(t,n+"scale",e),u=Fy(t,n+"displacement",e),h=Ey(t,n+"rotation",e),A=By(t,n+"rotate-with-view",e),d=My(t,n+"radius2"),f=My(t,n+"angle"),p=Uy(t,n+"declutter-mode"),g=new Lc({points:s,radius:o,radius2:d,angle:f,declutterMode:p});return function(t){return a&&g.setFill(a(t)),l&&g.setStroke(l(t)),u&&g.setDisplacement(u(t)),h&&g.setRotation(h(t)),A&&g.setRotateWithView(A(t)),c&&g.setScale(c(t)),g}}function xy(t,e){const n="circle-",i=my(t,n,e),r=vy(t,n,e),s=Ey(t,n+"radius",e),o=Ry(t,n+"scale",e),a=Fy(t,n+"displacement",e),l=Ey(t,n+"rotation",e),c=By(t,n+"rotate-with-view",e),u=Uy(t,n+"declutter-mode"),h=new Mc({radius:5,declutterMode:u});return function(t){return s&&h.setRadius(s(t)),i&&h.setFill(i(t)),r&&h.setStroke(r(t)),a&&h.setDisplacement(a(t)),l&&h.setRotation(l(t)),c&&h.setRotateWithView(c(t)),o&&h.setScale(o(t)),h}}function Ey(t,e,n){if(!(e in t))return;const i=ty(t[e],mv,n);return function(t){return Vy(i(t),e)}}function Cy(t,e,n){if(!(e in t))return null;const i=ty(t[e],vv,n);return function(t){return Hy(i(t),e)}}function Sy(t,e,n){const i=Cy(t,e+"pattern-src",n),r=Ly(t,e+"pattern-offset",n),s=Ly(t,e+"pattern-size",n),o=Ty(t,e+"color",n);return function(t){return{src:i(t),offset:r&&r(t),size:s&&s(t),color:o&&o(t)}}}function By(t,e,n){if(!(e in t))return null;const i=ty(t[e],gv,n);return function(t){const n=i(t);if("boolean"!==typeof n)throw new Error(`Expected a boolean for ${e}`);return n}}function Ty(t,e,n){if(!(e in t))return null;const i=ty(t[e],yv|vv,n);return function(t){return jy(i(t),e)}}function Iy(t,e,n){if(!(e in t))return null;const i=ty(t[e],wv,n);return function(t){return Gy(i(t),e)}}function Fy(t,e,n){if(!(e in t))return null;const i=ty(t[e],wv,n);return function(t){const n=Gy(i(t),e);if(2!==n.length)throw new Error(`Expected two numbers for ${e}`);return n}}function Ly(t,e,n){if(!(e in t))return null;const i=ty(t[e],wv,n);return function(t){return Wy(i(t),e)}}function Ry(t,e,n){if(!(e in t))return null;const i=ty(t[e],wv|mv,n);return function(t){return zy(i(t),e)}}function My(t,e){const n=t[e];if(void 0!==n){if("number"!==typeof n)throw new Error(`Expected a number for ${e}`);return n}}function Py(t,e){const n=t[e];if(void 0!==n){if("number"===typeof n)return Gl(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(2!==n.length||"number"!==typeof n[0]||"number"!==typeof n[1])throw new Error(`Expected a number or size array for ${e}`);return n}}function Ny(t,e){const n=t[e];if(void 0!==n){if("string"!==typeof n)throw new Error(`Expected a string for ${e}`);return n}}function Oy(t,e){const n=t[e];if(void 0!==n){if("bottom-left"!==n&&"bottom-right"!==n&&"top-left"!==n&&"top-right"!==n)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function ky(t,e){const n=t[e];if(void 0!==n){if("pixels"!==n&&"fraction"!==n)throw new Error(`Expected pixels or fraction for ${e}`);return n}}function Dy(t,e){const n=t[e];if(void 0!==n)return Gy(n,e)}function Uy(t,e){const n=t[e];if(void 0!==n){if("string"!==typeof n)throw new Error(`Expected a string for ${e}`);if("declutter"!==n&&"obstacle"!==n&&"none"!==n)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function Qy(t,e){const n=t[e];if(void 0!==n)return jy(n,e)}function Gy(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if("number"!==typeof t[i])throw new Error(`Expected an array of numbers for ${e}`);return t}function Hy(t,e){if("string"!==typeof t)throw new Error(`Expected a string for ${e}`);return t}function Vy(t,e){if("number"!==typeof t)throw new Error(`Expected a number for ${e}`);return t}function jy(t,e){if("string"===typeof t)return t;const n=Gy(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function Wy(t,e){const n=Gy(t,e);if(2!==n.length)throw new Error(`Expected an array of two numbers for ${e}`);return n}function zy(t,e){return"number"===typeof t?t:Wy(t,e)}const Ky={RENDER_ORDER:"renderOrder"};class qy extends Av{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(Ky.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const n=this.getDeclutter();n in t.declutter===!1&&(t.declutter[n]=new dv(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(Ky.RENDER_ORDER,t)}setStyle(t){this.style_=$y(t),this.styleFunction_=null===t?void 0:Nc(this.style_),this.changed()}}function $y(t){if(void 0===t)return kc;if(!t)return null;if("function"===typeof t)return t;if(t instanceof Qc)return t;if(!Array.isArray(t))return fy([t]);if(0===t.length)return[];const e=t.length,n=t[0];if(n instanceof Qc){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!(e instanceof Qc))throw new Error("Expected a list of style instances");n[i]=e}return n}if("style"in n){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!("style"in e))throw new Error("Expected a list of rules with a style property");n[i]=e}return dy(n)}const i=t;return fy(i)}var Xy=qy;class Yy extends f{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){U()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;at(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),lt(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,s,o,a){let l;const c=e.viewState;function u(t,e,n,i){return r.call(s,e,t?n:null,i)}const h=c.projection,A=tn(t.slice(),h),d=[[0,0]];if(h.canWrapX()&&i){const t=h.getExtent(),e=Jt(t);d.push([-e,0],[e,0])}const f=e.layerStatesArray,p=f.length,g=[],m=[];for(let y=0;y<d.length;y++)for(let i=p-1;i>=0;--i){const r=f[i],s=r.layer;if(s.hasRenderer()&&hv(r,c)&&o.call(a,s)){const i=s.getRenderer(),o=s.getSource();if(i&&o){const s=o.getWrapX()?A:t,a=u.bind(null,r.managed);m[0]=s[0]+d[y][0],m[1]=s[1]+d[y][1],l=i.forEachFeatureAtCoordinate(m,e,n,a,g)}if(l)return l}}if(0===g.length)return;const v=1/g.length;return g.forEach(((t,e)=>t.distanceSq+=e*v)),g.sort(((t,e)=>t.distanceSq-e.distanceSq)),g.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,n,i,r,s){const o=this.forEachFeatureAtCoordinate(t,e,n,i,x,this,r,s);return void 0!==o}getMap(){return this.map_}renderFrame(t){U()}scheduleExpireIconCache(t){Ml.canExpireCache()&&t.postRenderFunctions.push(Zy)}}function Zy(t,e){Ml.expire()}var Jy=Yy;class tw extends h{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}var ew=tw;class nw extends Jy{constructor(t){super(t),this.fontChangeListenerKey_=M(vc,A.PROPERTYCHANGE,t.redrawText.bind(t)),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=Jl+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new ew(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){N(this.fontChangeListenerKey_),this.element_.parentNode.removeChild(this.element_),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(Um.PRECOMPOSE,t);const e=t.layerStatesArray.sort((function(t,e){return t.zIndex-e.zIndex})),n=e.some((t=>t.layer instanceof Xy&&t.layer.getDeclutter()));n&&(t.declutter={});const i=t.viewState;this.children_.length=0;const r=[];let s=null;for(let o=0,a=e.length;o<a;++o){const n=e[o];t.layerIndex=o;const a=n.layer,l=a.getSourceState();if(!hv(n,i)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const c=a.render(t,s);c&&(c!==s&&(this.children_.push(c),s=c),r.push(n))}this.declutter(t,r),El(this.element_,this.children_),this.dispatchRenderEvent(Um.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){for(let n=e.length-1;n>=0;--n){const i=e[n],r=i.layer;r.getDeclutter()&&r.renderDeclutter(t,i)}e.forEach((e=>e.layer.renderDeferred(t)))}}var iw=nw;class rw extends h{constructor(t,e){super(t),this.layer=e}}const sw={LAYERS:"layers"};class ow extends Dm{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(sw.LAYERS,this.handleLayersChanged_),n?Array.isArray(n)?n=new Nm(n.slice(),{unique:!0}):z("function"===typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new Nm(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(N),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(M(t,Lm.ADD,this.handleLayersAdd_,this),M(t,Lm.REMOVE,this.handleLayersRemove_,this));for(const n in this.listenerKeys_)this.listenerKeys_[n].forEach(N);T(this.listenerKeys_);const e=t.getArray();for(let n=0,i=e.length;n<i;n++){const t=e[n];this.registerLayerListeners_(t),this.dispatchEvent(new rw("addlayer",t))}this.changed()}registerLayerListeners_(t){const e=[M(t,A.PROPERTYCHANGE,this.handleLayerChange_,this),M(t,R.CHANGE,this.handleLayerChange_,this)];t instanceof ow&&e.push(M(t,"addlayer",this.handleLayerGroupAdd_,this),M(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[G(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new rw("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new rw("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new rw("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=G(e);this.listenerKeys_[n].forEach(N),delete this.listenerKeys_[n],this.dispatchEvent(new rw("removelayer",e)),this.changed()}getLayers(){return this.get(sw.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new rw("removelayer",t[e]))}this.set(sw.LAYERS,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(let s=n,o=e.length;s<o;s++){const t=e[s];t.opacity*=i.opacity,t.visible=t.visible&&i.visible,t.maxResolution=Math.min(t.maxResolution,i.maxResolution),t.minResolution=Math.max(t.minResolution,i.minResolution),t.minZoom=Math.max(t.minZoom,i.minZoom),t.maxZoom=Math.min(t.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==t.extent?t.extent=qt(t.extent,i.extent):t.extent=i.extent),void 0===t.zIndex&&(t.zIndex=r)}return e}getSourceState(){return"ready"}}var aw=ow;class lw extends h{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}}var cw=lw;class uw extends cw{constructor(t,e,n,i,r,s){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}var hw=uw,Aw={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"};class dw extends L{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=M(n,Aw.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=M(n,Aw.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(R.TOUCHMOVE,this.boundHandleTouchMove_,!!fl&&{passive:!1})}emulateClick_(t){let e=new hw(Yg.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new hw(Yg.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new hw(Yg.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==Yg.POINTERUP||e.type==Yg.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=Yg.POINTERDOWN&&e.type!=Yg.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new hw(Yg.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(N),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new hw(Yg.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push(M(t,Yg.POINTERMOVE,this.handlePointerMove_,this),M(t,Yg.POINTERUP,this.handlePointerUp_,this),M(this.element_,Yg.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push(M(this.element_.getRootNode(),Yg.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new hw(Yg.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new hw(Yg.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"===typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(N(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(R.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(N(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(N),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var fw=dw,pw={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},gw={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"};const mw=1/0;class vw{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,T(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){z(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=mw&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],s=n[t],o=t;while(t<i>>1){const r=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),o=s<i&&n[s]<n[r]?s:r;e[t]=e[o],n[t]=n[o],t=o}e[t]=r,n[t]=s,this.siftDown_(o,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],s=i[e];while(e>t){const t=this.getParentIndex_(e);if(!(i[t]>s))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const r=e.length;let s,o,a;for(o=0;o<r;++o)s=e[o],a=t(s),a==mw?delete this.queuedElements_[this.keyFunction_(s)]:(n[i]=a,e[i++]=s);e.length=i,n.length=i,this.heapify_()}}var yw=vw,ww={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};class _w extends yw{constructor(t,e){super((function(e){return t.apply(null,e)}),(function(t){return t[0].getKey()})),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){const e=t[0];e.addEventListener(R.CHANGE,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===ww.LOADED||n===ww.ERROR||n===ww.EMPTY){n!==ww.ERROR&&e.removeEventListener(R.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n,i,r,s=0;while(this.tilesLoading_<t&&s<e&&this.getCount()>0)i=this.dequeue()[0],r=i.getKey(),n=i.getState(),n!==ww.IDLE||r in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[r]=!0,++this.tilesLoading_,++s,i.load())}}var bw=_w;function xw(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return mw;if(!t.wantedTiles[n][e.getKey()])return mw;const s=t.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+a*a)/r}class Ew extends W{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){bl(this.element),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&bl(this.element);for(let e=0,n=this.listenerKeys.length;e<n;++e)N(this.listenerKeys[e]);if(this.listenerKeys.length=0,this.map_=t,t){const e=this.target_?this.target_:t.getOverlayContainerStopEvent();e.appendChild(this.element),this.render!==C&&this.listenerKeys.push(M(t,pw.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"===typeof t?document.getElementById(t):t}}var Cw=Ew;class Sw extends Cw{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1);const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",r=void 0!==t.collapseLabel?t.collapseLabel:"",s=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"===typeof r?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=r,this.collapseLabel_.className=s):this.collapseLabel_=r;const o=void 0!==t.label?t.label:"i";"string"===typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o,this.label_.className=i):this.label_=o;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(a),this.toggleButton_.addEventListener(R.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+Jl+" "+ec+(this.collapsed_&&this.collapsible_?" "+nc:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=l,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=Array.from(new Set(this.getMap().getAllLayers().flatMap((e=>e.getAttributions(t))))),n=!this.getMap().getAllLayers().some((t=>t.getSource()&&!1===t.getSource().getAttributionsCollapsible()));return this.overrideCollapsible_||this.setCollapsible(n),e}updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=this.collectSourceAttributions_(t),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!_(e,this.renderedAttributions_)){xl(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(nc),this.collapsed_?_l(this.collapseLabel_,this.label_):_l(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}var Bw=Sw;class Tw extends Cw{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"===typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const r=t.tipLabel?t.tipLabel:"Reset rotation",s=document.createElement("button");s.className=e+"-reset",s.setAttribute("type","button"),s.title=r,s.appendChild(this.label_),s.addEventListener(R.CLICK,this.handleClick_.bind(this),!1);const o=e+" "+Jl+" "+ec,a=this.element;a.className=o,a.appendChild(s),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Yl)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap(),e=t.getView();if(!e)return;const n=e.getRotation();void 0!==n&&(this.duration_>0&&n%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:wm}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(Yl);t||0!==n?t&&0!==n&&this.element.classList.remove(Yl):this.element.classList.add(Yl)}this.label_.style.transform=t}this.rotation_=n}}var Iw=Tw;class Fw extends Cw{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",s=void 0!==t.zoomInLabel?t.zoomInLabel:"+",o=void 0!==t.zoomOutLabel?t.zoomOutLabel:"",a=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",l=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i,c.setAttribute("type","button"),c.title=a,c.appendChild("string"===typeof s?document.createTextNode(s):s),c.addEventListener(R.CLICK,this.handleClick_.bind(this,n),!1);const u=document.createElement("button");u.className=r,u.setAttribute("type","button"),u.title=l,u.appendChild("string"===typeof o?document.createTextNode(o):o),u.addEventListener(R.CLICK,this.handleClick_.bind(this,-n),!1);const h=e+" "+Jl+" "+ec,A=this.element;A.className=h,A.appendChild(c),A.appendChild(u),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap(),n=e.getView();if(!n)return;const i=n.getZoom();if(void 0!==i){const e=n.getConstrainedZoom(i+t);this.duration_>0?(n.getAnimating()&&n.cancelAnimations(),n.animate({zoom:e,duration:this.duration_,easing:wm})):n.setZoom(e)}}}var Lw=Fw;function Rw(t){t=t||{};const e=new Nm,n=void 0===t.zoom||t.zoom;n&&e.push(new Lw(t.zoomOptions));const i=void 0===t.rotate||t.rotate;i&&e.push(new Iw(t.rotateOptions));const r=void 0===t.attribution||t.attribution;return r&&e.push(new Bw(t.attributionOptions)),e}var Mw={ACTIVE:"active"};class Pw extends W{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(Mw.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(Mw.ACTIVE,t)}setMap(t){this.map_=t}}function Nw(t,e,n){const i=t.getCenterInternal();if(i){const r=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:bm,center:t.getConstrainedCenter(r)})}}function Ow(t,e,n,i){const r=t.getZoom();if(void 0===r)return;const s=t.getConstrainedZoom(r+e),o=t.getResolutionForZoom(s);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:o,anchor:n,duration:void 0!==i?i:250,easing:wm})}var kw=Pw;class Dw extends kw{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==Yg.DBLCLICK){const n=t.originalEvent,i=t.map,r=t.coordinate,s=n.shiftKey?-this.delta_:this.delta_,o=i.getView();Ow(o,s,r,this.duration_),n.preventDefault(),e=!0}return!e}}var Uw=Dw;class Qw extends kw{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==Yg.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==Yg.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==Yg.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==Yg.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function Gw(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}var Hw=Qw;class Vw extends Hw{constructor(t){super({stopDown:E}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Zg(um,vm);this.condition_=t.onFocusOnly?Zg(nm,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,i=e.getEventPixel(Gw(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(i[0],i[1]),this.lastCentroid){const e=[this.lastCentroid[0]-i[0],i[1]-this.lastCentroid[1]],n=t.map,r=n.getView();Xe(e,r.getResolution()),$e(e,r.getRotation()),r.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=i,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),r=n.getCenterInternal(),s=e.getPixelFromCoordinateInternal(r),o=e.getCoordinateFromPixelInternal([s[0]-t*Math.cos(i),s[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(o),duration:500,easing:wm})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map,n=e.getView();return this.lastCentroid=null,n.getAnimating()&&n.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}var jw=Vw;class Ww extends Hw{constructor(t){t=t||{},super({stopDown:E}),this.condition_=t.condition?t.condition:tm,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!pm(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===Ym)return;const i=e.getSize(),r=t.pixel,s=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=s}handleUpEvent(t){if(!pm(t))return!0;const e=t.map,n=e.getView();return n.endInteraction(this.duration_),!1}handleDownEvent(t){if(!pm(t))return!1;if(sm(t)&&this.condition_(t)){const e=t.map;return e.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}var zw=Ww;class Kw extends f{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]],i=n.map(this.map_.getCoordinateFromPixelInternal,this.map_);i[4]=i[0].slice(),this.geometry_?this.geometry_.setCoordinates([i]):this.geometry_=new rr([i])}getGeometry(){return this.geometry_}}var qw=Kw;const $w={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Xw extends h{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class Yw extends Hw{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.box_=new qw(t.className||"ol-dragbox"),this.minArea_=void 0!==t.minArea?t.minArea:64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition?t.condition:sm,this.boxEndCondition_=t.boxEndCondition?t.boxEndCondition:this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Xw($w.BOXDRAG,t.coordinate,t))}handleUpEvent(t){this.box_.setMap(null);const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Xw(e?$w.BOXEND:$w.BOXCANCEL,t.coordinate,t)),!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Xw($w.BOXSTART,t.coordinate,t)),!0)}onBoxEnd(t){}}var Zw=Yw;class Jw extends Zw{constructor(t){t=t||{};const e=t.condition?t.condition:dm;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap(),n=e.getView();let i=this.getGeometry();if(this.out_){const t=n.rotatedExtentForGeometry(i),e=n.getResolutionForExtentInternal(t),r=n.getResolution()/e;i=i.clone(),i.scale(r*r)}n.fitInternal(i,{duration:this.duration_,easing:wm})}}var t_=Jw,e_={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class n_ extends kw{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return um(t)&&fm(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==R.KEYDOWN){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==e_.DOWN||i==e_.LEFT||i==e_.RIGHT||i==e_.UP)){const r=t.map,s=r.getView(),o=s.getResolution()*this.pixelDelta_;let a=0,l=0;i==e_.DOWN?l=-o:i==e_.LEFT?a=-o:i==e_.RIGHT?a=o:l=o;const c=[a,l];$e(c,s.getRotation()),Nw(s,c,this.duration_),n.preventDefault(),e=!0}}return!e}}var i_=n_;class r_ extends kw{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!Am(t)&&fm(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==R.KEYDOWN||t.type==R.KEYPRESS){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&("+"===i||"-"===i)){const r=t.map,s="+"===i?this.delta_:-this.delta_,o=r.getView();Ow(o,s,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}var s_=r_;class o_{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;while(n>0&&this.points_[n+2]>t)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[e]-this.points_[n],s=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(s,r),this.initialVelocity_=Math.sqrt(r*r+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}var a_=o_;class l_ extends kw{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:im;this.condition_=t.onFocusOnly?Zg(nm,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;const e=t.getView();e.endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_)}handleEvent(t){if(!this.condition_(t))return!0;const e=t.type;if(e!==R.WHEEL)return!0;const n=t.map,i=t.originalEvent;let r;if(i.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.coordinate),t.type==R.WHEEL&&(r=i.deltaY,sl&&i.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(r/=ul),i.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),0===r)return!1;this.lastDelta_=r;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const o=n.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_),this.startTime_=s,!1;this.totalDelta_+=r;const a=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,n),a),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-Me(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),Ow(e,n,this.lastAnchor_,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}var c_=l_;class u_ extends Hw{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=E),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const s=t.map,o=s.getView();o.getConstraints().rotation!==Ym&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel(Gw(this.targetPointers))),this.rotating_&&(s.render(),o.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map,n=e.getView();return n.endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var h_=u_;class A_ extends Hw{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=E),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,s=n.clientY-i.clientY,o=Math.sqrt(r*r+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/o),this.lastDistance_=o;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel(Gw(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map,n=e.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var d_=A_;function f_(t){t=t||{};const e=new Nm,n=new a_(-.005,.05,100),i=void 0===t.altShiftDragRotate||t.altShiftDragRotate;i&&e.push(new zw);const r=void 0===t.doubleClickZoom||t.doubleClickZoom;r&&e.push(new Uw({delta:t.zoomDelta,duration:t.zoomDuration}));const s=void 0===t.dragPan||t.dragPan;s&&e.push(new jw({onFocusOnly:t.onFocusOnly,kinetic:n}));const o=void 0===t.pinchRotate||t.pinchRotate;o&&e.push(new h_);const a=void 0===t.pinchZoom||t.pinchZoom;a&&e.push(new d_({duration:t.zoomDuration}));const l=void 0===t.keyboard||t.keyboard;l&&(e.push(new i_),e.push(new s_({delta:t.zoomDelta,duration:t.zoomDuration})));const c=void 0===t.mouseWheelZoom||t.mouseWheelZoom;c&&e.push(new c_({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));const u=void 0===t.shiftDragZoom||t.shiftDragZoom;return u&&e.push(new t_({duration:t.zoomDuration})),e}function p_(t){t instanceof Av?t.setMapInternal(null):t instanceof aw&&t.getLayers().forEach(p_)}function g_(t,e){if(t instanceof Av)t.setMapInternal(e);else if(t instanceof aw){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)g_(n[t],e)}}class m_ extends W{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=v_(t);this.renderComplete_,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:ul,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=Y(),this.pixelToCoordinateTransform_=Y(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||Rw(),this.interactions=e.interactions||f_({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new bw(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(gw.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(gw.VIEW,this.handleViewChanged_),this.addChangeListener(gw.SIZE,this.handleSizeChanged_),this.addChangeListener(gw.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof cv||t.view.then((function(t){n.setView(new cv(t))})),this.controls.addEventListener(Lm.ADD,(t=>{t.element.setMap(this)})),this.controls.addEventListener(Lm.REMOVE,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(Lm.ADD,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(Lm.REMOVE,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(Lm.ADD,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(Lm.REMOVE,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){const e=this.getLayerGroup().getLayers();e.push(t)}handleLayerAdd_(t){g_(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t);n=void 0!==n?n:{};const r=void 0!==n.hitTolerance?n.hitTolerance:0,s=void 0!==n.layerFilter?n.layerFilter:x,o=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,o,e,null,s,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];function e(n){n.forEach((function(n){n instanceof aw?e(n.getLayers()):t.push(n)}))}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t);e=void 0!==e?e:{};const i=void 0!==e.layerFilter?e.layerFilter:x,r=void 0!==e.hitTolerance?e.hitTolerance:0,s=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,s,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_,n=e.getBoundingClientRect(),i=this.getSize(),r=n.width/i[0],s=n.height/i[1],o="changedTouches"in t?t.changedTouches[0]:t;return[(o.clientX-n.left)/r,(o.clientY-n.top)/s]}getTarget(){return this.get(gw.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Fn(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?nt(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(gw.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof Nm)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){const t=this.getLayerGroup().getLayers();return t}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=Ln(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?nt(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(gw.SIZE)}getView(){return this.get(gw.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return xw(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new hw(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===Aw.POINTERDOWN||n===R.WHEEL||n===R.KEYDOWN){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target;if(this.overlayContainerStopEvent_.contains(i)||!(n===t?t.documentElement:n).contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;const r=i.handleEvent(t);if(!r||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[Qm.ANIMATING]||e[Qm.INTERACTING]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(!0===this.renderComplete_?(this.hasListener(Um.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Um.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new cw(pw.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new cw(pw.LOADSTART,this,t))));const n=this.postRenderFunctions_;for(let i=0,r=n.length;i<r;++i)n[i](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)N(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(R.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(R.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,bl(this.viewport_)}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"===typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new iw(this)),this.mapBrowserEventHandler_=new fw(this,this.moveTolerance_);for(const e in Yg)this.mapBrowserEventHandler_.addEventListener(Yg[e],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(R.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(R.WHEEL,this.boundHandleBrowserEvent_,!!fl&&{passive:!1});const t=this.keyboardEventTarget_?this.keyboardEventTarget_:e;this.targetChangeHandlerKeys_=[M(t,R.KEYDOWN,this.handleBrowserEvent,this),M(t,R.KEYPRESS,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(N(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(N(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=M(t,A.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=M(t,R.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(N),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new rw("addlayer",t)),this.layerGroupPropertyListenerKeys_=[M(t,A.PROPERTYCHANGE,this.render,this),M(t,R.CHANGE,this.render,this),M(t,"addlayer",this.handleLayerAdd_,this),M(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){const e=this.getLayerGroup().getLayers();return e.remove(t)}handleLayerRemove_(t){p_(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==e&&Ul(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:jt(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:i,wantedTiles:{},mapId:G(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const t=isNaN(s.nextRotation)?s.rotation:s.nextRotation;r.nextExtent=jt(s.nextCenter,s.nextResolution,t,e)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i){const t=!this.previousExtent_||!ee(this.previousExtent_)&&!It(r.extent,this.previousExtent_);t&&(this.dispatchEvent(new cw(pw.MOVESTART,this,i)),this.previousExtent_=Et(this.previousExtent_))}const t=this.previousExtent_&&!r.viewHints[Qm.ANIMATING]&&!r.viewHints[Qm.INTERACTING]&&!It(r.extent,this.previousExtent_);t&&(this.dispatchEvent(new cw(pw.MOVEEND,this,r)),gt(r.extent,this.previousExtent_))}this.dispatchEvent(new cw(pw.POSTRENDER,this,r)),this.renderComplete_=this.hasListener(pw.LOADSTART)||this.hasListener(pw.LOADEND)||this.hasListener(Um.RENDERCOMPLETE)?!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady():void 0,this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new rw("removelayer",e)),this.set(gw.LAYERGROUP,t)}setSize(t){this.set(gw.SIZE,t)}setTarget(t){this.set(gw.TARGET,t)}setView(t){if(!t||t instanceof cv)return void this.set(gw.VIEW,t);this.set(gw.VIEW,new cv);const e=this;t.then((function(t){e.setView(new cv(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n["borderLeftWidth"])-parseFloat(n["paddingLeft"])-parseFloat(n["paddingRight"])-parseFloat(n["borderRightWidth"]),r=t.offsetHeight-parseFloat(n["borderTopWidth"])-parseFloat(n["paddingTop"])-parseFloat(n["paddingBottom"])-parseFloat(n["borderBottomWidth"]);isNaN(i)||isNaN(r)||(e=[i,r],!Ul(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&ln("No map visible because the map container's width or height are 0."))}const n=this.getSize();!e||n&&_(e,n)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}}function v_(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"===typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},i=t.layers&&"function"===typeof t.layers.getLayers?t.layers:new aw({layers:t.layers});let r,s,o;return n[gw.LAYERGROUP]=i,n[gw.TARGET]=t.target,n[gw.VIEW]=t.view instanceof cv?t.view:new cv,void 0!==t.controls&&(Array.isArray(t.controls)?r=new Nm(t.controls.slice()):(z("function"===typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),r=t.controls)),void 0!==t.interactions&&(Array.isArray(t.interactions)?s=new Nm(t.interactions.slice()):(z("function"===typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),s=t.interactions)),void 0!==t.overlays?Array.isArray(t.overlays)?o=new Nm(t.overlays.slice()):(z("function"===typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),o=t.overlays):o=new Nm,{controls:r,interactions:s,keyboardEventTarget:e,overlays:o,values:n}}var y_=m_;const w_={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class __ extends W{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+Zl,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(w_.ELEMENT,this.handleElementChanged),this.addChangeListener(w_.MAP,this.handleMapChanged),this.addChangeListener(w_.OFFSET,this.handleOffsetChanged),this.addChangeListener(w_.POSITION,this.handlePositionChanged),this.addChangeListener(w_.POSITIONING,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(w_.ELEMENT)}getId(){return this.id}getMap(){return this.get(w_.MAP)||null}getOffset(){return this.get(w_.OFFSET)}getPosition(){return this.get(w_.POSITION)}getPositioning(){return this.get(w_.POSITIONING)}handleElementChanged(){xl(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(bl(this.element),N(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=M(t,pw.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(w_.ELEMENT,t)}setMap(t){this.set(w_.MAP,t)}setOffset(t){this.set(w_.OFFSET,t)}setPosition(t){this.set(w_.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(w_.POSITION))return;const n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),r=this.getRect(i,[yl(i),wl(i)]);t=t||{};const s=void 0===t.margin?20:t.margin;if(!yt(n,r)){const i=r[0]-n[0],o=n[2]-r[2],a=r[1]-n[1],l=n[3]-r[3],c=[0,0];if(i<0?c[0]=i-s:o<0&&(c[0]=Math.abs(o)+s),a<0?c[1]=a-s:l<0&&(c[1]=Math.abs(l)+s),0!==c[0]||0!==c[1]){const n=e.getView().getCenterInternal(),i=e.getPixelFromCoordinateInternal(n);if(!i)return;const r=[i[0]+c[0],i[1]+c[1]],s=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(r),duration:s.duration,easing:s.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[i,r,i+e[0],r+e[1]]}setPositioning(t){this.set(w_.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(t,e){const n=this.element.style,i=this.getOffset(),r=this.getPositioning();this.setVisible(!0);const s=Math.round(t[0]+i[0])+"px",o=Math.round(t[1]+i[1])+"px";let a="0%",l="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?a="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(a="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?l="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(l="-50%");const c=`translate(${a}, ${l}) translate(${s}, ${o})`;this.rendered.transform_!=c&&(this.rendered.transform_=c,n.transform=c)}getOptions(){return this.options}}var b_=__;let x_=null;function E_(t){x_=t;const e=Object.keys(t.defs),n=e.length;let i,r;for(i=0;i<n;++i){const n=e[i];if(!gn(n)){const e=t.defs(n);let i=e.units;i||"longlat"!==e.projName||(i="degrees"),fn(new Ae({code:n,axisOrientation:e.axis,metersPerUnit:e.to_meter,units:i}))}}for(i=0;i<n;++i){const s=e[i],o=gn(s);for(r=0;r<n;++r){const n=e[r],i=gn(n);if(!Re(s,n))if(t.defs[s]===t.defs[n])vn([o,i]);else{const e=t(s,n);bn(o,i,On(o,i,e.forward),On(i,o,e.inverse))}}}}class C_{constructor(t){this.rbush_=new dv(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[G(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const r=t[i],s=e[i],o={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:s};n[i]=o,this.items_[G(s)]=o}this.rbush_.load(n)}remove(t){const e=G(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[G(e)],i=[n.minX,n.minY,n.maxX,n.maxY];It(i,t)||(this.remove(e),this.insert(t,e))}getAll(){const t=this.rbush_.all();return t.map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]},n=this.rbush_.search(e);return n.map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,r=t.length;i<r;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return I(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return xt(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}var S_=C_;class B_ extends W{constructor(t){super(),this.projection=gn(t.projection),this.attributions_=T_(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=T_(t),this.changed()}setState(t){this.state_=t,this.changed()}}function T_(t){return t?Array.isArray(t)?function(e){return t}:"function"===typeof t?t:function(e){return[t]}:null}var I_=B_,F_={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};let L_=!1;function R_(t,e,n,i,r,s,o){const a=new XMLHttpRequest;a.open("GET","function"===typeof t?t(n,i,r):t,!0),"arraybuffer"==e.getType()&&(a.responseType="arraybuffer"),a.withCredentials=L_,a.onload=function(t){if(!a.status||a.status>=200&&a.status<300){const t=e.getType();let i;"json"==t?i=JSON.parse(a.responseText):"text"==t?i=a.responseText:"xml"==t?(i=a.responseXML,i||(i=(new DOMParser).parseFromString(a.responseText,"application/xml"))):"arraybuffer"==t&&(i=a.response),i?s(e.readFeatures(i,{extent:n,featureProjection:r}),e.readProjection(i)):o()}else o()},a.onerror=o,a.send()}function M_(t,e){return function(n,i,r,s,o){const a=this;R_(t,e,n,i,r,(function(t,e){a.addFeatures(t),void 0!==s&&s(t)}),o||C)}}class P_ extends h{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class N_ extends I_{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=C,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&(z(this.format_,"`format` must be set when `url` is set"),this.loader_=M_(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:qg;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,i;this.featuresRtree_=e?new S_:null,this.loadedExtentsRtree_=new S_,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(n=t.features,i=n.getArray()),e||void 0!==n||(n=new Nm(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=G(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new P_(F_.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof fr||(this.featureChangeKeys_[t]=[M(e,R.CHANGE,this.handleFeatureChange_,this),M(e,A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0;if(void 0!==e.getId()){const t=String(e.getId());if(t in this.idIndex_)if(e instanceof fr){const i=this.idIndex_[t];i instanceof fr?Array.isArray(i)?i.push(e):this.idIndex_[t]=[i,e]:n=!1}else n=!1;else this.idIndex_[t]=e}return n&&(z(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let r=0,s=t.length;r<s;r++){const e=t[r],i=G(e);this.addToIndex_(i,e)&&n.push(e)}for(let r=0,s=n.length;r<s;r++){const t=n[r],s=G(t);this.setupChangeEvents_(s,t);const o=t.getGeometry();if(o){const n=o.getExtent();e.push(n),i.push(t)}else this.nullGeometryFeatures_[s]=t}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(F_.ADDFEATURE))for(let r=0,s=n.length;r<s;r++)this.dispatchEvent(new P_(F_.ADDFEATURE,n[r]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(F_.ADDFEATURE,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(F_.REMOVEFEATURE,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(Lm.ADD,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(Lm.REMOVE,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){const e=this.featureChangeKeys_[t];e.forEach(N)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){const t=t=>{this.removeFeatureInternal(t)};this.featuresRtree_.forEach(t);for(const e in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[e])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new P_(F_.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){const i=n.getGeometry();if(i instanceof fr||i.intersectsCoordinate(t))return e(n)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(n){const i=n.getGeometry();if(i instanceof fr||i.intersectsExtent(t)){const t=e(n);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),I(this.nullGeometryFeatures_)||w(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){const n=e&&e.canWrapX()&&this.getWrapX();if(!n)return this.featuresRtree_.getInExtent(t);const i=ae(t,e);return[].concat(...i.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let r=null;const s=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||x,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=o;if(o=e instanceof fr?0:e.closestPointXY(n,i,s,o),o<l){r=t;const e=Math.sqrt(o);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=G(e),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new P_(F_.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:G(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&I(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let s=0,o=r.length;s<o;++s){const t=r[s],o=i.forEachInExtent(t,(function(e){return yt(e.extent,t)}));o||(++this.loadingExtentsCount_,this.dispatchEvent(new P_(F_.FEATURESLOADSTART)),this.loader_.call(this,t,e,n,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new P_(F_.FEATURESLOADEND,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new P_(F_.FEATURESLOADERROR))})),i.insert(t,{extent:t.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_;let n;e.forEachInExtent(t,(function(e){if(It(e.extent,t))return n=e,!0})),n&&e.remove(n)}removeFeature(t){if(!t)return;const e=G(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const n=this.removeFeatureInternal(t);n&&this.changed()}removeFeatureInternal(t){const e=G(t),n=this.featureChangeKeys_[e];if(!n)return;n.forEach(N),delete this.featureChangeKeys_[e];const i=t.getId();return void 0!==i&&delete this.idIndex_[i.toString()],delete this.uidIndex_[e],this.dispatchEvent(new P_(F_.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(const n in this.idIndex_){const i=this.idIndex_[n];if(t instanceof fr&&Array.isArray(i)&&i.includes(t))i.splice(i.indexOf(t),1);else if(this.idIndex_[n]===t){delete this.idIndex_[n],e=!0;break}}return e}setLoader(t){this.loader_=t}setUrl(t){z(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(M_(t,this.format_))}}var O_=N_;class k_ extends O_{constructor(t){super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(t){const e=t.getGeometry();return z(!e||"Point"===e.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),e},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,n){this.source.loadFeatures(t,e,n),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(R.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(R.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const n=0===t?0:Math.min(e,t)/t,i=t!==this.distance||this.interpolationRatio!==n;this.distance=t,this.minDistance=e,this.interpolationRatio=n,i&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const t=bt(),e=this.distance*this.resolution,n=this.source.getFeatures(),i={};for(let r=0,s=n.length;r<s;r++){const s=n[r];if(!(G(s)in i)){const n=this.geometryFunction(s);if(n){const r=n.getCoordinates();Ct(r,t),pt(t,e,t);const s=this.source.getFeaturesInExtent(t).filter((function(t){const e=G(t);return!(e in i)&&(i[e]=!0,!0)}));this.features.push(this.createCluster(s,t))}}}}createCluster(t,e){const n=[0,0];for(let o=t.length-1;o>=0;--o){const e=this.geometryFunction(t[o]);e?We(n,e.getCoordinates()):t.splice(o,1)}Xe(n,1/t.length);const i=Gt(e),r=this.interpolationRatio,s=new Wi([n[0]*(1-r)+i[0]*r,n[1]*(1-r)+i[1]*r]);return this.createCustomCluster_?this.createCustomCluster_(s,t):new $({geometry:s,features:t})}}var D_=k_;const U_={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},Q_=[U_.FILL],G_=[U_.STROKE],H_=[U_.BEGIN_PATH],V_=[U_.CLOSE_PATH];var j_=U_;class W_{drawCustom(t,e,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,n){}drawFeature(t,e,n){}drawGeometryCollection(t,e,n){}drawLineString(t,e,n){}drawMultiLineString(t,e,n){}drawMultiPoint(t,e,n){}drawMultiPolygon(t,e,n){}drawPoint(t,e,n){}drawPolygon(t,e,n){}drawText(t,e,n){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}var z_=W_;class K_ extends z_{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates;let s=r.length;for(let o=0,a=t.length;o<a;o+=e)i[0]=t[o],i[1]=t[o+1],vt(n,i)&&(r[s++]=i[0],r[s++]=i[1]);return s}appendFlatLineCoordinates(t,e,n,i,r,s){const o=this.coordinates;let a=o.length;const l=this.getBufferedMaxExtent();s&&(e+=i);let c=t[e],u=t[e+1];const h=this.tmpCoordinate_;let A,d,f,p=!0;for(A=e+i;A<n;A+=i)h[0]=t[A],h[1]=t[A+1],f=_t(l,h),f!==d?(p&&(o[a++]=c,o[a++]=u,p=!1),o[a++]=h[0],o[a++]=h[1]):f===At.INTERSECTING?(o[a++]=h[0],o[a++]=h[1],p=!1):p=!0,c=h[0],u=h[1],d=f;return(r&&p||A===e+i)&&(o[a++]=c,o[a++]=u),a}drawCustomCoordinates_(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s],a=this.appendFlatLineCoordinates(t,e,o,i,!1,!1);r.push(a),e=o}return e}drawCustom(t,e,n,i,r){this.beginGeometry(t,e,r);const s=t.getType(),o=t.getStride(),a=this.coordinates.length;let l,c,u,h,A;switch(s){case"MultiPolygon":l=t.getOrientedFlatCoordinates(),h=[];const e=t.getEndss();A=0;for(let t=0,n=e.length;t<n;++t){const n=[];A=this.drawCustomCoordinates_(l,A,e[t],o,n),h.push(n)}this.instructions.push([j_.CUSTOM,a,h,t,n,wi,r]),this.hitDetectionInstructions.push([j_.CUSTOM,a,h,t,i||n,wi,r]);break;case"Polygon":case"MultiLineString":u=[],l="Polygon"==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),A=this.drawCustomCoordinates_(l,0,t.getEnds(),o,u),this.instructions.push([j_.CUSTOM,a,u,t,n,yi,r]),this.hitDetectionInstructions.push([j_.CUSTOM,a,u,t,i||n,yi,r]);break;case"LineString":case"Circle":l=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(l,0,l.length,o,!1,!1),this.instructions.push([j_.CUSTOM,a,c,t,n,vi,r]),this.hitDetectionInstructions.push([j_.CUSTOM,a,c,t,i||n,vi,r]);break;case"MultiPoint":l=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(l,o),c>a&&(this.instructions.push([j_.CUSTOM,a,c,t,n,vi,r]),this.hitDetectionInstructions.push([j_.CUSTOM,a,c,t,i||n,vi,r]));break;case"Point":l=t.getFlatCoordinates(),this.coordinates.push(l[0],l[1]),c=this.coordinates.length,this.instructions.push([j_.CUSTOM,a,c,t,n,void 0,r]),this.hitDetectionInstructions.push([j_.CUSTOM,a,c,t,i||n,void 0,r]);break;default:}this.endGeometry(e)}beginGeometry(t,e,n){this.beginGeometryInstruction1_=[j_.BEGIN_GEOMETRY,e,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[j_.BEGIN_GEOMETRY,e,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let i,r,s=-1;for(e=0;e<n;++e)i=t[e],r=i[0],r==j_.END_GEOMETRY?s=e:r==j_.BEGIN_GEOMETRY&&(i[2]=e,y(this.hitDetectionInstructions,s,e),s=-1)}setFillStrokeStyle(t,e){const n=this.state;if(t){const e=t.getColor();n.fillPatternScale=e&&"object"===typeof e&&"src"in e?this.pixelRatio:1,n.fillStyle=$l(e||ac)}else n.fillStyle=void 0;if(e){const t=e.getColor();n.strokeStyle=$l(t||dc);const i=e.getLineCap();n.lineCap=void 0!==i?i:lc;const r=e.getLineDash();n.lineDash=r?r.slice():cc;const s=e.getLineDashOffset();n.lineDashOffset=s||uc;const o=e.getLineJoin();n.lineJoin=void 0!==o?o:hc;const a=e.getWidth();n.lineWidth=void 0!==a?a:mc;const l=e.getMiterLimit();n.miterLimit=void 0!==l?l:Ac,n.lineWidth>this.maxLineWidth&&(this.maxLineWidth=n.lineWidth,this.bufferedMaxExtent_=null)}else n.strokeStyle=void 0,n.lineCap=void 0,n.lineDash=null,n.lineDashOffset=void 0,n.lineJoin=void 0,n.lineWidth=void 0,n.miterLimit=void 0}createFill(t){const e=t.fillStyle,n=[j_.SET_FILL_STYLE,e];return"string"!==typeof e&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[j_.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;"string"===typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,i=t.lineCap,r=t.lineDash,s=t.lineDashOffset,o=t.lineJoin,a=t.lineWidth,l=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=i||r!=t.currentLineDash&&!_(t.currentLineDash,r)||t.currentLineDashOffset!=s||t.currentLineJoin!=o||t.currentLineWidth!=a||t.currentMiterLimit!=l)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=i,t.currentLineDash=r,t.currentLineDashOffset=s,t.currentLineJoin=o,t.currentLineWidth=a,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[j_.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=gt(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;pt(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var q_=K_;class $_ extends q_{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,n){if(!this.image_||this.maxExtent&&!vt(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),r=t.getStride(),s=this.coordinates.length,o=this.appendFlatPointCoordinates(i,r);this.instructions.push([j_.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([j_.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,n){if(!this.image_)return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),r=[];for(let a=0,l=i.length;a<l;a+=t.getStride())this.maxExtent&&!vt(this.maxExtent,i.slice(a,a+2))||r.push(i[a],i[a+1]);const s=this.coordinates.length,o=this.appendFlatPointCoordinates(r,2);this.instructions.push([j_.DRAW_IMAGE,s,o,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([j_.DRAW_IMAGE,s,o,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}var X_=$_;class Y_ extends q_{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const r=this.coordinates.length,s=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),o=[j_.MOVE_TO_LINE_TO,r,s];return this.instructions.push(o),this.hitDetectionInstructions.push(o),n}drawLineString(t,e,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0===r||void 0===s)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([j_.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cc,uc],H_);const o=t.getFlatCoordinates(),a=t.getStride();this.drawFlatCoordinates_(o,0,o.length,a),this.hitDetectionInstructions.push(G_),this.endGeometry(e)}drawMultiLineString(t,e,n){const i=this.state,r=i.strokeStyle,s=i.lineWidth;if(void 0===r||void 0===s)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([j_.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cc,uc],H_);const o=t.getEnds(),a=t.getFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinates_(a,c,o[u],l);this.hitDetectionInstructions.push(G_),this.endGeometry(e)}finish(){const t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(G_),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(G_),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(H_)}}var Z_=Y_;class J_ extends q_{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const r=this.state,s=void 0!==r.fillStyle,o=void 0!==r.strokeStyle,a=n.length;this.instructions.push(H_),this.hitDetectionInstructions.push(H_);for(let l=0;l<a;++l){const r=n[l],s=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,r,i,!0,!o),c=[j_.MOVE_TO_LINE_TO,s,a];this.instructions.push(c),this.hitDetectionInstructions.push(c),o&&(this.instructions.push(V_),this.hitDetectionInstructions.push(V_)),e=r}return s&&(this.instructions.push(Q_),this.hitDetectionInstructions.push(Q_)),o&&(this.instructions.push(G_),this.hitDetectionInstructions.push(G_)),e}drawCircle(t,e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0===r&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([j_.SET_FILL_STYLE,ac]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([j_.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cc,uc]);const o=t.getFlatCoordinates(),a=t.getStride(),l=this.coordinates.length;this.appendFlatLineCoordinates(o,0,o.length,a,!1,!1);const c=[j_.CIRCLE,l];this.instructions.push(H_,c),this.hitDetectionInstructions.push(H_,c),void 0!==i.fillStyle&&(this.instructions.push(Q_),this.hitDetectionInstructions.push(Q_)),void 0!==i.strokeStyle&&(this.instructions.push(G_),this.hitDetectionInstructions.push(G_)),this.endGeometry(e)}drawPolygon(t,e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0===r&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([j_.SET_FILL_STYLE,ac]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([j_.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cc,uc]);const o=t.getEnds(),a=t.getOrientedFlatCoordinates(),l=t.getStride();this.drawFlatCoordinatess_(a,0,o,l),this.endGeometry(e)}drawMultiPolygon(t,e,n){const i=this.state,r=i.fillStyle,s=i.strokeStyle;if(void 0===r&&void 0===s)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([j_.SET_FILL_STYLE,ac]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([j_.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,cc,uc]);const o=t.getEndss(),a=t.getOrientedFlatCoordinates(),l=t.getStride();let c=0;for(let u=0,h=o.length;u<h;++u)c=this.drawFlatCoordinatess_(a,c,o[u],l);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=fi(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state,e=t.fillStyle;void 0!==e&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}var tb=J_;function eb(t,e,n,i,r){const s=[];let o=n,a=0,l=e.slice(n,2);while(a<t&&o+r<i){const[n,i]=l.slice(-2),c=e[o+r],u=e[o+r+1],h=Math.sqrt((c-n)*(c-n)+(u-i)*(u-i));if(a+=h,a>=t){const e=(t-a+h)/h,A=Qe(n,c,e),d=Qe(i,u,e);l.push(A,d),s.push(l),l=[A,d],a==t&&(o+=r),a=0}else if(a<t)l.push(e[o+r],e[o+r+1]),o+=r;else{const t=h-a,e=Qe(n,c,t/h),A=Qe(i,u,t/h);l.push(e,A),s.push(l),l=[e,A],a=0,o+=r}}return a>0&&s.push(l),s}function nb(t,e,n,i,r){let s,o,a,l,c,u,h,A,d,f,p=n,g=n,m=0,v=0,y=n;for(o=n;o<i;o+=r){const n=e[o],i=e[o+1];void 0!==c&&(d=n-c,f=i-u,l=Math.sqrt(d*d+f*f),void 0!==h&&(v+=a,s=Math.acos((h*d+A*f)/(a*l)),s>t&&(v>m&&(m=v,p=y,g=o),v=0,y=o-r)),a=l,h=d,A=f),c=n,u=i}return v+=l,v>m?[y,o]:[p,g]}const ib={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class rb extends q_{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[ac]={fillStyle:ac},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,n){const i=this.textFillState_,r=this.textStrokeState_,s=this.textState_;if(""===this.text_||!s||!i&&!r)return;const o=this.coordinates;let a=o.length;const l=t.getType();let c=null,u=t.getStride();if("line"!==s.placement||"LineString"!=l&&"MultiLineString"!=l&&"Polygon"!=l&&"MultiPolygon"!=l){let i=s.overflow?null:[];switch(l){case"Point":case"MultiPoint":c=t.getFlatCoordinates();break;case"LineString":c=t.getFlatMidpoint();break;case"Circle":c=t.getCenter();break;case"MultiLineString":c=t.getFlatMidpoints(),u=2;break;case"Polygon":c=t.getFlatInteriorPoint(),s.overflow||i.push(c[2]/this.resolution),u=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();c=[];for(let t=0,n=e.length;t<n;t+=3)s.overflow||i.push(e[t+2]/this.resolution),c.push(e[t],e[t+1]);if(0===c.length)return;u=2;break;default:}const r=this.appendFlatPointCoordinates(c,u);if(r===a)return;if(i&&(r-a)/2!==c.length/u){let t=a/2;i=i.filter(((e,n)=>{const i=o[2*(t+n)]===c[n*u]&&o[2*(t+n)+1]===c[n*u+1];return i||--t,i}))}this.saveTextStates_(),(s.backgroundFill||s.backgroundStroke)&&(this.setFillStrokeStyle(s.backgroundFill,s.backgroundStroke),s.backgroundFill&&this.updateFillStyle(this.state,this.createFill),s.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e,n);let h=s.padding;if(h!=gc&&(s.scale[0]<0||s.scale[1]<0)){let t=s.padding[0],e=s.padding[1],n=s.padding[2],i=s.padding[3];s.scale[0]<0&&(e=-e,i=-i),s.scale[1]<0&&(t=-t,n=-n),h=[t,e,n,i]}const A=this.pixelRatio;this.instructions.push([j_.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,h==gc?gc:h.map((function(t){return t*A})),!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const d=1/A,f=this.state.fillStyle;s.backgroundFill&&(this.state.fillStyle=ac,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([j_.DRAW_IMAGE,a,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[d,d],NaN,this.declutterMode_,this.declutterImageWithText_,h,!!s.backgroundFill,!!s.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?ac:this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),s.backgroundFill&&(this.state.fillStyle=f,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}else{if(!te(this.maxExtent,t.getExtent()))return;let i;if(c=t.getFlatCoordinates(),"LineString"==l)i=[c.length];else if("MultiLineString"==l)i=t.getEnds();else if("Polygon"==l)i=t.getEnds().slice(0,1);else if("MultiPolygon"==l){const e=t.getEndss();i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e,n);const r=s.repeat,h=r?void 0:s.textAlign;let A=0;for(let t=0,e=i.length;t<e;++t){let e;e=r?eb(r*this.resolution,c,A,i[t],u):[c.slice(A,i[t])];for(let n=0,r=e.length;n<r;++n){const r=e[n];let l=0,c=r.length;if(void 0==h){const t=nb(s.maxAngle,r,0,r.length,2);l=t[0],c=t[1]}for(let t=l;t<c;t+=u)o.push(r[t],r[t+1]);const d=o.length;A=i[t],this.drawChars_(a,d),a=d}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||fc,justify:e.justify,textBaseline:e.textBaseline||pc,scale:e.scale});const s=this.fillKey_;n&&(s in this.fillStates||(this.fillStates[s]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,s=this.textKey_,o=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=ib[i.textBaseline],c=this.textOffsetY_*a,u=this.text_,h=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([j_.DRAW_CHARS,t,e,l,i.overflow,o,i.maxAngle,a,c,r,h*a,u,s,1,this.declutterMode_]),this.hitDetectionInstructions.push([j_.DRAW_CHARS,t,e,l,i.overflow,o?ac:o,i.maxAngle,a,c,r,h*a,u,s,1/a,this.declutterMode_])}setTextStyle(t,e){let n,i,r;if(t){const e=t.getFill();e?(i=this.textFillState_,i||(i={},this.textFillState_=i),i.fillStyle=$l(e.getColor()||ac)):(i=null,this.textFillState_=i);const s=t.getStroke();if(s){r=this.textStrokeState_,r||(r={},this.textStrokeState_=r);const t=s.getLineDash(),e=s.getLineDashOffset(),n=s.getWidth(),i=s.getMiterLimit();r.lineCap=s.getLineCap()||lc,r.lineDash=t?t.slice():cc,r.lineDashOffset=void 0===e?uc:e,r.lineJoin=s.getLineJoin()||hc,r.lineWidth=void 0===n?mc:n,r.miterLimit=void 0===i?Ac:i,r.strokeStyle=$l(s.getColor()||dc)}else r=null,this.textStrokeState_=r;n=this.textState_;const o=t.getFont()||oc;bc(o);const a=t.getScaleArray();n.overflow=t.getOverflow(),n.font=o,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||pc,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||gc,n.scale=void 0===a?[1,1]:a;const l=t.getOffsetX(),c=t.getOffsetY(),u=t.getRotateWithView(),h=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===l?0:l,this.textOffsetY_=void 0===c?0:c,this.textRotateWithView_=void 0!==u&&u,this.textRotation_=void 0===h?0:h,this.strokeKey_=r?("string"==typeof r.strokeStyle?r.strokeStyle:G(r.strokeStyle))+r.lineCap+r.lineDashOffset+"|"+r.lineWidth+r.lineJoin+r.miterLimit+"["+r.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=i&&i.fillStyle?"string"==typeof i.fillStyle?i.fillStyle:"|"+G(i.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}var sb=rb;const ob={Circle:tb,Default:q_,Image:X_,LineString:Z_,Polygon:tb,Text:sb};class ab{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const r=n[i].finish();t[e][i]=r}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);let r=i[e];if(void 0===r){const t=ob[e];r=new t(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r}return r}}var lb=ab;class cb extends D{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return U()}getData(t){return null}prepareFrame(t){return U()}renderFrame(t,e){return U()}loadedTileCallback(t,e,n){t[e]||(t[e]={}),t[e][n.tileCoord.toString()]=n}createLoadedTileFinder(t,e,n){return(i,r)=>{const s=this.loadedTileCallback.bind(this,n,i);return t.forEachLoadedTile(e,i,r,s)}}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()!==Ma.LOADED&&e.getState()!==Ma.ERROR||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=Ma.LOADED&&e!=Ma.ERROR&&t.addEventListener(R.CHANGE,this.boundHandleImageChange_),e==Ma.IDLE&&(t.load(),e=t.getState()),e==Ma.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}var ub=cb;function hb(t){return hb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hb(t)}function Ab(t,e){if("object"!=hb(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!=hb(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function db(t){var e=Ab(t,"string");return"symbol"==hb(e)?e:String(e)}function fb(t,e,n){return e=db(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class pb{constructor(){fb(this,"pushMethodArgs_",((...t)=>(this.instructions_[this.zIndex+this.offset_].push(t),this))),this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(CanvasRenderingContext2D.prototype,{get:(t,e)=>{if("function"===typeof ml()[e])return this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e),this.pushMethodArgs_},set:(t,e,n)=>(this.instructions_[this.zIndex+this.offset_]||(this.instructions_[this.zIndex+this.offset_]=[]),this.instructions_[this.zIndex+this.offset_].push(e,n),!0)})}getContext(){return this.context_}draw(t){this.instructions_.forEach((e=>{for(let n=0,i=e.length;n<i;n+=2){const i=e[n],r=e[n+1];if("function"===typeof t[i])t[i](...r);else{if("function"===typeof r){t[i]=r(t);continue}t[i]=r}}}))}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}var gb=pb;const mb=[];let vb=null;function yb(){vb=pl(1,1,void 0,{willReadFrequently:!0})}class wb extends ub{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=Y(),this.pixelTransform=Y(),this.inversePixelTransform=Y(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,n){let i;vb||yb(),vb.clearRect(0,0,1,1);try{vb.drawImage(t,e,n,1,1,0,0,1,1),i=vb.getImageData(0,0,1,1).data}catch(r){return vb=null,null}return i}getBackground(t){const e=this.getLayer();let n=e.getBackground();return"function"===typeof n&&(n=n(t.viewState.resolution)),n||void 0}useContainer(t,e,n){const i=this.getLayer().getClassName();let r,s;if(t&&t.className===i&&(!n||t&&t.style.backgroundColor&&_(tl(t.style.backgroundColor),tl(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(s=e.getContext("2d"))}if(s&&s.canvas.style.transform===e?(this.container=t,this.context=s,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){r=document.createElement("div"),r.className=i;let t=r.style;t.position="absolute",t.width="100%",t.height="100%",s=pl();const e=s.canvas;r.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=s}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=Yt(n),r=Zt(n),s=Qt(n),o=Ut(n);nt(e.coordinateToPixelTransform,i),nt(e.coordinateToPixelTransform,r),nt(e.coordinateToPixelTransform,s),nt(e.coordinateToPixelTransform,o);const a=this.inversePixelTransform;nt(a,i),nt(a,r),nt(a,s),nt(a,o),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.clip()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const r=new ew(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}preRender(t,e){this.frameState=e,e.declutter||this.dispatchRenderEvent_(Um.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Um.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new gb),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Um.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Um.POSTRENDER,this.context,t))}getRenderTransform(t,e,n,i,r,s,o){const a=r/2,l=s/2,c=i/e,u=-c,h=-t[0]+o,A=-t[1];return at(this.tempTransform,a,l,c,u,-n,h,A)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var _b=wb;function bb(t,e,n,i,r,s,o,a,l,c,u,h){let A=t[e],d=t[e+1],f=0,p=0,g=0,m=0;function v(){f=A,p=d,e+=i,A=t[e],d=t[e+1],m+=g,g=Math.sqrt((A-f)*(A-f)+(d-p)*(d-p))}do{v()}while(e<n-i&&m+g<s);let y=0===g?0:(s-m)/g;const w=Qe(f,A,y),_=Qe(p,d,y),b=e-i,x=m,E=s+a*l(c,r,u);while(e<n-i&&m+g<E)v();y=0===g?0:(E-m)/g;const C=Qe(f,A,y),S=Qe(p,d,y);let B;if(h){const t=[w,_,C,S];Un(t,0,4,2,h,t,t),B=t[0]>t[2]}else B=w>C;const T=Math.PI,I=[],F=b+i===e;let L;if(e=b,g=0,m=x,A=t[e],d=t[e+1],F){v(),L=Math.atan2(d-p,A-f),B&&(L+=L>0?-T:T);const t=(C+w)/2,e=(S+_)/2;return I[0]=[t,e,(E-s)/2,L,r],I}r=r.replace(/\n/g," ");for(let R=0,M=r.length;R<M;){v();let t=Math.atan2(d-p,A-f);if(B&&(t+=t>0?-T:T),void 0!==L){let e=t-L;if(e+=e>T?-2*T:e<-T?2*T:0,Math.abs(e)>o)return null}L=t;const h=R;let w=0;for(;R<M;++R){const t=B?M-R-1:R,o=a*l(c,r[t],u);if(e+i<n&&m+g<s+w+o/2)break;w+=o}if(R===h)continue;const _=B?r.substring(M-h,M-R):r.substring(h,R);y=0===g?0:(s+w/2-m)/g;const b=Qe(f,A,y),x=Qe(p,d,y);I.push([b,x,w/2,t,_]),s+=w}return I}const xb=bt(),Eb=[],Cb=[],Sb=[],Bb=[];function Tb(t){return t[3].declutterBox}const Ib=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function Fb(t,e){return"start"===e?e=Ib.test(t)?"right":"left":"end"===e&&(e=Ib.test(t)?"left":"right"),ib[e]}function Lb(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}class Rb{constructor(t,e,n,i,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=Y(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new gb:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,n,i){const r=t+e+n+i;if(this.labels_[r])return this.labels_[r];const s=i?this.strokeStates[i]:null,o=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,c=[a.scale[0]*l,a.scale[1]*l],u=Array.isArray(t),h=a.justify?ib[a.justify]:Fb(Array.isArray(t)?t[0]:t,a.textAlign||fc),A=i&&s.lineWidth?s.lineWidth:0,d=u?t:t.split("\n").reduce(Lb,[]),{width:f,height:p,widths:g,heights:m,lineWidths:v}=Bc(a,d),y=f+A,w=[],_=(y+2)*c[0],b=(p+A)*c[1],x={width:_<0?Math.floor(_):Math.ceil(_),height:b<0?Math.floor(b):Math.ceil(b),contextInstructions:w};1==c[0]&&1==c[1]||w.push("scale",c),i&&(w.push("strokeStyle",s.strokeStyle),w.push("lineWidth",A),w.push("lineCap",s.lineCap),w.push("lineJoin",s.lineJoin),w.push("miterLimit",s.miterLimit),w.push("setLineDash",[s.lineDash]),w.push("lineDashOffset",s.lineDashOffset)),n&&w.push("fillStyle",o.fillStyle),w.push("textBaseline","middle"),w.push("textAlign","center");const E=.5-h;let C=h*y+E*A;const S=[],B=[];let T,I=0,F=0,L=0,R=0;for(let M=0,P=d.length;M<P;M+=2){const t=d[M];if("\n"===t){F+=I,I=0,C=h*y+E*A,++R;continue}const e=d[M+1]||a.font;e!==T&&(i&&S.push("font",e),n&&B.push("font",e),T=e),I=Math.max(I,m[L]);const r=[t,C+E*g[L]+h*(g[L]-v[R]),.5*(A+I)+F];C+=g[L],i&&S.push("strokeText",r),n&&B.push("fillText",r),++L}return Array.prototype.push.apply(w,S),Array.prototype.push.apply(w,B),this.labels_[r]=x,x}replayTextBackground_(t,e,n,i,r,s,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),s&&(this.alignAndScaleFill_=s[2],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,r,s,o,a,l,c,u,h,A,d,f,p){o*=h[0],a*=h[1];let g=n-o,m=i-a;const v=r+l>t?t-l:r,y=s+c>e?e-c:s,w=d[3]+v*h[0]+d[1],_=d[0]+y*h[1]+d[2],b=g-d[3],x=m-d[0];let E;return(f||0!==u)&&(Eb[0]=b,Bb[0]=b,Eb[1]=x,Cb[1]=x,Cb[0]=b+w,Sb[0]=Cb[0],Sb[1]=x+_,Bb[1]=Sb[1]),0!==u?(E=at(Y(),n,i,1,1,u,-n,-i),nt(E,Eb),nt(E,Cb),nt(E,Sb),nt(E,Bb),xt(Math.min(Eb[0],Cb[0],Sb[0],Bb[0]),Math.min(Eb[1],Cb[1],Sb[1],Bb[1]),Math.max(Eb[0],Cb[0],Sb[0],Bb[0]),Math.max(Eb[1],Cb[1],Sb[1],Bb[1]),xb)):xt(Math.min(b,b+w),Math.min(x,x+_),Math.max(b,b+w),Math.max(x,x+_),xb),A&&(g=Math.round(g),m=Math.round(m)),{drawImageX:g,drawImageY:m,drawImageW:v,drawImageH:y,originX:l,originY:c,declutterBox:{minX:xb[0],minY:xb[1],maxX:xb[2],maxY:xb[3],value:p},canvasTransform:E,scale:h}}replayImageOrLabel_(t,e,n,i,r,s,o){const a=!(!s&&!o),l=i.declutterBox,c=o?o[2]*i.scale[0]/2:0,u=l.minX-c<=e[0]&&l.maxX+c>=0&&l.minY-c<=e[1]&&l.maxY+c>=0;return u&&(a&&this.replayTextBackground_(t,Eb,Cb,Sb,Bb,s,o),Tc(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const n=nt(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const r=this.textStates[e],s=this.createLabel(t,e,i,n),o=this.strokeStates[n],a=this.pixelRatio,l=Fb(Array.isArray(t)?t[0]:t,r.textAlign||fc),c=ib[r.textBaseline||pc],u=o&&o.lineWidth?o.lineWidth:0,h=s.width/a-2*r.scale[0],A=l*h+2*(.5-l)*u,d=c*s.height/a+2*(.5-c)*u;return{label:s,anchorX:A,anchorY:d}}execute_(t,e,n,i,r,s,o,a){const l=this.zIndexContext_;let c;this.pixelCoordinates_&&_(n,this.renderedTransform_)?c=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),c=Dn(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),et(this.renderedTransform_,n));let u=0;const h=i.length;let A,d,f,p,g,m,v,y,w,b,x,E,C,S=0,B=0,T=0,I=null,F=null;const L=this.coordinateCache_,R=this.viewRotation_,M=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,P={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:R},N=this.instructions!=i||this.overlaps?0:200;let O,k,D,U;while(u<h){const n=i[u],h=n[0];switch(h){case j_.BEGIN_GEOMETRY:O=n[1],U=n[3],O.getGeometry()?void 0===o||te(o,U.getExtent())?++u:u=n[2]+1:u=n[2],l&&(l.zIndex=n[4]);break;case j_.BEGIN_PATH:B>N&&(this.fill_(t),B=0),T>N&&(t.stroke(),T=0),B||T||(t.beginPath(),g=NaN,m=NaN),++u;break;case j_.CIRCLE:S=n[1];const i=c[S],h=c[S+1],_=c[S+2],Q=c[S+3],G=_-i,H=Q-h,V=Math.sqrt(G*G+H*H);t.moveTo(i+V,h),t.arc(i,h,V,0,2*Math.PI,!0),++u;break;case j_.CLOSE_PATH:t.closePath(),++u;break;case j_.CUSTOM:S=n[1],A=n[2];const j=n[3],W=n[4],z=n[5];P.geometry=j,P.feature=O,u in L||(L[u]=[]);const K=L[u];z?z(c,S,A,2,K):(K[0]=c[S],K[1]=c[S+1],K.length=2),l&&(l.zIndex=n[6]),W(K,P),++u;break;case j_.DRAW_IMAGE:S=n[1],A=n[2],w=n[3],d=n[4],f=n[5];let q=n[6];const $=n[7],X=n[8],Y=n[9],Z=n[10];let J=n[11];const tt=n[12];let et=n[13];p=n[14]||"declutter";const nt=n[15];if(!w&&n.length>=20){b=n[19],x=n[20],E=n[21],C=n[22];const t=this.drawLabelWithPointPlacement_(b,x,E,C);w=t.label,n[3]=w;const e=n[23];d=(t.anchorX-e)*this.pixelRatio,n[4]=d;const i=n[24];f=(t.anchorY-i)*this.pixelRatio,n[5]=f,q=w.height,n[6]=q,et=w.width,n[13]=et}let it,rt,st,ot;n.length>25&&(it=n[25]),n.length>17?(rt=n[16],st=n[17],ot=n[18]):(rt=gc,st=!1,ot=!1),Z&&M?J+=R:Z||M||(J-=R);let at=0;for(;S<A;S+=2){if(it&&it[at++]<et/this.pixelRatio)continue;const n=this.calculateImageOrLabelDimensions_(w.width,w.height,c[S],c[S+1],et,q,d,f,X,Y,J,tt,r,rt,st||ot,O),i=[t,e,w,n,$,st?I:null,ot?F:null];if(a){let t,e,r,s,o;if(nt){const n=A-S;if(!nt[n]){nt[n]={args:i,declutterMode:p};continue}const s=nt[n];t=s.args,e=s.declutterMode,delete nt[n],r=Tb(t)}if(!t||"declutter"===e&&a.collides(r)||(s=!0),"declutter"===p&&a.collides(n.declutterBox)||(o=!0),"declutter"===e&&"declutter"===p){const t=s&&o;s=t,o=t}s&&("none"!==e&&a.insert(r),this.replayImageOrLabel_.apply(this,t)),o&&("none"!==p&&a.insert(n.declutterBox),this.replayImageOrLabel_.apply(this,i))}else this.replayImageOrLabel_.apply(this,i)}++u;break;case j_.DRAW_CHARS:const lt=n[1],ct=n[2],ut=n[3],ht=n[4];C=n[5];const At=n[6],dt=n[7],ft=n[8];E=n[9];const pt=n[10];b=n[11],x=n[12];const gt=[n[13],n[13]];p=n[14]||"declutter";const mt=this.textStates[x],vt=mt.font,yt=[mt.scale[0]*dt,mt.scale[1]*dt];let wt;vt in this.widths_?wt=this.widths_[vt]:(wt={},this.widths_[vt]=wt);const _t=Ui(c,lt,ct,2),bt=Math.abs(yt[0])*Sc(vt,b,wt);if(ht||bt<=_t){const n=this.textStates[x].textAlign,i=(_t-bt)*Fb(b,n),r=bb(c,lt,ct,2,b,i,At,Math.abs(yt[0]),Sc,vt,wt,M?0:this.viewRotation_);t:if(r){const n=[];let i,s,o,l,c;if(E)for(i=0,s=r.length;i<s;++i){c=r[i],o=c[4],l=this.createLabel(o,x,"",E),d=c[2]+(yt[0]<0?-pt:pt),f=ut*l.height+2*(.5-ut)*pt*yt[1]/yt[0]-ft;const s=this.calculateImageOrLabelDimensions_(l.width,l.height,c[0],c[1],l.width,l.height,d,f,0,0,c[3],gt,!1,gc,!1,O);if(a&&"declutter"===p&&a.collides(s.declutterBox))break t;n.push([t,e,l,s,1,null,null])}if(C)for(i=0,s=r.length;i<s;++i){c=r[i],o=c[4],l=this.createLabel(o,x,C,""),d=c[2],f=ut*l.height-ft;const s=this.calculateImageOrLabelDimensions_(l.width,l.height,c[0],c[1],l.width,l.height,d,f,0,0,c[3],gt,!1,gc,!1,O);if(a&&"declutter"===p&&a.collides(s.declutterBox))break t;n.push([t,e,l,s,1,null,null])}a&&"none"!==p&&a.load(n.map(Tb));for(let t=0,e=n.length;t<e;++t)this.replayImageOrLabel_.apply(this,n[t])}}++u;break;case j_.END_GEOMETRY:if(void 0!==s){O=n[1];const t=s(O,U);if(t)return t}++u;break;case j_.FILL:N?B++:this.fill_(t),++u;break;case j_.MOVE_TO_LINE_TO:for(S=n[1],A=n[2],k=c[S],D=c[S+1],v=k+.5|0,y=D+.5|0,v===g&&y===m||(t.moveTo(k,D),g=v,m=y),S+=2;S<A;S+=2)k=c[S],D=c[S+1],v=k+.5|0,y=D+.5|0,S!=A-2&&v===g&&y===m||(t.lineTo(k,D),g=v,m=y);++u;break;case j_.SET_FILL_STYLE:I=n,this.alignAndScaleFill_=n[2],B&&(this.fill_(t),B=0,T&&(t.stroke(),T=0)),t.fillStyle=n[1],++u;break;case j_.SET_STROKE_STYLE:F=n,T&&(t.stroke(),T=0),this.setStrokeStyle_(t,n),++u;break;case j_.STROKE:N?T++:t.stroke(),++u;break;default:++u;break}}B&&this.fill_(t),T&&t.stroke()}execute(t,e,n,i,r,s){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,s)}executeHitDetection(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,r)}}var Mb=Rb;const Pb=["Polygon","Circle","LineString","Image","Text","Default"],Nb=["Image","Text"],Ob=Pb.filter((t=>!Nb.includes(t)));class kb{constructor(t,e,n,i,r,s,o){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=Y(),this.renderedContext_=null,this.deferredZIndexContexts_=[],this.createExecutors_(r,o)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,e){for(const n in t){let i=this.executorsByZIndex_[n];void 0===i&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const t in r){const n=r[t];i[t]=new Mb(this.resolution_,this.pixelRatio_,this.overlaps_,n,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,i,r,s){i=Math.round(i);const o=2*i+1,a=at(this.hitDetectionTransform_,i+.5,i+.5,1/e,-1/e,-n,-t[0],-t[1]),l=!this.hitDetectionContext_;l&&(this.hitDetectionContext_=pl(o,o,void 0,{willReadFrequently:!0}));const c=this.hitDetectionContext_;let u;c.canvas.width!==o||c.canvas.height!==o?(c.canvas.width=o,c.canvas.height=o):l||c.clearRect(0,0,o,o),void 0!==this.renderBuffer_&&(u=bt(),Rt(u,t),pt(u,e*(this.renderBuffer_+i),u));const h=Ub(i);let A;function d(t,e){const n=c.getImageData(0,0,o,o).data;for(let a=0,l=h.length;a<l;a++)if(n[h[a]]>0){if(!s||"Image"!==A&&"Text"!==A||s.includes(t)){const n=(h[a]-3)/4,s=i-n%o,l=i-(n/o|0),c=r(t,e,s*s+l*l);if(c)return c}c.clearRect(0,0,o,o);break}}const f=Object.keys(this.executorsByZIndex_).map(Number);let p,m,v,y,w;for(f.sort(g),p=f.length-1;p>=0;--p){const t=f[p].toString();for(v=this.executorsByZIndex_[t],m=Pb.length-1;m>=0;--m)if(A=Pb[m],y=v[A],void 0!==y&&(w=y.executeHitDetection(c,a,n,d,u),w))return w}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],r=e[2],s=e[3],o=[n,i,n,s,r,s,r,i];return Dn(o,0,8,2,t,o),o}isEmpty(){return I(this.executorsByZIndex_)}execute(t,e,n,i,r,s,o){const a=Object.keys(this.executorsByZIndex_).map(Number);let l,c,u,h,A,d;for(a.sort(g),s=s||Pb,o&&a.reverse(),l=0,c=a.length;l<c;++l){const c=a[l].toString();for(A=this.executorsByZIndex_[c],u=0,h=s.length;u<h;++u){const c=s[u];if(d=A[c],void 0!==d){const s=null===o?void 0:d.getZIndexContext(),u=s?s.getContext():t,h=this.maxExtent_&&"Image"!==c&&"Text"!==c;if(h&&(u.save(),this.clip(u,n)),d.execute(u,e,n,i,r,o),h&&u.restore(),s){s.offset();const t=a[l];this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(s)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){this.deferredZIndexContexts_.forEach((t=>{t.forEach((t=>{t.draw(this.renderedContext_),t.clear()}))}))}}const Db={};function Ub(t){if(void 0!==Db[t])return Db[t];const e=2*t+1,n=t*t,i=new Array(n+1);for(let s=0;s<=t;++s)for(let r=0;r<=t;++r){const o=s*s+r*r;if(o>n)break;let a=i[o];a||(a=[],i[o]=a),a.push(4*((t+s)*e+(t+r))+3),s>0&&a.push(4*((t-s)*e+(t+r))+3),r>0&&(a.push(4*((t+s)*e+(t-r))+3),s>0&&a.push(4*((t-s)*e+(t-r))+3))}const r=[];for(let s=0,o=i.length;s<o;++s)i[s]&&r.push(...i[s]);return Db[t]=r,r}var Qb=kb;class Gb extends z_{constructor(t,e,n,i,r,s,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.transformRotation_=i?Ge(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=s,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=Y()}drawImages_(t,e,n,i){if(!this.image_)return;const r=Dn(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.tmpLocalTransform_,a=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=a*this.imageOpacity_);let l=this.imageRotation_;0===this.transformRotation_&&(l-=this.viewRotation_),this.imageRotateWithView_&&(l+=this.viewRotation_);for(let c=0,u=r.length;c<u;c+=2){const t=r[c]-this.imageAnchorX_,e=r[c+1]-this.imageAnchorY_;if(0!==l||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const n=t+this.imageAnchorX_,i=e+this.imageAnchorY_;at(o,n,i,1,1,l,-n,-i),s.save(),s.transform.apply(s,o),s.translate(n,i),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,t,e,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=a)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=Dn(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_;let o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<n;e+=i){const t=r[e]+this.textOffsetX_,n=r[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.save(),s.translate(t-this.textOffsetX_,n-this.textOffsetY_),s.rotate(o),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,t,n),this.textFillState_&&s.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,r){const s=this.context_,o=Dn(t,e,n,i,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);let a=o.length;r&&(a-=2);for(let l=2;l<a;l+=2)s.lineTo(o[l],o[l+1]);return r&&s.closePath(),n}drawRings_(t,e,n,i){for(let r=0,s=n.length;r<s;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),te(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=qn(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){const e=t.getType();switch(e){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break;default:}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let n=0,i=e.length;n<i;++n)this.drawGeometry(e[n])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),te(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(te(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const r=t.getEnds(),s=t.getStride();e.beginPath();for(let t=0,o=r.length;t<o;++t)i=this.moveToLineTo_(n,i,r[t],s,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),te(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),te(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const r=t.getEndss(),s=t.getStride();e.beginPath();for(let t=0,o=r.length;t<o;++t){const e=r[t];i=this.drawRings_(n,i,e,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),_(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:fc;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:$l(e||ac)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),r=e.getLineDashOffset(),s=e.getLineJoin(),o=e.getWidth(),a=e.getMiterLimit(),l=i||cc;this.strokeState_={lineCap:void 0!==n?n:lc,lineDash:1===this.pixelRatio_?l:l.map((t=>t*this.pixelRatio_)),lineDashOffset:(r||uc)*this.pixelRatio_,lineJoin:void 0!==s?s:hc,lineWidth:(void 0!==o?o:mc)*this.pixelRatio_,miterLimit:void 0!==a?a:Ac,strokeStyle:$l(t||dc)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/n,s[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:$l(t||ac)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),r=n.getLineDashOffset(),s=n.getLineJoin(),o=n.getWidth(),a=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:lc,lineDash:i||cc,lineDashOffset:r||uc,lineJoin:void 0!==s?s:hc,lineWidth:void 0!==o?o:mc,miterLimit:void 0!==a?a:Ac,strokeStyle:$l(t||dc)}}else this.textStrokeState_=null;const i=t.getFont(),r=t.getOffsetX(),s=t.getOffsetY(),o=t.getRotateWithView(),a=t.getRotation(),l=t.getScaleArray(),c=t.getText(),u=t.getTextAlign(),h=t.getTextBaseline();this.textState_={font:void 0!==i?i:oc,textAlign:void 0!==u?u:fc,textBaseline:void 0!==h?h:pc},this.text_=void 0!==c?Array.isArray(c)?c.reduce(((t,e,n)=>t+(n%2?" ":e)),""):c:"",this.textOffsetX_=void 0!==r?this.pixelRatio_*r:0,this.textOffsetY_=void 0!==s?this.pixelRatio_*s:0,this.textRotateWithView_=void 0!==o&&o,this.textRotation_=void 0!==a?a:0,this.textScale_=[this.pixelRatio_*l[0],this.pixelRatio_*l[1]]}else this.text_=""}}var Hb=Gb;const Vb=.5;function jb(t,e,n,i,r,s,o,a,l){const c=l?Rn(r,l):r,u=t[0]*Vb,h=t[1]*Vb,A=pl(u,h);A.imageSmoothingEnabled=!1;const d=A.canvas,f=new Hb(A,Vb,r,null,o,a,l?En(In(),l):null),p=n.length,m=Math.floor(16777215/p),v={};for(let g=1;g<=p;++g){const t=n[g-1],e=t.getStyleFunction()||i;if(!e)continue;let r=e(t,s);if(!r)continue;Array.isArray(r)||(r=[r]);const o=g*m,a=o.toString(16).padStart(7,"#00000");for(let n=0,i=r.length;n<i;++n){const e=r[n],i=e.getGeometryFunction()(t);if(!i||!te(c,i.getExtent()))continue;const s=e.clone(),o=s.getFill();o&&o.setColor(a);const l=s.getStroke();l&&(l.setColor(a),l.setLineDash(null)),s.setText(void 0);const u=e.getImage();if(u){const t=u.getImageSize();if(!t)continue;const e=pl(t[0],t[1],void 0,{alpha:!1}),n=e.canvas;e.fillStyle=a,e.fillRect(0,0,n.width,n.height),s.setImage(new zl({img:n,anchor:u.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:u.getOrigin(),opacity:1,size:u.getSize(),scale:u.getScale(),rotation:u.getRotation(),rotateWithView:u.getRotateWithView()}))}const h=s.getZIndex()||0;let A=v[h];A||(A={},v[h]=A,A["Polygon"]=[],A["Circle"]=[],A["LineString"]=[],A["Point"]=[]);const d=i.getType();if("GeometryCollection"===d){const t=i.getGeometriesArrayRecursive();for(let e=0,n=t.length;e<n;++e){const n=t[e];A[n.getType().replace("Multi","")].push(n,s)}}else A[d.replace("Multi","")].push(i,s)}}const y=Object.keys(v).map(Number).sort(g);for(let g=0,w=y.length;g<w;++g){const t=v[y[g]];for(const n in t){const i=t[n];for(let t=0,n=i.length;t<n;t+=2){f.setStyle(i[t+1]);for(let n=0,r=e.length;n<r;++n)f.setTransform(e[n]),f.drawGeometry(i[t])}}}return A.getImageData(0,0,d.width,d.height)}function Wb(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*Vb),s=Math.floor(Math.round(t[1])*Vb),o=4*(Me(r,0,n.width-1)+Me(s,0,n.height-1)*n.width),a=n.data[o],l=n.data[o+1],c=n.data[o+2],u=c+256*(l+256*a),h=Math.floor(16777215/e.length);u&&u%h===0&&i.push(e[u/h-1])}return i}const zb=.5,Kb={Point:sx,LineString:nx,Polygon:ax,MultiPoint:ox,MultiLineString:ix,MultiPolygon:rx,GeometryCollection:ex,Circle:Yb};function qb(t,e){return parseInt(G(t),10)-parseInt(G(e),10)}function $b(t,e){const n=Xb(t,e);return n*n}function Xb(t,e){return zb*t/e}function Yb(t,e,n,i){const r=n.getFill(),s=n.getStroke();if(r||s){const o=t.getBuilder(n.getZIndex(),"Circle");o.setFillStrokeStyle(r,s),o.drawCircle(e,i)}const o=n.getText();if(o&&o.getText()){const r=t.getBuilder(n.getZIndex(),"Text");r.setTextStyle(o),r.drawText(e,i)}}function Zb(t,e,n,i,r,s,o,a){const l=[],c=n.getImage();if(c){let t=!0;const e=c.getImageState();e==Ma.LOADED||e==Ma.ERROR?t=!1:e==Ma.IDLE&&c.load(),t&&l.push(c.ready())}const u=n.getFill();u&&u.loading()&&l.push(u.ready());const h=l.length>0;return h&&Promise.all(l).then((()=>r(null))),Jb(t,e,n,i,s,o,a),h}function Jb(t,e,n,i,r,s,o){const a=n.getGeometryFunction()(e);if(!a)return;const l=a.simplifyTransformed(i,r),c=n.getRenderer();if(c)tx(t,l,n,e,o);else{const i=Kb[l.getType()];i(t,l,n,e,o,s)}}function tx(t,e,n,i,r){if("GeometryCollection"==e.getType()){const s=e.getGeometries();for(let e=0,o=s.length;e<o;++e)tx(t,s[e],n,i,r);return}const s=t.getBuilder(n.getZIndex(),"Default");s.drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)}function ex(t,e,n,i,r,s){const o=e.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const e=Kb[o[a].getType()];e(t,o[a],n,i,r,s)}}function nx(t,e,n,i,r){const s=n.getStroke();if(s){const o=t.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,i,r)}}function ix(t,e,n,i,r){const s=n.getStroke();if(s){const o=t.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,i,r)}}function rx(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawMultiPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i,r)}}function sx(t,e,n,i,r,s){const o=n.getImage(),a=n.getText(),l=a&&a.getText(),c=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=Ma.LOADED)return;const s=t.getBuilder(n.getZIndex(),"Image");s.setImageStyle(o,c),s.drawPoint(e,i,r)}if(l){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a,c),s.drawText(e,i,r)}}function ox(t,e,n,i,r,s){const o=n.getImage(),a=o&&0!==o.getOpacity(),l=n.getText(),c=l&&l.getText(),u=s&&a&&c?{}:void 0;if(a){if(o.getImageState()!=Ma.LOADED)return;const s=t.getBuilder(n.getZIndex(),"Image");s.setImageStyle(o,u),s.drawMultiPoint(e,i,r)}if(c){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(l,u),s.drawText(e,i,r)}}function ax(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i,r)}}class lx extends _b{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=bt(),this.wrappedRenderedExtent_=bt(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,n){const i=e.extent,r=e.viewState,s=r.center,o=r.resolution,a=r.projection,l=r.rotation,c=a.getExtent(),u=this.getLayer().getSource(),h=this.getLayer().getDeclutter(),A=e.pixelRatio,d=e.viewHints,f=!(d[Qm.ANIMATING]||d[Qm.INTERACTING]),p=this.compositionContext_,g=Math.round(e.size[0]*A),m=Math.round(e.size[1]*A),v=u.getWrapX()&&a.canWrapX(),y=v?Jt(c):null,w=v?Math.ceil((i[2]-c[2])/y)+1:1;let _=v?Math.floor((i[0]-c[0])/y):0;do{const i=this.getRenderTransform(s,o,l,A,g,m,_*y);t.execute(p,[p.canvas.width,p.canvas.height],i,l,f,void 0===n?Pb:n?Nb:Ob,n?h&&e.declutter[h]:void 0)}while(++_<w)}setupCompositionContext_(){if(1!==this.opacity_){const t=pl(this.context.canvas.width,this.context.canvas.height,mb);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){const t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,vl(this.compositionContext_),mb.push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){const e=this.getLayer().getDeclutter();e&&(this.setupCompositionContext_(),this.renderWorlds(this.replayGroup_,t,!0),this.releaseCompositionContext_())}renderDeferredInternal(t){this.replayGroup_.renderDeferred()}renderFrame(t,e){const n=t.pixelRatio,i=t.layerStatesArray[t.layerIndex];st(this.pixelTransform,1/n,1/n),lt(this.inversePixelTransform,this.pixelTransform);const r=ht(this.pixelTransform);this.useContainer(e,r,this.getBackground(t));const s=this.context,o=s.canvas,a=this.replayGroup_;let l=a&&!a.isEmpty();if(!l){const t=this.getLayer().hasListener(Um.PRERENDER)||this.getLayer().hasListener(Um.POSTRENDER);if(!t)return null}const c=Math.round(t.size[0]*n),u=Math.round(t.size[1]*n);o.width!=c||o.height!=u?(o.width=c,o.height=u,o.style.transform!==r&&(o.style.transform=r)):this.containerReused||s.clearRect(0,0,c,u),this.preRender(s,t);const h=t.viewState,A=h.projection;this.opacity_=i.opacity,this.setupCompositionContext_();let d=!1;if(l&&i.extent&&this.clipping){const e=Mn(i.extent,A);l=te(e,t.extent),d=l&&!yt(e,t.extent),d&&this.clipUnrotated(this.compositionContext_,t,e)}return l&&this.renderWorlds(a,t,!this.getLayer().getDeclutter()&&void 0),d&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(s,t),this.renderedRotation_!==h.rotation&&(this.renderedRotation_=h.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise((e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=[this.context.canvas.width,this.context.canvas.height];nt(this.pixelTransform,t);const e=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,r=this.renderedProjection_,s=this.wrappedRenderedExtent_,o=this.getLayer(),a=[],l=t[0]*Vb,c=t[1]*Vb;a.push(this.getRenderTransform(e,n,i,Vb,l,c,0).slice());const u=o.getSource(),h=r.getExtent();if(u.getWrapX()&&r.canWrapX()&&!yt(h,s)){let t=s[0];const r=Jt(h);let o,u=0;while(t<h[0])--u,o=r*u,a.push(this.getRenderTransform(e,n,i,Vb,l,c,o).slice()),t+=r;u=0,t=s[2];while(t>h[2])++u,o=r*u,a.push(this.getRenderTransform(e,n,i,Vb,l,c,o).slice()),t-=r}const A=In();this.hitDetectionImageData_=jb(t,a,this.renderedFeatures_,o.getStyleFunction(),s,n,i,$b(n,this.renderedPixelRatio_),A?r:null)}e(Wb(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,n,i,r){if(!this.replayGroup_)return;const s=e.viewState.resolution,o=e.viewState.rotation,a=this.getLayer(),l={},c=function(t,e,n){const s=G(t),o=l[s];if(o){if(!0!==o&&n<o.distanceSq){if(0===n)return l[s]=!0,r.splice(r.lastIndexOf(o),1),i(t,a,e);o.geometry=e,o.distanceSq=n}}else{if(0===n)return l[s]=!0,i(t,a,e);r.push(l[s]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}};let u;const h=[this.replayGroup_],A=this.getLayer().getDeclutter();return h.some((i=>u=i.forEachFeatureAtCoordinate(t,s,o,n,c,A&&e.declutter[A]?e.declutter[A].all().map((t=>t.value)):null))),u}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const i=t.viewHints[Qm.ANIMATING],r=t.viewHints[Qm.INTERACTING],s=e.getUpdateWhileAnimating(),o=e.getUpdateWhileInteracting();if(this.ready&&!s&&i||!o&&r)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const a=t.extent,l=t.viewState,c=l.projection,u=l.resolution,h=t.pixelRatio,A=e.getRevision(),d=e.getRenderBuffer();let f=e.getRenderOrder();void 0===f&&(f=qb);const p=l.center.slice(),g=pt(a,d*u),m=g.slice(),v=[g.slice()],y=c.getExtent();if(n.getWrapX()&&c.canWrapX()&&!yt(y,t.extent)){const t=Jt(y),e=Math.max(Jt(g)/2,t);g[0]=y[0]-e,g[2]=y[2]+e,tn(p,c);const n=oe(v[0],c);n[0]<y[0]&&n[2]<y[2]?v.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>y[0]&&n[2]>y[2]&&v.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==u&&this.renderedRevision_==A&&this.renderedRenderOrder_==f&&yt(this.wrappedRenderedExtent_,g))return _(this.renderedExtent_,m)||(this.hitDetectionImageData_=null,this.renderedExtent_=m),this.renderedCenter_=p,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const w=new lb(Xb(u,h),g,u,h),b=In();let x;if(b){for(let t=0,e=v.length;t<e;++t){const e=v[t],i=Rn(e,c);n.loadFeatures(i,Pn(u,c),b)}x=En(b,c)}else for(let _=0,L=v.length;_<L;++_)n.loadFeatures(v[_],u,c);const E=$b(u,h);let C=!0;const S=(t,n)=>{let i;const r=t.getStyleFunction()||e.getStyleFunction();if(r&&(i=r(t,u)),i){const e=this.renderFeature(t,E,i,w,x,this.getLayer().getDeclutter(),n);C=C&&!e}},B=Rn(g,c),T=n.getFeaturesInExtent(B);f&&T.sort(f);for(let _=0,L=T.length;_<L;++_)S(T[_],_);this.renderedFeatures_=T,this.ready=C;const I=w.finish(),F=new Qb(g,u,h,n.getOverlaps(),I,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=u,this.renderedRevision_=A,this.renderedRenderOrder_=f,this.renderedExtent_=m,this.wrappedRenderedExtent_=g,this.renderedCenter_=p,this.renderedProjection_=c,this.renderedPixelRatio_=h,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,r,s,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,c=n.length;l<c;++l)a=Zb(i,t,n[l],e,this.boundHandleStyleImageChange_,r,s,o)||a;else a=Zb(i,t,n,e,this.boundHandleStyleImageChange_,r,s,o);return a}}var cx=lx;class ux extends Xy{constructor(t){super(t)}createRenderer(){return new cx(this)}}var hx=ux;function Ax(t){const e=t.frameState,n=J(t.inversePixelTransform.slice(),e.coordinateToPixelTransform);return new Hb(t.context,e.pixelRatio,e.extent,n,e.viewState.rotation)}var dx=Ax,fx=H.split(".");fx=100*parseInt(fx[0])+parseInt(fx[1]);var px=function(t,e){var n=t.frameState.pixelRatio;if(fx>605&&fx<700&&1!==n&&e.getImage()instanceof zl){e=e.clone();var i=e.getImage();i.setScale(i.getScale()*n);var r=i.getAnchor();if(r&&i.setDisplacement){var s=i.getDisplacement();s&&(s[0]-=r[0]/n,s[1]+=r[1]/n,i.setAnchor([0,0]))}else r&&(r[0]/=n,r[1]/=n)}return e},gx=px,mx=class extends hx{constructor(t){var e=t||{};super(e),this.oldcluster=new O_,this.clusters=[],this.animation={start:!1},this.set("animationDuration","number"==typeof e.animationDuration?e.animationDuration:700),this.set("animationMethod",e.animationMethod||wm),this.getSource().on("change",this.saveCluster.bind(this)),this.on(["precompose","prerender"],this.animate.bind(this)),this.on(["postcompose","postrender"],this.postanimate.bind(this))}saveCluster(){if(this.oldcluster){if(this.oldcluster.clear(),!this.get("animationDuration"))return;var t=this.getSource().getFeatures();t.length&&t[0].get("features")&&(this.oldcluster.addFeatures(this.clusters),this.clusters=t.slice(0),this.sourceChanged=!0)}}getClusterForFeature(t,e){for(var n,i=0;n=e[i];i++){var r=n.get("features");if(r&&r.length)for(var s,o=0;s=r[o];o++)if(t===s)return n}return!1}stopAnimation(){this.animation.start=!1,this.animation.cA=[],this.animation.cB=[]}animate(t){var e=this.get("animationDuration");if(e){var n,i,r=t.frameState.viewState.resolution,s=this.animation,o=t.frameState.time;if(s.resolution!=r&&this.sourceChanged){var a=t.frameState.extent;for(s.resolution<r?(a=pt(a,100*r),s.cA=this.oldcluster.getFeaturesInExtent(a),s.cB=this.getSource().getFeaturesInExtent(a),s.revers=!1):(a=pt(a,100*r),s.cA=this.getSource().getFeaturesInExtent(a),s.cB=this.oldcluster.getFeaturesInExtent(a),s.revers=!0),s.clusters=[],n=0,i;i=s.cA[n];n++){var l=i.get("features");if(l&&l.length){var c=this.getClusterForFeature(l[0],s.cB);c&&s.clusters.push({f:i,pt:c.getGeometry().getCoordinates()})}}if(s.resolution=r,this.sourceChanged=!1,!s.clusters.length||s.clusters.length>1e3)return void this.stopAnimation();o=s.start=(new Date).getTime()}if(s.start){var u=t.vectorContext||dx(t),h=(o-s.start)/e;h>1&&(this.stopAnimation(),h=1),h=this.get("animationMethod")(h);var A=this.getStyle(),d="function"==typeof A?A:A.length?function(){return A}:function(){return[A]};for(t.context.save(),t.context.globalAlpha=this.getOpacity(),n=0,c;c=s.clusters[n];n++){var f=c.f.getGeometry().getCoordinates(),p=f[0]-c.pt[0],g=f[1]-c.pt[1];s.revers?(f[0]=c.pt[0]+h*p,f[1]=c.pt[1]+h*g):(f[0]=f[0]-h*p,f[1]=f[1]-h*g);var m=d(c.f,r,!0);if(m.length||(m=[m]),1!==c.f.get("features").length||p||g){var v=new Wi(f);l=new $(v)}else l=c.f.get("features")[0];for(var y,w=0;y=m[w];w++)if(y.getText()&&/\n/.test(y.getText().getText())){var _,b=y.getText().getOffsetX(),x=y.getText().getOffsetY(),E=y.getText().getRotation()||0,C=1.2*Number((y.getText().getFont()||"10px").match(/\d+/)),S=y.getText().getText().split("\n"),B=S.length-1,T=y.clone();S.forEach((function(e,n){switch(1==n&&(T.setImage(),T.setFill(),T.setStroke()),y.getText().getTextBaseline()){case"alphabetic":case"ideographic":case"bottom":_=B;break;case"hanging":case"top":_=0;break;default:_=B/2;break}T.getText().setOffsetX(b-Math.sin(E)*C*(n-_)),T.getText().setOffsetY(x+Math.cos(E)*C*(n-_)),T.getText().setText(e),u.drawFeature(l,gx(t,T))}))}else u.drawFeature(l,gx(t,y))}t.context.restore(),t.frameState.animate=!0,t.context.save(),t.context.beginPath(),t.context.rect(0,0,0,0),t.context.clip(),this.clip_=!0}}}postanimate(t){this.clip_&&(t.context.restore(),this.clip_=!1)}},vx=mx;const yx=34962,wx=34963,_x=35040,bx=35044,xx=35048,Ex=5121,Cx=5123,Sx=5125,Bx=5126,Tx=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function Ix(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!al},e);const n=Tx.length;for(let i=0;i<n;++i)try{const n=t.getContext(Tx[i],e);if(n)return n}catch(Rdt){}return null}const Fx={STATIC_DRAW:bx,STREAM_DRAW:_x,DYNAMIC_DRAW:xx};class Lx{constructor(t,e){this.array_=null,this.type_=t,z(t===yx||t===wx,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=void 0!==e?e:Fx.STATIC_DRAW}ofSize(t){return this.array_=new(Rx(this.type_))(t),this}fromArray(t){return this.array_=Rx(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(Rx(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}function Rx(t){switch(t){case yx:return Float32Array;case wx:return Uint32Array;default:return Float32Array}}var Mx=Lx,Px={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"};const Nx="\n  precision mediump float;\n  \n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n  \n  uniform vec2 u_screenSize;\n   \n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n",Ox="\n  precision mediump float;\n   \n  uniform sampler2D u_image;\n  uniform float u_opacity;\n   \n  varying vec2 v_texCoord;\n   \n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n";class kx{constructor(t){this.gl_=t.webGlContext;const e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer(),this.depthBuffer_=e.createRenderbuffer();const n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t.vertexShader||Nx),e.compileShader(n);const i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,t.fragmentShader||Ox),e.compileShader(i),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,n),e.attachShader(this.renderTargetProgram_,i),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();const r=[-1,-1,1,-1,-1,1,1,-1,1,1,-1,1];e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array(r),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((n=>{this.uniforms_.push({value:t.uniforms[n],location:e.getUniformLocation(this.renderTargetProgram_,n)})}))}getGL(){return this.gl_}init(t){const e=this.getGL(),n=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.bindRenderbuffer(e.RENDERBUFFER,this.getDepthBuffer()),e.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;const t=0,i=e.RGBA,r=0,s=e.RGBA,o=e.UNSIGNED_BYTE,a=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,t,i,n[0],n[1],r,s,o,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n[0],n[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthBuffer_)}}apply(t,e,n,i){const r=this.getGL(),s=t.size;if(r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),!e){const e=G(r.canvas);if(!t.renderTargets[e]){const n=r.getContextAttributes();n&&n.preserveDrawingBuffer&&(r.clearColor(0,0,0,0),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)),t.renderTargets[e]=!0}}r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),r.uniform1i(this.renderTargetTextureLocation_,0);const o=t.layerStatesArray[t.layerIndex].opacity;r.uniform1f(this.renderTargetOpacityLocation_,o),this.applyUniforms(t),n&&n(r,t),r.drawArrays(r.TRIANGLES,0,6),i&&i(r,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const e=this.getGL();let n,i=1;this.uniforms_.forEach((function(r){if(n="function"===typeof r.value?r.value(t):r.value,n instanceof HTMLCanvasElement||n instanceof ImageData)r.texture||(r.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${i}`]),e.bindTexture(e.TEXTURE_2D,r.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,n.width,n.height,0,e.UNSIGNED_BYTE,new Uint8Array(n.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.uniform1i(r.location,i++);else if(Array.isArray(n))switch(n.length){case 2:return void e.uniform2f(r.location,n[0],n[1]);case 3:return void e.uniform3f(r.location,n[0],n[1],n[2]);case 4:return void e.uniform4f(r.location,n[0],n[1],n[2],n[3]);default:return}else"number"===typeof n&&e.uniform1f(r.location,n)}))}}var Dx=kx;function Ux(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function Qx(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}const Gx={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},Hx={UNSIGNED_BYTE:Ex,UNSIGNED_SHORT:Cx,UNSIGNED_INT:Sx,FLOAT:Bx},Vx={};function jx(t){return"shared/"+t}let Wx=0;function zx(){const t="unique/"+Wx;return Wx+=1,t}function Kx(t){let e=Vx[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0";const i=Ix(n);e={users:0,context:i},Vx[t]=e}return e.users+=1,e.context}function qx(t){const e=Vx[t];if(!e)return;if(e.users-=1,e.users>0)return;const n=e.context,i=n.getExtension("WEBGL_lose_context");i&&i.loseContext();const r=n.canvas;r.width=1,r.height=1,delete Vx[t]}class $x extends f{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?jx(t.canvasCacheKey):zx(),this.gl_=Kx(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const e=this.gl_.canvas;e.addEventListener(Px.LOST,this.boundHandleWebGLContextLost_),e.addEventListener(Px.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=Y(),this.offsetScaleMatrix_=Y(),this.tmpMat4_=Ux(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map((t=>new Dx({webGlContext:this.gl_,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}))):[new Dx({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===jx(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,n=G(t);let i=this.bufferCache_[n];if(!i){const r=e.createBuffer();i={buffer:t,webGlBuffer:r},this.bufferCache_[n]=i}e.bindBuffer(t.getType(),i.webGlBuffer)}flushBufferData(t){const e=this.gl_;this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=this.gl_,n=G(t),i=this.bufferCache_[n];i&&!e.isContextLost()&&e.deleteBuffer(i.webGlBuffer),delete this.bufferCache_[n]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(Px.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(Px.RESTORED,this.boundHandleWebGLContextRestored_),qx(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,e,n){const i=this.gl_,r=this.getCanvas(),s=t.size,o=t.pixelRatio;r.width===s[0]*o&&r.height===s[1]*o||(r.width=s[0]*o,r.height=s[1]*o,r.style.width=s[0]+"px",r.style.height=s[1]+"px");for(let a=this.postProcessPasses_.length-1;a>=0;a--)this.postProcessPasses_[a].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,e?i.ZERO:i.ONE_MINUS_SRC_ALPHA),n?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindTexture(t,e,n){const i=this.gl_;i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.getUniformLocation(n),e)}prepareDrawToRenderTarget(t,e,n,i){const r=this.gl_,s=e.getSize();r.bindFramebuffer(r.FRAMEBUFFER,e.getFramebuffer()),r.bindRenderbuffer(r.RENDERBUFFER,e.getDepthbuffer()),r.viewport(0,0,s[0],s[1]),r.bindTexture(r.TEXTURE_2D,e.getTexture()),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,n?r.ZERO:r.ONE_MINUS_SRC_ALPHA),i?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}drawElements(t,e){const n=this.gl_;this.getExtension("OES_element_index_uint");const i=n.UNSIGNED_INT,r=4,s=e-t,o=t*r;n.drawElements(n.TRIANGLES,s,i,o)}finalizeDraw(t,e,n){for(let i=0,r=this.postProcessPasses_.length;i<r;i++)i===r-1?this.postProcessPasses_[i].apply(t,null,e,n):this.postProcessPasses_[i].apply(t,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const e=t.size,n=t.viewState.rotation,i=t.pixelRatio;this.setUniformFloatValue(Gx.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(Gx.ZOOM,t.viewState.zoom),this.setUniformFloatValue(Gx.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(Gx.PIXEL_RATIO,i),this.setUniformFloatVec2(Gx.VIEWPORT_SIZE_PX,[e[0],e[1]]),this.setUniformFloatValue(Gx.ROTATION,n)}applyHitDetectionUniform(t){const e=this.getUniformLocation(Gx.HIT_DETECTION);this.getGL().uniform1i(e,t?1:0),t&&this.setUniformFloatValue(Gx.PIXEL_RATIO,.5)}applyUniforms(t){const e=this.gl_;let n,i=0;this.uniforms_.forEach((r=>{if(n="function"===typeof r.value?r.value(t):r.value,n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData||n instanceof WebGLTexture){n instanceof WebGLTexture&&!r.texture?(r.prevValue=void 0,r.texture=n):r.texture||(r.prevValue=void 0,r.texture=e.createTexture()),this.bindTexture(r.texture,i,r.name),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const t=!(n instanceof HTMLImageElement)||n.complete;n instanceof WebGLTexture||!t||r.prevValue===n||(r.prevValue=n,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),i++}else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(r.name,Qx(this.tmpMat4_,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void e.uniform2f(this.getUniformLocation(r.name),n[0],n[1]);case 3:return void e.uniform3f(this.getUniformLocation(r.name),n[0],n[1],n[2]);case 4:return void e.uniform4f(this.getUniformLocation(r.name),n[0],n[1],n[2],n[3]);default:return}else"number"===typeof n&&e.uniform1f(this.getUniformLocation(r.name),n)}))}useProgram(t,e){const n=this.gl_;n.useProgram(t),this.currentProgram_=t,this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){const n=this.gl_,i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}getProgram(t,e){const n=this.gl_,i=this.compileShader(t,n.FRAGMENT_SHADER),r=this.compileShader(e,n.VERTEX_SHADER),s=n.createProgram();if(n.attachShader(s,i),n.attachShader(s,r),n.linkProgram(s),!n.getShaderParameter(i,n.COMPILE_STATUS)){const t=`Fragment shader compilation failed: ${n.getShaderInfoLog(i)}`;throw new Error(t)}if(n.deleteShader(i),!n.getShaderParameter(r,n.COMPILE_STATUS)){const t=`Vertex shader compilation failed: ${n.getShaderInfoLog(r)}`;throw new Error(t)}if(n.deleteShader(r),!n.getProgramParameter(s,n.LINK_STATUS)){const t=`GL program linking failed: ${n.getProgramInfoLog(s)}`;throw new Error(t)}return s}getUniformLocation(t){const e=G(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[e]&&(this.uniformLocationsByProgram_[e]={}),void 0===this.uniformLocationsByProgram_[e][t]&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=G(this.currentProgram_);return void 0===this.attribLocationsByProgram_[e]&&(this.attribLocationsByProgram_[e]={}),void 0===this.attribLocationsByProgram_[e][t]&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const n=t.size,i=t.viewState.rotation,r=t.viewState.resolution,s=t.viewState.center;return at(e,0,0,2/(r*n[0]),2/(r*n[1]),-i,-s[0],-s[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,n,i,r){const s=this.getAttributeLocation(t);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,e,n,!1,i,r))}enableAttributes(t){const e=Xx(t);let n=0;for(let i=0;i<t.length;i++){const r=t[i];this.enableAttributeArray_(r.name,r.size,r.type||Bx,e,n),n+=r.size*Yx(r.type)}}handleWebGLContextLost(t){T(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,e,n){const i=this.gl_;n=n||i.createTexture();const r=0,s=i.RGBA,o=0,a=i.RGBA,l=i.UNSIGNED_BYTE;return i.bindTexture(i.TEXTURE_2D,n),e?i.texImage2D(i.TEXTURE_2D,r,s,a,l,e):i.texImage2D(i.TEXTURE_2D,r,s,t[0],t[1],o,a,l,null),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),n}}function Xx(t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];e+=i.size*Yx(i.type)}return e}function Yx(t){switch(t){case Hx.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case Hx.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case Hx.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case Hx.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var Zx=$x;class Jx extends ub{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=Y(),this.pixelContext_=null,this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,t.addChangeListener(Om.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const n=this.getLayer();if(n.hasListener(Um.PRECOMPOSE)){const i=new ew(Um.PRECOMPOSE,void 0,e,t);n.dispatchEvent(i)}}dispatchPostComposeEvent(t,e){const n=this.getLayer();if(n.hasListener(Um.POSTCOMPOSE)){const i=new ew(Um.POSTCOMPOSE,void 0,e,t);n.dispatchEvent(i)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,n=!0,i=-1;for(let s=0,o=t.layerStatesArray.length;s<o;s++){const r=t.layerStatesArray[s].layer,o=r.getRenderer();if(!(o instanceof Jx)){n=!0;continue}const a=r.getClassName();if((n||a!==e)&&(i+=1,n=!1),e=a,o===this)break}const r="map/"+t.mapId+"/group/"+i;this.helper&&this.helper.canvasCacheKeyMatches(r)&&!this.helper.needsToBeRecreated()||(this.removeHelper(),this.helper=new Zx({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:r}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){at(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);const r=new ew(t,this.inversePixelTransform_,n,e);i.dispatchEvent(r)}}preRender(t,e){this.dispatchRenderEvent_(Um.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(Um.POSTRENDER,t,e)}}var tE=Jx;const eE=new Uint8Array(4);class nE{constructor(t,e){this.helper_=t;const n=t.getGL();this.texture_=n.createTexture(),this.framebuffer_=n.createFramebuffer(),this.depthbuffer_=n.createRenderbuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){_(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return eE[0]=0,eE[1]=0,eE[2]=0,eE[3]=0,eE;this.readAll();const n=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return eE[0]=this.data_[4*n],eE[1]=this.data_[4*n+1],eE[2]=this.data_[4*n+2],eE[3]=this.data_[4*n+3],eE}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),e.bindRenderbuffer(e.RENDERBUFFER,this.depthbuffer_),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t[0],t[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}var iE=nE;const rE={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"};n(6583);const sE=.985;function oE(t,e){e=e||[];const n=256,i=n-1;return e[0]=Math.floor(t/n/n/n)/i,e[1]=Math.floor(t/n/n)%n/i,e[2]=Math.floor(t/n)%n/i,e[3]=t%n/i,e}function aE(t){let e=0;const n=256,i=n-1;return e+=Math.round(t[0]*n*n*n*i),e+=Math.round(t[1]*n*n*i),e+=Math.round(t[2]*n*i),e+=Math.round(t[3]*i),e}function lE(){const t='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker("undefined"===typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}function cE(t,e){const n=t.viewState.projection,i=e.getSource(),r=i.getWrapX()&&n.canWrapX(),s=n.getExtent(),o=t.extent,a=r?Jt(s):null,l=r?Math.ceil((o[2]-s[2])/a)+1:1,c=r?Math.floor((o[0]-s[0])/a):0;return[c,l,a]}class uE extends tE{constructor(t,e){const n=e.uniforms||{},i=Y();n[Gx.PROJECTION_MATRIX]=i,super(t,{uniforms:n,postProcesses:e.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new Mx(yx,xx),this.indicesBuffer_=new Mx(wx,xx),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.program_,this.hitDetectionEnabled_=e.hitDetectionEnabled??!0;const r=e.attributes?e.attributes.map((function(t){return{name:"a_prop_"+t.name,size:1,type:Hx.FLOAT}})):[];this.attributes=[{name:"a_position",size:2,type:Hx.FLOAT},{name:"a_index",size:1,type:Hx.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_prop_hitColor",size:4,type:Hx.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:Hx.FLOAT})),this.attributes.push(...r),this.customAttributes=e.attributes?e.attributes:[],this.previousExtent_=bt(),this.currentTransform_=i,this.renderTransform_=Y(),this.invertRenderTransform_=Y(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=lE(),this.worker_.addEventListener("message",(t=>{const e=t.data;if(e.type===rE.GENERATE_POINT_BUFFERS){const n=e.projectionTransform;this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=n,lt(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(t.data.renderInstructions),e.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}})),this.featureCache_={},this.featureCount_=0;const s=this.getLayer().getSource();this.sourceListenKeys_=[M(s,F_.ADDFEATURE,this.handleSourceFeatureAdded_,this),M(s,F_.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),M(s,F_.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),M(s,F_.CLEAR,this.handleSourceFeatureClear_,this)],s.forEachFeature((t=>{this.featureCache_[G(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++}))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new iE(this.helper))}handleSourceFeatureAdded_(t){const e=t.feature;this.featureCache_[G(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){const e=t.feature;this.featureCache_[G(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}}handleSourceFeatureDelete_(t){const e=t.feature;delete this.featureCache_[G(e)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){const e=this.helper.getGL();this.preRender(e,t);const[n,i,r]=cE(t,this.getLayer());this.renderWorlds(t,!1,n,i,r),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,n,i,r),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t);const s=this.helper.getCanvas();return s}prepareFrameInternal(t){const e=this.getLayer(),n=e.getSource(),i=t.viewState,r=!t.viewHints[Qm.ANIMATING]&&!t.viewHints[Qm.INTERACTING],s=!It(this.previousExtent_,t.extent),o=this.sourceRevision_<n.getRevision();if(o&&(this.sourceRevision_=n.getRevision()),r&&(s||o)){const r=i.projection,s=i.resolution,o=e instanceof Xy?e.getRenderBuffer():0,a=pt(t.extent,o*s);n.loadFeatures(a,s,r),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){const e=Y();this.helper.makeProjectionTransform(t,e);const n=In(),i=this.hitDetectionEnabled_?7:2,r=i+this.customAttributes.length,s=r*this.featureCount_;let o,a;this.renderInstructions_&&this.renderInstructions_.length===s||(this.renderInstructions_=new Float32Array(s));const l=[],c=[];let u=-1;for(const A in this.featureCache_)if(o=this.featureCache_[A],a=o.geometry,a&&"Point"===a.getType()){if(n){const e=Ln(a.getFlatCoordinates(),t.viewState.projection);l[0]=e[0],l[1]=e[1]}else l[0]=a.getFlatCoordinates()[0],l[1]=a.getFlatCoordinates()[1];if(nt(e,l),this.renderInstructions_[++u]=l[0],this.renderInstructions_[++u]=l[1],this.hitDetectionEnabled_){const t=oE(u+5,c);this.renderInstructions_[++u]=t[0],this.renderInstructions_[++u]=t[1],this.renderInstructions_[++u]=t[2],this.renderInstructions_[++u]=t[3],this.renderInstructions_[++u]=Number(A)}for(let t=0;t<this.customAttributes.length;t++){const e=this.customAttributes[t].callback(o.feature,o.properties);this.renderInstructions_[++u]=e}}const h={id:++this.lastSentId,type:rE.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:r-2};h["projectionTransform"]=e,this.ready=!1,this.worker_.postMessage(h,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(t,e,n,i,r){if(z(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;const s=nt(e.coordinateToPixelTransform,t.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),a=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],l=aE(a),c=this.renderInstructions_[l],u=Math.floor(c).toString(),h=this.getLayer().getSource(),A=h.getFeatureByUid(u);return A?i(A,this.getLayer(),null):void 0}renderWorlds(t,e,n,i,r){let s=n;this.helper.useProgram(this.program_,t),e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),ot(this.currentTransform_,s*r,0),J(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(e);const n=this.indicesBuffer_.getSize();this.helper.drawElements(0,n)}while(++s<i)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach((function(t){N(t)})),this.sourceListenKeys_=null,super.disposeInternal()}renderDeclutter(){}}var hE=uE;class AE{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}}var dE=AE;const fE=.5;class pE extends L{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(R.CHANGE)}release(){this.state===ww.ERROR&&this.setState(ww.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let t=this.interimTile;if(!t)return this;do{if(t.getState()==ww.LOADED)return this.transition_=0,t;t=t.interimTile}while(t);return this}refreshInterimChain(){let t=this.interimTile;if(!t)return;let e=this;do{if(t.getState()==ww.LOADED){t.interimTile=null;break}t.getState()==ww.LOADING?e=t:t.getState()==ww.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==ww.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}load(){U()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const i=e-n+1e3/60;return i>=this.transition_?1:ym(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}var gE=pE;function mE(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function vE(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let yE=null;function wE(t){yE||(yE=pl(t.width,t.height,void 0,{willReadFrequently:!0}));const e=yE.canvas,n=t.width;e.width!==n&&(e.width=n);const i=t.height;return e.height!==i&&(e.height=i),yE.clearRect(0,0,n,i),yE.drawImage(t,0,0),yE.getImageData(0,0,n,i).data}const _E=[256,256];class bE extends gE{constructor(t){const e=ww.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null}getSize(){if(this.size_)return this.size_;const t=mE(this.data_);return t?[t.width,t.height]:_E}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==ww.IDLE&&this.state!==ww.ERROR)return;this.state=ww.LOADING,this.changed();const t=this;this.loader_().then((function(e){t.data_=e,t.state=ww.LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=ww.ERROR,t.changed()}))}}var xE=bE;const EE=10,CE=.25;class SE{constructor(t,e,n,i,r,s){this.sourceProj_=t,this.targetProj_=e;let o={};const a=Cn(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return o[e]||(o[e]=a(t)),o[e]},this.maxSourceExtent_=i,this.errorThresholdSquared_=r*r,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!i&&!!this.sourceProj_.getExtent()&&Jt(i)>=Jt(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?Jt(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?Jt(this.targetProj_.getExtent()):null;const l=Yt(n),c=Zt(n),u=Qt(n),h=Ut(n),A=this.transformInv_(l),d=this.transformInv_(c),f=this.transformInv_(u),p=this.transformInv_(h),g=EE+(s?Math.max(0,Math.ceil(Math.log2(Dt(n)/(s*s*256*256)))):0);if(this.addQuad_(l,c,u,h,A,d,f,p,g),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]),r=Math.max(n[0][0],n[1][0],n[2][0]);r-i<this.sourceWorldWidth_/2&&(e.source=n)}}))}o={}}addTriangle_(t,e,n,i,r,s){this.triangles_.push({source:[i,r,s],target:[t,e,n]})}addQuad_(t,e,n,i,r,s,o,a,l){const c=dt([r,s,o,a]),u=this.sourceWorldWidth_?Jt(c)/this.sourceWorldWidth_:null,h=this.sourceWorldWidth_,A=this.sourceProj_.canWrapX()&&u>.5&&u<1;let d=!1;if(l>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const r=dt([t,e,n,i]),s=Jt(r)/this.targetWorldWidth_;d=s>CE||d}!A&&this.sourceProj_.isGlobal()&&u&&(d=u>CE||d)}if(!d&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!te(c,this.maxSourceExtent_))return;let f=0;if(!d&&(!isFinite(r[0])||!isFinite(r[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])))if(l>0)d=!0;else if(f=(isFinite(r[0])&&isFinite(r[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(o[0])&&isFinite(o[1])?0:2)+(isFinite(a[0])&&isFinite(a[1])?0:1),1!=f&&2!=f&&4!=f&&8!=f)return;if(l>0){if(!d){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let s;if(A){const t=(Ue(r[0],h)+Ue(o[0],h))/2;s=t-Ue(i[0],h)}else s=(r[0]+o[0])/2-i[0];const a=(r[1]+o[1])/2-i[1],l=s*s+a*a;d=l>this.errorThresholdSquared_}if(d){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const c=[(e[0]+n[0])/2,(e[1]+n[1])/2],u=this.transformInv_(c),h=[(i[0]+t[0])/2,(i[1]+t[1])/2],A=this.transformInv_(h);this.addQuad_(t,e,c,h,r,s,u,A,l-1),this.addQuad_(h,c,n,i,A,u,o,a,l-1)}else{const c=[(t[0]+e[0])/2,(t[1]+e[1])/2],u=this.transformInv_(c),h=[(n[0]+i[0])/2,(n[1]+i[1])/2],A=this.transformInv_(h);this.addQuad_(t,c,h,i,r,u,A,a,l-1),this.addQuad_(c,e,n,h,u,s,o,A,l-1)}return}}if(A){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}0==(11&f)&&this.addTriangle_(t,n,i,r,o,a),0==(14&f)&&this.addTriangle_(t,n,e,r,o,s),f&&(0==(13&f)&&this.addTriangle_(e,i,t,s,a,r),0==(7&f)&&this.addTriangle_(e,i,n,s,a,o))}calculateSourceExtent(){const t=bt();return this.triangles_.forEach((function(e,n,i){const r=e.source;Rt(t,r[0]),Rt(t,r[1]),Rt(t,r[2])})),t}getTriangles(){return this.triangles_}}var BE=SE;let TE;const IE=[];function FE(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function LE(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function RE(){if(void 0===TE){const t=pl(6,6,IE);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",FE(t,4,5,4,0),FE(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;TE=LE(e,0)||LE(e,4)||LE(e,8),vl(t),IE.push(t.canvas)}return TE}function ME(t,e,n,i){const r=Sn(n,e,t);let s=mn(e,i,n);const o=e.getMetersPerUnit();void 0!==o&&(s*=o);const a=t.getMetersPerUnit();void 0!==a&&(s/=a);const l=t.getExtent();if(!l||vt(l,r)){const e=mn(t,s,r)/s;isFinite(e)&&e>0&&(s/=e)}return s}function PE(t,e,n,i){const r=Gt(n);let s=ME(t,e,r,i);return(!isFinite(s)||s<=0)&&kt(n,(function(n){return s=ME(t,e,n,i),isFinite(s)&&s>0})),s}function NE(t,e,n,i,r,s,o,a,l,c,u,h,A,d){const f=pl(Math.round(n*t),Math.round(n*e),IE);if(h||(f.imageSmoothingEnabled=!1),0===l.length)return f.canvas;function p(t){return Math.round(t*n)/n}f.scale(n,n),f.globalCompositeOperation="lighter";const g=bt();let m;l.forEach((function(t,e,n){Lt(g,t.extent)}));const v=n/i,y=(h?1:1+Math.pow(2,-24))/v;if(!A||1!==l.length||0!==c){if(m=pl(Math.round(Jt(g)*v),Math.round(zt(g)*v),IE),h||(m.imageSmoothingEnabled=!1),r&&d){const t=(r[0]-g[0])*v,e=-(r[3]-g[3])*v,n=Jt(r)*v,i=zt(r)*v;m.rect(t,e,n,i),m.clip()}l.forEach((function(t,e,n){const i=(t.extent[0]-g[0])*v,r=-(t.extent[3]-g[3])*v,s=Jt(t.extent)*v,o=zt(t.extent)*v;t.image.width>0&&t.image.height>0&&m.drawImage(t.image,c,c,t.image.width-2*c,t.image.height-2*c,h?i:Math.round(i),h?r:Math.round(r),h?s:Math.round(i+s)-Math.round(i),h?o:Math.round(r+o)-Math.round(r))}))}const w=Yt(o);return a.getTriangles().forEach((function(t,e,n){const i=t.source,r=t.target;let o=i[0][0],a=i[0][1],c=i[1][0],u=i[1][1],A=i[2][0],d=i[2][1];const v=p((r[0][0]-w[0])/s),_=p(-(r[0][1]-w[1])/s),b=p((r[1][0]-w[0])/s),x=p(-(r[1][1]-w[1])/s),E=p((r[2][0]-w[0])/s),C=p(-(r[2][1]-w[1])/s),S=o,B=a;o=0,a=0,c-=S,u-=B,A-=S,d-=B;const T=[[c,u,0,0,b-v],[A,d,0,0,E-v],[0,0,c,u,x-_],[0,0,A,d,C-_]],I=Oe(T);if(!I)return;if(f.save(),f.beginPath(),RE()||!h){f.moveTo(b,x);const t=4,e=v-b,n=_-x;for(let i=0;i<t;i++)f.lineTo(b+p((i+1)*e/t),x+p(i*n/(t-1))),i!=t-1&&f.lineTo(b+p((i+1)*e/t),x+p((i+1)*n/(t-1)));f.lineTo(E,C)}else f.moveTo(b,x),f.lineTo(v,_),f.lineTo(E,C);let F;if(f.clip(),f.transform(I[0],I[2],I[1],I[3],v,_),f.translate(g[0]-S,g[3]-B),m)F=m.canvas,f.scale(y,-y);else{const t=l[0],e=t.extent;F=t.image,f.scale(Jt(e)/F.width,-zt(e)/F.height)}f.drawImage(F,0,0),f.restore()})),m&&(vl(m),IE.push(m.canvas)),u&&(f.save(),f.globalCompositeOperation="source-over",f.strokeStyle="black",f.lineWidth=1,a.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-w[0])/s,o=-(i[0][1]-w[1])/s,a=(i[1][0]-w[0])/s,l=-(i[1][1]-w[1])/s,c=(i[2][0]-w[0])/s,u=-(i[2][1]-w[1])/s;f.beginPath(),f.moveTo(a,l),f.lineTo(r,o),f.lineTo(c,u),f.closePath(),f.stroke()})),f.restore()),f.canvas}class OE extends xE{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),n=this.targetTileGrid_.getExtent();let i=this.sourceTileGrid_.getExtent();const r=n?qt(e,n):e;if(0===Dt(r))return void(this.state=ww.EMPTY);const s=t.sourceProj,o=s.getExtent();o&&(i=i?qt(i,o):o);const a=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),l=t.targetProj,c=PE(s,l,r,a);if(!isFinite(c)||c<=0)return void(this.state=ww.EMPTY);const u=void 0!==t.errorThreshold?t.errorThreshold:fE;if(this.triangulation_=new BE(s,l,r,i,c*u,a),0===this.triangulation_.getTriangles().length)return void(this.state=ww.EMPTY);this.sourceZ_=this.sourceTileGrid_.getZForResolution(c);let h=this.triangulation_.calculateSourceExtent();if(i&&(s.canWrapX()?(h[1]=Me(h[1],i[1],i[3]),h[3]=Me(h[3],i[1],i[3])):h=qt(h,i)),Dt(h)){const e=this.sourceTileGrid_.getTileRangeForExtentAndZ(h,this.sourceZ_),n=t.getTileFunction;for(let t=e.minX;t<=e.maxX;t++)for(let i=e.minY;i<=e.maxY;i++){const e=n(this.sourceZ_,t,i,this.pixelRatio_);e&&this.sourceTiles_.push(e)}0===this.sourceTiles_.length&&(this.state=ww.EMPTY)}else this.state=ww.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{if(!e||e.getState()!==ww.LOADED)return;const n=e.getSize(),i=this.gutter_;let r;const s=vE(e.getData());r=s||wE(mE(e.getData()));const o=[n[0]+2*i,n[1]+2*i],a=r instanceof Float32Array,l=o[0]*o[1],c=a?Float32Array:Uint8Array,u=new c(r.buffer),h=c.BYTES_PER_ELEMENT,A=h*u.length/l,d=u.byteLength/o[1],f=Math.floor(d/h/o[0]),p=l*f;let g=u;if(u.length!==p){g=new c(p);let t=0,e=0;const n=o[0]*f;for(let i=0;i<o[1];++i){for(let i=0;i<n;++i)g[t++]=u[e+i];e+=d/h}}t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),data:new Uint8Array(g.buffer),dataType:c,bytesPerPixel:A,pixelSize:o})})),this.sourceTiles_.length=0,0===t.length)this.state=ww.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"===typeof n?n:n[0],r="number"===typeof n?n:n[1],s=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);let l,c;const u=t[0].bytesPerPixel,h=Math.ceil(u/3);for(let A=h-1;A>=0;--A){const e=[];for(let i=0,r=t.length;i<r;++i){const n=t[i],r=n.data,s=n.pixelSize,o=s[0],a=s[1],l=pl(o,a,IE),c=l.createImageData(o,a),h=c.data;let d=3*A;for(let t=0,e=h.length;t<e;t+=4)h[t]=r[d],h[t+1]=r[d+1],h[t+2]=r[d+2],h[t+3]=255,d+=u;l.putImageData(c,0,0),e.push({extent:n.extent,image:l.canvas})}const n=NE(i,r,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),s,a,this.triangulation_,e,this.gutter_,!1,!1,!1,!0);for(let t=0,i=e.length;t<i;++t){const n=e[t].image,i=n.getContext("2d");vl(i),IE.push(i.canvas)}const h=n.getContext("2d"),d=h.getImageData(0,0,n.width,n.height);vl(h),IE.push(n),l||(c=new Uint8Array(u*d.width*d.height),l=new t[0].dataType(c.buffer));const f=d.data;let p=3*A;for(let t=0,i=f.length;t<i;t+=4)255===f[t+3]?(c[p]=f[t],c[p+1]=f[t+1],c[p+2]=f[t+2]):(c[p]=0,c[p+1]=0,c[p+2]=0),p+=u}this.reprojData_=l,this.reprojSize_=[Math.round(i*this.pixelRatio_),Math.round(r*this.pixelRatio_)],this.state=ww.LOADED}this.changed()}load(){if(this.state!==ww.IDLE&&this.state!==ww.ERROR)return;this.state=ww.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const n=e.getState();if(n!==ww.IDLE&&n!==ww.LOADING)return;t++;const i=M(e,R.CHANGE,(function(){const n=e.getState();n!=ww.LOADED&&n!=ww.ERROR&&n!=ww.EMPTY||(N(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(i)})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t){const e=t.getState();e==ww.IDLE&&t.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(N),this.sourcesListenerKeys_=null}}var kE=OE;class DE extends gE{constructor(t,e,n,i,r,s,o,a,l,c,u,h){super(r,ww.IDLE,h),this.renderEdges_=void 0!==u&&u,this.pixelRatio_=o,this.gutter_=a,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=s||r,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const A=i.getTileCoordExtent(this.wrappedTileCoord_),d=this.targetTileGrid_.getExtent();let f=this.sourceTileGrid_.getExtent();const p=d?qt(A,d):A;if(0===Dt(p))return void(this.state=ww.EMPTY);const g=t.getExtent();g&&(f=f?qt(f,g):g);const m=i.getResolution(this.wrappedTileCoord_[0]),v=PE(t,n,p,m);if(!isFinite(v)||v<=0)return void(this.state=ww.EMPTY);const y=void 0!==c?c:fE;if(this.triangulation_=new BE(t,n,p,f,v*y,m),0===this.triangulation_.getTriangles().length)return void(this.state=ww.EMPTY);this.sourceZ_=e.getZForResolution(v);let w=this.triangulation_.calculateSourceExtent();if(f&&(t.canWrapX()?(w[1]=Me(w[1],f[1],f[3]),w[3]=Me(w[3],f[1],f[3])):w=qt(w,f)),Dt(w)){const t=e.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let n=t.minY;n<=t.maxY;n++){const t=l(this.sourceZ_,e,n,o);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=ww.EMPTY)}else this.state=ww.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{e&&e.getState()==ww.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})})),this.sourceTiles_.length=0,0===t.length)this.state=ww.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"===typeof n?n:n[0],r="number"===typeof n?n:n[1],s=this.targetTileGrid_.getResolution(e),o=this.sourceTileGrid_.getResolution(this.sourceZ_),a=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=NE(i,r,this.pixelRatio_,o,this.sourceTileGrid_.getExtent(),s,a,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=ww.LOADED}this.changed()}load(){if(this.state==ww.IDLE){this.state=ww.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((e=>{const n=e.getState();if(n==ww.IDLE||n==ww.LOADING){t++;const n=M(e,R.CHANGE,(function(i){const r=e.getState();r!=ww.LOADED&&r!=ww.ERROR&&r!=ww.EMPTY||(N(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}),this);this.sourcesListenerKeys_.push(n)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function(t,e,n){const i=t.getState();i==ww.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(N),this.sourcesListenerKeys_=null}release(){this.canvas_&&(vl(this.canvas_.getContext("2d")),IE.push(this.canvas_),this.canvas_=null),super.release()}}var UE=DE;class QE extends gE{constructor(t,e,n,i,r,s){super(t,e,s),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=ww.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=ww.ERROR,this.unlistenImage_(),this.image_=GE(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=ww.LOADED:this.state=ww.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==ww.ERROR&&(this.state=ww.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==ww.IDLE&&(this.state=ww.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Sl(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}function GE(){const t=pl(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}var HE=QE;class VE extends L{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=t.gutter||0,this.helper_=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(R.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===ww.LOADED,this.loaded)this.uploadTile();else{if(t instanceof HE){const e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(R.CHANGE,this.handleTileChange_)}}uploadTile(){U()}setReady(){this.ready=!0,this.dispatchEvent(R.CHANGE)}handleTileChange_(){this.tile.getState()===ww.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(R.CHANGE,this.handleTileChange_)}}var jE=VE;function WE(t,e,n){const i=n?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i)}function zE(t,e,n,i){WE(t,e,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}function KE(t,e,n,i,r,s){const o=t.getGL();let a,l;if(n instanceof Float32Array){a=o.FLOAT,t.getExtension("OES_texture_float");const e=t.getExtension("OES_texture_float_linear");l=null!==e}else a=o.UNSIGNED_BYTE,l=!0;WE(o,e,s&&l);const c=n.byteLength/i[1];let u,h=1;switch(c%8===0?h=8:c%4===0?h=4:c%2===0&&(h=2),r){case 1:u=o.LUMINANCE;break;case 2:u=o.LUMINANCE_ALPHA;break;case 3:u=o.RGB;break;case 4:u=o.RGBA;break;default:throw new Error(`Unsupported number of bands: ${r}`)}const A=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,h),o.texImage2D(o.TEXTURE_2D,0,u,i[0],i[1],0,u,a,n),o.pixelStorei(o.UNPACK_ALIGNMENT,A)}let qE=null;function $E(){qE=pl(1,1,void 0,{willReadFrequently:!0})}class XE extends jE{constructor(t){super(t),this.textures=[],this.renderSize_=Gl(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const e=new Mx(yx,bx);e.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(e),this.coords=e,this.setTile(t.tile)}uploadTile(){const t=this.helper_,e=t.getGL(),n=this.tile;let i;this.textures.length=0,i=n instanceof HE||n instanceof UE?n.getImage():n.getData();const r=mE(i);if(r){const t=e.createTexture();return this.textures.push(t),this.bandCount=4,zE(e,t,r,n.interpolate),void this.setReady()}i=vE(i);const s=n.getSize(),o=[s[0]+2*this.gutter_,s[1]+2*this.gutter_],a=i instanceof Float32Array,l=o[0]*o[1],c=a?Float32Array:Uint8Array,u=c.BYTES_PER_ELEMENT,h=i.byteLength/o[1];this.bandCount=Math.floor(h/u/o[0]);const A=Math.ceil(this.bandCount/4);if(1===A){const r=e.createTexture();return this.textures.push(r),KE(t,r,i,o,this.bandCount,n.interpolate),void this.setReady()}const d=new Array(A);for(let m=0;m<A;++m){const t=e.createTexture();this.textures.push(t);const n=m<A-1?4:(this.bandCount-1)%4+1;d[m]=new c(l*n)}let f=0,p=0;const g=o[0]*this.bandCount;for(let m=0;m<o[1];++m){for(let t=0;t<g;++t){const e=i[p+t],n=Math.floor(f/this.bandCount),r=t%this.bandCount,s=Math.floor(r/4),o=d[s],a=o.length/l,c=r%4;o[n*a+c]=e,++f}p+=h/u}for(let m=0;m<A;++m){const e=this.textures[m],i=d[m],r=i.length/l;KE(t,e,i,o,r,n.interpolate)}this.setReady()}disposeInternal(){const t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(R.CHANGE,this.handleTileChange_)}getImagePixelData_(t,e,n){const i=this.gutter_,r=this.renderSize_[0],s=this.renderSize_[1];qE||$E(),qE.clearRect(0,0,1,1);const o=t.width,a=t.height,l=o-2*i,c=a-2*i,u=i+Math.floor(l*(e/r)),h=i+Math.floor(c*(n/s));let A;try{qE.drawImage(t,u,h,1,1,0,0,1,1),A=qE.getImageData(0,0,1,1).data}catch(d){return qE=null,null}return A}getArrayPixelData_(t,e,n,i){const r=this.gutter_,s=this.renderSize_[0],o=this.renderSize_[1],a=e[0],l=e[1],c=a+2*r,u=l+2*r,h=r+Math.floor(a*(n/s)),A=r+Math.floor(l*(i/o));if(t instanceof DataView){const e=t.byteLength/(c*u),n=e*(A*c+h),i=t.buffer.slice(n,n+e);return new DataView(i)}const d=this.bandCount*(A*c+h);return t.slice(d,d+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null;if(this.tile instanceof xE){const n=this.tile.getData(),i=vE(n);if(i){const n=this.tile.getSize();return this.getArrayPixelData_(i,n,t,e)}return this.getImagePixelData_(mE(n),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}}var YE=XE;class ZE{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){while(this.canExpireCache())this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;while(e)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return z(void 0!==n,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return z(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){z(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}var JE=ZE;class tC{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function eC(t,e,n,i,r){return void 0!==r?(r.minX=t,r.maxX=e,r.minY=n,r.maxY=i,r):new tC(t,e,n,i)}var nC=tC;function iC(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function rC(t,e,n){return t+"/"+e+"/"+n}function sC(t){return rC(t[0],t[1],t[2])}function oC(t){const[e,n,i]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return rC(e,n,i)}function aC(t){return t.split("/").map(Number)}function lC(t){return(t[1]<<t[0])+t[2]}function cC(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return!s||s.containsXY(i,r)}const uC={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},hC={};function AC(t){return 1/(t+2)}function dC(){return{tileIds:new Set,representationsByZ:{}}}function fC(t,e){return t.tileIds.has(G(e))}function pC(t,e,n){const i=t.representationsByZ;n in i||(i[n]=new Set),i[n].add(e),t.tileIds.add(G(e.tile))}function gC(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=qt(e,Mn(n.extent,t.viewState.projection)));const i=n.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(t.viewState.projection).getExtent();n&&(e=qt(e,n))}return e}function mC(t,e){return`${t.getKey()},${sC(e)}`}class vC extends tE{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=Y(),this.tempMat4=Ux(),this.tempTileRange_=new nC(0,0,0,0),this.tempTileCoord_=iC(0,0,0),this.tempSize_=[0,0];const n=void 0!==e.cacheSize?e.cacheSize:512;this.tileRepresentationCache=new JE(n),this.frameState=null,this.projection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}isDrawableTile_(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==ww.LOADED||n==ww.EMPTY||n==ww.ERROR&&!i}prepareFrameInternal(t){this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=t.viewState.projection):this.projection_=t.viewState.projection;const e=this.getLayer(),n=e.getRenderSource();return!!n&&(!ee(gC(t,t.extent))&&"ready"===n.getState())}createTileRepresentation(t){return U()}enqueueTiles(t,e,n,i,r){const s=t.viewState,o=this.getLayer(),a=o.getRenderSource(),l=a.getTileGridForProjection(s.projection),c=a.getGutterForProjection(s.projection),u=G(a);u in t.wantedTiles||(t.wantedTiles[u]={});const h=t.wantedTiles[u],A=this.tileRepresentationCache,d=o.getMapInternal(),f=Math.max(n-r,l.getMinZoom(),l.getZForResolution(Math.min(o.getMaxResolution(),d?d.getView().getResolutionForZoom(Math.max(o.getMinZoom(),0)):l.getResolution(0)),a.zDirection));for(let p=n;p>=f;--p){const n=l.getTileRangeForExtentAndZ(e,p,this.tempTileRange_),r=l.getResolution(p);for(let e=n.minX;e<=n.maxX;++e)for(let o=n.minY;o<=n.maxY;++o){const n=iC(p,e,o,this.tempTileCoord_),d=mC(a,n);let f,g;if(A.containsKey(d)&&(f=A.get(d),g=f.tile),f&&f.tile.key===a.getKey()||(g=a.getTile(p,e,o,t.pixelRatio,s.projection)),fC(i,g))continue;if(f)if(this.isDrawableTile_(g))f.setTile(g);else{const t=g.getInterimTile();f.setTile(t)}else f=this.createTileRepresentation({tile:g,grid:l,helper:this.helper,gutter:c}),A.set(d,f);pC(i,f,p);const m=g.getKey();h[m]=!0,g.getState()===ww.IDLE&&(t.tileQueue.isKeyQueued(m)||t.tileQueue.enqueue([g,u,l.getTileCoordCenter(n),r]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,e,n,i,r,s,o,a,l,c,u){}renderTileMask(t,e,n,i){}drawTile_(t,e,n,i,r,s,o){if(!e.ready)return;const a=e.tile,l=a.tileCoord,c=sC(l),u=c in s?s[c]:1,h=o.getResolution(n),A=Gl(o.getTileSize(n),this.tempSize_),d=o.getOrigin(n),f=o.getTileCoordExtent(l),p=u<1?-1:AC(n);u<1&&(t.animate=!0);const g=t.viewState,m=g.center[0],v=g.center[1],y=A[0]+2*i,w=A[1]+2*i,_=y/w,b=(m-d[0])/(A[0]*h),x=(d[1]-v)/(A[1]*h),E=g.resolution/h,C=l[1],S=l[2];Z(this.tileTransform_),rt(this.tileTransform_,2/(t.size[0]*E/y),-2/(t.size[1]*E/y)),it(this.tileTransform_,g.rotation),rt(this.tileTransform_,1,1/_),ot(this.tileTransform_,(A[0]*(C-b)-i)/y,(A[1]*(S-x)-i)/w),this.renderTile(e,this.tileTransform_,t,r,h,A,d,f,p,i,u)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const e=this.helper.getGL();this.preRender(e,t);const n=t.viewState,i=this.getLayer(),r=i.getRenderSource(),s=r.getTileGridForProjection(n.projection),o=r.getGutterForProjection(n.projection),a=gC(t,t.extent),l=s.getZForResolution(n.resolution,r.zDirection),c=dC(),u=i.getPreload();if(t.nextExtent){const e=s.getZForResolution(n.nextResolution,r.zDirection),i=gC(t,t.nextExtent);this.enqueueTiles(t,i,e,c,u)}this.enqueueTiles(t,a,l,c,0),u>0&&setTimeout((()=>{this.enqueueTiles(t,a,l-1,c,u-1)}),0);const h={},A=G(this),d=t.time;let f=!1;for(const m of c.representationsByZ[l]){const t=m.tile;if((t instanceof UE||t instanceof kE)&&t.getState()===ww.EMPTY)continue;const e=t.tileCoord;if(m.ready){const n=t.getAlpha(A,d);if(1===n){t.endTransition(A);continue}f=!0;const i=sC(e);h[i]=n}this.renderComplete=!1;const n=this.findAltTiles_(s,e,l+1,c);if(n)continue;const i=s.getMinZoom();for(let r=l-1;r>=i;--r){const t=this.findAltTiles_(s,e,r,c);if(t)break}}const p=c.representationsByZ,g=Object.keys(p).map(Number).sort(m),v=this.beforeTilesMaskRender(t);if(v)for(let m=0,b=g.length;m<b;++m){const t=g[m];for(const e of p[t]){const n=e.tile.tileCoord,i=sC(n);if(i in h)continue;const r=s.getTileCoordExtent(n);this.renderTileMask(e,t,r,AC(t))}}this.beforeTilesRender(t,f);for(let m=0,b=g.length;m<b;++m){const e=g[m];for(const n of p[e]){const i=n.tile.tileCoord,r=sC(i);r in h||this.drawTile_(t,n,e,o,a,h,s)}}for(const m of p[l]){const e=m.tile.tileCoord,n=sC(e);n in h&&this.drawTile_(t,m,l,o,a,h,s)}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const y=this.helper.getCanvas(),w=this.tileRepresentationCache;while(w.canExpireCache()){const t=w.pop();t.dispose()}const _=function(t,e){r.updateCacheSize(.1,e.viewState.projection),r.expireCache(e.viewState.projection,hC)};return t.postRenderFunctions.push(_),this.postRender(e,t),y}findAltTiles_(t,e,n,i){const r=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_);if(!r)return!1;let s=!0;const o=this.tileRepresentationCache,a=this.getLayer().getRenderSource();for(let l=r.minX;l<=r.maxX;++l)for(let t=r.minY;t<=r.maxY;++t){const e=mC(a,[n,l,t]);let r=!1;if(o.containsKey(e)){const t=o.get(e);t.ready&&!fC(i,t.tile)&&(pC(i,t,n),r=!0)}r||(s=!1)}return s}clearCache(){const t=this.tileRepresentationCache;t.forEach((t=>t.dispose())),t.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}}var yC=vC;const wC={...uC,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},_C={TEXTURE_COORD:"a_textureCoord"},bC=[{name:_C.TEXTURE_COORD,size:2,type:Hx.FLOAT}];class xC extends yC{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new Mx(wx,bx),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){super.reset(t),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(t){return new YE(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,n,i,r,s,o,a,l,c,u){const h=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(bC);let A=0;while(A<t.textures.length){const e=`${wC.TILE_TEXTURE_ARRAY}[${A}]`;this.helper.bindTexture(t.textures[A],A,e),++A}for(let _=0;_<this.paletteTextures_.length;++_){const t=this.paletteTextures_[_],e=t.getTexture(h);this.helper.bindTexture(e,A,t.name),++A}const d=n.viewState,f=s[0]+2*c,p=s[1]+2*c,g=t.tile,m=g.tileCoord,v=m[1],y=m[2];this.helper.setUniformMatrixValue(wC.TILE_TRANSFORM,Qx(this.tempMat4,e)),this.helper.setUniformFloatValue(wC.TRANSITION_ALPHA,u),this.helper.setUniformFloatValue(wC.DEPTH,l);let w=i;c>0&&(w=a,qt(w,i,w)),this.helper.setUniformFloatVec4(wC.RENDER_EXTENT,w),this.helper.setUniformFloatValue(wC.RESOLUTION,d.resolution),this.helper.setUniformFloatValue(wC.ZOOM,d.zoom),this.helper.setUniformFloatValue(wC.TEXTURE_PIXEL_WIDTH,f),this.helper.setUniformFloatValue(wC.TEXTURE_PIXEL_HEIGHT,p),this.helper.setUniformFloatValue(wC.TEXTURE_RESOLUTION,r),this.helper.setUniformFloatValue(wC.TEXTURE_ORIGIN_X,o[0]+v*s[0]*r-c*r),this.helper.setUniformFloatValue(wC.TEXTURE_ORIGIN_Y,o[1]-y*s[1]*r+c*r),this.helper.drawElements(0,this.indices_.getSize())}getData(t){const e=this.helper.getGL();if(!e)return null;const n=this.frameState;if(!n)return null;const i=this.getLayer(),r=nt(n.pixelToCoordinateTransform,t.slice()),s=n.viewState,o=i.getExtent();if(o&&!vt(Mn(o,s.projection),r))return null;const a=i.getSources(dt([r]),s.resolution);let l,c,u;for(l=a.length-1;l>=0;--l)if(c=a[l],"ready"===c.getState()){if(u=c.getTileGridForProjection(s.projection),c.getWrapX())break;const t=u.getExtent();if(!t||vt(t,r))break}if(l<0)return null;const h=this.tileRepresentationCache;for(let A=u.getZForResolution(s.resolution);A>=u.getMinZoom();--A){const t=u.getTileCoordForCoordAndZ(r,A),e=mC(c,t);if(!h.containsKey(e))continue;const n=h.get(e),i=n.tile;if((i instanceof UE||i instanceof kE)&&i.getState()===ww.EMPTY)return null;if(!n.loaded)continue;const s=u.getOrigin(A),o=Gl(u.getTileSize(A)),a=u.getResolution(A),l=(r[0]-s[0])/a-t[1]*o[0],d=(s[1]-r[1])/a-t[2]*o[1];return n.getPixelData(l,d)}return null}disposeInternal(){const t=this.helper;if(t){const e=t.getGL();e.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}var EC=xC;function CC(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}function SC(t){const e=t.toString();return e.includes(".")?e:e+".0"}function BC(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(SC).join(", ")})`}function TC(t){const e=tl(t),n=e.length>3?e[3]:1;return BC([e[0]/255*n,e[1]/255*n,e[2]/255*n,n])}const IC={};let FC=0;function LC(t){return t in IC||(IC[t]=FC++),IC[t]}function RC(t){return SC(LC(t))}function MC(t){return"u_var_"+t}function PC(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}}const NC="getBandValue",OC="u_paletteTextures";function kC(t,e,n,i){const r=Rv(t,n,e);if(Bv(r.type,pv))throw new Error("No matching type was found");if(!Sv(e,r.type)){const t=Ev(e),n=Ev(r.type);throw new Error(`Expected expression to be of type ${t}, got ${n}`)}return QC(r,e,i)}function DC(t){return(e,n,i)=>{const r=n.args.length,s=new Array(r);for(let t=0;t<r;++t)s[t]=QC(n.args[t],i,e);return t(s,e)}}const UC={[Mv.Get]:(t,e)=>{const n=e.args[0],i=n.value,r=i in t.properties;r||(t.properties[i]={name:i,type:e.type});const s=t.inFragmentShader?"v_prop_":"a_prop_";return s+i},[Mv.GeometryType]:(t,e,n)=>{const i="geometryType",r=i in t.properties;r||(t.properties[i]={name:i,type:vv,evaluator:t=>Zv(t.getGeometry())});const s=t.inFragmentShader?"v_prop_":"a_prop_";return s+i},[Mv.Var]:(t,e)=>{const n=e.args[0],i=n.value,r=i in t.variables;return r||(t.variables[i]={name:i,type:e.type}),MC(i)},[Mv.Resolution]:()=>"u_resolution",[Mv.Zoom]:()=>"u_zoom",[Mv.Time]:()=>"u_time",[Mv.Any]:DC((t=>`(${t.join(" || ")})`)),[Mv.All]:DC((t=>`(${t.join(" && ")})`)),[Mv.Not]:DC((([t])=>`(!${t})`)),[Mv.Equal]:DC((([t,e])=>`(${t} == ${e})`)),[Mv.NotEqual]:DC((([t,e])=>`(${t} != ${e})`)),[Mv.GreaterThan]:DC((([t,e])=>`(${t} > ${e})`)),[Mv.GreaterThanOrEqualTo]:DC((([t,e])=>`(${t} >= ${e})`)),[Mv.LessThan]:DC((([t,e])=>`(${t} < ${e})`)),[Mv.LessThanOrEqualTo]:DC((([t,e])=>`(${t} <= ${e})`)),[Mv.Multiply]:DC((t=>`(${t.join(" * ")})`)),[Mv.Divide]:DC((([t,e])=>`(${t} / ${e})`)),[Mv.Add]:DC((t=>`(${t.join(" + ")})`)),[Mv.Subtract]:DC((([t,e])=>`(${t} - ${e})`)),[Mv.Clamp]:DC((([t,e,n])=>`clamp(${t}, ${e}, ${n})`)),[Mv.Mod]:DC((([t,e])=>`mod(${t}, ${e})`)),[Mv.Pow]:DC((([t,e])=>`pow(${t}, ${e})`)),[Mv.Abs]:DC((([t])=>`abs(${t})`)),[Mv.Floor]:DC((([t])=>`floor(${t})`)),[Mv.Ceil]:DC((([t])=>`ceil(${t})`)),[Mv.Round]:DC((([t])=>`floor(${t} + 0.5)`)),[Mv.Sin]:DC((([t])=>`sin(${t})`)),[Mv.Cos]:DC((([t])=>`cos(${t})`)),[Mv.Atan]:DC((([t,e])=>void 0!==e?`atan(${t}, ${e})`:`atan(${t})`)),[Mv.Sqrt]:DC((([t])=>`sqrt(${t})`)),[Mv.Match]:DC((t=>{const e=t[0],n=t[t.length-1];let i=null;for(let r=t.length-3;r>=1;r-=2){const s=t[r],o=t[r+1];i=`(${e} == ${s} ? ${o} : ${i||n})`}return i})),[Mv.Between]:DC((([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`)),[Mv.Interpolate]:DC((([t,e,...n])=>{let i="";for(let r=0;r<n.length-2;r+=2){const s=n[r],o=i||n[r+1],a=n[r+2],l=n[r+3];let c;c=t===SC(1)?`(${e} - ${s}) / (${a} - ${s})`:`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${a} - ${s})) - 1.0)`,i=`mix(${o}, ${l}, clamp(${c}, 0.0, 1.0))`}return i})),[Mv.Case]:DC((t=>{const e=t[t.length-1];let n=null;for(let i=t.length-3;i>=0;i-=2){const r=t[i],s=t[i+1];n=`(${r} ? ${s} : ${n||e})`}return n})),[Mv.In]:DC((([t,...e],n)=>{const i=CC("in",n),r=[];for(let s=0;s<e.length;s+=1)r.push(`  if (inputValue == ${e[s]}) { return true; }`);return n.functions[i]=`bool ${i}(float inputValue) {\n${r.join("\n")}\n  return false;\n}`,`${i}(${t})`})),[Mv.Array]:DC((t=>`vec${t.length}(${t.join(", ")})`)),[Mv.Color]:DC((t=>{if(1===t.length)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(2===t.length)return`(${t[1]} * vec4(vec3(${t[0]} / 255.0), 1.0))`;const e=t.slice(0,3).map((t=>`${t} / 255.0`));if(3===t.length)return`vec4(${e.join(", ")}, 1.0)`;const n=t[3];return`(${n} * vec4(${e.join(", ")}, 1.0))`})),[Mv.Band]:DC((([t,e,n],i)=>{if(!(NC in i.functions)){let t="";const e=i.bandCount||1;for(let n=0;n<e;n++){const i=Math.floor(n/4);let r=n%4;n===e-1&&1===r&&(r=3);const s=`${wC.TILE_TEXTURE_ARRAY}[${i}]`;t+=`  if (band == ${n+1}.0) {\n    return texture2D(${s}, v_textureCoord + vec2(dx, dy))[${r}];\n  }\n`}i.functions[NC]=`float getBandValue(float band, float xOffset, float yOffset) {\n  float dx = xOffset / ${wC.TEXTURE_PIXEL_WIDTH};\n  float dy = yOffset / ${wC.TEXTURE_PIXEL_HEIGHT};\n${t}\n}`}return`${NC}(${t}, ${e??"0.0"}, ${n??"0.0"})`})),[Mv.Palette]:(t,e)=>{const[n,...i]=e.args,r=i.length,s=new Uint8Array(4*r);for(let c=0;c<i.length;c++){const t=i[c].value,e=tl(t),n=4*c;s[n]=e[0],s[n+1]=e[1],s[n+2]=e[2],s[n+3]=255*e[3]}t.paletteTextures||(t.paletteTextures=[]);const o=`${OC}[${t.paletteTextures.length}]`,a=new dE(o,s);t.paletteTextures.push(a);const l=QC(n,mv,t);return`texture2D(${o}, vec2((${l} + 0.5) / ${r}.0, 0.5))`}};function QC(t,e,n){if(t instanceof Iv){const i=UC[t.operator];if(void 0===i)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return i(n,t,e)}if((t.type&mv)>0)return SC(t.value);if((t.type&gv)>0)return t.value.toString();if((t.type&vv)>0)return RC(t.value.toString());if((t.type&yv)>0)return TC(t.value);if((t.type&wv)>0)return BC(t.value);throw new Error(`Unexpected expression ${t.value} (expected type ${Ev(e)})`)}function GC(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}const HC="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform float u_rotation;\nuniform vec4 u_renderExtent;\nuniform vec2 u_patternOrigin;\nuniform float u_depth;\nuniform mediump int u_hitDetection;\n\nconst float PI = 3.141592653589793238;\nconst float TWO_PI = 2.0 * PI;\n\n// this used to produce an alpha-premultiplied color from a texture\nvec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {\n  vec4 color = texture2D(sampler, texCoord);\n  return vec4(color.rgb * color.a, color.a);\n}\n",VC=GC();class jC{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${SC(VC["circle-radius"])} + ${SC(.5*VC["circle-stroke-width"])})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=TC(VC["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=SC(VC["stroke-width"]),this.strokeColorExpression_=TC(VC["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=RC("round"),this.strokeJoinExpression_=RC("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=TC(VC["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,e,n){return this.varyings_.push({name:t,type:e,expression:n}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(){return this.hasSymbol_?`${HC}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\nvarying vec4 v_prop_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 pxToScreen(vec2 coordPx) {\n  vec2 scaled = coordPx / u_viewportSizePx / 0.5;\n  return scaled;\n}\n\nvec2 screenToPx(vec2 coordScreen) {\n  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  v_quadSizePx = ${this.symbolSizeExpression_};\n  vec2 halfSizePx = v_quadSizePx * 0.5;\n  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};\n  vec2 offsetPx = centerOffsetPx;\n  if (a_index == 0.0) {\n    offsetPx -= halfSizePx;\n  } else if (a_index == 1.0) {\n    offsetPx += halfSizePx * vec2(1., -1.);\n  } else if (a_index == 2.0) {\n    offsetPx += halfSizePx;\n  } else {\n    offsetPx += halfSizePx * vec2(-1., 1.);\n  }\n  float angle = ${this.symbolRotationExpression_};\n  ${this.symbolRotateWithView_?"angle += u_rotation;":""}\n  float c = cos(-angle);\n  float s = sin(-angle);\n  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);\n  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);\n  vec4 texCoord = ${this.texCoordExpression_};\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  v_prop_hitColor = a_prop_hitColor;\n  v_angle = angle;\n  c = cos(-v_angle);\n  s = sin(-v_angle);\n  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); \n  v_centerPx = screenToPx(center.xy) + centerOffsetPx;\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${HC}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec4 v_prop_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\n\nvoid main(void) {\n  if (${this.discardExpression_}) { discard; }\n  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center\n  float c = cos(v_angle);\n  float s = sin(v_angle);\n  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);\n  gl_FragColor = ${this.symbolColorExpression_};\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.05) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}getStrokeVertexShader(){return this.hasStroke_?`${HC}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_parameters;\nattribute float a_distance;\nattribute vec2 a_joinAngles;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_prop_hitColor;\nvarying float v_distanceOffsetPx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return vec4(screenPos, u_depth, 1.0);\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nvec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {\n  float halfAngle = joinAngle / 2.0;\n  float c = cos(halfAngle);\n  float s = sin(halfAngle);\n  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);\n  float length = 1.0 / s;\n  return angleBisectorNormal * length;\n}\n\nvec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {\n  // if on a cap or the join angle is too high, offset the line along the segment normal\n  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {\n    return point - normal * offsetPx;\n  }\n  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)\n  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;\n}\n\nvoid main(void) {\n  v_angleStart = a_joinAngles.x;\n  v_angleEnd = a_joinAngles.y;\n  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);\n  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)\n  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);\n\n  float lineWidth = ${this.strokeWidthExpression_};\n  float lineOffsetPx = ${this.strokeOffsetExpression_};\n\n  // compute segment start/end in px with offset\n  vec2 segmentStartPx = worldToPx(a_segmentStart);\n  vec2 segmentEndPx = worldToPx(a_segmentEnd);\n  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),\n  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);\n  \n  // compute current vertex position\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 joinDirection;\n  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;\n  // if angle is too high, do not make a proper join\n  if (cos(angle) > ${sE} || isCap(angle)) {\n    joinDirection = normalPx * normalDir - tangentPx * tangentDir;\n  } else {\n    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);\n  }\n  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing\n  gl_Position = pxToScreen(positionPx);\n\n  v_segmentStart = segmentStartPx;\n  v_segmentEnd = segmentEndPx;\n  v_width = lineWidth;\n  v_prop_hitColor = a_prop_hitColor;\n  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${HC}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_prop_hitColor;\nvarying float v_distanceOffsetPx;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\n\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  vec2 tangent = normalize(end - start);\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 startToPoint = point - start;\n  return abs(dot(startToPoint, normal)) - width * 0.5;\n}\n\nfloat buttCapDistanceField(vec2 point, vec2 start, vec2 end) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  return dot(startToPoint, -tangent);\n}\n\nfloat squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return buttCapDistanceField(point, start, end) - width * 0.5;\n}\n\nfloat roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment\n  return length(point - start) - width * 0.5 - onSegment;\n}\n\nfloat roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  float c = cos(joinAngle * 0.5);\n  float s = sin(joinAngle * 0.5);\n  float direction = -sign(sin(joinAngle));\n  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);\n  float radius = width * 0.5 * s;\n  return dot(startToPoint, bisector * direction) - radius;\n}\n\nfloat miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  if (cos(joinAngle) > ${sE}) { // avoid risking a division by zero\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  float miterLength = 1. / sin(joinAngle * 0.5);\n  float miterLimit = ${this.strokeMiterLimitExpression_};\n  if (miterLength > miterLimit) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  return -1000.;\n}\n\nfloat capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {\n   if (capType == ${RC("butt")}) {\n    return buttCapDistanceField(point, start, end);\n  } else if (capType == ${RC("square")}) {\n    return squareCapDistanceField(point, start, end, width);\n  }\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {\n  if (joinType == ${RC("bevel")}) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  } else if (joinType == ${RC("miter")}) {\n    return miterJoinDistanceField(point, start, end, width, joinAngle);\n  }\n  return roundJoinDistanceField(point, start, end, width);\n}\n\nfloat computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {\n  if (isCap(joinAngle)) {\n    return capDistanceField(point, start, end, width, capType);\n  }\n  return joinDistanceField(point, start, end, width, joinAngle, joinType);\n}\n\nvoid main(void) {\n  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n\n  float segmentLength = length(v_segmentEnd - v_segmentStart);\n  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;\n  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);\n  vec2 startToPoint = currentPoint - v_segmentStart;\n  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; \n  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));\n  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;\n  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;\n  float capType = ${this.strokeCapExpression_};\n  float joinType = ${this.strokeJoinExpression_};\n  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);\n  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);\n  float distance = max(\n    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),\n    max(segmentStartDistance, segmentEndDistance)\n  );\n  distance = max(distance, ${this.strokeDistanceFieldExpression_});\n  gl_FragColor = color * smoothstep(0.5, -0.5, distance);\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}getFillVertexShader(){return this.hasFill_?`${HC}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nattribute vec2 a_position;\nattribute vec4 a_prop_hitColor;\n${this.attributes_.map((function(t){return"attribute "+t+";"})).join("\n")}\nvarying vec4 v_prop_hitColor;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);\n  v_prop_hitColor = a_prop_hitColor;\n${this.varyings_.map((function(t){return"  "+t.name+" = "+t.expression+";"})).join("\n")}\n}`:null}getFillFragmentShader(){return this.hasFill_?`${HC}\n${this.uniforms_.map((function(t){return"uniform "+t+";"})).join("\n")}\nvarying vec4 v_prop_hitColor;\n${this.varyings_.map((function(t){return"varying "+t.type+" "+t.name+";"})).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;\n  vec2 pxOrigin = worldToPx(u_patternOrigin);\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(pxPos);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_prop_hitColor;\n  }\n}`:null}}const WC={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},zC=["#00f","#0ff","#0f0","#ff0","#f00"];class KC extends Xy{constructor(t){t=t||{};const e=Object.assign({},t);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,super(e),this.gradient_=null,this.addChangeListener(WC.GRADIENT,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:zC),this.setBlur(void 0!==t.blur?t.blur:15),this.setRadius(void 0!==t.radius?t.radius:8);const n=t.weight?t.weight:"weight";this.weightFunction_="string"===typeof n?function(t){return t.get(n)}:n,this.setRenderOrder(null)}getBlur(){return this.get(WC.BLUR)}getGradient(){return this.get(WC.GRADIENT)}getRadius(){return this.get(WC.RADIUS)}handleGradientChanged_(){this.gradient_=qC(this.getGradient())}setBlur(t){this.set(WC.BLUR,t)}setGradient(t){this.set(WC.GRADIENT,t)}setRadius(t){this.set(WC.RADIUS,t)}createRenderer(){const t=(new jC).addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new hE(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{const e=this.weightFunction_(t);return void 0!==e?Me(e,0,1):1}}],uniforms:{u_size:()=>2*(this.get(WC.RADIUS)+this.get(WC.BLUR)),u_blurSlope:()=>this.get(WC.RADIUS)/Math.max(1,this.get(WC.BLUR))},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}function qC(t){const e=1,n=256,i=pl(e,n),r=i.createLinearGradient(0,0,e,n),s=1/(t.length-1);for(let o=0,a=t.length;o<a;++o)r.addColorStop(o*s,t[o]);return i.fillStyle=r,i.fillRect(0,0,e,n),i.canvas}var $C=KC;class XC extends Av{constructor(t){t=t||{},super(t)}}var YC=XC;class ZC extends _b{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,i=t.viewState,r=i.resolution,s=this.getLayer().getSource(),o=t.viewHints;let a=t.extent;if(void 0!==e.extent&&(a=qt(a,Mn(e.extent,i.projection))),!o[Qm.ANIMATING]&&!o[Qm.INTERACTING]&&!ee(a))if(s){const t=i.projection,e=s.getImage(a,r,n,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===Ma.EMPTY&&(this.image_=null))}else this.image_=null;return!!this.image_}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=nt(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!vt(r,i))return null;const s=this.image_.getExtent(),o=this.image_.getImage(),a=Jt(s),l=Math.floor(o.width*((i[0]-s[0])/a));if(l<0||l>=o.width)return null;const c=zt(s),u=Math.floor(o.height*((s[3]-i[1])/c));return u<0||u>=o.height?null:this.getImageData(o,l,u)}renderFrame(t,e){const n=this.image_,i=n.getExtent(),r=n.getResolution(),[s,o]=Array.isArray(r)?r:[r,r],a=n.getPixelRatio(),l=t.layerStatesArray[t.layerIndex],c=t.pixelRatio,u=t.viewState,h=u.center,A=u.resolution,d=c*s/(A*a),f=c*o/(A*a),p=t.extent,g=u.resolution,m=u.rotation,v=Math.round(Jt(p)/g*c),y=Math.round(zt(p)/g*c);at(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/c,1/c,m,-v/2,-y/2),lt(this.inversePixelTransform,this.pixelTransform);const w=ht(this.pixelTransform);this.useContainer(e,w,this.getBackground(t));const _=this.getRenderContext(t),b=this.context.canvas;b.width!=v||b.height!=y?(b.width=v,b.height=y):this.containerReused||_.clearRect(0,0,v,y);let x=!1,E=!0;if(l.extent){const e=Mn(l.extent,u.projection);E=te(e,t.extent),x=E&&!yt(e,t.extent),x&&this.clipUnrotated(_,t,e)}const C=n.getImage(),S=at(this.tempTransform,v/2,y/2,d,f,0,a*(i[0]-h[0])/s,a*(h[1]-i[3])/o);this.renderedResolution=o*c/a;const B=C.width*S[0],T=C.height*S[3];if(this.getLayer().getSource().getInterpolate()||(_.imageSmoothingEnabled=!1),this.preRender(_,t),E&&B>=.5&&T>=.5){const t=S[4],e=S[5],n=l.opacity;1!==n&&(_.save(),_.globalAlpha=n),_.drawImage(C,0,0,+C.width,+C.height,t,e,B,T),1!==n&&_.restore()}return this.postRender(this.context,t),x&&_.restore(),_.imageSmoothingEnabled=!0,w!==b.style.transform&&(b.style.transform=w),this.container}}var JC=ZC;class tS extends YC{constructor(t){super(t)}createRenderer(){return new JC(this)}getData(t){return super.getData(t)}}var eS=tS,nS={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class iS extends Av{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(nS.PRELOAD)}setPreload(t){this.set(nS.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(nS.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(nS.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}var rS=iS;class sS extends _b{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=bt(),this.tmpTileRange_=new nC(0,0,0,0)}isDrawableTile(t){const e=this.getLayer(),n=t.getState(),i=e.getUseInterimTilesOnError();return n==ww.LOADED||n==ww.EMPTY||n==ww.ERROR&&!i}getTile(t,e,n,i){const r=i.pixelRatio,s=i.viewState.projection,o=this.getLayer(),a=o.getSource();let l=a.getTile(t,e,n,r,s);return l.getState()==ww.ERROR&&o.getUseInterimTilesOnError()&&o.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(l)||(l=l.getInterimTile()),l}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=nt(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!vt(r,i))return null;const s=e.pixelRatio,o=e.viewState.projection,a=e.viewState,l=n.getRenderSource(),c=l.getTileGridForProjection(a.projection),u=l.getTilePixelRatio(e.pixelRatio);for(let h=c.getZForResolution(a.resolution);h>=c.getMinZoom();--h){const t=c.getTileCoordForCoordAndZ(i,h),e=l.getTile(h,t[1],t[2],s,o);if(!(e instanceof HE||e instanceof UE)||e instanceof UE&&e.getState()===ww.EMPTY)return null;if(e.getState()!==ww.LOADED)continue;const n=c.getOrigin(h),r=Gl(c.getTileSize(h)),A=c.getResolution(h),d=Math.floor(u*((i[0]-n[0])/A-t[1]*r[0])),f=Math.floor(u*((n[1]-i[1])/A-t[2]*r[1])),p=Math.round(u*l.getGutterForProjection(a.projection));return this.getImageData(e.getImage(),d+p,f+p)}return null}loadedTileCallback(t,e,n){return!!this.isDrawableTile(n)&&super.loadedTileCallback(t,e,n)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,s=i.resolution,o=i.center,a=i.rotation,l=t.pixelRatio,c=this.getLayer(),u=c.getSource(),h=u.getRevision(),A=u.getTileGridForProjection(r),d=A.getZForResolution(s,u.zDirection),f=A.getResolution(d);let p=t.extent;const m=t.viewState.resolution,v=u.getTilePixelRatio(l),y=Math.round(Jt(p)/m*l),w=Math.round(zt(p)/m*l),_=n.extent&&Mn(n.extent,r);_&&(p=qt(p,Mn(n.extent,r)));const b=f*y/2/v,x=f*w/2/v,E=[o[0]-b,o[1]-x,o[0]+b,o[1]+x],C=A.getTileRangeForExtentAndZ(p,d),S={};S[d]={};const B=this.createLoadedTileFinder(u,r,S),T=this.tmpExtent,I=this.tmpTileRange_;this.newTiles_=!1;const F=a?Wt(i.center,m,a,t.size):void 0;for(let g=C.minX;g<=C.maxX;++g)for(let e=C.minY;e<=C.maxY;++e){if(a&&!A.tileCoordIntersectsViewport([d,g,e],F))continue;const i=this.getTile(d,g,e,t);if(this.isDrawableTile(i)){const e=G(this);if(i.getState()==ww.LOADED){S[d][i.tileCoord.toString()]=i;let t=i.inTransition(e);t&&1!==n.opacity&&(i.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(i)||(this.newTiles_=!0)}if(1===i.getAlpha(e,t.time))continue}const r=A.getTileCoordChildTileRange(i.tileCoord,I,T);let s=!1;r&&(s=B(d+1,r)),s||A.forEachTileCoordParentTileRange(i.tileCoord,B,I,T)}const L=f/s*l/v;at(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/l,1/l,a,-y/2,-w/2);const R=ht(this.pixelTransform);this.useContainer(e,R,this.getBackground(t));const M=this.getRenderContext(t),P=this.context.canvas;lt(this.inversePixelTransform,this.pixelTransform),at(this.tempTransform,y/2,w/2,L,L,0,-y/2,-w/2),P.width!=y||P.height!=w?(P.width=y,P.height=w):this.containerReused||M.clearRect(0,0,y,w),_&&this.clipUnrotated(M,t,_),u.getInterpolate()||(M.imageSmoothingEnabled=!1),this.preRender(M,t),this.renderedTiles.length=0;let N,O,k,D=Object.keys(S).map(Number);D.sort(g),1!==n.opacity||this.containerReused&&!u.getOpaque(t.viewState.projection)?(N=[],O=[]):D=D.reverse();for(let g=D.length-1;g>=0;--g){const e=D[g],n=u.getTilePixelSize(e,l,r),i=A.getResolution(e),s=i/f,o=n[0]*s*L,a=n[1]*s*L,c=A.getTileCoordForCoordAndZ(Yt(E),e),h=A.getTileCoordExtent(c),p=nt(this.tempTransform,[v*(h[0]-E[0])/f,v*(E[3]-h[3])/f]),m=v*u.getGutterForProjection(r),y=S[e];for(const r in y){const n=y[r],i=n.tileCoord,s=c[1]-i[1],l=Math.round(p[0]-(s-1)*o),h=c[2]-i[2],A=Math.round(p[1]-(h-1)*a),f=Math.round(p[0]-s*o),g=Math.round(p[1]-h*a),v=l-f,w=A-g,_=d===e,b=_&&1!==n.getAlpha(G(this),t.time);let x=!1;if(!b)if(N){k=[f,g,f+v,g,f+v,g+w,f,g+w];for(let t=0,n=N.length;t<n;++t)if(d!==e&&e<O[t]){const e=N[t];te([f,g,f+v,g+w],[e[0],e[3],e[4],e[7]])&&(x||(M.save(),x=!0),M.beginPath(),M.moveTo(k[0],k[1]),M.lineTo(k[2],k[3]),M.lineTo(k[4],k[5]),M.lineTo(k[6],k[7]),M.moveTo(e[6],e[7]),M.lineTo(e[4],e[5]),M.lineTo(e[2],e[3]),M.lineTo(e[0],e[1]),M.clip())}N.push(k),O.push(e)}else M.clearRect(f,g,v,w);this.drawTileImage(n,t,f,g,v,w,m,_),N&&!b?(x&&M.restore(),this.renderedTiles.unshift(n)):this.renderedTiles.push(n),this.updateUsedTiles(t.usedTiles,u,n)}}return this.renderedRevision=h,this.renderedResolution=f,this.extentChanged=!this.renderedExtent_||!It(this.renderedExtent_,E),this.renderedExtent_=E,this.renderedPixelRatio=l,this.renderedProjection=r,this.manageTilePyramid(t,u,A,l,r,p,d,c.getPreload()),this.scheduleExpireCache(t,u),this.postRender(this.context,t),n.extent&&M.restore(),M.imageSmoothingEnabled=!0,R!==P.style.transform&&(P.style.transform=R),this.container}drawTileImage(t,e,n,i,r,s,o,a){const l=this.getTileImage(t);if(!l)return;const c=this.getRenderContext(e),u=G(this),h=e.layerStatesArray[e.layerIndex],A=h.opacity*(a?t.getAlpha(u,e.time):1),d=A!==c.globalAlpha;d&&(c.save(),c.globalAlpha=A),c.drawImage(l,o,o,l.width-2*o,l.height-2*o,n,i,r,s),d&&c.restore(),A!==h.opacity?e.animate=!0:a&&t.endTransition(u)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){const n=function(t,e,n){const i=G(t);i in n.usedTiles&&t.expireCache(n.viewState.projection,n.usedTiles[i])}.bind(null,e);t.postRenderFunctions.push(n)}}updateUsedTiles(t,e,n){const i=G(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}manageTilePyramid(t,e,n,i,r,s,o,a,l){const c=G(e);c in t.wantedTiles||(t.wantedTiles[c]={});const u=t.wantedTiles[c],h=t.tileQueue,A=n.getMinZoom(),d=t.viewState.rotation,f=d?Wt(t.viewState.center,t.viewState.resolution,d,t.size):void 0;let p,g,m,v,y,w,_=0;for(w=A;w<=o;++w)for(g=n.getTileRangeForExtentAndZ(s,w,g),m=n.getResolution(w),v=g.minX;v<=g.maxX;++v)for(y=g.minY;y<=g.maxY;++y)d&&!n.tileCoordIntersectsViewport([w,v,y],f)||(o-w<=a?(++_,p=e.getTile(w,v,y,i,r),p.getState()==ww.IDLE&&(u[p.getKey()]=!0,h.isKeyQueued(p.getKey())||h.enqueue([p,c,n.getTileCoordCenter(p.tileCoord),m])),void 0!==l&&l(p)):e.useTile(w,v,y,r));e.updateCacheSize(_,r)}}var oS=sS;class aS extends rS{constructor(t){super(t)}createRenderer(){return new oS(this)}}var lS=aS;const cS={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},uS={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class hS extends oS{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=Y(),this.tileClipContexts_=null}prepareTile(t,e,n){let i;const r=t.getState();return r!==ww.LOADED&&r!==ww.ERROR||(this.updateExecutorGroup_(t,e,n),this.tileImageNeedsRender_(t)&&(i=!0)),i}getTile(t,e,n,i){const r=i.pixelRatio,s=i.viewState,o=s.resolution,a=s.projection,l=this.getLayer(),c=l.getSource().getTile(t,e,n,r,a),u=i.viewHints,h=!(u[Qm.ANIMATING]||u[Qm.INTERACTING]);!h&&c.wantedResolution||(c.wantedResolution=o);const A=this.prepareTile(c,r,a);return A&&(h||Date.now()-i.time<8)&&"vector"!==l.getRenderMode()&&this.renderTileImage_(c,i),super.getTile(t,e,n,i)}isDrawableTile(t){const e=this.getLayer();return super.isDrawableTile(t)&&("vector"===e.getRenderMode()?G(e)in t.executorGroups:t.hasContext(e))}getTileImage(t){return t.getImage(this.getLayer())}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,n){const i=this.getLayer(),r=i.getRevision(),s=i.getRenderOrder()||null,o=t.wantedResolution,a=t.getReplayState(i);if(!a.dirty&&a.renderedResolution===o&&a.renderedRevision==r&&a.renderedRenderOrder==s)return;const l=i.getSource(),c=!!i.getDeclutter(),u=l.getTileGrid(),h=l.getTileGridForProjection(n),A=h.getTileCoordExtent(t.wrappedTileCoord),d=l.getSourceTiles(e,n,t),f=G(i);delete t.hitDetectionImageData[f],t.executorGroups[f]=[],a.dirty=!1;for(let p=0,g=d.length;p<g;++p){const n=d[p];if(n.getState()!=ww.LOADED)continue;const r=n.tileCoord,h=u.getTileCoordExtent(r),g=qt(A,h),m=pt(g,i.getRenderBuffer()*o,this.tmpExtent),v=It(h,g)?null:m,y=new lb(0,g,o,e),w=$b(o,e),_=function(t,e){let n;const r=t.getStyleFunction()||i.getStyleFunction();if(r&&(n=r(t,o)),n){const i=this.renderFeature(t,w,n,y,c,e);a.dirty=a.dirty||i}},b=n.getFeatures();s&&s!==a.renderedRenderOrder&&b.sort(s);for(let t=0,e=b.length;t<e;++t){const e=b[t];v&&!te(v,e.getGeometry().getExtent())||_.call(this,e,t)}const x=y.finish(),E="vector"!==i.getRenderMode()&&c&&1===d.length?null:g,C=new Qb(E,o,e,l.getOverlaps(),x,i.getRenderBuffer(),!!this.frameState?.declutter);t.executorGroups[f].push(C)}a.renderedRevision=r,a.renderedRenderOrder=s,a.renderedResolution=o}forEachFeatureAtCoordinate(t,e,n,i,r){const s=e.viewState.resolution,o=e.viewState.rotation;n=void 0==n?0:n;const a=this.getLayer(),l=a.getSource(),c=l.getTileGridForProjection(e.viewState.projection),u=dt([t]);pt(u,s*n,u);const h={},A=function(t,e,n){let s=t.getId();void 0===s&&(s=G(t));const o=h[s];if(o){if(!0!==o&&n<o.distanceSq){if(0===n)return h[s]=!0,r.splice(r.lastIndexOf(o),1),i(t,a,e);o.geometry=e,o.distanceSq=n}}else{if(0===n)return h[s]=!0,i(t,a,e);r.push(h[s]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}},d=this.renderedTiles;let f;for(let p=0,g=d.length;!f&&p<g;++p){const i=d[p],r=c.getTileCoordExtent(i.wrappedTileCoord);if(!te(r,u))continue;const l=G(a),h=[i.executorGroups[l]],g=a.getDeclutter();h.some((i=>{const r=g?e.declutter[g].all().map((t=>t.value)):null;for(let e=0,a=i.length;e<a;++e){const a=i[e];if(f=a.forEachFeatureAtCoordinate(t,s,o,n,A,r),f)return!0}}))}return f}getFeatures(t){return new Promise(((e,n)=>{const i=this.getLayer(),r=G(i),s=i.getSource(),o=this.renderedProjection,a=o.getExtent(),l=this.renderedResolution,c=s.getTileGridForProjection(o),u=nt(this.renderedPixelToCoordinateTransform_,t.slice()),h=c.getTileCoordForCoordAndResolution(u,l);let A;for(let t=0,v=this.renderedTiles.length;t<v;++t)if(h.toString()===this.renderedTiles[t].tileCoord.toString()){if(A=this.renderedTiles[t],A.getState()===ww.LOADED){const t=c.getTileCoordExtent(A.tileCoord);s.getWrapX()&&o.canWrapX()&&!yt(a,t)&&tn(u,o);break}A=void 0}if(!A||A.loadingSourceTiles>0)return void e([]);const d=c.getTileCoordExtent(A.wrappedTileCoord),f=Yt(d),p=[(u[0]-f[0])/l,(f[1]-u[1])/l],g=A.getSourceTiles().reduce((function(t,e){return t.concat(e.getFeatures())}),[]);let m=A.hitDetectionImageData[r];if(!m){const t=Gl(c.getTileSize(c.getZForResolution(l,s.zDirection))),e=this.renderedRotation_,n=[this.getRenderTransform(c.getTileCoordCenter(A.wrappedTileCoord),l,0,Vb,t[0]*Vb,t[1]*Vb,0)];m=jb(t,n,g,i.getStyleFunction(),c.getTileCoordExtent(A.wrappedTileCoord),A.getReplayState(i).renderedResolution,e),A.hitDetectionImageData[r]=m}e(Wb(p,g,m))}))}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,e){const n=this.context,i=n.globalAlpha;n.globalAlpha=e.opacity;const r=t.viewHints,s=!(r[Qm.ANIMATING]||r[Qm.INTERACTING]),o=this.renderedTiles;for(let a=0,l=o.length;a<l;++a){const e=o[a],n=e.executorGroups[G(this.getLayer())],i=this.getLayer().getDeclutter();if(n)for(let r=n.length-1;r>=0;--r)n[r].execute(this.context,[this.context.canvas.width,this.context.canvas.height],this.getTileRenderTransform(e,t),t.viewState.rotation,s,Nb,i?t.declutter[i]:void 0)}n.globalAlpha=i}renderDeferredInternal(t){const e=this.renderedTiles,n=e.reduce(((t,e,n)=>(e.executorGroups[G(this.getLayer())].forEach((e=>t.push({executorGroup:e,index:n}))),t)),[]),i=n.map((({executorGroup:t})=>t.getDeferredZIndexContexts())),r=i.map((t=>Object.keys(t))).flat().sort(g);r.map(Number).forEach((t=>{i.forEach(((e,i)=>{e[t]&&e[t].forEach((t=>{const{executorGroup:e,index:r}=n[i],s=e.getRenderedContext(),o=s.globalAlpha;s.globalAlpha=this.renderedOpacity_;const a=this.tileClipContexts_[r];a&&a.draw(s),t.draw(s),a&&s.restore(),s.globalAlpha=o,t.clear()}))}))}))}getTileRenderTransform(t,e){const n=e.pixelRatio,i=e.viewState,r=i.center,s=i.resolution,o=i.rotation,a=e.size,l=Math.round(a[0]*n),c=Math.round(a[1]*n),u=this.getLayer().getSource(),h=u.getTileGridForProjection(e.viewState.projection),A=t.tileCoord,d=h.getTileCoordExtent(t.wrappedTileCoord),f=h.getTileCoordExtent(A,this.tmpExtent)[0]-d[0],p=J(rt(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(r,s,o,n,l,c,f));return p}postRender(t,e){const n=e.viewHints,i=!(n[Qm.ANIMATING]||n[Qm.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity;const r=this.getLayer(),s=r.getRenderMode(),o=t.globalAlpha;t.globalAlpha=this.renderedOpacity_;const a=r.getDeclutter(),l=a?uS[s].filter((t=>!Nb.includes(t))):uS[s],c=e.viewState,u=c.rotation,h=r.getSource(),A=h.getTileGridForProjection(c.projection),d=A.getZForResolution(c.resolution,h.zDirection),f=this.renderedTiles,p=[],g=[],m=[];let v=!0;for(let y=f.length-1;y>=0;--y){const n=f[y];v=v&&!n.getReplayState(r).dirty;const s=n.executorGroups[G(r)].filter((t=>t.hasExecutors(l)));if(0===s.length)continue;const o=this.getTileRenderTransform(n,e),c=n.tileCoord[0];let h=!1;const A=s[0].getClipCoords(o);let w,_=t;if(A){a&&(w=new gb,_=w.getContext());for(let t=0,e=p.length;t<e;++t)if(d!==c&&c<g[t]){const e=p[t];te([A[0],A[3],A[4],A[7]],[e[0],e[3],e[4],e[7]])&&(h||(_.save(),h=!0),_.beginPath(),_.moveTo(A[0],A[1]),_.lineTo(A[2],A[3]),_.lineTo(A[4],A[5]),_.lineTo(A[6],A[7]),_.moveTo(e[6],e[7]),_.lineTo(e[4],e[5]),_.lineTo(e[2],e[3]),_.lineTo(e[0],e[1]),_.clip())}p.push(A),g.push(c)}for(let e=0,r=s.length;e<r;++e){const n=s[e];n.execute(t,[t.canvas.width,t.canvas.height],o,u,i,l)}h&&(_===t?_.restore():m[y]=w)}t.globalAlpha=o,this.ready=v,this.tileClipContexts_=m,super.postRender(t,e)}renderFeature(t,e,n,i,r,s){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)o=Zb(i,t,n[a],e,this.boundHandleStyleImageChange_,void 0,r,s)||o;else o=Zb(i,t,n,e,this.boundHandleStyleImageChange_,void 0,r,s);return o}tileImageNeedsRender_(t){const e=this.getLayer();if("vector"===e.getRenderMode())return!1;const n=t.getReplayState(e),i=e.getRevision(),r=t.wantedResolution;return n.renderedTileResolution!==r||n.renderedTileRevision!==i}renderTileImage_(t,e){const n=this.getLayer(),i=t.getReplayState(n),r=n.getRevision(),s=t.executorGroups[G(n)];i.renderedTileRevision=r;const o=t.wrappedTileCoord,a=o[0],l=n.getSource();let c=e.pixelRatio;const u=e.viewState,h=u.projection,A=l.getTileGridForProjection(h),d=A.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*d,p=A.getResolution(a),g=t.getContext(n);c=Math.round(Math.max(c,f/c));const m=l.getTilePixelSize(a,c,h);g.canvas.width=m[0],g.canvas.height=m[1];const v=c/f;if(1!==v){const t=Z(this.tmpTransform_);rt(t,v,v),g.setTransform.apply(g,t)}const y=A.getTileCoordExtent(o,this.tmpExtent),w=f/p,_=Z(this.tmpTransform_);rt(_,w,-w),ot(_,-y[0],-y[3]);for(let b=0,x=s.length;b<x;++b){const t=s[b];t.execute(g,[g.canvas.width*v,g.canvas.height*v],_,0,!0,cS[n.getRenderMode()],null)}i.renderedTileResolution=t.wantedResolution}}var AS=hS;class dS extends Xy{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un;const n=t.renderMode||"hybrid";z("hybrid"==n||"vector"==n,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=n,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new AS(this)}getFeatures(t){return super.getFeatures(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(nS.PRELOAD)}getUseInterimTilesOnError(){return this.get(nS.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(nS.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(nS.USE_INTERIM_TILES_ON_ERROR,t)}}var fS=dS;class pS extends Fl{constructor(t,e,n,i,r){const s=void 0!==r?Ma.IDLE:Ma.LOADED;super(t,e,n,s),this.loader_=void 0!==r?r:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=Ma.ERROR):this.state=Ma.LOADED,this.changed()}load(){this.state==Ma.IDLE&&(this.state=Ma.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}var gS=pS;function mS(t){return Array.isArray(t)?Math.min(...t):t}class vS extends JC{constructor(t){super(t),this.vectorRenderer_=new cx(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=Y(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const e=nt(this.coordinateToVectorPixelTransform_,nt(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const e=t.pixelRatio,n=t.viewState,i=n.resolution,r=t.viewHints,s=this.vectorRenderer_;let o=t.extent;1!==this.layerImageRatio_&&(o=o.slice(0),ie(o,this.layerImageRatio_));const a=Jt(o)/i,l=zt(o)/i;if(!r[Qm.ANIMATING]&&!r[Qm.INTERACTING]&&!ee(o)){s.useContainer(null,null);const r=s.context,c=t.layerStatesArray[t.layerIndex],u=Object.assign({},c,{opacity:1}),h=Object.assign({},t,{extent:o,size:[a,l],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[u],layerIndex:0,declutter:null}),A=this.getLayer().getDeclutter();A&&(h.declutter={[A]:new dv(9)});let d=!0;const f=new gS(o,i,e,r.canvas,(function(t){s.prepareFrame(h)&&s.replayGroupChanged&&(s.clipping=!1,s.renderFrame(h,null)&&(s.renderDeclutter(h),s.renderDeferred(h),d=!1),t())}));f.addEventListener(R.CHANGE,(()=>{if(f.getState()!==Ma.LOADED)return;this.image_=d?null:f;const t=f.getPixelRatio(),i=mS(f.getResolution())*e/t;this.renderedResolution=i,this.coordinateToVectorPixelTransform_=at(this.coordinateToVectorPixelTransform_,a/2,l/2,1/i,-1/i,0,-n.center[0],-n.center[1])})),f.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,n,i,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,n,i,r):super.forEachFeatureAtCoordinate(t,e,n,i,r)}}var yS=vS;class wS extends Xy{constructor(t){t=t||{};const e=Object.assign({},t);delete e.imageRatio,super(e),this.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new yS(this)}}var _S=wS;class bS{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(t,e){for(let n=0;n<t.length;n++)this.addFeature(t[n],e)}addFeature(t,e){let n=t.getGeometry();n&&(e&&(n=n.clone(),n.applyTransform(e)),this.addGeometry_(n,t))}clearFeatureEntryInPointBatch_(t){const e=this.pointBatch.entries[G(t)];if(e)return this.pointBatch.geometriesCount-=e.flatCoordss.length,delete this.pointBatch.entries[G(t)],e}clearFeatureEntryInLineStringBatch_(t){const e=this.lineStringBatch.entries[G(t)];if(e)return this.lineStringBatch.verticesCount-=e.verticesCount,this.lineStringBatch.geometriesCount-=e.flatCoordss.length,delete this.lineStringBatch.entries[G(t)],e}clearFeatureEntryInPolygonBatch_(t){const e=this.polygonBatch.entries[G(t)];if(e)return this.polygonBatch.verticesCount-=e.verticesCount,this.polygonBatch.ringsCount-=e.ringsCount,this.polygonBatch.geometriesCount-=e.flatCoordss.length,delete this.polygonBatch.entries[G(t)],e}addGeometry_(t,e){const n=t.getType();switch(n){case"GeometryCollection":{const n=t.getGeometriesArray();for(const t of n)this.addGeometry_(t,e);break}case"MultiPolygon":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),i.getEndss(),e,G(e),i.getStride());break}case"MultiLineString":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),i.getEnds(),e,G(e),i.getStride());break}case"MultiPoint":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),null,e,G(e),i.getStride());break}case"Polygon":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),i.getEnds(),e,G(e),i.getStride());break}case"Point":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),null,e,G(e),i.getStride());break}case"LineString":case"LinearRing":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),null,e,G(e),i.getStride());break}default:}}addCoordinates_(t,e,n,i,r,s){let o;switch(t){case"MultiPolygon":{const t=n;for(let n=0,o=t.length;n<o;n++){let o=t[n];const a=n>0?t[n-1]:null,l=a?a[a.length-1]:0,c=o[o.length-1];o=l>0?o.map((t=>t-l)):o,this.addCoordinates_("Polygon",e.slice(l,c),o,i,r,s)}break}case"MultiLineString":{const t=n;for(let n=0,o=t.length;n<o;n++){const o=n>0?t[n-1]:0;this.addCoordinates_("LineString",e.slice(o,t[n]),null,i,r,s)}break}case"MultiPoint":for(let t=0,n=e.length;t<n;t+=s)this.addCoordinates_("Point",e.slice(t,t+2),null,i,r,null);break;case"Polygon":{const t=n;if(i instanceof fr){const n=nr(e,t);if(n.length>1)return void this.addCoordinates_("MultiPolygon",e,n,i,r,s)}this.polygonBatch.entries[r]||(this.polygonBatch.entries[r]=this.addRefToEntry_(r,{feature:i,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),o=e.length/s;const a=n.length,l=n.map(((t,e,n)=>e>0?(t-n[e-1])/s:t/s));this.polygonBatch.verticesCount+=o,this.polygonBatch.ringsCount+=a,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[r].flatCoordss.push(xS(e,s)),this.polygonBatch.entries[r].ringsVerticesCounts.push(l),this.polygonBatch.entries[r].verticesCount+=o,this.polygonBatch.entries[r].ringsCount+=a;for(let n=0,o=t.length;n<o;n++){const o=n>0?t[n-1]:0;this.addCoordinates_("LinearRing",e.slice(o,t[n]),null,i,r,s)}break}case"Point":this.pointBatch.entries[r]||(this.pointBatch.entries[r]=this.addRefToEntry_(r,{feature:i,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[r].flatCoordss.push(e);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[r]||(this.lineStringBatch.entries[r]=this.addRefToEntry_(r,{feature:i,flatCoordss:[],verticesCount:0})),o=e.length/s,this.lineStringBatch.verticesCount+=o,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[r].flatCoordss.push(xS(e,s)),this.lineStringBatch.entries[r].verticesCount+=o;break;default:}}addRefToEntry_(t,e){const n=this.uidToRef_.get(t),i=n||this.freeGlobalRef_.pop()||++this.globalCounter_;return e.ref=i,n||(this.refToFeature_.set(i,e.feature),this.uidToRef_.set(t,i)),e}returnRef_(t,e){if(!t)throw new Error("This feature has no ref: "+e);this.refToFeature_.delete(t),this.uidToRef_.delete(e),this.freeGlobalRef_.push(t)}changeFeature(t){this.removeFeature(t);const e=t.getGeometry();e&&this.addGeometry_(e,t)}removeFeature(t){let e;e=this.clearFeatureEntryInPointBatch_(t)||e,e=this.clearFeatureEntryInPolygonBatch_(t)||e,e=this.clearFeatureEntryInLineStringBatch_(t)||e,e&&this.returnRef_(e.ref,G(e.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(t){return this.refToFeature_.get(t)}}function xS(t,e){return 2===e?t:t.filter(((t,n)=>n%e<2))}var ES=bS;function CS(t,e,n,i){let r=0;for(const s in e){const o=e[s],a=o.callback.call(n,n.feature);t[i+r++]=a[0]??a,o.size&&1!==o.size&&(t[i+r++]=a[1],o.size<3||(t[i+r++]=a[2],o.size<4||(t[i+r++]=a[3])))}return r}function SS(t){return Object.keys(t).reduce(((e,n)=>e+(t[n].size||1)),0)}function BS(t,e,n,i){const r=(2+SS(n))*t.geometriesCount;e&&e.length===r||(e=new Float32Array(r));const s=[];let o=0;for(const a in t.entries){const r=t.entries[a];for(let t=0,a=r.flatCoordss.length;t<a;t++)s[0]=r.flatCoordss[t][0],s[1]=r.flatCoordss[t][1],nt(i,s),e[o++]=s[0],e[o++]=s[1],o+=CS(e,n,r,o)}return e}function TS(t,e,n,i){const r=2*t.verticesCount+(1+SS(n))*t.geometriesCount;e&&e.length===r||(e=new Float32Array(r));const s=[];let o=0;for(const a in t.entries){const r=t.entries[a];for(let t=0,a=r.flatCoordss.length;t<a;t++){s.length=r.flatCoordss[t].length,Dn(r.flatCoordss[t],0,s.length,2,i,s),o+=CS(e,n,r,o),e[o++]=s.length/2;for(let t=0,n=s.length;t<n;t+=2)e[o++]=s[t],e[o++]=s[t+1]}}return e}function IS(t,e,n,i){const r=2*t.verticesCount+(1+SS(n))*t.geometriesCount+t.ringsCount;e&&e.length===r||(e=new Float32Array(r));const s=[];let o=0;for(const a in t.entries){const r=t.entries[a];for(let t=0,a=r.flatCoordss.length;t<a;t++){s.length=r.flatCoordss[t].length,Dn(r.flatCoordss[t],0,s.length,2,i,s),o+=CS(e,n,r,o),e[o++]=r.ringsVerticesCounts[t].length;for(let n=0,i=r.ringsVerticesCounts[t].length;n<i;n++)e[o++]=r.ringsVerticesCounts[t][n];for(let t=0,n=s.length;t<n;t+=2)e[o++]=s[t],e[o++]=s[t+1]}}return e}function FS(t,e,n){const i=Fv();return i.style=t.style,kC(e,n,i,t)}function LS(t){const e=tl(t),n=256*e[0],i=e[1],r=256*e[2],s=Math.round(255*e[3]);return[n+i,r+s]}const RS="vec4 unpackColor(vec2 packedColor) {\n  return fract(packedColor[1] / 256.0) * vec4(\n    fract(floor(packedColor[0] / 256.0) / 256.0),\n    fract(packedColor[0] / 256.0),\n    fract(floor(packedColor[1] / 256.0) / 256.0),\n    1.0\n  );\n}";function MS(t){return t===yv?2:t===wv?4:1}function PS(t){const e=MS(t);return e>1?`vec${e}`:"float"}function NS(t){const e=JSON.stringify(t).split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)),0);return(e>>>0).toString()}function OS(t,e,n,i){if(`${i}radius`in t&&"icon-"!==i){let r=FS(n,t[`${i}radius`],mv);if(`${i}radius2`in t){const e=FS(n,t[`${i}radius2`],mv);r=`max(${r}, ${e})`}`${i}stroke-width`in t&&(r=`(${r} + ${FS(n,t[`${i}stroke-width`],mv)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${r} * 2. + 0.5)`)}if(`${i}scale`in t){const r=FS(n,t[`${i}scale`],mv|wv);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${r}`)}`${i}displacement`in t&&e.setSymbolOffsetExpression(FS(n,t[`${i}displacement`],wv)),`${i}rotation`in t&&e.setSymbolRotationExpression(FS(n,t[`${i}rotation`],mv)),`${i}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${i}rotate-with-view`])}function kS(t,e,n,i,r){let s="vec4(0.)";if(null!==e&&(s=e),null!==n&&null!==i){const e=`smoothstep(-${i} + 0.63, -${i} - 0.58, ${t})`;s=`mix(${n}, ${s}, ${e})`}const o=`(1.0 - smoothstep(-0.63, 0.58, ${t}))`;let a=`${s} * ${o}`;return null!==r&&(a=`${a} * ${r}`),a}function DS(t,e,n,i,r){const s=new Image;let o;return s.crossOrigin=void 0===t[`${i}cross-origin`]?"anonymous":t[`${i}cross-origin`],s.src=t[`${i}src`],s.complete&&s.width&&s.height?o=BC([s.width,s.height]):(n[`u_texture${r}_size`]=()=>s.complete?[s.width,s.height]:[0,0],e.addUniform(`vec2 u_texture${r}_size`),o=`u_texture${r}_size`),n[`u_texture${r}`]=s,e.addUniform(`sampler2D u_texture${r}`),o}function US(t,e,n,i,r){let s=FS(n,t[`${e}offset`],wv);if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":s=`vec2(${i}.x, 0.) + ${r} * vec2(-1., 0.) + ${s} * vec2(-1., 1.)`;break;case"bottom-left":s=`vec2(0., ${i}.y) + ${r} * vec2(0., -1.) + ${s} * vec2(1., -1.)`;break;case"bottom-right":s=`${i} - ${r} - ${s}`;break;default:}return s}function QS(t,e,n,i,r){r.functions["circleDistanceField"]="float circleDistanceField(vec2 point, float radius) {\n  return length(point) - radius;\n}",OS(t,e,i,"circle-");let s=null;"circle-opacity"in t&&(s=FS(r,t["circle-opacity"],mv));let o="coordsPx";if("circle-scale"in t){const e=FS(r,t["circle-scale"],mv|wv);o=`coordsPx / ${e}`}let a=null;"circle-fill-color"in t&&(a=FS(r,t["circle-fill-color"],yv));let l=null;"circle-stroke-color"in t&&(l=FS(r,t["circle-stroke-color"],yv));let c=FS(r,t["circle-radius"],mv),u=null;"circle-stroke-width"in t&&(u=FS(r,t["circle-stroke-width"],mv),c=`(${c} + ${u} * 0.5)`);const h=`circleDistanceField(${o}, ${c})`,A=kS(h,a,l,u,s);e.setSymbolColorExpression(A)}function GS(t,e,n,i,r){r.functions["round"]="float round(float v) {\n  return sign(v) * floor(abs(v) + 0.5);\n}",r.functions["starDistanceField"]="float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round(beta / alpha) * alpha; // angle in sector\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  vec2 tipToPoint = inSector + vec2(-radius, 0.);\n  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);\n  return dot(normalize(edgeNormal), tipToPoint);\n}",r.functions["regularDistanceField"]="float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float radiusIn = radius * cos(PI / numPoints);\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  return inSector.x - radiusIn;\n}",OS(t,e,i,"shape-");let s=null;"shape-opacity"in t&&(s=FS(r,t["shape-opacity"],mv));let o="coordsPx";if("shape-scale"in t){const e=FS(r,t["shape-scale"],mv|wv);o=`coordsPx / ${e}`}let a=null;"shape-fill-color"in t&&(a=FS(r,t["shape-fill-color"],yv));let l=null;"shape-stroke-color"in t&&(l=FS(r,t["shape-stroke-color"],yv));let c=null;"shape-stroke-width"in t&&(c=FS(r,t["shape-stroke-width"],mv));const u=FS(r,t["shape-points"],mv);let h,A="0.";"shape-angle"in t&&(A=FS(r,t["shape-angle"],mv));let d=FS(r,t["shape-radius"],mv);if(null!==c&&(d=`${d} + ${c} * 0.5`),"shape-radius2"in t){let e=FS(r,t["shape-radius2"],mv);null!==c&&(e=`${e} + ${c} * 0.5`),h=`starDistanceField(${o}, ${u}, ${d}, ${e}, ${A})`}else h=`regularDistanceField(${o}, ${u}, ${d}, ${A})`;const f=kS(h,a,l,c,s);e.setSymbolColorExpression(f)}function HS(t,e,n,i,r){let s="vec4(1.0)";"icon-color"in t&&(s=FS(r,t["icon-color"],yv)),"icon-opacity"in t&&(s=`${s} * ${FS(r,t["icon-opacity"],mv)}`);const o=NS(t["icon-src"]),a=DS(t,e,n,"icon-",o);if(e.setSymbolColorExpression(`${s} * samplePremultiplied(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(a),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${FS(i,t["icon-width"],mv)}, ${FS(i,t["icon-height"],mv)})`),"icon-offset"in t&&"icon-size"in t){const n=FS(i,t["icon-size"],wv),r=e.getSymbolSizeExpression();e.setSymbolSizeExpression(n);const s=US(t,"icon-",i,"v_quadSizePx",n);e.setTextureCoordinateExpression(`(vec4((${s}).xyxy) + vec4(0., 0., ${n})) / (${r}).xyxy`)}if(OS(t,e,i,"icon-"),"icon-anchor"in t){const n=FS(i,t["icon-anchor"],wv);let r,s="1.0";"icon-scale"in t&&(s=FS(i,t["icon-scale"],mv|wv)),r="pixels"===t["icon-anchor-x-units"]&&"pixels"===t["icon-anchor-y-units"]?`${n} * ${s}`:"pixels"===t["icon-anchor-x-units"]?`${n} * vec2(vec2(${s}).x, v_quadSizePx.y)`:"pixels"===t["icon-anchor-y-units"]?`${n} * vec2(v_quadSizePx.x, vec2(${s}).x)`:`${n} * v_quadSizePx`;let o=`v_quadSizePx * vec2(0.5, -0.5) + ${r} * vec2(-1., 1.)`;if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":o=`v_quadSizePx * -0.5 + ${r}`;break;case"bottom-left":o=`v_quadSizePx * 0.5 - ${r}`;break;case"bottom-right":o=`v_quadSizePx * vec2(-0.5, 0.5) + ${r} * vec2(1., -1.)`;break;default:}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${o}`)}}function VS(t,e,n,i,r){if("stroke-color"in t&&e.setStrokeColorExpression(FS(r,t["stroke-color"],yv)),"stroke-pattern-src"in t){const i=NS(t["stroke-pattern-src"]),s=DS(t,e,n,"stroke-pattern-",i);let o=s,a="vec2(0.)";"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(o=FS(r,t["stroke-pattern-size"],wv),a=US(t,"stroke-pattern-",r,s,o));let l="0.";"stroke-pattern-spacing"in t&&(l=FS(r,t["stroke-pattern-spacing"],mv)),r.functions["sampleStrokePattern"]="vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {\n  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;\n  float spacingScaled = spacingPx * sampleSize.y / lineWidth;\n  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));\n  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);\n  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;\n  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;\n  return samplePremultiplied(texture, texCoord);\n}";const c=`u_texture${i}`;let u="1.";"stroke-color"in t&&(u=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${u} * sampleStrokePattern(${c}, ${s}, ${a}, ${o}, ${l}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression(FS(i,t["stroke-width"],mv)),"stroke-offset"in t&&e.setStrokeOffsetExpression(FS(i,t["stroke-offset"],mv)),"stroke-line-cap"in t&&e.setStrokeCapExpression(FS(i,t["stroke-line-cap"],vv)),"stroke-line-join"in t&&e.setStrokeJoinExpression(FS(i,t["stroke-line-join"],vv)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression(FS(i,t["stroke-miter-limit"],mv)),"stroke-line-dash"in t){r.functions["getSingleDashDistance"]=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType) {\n  float localDistance = mod(distance, dashLengthTotal);\n  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;\n  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);\n  if (capType == ${RC("square")}) {\n    distanceSegment -= v_width * 0.5;\n  } else if (capType == ${RC("round")}) {\n    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - v_width * 0.5);\n  }\n  return distanceSegment;\n}`;let n=t["stroke-line-dash"].map((t=>FS(r,t,mv)));n.length%2===1&&(n=[...n,...n]);let s="0.";"stroke-line-dash-offset"in t&&(s=FS(i,t["stroke-line-dash-offset"],mv));const o=NS(t["stroke-line-dash"]),a=`dashDistanceField_${o}`,l=n.map(((t,e)=>`float dashLength${e} = ${t};`)),c=n.map(((t,e)=>`dashLength${e}`)).join(" + ");let u="0.",h=`getSingleDashDistance(distance, radius, ${u}, dashLength0, totalDashLength, capType)`;for(let t=2;t<n.length;t+=2)u=`${u} + dashLength${t-2} + dashLength${t-1}`,h=`min(${h}, getSingleDashDistance(distance, radius, ${u}, dashLength${t}, totalDashLength, capType))`;r.functions[a]=`float ${a}(float distance, float radius, float capType) {\n  ${l.join("\n  ")}\n  float totalDashLength = ${c};\n  return ${h};\n}`,e.setStrokeDistanceFieldExpression(`${a}(currentLengthPx + ${s}, currentRadiusPx, capType)`)}}function jS(t,e,n,i,r){if("fill-color"in t&&e.setFillColorExpression(FS(r,t["fill-color"],yv)),"fill-pattern-src"in t){const i=NS(t["fill-pattern-src"]),s=DS(t,e,n,"fill-pattern-",i);let o=s,a="vec2(0.)";"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(o=FS(r,t["fill-pattern-size"],wv),a=US(t,"fill-pattern-",r,s,o)),r.functions["sampleFillPattern"]="vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {\n  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);\n  vec2 pxRelativePos = pxPosition - pxOrigin;\n  // rotate the relative position from origin by the current view rotation\n  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));\n  // sample position is computed according to the sample offset & size\n  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);\n  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));\n  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright\n  return samplePremultiplied(texture, (samplePos + textureOffset) / textureSize);\n}";const l=`u_texture${i}`;let c="1.";"fill-color"in t&&(c=e.getFillColorExpression()),e.setFillColorExpression(`${c} * sampleFillPattern(${l}, ${s}, ${a}, ${o}, pxOrigin, pxPos)`)}}function WS(t){const e={inFragmentShader:!1,properties:{},variables:{},functions:{},style:t},n={inFragmentShader:!0,variables:e.variables,properties:{},functions:{},style:t},i=new jC,r={};if("icon-src"in t?HS(t,i,r,e,n):"shape-points"in t?GS(t,i,r,e,n):"circle-radius"in t&&QS(t,i,r,e,n),VS(t,i,r,e,n),jS(t,i,r,e,n),t.filter){const e=FS(n,t.filter,gv);i.setFragmentDiscardExpression(`!${e}`)}Object.keys(n.variables).forEach((function(e){const s=n.variables[e],o=MC(s.name);let a;i.addUniform(`${PS(s.type)} ${o}`),a=s.type===vv?()=>LC(t.variables[s.name]):s.type===yv?()=>LS([...tl(t.variables[s.name]||"#eee")]):s.type===gv?()=>t.variables[s.name]?1:0:()=>t.variables[s.name],r[o]=a})),Object.keys(n.properties).forEach((function(t){const r=n.properties[t];e.properties[t]||(e.properties[t]=r);let s=PS(r.type),o=`a_prop_${r.name}`;r.type===yv&&(s="vec4",o=`unpackColor(${o})`,i.addVertexShaderFunction(RS)),i.addVarying(`v_prop_${r.name}`,s,o)})),Object.keys(e.properties).forEach((function(t){const n=e.properties[t];i.addAttribute(`${PS(n.type)} a_prop_${n.name}`)}));const s=Object.keys(e.properties).map((function(t){const n=e.properties[t];let i;return i=n.evaluator?n.evaluator:n.type===vv?t=>LC(t.get(n.name)):n.type===yv?t=>LS([...tl(t.get(n.name)||"#eee")]):n.type===gv?t=>t.get(n.name)?1:0:t=>t.get(n.name),{name:n.name,size:MS(n.type),callback:i}}));for(const o in e.functions)i.addVertexShaderFunction(e.functions[o]);for(const o in n.functions)i.addFragmentShaderFunction(n.functions[o]);return{builder:i,attributes:s.reduce(((t,e)=>({...t,[e.name]:{callback:e.callback,size:e.size}})),{}),uniforms:r}}const zS=[],KS=lE();let qS=0;const $S={POSITION:"a_position",INDEX:"a_index",SEGMENT_START:"a_segmentStart",SEGMENT_END:"a_segmentEnd",PARAMETERS:"a_parameters",JOIN_ANGLES:"a_joinAngles",DISTANCE:"a_distance"};class XS{constructor(t,e,n){this.helper_=e,this.hitDetectionEnabled_=n;let i=t;const r="builder"in t;if(!r){const e=WS(t);i={builder:e.builder,attributes:e.attributes,uniforms:e.uniforms}}this.hasFill_=!!i.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=i.builder.getFillVertexShader(),this.fillFragmentShader_=i.builder.getFillFragmentShader(),this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_=!!i.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=i.builder.getStrokeVertexShader(),this.strokeFragmentShader_=i.builder.getStrokeFragmentShader(),this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_=!!i.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=i.builder.getSymbolVertexShader(),this.symbolFragmentShader_=i.builder.getSymbolFragmentShader(),this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_));const s=this.hitDetectionEnabled_?{hitColor:{callback(){return oE(this.ref,zS)},size:4}}:{};this.customAttributes_=Object.assign({},s,i.attributes),this.uniforms_=i.uniforms;const o=Object.entries(this.customAttributes_).map((([t,e])=>({name:`a_prop_${t}`,size:e.size||1,type:Hx.FLOAT})));this.polygonAttributesDesc_=[{name:$S.POSITION,size:2,type:Hx.FLOAT},...o],this.lineStringAttributesDesc_=[{name:$S.SEGMENT_START,size:2,type:Hx.FLOAT},{name:$S.SEGMENT_END,size:2,type:Hx.FLOAT},{name:$S.JOIN_ANGLES,size:2,type:Hx.FLOAT},{name:$S.DISTANCE,size:1,type:Hx.FLOAT},{name:$S.PARAMETERS,size:1,type:Hx.FLOAT},...o],this.pointAttributesDesc_=[{name:$S.POSITION,size:2,type:Hx.FLOAT},{name:$S.INDEX,size:1,type:Hx.FLOAT},...o],i.uniforms&&this.helper_.addUniforms(i.uniforms)}async generateBuffers(t,e){const n=this.generateRenderInstructions_(t,e),[i,r,s]=await Promise.all([this.generateBuffersForType_(n.polygonInstructions,"Polygon",e),this.generateBuffersForType_(n.lineStringInstructions,"LineString",e),this.generateBuffersForType_(n.pointInstructions,"Point",e)]),o=lt(Y(),e);return{polygonBuffers:i,lineStringBuffers:r,pointBuffers:s,invertVerticesTransform:o}}generateRenderInstructions_(t,e){const n=this.hasFill_?IS(t.polygonBatch,new Float32Array(0),this.customAttributes_,e):null,i=this.hasStroke_?TS(t.lineStringBatch,new Float32Array(0),this.customAttributes_,e):null,r=this.hasSymbol_?BS(t.pointBatch,new Float32Array(0),this.customAttributes_,e):null;return{polygonInstructions:n,lineStringInstructions:i,pointInstructions:r}}generateBuffersForType_(t,e,n){if(null===t)return null;const i=qS++;let r;switch(e){case"Polygon":r=rE.GENERATE_POLYGON_BUFFERS;break;case"LineString":r=rE.GENERATE_LINE_STRING_BUFFERS;break;case"Point":r=rE.GENERATE_POINT_BUFFERS;break;default:}const s={id:i,type:r,renderInstructions:t.buffer,renderInstructionsTransform:n,customAttributesSize:SS(this.customAttributes_)};return KS.postMessage(s,[t.buffer]),t=null,new Promise((t=>{const e=n=>{const r=n.data;if(r.id!==i)return;if(KS.removeEventListener("message",e),!this.helper_.getGL())return;const s=new Mx(yx,xx).fromArrayBuffer(r.vertexBuffer),o=new Mx(wx,xx).fromArrayBuffer(r.indexBuffer);this.helper_.flushBufferData(s),this.helper_.flushBufferData(o),t([o,s])};KS.addEventListener("message",e)}))}render(t,e,n){this.hasFill_&&this.renderInternal_(t.polygonBuffers[0],t.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,e,n),this.hasStroke_&&this.renderInternal_(t.lineStringBuffers[0],t.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,e,n),this.hasSymbol_&&this.renderInternal_(t.pointBuffers[0],t.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,e,n)}renderInternal_(t,e,n,i,r,s){const o=t.getSize();0!==o&&(this.helper_.useProgram(n,r),this.helper_.bindBuffer(e),this.helper_.bindBuffer(t),this.helper_.enableAttributes(i),s(),this.helper_.drawElements(0,o))}}var YS=XS;const ZS={...Gx,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class JS extends tE{constructor(t,e){const n={[ZS.RENDER_EXTENT]:[0,0,0,0],[ZS.PATTERN_ORIGIN]:[0,0],[ZS.GLOBAL_ALPHA]:1};super(t,{uniforms:n,postProcesses:e.postProcesses}),this.hitDetectionEnabled_=!e.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=bt(),this.currentTransform_=Y(),this.tmpCoords_=[0,0],this.tmpTransform_=Y(),this.tmpMat4_=Ux(),this.currentFrameStateTransform_=Y(),this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(e),this.batch_=new ES,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(t){const e=this.getLayer().getSource(),n=In();let i;n&&(i=En(n,t.viewState.projection)),this.batch_.addFeatures(e.getFeatures(),i),this.sourceListenKeys_=[M(e,F_.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,i),this),M(e,F_.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),M(e,F_.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),M(e,F_.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(t){this.styles_=Array.isArray(t.style)?t.style:[t.style]}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map((t=>new YS(t,this.helper,this.hitDetectionEnabled_)))}reset(t){this.applyOptions_(t),this.helper&&this.createRenderers_(),super.reset(t)}afterHelperCreated(){this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new iE(this.helper))}handleSourceFeatureAdded_(t,e){const n=e.feature;this.batch_.addFeature(n,t)}handleSourceFeatureChanged_(t){const e=t.feature;this.batch_.changeFeature(e)}handleSourceFeatureDelete_(t){const e=t.feature;this.batch_.removeFeature(e)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(t){et(this.tmpTransform_,this.currentFrameStateTransform_),J(this.tmpTransform_,t),this.helper.setUniformMatrixValue(ZS.PROJECTION_MATRIX,Qx(this.tmpMat4_,this.tmpTransform_)),lt(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(ZS.SCREEN_TO_WORLD_MATRIX,Qx(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,lt(this.tmpTransform_,t),nt(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(ZS.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(t){const e=this.helper.getGL();this.preRender(e,t);const[n,i,r]=cE(t,this.getLayer());this.helper.prepareDraw(t),this.renderWorlds(t,!1,n,i,r),this.helper.finalizeDraw(t);const s=this.helper.getCanvas(),o=t.layerStatesArray[t.layerIndex],a=o.opacity;return a!==parseFloat(s.style.opacity)&&(s.style.opacity=String(a)),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,n,i,r),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),s}prepareFrameInternal(t){this.initialFeaturesAdded_||(this.addInitialFeatures_(t),this.initialFeaturesAdded_=!0);const e=this.getLayer(),n=e.getSource(),i=t.viewState,r=!t.viewHints[Qm.ANIMATING]&&!t.viewHints[Qm.INTERACTING],s=!It(this.previousExtent_,t.extent),o=this.sourceRevision_<n.getRevision();if(o&&(this.sourceRevision_=n.getRevision()),r&&(s||o)){const r=i.projection,s=i.resolution,o=e instanceof Xy?e.getRenderBuffer():0,a=pt(t.extent,o*s),l=In();l?n.loadFeatures(Rn(a,l),Pn(s,r),l):n.loadFeatures(a,s,r),this.ready=!1;const c=this.helper.makeProjectionTransform(t,Y()),u=this.styleRenderers_.map(((t,e)=>t.generateBuffers(this.batch_,c).then((t=>{this.buffers_[e]=t}))));Promise.all(u).then((()=>{this.ready=!0,this.getLayer().changed()})),this.previousExtent_=t.extent.slice()}return!0}renderWorlds(t,e,n,i,r){let s=n;e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.currentFrameStateTransform_=this.helper.makeProjectionTransform(t,this.currentFrameStateTransform_);do{for(let n=0,i=this.styleRenderers_.length;n<i;n++){const i=this.styleRenderers_[n],r=this.buffers_[n];r&&i.render(r,t,(()=>{this.applyUniforms_(r.invertVerticesTransform),this.helper.applyHitDetectionUniform(e)}))}ot(this.currentFrameStateTransform_,r,0)}while(++s<i)}forEachFeatureAtCoordinate(t,e,n,i,r){if(z(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const s=nt(e.coordinateToPixelTransform,t.slice()),o=this.hitRenderTarget_.readPixel(s[0]/2,s[1]/2),a=[o[0]/255,o[1]/255,o[2]/255,o[3]/255],l=aE(a),c=this.batch_.getFeatureFromRef(l);return c?i(c,this.getLayer(),null):void 0}disposeInternal(){this.sourceListenKeys_&&(this.sourceListenKeys_.forEach((function(t){N(t)})),this.sourceListenKeys_=null),super.disposeInternal()}}var tB=JS;function eB(t,e){const n=`\n    attribute vec2 ${_C.TEXTURE_COORD};\n    uniform mat4 ${wC.TILE_TRANSFORM};\n    uniform float ${wC.TEXTURE_PIXEL_WIDTH};\n    uniform float ${wC.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${wC.TEXTURE_RESOLUTION};\n    uniform float ${wC.TEXTURE_ORIGIN_X};\n    uniform float ${wC.TEXTURE_ORIGIN_Y};\n    uniform float ${wC.DEPTH};\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ${_C.TEXTURE_COORD};\n      v_mapCoord = vec2(\n        ${wC.TEXTURE_ORIGIN_X} + ${wC.TEXTURE_RESOLUTION} * ${wC.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],\n        ${wC.TEXTURE_ORIGIN_Y} - ${wC.TEXTURE_RESOLUTION} * ${wC.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]\n      );\n      gl_Position = ${wC.TILE_TRANSFORM} * vec4(${_C.TEXTURE_COORD}, ${wC.DEPTH}, 1.0);\n    }\n  `,i={...PC(),inFragmentShader:!0,bandCount:e,style:t},r=[];if(void 0!==t.color){const e=FS(i,t.color,yv);r.push(`color = ${e};`)}if(void 0!==t.contrast){const e=FS(i,t.contrast,mv);r.push(`color.rgb = clamp((${e} + 1.0) * color.rgb - (${e} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.exposure){const e=FS(i,t.exposure,mv);r.push(`color.rgb = clamp((${e} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.saturation){const e=FS(i,t.saturation,mv);r.push(`\n      float saturation = ${e} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==t.gamma){const e=FS(i,t.gamma,mv);r.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${e}));`)}if(void 0!==t.brightness){const e=FS(i,t.brightness,mv);r.push(`color.rgb = clamp(color.rgb + ${e}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const s={},o=Object.keys(i.variables).length;if(o>1&&!t.variables)throw new Error(`Missing variables in style (expected ${i.variables})`);for(let h=0;h<o;++h){const e=i.variables[Object.keys(i.variables)[h]];if(!(e.name in t.variables))throw new Error(`Missing '${e.name}' in style variables`);const n=MC(e.name);s[n]=function(){let n=t.variables[e.name];return"string"===typeof n&&(n=LC(n)),void 0!==n?n:-9999999}}const a=Object.keys(s).map((function(t){return`uniform float ${t};`})),l=Math.ceil(e/4);a.push(`uniform sampler2D ${wC.TILE_TEXTURE_ARRAY}[${l}];`),i.paletteTextures&&a.push(`uniform sampler2D ${OC}[${i.paletteTextures.length}];`);const c=Object.keys(i.functions).map((function(t){return i.functions[t]})),u=`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ${wC.RENDER_EXTENT};\n    uniform float ${wC.TRANSITION_ALPHA};\n    uniform float ${wC.TEXTURE_PIXEL_WIDTH};\n    uniform float ${wC.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${wC.RESOLUTION};\n    uniform float ${wC.ZOOM};\n\n    ${a.join("\n")}\n\n    ${c.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < ${wC.RENDER_EXTENT}[0] ||\n        v_mapCoord[1] < ${wC.RENDER_EXTENT}[1] ||\n        v_mapCoord[0] > ${wC.RENDER_EXTENT}[2] ||\n        v_mapCoord[1] > ${wC.RENDER_EXTENT}[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(${wC.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);\n\n      ${r.join("\n")}\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ${wC.TRANSITION_ALPHA};\n    }`;return{vertexShader:n,fragmentShader:u,uniforms:s,paletteTextures:i.paletteTextures}}class nB extends rS{constructor(t){t=t?Object.assign({},t):{};const e=t.style||{};delete t.style;const n=t.cacheSize;delete t.cacheSize,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.cacheSize_=n,this.styleVariables_=this.style_.variables||{},this.addChangeListener(Om.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const n=this.getSource();return this.sources_?"function"===typeof this.sources_?this.sources_(t,e):this.sources_:n?[n]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache(),this.getSource()&&this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t);return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=eB(this.style_,this.getSourceBandCount_());return new EC(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.cacheSize_,paletteTextures:t.paletteTextures})}renderSources(t,e){const n=this.getRenderer();let i;for(let r=0,s=e.length;r<s;++r)this.renderedSource_=e[r],n.prepareFrame(t)&&(i=n.renderFrame(t));return i}render(t,e){this.rendered=!0;const n=t.viewState,i=this.getSources(t.extent,n.resolution);let r=!0;for(let o=0,a=i.length;o<a;++o){const t=i[o],e=t.getState();if("loading"==e){const e=()=>{"ready"==t.getState()&&(t.removeEventListener("change",e),this.changed())};t.addEventListener("change",e)}r=r&&"ready"==e}const s=this.renderSources(t,i);if(this.getRenderer().renderComplete&&r)return this.renderedResolution_=n.resolution,s;if(this.renderedResolution_>.5*n.resolution){const e=this.getSources(t.extent,this.renderedResolution_).filter((t=>!i.includes(t)));if(e.length>0)return this.renderSources(t,e)}return s}setStyle(t){this.styleVariables_=t.variables||{},this.style_=t;const e=eB(this.style_,this.getSourceBandCount_()),n=this.getRenderer();n.reset({vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms,paletteTextures:e.paletteTextures}),this.changed()}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}nB.prototype.dispose;var iB=nB;class rB extends JE{clear(){while(this.getCount()>0)this.pop().release();super.clear()}expireCache(t){while(this.canExpireCache()){const e=this.peekLast();if(e.getKey()in t)break;this.pop().release()}}pruneExceptNewestZ(){if(0===this.getCount())return;const t=this.peekFirstKey(),e=aC(t),n=e[0];this.forEach((t=>{t.tileCoord[0]!==n&&(this.remove(sC(t.tileCoord)),t.release())}))}}var sB=rB,oB={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};const aB=[0,0,0],lB=5;class cB{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,z(b(this.resolutions_,((t,e)=>e-t),!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let i=0,r=this.resolutions_.length-1;i<r;++i)if(e){if(this.resolutions_[i]/this.resolutions_[i+1]!==e){e=void 0;break}}else e=this.resolutions_[i]/this.resolutions_[i+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,z(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=Yt(n)),z(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,z(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:Vm,z(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(((t,e)=>{const i=new nC(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){const t=this.getTileRangeForExtentAndZ(n,e);i.minX=Math.max(t.minX,i.minX),i.maxX=Math.min(t.maxX,i.maxX),i.minY=Math.max(t.minY,i.minY),i.maxY=Math.min(t.maxY,i.maxY)}return i})):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let r=i.minX,s=i.maxX;r<=s;++r)for(let t=i.minY,o=i.maxY;t<=o;++t)n([e,r,t])}forEachTileCoordParentTileRange(t,e,n,i){let r,s,o,a=null,l=t[0]-1;2===this.zoomFactor_?(s=t[1],o=t[2]):a=this.getTileCoordExtent(t,i);while(l>=this.minZoom){if(void 0!==s&&void 0!==o?(s=Math.floor(s/2),o=Math.floor(o/2),r=eC(s,s,o,o,n)):r=this.getTileRangeForExtentAndZ(a,l,n),e(l,r))return!0;--l}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],i=2*t[2];return eC(n,n+1,i,i+1,e)}const i=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(i,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const i=t[0],r=t[1],s=t[2];if(e===i)return eC(r,s,r,s,n);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-i),o=Math.floor(r*t),a=Math.floor(s*t);if(e<i)return eC(o,o,a,a,n);const l=Math.floor(t*(r+1))-1,c=Math.floor(t*(s+1))-1;return eC(o,l,a,c,n)}const o=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,aB);const i=aB[1],r=aB[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,aB);const s=aB[1],o=aB[2];return eC(i,s,r,o,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=Gl(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=Gl(this.getTileSize(t[0]),this.tmpSize_),s=n[0]+t[1]*r[0]*i,o=n[1]-(t[2]+1)*r[1]*i,a=s+r[0]*i,l=o+r[1]*i;return xt(s,o,a,l,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const s=this.getZForResolution(n),o=n/this.getResolution(s),a=this.getOrigin(s),l=Gl(this.getTileSize(s),this.tmpSize_);let c=o*(t-a[0])/n/l[0],u=o*(a[1]-e)/n/l[1];return i?(c=je(c,lB)-1,u=je(u,lB)-1):(c=Ve(c,lB),u=Ve(u,lB)),iC(s,c,u,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const s=this.getOrigin(n),o=this.getResolution(n),a=Gl(this.getTileSize(n),this.tmpSize_);let l=(t-s[0])/o/a[0],c=(s[1]-e)/o/a[1];return i?(l=je(l,lB)-1,c=je(c,lB)-1):(l=Ve(l,lB),c=Ve(c,lB)),iC(n,l,c,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=v(this.resolutions_,t,e||0);return Me(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return Oi(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}}var uB=cB;function hB(t){let e=t.getDefaultTileGrid();return e||(e=gB(t),t.setDefaultTileGrid(e)),e}function AB(t,e,n){const i=e[0],r=t.getTileCoordCenter(e),s=mB(n);if(!vt(s,r)){const e=Jt(s),n=Math.ceil((s[0]-r[0])/e);return r[0]+=e*n,t.getTileCoordForCoordAndZ(r,i)}return e}function dB(t,e,n,i){i=void 0!==i?i:"top-left";const r=pB(t,e,n);return new uB({extent:t,origin:Ht(t,i),resolutions:r,tileSize:n})}function fB(t){const e=t||{},n=e.extent||gn("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:pB(n,e.maxZoom,e.tileSize,e.maxResolution)};return new uB(i)}function pB(t,e,n,i){e=void 0!==e?e:Hm,n=Gl(void 0!==n?n:Vm);const r=zt(t),s=Jt(t);i=i>0?i:Math.max(s/n[0],r/n[1]);const o=e+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function gB(t,e,n,i){const r=mB(t);return dB(r,e,n,i)}function mB(t){t=gn(t);let e=t.getExtent();if(!e){const n=180*ue.degrees/t.getMetersPerUnit();e=xt(-n,-n,n,n)}return e}class vB extends I_{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&Gl(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tileCache=new sB(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){const n=this.getTileCacheForProjection(t);n&&n.expireCache(e)}forEachLoadedTile(t,e,n,i){const r=this.getTileCacheForProjection(t);if(!r)return!1;let s,o,a,l=!0;for(let c=n.minX;c<=n.maxX;++c)for(let t=n.minY;t<=n.maxY;++t)o=rC(e,c,t),a=!1,r.containsKey(o)&&(s=r.get(o),a=s.getState()===ww.LOADED,a&&(a=!1!==i(s))),a||(l=!1);return l}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,i,r){return U()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:hB(t)}getTileCacheForProjection(t){const e=this.getProjection();return z(null===e||xn(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=this.getTilePixelRatio(e),s=Gl(i.getTileSize(t),this.tmpSize);return 1==r?s:Ql(s,r,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();const n=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=AB(n,t,e)),cC(t,n)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){const n=this.getTileCacheForProjection(e);t>n.highWaterMark&&(n.highWaterMark=t)}useTile(t,e,n,i){}}class yB extends h{constructor(t,e){super(t),this.tile=e}}var wB=vB;function _B(t,e){const n=/\{z\}/g,i=/\{x\}/g,r=/\{y\}/g,s=/\{-y\}/g;return function(o,a,l){if(o)return t.replace(n,o[0].toString()).replace(i,o[1].toString()).replace(r,o[2].toString()).replace(s,(function(){const t=o[0],n=e.getFullTileRange(t);if(!n)throw new Error("The {-y} placeholder requires a tile grid with extent");const i=n.getHeight()-o[2]-1;return i.toString()}))}}function bB(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=_B(t[r],e);return xB(i)}function xB(t){return 1===t.length?t[0]:function(e,n,i){if(!e)return;const r=lC(e),s=Ue(r,t.length);return t[s](e,n,i)}}function EB(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}class CB extends wB{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===CB.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=G(e),i=e.getState();let r;i==ww.LOADING?(this.tileLoadingKeys_[n]=!0,r=oB.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==ww.ERROR?oB.TILELOADERROR:i==ww.LOADED?oB.TILELOADEND:void 0),void 0!=r&&this.dispatchEvent(new yB(r,e))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),"undefined"!==typeof e?this.setKey(e):this.changed()}setUrl(t){const e=EB(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction(bB(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}useTile(t,e,n){const i=rC(t,e,n);this.tileCache.containsKey(i)&&this.tileCache.get(i)}}var SB=CB;class BB extends SB{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:TB,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:HE,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(const t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const i in this.tileCacheForProjection){const t=this.tileCacheForProjection[i];t.expireCache(t==n?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!xn(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return!(this.getProjection()&&t&&!xn(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||xn(e,t)))return this.tileGrid;const n=G(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=hB(t)),this.tileGridForProjection[n]}getTileCacheForProjection(t){const e=this.getProjection();if(!e||xn(e,t))return this.tileCache;const n=G(t);return n in this.tileCacheForProjection||(this.tileCacheForProjection[n]=new sB(this.tileCache.highWaterMark)),this.tileCacheForProjection[n]}createTile_(t,e,n,i,r,s){const o=[t,e,n],a=this.getTileCoordForTileUrlFunction(o,r),l=a?this.tileUrlFunction(a,i,r):void 0,c=new this.tileClass(o,void 0!==l?ww.IDLE:ww.EMPTY,void 0!==l?l:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=s,c.addEventListener(R.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,n,i,r){const s=this.getProjection();if(!s||!r||xn(s,r))return this.getTileInternal(t,e,n,i,s||r);const o=this.getTileCacheForProjection(r),a=[t,e,n];let l;const c=sC(a);o.containsKey(c)&&(l=o.get(c));const u=this.getKey();if(l&&l.key==u)return l;const h=this.getTileGridForProjection(s),A=this.getTileGridForProjection(r),d=this.getTileCoordForTileUrlFunction(a,r),f=new UE(s,h,r,A,a,d,this.getTilePixelRatio(i),this.getGutter(),((t,e,n,i)=>this.getTileInternal(t,e,n,i,s)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=u,l?(f.interimTile=l,f.refreshInterimChain(),o.replace(c,f)):o.set(c,f),f}getTileInternal(t,e,n,i,r){let s=null;const o=rC(t,e,n),a=this.getKey();if(this.tileCache.containsKey(o)){if(s=this.tileCache.get(o),s.key!=a){const l=s;s=this.createTile_(t,e,n,i,r,a),l.getState()==ww.IDLE?s.interimTile=l.interimTile:s.interimTile=l,s.refreshInterimChain(),this.tileCache.replace(o,s)}}else s=this.createTile_(t,e,n,i,r,a),this.tileCache.set(o,s);return s}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){this.renderReprojectionEdges_=t;for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear();this.changed()}}setTileGridForProjection(t,e){const n=gn(t);if(n){const t=G(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){super.clear();for(const t in this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function TB(t,e){t.getImage().src=e}var IB=BB;function FB(t){const e=t[0],n=new Array(e);let i,r,s=1<<e-1;for(i=0;i<e;++i)r=48,t[1]&s&&(r+=1),t[2]&s&&(r+=2),n[i]=String.fromCharCode(r),s>>=1;return n.join("")}const LB='<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>';class RB extends IB{constructor(t){const e=void 0!==t.hidpi&&t.hidpi;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,opaque:!0,projection:gn("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=e,this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles;const n="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(n).then((t=>t.json())).then((t=>this.handleImageryMetadataResponse(t)))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)return void this.setState("error");const e=t.resourceSets[0].resources[0],n=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,i=this.getProjection(),r=mB(i),s=this.hidpi_?2:1,o=e.imageWidth==e.imageHeight?e.imageWidth/s:[e.imageWidth/s,e.imageHeight/s],a=fB({extent:r,minZoom:e.zoomMin,maxZoom:n,tileSize:o});this.tileGrid=a;const l=this.culture_,c=this.hidpi_,u=this.placeholderTiles_;if(this.tileUrlFunction=xB(e.imageUrlSubdomains.map((function(t){const n=[0,0,0],i=e.imageUrl.replace("{subdomain}",t).replace("{culture}",l);return function(t,e,r){if(!t)return;iC(t[0],t[1],t[2],n);const s=new URL(i.replace("{quadkey}",FB(n))),o=s.searchParams;return c&&(o.set("dpi","d1"),o.set("device","mobile")),!0===u?o.delete("n"):!1===u&&o.set("n","z"),s.toString()}}))),e.imageryProviders){const t=En(gn("EPSG:4326"),this.getProjection());this.setAttributions((n=>{const i=[],r=n.viewState,s=this.getTileGrid(),o=s.getZForResolution(r.resolution,this.zDirection),a=s.getTileCoordForCoordAndZ(r.center,o),l=a[0];return e.imageryProviders.map((function(e){let r=!1;const s=e.coverageAreas;for(let i=0,o=s.length;i<o;++i){const e=s[i];if(l>=e.zoomMin&&l<=e.zoomMax){const i=e.bbox,s=[i[1],i[0],i[3],i[2]],o=se(s,t);if(te(o,n.extent)){r=!0;break}}}r&&i.push(e.attribution)})),i.push(LB),i}))}this.setState("ready")}}var MB=RB;class PB extends Fl{constructor(t,e,n,i,r,s,o){let a=t.getExtent();a&&t.canWrapX()&&(a=a.slice(),a[0]=-1/0,a[2]=1/0);let l=e.getExtent();l&&e.canWrapX()&&(l=l.slice(),l[0]=-1/0,l[2]=1/0);const c=l?qt(n,l):n,u=Gt(c),h=ME(t,e,u,i),A=fE,d=new BE(t,e,c,a,h*A,i),f=d.calculateSourceExtent(),p=ee(f)?null:s(f,h,r),g=p?Ma.IDLE:Ma.EMPTY,m=p?p.getPixelRatio():1;super(n,i,m,g),this.targetProj_=e,this.maxSourceExtent_=a,this.triangulation_=d,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=p,this.sourcePixelRatio_=m,this.interpolate_=o,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==Ma.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==Ma.LOADED){const t=Jt(this.targetExtent_)/this.targetResolution_,e=zt(this.targetExtent_)/this.targetResolution_;this.canvas_=NE(t,e,this.sourcePixelRatio_,mS(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==Ma.IDLE){this.state=Ma.LOADING,this.changed();const t=this.sourceImage_.getState();t==Ma.LOADED||t==Ma.ERROR?this.reproject_():(this.sourceListenerKey_=M(this.sourceImage_,R.CHANGE,(function(t){const e=this.sourceImage_.getState();e!=Ma.LOADED&&e!=Ma.ERROR||(this.unlistenSource_(),this.reproject_())}),this),this.sourceImage_.load())}}unlistenSource_(){N(this.sourceListenerKey_),this.sourceListenerKey_=null}}var NB=PB;const OB=4,kB={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class DB extends h{constructor(t,e){super(t),this.image=e}}class UB extends I_{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){const n=v(e,t,0);t=e[n]}return t}getImage(t,e,n,i){const r=this.getProjection();if(!r||!i||xn(r,i))return r&&(i=r),this.getImageInternal(t,e,n,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&xn(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&It(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new NB(r,i,t,e,n,((t,e,n)=>this.getImageInternal(t,e,n,r)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,i){if(this.loader){const r=GB(t,e,n,1),s=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===i&&(this.wantedExtent_&&yt(this.wantedExtent_,r)||yt(this.image.getExtent(),r))&&(this.wantedResolution_&&mS(this.wantedResolution_)===s||mS(this.image.getResolution())===s)))return this.image;this.wantedProjection_=i,this.wantedExtent_=r,this.wantedResolution_=s,this.image=new Fl(r,s,n,this.loader),this.image.addEventListener(R.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case Ma.LOADING:this.loading=!0,n=kB.IMAGELOADSTART;break;case Ma.LOADED:this.loading=!1,n=kB.IMAGELOADEND;break;case Ma.ERROR:this.loading=!1,n=kB.IMAGELOADERROR;break;default:return}this.hasListener(n)&&this.dispatchEvent(new DB(n,e))}}function QB(t,e){t.getImage().src=e}function GB(t,e,n,i){const r=e/n,s=Gt(t),o=je(Jt(t)/r,OB),a=je(zt(t)/r,OB),l=je((i-1)*o/2,OB),c=o+2*l,u=je((i-1)*a/2,OB),h=a+2*u;return jt(s,r,0,[c,h])}var HB=UB;function VB(t){const e=t.load||Il,n=t.imageExtent,i=new Image;return null!==t.crossOrigin&&(i.crossOrigin=t.crossOrigin),()=>e(i,t.url).then((t=>{const e=Jt(n)/t.width,i=zt(n)/t.height,r=e!==i?[e,i]:i;return{image:t,extent:n,resolution:r,pixelRatio:1}}))}class jB extends HB{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:QB;super({attributions:t.attributions,interpolate:t.interpolate,projection:gn(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new Fl(this.imageExtent_,void 0,1,VB({url:t.url,imageExtent:t.imageExtent,crossOrigin:e,load:(t,e)=>(this.image.setImage(t),n(this.image,e),Il(t))})),this.image.addEventListener(R.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,n,i){return te(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}var WB=jB;function zB(t,e){const n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));const i=n.join("&");return t=t.replace(/[?&]$/,""),t+=t.includes("?")?"&":"?",t+i}const KB="1.3.0",qB=[101,101];function $B(t,e,n,i,r){r["WIDTH"]=n[0],r["HEIGHT"]=n[1];const s=i.getAxisOrientation();let o;const a=Ws(r["VERSION"],"1.3")>=0;return r[a?"CRS":"SRS"]=i.getCode(),o=a&&"ne"==s.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,r["BBOX"]=o.join(","),zB(t,r)}function XB(t,e,n,i,r,s,o){s=Object.assign({REQUEST:"GetMap"},s);const a=e/n,l=[He(Jt(t)/a,OB),He(zt(t)/a,OB)];if(1!=n)switch(o){case"geoserver":const t=90*n+.5|0;"FORMAT_OPTIONS"in s?s["FORMAT_OPTIONS"]+=";dpi:"+t:s["FORMAT_OPTIONS"]="dpi:"+t;break;case"mapserver":s["MAP_RESOLUTION"]=90*n;break;case"carmentaserver":case"qgis":s["DPI"]=90*n;break;default:throw new Error("Unknown `serverType` configured")}const c=$B(r,t,l,i,s);return c}function YB(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:KB,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},t)}function ZB(t){const e=void 0===t.hidpi||t.hidpi,n=gn(t.projection||"EPSG:3857"),i=t.ratio||1.5,r=t.load||Il;return(s,o,a)=>{s=GB(s,o,a,i),1==a||e&&void 0!==t.serverType||(a=1);const l=XB(s,o,a,n,t.url,YB(t.params,"GetMap"),t.serverType),c=new Image;return null!==t.crossOrigin&&(c.crossOrigin=t.crossOrigin),r(c,l).then((t=>({image:t,extent:s,pixelRatio:a})))}}function JB(t,e,n){if(void 0===t.url)return;const i=gn(t.projection||"EPSG:3857"),r=jt(e,n,0,qB),s={QUERY_LAYERS:t.params["LAYERS"],INFO_FORMAT:"application/json"};Object.assign(s,YB(t.params,"GetFeatureInfo"),t.params);const o=Ve((e[0]-r[0])/n,OB),a=Ve((r[3]-e[1])/n,OB),l=Ws(s["VERSION"],"1.3")>=0;return s[l?"I":"X"]=o,s[l?"J":"Y"]=a,$B(t.url,r,qB,i,s)}function tT(t,e){if(void 0===t.url)return;const n={SERVICE:"WMS",VERSION:KB,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===t.params||void 0===t.params["LAYER"]){const e=t.params.LAYERS,i=!Array.isArray(e)||1===e.length;if(!i)return;n["LAYER"]=e}if(void 0!==e){const i=gn(t.projection||"EPSG:3857").getMetersPerUnit()||1,r=28e-5;n["SCALE"]=e*i/r}return Object.assign(n,t.params),zB(t.url,n)}class eT extends HB{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:QB,this.params_=Object.assign({},t.params),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(t,e,n,i){const r=gn(n),s=this.getProjection();s&&s!==r&&(e=ME(s,r,t,e),t=Sn(t,r,s));const o={url:this.url_,params:{...this.params_,...i},projection:s||r};return JB(o,t,e)}getLegendUrl(t,e){return tT({url:this.url_,params:{...this.params_,...e}},t)}getParams(){return this.params_}getImageInternal(t,e,n,i){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===i||(this.loaderProjection_=i,this.loader=ZB({crossOrigin:this.crossOrigin_,params:this.params_,projection:i,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),Il(t))})),super.getImageInternal(t,e,n,i))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}var nT=eT;class iT extends IB{constructor(t){t=t||{};const e=void 0!==t.projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:fB({extent:mB(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}var rT=iT;const sT='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class oT extends rT{constructor(t){let e;t=t||{},e=void 0!==t.attributions?t.attributions:[sT];const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,opaque:void 0===t.opaque||t.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}}var aT=oT;const lT='&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>',cT='&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',uT='&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>',hT={stamen_terrain:{extension:"png",opaque:!0},stamen_terrain_background:{extension:"png",opaque:!0},stamen_terrain_labels:{extension:"png",opaque:!1},stamen_terrain_lines:{extension:"png",opaque:!1},stamen_toner_background:{extension:"png",opaque:!0},stamen_toner:{extension:"png",opaque:!0},stamen_toner_labels:{extension:"png",opaque:!1},stamen_toner_lines:{extension:"png",opaque:!1},stamen_toner_lite:{extension:"png",opaque:!0},stamen_watercolor:{extension:"jpg",opaque:!0},alidade_smooth:{extension:"png",opaque:!0},alidade_smooth_dark:{extension:"png",opaque:!0},outdoors:{extension:"png",opaque:!0},osm_bright:{extension:"png",opaque:!0}},AT={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class dT extends rT{constructor(t){const e=t.layer.indexOf("-"),n=-1==e?t.layer:t.layer.slice(0,e),i=AT[n]||{minZoom:0,maxZoom:20,retina:!0},r=hT[t.layer],s=t.apiKey?"?api_key="+t.apiKey:"",o=i.retina&&t.retina?"@2x":"",a=void 0!==t.url?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+o+"."+r.extension+s,l=[lT,cT,sT];t.layer.startsWith("stamen_")&&l.splice(1,0,uT),super({attributions:l,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:i.maxZoom,minZoom:void 0!==t.minZoom?t.minZoom:i.minZoom,opaque:r.opaque,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:a,tilePixelRatio:o?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}}var fT=dT;class pT extends IB{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",n=t.tileGrid;let i=t.urls;void 0===i&&void 0!==t.url&&(i=EB(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:i,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=xB(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction(xB(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?zB(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t}));const i=this.tileGrid,r=this.dimensions_;return function(n,s,o){if(!n)return;const a={TileMatrix:i.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};Object.assign(a,r);let l=t;return l="KVP"==e?zB(l,a):l.replace(/\{(\w+?)\}/g,(function(t,e){return a[e]})),l}}}var gT=pT;class mT extends uB{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}}var vT=mT;function yT(t,e,n,i,r,s){const o=r.getCode().split(/:(?=\d+$)/).pop(),a=n/i,l=[He(Jt(e)/a,OB),He(zt(e)/a,OB)];s["SIZE"]=l[0]+","+l[1],s["BBOX"]=e.join(","),s["BBOXSR"]=o,s["IMAGESR"]=o,s["DPI"]=Math.round(s["DPI"]?s["DPI"]*i:90*i);const c=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return zB(c,s)}class wT extends IB{constructor(t){t=t||{},super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.params_=Object.assign({},t.params),this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=bt(),this.setKey(this.getKeyForParams_())}getKeyForParams_(){let t=0;const e=[];for(const n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")}getParams(){return this.params_}getRequestUrl_(t,e,n,i,r,s){const o=this.urls;if(!o)return;let a;if(1==o.length)a=o[0];else{const e=Ue(lC(t),o.length);a=o[e]}return yT(a,n,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),i,r,s)}getTilePixelRatio(t){return this.hidpi_?t:1}updateParams(t){Object.assign(this.params_,t),this.setKey(this.getKeyForParams_())}tileUrlFunction(t,e,n){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(n)),i.getResolutions().length<=t[0])return;1==e||this.hidpi_||(e=1);const r=i.getTileCoordExtent(t,this.tmpExtent_);let s=Gl(i.getTileSize(t[0]),this.tmpSize);1!=e&&(s=Ql(s,e,this.tmpSize));const o={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};return Object.assign(o,this.params_),this.getRequestUrl_(t,s,r,e,n,o)}}var _T=wT;class bT extends rT{constructor(t){t=t||{},super({opaque:!1,projection:t.projection,tileGrid:t.tileGrid,wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection,url:t.template||"z:{z} x:{x} y:{y}",tileLoadFunction:(t,e)=>{const n=t.getTileCoord()[0],i=Gl(this.tileGrid.getTileSize(n)),r=pl(i[0],i[1]);r.strokeStyle="grey",r.strokeRect(.5,.5,i[0]+.5,i[1]+.5),r.fillStyle="grey",r.strokeStyle="white",r.textAlign="center",r.textBaseline="middle",r.font="24px sans-serif",r.lineWidth=4,r.strokeText(e,i[0]/2,i[1]/2,i[0]),r.fillText(e,i[0]/2,i[1]/2,i[0]),t.setImage(r.canvas)}})}}var xT=bT;class ET extends wB{constructor(t){const e=void 0===t.projection?"EPSG:3857":t.projection;let n=t.tileGrid;void 0===n&&e&&(n=fB({extent:mB(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:n,opaque:t.opaque,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.tileSize_=t.tileSize?Gl(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===t.bandCount?4:t.bandCount,this.tileGridForProjection_={},this.tileCacheForProjection_={}}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const e=this.getTileGrid();return e?Gl(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection();return!e||xn(e,t)?this.gutter_:0}setLoader(t){this.loader_=t}getReprojTile_(t,e,n,i,r){const s=this.getTileCacheForProjection(i),o=rC(t,e,n);if(s.containsKey(o)){const t=s.get(o);if(t&&t.key==this.getKey())return t}const a=this.getTileGrid(),l=Math.max.apply(null,a.getResolutions().map(((t,e)=>{const n=Gl(a.getTileSize(e)),i=this.getTileSize(e);return Math.max(i[0]/n[0],i[1]/n[1])}))),c=this.getTileGridForProjection(r),u=this.getTileGridForProjection(i),h=[t,e,n],A=this.getTileCoordForTileUrlFunction(h,i),d=Object.assign({sourceProj:r,sourceTileGrid:c,targetProj:i,targetTileGrid:u,tileCoord:h,wrappedTileCoord:A,pixelRatio:l,gutter:this.getGutterForProjection(r),getTileFunction:(t,e,n,i)=>this.getTile(t,e,n,i,r)},this.tileOptions),f=new kE(d);return f.key=this.getKey(),f}getTile(t,e,n,i,r){const s=this.getProjection();if(s&&r&&!xn(s,r))return this.getReprojTile_(t,e,n,r,s);const o=this.getTileSize(t),a=rC(t,e,n);if(this.tileCache.containsKey(a))return this.tileCache.get(a);const l=this.loader_;function c(){return B((function(){return l(t,e,n)}))}const u=Object.assign({tileCoord:[t,e,n],loader:c,size:o},this.tileOptions),h=new xE(u);return h.key=this.getKey(),h.addEventListener(R.CHANGE,this.handleTileChange_),this.tileCache.set(a,h),h}handleTileChange_(t){const e=t.target,n=G(e),i=e.getState();let r;i==ww.LOADING?(this.tileLoadingKeys_[n]=!0,r=oB.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],r=i==ww.ERROR?oB.TILELOADERROR:i==ww.LOADED?oB.TILELOADEND:void 0),r&&this.dispatchEvent(new yB(r,e))}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||xn(e,t)))return this.tileGrid;const n=G(t);return n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=hB(t)),this.tileGridForProjection_[n]}setTileGridForProjection(t,e){const n=gn(t);if(n){const t=G(n);t in this.tileGridForProjection_||(this.tileGridForProjection_[t]=e)}}getTileCacheForProjection(t){const e=this.getProjection();if(!e||xn(e,t))return this.tileCache;const n=G(t);return n in this.tileCacheForProjection_||(this.tileCacheForProjection_[n]=new sB(.1)),this.tileCacheForProjection_[n]}expireCache(t,e){const n=this.getTileCacheForProjection(t);this.tileCache.expireCache(this.tileCache==n?e:{});for(const i in this.tileCacheForProjection_){const t=this.tileCacheForProjection_[i];t.expireCache(t==n?e:{})}}clear(){super.clear();for(const t in this.tileCacheForProjection_)this.tileCacheForProjection_[t].clear()}}var CT=ET,ST=n(4329);const BT=new Map;function TT(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>BT.set(t,e)))}async function IT(t){const e=BT.get(t.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`);const n=await e();return new n(t)}TT([void 0,1],(()=>n.e(234).then(n.bind(n,2853)).then((t=>t.default)))),TT(5,(()=>n.e(243).then(n.bind(n,4243)).then((t=>t.default)))),TT(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),TT(7,(()=>n.e(632).then(n.bind(n,1632)).then((t=>t.default)))),TT([8,32946],(()=>Promise.all([n.e(167),n.e(855)]).then(n.bind(n,9855)).then((t=>t.default)))),TT(32773,(()=>n.e(223).then(n.bind(n,7223)).then((t=>t.default)))),TT(34887,(()=>Promise.all([n.e(167),n.e(967)]).then(n.bind(n,3967)).then((async t=>(await t.zstd.init(),t))).then((t=>t.default)))),TT(50001,(()=>n.e(441).then(n.bind(n,7441)).then((t=>t.default))));const FT="undefined"!==typeof navigator&&navigator.hardwareConcurrency||2;class LT{constructor(t=FT,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise((t=>{n.e(847).then(n.bind(n,9847)).then((e=>{t(e.create)}))})),this._awaitingDecoder.then((e=>{this._awaitingDecoder=null,this.workers=[];for(let n=0;n<t;n++)this.workers.push({worker:e(),idle:!0})})))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?IT(t).then((n=>n.decode(t,e))):new Promise((n=>{const i=this.workers.find((t=>t.idle))||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const r=this.messageId++,s=t=>{t.data.id===r&&(i.idle=!0,n(t.data.decoded),i.worker.removeEventListener("message",s))};i.worker.addEventListener("message",s),i.worker.postMessage({fileDirectory:t,buffer:e,id:r},[e])}))}destroy(){this.workers&&(this.workers.forEach((t=>{t.worker.terminate()})),this.workers=null)}}var RT=LT;const MT="Cannot convert undefined or null to object";function PT(t){return(e,...n)=>OT(t,e,n)}function NT(t,e){return PT(QT(t,e).get)}const{apply:OT,construct:kT,defineProperty:DT,get:UT,getOwnPropertyDescriptor:QT,getPrototypeOf:GT,has:HT,ownKeys:VT,set:jT,setPrototypeOf:WT}=Reflect,{EPSILON:zT,MAX_SAFE_INTEGER:KT,isFinite:qT,isNaN:$T}=Number,{iterator:XT,species:YT,toStringTag:ZT,for:JT}=Symbol,tI=Object,{create:eI,defineProperty:nI,freeze:iI,is:rI}=tI,sI=tI.prototype,oI=(sI.__lookupGetter__&&PT(sI.__lookupGetter__),tI.hasOwn||PT(sI.hasOwnProperty)),aI=Array,lI=(aI.isArray,aI.prototype),cI=(PT(lI.join),PT(lI.push),PT(lI.toLocaleString),lI[XT]),uI=PT(cI),{abs:hI,trunc:AI}=Math,dI=ArrayBuffer,fI=(dI.isView,dI.prototype),pI=(PT(fI.slice),NT(fI,"byteLength"),"undefined"!==typeof SharedArrayBuffer?SharedArrayBuffer:null),gI=(pI&&NT(pI.prototype,"byteLength"),GT(Uint8Array)),mI=(gI.from,gI.prototype),vI=(mI[XT],PT(mI.keys),PT(mI.values),PT(mI.entries),PT(mI.set),PT(mI.reverse),PT(mI.fill),PT(mI.copyWithin),PT(mI.sort),PT(mI.slice),PT(mI.subarray),NT(mI,"buffer"),NT(mI,"byteOffset"),NT(mI,"length"),NT(mI,ZT),Uint8Array),yI=Uint16Array,wI=Uint32Array,_I=Float32Array,bI=GT([][XT]()),xI=PT(bI.next),EI=PT(function*(){}().next),CI=GT(bI),SI=DataView.prototype,BI=PT(SI.getUint16),TI=(PT(SI.setUint16),TypeError),II=WeakSet,FI=II.prototype,LI=(PT(FI.add),PT(FI.has),WeakMap),RI=LI.prototype,MI=PT(RI.get),PI=(PT(RI.has),PT(RI.set)),NI=new LI,OI=eI(null,{next:{value:function(){const t=MI(NI,this);return xI(t)}},[XT]:{value:function(){return this}}});function kI(t){if(t[XT]===cI&&bI.next===xI)return t;const e=eI(OI);return PI(NI,e,uI(t)),e}const DI=new LI,UI=eI(CI,{next:{value:function(){const t=MI(DI,this);return EI(t)},writable:!0,configurable:!0}});for(const Set of VT(bI))"next"!==Set&&nI(UI,Set,QT(bI,Set));const QI=new dI(4),GI=new _I(QI),HI=new wI(QI),VI=new yI(512),jI=new vI(512);for(let Set=0;Set<256;++Set){const t=Set-127;t<-27?(VI[Set]=0,VI[256|Set]=32768,jI[Set]=24,jI[256|Set]=24):t<-14?(VI[Set]=1024>>-t-14,VI[256|Set]=1024>>-t-14|32768,jI[Set]=-t-1,jI[256|Set]=-t-1):t<=15?(VI[Set]=t+15<<10,VI[256|Set]=t+15<<10|32768,jI[Set]=13,jI[256|Set]=13):t<128?(VI[Set]=31744,VI[256|Set]=64512,jI[Set]=24,jI[256|Set]=24):(VI[Set]=31744,VI[256|Set]=64512,jI[Set]=13,jI[256|Set]=13)}const WI=new wI(2048);for(let Set=1;Set<1024;++Set){let t=Set<<13,e=0;while(0===(8388608&t))t<<=1,e-=8388608;t&=-8388609,e+=947912704,WI[Set]=t|e}for(let Set=1024;Set<2048;++Set)WI[Set]=939524096+(Set-1024<<13);const zI=new wI(64);for(let Set=1;Set<31;++Set)zI[Set]=Set<<23;zI[31]=1199570944,zI[32]=2147483648;for(let Set=33;Set<63;++Set)zI[Set]=2147483648+(Set-32<<23);zI[63]=3347054592;const KI=new yI(64);for(let Set=1;Set<64;++Set)32!==Set&&(KI[Set]=1024);function qI(t){const e=t>>10;return HI[0]=WI[KI[e]+(1023&t)]+zI[e],GI[0]}function $I(t,e,...n){return qI(BI(t,e,...kI(n)))}var XI=n(3146),YI=n(554);function ZI(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3);let s;for(let o=0,a=0;o<t.length;++o,a+=3)s=256-t[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}function JI(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3);let s;for(let o=0,a=0;o<t.length;++o,a+=3)s=t[o]/e*256,r[a]=s,r[a+1]=s,r[a+2]=s;return r}function tF(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3),s=e.length/3,o=e.length/3*2;for(let a=0,l=0;a<t.length;++a,l+=3){const n=t[a];r[l]=e[n]/65536*256,r[l+1]=e[n+s]/65536*256,r[l+2]=e[n+o]/65536*256}return r}function eF(t){const{width:e,height:n}=t,i=new Uint8Array(e*n*3);for(let r=0,s=0;r<t.length;r+=4,s+=3){const e=t[r],n=t[r+1],o=t[r+2],a=t[r+3];i[s]=(255-e)/256*255*((255-a)/256),i[s+1]=(255-n)/256*255*((255-a)/256),i[s+2]=(255-o)/256*255*((255-a)/256)}return i}function nF(t){const{width:e,height:n}=t,i=new Uint8ClampedArray(e*n*3);for(let r=0,s=0;r<t.length;r+=3,s+=3){const e=t[r],n=t[r+1],o=t[r+2];i[s]=e+1.402*(o-128),i[s+1]=e-.34414*(n-128)-.71414*(o-128),i[s+2]=e+1.772*(n-128)}return i}const iF=.95047,rF=1,sF=1.08883;function oF(t){const{width:e,height:n}=t,i=new Uint8Array(e*n*3);for(let r=0,s=0;r<t.length;r+=3,s+=3){const e=t[r+0],n=t[r+1]<<24>>24,o=t[r+2]<<24>>24;let a,l,c,u=(e+16)/116,h=n/500+u,A=u-o/200;h=iF*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),u=rF*(u*u*u>.008856?u*u*u:(u-16/116)/7.787),A=sF*(A*A*A>.008856?A*A*A:(A-16/116)/7.787),a=3.2406*h+-1.5372*u+-.4986*A,l=-.9689*h+1.8758*u+.0415*A,c=.0557*h+-.204*u+1.057*A,a=a>.0031308?1.055*a**(1/2.4)-.055:12.92*a,l=l>.0031308?1.055*l**(1/2.4)-.055:12.92*l,c=c>.0031308?1.055*c**(1/2.4)-.055:12.92*c,i[s]=255*Math.max(0,Math.min(1,a)),i[s+1]=255*Math.max(0,Math.min(1,l)),i[s+2]=255*Math.max(0,Math.min(1,c))}return i}function aF(t,e,n,i=1){return new(Object.getPrototypeOf(t).constructor)(e*n*i)}function lF(t,e,n,i,r){const s=e/i,o=n/r;return t.map((t=>{const a=aF(t,i,r);for(let l=0;l<r;++l){const r=Math.min(Math.round(o*l),n-1);for(let n=0;n<i;++n){const o=Math.min(Math.round(s*n),e-1),c=t[r*e+o];a[l*i+n]=c}}return a}))}function cF(t,e,n){return(1-n)*t+n*e}function uF(t,e,n,i,r){const s=e/i,o=n/r;return t.map((t=>{const a=aF(t,i,r);for(let l=0;l<r;++l){const r=o*l,c=Math.floor(r),u=Math.min(Math.ceil(r),n-1);for(let n=0;n<i;++n){const o=s*n,h=o%1,A=Math.floor(o),d=Math.min(Math.ceil(o),e-1),f=t[c*e+A],p=t[c*e+d],g=t[u*e+A],m=t[u*e+d],v=cF(cF(f,p,h),cF(g,m,h),r%1);a[l*i+n]=v}}return a}))}function hF(t,e,n,i,r,s="nearest"){switch(s.toLowerCase()){case"nearest":return lF(t,e,n,i,r);case"bilinear":case"linear":return uF(t,e,n,i,r);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function AF(t,e,n,i,r,s){const o=e/i,a=n/r,l=aF(t,i,r,s);for(let c=0;c<r;++c){const r=Math.min(Math.round(a*c),n-1);for(let n=0;n<i;++n){const a=Math.min(Math.round(o*n),e-1);for(let o=0;o<s;++o){const u=t[r*e*s+a*s+o];l[c*i*s+n*s+o]=u}}}return l}function dF(t,e,n,i,r,s){const o=e/i,a=n/r,l=aF(t,i,r,s);for(let c=0;c<r;++c){const r=a*c,u=Math.floor(r),h=Math.min(Math.ceil(r),n-1);for(let n=0;n<i;++n){const a=o*n,A=a%1,d=Math.floor(a),f=Math.min(Math.ceil(a),e-1);for(let o=0;o<s;++o){const a=t[u*e*s+d*s+o],p=t[u*e*s+f*s+o],g=t[h*e*s+d*s+o],m=t[h*e*s+f*s+o],v=cF(cF(a,p,A),cF(g,m,A),r%1);l[c*i*s+n*s+o]=v}}}return l}function fF(t,e,n,i,r,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return AF(t,e,n,i,r,s);case"bilinear":case"linear":return dF(t,e,n,i,r,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function pF(t,e,n){let i=0;for(let r=e;r<n;++r)i+=t[r];return i}function gF(t,e,n){switch(t){case 1:if(e<=8)return new Uint8Array(n);if(e<=16)return new Uint16Array(n);if(e<=32)return new Uint32Array(n);break;case 2:if(8===e)return new Int8Array(n);if(16===e)return new Int16Array(n);if(32===e)return new Int32Array(n);break;case 3:switch(e){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n);default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}function mF(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!==0)&&(3!==t||16!==e&&32!==e&&64!==e)}function vF(t,e,n,i,r,s,o){const a=new DataView(t),l=2===n?o*s:o*s*i,c=2===n?1:i,u=gF(e,r,l),h=parseInt("1".repeat(r),2);if(1===e){let t;t=1===n?i*r:r;let e=s*t;0!==(7&e)&&(e=e+7&-8);for(let n=0;n<o;++n){const t=n*e;for(let e=0;e<s;++e){const i=t+e*c*r;for(let t=0;t<c;++t){const o=i+t*r,l=(n*s+e)*c+t,A=Math.floor(o/8),d=o%8;if(d+r<=8)u[l]=a.getUint8(A)>>8-r-d&h;else if(d+r<=16)u[l]=a.getUint16(A)>>16-r-d&h;else if(d+r<=24){const t=a.getUint16(A)<<8|a.getUint8(A+2);u[l]=t>>24-r-d&h}else u[l]=a.getUint32(A)>>32-r-d&h}}}}return u.buffer}class yF{constructor(t,e,n,i,r,s){this.fileDirectory=t,this.geoKeys=e,this.dataView=n,this.littleEndian=i,this.tiles=r?{}:null,this.isTiled=!t.StripOffsets;const o=t.PlanarConfiguration;if(this.planarConfiguration="undefined"===typeof o?1:o,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return"undefined"!==typeof this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:"undefined"!==typeof this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,n=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(t,e){return $I(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64;default:break}break;default:break}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){const n=this.getSampleFormat(t),i=this.getBitsPerSample(t);return gF(n,i,e)}async getTileOrStrip(t,e,n,i,r){const s=Math.ceil(this.getWidth()/this.getTileWidth()),o=Math.ceil(this.getHeight()/this.getTileHeight());let a;const{tiles:l}=this;let c,u;1===this.planarConfiguration?a=e*s+t:2===this.planarConfiguration&&(a=n*s*o+e*s+t),this.isTiled?(c=this.fileDirectory.TileOffsets[a],u=this.fileDirectory.TileByteCounts[a]):(c=this.fileDirectory.StripOffsets[a],u=this.fileDirectory.StripByteCounts[a]);const h=(await this.source.fetch([{offset:c,length:u}],r))[0];let A;return null!==l&&l[a]?A=l[a]:(A=(async()=>{let t=await i.decode(this.fileDirectory,h);const n=this.getSampleFormat(),r=this.getBitsPerSample();return mF(n,r)&&(t=vF(t,n,this.planarConfiguration,this.getSamplesPerPixel(),r,this.getTileWidth(),this.getBlockHeight(e))),t})(),null!==l&&(l[a]=A)),{x:t,y:e,sample:n,data:await A}}async _readRaster(t,e,n,i,r,s,o,a,l){const c=this.getTileWidth(),u=this.getTileHeight(),h=this.getWidth(),A=this.getHeight(),d=Math.max(Math.floor(t[0]/c),0),f=Math.min(Math.ceil(t[2]/c),Math.ceil(h/c)),p=Math.max(Math.floor(t[1]/u),0),g=Math.min(Math.ceil(t[3]/u),Math.ceil(A/u)),m=t[2]-t[0];let v=this.getBytesPerPixel();const y=[],w=[];for(let x=0;x<e.length;++x)1===this.planarConfiguration?y.push(pF(this.fileDirectory.BitsPerSample,0,e[x])/8):y.push(0),w.push(this.getReaderForSample(e[x]));const _=[],{littleEndian:b}=this;for(let x=p;x<g;++x)for(let s=d;s<f;++s){let o;1===this.planarConfiguration&&(o=this.getTileOrStrip(s,x,0,r,l));for(let a=0;a<e.length;++a){const d=a,f=e[a];2===this.planarConfiguration&&(v=this.getSampleByteSize(f),o=this.getTileOrStrip(s,x,f,r,l));const p=o.then((r=>{const s=r.data,o=new DataView(s),a=this.getBlockHeight(r.y),l=r.y*u,f=r.x*c,p=l+a,g=(r.x+1)*c,_=w[d],x=Math.min(a,a-(p-t[3]),A-l),E=Math.min(c,c-(g-t[2]),h-f);for(let u=Math.max(0,t[1]-l);u<x;++u)for(let r=Math.max(0,t[0]-f);r<E;++r){const s=(u*c+r)*v,a=_.call(o,s+y[d],b);let h;i?(h=(u+l-t[1])*m*e.length+(r+f-t[0])*e.length+d,n[h]=a):(h=(u+l-t[1])*m+r+f-t[0],n[d][h]=a)}}));_.push(p)}}if(await Promise.all(_),s&&t[2]-t[0]!==s||o&&t[3]-t[1]!==o){let r;return r=i?fF(n,t[2]-t[0],t[3]-t[1],s,o,e.length,a):hF(n,t[2]-t[0],t[3]-t[1],s,o,a),r.width=s,r.height=o,r}return n.width=s||t[2]-t[0],n.height=o||t[3]-t[1],n}async readRasters({window:t,samples:e=[],interleave:n,pool:i=null,width:r,height:s,resampleMethod:o,fillValue:a,signal:l}={}){const c=t||[0,0,this.getWidth(),this.getHeight()];if(c[0]>c[2]||c[1]>c[3])throw new Error("Invalid subsets");const u=c[2]-c[0],h=c[3]-c[1],A=u*h,d=this.getSamplesPerPixel();if(e&&e.length){for(let m=0;m<e.length;++m)if(e[m]>=d)return Promise.reject(new RangeError(`Invalid sample index '${e[m]}'.`))}else for(let m=0;m<d;++m)e.push(m);let f;if(n){const t=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,n=Math.max.apply(null,this.fileDirectory.BitsPerSample);f=gF(t,n,A*e.length),a&&f.fill(a)}else{f=[];for(let t=0;t<e.length;++t){const n=this.getArrayForSample(e[t],A);Array.isArray(a)&&t<a.length?n.fill(a[t]):a&&!Array.isArray(a)&&n.fill(a),f.push(n)}}const p=i||await IT(this.fileDirectory),g=await this._readRaster(c,e,f,n,p,r,s,o,l);return g}async readRGB({window:t,interleave:e=!0,pool:n=null,width:i,height:r,resampleMethod:s,enableAlpha:o=!1,signal:a}={}){const l=t||[0,0,this.getWidth(),this.getHeight()];if(l[0]>l[2]||l[1]>l[3])throw new Error("Invalid subsets");const c=this.fileDirectory.PhotometricInterpretation;if(c===ST.ub.RGB){let l=[0,1,2];if(this.fileDirectory.ExtraSamples!==ST.AC.Unspecified&&o){l=[];for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)l.push(t)}return this.readRasters({window:t,interleave:e,samples:l,pool:n,width:i,height:r,resampleMethod:s,signal:a})}let u;switch(c){case ST.ub.WhiteIsZero:case ST.ub.BlackIsZero:case ST.ub.Palette:u=[0];break;case ST.ub.CMYK:u=[0,1,2,3];break;case ST.ub.YCbCr:case ST.ub.CIELab:u=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const h={window:l,interleave:!0,samples:u,pool:n,width:i,height:r,resampleMethod:s,signal:a},{fileDirectory:A}=this,d=await this.readRasters(h),f=2**this.fileDirectory.BitsPerSample[0];let p;switch(c){case ST.ub.WhiteIsZero:p=ZI(d,f);break;case ST.ub.BlackIsZero:p=JI(d,f);break;case ST.ub.Palette:p=tF(d,A.ColorMap);break;case ST.ub.CMYK:p=eF(d);break;case ST.ub.YCbCr:p=nF(d);break;case ST.ub.CIELab:p=oF(d);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const t=new Uint8Array(p.length/3),e=new Uint8Array(p.length/3),n=new Uint8Array(p.length/3);for(let i=0,r=0;i<p.length;i+=3,++r)t[r]=p[i],e[r]=p[i+1],n[r]=p[i+2];p=[t,e,n]}return p.width=d.width,p.height=d.height,p}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA;let i=YI(n,"Item");i=null===t?i.filter((t=>void 0===XI(t,"sample"))):i.filter((e=>Number(XI(e,"sample"))===t));for(let r=0;r<i.length;++r){const t=i[r];e[XI(t,"name")]=t.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(n)return 0===n[1]&&0===n[4]?[n[0],-n[5],n[10]]:[Math.sqrt(n[0]*n[0]+n[4]*n[4]),-Math.sqrt(n[1]*n[1]+n[5]*n[5]),n[10]];if(t){const[e,n,i]=t.getResolution();return[e*t.getWidth()/this.getWidth(),n*t.getHeight()/this.getHeight(),i*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(t=!1){const e=this.getHeight(),n=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[t,i,r,s,o,a,l,c]=this.fileDirectory.ModelTransformation,u=[[0,0],[0,e],[n,0],[n,e]],h=u.map((([e,n])=>[s+t*e+i*n,c+o*e+a*n])),A=h.map((t=>t[0])),d=h.map((t=>t[1]));return[Math.min(...A),Math.min(...d),Math.max(...A),Math.max(...d)]}{const t=this.getOrigin(),i=this.getResolution(),r=t[0],s=t[1],o=r+i[0]*n,a=s+i[1]*e;return[Math.min(r,o),Math.min(s,a),Math.max(r,o),Math.max(s,a)]}}}var wF=yF;class _F{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const n=this.getUint32(t,e),i=this.getUint32(t+4,e);let r;if(e){if(r=n+2**32*i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*n+i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}getInt64(t,e){let n=0;const i=(128&this._dataView.getUint8(t+(e?7:0)))>0;let r=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(t+(e?s:7-s));i&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),n+=o*256**s}return i&&(n=-n),n}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return $I(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class bF{constructor(t,e,n,i){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=n,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),n=this.readUint32(t+4);let i;if(this._littleEndian){if(i=e+2**32*n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*e+n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let e=0;const n=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0;let i=!0;for(let r=0;r<8;r++){let s=this._dataView.getUint8(t+(this._littleEndian?r:7-r));n&&(i?0!==s&&(s=255&~(s-1),i=!1):s=255&~s),e+=s*256**r}return n&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const xF="\r\n\r\n";function EF(t){if("undefined"!==typeof Object.fromEntries)return Object.fromEntries(t);const e={};for(const[n,i]of t)e[n.toLowerCase()]=i;return e}function CF(t){const e=t.split("\r\n").map((t=>{const e=t.split(":").map((t=>t.trim()));return e[0]=e[0].toLowerCase(),e}));return EF(e)}function SF(t){const[e,...n]=t.split(";").map((t=>t.trim())),i=n.map((t=>t.split("=")));return{type:e,params:EF(i)}}function BF(t){let e,n,i;return t&&([,e,n,i]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),n=parseInt(n,10),i=parseInt(i,10)),{start:e,end:n,total:i}}function TF(t,e){let n=null;const i=new TextDecoder("ascii"),r=[],s=`--${e}`,o=`${s}--`;for(let a=0;a<10;++a){const e=i.decode(new Uint8Array(t,a,s.length));e===s&&(n=a)}if(null===n)throw new Error("Could not find initial boundary");while(n<t.byteLength){const e=i.decode(new Uint8Array(t,n,Math.min(s.length+1024,t.byteLength-n)));if(0===e.length||e.startsWith(o))break;if(!e.startsWith(s))throw new Error("Part does not start with boundary");const a=e.substr(s.length+2);if(0===a.length)break;const l=a.indexOf(xF),c=CF(a.substr(0,l)),{start:u,end:h,total:A}=BF(c["content-range"]),d=n+s.length+l+xF.length,f=parseInt(h,10)+1-parseInt(u,10);r.push({headers:c,data:t.slice(d,d+f),offset:u,length:f,fileSize:A}),n=d+f+4}return r}class IF{async fetch(t,e=void 0){return Promise.all(t.map((t=>this.fetchSlice(t,e))))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class FF extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"===typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if("function"===typeof this.onEviction)for(const[e,n]of t)this.onEviction(e,n.value)}_deleteIfExpired(t,e){return"number"===typeof e.expiry&&e.expiry<=Date.now()&&("function"===typeof this.onEviction&&this.onEviction(t,e.value),this.delete(t))}_getOrDeleteIfExpired(t,e){const n=this._deleteIfExpired(t,e);if(!1===n)return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const n=e.get(t);return this._getItemValue(t,n)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,n]=t;if(!this.cache.has(e)){const i=this._deleteIfExpired(e,n);!1===i&&(yield t)}}for(const t of this.cache){const[e,n]=t,i=this._deleteIfExpired(e,n);!1===i&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(!1===this._deleteIfExpired(t,e))return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:n=this.maxAge}={}){const i="number"===typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(t)?this.cache.set(t,{value:e,expiry:i}):this._set(t,{value:e,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):!!this.oldCache.has(t)&&!this._deleteIfExpired(t,this.oldCache.get(t))}peek(t){return this.cache.has(t)?this._peek(t,this.cache):this.oldCache.has(t)?this._peek(t,this.oldCache):void 0}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],n=e.length-t;n<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(n>0&&this._emitEvictions(e.slice(0,n)),this.oldCache=new Map(e.slice(n)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,n]=t,i=this._deleteIfExpired(e,n);!1===i&&(yield[e,n.value])}for(const t of this.oldCache){const[e,n]=t;if(!this.cache.has(e)){const t=this._deleteIfExpired(e,n);!1===t&&(yield[e,n.value])}}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const n=t[e],[i,r]=n,s=this._deleteIfExpired(i,r);!1===s&&(yield[i,r.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const n=t[e],[i,r]=n;if(!this.cache.has(i)){const t=this._deleteIfExpired(i,r);!1===t&&(yield[i,r.value])}}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[n,i]of this.entriesAscending())t.call(e,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}async function LF(t){return new Promise((e=>setTimeout(e,t)))}function RF(t,e){const n=Array.isArray(t)?t:Array.from(t),i=Array.isArray(e)?e:Array.from(e);return n.map(((t,e)=>[t,i[e]]))}class MF extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,MF),this.name="AbortError"}}class PF extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const NF=PF;class OF{constructor(t,e,n=null){this.offset=t,this.length=e,this.data=n}get top(){return this.offset+this.length}}class kF{constructor(t,e,n){this.offset=t,this.length=e,this.blockIds=n}}class DF extends IF{constructor(t,{blockSize:e=65536,cacheSize:n=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new FF({maxSize:n,onEviction:(t,e)=>{this.evictedBlocks.set(t,e)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const n=[],i=[],r=[];this.evictedBlocks.clear();for(const{offset:h,length:A}of t){let t=h+A;const{fileSize:e}=this;null!==e&&(t=Math.min(t,e));const s=Math.floor(h/this.blockSize)*this.blockSize;for(let o=s;o<t;o+=this.blockSize){const t=Math.floor(o/this.blockSize);this.blockCache.has(t)||this.blockRequests.has(t)||(this.blockIdsToFetch.add(t),i.push(t)),this.blockRequests.has(t)&&n.push(this.blockRequests.get(t)),r.push(t)}}await LF(),this.fetchBlocks(e);const s=[];for(const h of i)this.blockRequests.has(h)&&s.push(this.blockRequests.get(h));await Promise.allSettled(n),await Promise.allSettled(s);const o=[],a=r.filter((t=>this.abortedBlockIds.has(t)||!this.blockCache.has(t)));if(a.forEach((t=>this.blockIdsToFetch.add(t))),a.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const t of a){const e=this.blockRequests.get(t);if(!e)throw new Error(`Block ${t} is not in the block requests`);o.push(e)}await Promise.allSettled(o)}if(e&&e.aborted)throw new MF("Request was aborted");const l=r.map((t=>this.blockCache.get(t)||this.evictedBlocks.get(t))),c=l.filter((t=>!t));if(c.length)throw new NF(c,"Request failed");const u=new Map(RF(r,l));return this.readSliceData(t,u)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(e,t);for(let i=0;i<e.length;++i){const r=e[i];for(const e of r.blockIds)this.blockRequests.set(e,(async()=>{try{const t=(await n)[i],r=e*this.blockSize,s=r-t.offset,o=Math.min(s+this.blockSize,t.data.byteLength),a=t.data.slice(s,o),l=new OF(r,a.byteLength,a,e);this.blockCache.set(e,l),this.abortedBlockIds.delete(e)}catch(r){if("AbortError"!==r.name)throw r;r.signal=t,this.blockCache.delete(e),this.abortedBlockIds.add(e)}finally{this.blockRequests.delete(e)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort(((t,e)=>t-e));if(0===e.length)return[];let n=[],i=null;const r=[];for(const s of e)null===i||i+1===s?(n.push(s),i=s):(r.push(new kF(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[s],i=s);return r.push(new kF(n[0]*this.blockSize,n.length*this.blockSize,n)),r}readSliceData(t,e){return t.map((t=>{let n=t.offset+t.length;null!==this.fileSize&&(n=Math.min(this.fileSize,n));const i=Math.floor(t.offset/this.blockSize),r=Math.floor(n/this.blockSize),s=new ArrayBuffer(t.length),o=new Uint8Array(s);for(let a=i;a<=r;++a){const i=e.get(a),r=i.offset-t.offset,s=i.top-n;let l,c=0,u=0;r<0?c=-r:r>0&&(u=r),l=s<0?i.length-c:n-i.offset-c;const h=new Uint8Array(i.data,c,l);o.set(h,u)}return s}))}}class UF{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class QF{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class GF extends UF{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){const t=this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer;return t}}class HF extends QF{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const n=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e});return new GF(n)}}class VF extends UF{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class jF extends QF{constructRequest(t,e){return new Promise(((n,i)=>{const r=new XMLHttpRequest;r.open("GET",this.url),r.responseType="arraybuffer";for(const[e,s]of Object.entries(t))r.setRequestHeader(e,s);r.onload=()=>{const t=r.response;n(new VF(r,t))},r.onerror=i,r.onabort=()=>i(new MF("Request aborted")),r.send(),e&&(e.aborted&&r.abort(),e.addEventListener("abort",(()=>r.abort())))}))}async request({headers:t,signal:e}={}){const n=await this.constructRequest(t,e);return n}}var WF=n(8625),zF=n(6504),KF=n(6580);class qF extends UF{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){const t=await this.dataPromise;return t}}class $F extends QF{constructor(t){super(t),this.parsedUrl=KF.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?WF:zF}constructRequest(t,e){return new Promise(((n,i)=>{const r=this.httpApi.get({...this.parsedUrl,headers:t},(t=>{const e=new Promise((e=>{const n=[];t.on("data",(t=>{n.push(t)})),t.on("end",(()=>{const t=Buffer.concat(n).buffer;e(t)})),t.on("error",i)}));n(new qF(t,e))}));r.on("error",i),e&&(e.aborted&&r.destroy(new MF("Request aborted")),e.addEventListener("abort",(()=>r.destroy(new MF("Request aborted")))))}))}async request({headers:t,signal:e}={}){const n=await this.constructRequest(t,e);return n}}class XF extends IF{constructor(t,e,n,i){super(),this.client=t,this.headers=e,this.maxRanges=n,this.allowFullFile=i,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length,Promise.all(t.map((t=>this.fetchSlice(t,e)))))}async fetchSlices(t,e){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map((({offset:t,length:e})=>`${t}-${t+e}`)).join(",")}`},signal:e});if(n.ok){if(206===n.status){const{type:i,params:r}=SF(n.getHeader("content-type"));if("multipart/byteranges"===i){const t=TF(await n.getData(),r.boundary);return this._fileSize=t[0].fileSize||null,t}const s=await n.getData(),{start:o,end:a,total:l}=BF(n.getHeader("content-range"));this._fileSize=l||null;const c=[{data:s,offset:o,length:a-o}];if(t.length>1){const n=await Promise.all(t.slice(1).map((t=>this.fetchSlice(t,e))));return c.concat(n)}return c}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await n.getData();return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:n,length:i}=t,r=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+i}`},signal:e});if(r.ok){if(206===r.status){const t=await r.getData(),{total:e}=BF(r.getHeader("content-range"));return this._fileSize=e||null,{data:t,offset:n,length:i}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await r.getData();return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function YF(t,{blockSize:e,cacheSize:n}){return null===e?t:new DF(t,{blockSize:e,cacheSize:n})}function ZF(t,{headers:e={},credentials:n,maxRanges:i=0,allowFullFile:r=!1,...s}={}){const o=new HF(t,n),a=new XF(o,e,i,r);return YF(a,s)}function JF(t,{headers:e={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const s=new jF(t),o=new XF(s,e,n,i);return YF(o,r)}function tL(t,{headers:e={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const s=new $F(t),o=new XF(s,e,n,i);return YF(o,r)}function eL(t,{forceXHR:e=!1,...n}={}){return"function"!==typeof fetch||e?"undefined"!==typeof XMLHttpRequest?JF(t,n):tL(t,n):ZF(t,n)}class nL extends IF{constructor(t){super(),this.file=t}async fetchSlice(t,e){return new Promise(((n,i)=>{const r=this.file.slice(t.offset,t.offset+t.length),s=new FileReader;s.onload=t=>n(t.target.result),s.onerror=i,s.onabort=i,s.readAsArrayBuffer(r),e&&e.addEventListener("abort",(()=>s.abort()))}))}}function iL(t){return new nL(t)}function rL(t){switch(t){case ST.s$.BYTE:case ST.s$.ASCII:case ST.s$.SBYTE:case ST.s$.UNDEFINED:return 1;case ST.s$.SHORT:case ST.s$.SSHORT:return 2;case ST.s$.LONG:case ST.s$.SLONG:case ST.s$.FLOAT:case ST.s$.IFD:return 4;case ST.s$.RATIONAL:case ST.s$.SRATIONAL:case ST.s$.DOUBLE:case ST.s$.LONG8:case ST.s$.SLONG8:case ST.s$.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${t}`)}}function sL(t){const e=t.GeoKeyDirectory;if(!e)return null;const n={};for(let i=4;i<=4*e[3];i+=4){const r=ST.Hm[e[i]],s=e[i+1]?ST.$[e[i+1]]:null,o=e[i+2],a=e[i+3];let l=null;if(s){if(l=t[s],"undefined"===typeof l||null===l)throw new Error(`Could not get value of geoKey '${r}'.`);"string"===typeof l?l=l.substring(a,a+o-1):l.subarray&&(l=l.subarray(a,a+o),1===o&&(l=l[0]))}else l=a;n[r]=l}return n}function oL(t,e,n,i){let r=null,s=null;const o=rL(e);switch(e){case ST.s$.BYTE:case ST.s$.ASCII:case ST.s$.UNDEFINED:r=new Uint8Array(n),s=t.readUint8;break;case ST.s$.SBYTE:r=new Int8Array(n),s=t.readInt8;break;case ST.s$.SHORT:r=new Uint16Array(n),s=t.readUint16;break;case ST.s$.SSHORT:r=new Int16Array(n),s=t.readInt16;break;case ST.s$.LONG:case ST.s$.IFD:r=new Uint32Array(n),s=t.readUint32;break;case ST.s$.SLONG:r=new Int32Array(n),s=t.readInt32;break;case ST.s$.LONG8:case ST.s$.IFD8:r=new Array(n),s=t.readUint64;break;case ST.s$.SLONG8:r=new Array(n),s=t.readInt64;break;case ST.s$.RATIONAL:r=new Uint32Array(2*n),s=t.readUint32;break;case ST.s$.SRATIONAL:r=new Int32Array(2*n),s=t.readInt32;break;case ST.s$.FLOAT:r=new Float32Array(n),s=t.readFloat32;break;case ST.s$.DOUBLE:r=new Float64Array(n),s=t.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e!==ST.s$.RATIONAL&&e!==ST.s$.SRATIONAL)for(let a=0;a<n;++a)r[a]=s.call(t,i+a*o);else for(let a=0;a<n;a+=2)r[a]=s.call(t,i+a*o),r[a+1]=s.call(t,i+(a*o+4));return e===ST.s$.ASCII?new TextDecoder("utf-8").decode(r):r}class aL{constructor(t,e,n){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=n}}class lL extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class cL{async readRasters(t={}){const{window:e,width:n,height:i}=t;let{resX:r,resY:s,bbox:o}=t;const a=await this.getImage();let l=a;const c=await this.getImageCount(),u=a.getBoundingBox();if(e&&o)throw new Error('Both "bbox" and "window" passed.');if(n||i){if(e){const[t,n]=a.getOrigin(),[i,r]=a.getResolution();o=[t+e[0]*i,n+e[1]*r,t+e[2]*i,n+e[3]*r]}const t=o||u;if(n){if(r)throw new Error("Both width and resX passed");r=(t[2]-t[0])/n}if(i){if(s)throw new Error("Both width and resY passed");s=(t[3]-t[1])/i}}if(r||s){const t=[];for(let e=0;e<c;++e){const n=await this.getImage(e),{SubfileType:i,NewSubfileType:r}=n.fileDirectory;(0===e||2===i||1&r)&&t.push(n)}t.sort(((t,e)=>t.getWidth()-e.getWidth()));for(let e=0;e<t.length;++e){const n=t[e],i=(u[2]-u[0])/n.getWidth(),o=(u[3]-u[1])/n.getHeight();if(l=n,r&&r>i||s&&s>o)break}}let h=e;if(o){const[t,e]=a.getOrigin(),[n,i]=l.getResolution(a);h=[Math.round((o[0]-t)/n),Math.round((o[1]-e)/i),Math.round((o[2]-t)/n),Math.round((o[3]-e)/i)],h=[Math.min(h[0],h[2]),Math.min(h[1],h[3]),Math.max(h[0],h[2]),Math.max(h[1],h[3])]}return l.readRasters({...t,window:h})}}class uL extends cL{constructor(t,e,n,i,r={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=n,this.firstIFDOffset=i,this.cache=r.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const n=this.bigTiff?4048:1024;return new bF((await this.source.fetch([{offset:t,length:"undefined"!==typeof e?e:n}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,n=this.bigTiff?8:2;let i=await this.getSlice(t);const r=this.bigTiff?i.readUint64(t):i.readUint16(t),s=r*e+(this.bigTiff?16:6);i.covers(t,s)||(i=await this.getSlice(t,s));const o={};let a=t+(this.bigTiff?8:2);for(let u=0;u<r;a+=e,++u){const t=i.readUint16(a),e=i.readUint16(a+2),n=this.bigTiff?i.readUint64(a+4):i.readUint32(a+4);let r,s;const l=rL(e),c=a+(this.bigTiff?12:8);if(l*n<=(this.bigTiff?8:4))r=oL(i,e,n,c);else{const t=i.readOffset(c),s=rL(e)*n;if(i.covers(t,s))r=oL(i,e,n,t);else{const i=await this.getSlice(t,s);r=oL(i,e,n,t)}}s=1===n&&-1===ST.NZ.indexOf(t)&&e!==ST.s$.RATIONAL&&e!==ST.s$.SRATIONAL?r[0]:r,o[ST.$[t]]=s}const l=sL(o),c=i.readOffset(t+n+e*r);return new aL(o,l,c)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(Rdt){if(Rdt instanceof lL)throw new lL(t);throw Rdt}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(0===e.nextIFDByteOffset)throw new lL(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new wF(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;while(e)try{await this.requestIFD(t),++t}catch(Rdt){if(!(Rdt instanceof lL))throw Rdt;e=!1}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=",n=e.length+100;let i=await this.getSlice(t,n);if(e===oL(i,ST.s$.ASCII,e.length,t)){const e=oL(i,ST.s$.ASCII,n,t),r=e.split("\n")[0],s=Number(r.split("=")[1].split(" ")[0])+r.length;s>n&&(i=await this.getSlice(t,s));const o=oL(i,ST.s$.ASCII,s,t);this.ghostValues={},o.split("\n").filter((t=>t.length>0)).map((t=>t.split("="))).forEach((([t,e])=>{this.ghostValues[t]=e}))}return this.ghostValues}static async fromSource(t,e,n){const i=(await t.fetch([{offset:0,length:1024}],n))[0],r=new _F(i),s=r.getUint16(0,0);let o;if(18761===s)o=!0;else{if(19789!==s)throw new TypeError("Invalid byte order value.");o=!1}const a=r.getUint16(2,o);let l;if(42===a)l=!1;else{if(43!==a)throw new TypeError("Invalid magic number.");{l=!0;const t=r.getUint16(4,o);if(8!==t)throw new Error("Unsupported offset byte-size.")}}const c=l?r.getUint64(8,o):r.getUint32(4,o);return new uL(t,o,l,c,e)}close(){return"function"===typeof this.source.close&&this.source.close()}}class hL extends cL{constructor(t,e){super(),this.mainFile=t,this.overviewFiles=e,this.imageFiles=[t].concat(e),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((t=>t.parseFileDirectoryAt(t.firstIFDOffset))));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let e=0,n=0;for(let i=0;i<this.imageFiles.length;i++){const r=this.imageFiles[i];for(let s=0;s<this.imageCounts[i];s++){if(t===e){const t=await r.requestIFD(n);return new wF(t.fileDirectory,t.geoKeyDirectory,r.dataView,r.littleEndian,r.cache,r.source)}e++,n++}n=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((t=>t.getImageCount())));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce(((t,e)=>t+e),0),this.imageCount}}async function AL(t,e={},n){return uL.fromSource(eL(t,e),n)}async function dL(t,e){return uL.fromSource(iL(t),e)}async function fL(t,e=[],n={},i){const r=await uL.fromSource(eL(t,n),i),s=await Promise.all(e.map((t=>uL.fromSource(eL(t,n)))));return new hL(r,s)}function pL(t){const e=t.fileDirectory,n=e.NewSubfileType||0;return 4===(4&n)}function gL(t,e){if(!t)return!1;if(!0===t)return!0;if(3!==e.getSamplesPerPixel())return!1;const n=e.fileDirectory.PhotometricInterpretation,i=ST.ub;return n===i.CMYK||n===i.YCbCr||n===i.CIELab||n===i.ICCLab}const mL="STATISTICS_MAXIMUM",vL="STATISTICS_MINIMUM",yL=256;let wL;function _L(){return wL||(wL=new RT),wL}function bL(t){try{return t.getBoundingBox()}catch(IR){return[0,0,t.getWidth(),t.getHeight()]}}function xL(t){try{return t.getOrigin().slice(0,2)}catch(IR){return[0,t.getHeight()]}}function EL(t,e){try{return t.getResolution(e)}catch(IR){return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function CL(t){const e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let n=gn(t);if(!n){const i=ce(e.ProjLinearUnitsGeoKey);i&&(n=new Ae({code:t,units:i}))}return n}if(e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey){const t="EPSG:"+e.GeographicTypeGeoKey;let n=gn(t);if(!n){const i=ce(e.GeogAngularUnitsGeoKey);i&&(n=new Ae({code:t,units:i}))}return n}return null}function SL(t){return t.getImageCount().then((function(e){const n=new Array(e);for(let i=0;i<e;++i)n[i]=t.getImage(i);return Promise.all(n)}))}function BL(t,e){let n;return n=t.blob?dL(t.blob):t.overviews?fL(t.url,t.overviews,e):AL(t.url,e),n.then(SL)}function TL(t,e,n,i,r){if(Array.isArray(t)){const s=t.length;if(!Array.isArray(e)||s!=e.length){const t=new Error(i);throw r(t),t}for(let o=0;o<s;++o)TL(t[o],e[o],n,i,r)}else if(Math.abs(t-e)>n*t)throw new Error(i)}function IL(t){return t instanceof Int8Array?-128:t instanceof Int16Array?-32768:t instanceof Int32Array?-2147483648:t instanceof Float32Array?12e-39:0}function FL(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class LL extends CT{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,opaque:t.opaque,transition:t.transition,interpolate:!1!==t.interpolate,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const e=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=!1!==t.normalize,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map((t=>t.url)).join(","));const n=this,i=new Array(e);for(let r=0;r<e;++r)i[r]=BL(this.sourceInfo_[r],this.sourceOptions_);Promise.all(i).then((function(t){n.configure_(t)})).catch((function(t){cn(t),n.error_=t,n.setState("error")}))}getError(){return this.error_}determineProjection(t){const e=t[0];for(let n=e.length-1;n>=0;--n){const t=e[n],i=CL(t);if(i){this.projection=i;break}}}configure_(t){let e,n,i,r,s;const o=new Array(t.length),a=new Array(t.length),l=new Array(t.length);let c=0;const u=t.length;for(let f=0;f<u;++f){const u=[],h=[];t[f].forEach((t=>{pL(t)?h.push(t):u.push(t)}));const A=u.length;if(h.length>0&&h.length!==A)throw new Error(`Expected one mask per image found ${h.length} masks and ${A} images`);let d,p;const g=new Array(A),m=new Array(A),v=new Array(A);a[f]=new Array(A),l[f]=new Array(A);for(let t=0;t<A;++t){const e=u[t],n=e.getGDALNoData();l[f][t]=e.getGDALMetadata(0),a[f][t]=n;const i=this.sourceInfo_[f].bands;o[f]=i?i.length:e.getSamplesPerPixel();const r=A-(t+1);d||(d=bL(e)),p||(p=xL(e));const s=EL(e,u[0]);v[r]=s[0];const c=[e.getTileWidth(),e.getTileHeight()];c[0]!==c[1]&&c[1]<yL&&(c[0]=yL,c[1]=yL),g[r]=c;const h=s[0]/Math.abs(s[1]);m[r]=[c[0],c[1]/h]}if(e?qt(e,d,e):e=d,n){const t=`Origin mismatch for source ${f}, got [${p}] but expected [${n}]`;TL(n,p,0,t,this.viewRejector)}else n=p;if(s){s.length-c>v.length&&(c=s.length-v.length);const t=s[s.length-1]/v[v.length-1];this.resolutionFactors_[f]=t;const e=v.map((e=>e*t)),n=`Resolution mismatch for source ${f}, got [${e}] but expected [${s}]`;TL(s.slice(c,s.length),e,.02,n,this.viewRejector)}else s=v,this.resolutionFactors_[f]=1;i?TL(i.slice(c,i.length),m,.01,`Tile size mismatch for source ${f}`,this.viewRejector):i=m,r?TL(r.slice(c,r.length),g,0,`Tile size mismatch for source ${f}`,this.viewRejector):r=g,this.sourceImagery_[f]=u.reverse(),this.sourceMasks_[f]=h.reverse()}for(let f=0,p=this.sourceImagery_.length;f<p;++f){const t=this.sourceImagery_[f];while(t.length<s.length)t.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.samplesPerPixel_=o,this.nodataValues_=a,this.metadata_=l;t:for(let f=0;f<u;++f){if(void 0!==this.sourceInfo_[f].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[f].length){this.addAlpha_=!0;break}const t=a[f],e=this.sourceInfo_[f].bands;if(e){for(let n=0;n<e.length;++n)if(null!==t[e[n]-1]){this.addAlpha_=!0;break t}}else for(let n=0;n<t.length;++n)if(null!==t[n]){this.addAlpha_=!0;break t}}let h=this.addAlpha_?1:0;for(let f=0;f<u;++f)h+=o[f];this.bandCount=h;const A=new uB({extent:e,minZoom:c,origin:n,resolutions:s,tileSizes:i});this.tileGrid=A,this.setTileSizes(r),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");const d=1;2===s.length?s=[s[0],s[1],s[1]/2]:1===s.length&&(s=[2*s[0],s[0],s[0]/2]),this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:Fn(Gt(e),this.projection),extent:Rn(e,this.projection),zoom:d})}loadTile_(t,e,n){const i=this.getTileSize(t),r=this.sourceImagery_.length,s=new Array(2*r),o=this.nodataValues_,a=this.sourceInfo_,l=_L();for(let c=0;c<r;++c){const u=a[c],h=this.resolutionFactors_[c],A=[Math.round(e*(i[0]*h)),Math.round(n*(i[1]*h)),Math.round((e+1)*(i[0]*h)),Math.round((n+1)*(i[1]*h))],d=this.sourceImagery_[c][t];let f,p;u.bands&&(f=u.bands.map((function(t){return t-1}))),p="nodata"in u&&null!==u.nodata?u.nodata:f?f.map((function(t){return o[c][t]})):o[c];const g={window:A,width:i[0],height:i[1],samples:f,fillValue:p,pool:l,interleave:!1};gL(this.convertToRGB_,d)?s[c]=d.readRGB(g):s[c]=d.readRasters(g);const m=r+c,v=this.sourceMasks_[c][t];v?s[m]=v.readRasters({window:A,width:i[0],height:i[1],samples:[0],pool:l,interleave:!1}):s[m]=Promise.resolve(null)}return Promise.all(s).then(this.composeTile_.bind(this,i)).catch((function(t){throw cn(t),t}))}composeTile_(t,e){const n=this.metadata_,i=this.sourceInfo_,r=this.sourceImagery_.length,s=this.bandCount,o=this.samplesPerPixel_,a=this.nodataValues_,l=this.normalize_,c=this.addAlpha_,u=t[0]*t[1],h=u*s;let A;A=l?new Uint8Array(h):new Float32Array(h);let d=0;for(let f=0;f<u;++f){let t=c;for(let s=0;s<r;++s){const u=i[s];let h,p,g=u.min,m=u.max;if(l){const t=n[s][0];void 0===g&&(g=t&&vL in t?parseFloat(t[vL]):IL(e[s][0])),void 0===m&&(m=t&&mL in t?parseFloat(t[mL]):FL(e[s][0])),h=255/(m-g),p=-g*h}for(let n=0;n<o[s];++n){const i=e[s][n][f];let r;if(r=l?Me(h*i+p,0,255):i,c){let e=u.nodata;if(void 0===e){let t;t=u.bands?u.bands[n]-1:n,e=a[s][t]}const o=isNaN(e);(!o&&i!==e||o&&!isNaN(i))&&(t=!1,A[d]=r)}else A[d]=r;d++}if(!t){const n=r+s,i=e[n];i&&!i[0][f]&&(t=!0)}}c&&(t||(A[d]=255),d++)}return A}}LL.prototype.getView;var RL=LL;function ML(t,e,n,i){const r=document.createElement("script"),s="olc_"+G(e);function o(){delete window[s],r.parentNode.removeChild(r)}r.async=!0,r.src=t+(t.includes("?")?"&":"?")+(i||"callback")+"="+s;const a=setTimeout((function(){o(),n&&n()}),1e4);window[s]=function(t){clearTimeout(a),o(),e(t)},document.head.appendChild(r)}Error;Error;class PL extends IB{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:gn("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)ML(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(n){return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=gn("EPSG:4326"),n=this.getProjection();let i;if(void 0!==t["bounds"]){const r=En(e,n);i=se(t["bounds"],r)}const r=mB(n),s=t["minzoom"]||0,o=t["maxzoom"]||22,a=fB({extent:r,maxZoom:o,minZoom:s,tileSize:this.tileSize_});if(this.tileGrid=a,this.tileUrlFunction=bB(t["tiles"],a),t["attribution"]&&!this.getAttributions()){const e=void 0!==i?i:r;this.setAttributions((function(n){return te(e,n.extent)?[t["attribution"]]:null}))}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}var NL=PL;class OL extends IB{constructor(t){t=t||{};const e=Object.assign({},t.params),n=!("TRANSPARENT"in e)||e["TRANSPARENT"];super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!n,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=bt(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,n,i){const r=gn(n),s=this.getProjection()||r;let o=this.getTileGrid();o||(o=this.getTileGridForProjection(s));const a=Sn(t,r,s),l=ME(s,r,t,e),c=o.getZForResolution(l,this.zDirection),u=o.getResolution(c),h=o.getTileCoordForCoordAndZ(a,c);if(o.getResolutions().length<=h[0])return;let A=o.getTileCoordExtent(h,this.tmpExtent_);const d=this.gutter_;0!==d&&(A=pt(A,u*d,A));const f={QUERY_LAYERS:this.params_["LAYERS"]};Object.assign(f,YB(this.params_,"GetFeatureInfo"),i);const p=Math.floor((a[0]-A[0])/u),g=Math.floor((A[3]-a[1])/u);return f[this.v13_?"I":"X"]=p,f[this.v13_?"J":"Y"]=g,this.getRequestUrl_(h,A,1,s||r,f)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const n={SERVICE:"WMS",VERSION:KB,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e["LAYER"]){const t=this.params_.LAYERS,e=!Array.isArray(t)||1===t.length;if(!e)return;n["LAYER"]=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,i=28e-5;n["SCALE"]=t*e/i}return Object.assign(n,e),zB(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,n,i,r){const s=this.urls;if(!s)return;let o;if(1==s.length)o=s[0];else{const e=Ue(lC(t),s.length);o=s[e]}return XB(e,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(t[0]),n,i,o,r,this.serverType_)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){const t=this.params_["VERSION"]||KB;this.v13_=Ws(t,"1.3")>=0}tileUrlFunction(t,e,n){let i=this.getTileGrid();if(i||(i=this.getTileGridForProjection(n)),i.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const r=i.getResolution(t[0]);let s=i.getTileCoordExtent(t,this.tmpExtent_);const o=this.gutter_;0!==o&&(s=pt(s,r*o,s));const a=Object.assign({},YB(this.params_,"GetMap"));return this.getRequestUrl_(t,s,e,n,a)}}var kL=OL;class DL extends gE{constructor(t,e,n,i,r,s){super(t,e,s),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=r,this.url_=n,this.key=n}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==ww.IDLE&&(this.setState(ww.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(ww.ERROR)}setFeatures(t){this.features_=t,this.setState(ww.LOADED)}setLoader(t){this.loader_=t}}var UL=DL;const QL=[];class GL extends gE{constructor(t,e,n,i){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.wrappedTileCoord=n}getContext(t){const e=G(t);return e in this.context_||(this.context_[e]=pl(1,1,QL)),this.context_[e]}hasContext(t){return G(t)in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){const e=G(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(const t in this.context_){const e=this.context_[t];vl(e),QL.push(e.canvas),delete this.context_[t]}super.release()}}var HL=GL;class VL extends SB{constructor(t){const e=t.projection||"EPSG:3857",n=t.extent||mB(e),i=t.tileGrid||fB({extent:n,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:i,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:WL,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new sB(this.tileCache.highWaterMark),this.overlaps_=void 0==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:UL,this.tileGrids_={}}getFeaturesInExtent(t){const e=[],n=this.tileCache;if(0===n.getCount())return e;const i=aC(n.peekFirstKey())[0],r=this.tileGrid;return n.forEach((function(n){if(n.tileCoord[0]!==i||n.getState()!==ww.LOADED)return;const s=n.getSourceTiles();for(let i=0,o=s.length;i<o;++i){const n=s[i],o=n.tileCoord;if(te(t,r.getTileCoordExtent(o))){const i=n.getFeatures();if(i)for(let n=0,r=i.length;n<r;++n){const r=i[n],s=r.getGeometry();te(t,s.getExtent())&&e.push(r)}}}})),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){const n=this.getTileCacheForProjection(t),i=Object.keys(e).reduce(((t,e)=>{const i=oC(e),r=n.peek(i);if(r){const e=r.sourceTiles;for(let n=0,i=e.length;n<i;++n)t[e[n].getKey()]=!0}return t}),{});super.expireCache(t,e),this.sourceTileCache.expireCache(i)}getSourceTiles(t,e,n){if(n.getState()===ww.IDLE){n.setState(ww.LOADING);const i=n.wrappedTileCoord,r=this.getTileGridForProjection(e),s=r.getTileCoordExtent(i),o=i[0],a=r.getResolution(o);pt(s,-a,s);const l=this.tileGrid,c=l.getExtent();c&&qt(s,c,s);const u=l.getZForResolution(a,this.zDirection);l.forEachTileCoord(s,u,(i=>{const r=this.tileUrlFunction(i,t,e),s=this.sourceTileCache.containsKey(r)?this.sourceTileCache.get(r):new this.tileClass(i,r?ww.IDLE:ww.EMPTY,r,this.format_,this.tileLoadFunction);n.sourceTiles.push(s);const o=s.getState();if(o<ww.LOADED){const t=e=>{this.handleTileChange(e);const i=s.getState();if(i===ww.LOADED||i===ww.ERROR){const e=s.getKey();e in n.errorTileKeys?s.getState()===ww.LOADED&&delete n.errorTileKeys[e]:n.loadingSourceTiles--,i===ww.ERROR?n.errorTileKeys[e]=!0:s.removeEventListener(R.CHANGE,t),0===n.loadingSourceTiles&&n.setState(I(n.errorTileKeys)?ww.LOADED:ww.ERROR)}};s.addEventListener(R.CHANGE,t),n.loadingSourceTiles++}o===ww.IDLE&&(s.extent=l.getTileCoordExtent(i),s.projection=e,s.resolution=l.getResolution(i[0]),this.sourceTileCache.set(r,s),s.load())})),n.loadingSourceTiles||n.setState(n.sourceTiles.some((t=>t.getState()===ww.ERROR))?ww.ERROR:ww.LOADED)}return n.sourceTiles}getTile(t,e,n,i,r){const s=rC(t,e,n),o=this.getKey();let a;if(this.tileCache.containsKey(s)&&(a=this.tileCache.get(s),a.key===o))return a;const l=[t,e,n];let c=this.getTileCoordForTileUrlFunction(l,r);const u=this.getTileGrid().getExtent(),h=this.getTileGridForProjection(r);if(c&&u){const e=h.getTileCoordExtent(c);pt(e,-h.getResolution(t),e),te(u,e)||(c=null)}let A=!0;if(null!==c){const e=this.tileGrid,n=h.getResolution(t),s=e.getZForResolution(n,1),o=h.getTileCoordExtent(c);pt(o,-n,o),e.forEachTileCoord(o,s,(t=>{A=A&&!this.tileUrlFunction(t,i,r)}))}const d=new HL(l,A?ww.EMPTY:ww.IDLE,c,this.getSourceTiles.bind(this,i,r));return d.key=o,a?(d.interimTile=a,d.refreshInterimChain(),this.tileCache.replace(s,d)):this.tileCache.set(s,d),d}getTileGridForProjection(t){const e=t.getCode();let n=this.tileGrids_[e];if(!n){const t=this.tileGrid,i=t.getResolutions().slice(),r=i.map((function(e,n){return t.getOrigin(n)})),s=i.map((function(e,n){return t.getTileSize(n)})),o=Hm+1;for(let e=i.length;e<o;++e)i.push(i[e-1]/2),r.push(r[e-1]),s.push(s[e-1]);n=new uB({extent:t.getExtent(),origins:r,resolutions:i,tileSizes:s}),this.tileGrids_[e]=n}return n}getTilePixelRatio(t){return t}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=Gl(i.getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(2*t,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}}var jL=VL;function WL(t,e){t.setLoader((function(n,i,r){R_(e,t.getFormat(),n,i,r,t.onLoad.bind(t),t.onError.bind(t))}))}const zL=["fullscreenchange","webkitfullscreenchange","MSFullscreenChange"],KL={ENTERFULLSCREEN:"enterfullscreen",LEAVEFULLSCREEN:"leavefullscreen"};class qL extends Cw{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=void 0!==t.label?t.label:"";this.labelNode_="string"===typeof e?document.createTextNode(e):e;const n=void 0!==t.labelActive?t.labelActive:"";this.labelActiveNode_="string"===typeof n?document.createTextNode(n):n;const i=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=i,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(R.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${Jl} ${ec}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if($L(e))if(XL(e))JL(e);else{let n;n=this.source_?"string"===typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?ZL(n):YL(n)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=XL(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?(_l(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(KL.ENTERFULLSCREEN)):(_l(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(KL.LEAVEFULLSCREEN)),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener(gw.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(gw.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let n=0,i=t.length;n<i;++n)N(t[n]);t.length=0;const e=this.getMap();if(e){const n=e.getOwnerDocument();$L(n)?this.element.classList.remove(tc):this.element.classList.add(tc);for(let e=0,i=zL.length;e<i;++e)t.push(M(n,zL[e],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function $L(t){const e=t.body;return!!(e["webkitRequestFullscreen"]||e.requestFullscreen&&t.fullscreenEnabled)}function XL(t){return!(!t["webkitIsFullScreen"]&&!t.fullscreenElement)}function YL(t){t.requestFullscreen?t.requestFullscreen():t["webkitRequestFullscreen"]&&t["webkitRequestFullscreen"]()}function ZL(t){t["webkitRequestFullscreen"]?t["webkitRequestFullscreen"]():YL(t)}function JL(t){t.exitFullscreen?t.exitFullscreen():t["webkitExitFullscreen"]&&t["webkitExitFullscreen"]()}var tR=qL;const eR="projection",nR="coordinateFormat";class iR extends Cw{constructor(t){t=t||{};const e=document.createElement("div");e.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(eR,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=void 0!==t.placeholder,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==t.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(nR)}getProjection(){return this.get(eR)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push(M(e,Aw.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push(M(e,Aw.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(nR,t)}setProjection(t){this.set(eR,gn(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const t=this.getProjection();this.transform_=t?En(this.mapProjection_,t):dn}const n=this.getMap(),i=n.getCoordinateFromPixelInternal(t);if(i){const t=In();if(t&&(this.transform_=En(this.mapProjection_,t)),this.transform_(i,i),this.wrapX_){const e=t||this.getProjection()||this.mapProjection_;tn(i,e)}const n=this.getCoordinateFormat();e=n?n(i):i.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}var rR=iR;const sR="units",oR=[1,2,5],aR=25.4/.28;class lR extends Cw{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const n=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+Jl,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(sR,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(sR)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(sR,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,n=t.projection,i=this.getUnits(),r="degrees"==i?"degrees":"m";let s=mn(n,t.resolution,e,r);const o=this.minWidth_*(this.dpi_||aR)/aR,a=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||aR)/aR:void 0;let l=o*s,c="";if("degrees"==i){const t=ue.degrees;l*=t,l<t/60?(c="",s*=3600):l<t?(c="",s*=60):c=""}else if("imperial"==i)l<.9144?(c="in",s/=.0254):l<1609.344?(c="ft",s/=.3048):(c="mi",s/=1609.344);else if("nautical"==i)s/=1852,c="NM";else if("metric"==i)l<1e-6?(c="nm",s*=1e9):l<.001?(c="m",s*=1e6):l<1?(c="mm",s*=1e3):l<1e3?c="m":(c="km",s/=1e3);else{if("us"!=i)throw new Error("Invalid units");l<.9144?(c="in",s*=39.37):l<1609.344?(c="ft",s/=.30480061):(c="mi",s/=1609.3472)}let u,h,A,d,f,p,g=3*Math.floor(Math.log(o*s)/Math.log(10));while(1){A=Math.floor(g/3);const t=Math.pow(10,A);if(u=oR[(g%3+3)%3]*t,h=Math.round(u/s),isNaN(h))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==a&&h>=a){u=d,h=f,A=p;break}if(h>=o)break;d=u,f=h,p=A,++g}const m=this.scaleBar_?this.createScaleBar(h,u,c):u.toFixed(A<0?-A:0)+" "+c;this.renderedHTML_!=m&&(this.innerElement_.innerHTML=m,this.renderedHTML_=m),this.renderedWidth_!=h&&(this.innerElement_.style.width=h+"px",this.renderedWidth_=h),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,n){const i=this.getScaleForResolution(),r=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),s=this.scaleBarSteps_,o=t/s,a=[this.createMarker("absolute")];for(let c=0;c<s;++c){const i=c%2===0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${i}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(c%2===0||2===s?this.createStepText(c,t,!1,e,n):"")+"</div>")}a.push(this.createStepText(s,t,!0,e,n));const l=this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"";return l+a.join("")}createMarker(t){const e="absolute"===t?3:-10;return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${e}px;"></div>`}createStepText(t,e,n,i,r){const s=0===t?0:Math.round(i/this.scaleBarSteps_*t*100)/100,o=s+(0===t?"":" "+r),a=0===t?-3:e/this.scaleBarSteps_*-1,l=0===t?0:e/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${a}px;text-align: ${0===t?"left":"center"};min-width: ${l}px;left: ${n?e+"px":"unset"};">`+o+"</div>"}getScaleForResolution(){const t=mn(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m"),e=this.dpi_||aR,n=1e3/25.4;return t*n*e}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}}var cR=lR,uR=class extends Cw{constructor(t){t=t||{};var e=document.createElement("DIV");if(e.classList.add("ol-unselectable","ol-control","ol-bar"),t.className){var n=t.className.split(" ").filter((function(t){return t.length>0}));e.classList.add.apply(e.classList,n)}if(t.group&&e.classList.add("ol-group"),super({element:e,target:t.target}),this.set("toggleOne",t.toggleOne),this.set("autoDeactivate",t.autoDeactivate),this.controls_=[],t.controls instanceof Array)for(var i=0;i<t.controls.length;i++)this.addControl(t.controls[i])}setVisible(t){this.element.style.display=t?"":"none"}getVisible(){return"none"!=this.element.style.display}setMap(t){super.setMap(t);for(var e=0;e<this.controls_.length;e++){var n=this.controls_[e];n.setMap(t)}}getControls(){return this.controls_}setPosition(t){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),t=t.split("-");for(var e=0;e<t.length;e++)switch(t[e]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+t[e]);break;default:break}}addControl(t){this.controls_.push(t),t.setTarget(this.element),this.getMap()&&this.getMap().addControl(t),t._activateBar&&t.un("change:active",t._activateBar),t._activateBar=function(e){this.onActivateControl_(e,t)}.bind(this),t.on("change:active",t._activateBar),t.getActive&&this.onActivateControl_({target:t,active:t.getActive()},t)}removeControl(t){const e=this.controls_.indexOf(t);e>-1&&(this.controls_.splice(e,1),this.getMap()&&this.getMap().removeControl(t),t._activateBar&&t.un("change:active",t._activateBar),delete t._activateBar)}deactivateControls(t){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==t&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)}getActiveControls(){for(var t,e=[],n=0;t=this.controls_[n];n++)t.getActive&&t.getActive()&&e.push(t);return e}setActive(t){if(!t&&this.get("autoDeactivate")&&this.deactivateControls(),t)for(var e,n=this.getControls(),i=0;e=n[i];i++)e.get("autoActivate")&&e.setActive(!0)}onActivateControl_(t,e){if(this.get("toggleOne"))if(t.active){var n;for(n=0;n<this.controls_.length;n++)if(this.controls_[n]===e)break;if(n==this.controls_.length)return;this.deactivateControls(this.controls_[n])}else if(!this.getActiveControls().length)for(var i,r=0;i=this.controls_[r];r++)if(i.get("autoActivate")){i.setActive(!0);break}t.type?this.dispatchEvent({type:"control:active",control:e,active:t.active}):this.dispatchEvent({type:"control:add",control:e,active:t.active})}getControlsByName(t){var e=this.getControls();return e.filter((function(e){return e.get("name")===t}))}},hR=uR,AR=class extends W{constructor(t){t=t||{},super();var e,n=this.input=t.input;n||(n=this.input=document.createElement("INPUT"),t.type&&n.setAttribute("type",t.type),void 0!==t.min&&n.setAttribute("min",t.min),void 0!==t.max&&n.setAttribute("max",t.max),void 0!==t.step&&n.setAttribute("step",t.step),t.parent&&t.parent.appendChild(n)),t.disabled&&(n.disabled=!0),void 0!==t.checked&&(n.checked=!!t.checked),void 0!==t.val&&(n.value=t.val),t.hidden&&(n.style.display="none"),n.addEventListener("focus",function(){this.element&&this.element.classList.add("ol-focus")}.bind(this)),n.addEventListener("focusout",function(){this.element&&(e&&clearTimeout(e),e=setTimeout(function(){this.element.classList.remove("ol-focus")}.bind(this),0))}.bind(this))}_listenDrag(t,e){var n=function(n){this.moving=!0,this.element.classList.add("ol-moving");var i=function(n){"pointerup"===n.type&&(document.removeEventListener("pointermove",i),document.removeEventListener("pointerup",i),document.removeEventListener("pointercancel",i),setTimeout(function(){this.moving=!1,this.element.classList.remove("ol-moving")}.bind(this))),n.target===t&&e(n),n.stopPropagation(),n.preventDefault()}.bind(this);document.addEventListener("pointermove",i,!1),document.addEventListener("pointerup",i,!1),document.addEventListener("pointercancel",i,!1),n.stopPropagation(),n.preventDefault()}.bind(this);t.addEventListener("mousedown",n,!1),t.addEventListener("touchstart",n,!1)}setValue(t){void 0!==t&&(this.input.value=t),this.input.dispatchEvent(new Event("change"))}getValue(){return this.input.value}getInputElement(){return this.input}},dR=AR,fR=class extends dR{constructor(t){t=t||{},super(t);var e=this.element=document.createElement("LABEL");t.html instanceof Element?e.appendChild(t.html):void 0!==t.html&&(e.innerHTML=t.html),e.className=("ol-ext-check ol-ext-checkbox "+(t.className||"")).trim(),this.input.parentNode&&this.input.parentNode.insertBefore(e,this.input),e.appendChild(this.input),e.appendChild(document.createElement("SPAN")),t.after&&e.appendChild(document.createTextNode(t.after)),this.input.addEventListener("change",function(){this.dispatchEvent({type:"check",checked:this.input.checked,value:this.input.value})}.bind(this))}isChecked(){return this.input.checked}},pR=fR,gR=class extends pR{constructor(t){t=t||{},super(t),this.element.className=("ol-ext-toggle-switch "+(t.className||"")).trim()}},mR=gR,vR=class extends pR{constructor(t){t=t||{},super(t),this.element.className=("ol-ext-check ol-ext-radio "+(t.className||"")).trim()}},yR=vR,wR={create:function(t,e){var n;if(e=e||{},"TEXT"===t)n=document.createTextNode(e.html||""),e.parent&&e.parent.appendChild(n);else for(var i in n=document.createElement(t),/button/i.test(t)&&n.setAttribute("type","button"),e)switch(i){case"className":e.className&&e.className.trim&&n.setAttribute("class",e.className.trim());break;case"text":n.innerText=e.text;break;case"html":e.html instanceof Element?n.appendChild(e.html):void 0!==e.html&&(n.innerHTML=e.html);break;case"parent":e.parent&&e.parent.appendChild(n);break;case"options":if(/select/i.test(t))for(var r in e.options)wR.create("OPTION",{html:r,value:e.options[r],parent:n});break;case"style":wR.setStyle(n,e.style);break;case"change":case"click":wR.addListener(n,i,e[i]);break;case"on":for(var s in e.on)wR.addListener(n,s,e.on[s]);break;case"checked":n.checked=!!e.checked;break;default:n.setAttribute(i,e[i]);break}return n},createSwitch:function(t){var e=wR.create("INPUT",{type:"checkbox",on:t.on,click:t.click,change:t.change,parent:t.parent}),n=Object.assign({input:e},t||{});return new mR(n),e},createCheck:function(t){var e=wR.create("INPUT",{name:t.name,type:"radio"===t.type?"radio":"checkbox",on:t.on,parent:t.parent}),n=Object.assign({input:e},t||{});return"radio"===t.type?new yR(n):new pR(n),e},setHTML:function(t,e){e instanceof Element?t.appendChild(e):void 0!==e&&(t.innerHTML=e)},appendText:function(t,e){t.appendChild(document.createTextNode(e||""))},addListener:function(t,e,n,i){"string"===typeof e&&(e=e.split(" ")),e.forEach((function(e){t.addEventListener(e,n,i)}))},removeListener:function(t,e,n){"string"===typeof e&&(e=e.split(" ")),e.forEach((function(e){t.removeEventListener(e,n)}))},show:function(t){t.style.display=""},hide:function(t){t.style.display="none"},hidden:function(t){return"none"===wR.getStyle(t,"display")},toggle:function(t){t.style.display="none"===t.style.display?"":"none"},setStyle:function(t,e){for(var n in e)switch(n){case"top":case"left":case"bottom":case"right":case"minWidth":case"maxWidth":case"width":case"height":"number"===typeof e[n]?t.style[n]=e[n]+"px":t.style[n]=e[n];break;default:t.style[n]=e[n]}},getStyle:function(t,e){var n,i=(t.ownerDocument||document).defaultView;if(i&&i.getComputedStyle)e=e.replace(/([A-Z])/g,"-$1").toLowerCase(),n=i.getComputedStyle(t,null).getPropertyValue(e);else if(t.currentStyle&&(e=e.replace(/-(\w)/g,(function(t,e){return e.toUpperCase()})),n=t.currentStyle[e],/^\d+(em|pt|%|ex)?$/i.test(n)))return function(e){var n=t.style.left,i=t.runtimeStyle.left;return t.runtimeStyle.left=t.currentStyle.left,t.style.left=e||0,e=t.style.pixelLeft+"px",t.style.left=n,t.runtimeStyle.left=i,e}(n);return/px$/.test(n)?parseInt(n):n},outerHeight:function(t){return t.offsetHeight+wR.getStyle(t,"marginBottom")},outerWidth:function(t){return t.offsetWidth+wR.getStyle(t,"marginLeft")},offsetRect:function(t){var e=t.getBoundingClientRect();return{top:e.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0),left:e.left+(window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),height:e.height||e.bottom-e.top,width:e.width||e.right-e.left}},getFixedOffset:function(t){var e={left:0,top:0},n=function(t){if(!t)return e;if("absolute"===wR.getStyle(t,"position")&&"none"!==wR.getStyle(t,"transform")){var i=t.getBoundingClientRect();return e.left+=i.left,e.top+=i.top,e}return n(t.offsetParent)};return n(t.offsetParent)},positionRect:function(t,e){var n=0,i=0,r=function(s){if(s)return n+=s.offsetLeft,i+=s.offsetTop,r(s.offsetParent);var o={top:t.offsetTop+i,left:t.offsetLeft+n};return e&&(o.top-=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o.left-=window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0),o.bottom=o.top+t.offsetHeight,o.right=o.top+t.offsetWidth,o};return r(t.offsetParent)},scrollDiv:function(t,e){e=e||{};var n,i,r,s,o,a=!1,l=0,c=0,u="function"===typeof e.onmove?e.onmove:function(){},h=e.vertical?"screenY":"screenX",A=e.vertical?"scrollTop":"scrollLeft",d=!1,f=0,p=function(){o&&(f++,setTimeout(g))},g=function(){if(o){if(f--,f)return;var e=t.clientHeight,n=t.scrollHeight;i=e/n,o.style.height=100*i+"%",o.style.top=t.scrollTop/n*100+"%",s.style.height=e+"px",e>n-.5?s.classList.add("ol-100pc"):s.classList.remove("ol-100pc")}},m=function(e){e.target.classList.contains("ol-noscroll")||(d=!1,a=e[h],c=new Date,t.classList.add("ol-move"),e.preventDefault(),window.addEventListener("pointermove",v),wR.addListener(window,["pointerup","pointercancel"],_))},v=function(e){if(!1!==a){var s=(r?-1/i:1)*(a-e[h]);d=d||Math.round(s),t[A]+=s,n=new Date,n-c&&(l=(l+s/(n-c))/2),a=e[h],c=n,s&&u(!0)}else d=!0},y=function(e){var n=e>0?Math.min(100,e/2):Math.max(-100,e/2);e-=n,t[A]+=n,-1<e&&e<1?(d?setTimeout((function(){t.classList.remove("ol-move")})):t.classList.remove("ol-move"),d=!1,u(!1)):setTimeout((function(){y(e)}),40)};if(e.vertical&&e.minibar){var w=function(n){t.removeEventListener("pointermove",w),t.parentNode.classList.add("ol-miniscroll"),o=wR.create("DIV"),s=wR.create("DIV",{className:"ol-scroll",html:o}),t.parentNode.insertBefore(s,t),o.addEventListener("pointerdown",(function(t){r=!0,m(t)})),e.mousewheel&&(wR.addListener(s,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){b(t)})),wR.addListener(o,["mousewheel","DOMMouseScroll","onmousewheel"],(function(t){b(t)}))),t.parentNode.addEventListener("pointerenter",p),window.addEventListener("resize",p),!1!==n&&p()};t.parentNode?w(!1):t.addEventListener("pointermove",w),t.addEventListener("scroll",(function(){p()}))}t.style["touch-action"]="none",t.style["overflow"]="hidden",t.classList.add("ol-scrolldiv"),wR.addListener(t,["pointerdown"],(function(t){r=!1,m(t)})),t.addEventListener("click",(function(e){t.classList.contains("ol-move")&&(e.preventDefault(),e.stopPropagation())}),!0);var _=function(n){c=new Date-c,c>100||r?l=0:c>0&&(l=((l||0)+(a-n[h])/c)/2),y(!1===e.animate?0:200*l),a=!1,l=0,c=0,t.classList.contains("ol-move")?t.classList.remove("ol-hasClick"):(t.classList.add("ol-hasClick"),setTimeout((function(){t.classList.remove("ol-hasClick")}),500)),r=!1,window.removeEventListener("pointermove",v),wR.removeListener(window,["pointerup","pointercancel"],_)},b=function(e){var n=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail));return t.classList.add("ol-move"),t[A]-=30*n,t.classList.remove("ol-move"),!1};return e.mousewheel&&wR.addListener(t,["mousewheel","DOMMouseScroll","onmousewheel"],b),{refresh:p}},dispatchEvent:function(t,e){var n;try{n=new CustomEvent(t)}catch(Rdt){n=document.createEvent("CustomEvent"),n.initCustomEvent(t,!0,!0,{})}e.dispatchEvent(n)}},_R=wR,bR=class extends Cw{constructor(t){t=t||{};var e=document.createElement("div");e.className=(t.className||"")+" ol-button ol-unselectable ol-control",super({element:e,target:t.target});var n=this,i=this.button_=document.createElement(/ol-text-button/.test(t.className)?"div":"button");i.type="button",t.title&&(i.title=t.title),t.name&&(i.name=t.name),t.html instanceof Element?i.appendChild(t.html):i.innerHTML=t.html||"";var r=function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(n,e)};i.addEventListener("click",r),e.appendChild(i),!t.title&&i.firstElementChild&&(i.title=i.firstElementChild.title),t.title&&this.set("title",t.title),t.title&&this.set("title",t.title),t.name&&this.set("name",t.name)}setVisible(t){t?_R.show(this.element):_R.hide(this.element)}setTitle(t){this.button_.setAttribute("title",t)}setHtml(t){_R.setHTML(this.button_,t)}getButtonElement(){return this.button_}},xR=bR,ER=Object.defineProperty,CR=(t,e,n)=>e in t?ER(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,SR=(t,e,n)=>(CR(t,"symbol"!=typeof e?e+"":e,n),n),BR={exports:{}};function TR(){}TR.prototype={on:function(t,e,n){var i=this.e||(this.e={});return(i[t]||(i[t]=[])).push({fn:e,ctx:n}),this},once:function(t,e,n){var i=this;function r(){i.off(t,r),e.apply(n,arguments)}return r._=e,this.on(t,r,n)},emit:function(t){var e=[].slice.call(arguments,1),n=((this.e||(this.e={}))[t]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,e);return this},off:function(t,e){var n=this.e||(this.e={}),i=n[t],r=[];if(i&&e)for(var s=0,o=i.length;s<o;s++)i[s].fn!==e&&i[s].fn._!==e&&r.push(i[s]);return r.length?n[t]=r:delete n[t],this}},BR.exports=TR;var IR=BR.exports.TinyEmitter=TR,FR=(t=>(t.CONTEXTMENU="contextmenu",t.CLICK="click",t.DBLCLICK="dblclick",t))(FR||{}),LR=(t=>(t.BEFOREOPEN="beforeopen",t.OPEN="open",t.CLOSE="close",t.ADD_MENU_ENTRY="add-menu-entry",t))(LR||{});class RR extends hw{constructor(t){super(t.type,t.map,t.originalEvent)}}const MR={width:150,scrollAt:4,eventType:FR.CONTEXTMENU,defaultItems:!0,items:[]},PR="ol-ctx-menu",NR={namespace:PR,container:`${PR}-container`,separator:`${PR}-separator`,submenu:`${PR}-submenu`,hidden:`${PR}-hidden`,icon:`${PR}-icon`,zoomIn:`${PR}-zoom-in`,zoomOut:`${PR}-zoom-out`,unselectable:"ol-unselectable"},OR=[{text:"Zoom In",classname:`${NR.zoomIn} ${NR.icon}`,callback:(t,e)=>{const n=e.getView();n.animate({zoom:Number(n.getZoom())+1,duration:700,center:t.coordinate})}},{text:"Zoom Out",classname:`${NR.zoomOut} ${NR.icon}`,callback:(t,e)=>{const n=e.getView();n.animate({zoom:Number(n.getZoom())-1,duration:700,center:t.coordinate})}}];function kR(t){const e=document.createDocumentFragment(),n=document.createElement("div");for(n.innerHTML=t;n.firstChild;)e.append(n.firstChild);return e}function DR(t){const e=document.importNode(t),n=t.offsetWidth;e.style.cssText=`position: fixed; top: 0; left: 0; overflow: auto; visibility: hidden; pointer-events: none; height: unset; max-height: unset; width: ${n}px`;const i=kR("<span>Foo</span>"),r=kR("<span>Foo</span>"),s=document.createElement("li"),o=document.createElement("li");s.append(i),o.append(r),e.append(s),e.append(o),t.parentNode?.append(e);const a=e.offsetHeight/2;return t.parentNode?.removeChild(e),a}function UR({parentNode:t,item:e,isSubmenu:n=!1,isInsideSubmenu:i=!1,emitter:r}){const s=`_${Math.random().toString(36).slice(2,11)}`;if("string"!=typeof e&&"text"in e){const o=`<span>${e.text}</span>`,a=kR(o),l=document.createElement("li");e.classname=e.classname||"",e.icon&&(""===e.classname?e.classname=NR.icon:!1===e.classname.includes(NR.icon)&&(e.classname+=` ${NR.icon}`),l.setAttribute("style",`background-image:url(${e.icon})`)),l.id=s,l.className=e.classname,l.append(a),t.append(l);const c={id:s,isSubmenu:n,isInsideSubmenu:i,isSeparator:!1,callback:"callback"in e?e.callback:null,data:"data"in e?e.data:null};return r.emit(LR.ADD_MENU_ENTRY,c,l),l}const o=`<li id="${s}" class="${NR.separator}"><hr></li>`,a=kR(o);t.append(a);const l=t.lastChild,c={id:s,isSubmenu:!1,isInsideSubmenu:!1,isSeparator:!0,callback:null,data:null};return r.emit(LR.ADD_MENU_ENTRY,c,l),l}function QR({container:t,items:e,menuWidth:n,isInsideSubmenu:i,emitter:r}){e.forEach((e=>{if("string"!=typeof e&&"items"in e&&Array.isArray(e.items)){const i=UR({parentNode:t,item:e,isSubmenu:!0,emitter:r});i.classList.add(NR.submenu);const s=document.createElement("ul");s.classList.add(NR.container),s.style.width=`${n}px`,i.append(s),QR({emitter:r,menuWidth:n,container:s,items:e.items,isInsideSubmenu:!0})}else UR({parentNode:t,item:e,isSubmenu:!1,isInsideSubmenu:i,emitter:r})}))}function GR(t,e){if(!t)throw new Error(e)}class HR extends Cw{constructor(t={}){GR("object"==typeof t,"@param `opts` should be object type!");const e=document.createElement("div");super({element:e}),SR(this,"map"),SR(this,"emitter",new IR),SR(this,"container"),SR(this,"coordinate",[]),SR(this,"pixel",[]),SR(this,"contextMenuEventListener"),SR(this,"entryCallbackEventListener"),SR(this,"mapMoveListener"),SR(this,"lineHeight",0),SR(this,"disabled"),SR(this,"opened"),SR(this,"items",[]),SR(this,"menuEntries",new Map),SR(this,"options"),this.options={...MR,...t};const n=document.createElement("ul");e.append(n),e.style.width=`${this.options.width}px`,e.classList.add(NR.container,NR.unselectable,NR.hidden),this.container=e,this.contextMenuEventListener=t=>{this.handleContextMenu(t)},this.entryCallbackEventListener=t=>{this.handleEntryCallback(t)},this.mapMoveListener=()=>{this.handleMapMove()},this.disabled=!1,this.opened=!1,window.addEventListener("beforeunload",(()=>{this.removeListeners()}),{once:!0})}clear(){for(const t of this.menuEntries.keys())this.removeMenuEntry(t);this.container.replaceChildren(),this.container.append(document.createElement("ul"))}enable(){this.disabled=!1}disable(){this.disabled=!0}getDefaultItems(){return OR}countItems(){return this.menuEntries.size}extend(t){GR(Array.isArray(t),"@param `items` should be an Array."),QR({items:t,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild})}closeMenu(){this.opened=!1,this.container.classList.add(NR.hidden),this.dispatchEvent(LR.CLOSE)}isOpen(){return this.opened}updatePosition(t){GR(Array.isArray(t),"@param `pixel` should be an Array."),this.isOpen()&&(this.pixel=t,this.positionContainer())}pop(){const t=Array.from(this.menuEntries.keys()).pop();t&&this.removeMenuEntry(t)}shift(){const t=Array.from(this.menuEntries.keys()).shift();t&&this.removeMenuEntry(t)}push(t){t&&this.extend([t])}setMap(t){if(super.setMap(t),t){this.map=t,t.getViewport().addEventListener(this.options.eventType,this.contextMenuEventListener,!1),t.on("movestart",(()=>{this.handleMapMove()})),this.emitter.on(LR.ADD_MENU_ENTRY,((t,e)=>{this.handleAddMenuEntry(t,e)}),this),this.items=this.options.defaultItems?this.options.items.concat(OR):this.options.items,QR({items:this.items,emitter:this.emitter,menuWidth:this.options.width,container:this.container.firstElementChild});const e=this.getMenuEntriesLength();this.lineHeight=e>0?this.container.offsetHeight/e:DR(this.container)}else this.removeListeners(),this.clear()}removeListeners(){this.map.getViewport().removeEventListener(this.options.eventType,this.contextMenuEventListener,!1),this.emitter.off(LR.ADD_MENU_ENTRY)}removeMenuEntry(t){let e=document.getElementById(t);e?.remove(),e=null,this.menuEntries.delete(t)}handleContextMenu(t){this.coordinate=this.map.getEventCoordinate(t),this.pixel=this.map.getEventPixel(t),this.dispatchEvent(new RR({map:this.map,originalEvent:t,type:LR.BEFOREOPEN})),!this.disabled&&(this.options.eventType===FR.CONTEXTMENU&&(t.stopPropagation(),t.preventDefault()),setTimeout((()=>{this.openMenu(t)})),t.target?.addEventListener("pointerdown",(t=>{this.opened&&(t.stopPropagation(),this.closeMenu())}),{once:!0}))}openMenu(t){this.opened=!0,this.positionContainer(),this.container.classList.remove(NR.hidden),this.dispatchEvent(new RR({map:this.map,originalEvent:t,type:LR.OPEN}))}getMenuEntriesLength(){return Array.from(this.menuEntries).filter((([,t])=>!1===t.isSeparator&&!1===t.isSubmenu&&!1===t.isInsideSubmenu)).length}positionContainer(){const t=this.map.getSize()||[0,0],e={w:t[0]-this.pixel[0],h:t[1]-this.pixel[1]},n=this.getMenuEntriesLength(),i={w:this.container.offsetWidth,h:Math.round(this.lineHeight*n)},r=e.w>=i.w?this.pixel[0]+5:this.pixel[0]-i.w;this.container.style.left=`${r}px`,this.container.style.top=e.h>=i.h?this.pixel[1]-10+"px":this.pixel[1]-i.h+"px",this.container.style.right="auto",this.container.style.bottom="auto",e.w-=i.w;const s=t=>Array.from(t.children).filter((t=>"LI"===t.tagName&&t.classList.contains(NR.submenu)));let o=0;const a=(t,n)=>{o+=1,s(t).forEach((t=>{const r=n>=i.w?i.w-8:-1*(i.w+8),l=t.querySelector(`ul.${NR.container}`),c=Math.round(this.lineHeight*Array.from(l.children).filter((t=>"LI"===t.tagName)).length);l.style.left=`${r}px`,l.style.right="auto",l.style.top=e.h>=c+i.h?"0":`-${l.offsetHeight-25}px`,l.style.bottom="auto",l.style.zIndex=String(o),s(l).length>0&&a(l,n-i.w)}))};a(this.container.firstElementChild,e.w)}handleMapMove(){this.closeMenu()}handleEntryCallback(t){t.preventDefault(),t.stopPropagation();const e=t.currentTarget,n=this.menuEntries.get(e.id);if(!n)return;const i={data:n.data,coordinate:this.coordinate};this.closeMenu(),n.callback?.(i,this.map)}handleAddMenuEntry(t,e){this.menuEntries.set(t.id,t),this.positionContainer(),"callback"in t&&"function"==typeof t.callback&&e.addEventListener("click",this.entryCallbackEventListener,!1)}}var VR=class extends Cw{constructor(t){t=t||{};var e=_R.create("DIV",{className:t.switcherClass||"ol-layerswitcher"});super({element:e,target:t.target});var n=this;this.dcount=0,this.show_progress=t.show_progress,this.oninfo="function"==typeof t.oninfo?t.oninfo:null,this.onextent="function"==typeof t.onextent?t.onextent:null,this.hasextent=t.extent||t.onextent,this.hastrash=t.trash,this.reordering=!1!==t.reordering,this._layers=[],this._layerGroup=t.layerGroup&&t.layerGroup.getLayers?t.layerGroup:null,this.onchangeCheck="function"==typeof t.onchangeCheck?t.onchangeCheck:null,"function"===typeof t.displayInLayerSwitcher&&(this.displayInLayerSwitcher=t.displayInLayerSwitcher),t.target||(e.classList.add("ol-unselectable"),e.classList.add("ol-control"),e.classList.add(!1!==t.collapsed?"ol-collapsed":"ol-forceopen"),this.button=_R.create("BUTTON",{type:"button",parent:e}),this.button.addEventListener("touchstart",(function(t){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),n.dispatchEvent({type:"toggle",collapsed:e.classList.contains("ol-collapsed")}),t.preventDefault(),n.overflow()})),this.button.addEventListener("click",(function(){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),n.dispatchEvent({type:"toggle",collapsed:!e.classList.contains("ol-forceopen")}),n.overflow()})),t.mouseover&&(e.addEventListener("mouseleave",(function(){e.classList.add("ol-collapsed"),n.dispatchEvent({type:"toggle",collapsed:!0})})),e.addEventListener("mouseover",(function(){e.classList.remove("ol-collapsed"),n.dispatchEvent({type:"toggle",collapsed:!1})}))),t.minibar&&(t.noScroll=!0),t.noScroll||(this.topv=_R.create("DIV",{className:"ol-switchertopdiv",parent:e,click:function(){n.overflow("+50%")}}),this.botv=_R.create("DIV",{className:"ol-switcherbottomdiv",parent:e,click:function(){n.overflow("-50%")}})),this._noScroll=t.noScroll),this.panel_=_R.create("UL",{className:"panel"}),this.panelContainer_=_R.create("DIV",{className:"panel-container",html:this.panel_,parent:e}),t.target||t.noScroll||_R.addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",(function(t){n.overflow(Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)))&&(t.stopPropagation(),t.preventDefault())})),this.header_=_R.create("LI",{className:"ol-header",parent:this.panel_}),this.set("drawDelay",t.drawDelay||0),this.set("selection",t.selection),t.minibar&&setTimeout(function(){var t=_R.scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],(function(){t.refresh()}))}.bind(this))}displayInLayerSwitcher(t){return!1!==t.get("displayInLayerSwitcher")}setMap(t){if(super.setMap(t),this.drawPanel(),this._listener)for(var e in this._listener)k(this._listener[e]);this._listener=null,t&&(this._listener={moveend:t.on("moveend",this.viewChange.bind(this)),size:t.on("change:size",this.overflow.bind(this))},this._layerGroup?this._listener.change=this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):this._listener.change=t.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))}show(){this.element.classList.add("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!1})}hide(){this.element.classList.remove("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!0})}toggle(){this.element.classList.toggle("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!this.isOpen()})}isOpen(){return this.element.classList.contains("ol-forceopen")}setHeader(t){_R.setHTML(this.header_,t)}overflow(t){if(this.button&&!this._noScroll){if(_R.hidden(this.panel_))return void _R.setStyle(this.element,{height:"auto"});var e=_R.outerHeight(this.element),n=_R.outerHeight(this.panel_),i=this.button.offsetTop+_R.outerHeight(this.button),r=this.panel_.offsetTop-i;if(n>e-i){_R.setStyle(this.element,{height:"100%"});var s=this.panel_.querySelectorAll("li.ol-visible .li-content")[0],o=s?2*_R.getStyle(s,"height"):0;switch(t){case 1:r+=o;break;case-1:r-=o;break;case"+50%":r+=Math.round(e/2);break;case"-50%":r-=Math.round(e/2);break;default:break}return r+n<=e-3*i/2?(r=e-3*i/2-n,_R.hide(this.botv)):_R.show(this.botv),r>=0?(r=0,_R.hide(this.topv)):_R.show(this.topv),_R.setStyle(this.panel_,{top:r+"px"}),!0}return _R.setStyle(this.element,{height:"auto"}),_R.setStyle(this.panel_,{top:0}),_R.hide(this.botv),_R.hide(this.topv),!1}return!1}_setLayerForLI(t,e){var n=[];e.getLayers&&n.push(e.getLayers().on("change:length",this.drawPanel.bind(this))),t&&(n.push(e.on("change:opacity",function(){this.setLayerOpacity(e,t)}.bind(this))),n.push(e.on("change:visible",function(){this.setLayerVisibility(e,t)}.bind(this)))),n.push(e.on("propertychange",function(t){"displayInLayerSwitcher"!==t.key&&"openInLayerSwitcher"!==t.key&&"title"!==t.key&&"name"!==t.key||this.drawPanel(t)}.bind(this))),this._layers.push({li:t,layer:e,listeners:n})}setLayerOpacity(t,e){var n=e.querySelector(".layerswitcher-opacity-cursor");n&&(n.style.left=100*t.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:t})}setLayerVisibility(t,e){var n=e.querySelector(".ol-visibility");n&&(n.checked=t.getVisible()),t.getVisible()?e.classList.add("ol-visible"):e.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:t})}_clearLayerForLI(){this._layers.forEach((function(t){t.listeners.forEach((function(t){k(t)}))})),this._layers=[]}_getLayerForLI(t){for(var e,n=0;e=this._layers[n];n++)if(e.li===t)return e.layer;return null}viewChange(){this.panel_.querySelectorAll("li").forEach(function(t){var e=this._getLayerForLI(t);e&&(this.testLayerVisibility(e)?t.classList.remove("ol-layer-hidden"):t.classList.add("ol-layer-hidden"))}.bind(this))}getPanel(){return this.panelContainer_}drawPanel(){if(this.getMap()){var t=this;this.dcount++,setTimeout((function(){t.drawPanel_()}),this.get("drawDelay")||0)}}drawPanel_(){if(! --this.dcount&&!this.dragging_){var t=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach(function(t){t.classList.contains("ol-header")||t.remove()}.bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=t}}switchLayerVisibility(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach((function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)}))):t.setVisible(!t.getVisible())}testLayerVisibility(t){if(!this.getMap())return!0;var e=this.getMap().getView().getResolution(),n=this.getMap().getView().getZoom();if(t.getMaxResolution()<=e||t.getMinResolution()>=e)return!1;if(t.getMinZoom&&(t.getMinZoom()>=n||t.getMaxZoom()<n))return!1;var i=t.getExtent();if(i){var r=this.getMap().getView().calculateExtent(this.getMap().getSize());return te(r,i)}return!0}dragOrdering_(t){t.stopPropagation(),t.preventDefault();var e,n,i,r,s,o=this,a=t.currentTarget.parentNode.parentNode,l=!0,c=this.panel_,u=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;function h(){if(n){var t=r,e=o.getSelection()===t;if(t&&n){var l;l=s?s.getLayers():o._layerGroup?o._layerGroup.getLayers():o.getMap().getLayers();for(var c=l.getArray(),u=0;u<c.length;u++)if(c[u]==t){l.removeAt(u);break}for(var d=0;d<c.length;d++)if(c[d]===n){u>d?l.insertAt(d,t):l.insertAt(d+1,t);break}}e&&o.selectLayer(t),o.dispatchEvent({type:"reorder-end",layer:t,group:s})}a.parentNode.querySelectorAll("li").forEach((function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")})),a.classList.remove("drag"),a.parentNode.classList.remove("drag"),o.element.classList.remove("drag"),i&&i.remove(),_R.removeListener(document,"mousemove touchmove",A),_R.removeListener(document,"mouseup touchend touchcancel",h)}function A(t){if(e=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,l&&Math.abs(u-e)>2&&(l=!1,a.classList.add("drag"),r=o._getLayerForLI(a),n=!1,s=o._getLayerForLI(a.parentNode.parentNode),i=_R.create("LI",{className:"ol-dragover",html:a.innerHTML,style:{position:"absolute","z-index":1e4,left:a.offsetLeft,opacity:.5,width:_R.outerWidth(a),height:_R.getStyle(a,"height")},parent:c}),o.element.classList.add("drag"),o.dispatchEvent({type:"reorder-start",layer:r,group:s})),!l){var h;t.preventDefault(),t.stopPropagation(),_R.setStyle(i,{top:e-_R.offsetRect(c).top+c.scrollTop+5}),h=t.touches?document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY):t.target,h.classList.contains("ol-switcherbottomdiv")?o.overflow(-1):h.classList.contains("ol-switchertopdiv")&&o.overflow(1);while(h&&"LI"!==h.tagName)h=h.parentNode;h&&h.classList.contains("dropover")||a.parentNode.querySelectorAll("li").forEach((function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")})),h&&h.parentNode.classList.contains("drag")&&h!==a?(n=o._getLayerForLI(h),n&&!n.get("allwaysOnTop")==!r.get("allwaysOnTop")?(h.classList.add("dropover"),h.classList.add(a.offsetTop<h.offsetTop?"dropover-after":"dropover-before")):n=!1,_R.show(i)):(n=!1,h===a?_R.hide(i):_R.show(i)),n?i.classList.remove("forbidden"):i.classList.add("forbidden")}}a.parentNode.classList.add("drag"),_R.addListener(document,"mousemove touchmove",A),_R.addListener(document,"mouseup touchend touchcancel",h)}dragOpacity_(t){t.stopPropagation(),t.preventDefault();var e=this,n=t.target,i=this._getLayerForLI(n.parentNode.parentNode.parentNode);if(i){var r=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,s=_R.getStyle(n,"left")-r;e.dragging_=!0,_R.addListener(document,"mouseup touchend touchcancel",o),_R.addListener(document,"mousemove touchmove",a)}function o(){_R.removeListener(document,"mouseup touchend touchcancel",o),_R.removeListener(document,"mousemove touchmove",a),e.dragging_=!1}function a(t){var e=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,r=(s+e)/_R.getStyle(n.parentNode,"width"),o=Math.max(0,Math.min(1,r));_R.setStyle(n,{left:100*o+"%"}),n.parentNode.nextElementSibling.innerHTML=Math.round(100*o),i.setOpacity(o)}}drawList(t,e){var n=this,i=e.getArray(),r=function(t){t.stopPropagation(),t.preventDefault();var i=n._getLayerForLI(this.parentNode.parentNode);n.switchLayerVisibility(i,e),n.get("selection")&&i.getVisible()&&n.selectLayer(i),n.onchangeCheck&&n.onchangeCheck(i)};function s(t){t.stopPropagation(),t.preventDefault();var e=n._getLayerForLI(this.parentNode.parentNode);n.oninfo(e),n.dispatchEvent({type:"info",layer:e})}function o(t){t.stopPropagation(),t.preventDefault();var e=n._getLayerForLI(this.parentNode.parentNode);n.onextent?n.onextent(e):n.getMap().getView().fit(e.getExtent(),n.getMap().getSize()),n.dispatchEvent({type:"extent",layer:e})}function a(t){t.stopPropagation(),t.preventDefault();var e,i=this.parentNode.parentNode.parentNode.parentNode,r=n._getLayerForLI(i);r?(e=n._getLayerForLI(this.parentNode.parentNode),r.getLayers().remove(e),0!=r.getLayers().getLength()||r.get("noSwitcherDelete")||a.call(i.querySelectorAll(".layerTrash")[0],t)):(i=this.parentNode.parentNode,n.getMap().removeLayer(n._getLayerForLI(i)))}function l(e){if(this.displayInLayerSwitcher(e)){var l=_R.create("LI",{className:(e.getVisible()?"ol-visible ":" ")+(e.get("baseLayer")?"baselayer":""),parent:t});this._setLayerForLI(l,e),this._selectedLayer===e&&l.classList.add("ol-layer-select");var u=_R.create("DIV",{className:"ol-layerswitcher-buttons",parent:l}),h=_R.create("DIV",{className:"li-content",parent:l});_R.create("INPUT",{type:e.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:e.getVisible(),click:r,parent:h});var A=_R.create("LABEL",{title:e.get("title")||e.get("name"),click:r,style:{userSelect:"none"},parent:h});if(A.addEventListener("selectstart",(function(){return!1})),_R.create("SPAN",{html:e.get("title")||e.get("name"),click:function(t){this.get("selection")&&(t.stopPropagation(),this.selectLayer(e))}.bind(this),parent:A}),this.reordering&&(c<i.length-1&&(e.get("allwaysOnTop")||!i[c+1].get("allwaysOnTop"))||c>0&&(!e.get("allwaysOnTop")||i[c-1].get("allwaysOnTop")))&&_R.create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(t){n.dragOrdering_(t)}},parent:u}),e.getLayers){var d=0;e.getLayers().forEach((function(t){n.displayInLayerSwitcher(t)&&d++})),d&&_R.create("DIV",{className:e.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var t=n._getLayerForLI(this.parentNode.parentNode);t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher"))},parent:u})}if(this.oninfo&&_R.create("DIV",{className:"layerInfo",title:this.tip.info,click:s,parent:u}),this.hastrash&&!e.get("noSwitcherDelete")&&_R.create("DIV",{className:"layerTrash",title:this.tip.trash,click:a,parent:u}),this.hasextent&&i[c].getExtent()){var f=i[c].getExtent();4==f.length&&f[0]<f[2]&&f[1]<f[3]&&_R.create("DIV",{className:"layerExtent",title:this.tip.extent,click:o,parent:u})}if(this.show_progress&&e instanceof lS){var p=_R.create("DIV",{className:"layerswitcher-progress",parent:h});this.setprogress_(e),e.layerswitcher_progress=_R.create("DIV",{parent:p})}var g=_R.create("DIV",{className:"layerswitcher-opacity",click:function(t){if(t.target===this){t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(1,t.offsetX/_R.getStyle(this,"width")));n._getLayerForLI(this.parentNode.parentNode).setOpacity(e),this.parentNode.querySelectorAll(".layerswitcher-opacity-label")[0].innerHTML=Math.round(100*e)}},parent:h});if(_R.create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:100*e.getOpacity()+"%"},on:{"mousedown touchstart":function(t){n.dragOpacity_(t)}},parent:g}),_R.create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*e.getOpacity()),parent:h}),e.getLayers&&(l.classList.add("ol-layer-group"),!0===e.get("openInLayerSwitcher"))){var m=_R.create("UL",{parent:l});this.drawList(m,e.getLayers())}l.classList.add(this.getLayerClass(e)),this.dispatchEvent({type:"drawlist",layer:e,li:l})}else this._setLayerForLI(null,e)}for(var c=i.length-1;c>=0;c--)l.call(this,i[c]);this.viewChange(),t===this.panel_&&this.overflow()}getLayerClass(t){return t?t.getLayers?"ol-layer-group":t instanceof hx?"ol-layer-vector":t instanceof fS?"ol-layer-vectortile":t instanceof lS?"ol-layer-tile":t instanceof eS?"ol-layer-image":t instanceof $C?"ol-layer-heatmap":t.getFeatures?"ol-layer-vectorimage":"unknown":"none"}selectLayer(t,e){if(!t){if(!this.getMap())return;t=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=t,this.drawPanel(),e||this.dispatchEvent({type:"select",layer:t})}getSelection(){return this._selectedLayer}setprogress_(t){if(!t.layerswitcher_progress){var e=0,n=0,i=function(){n===e?(n=e=0,_R.setStyle(t.layerswitcher_progress,{width:0})):_R.setStyle(t.layerswitcher_progress,{width:(e/n*100).toFixed(1)+"%"})};t.getSource().on("tileloadstart",(function(){n++,i()})),t.getSource().on("tileloadend",(function(){e++,i()})),t.getSource().on("tileloaderror",(function(){e++,i()}))}}};VR.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"};var jR=VR;I_.prototype.getPreview=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"},wB.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var n=this.getTileGrid().getTileCoordForCoordAndResolution(t,e),i=this.getTileUrlFunction();return i.call(this,n,this.getProjection())},kL.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var n=this.getTileUrlFunction();if(n){var i=this.getTileGrid()||this.getTileGridForProjection(this.getProjection()),r=i.getTileCoordForCoordAndResolution(t,e);return n.call(this,r,1,this.getProjection())}var s=this.getGetFeatureInfoUrl?this.getGetFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{}):this.getFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{});return s=s.replace(/getfeatureinfo/i,"GetMap"),s},Av.prototype.getPreview=function(t,e,n){if(this.get("preview"))return[this.get("preview")];if(e||(e=150),e<this.getMinResolution()||e>this.getMaxResolution()){var i=this.getMinResolution(),r=this.getMaxResolution();r>1e5&&(r=156543),i<.15&&(i=.15),e=r;while(r>i)i*=2,r/=2,e=i}var s=this.getExtent();if(t||(t=[21020,6355964]),s&&!vt(s,t)&&(t=[(s[0]+s[2])/2,(s[1]+s[3])/2]),n&&(t=Sn(t,n,this.getSource().getProjection())),this.getSource&&this.getSource())try{return[this.getSource().getPreview(t,e)]}catch(s){}return[]},aw.prototype.getPreview=function(t,e){if(this.get("preview"))return[this.get("preview")];var n=[];if(this.getLayers)for(var i=this.getLayers().getArray(),r=0;r<i.length;r++)n=n.concat(i[r].getPreview(t,e));return n};var WR=class extends jR{constructor(t){t=t||{},t.switcherClass=((t.switcherClass||"")+" ol-layerswitcher-image").trim(),t.mouseover=!1!==t.mouseover,super(t)}drawList(t,e){var n=this,i=function(t){t.preventDefault();var i=n._getLayerForLI(this);n.switchLayerVisibility(i,e),"touchstart"==t.type&&n.element.classList.add("ol-collapsed")};_R.setStyle(t,{height:"auto"}),e.forEach((function(e){if(n.displayInLayerSwitcher(e)){var r=e.getPreview?e.getPreview():["none"],s=_R.create("LI",{className:"ol-imgcontainer"+(e.getVisible()?" ol-visible":""),on:{"touchstart click":i},parent:t});n._setLayerForLI(s,e),r.forEach((function(t){_R.create("IMG",{src:t,parent:s})})),_R.create("p",{html:e.get("title")||e.get("name"),parent:s}),n.testLayerVisibility(e)&&s.classList.add("ol-layer-hidden")}}))}overflow(){}},zR=WR;const KR=.75,qR=.1;class $R extends Cw{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const e=void 0!==t.className?t.className:"ol-overviewmap",n=void 0!==t.tipLabel?t.tipLabel:"Overview map",i=void 0!==t.collapseLabel?t.collapseLabel:"";"string"===typeof i?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=i):this.collapseLabel_=i;const r=void 0!==t.label?t.label:"";"string"===typeof r?(this.label_=document.createElement("span"),this.label_.textContent=r):this.label_=r;const s=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,o=document.createElement("button");o.setAttribute("type","button"),o.title=n,o.appendChild(s),o.addEventListener(R.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const a=new y_({view:t.view,controls:new Nm,interactions:new Nm});this.ovmap_=a,t.layers&&t.layers.forEach((function(t){a.addLayer(t)}));const l=document.createElement("div");l.className="ol-overviewmap-box",l.style.boxSizing="border-box",this.boxOverlay_=new b_({position:[0,0],positioning:"center-center",element:l}),this.ovmap_.addOverlay(this.boxOverlay_);const c=e+" "+Jl+" "+ec+(this.collapsed_&&this.collapsible_?" "+nc:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=c,u.appendChild(this.ovmapDiv_),u.appendChild(o);const h=this,A=this.boxOverlay_,d=this.boxOverlay_.getElement(),f=function(t){return{clientX:t.clientX,clientY:t.clientY}},p=function(t){const e=f(t),n=a.getEventCoordinateInternal(e);A.setPosition(n)},g=function(t){const e=a.getEventCoordinateInternal(t);h.getMap().getView().setCenterInternal(e),window.removeEventListener("mousemove",p),window.removeEventListener("mouseup",g)};d.addEventListener("mousedown",(function(){window.addEventListener("mousemove",p),window.addEventListener("mouseup",g)}))}setMap(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push(M(t,A.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const e=t.getView();e&&(this.bindView_(e),e.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===gw.VIEW){const e=t.oldValue;e&&this.unbindView_(e);const n=this.getMap().getView();this.bindView_(n)}else this.ovmap_.isRendered()||t.key!==gw.TARGET&&t.key!==gw.SIZE||this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new cv({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(Gm.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_()}unbindView_(t){t.removeChangeListener(Gm.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView(),r=i.calculateExtentInternal(n);if(this.viewExtent_&&It(r,this.viewExtent_))return;this.viewExtent_=r;const s=e.getSize(),o=e.getView(),a=o.calculateExtentInternal(s),l=e.getPixelFromCoordinateInternal(Yt(r)),c=e.getPixelFromCoordinateInternal(Qt(r)),u=Math.abs(l[0]-c[0]),h=Math.abs(l[1]-c[1]),A=s[0],d=s[1];u<A*qR||h<d*qR||u>A*KR||h>d*KR?this.resetExtent_():yt(a,r)||this.recenter_()}resetExtent_(){if(0===KR||0===qR)return;const t=this.getMap(),e=this.ovmap_,n=t.getSize(),i=t.getView(),r=i.calculateExtentInternal(n),s=e.getView(),o=Math.log(KR/qR)/Math.LN2,a=1/(Math.pow(2,o/2)*qR);ie(r,a),s.fitInternal(or(r))}recenter_(){const t=this.getMap(),e=this.ovmap_,n=t.getView(),i=e.getView();i.setCenterInternal(n.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView(),r=e.getView(),s=this.rotateWithView_?0:-i.getRotation(),o=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=i.getCenterInternal(),c=i.getResolution(),u=r.getResolution(),h=n[0]*c/u,A=n[1]*c/u;if(o.setPosition(l),a){a.style.width=h+"px",a.style.height=A+"px";const t="rotate("+s+"rad)";a.style.transform=t}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=P(this.ovmap_,pw.POSTRENDER,(function(t){delete this.ovmapPostrenderKey_,this.updateBox_()}),this))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(nc),this.collapsed_?_l(this.collapseLabel_,this.label_):_l(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}}var XR=$R,YR=class extends Cw{constructor(t){t=t||{},t.fullscreen&&(t.target=document.body);var e=_R.create("DIV",{className:((t.className||"")+(t.zoom?" ol-zoom":"")+" ol-ext-dialog").trim()});super({element:e,target:t.target}),e.addEventListener("click",function(t){this.get("hideOnBack")&&t.target===e&&this.close(),this.get("hideOnClick")&&this.close()}.bind(this));var n=_R.create("FORM",{on:{submit:this._onButton("submit")},parent:e});_R.create("H2",{parent:n}),_R.create("DIV",{className:"ol-closebox",click:this._onButton("cancel"),parent:n}),_R.create("DIV",{className:"ol-content",parent:n}),this._progress=_R.create("DIV",{style:{display:"none"},parent:n});var i=_R.create("DIV",{className:"ol-progress-bar",parent:this._progress});this._progressbar=_R.create("DIV",{parent:i}),this._progressMessage=_R.create("DIV",{className:"ol-progress-message",parent:this._progress}),_R.create("DIV",{className:"ol-buttons",parent:n}),this.set("closeBox",!1!==t.closeBox),this.set("zoom",!!t.zoom),this.set("hideOnClick",!!t.hideOnClick),this.set("hideOnBack",!!t.hideOnBack),this.set("className",e.className),this.set("closeOnSubmit",t.closeOnSubmit),this.set("buttons",t.buttons),this.setContent(t)}show(t){t&&((t instanceof Element||"string"===typeof t)&&(t={content:t}),this.setContent(t)),this.element.classList.add("ol-visible");var e=this.element.querySelector('input[type="text"],input[type="search"],input[type="number"]');if(e&&e.focus(),this.dispatchEvent({type:"show"}),t){if(t.autoclose){var n=setTimeout(function(){this.hide()}.bind(this),t.autoclose);this.once("hide",(function(){clearTimeout(n)}))}if(t.hideOnBack){var i=this.get("hideOnBack");this.set("hideOnBack",!0),this.once("hide",function(){this.set("hideOnBack",i)}.bind(this))}}}open(){this.show()}setContentMessage(t){if(void 0!==t){var e=this.getContentElement();t instanceof Element&&_R.setHTML(e,""),_R.setHTML(e,t||"")}}setTitle(t){var e=this.element.querySelector("form");e.querySelector("h2").innerText=t||"",t?e.classList.add("ol-title"):e.classList.remove("ol-title")}setContent(t){if(t){this.element.className=this.get("className"),"string"===typeof t&&(t={content:t}),t=t||{},this.setProgress(!1),t.max&&this.setProgress(0,t.max),void 0!==t.progress&&this.setProgress(t.progress),this.get("zoom")?this.element.classList.add("ol-zoom"):this.element.classList.remove("ol-zoom"),t.className&&t.className.split(" ").forEach(function(t){this.element.classList.add(t)}.bind(this));var e=this.element.querySelector("form");void 0!==t.content&&(t.content instanceof Element&&_R.setHTML(e.querySelector(".ol-content"),""),_R.setHTML(e.querySelector(".ol-content"),t.content||"")),this.setTitle(t.title),t.closeBox||this.get("closeBox")&&!1!==t.closeBox?e.classList.add("ol-closebox"):e.classList.remove("ol-closebox");var n=this.element.querySelector(".ol-buttons");n.innerHTML="";var i=t.buttons||this.get("buttons");if(i)for(var r in e.classList.add("ol-button"),i)_R.create("INPUT",{type:"submit"===r?"submit":"button",value:i[r],click:this._onButton(r,t.onButton),parent:n});else e.classList.remove("ol-button")}}getContentElement(){return this.element.querySelector("form .ol-content")}setProgress(t,e,n){if(!1!==t){if(e>0?this.set("max",Number(e)):e=this.get("max"),e){var i=Math.round(t/e*100);_R.setStyle(this._progress,{display:""}),this._progressbar.className=i?"":"notransition",_R.setStyle(this._progressbar,{width:i+"%"})}else _R.setStyle(this._progress,{display:"none"});this._progressMessage.innerHTML="",_R.setHTML(this._progressMessage,n||"")}else _R.setStyle(this._progress,{display:"none"})}_onButton(t,e){var n=function(n){n.preventDefault(),"submit"===t&&!1===this.get("closeOnSubmit")||this.hide();var i=this.getInputs();this.dispatchEvent({type:"button",button:t,inputs:i}),"function"===typeof e&&e(t,i)}.bind(this);return n}getInputs(){var t={};return["input","textarea","select"].forEach(function(e){this.element.querySelectorAll("form "+e).forEach((function(e){e.className&&e.className.split(" ").forEach((function(n){t[n]=e}))}))}.bind(this)),t}hide(){this.element.classList.remove("ol-visible"),this.dispatchEvent({type:"hide"})}close(){this.hide()}isOpen(){return this.element.classList.contains("ol-visible")}},ZR=YR,JR=function(t){if(!t)return null;var e=t.getViewport().getElementsByClassName("ol-fixedoverlay")[0];return e||(t.getViewport().querySelector(".ol-layers")?(e=document.createElement("canvas"),e.className="ol-fixedoverlay",t.getViewport().querySelector(".ol-layers").after(e),t.on("precompose",(function(n){e.width=t.getSize()[0]*n.frameState.pixelRatio,e.height=t.getSize()[1]*n.frameState.pixelRatio}))):e=t.getViewport().querySelector("canvas")),e},tM=JR,eM=class extends Cw{constructor(t){t=t||{},super(t),this.setStyle(t.style)}setMap(t){this.getCanvas(t);var e=this.getMap();if(this._listener&&(k(this._listener),this._listener=null),super.setMap(t),e)try{e.renderSync()}catch(Rdt){}t&&(this._listener=t.on("postcompose",this._draw.bind(this)))}getCanvas(t){return tM(t)}getContext(t){var e=t.context;if(!e&&this.getMap()){var n=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0];e=n?n.getContext("2d"):null}return e}setStyle(t){this._style=t||new Qc({})}getStyle(){return this._style}getStroke(){var t=this._style.getStroke();return t||this._style.setStroke(new ql({color:"#000",width:1.25})),this._style.getStroke()}getFill(){var t=this._style.getFill();return t||this._style.setFill(new Dl({color:"#fff"})),this._style.getFill()}getTextStroke(){var t=this._style.getText();return t||(t=new Vc({})),t.getStroke()||t.setStroke(new ql({color:"#fff",width:3})),t.getStroke()}getTextFill(){var t=this._style.getText();return t||(t=new Vc({})),t.getFill()||t.setFill(new Dl({color:"#fff"})),t.getFill()}getTextFont(){var t=this._style.getText();return t||(t=new Vc({})),t.getFont()||t.setFont("12px sans-serif"),t.getFont()}_draw(){console.warn("[CanvasBase] draw function not implemented.")}},nM=eM;var iM=class extends nM{constructor(t){t=t||{};var e=document.createElement("div");if(super({element:e,target:t.target}),t.target)e.className=t.className||"ol-legend";else{e.className=(t.className||"ol-legend")+" ol-unselectable ol-control"+(!1===t.collapsible?" ol-uncollapsible":" ol-collapsed");var n=document.createElement("button");n.setAttribute("type","button"),n.addEventListener("click",function(){this.toggle()}.bind(this)),e.appendChild(n),n=document.createElement("button"),n.setAttribute("type","button"),n.className="ol-closebox",n.addEventListener("click",function(){this.toggle()}.bind(this)),e.appendChild(n)}this._legend=t.legend,this._legend.getCanvas().className="ol-legendImg",e.appendChild(this._legend.getCanvas()),e.appendChild(this._legend.getListElement()),!1!==t.collapsible&&!1===t.collapsed&&this.show(),this._legend.on("select",function(t){this.dispatchEvent(t)}.bind(this)),this._legend.on("refresh",function(){if(this._onCanvas&&this.getMap())try{this.getMap().renderSync()}catch(Rdt){}}.bind(this)),this._legend.on("items",function(e){e.nb?(this.element.classList.remove("ol-empty"),this.element.title=t.title||"legend"):(this.element.classList.add("ol-empty"),this.element.title=t.emptyTitle||"no legend"),this.dispatchEvent(e)}.bind(this))}getLegend(){return this._legend}setCanvas(t){if(this._onCanvas=t,this.element.style.visibility=t?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch(Rdt){}}onCanvas(){return!!this._onCanvas}_draw(t){if(this._onCanvas&&!this.element.classList.contains("ol-collapsed")){var e=this._legend.getCanvas(),n=this.getContext(t),i=n.canvas.height-e.height;n.save(),n.rect(0,i,e.width,e.height);var r="#fff";this._legend.getTextStyle().getBackgroundFill()&&(r=za(this._legend.getTextStyle().getBackgroundFill().getColor())),n.fillStyle=n.strokeStyle=r,n.lineWidth=10,n.lineJoin="round",n.stroke(),n.clearRect(0,i,e.width,e.height),n.fill(),n.drawImage(e,0,i),n.restore()}}show(){if(this.element.classList.contains("ol-collapsed")&&(this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!1}),this.getMap()))try{this.getMap().renderSync()}catch(Rdt){}}hide(){if(!this.element.classList.contains("ol-collapsed")&&(this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!0}),this.getMap()))try{this.getMap().renderSync()}catch(Rdt){}}collapse(t){!1===t?this.show():this.hide()}isCollapsed(){return this.element.classList.contains("ol-collapsed")}toggle(){if(this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:this.element.classList.contains("ol-collapsed")}),this.getMap())try{this.getMap().renderSync()}catch(Rdt){}}},rM=iM,sM=class extends Cw{constructor(t){t=t||{};var e=_R.create("DIV",{className:t.className||"ol-print"});super({element:e,target:t.target}),t.target||(e.classList.add("ol-unselectable","ol-control"),_R.create("BUTTON",{type:"button",title:t.title||"Print",click:function(){this.print()}.bind(this),parent:e})),this.set("immediate",t.immediate),this.set("imageType",t.imageType||"image/jpeg"),this.set("quality",t.quality||.8),this.set("orientation",t.orientation)}toClipboard(t,e){try{t.canvas.toBlob((function(t){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},t.type,{value:t,enumerable:!0}))]),"function"===typeof e&&e(!0)}catch(n){"function"===typeof e&&e(!1)}}))}catch(n){"function"===typeof e&&e(!1)}}copyMap(t,e){this.once("print",function(t){this.toClipboard(t,e)}.bind(this)),this.print(t)}_getCanvas(t,e,n){var i;if(t.context)n=t.context.canvas;else{if(n)i=n.getContext("2d");else{n=document.createElement("canvas");var r=this.getMap().getSize();n.width=r[0],n.height=r[1],i=n.getContext("2d"),/jp.*g$/.test(e)&&(i.fillStyle=this.get("bgColor")||"white",i.fillRect(0,0,n.width,n.height))}this.getMap().getViewport().querySelectorAll(".ol-layers canvas, canvas.ol-fixedoverlay").forEach(function(t){if(t.width){if(i.save(),"0"===t.parentNode.style.opacity)return;i.globalAlpha=parseFloat(t.parentNode.style.opacity)||1,i.globalCompositeOperation=_R.getStyle(t.parentNode,"mix-blend-mode"),i.filter=_R.getStyle(t.parentNode,"filter");var e=_R.getStyle(t,"transform")||_R.getStyle(t,"-webkit-transform");/^matrix/.test(e)?(e=e.replace(/^matrix\(|\)$/g,"").split(","),e.forEach((function(t,n){e[n]=parseFloat(t)})),i.transform(e[0],e[1],e[2],e[3],e[4],e[5]),i.drawImage(t,0,0)):i.drawImage(t,0,0,_R.getStyle(t,"width"),_R.getStyle(t,"height")),i.restore()}}.bind(this))}return n}fastPrint(t,e){t=t||{},this._ol6?requestAnimationFrame(function(){e(this._getCanvas({},t.imageType,t.canvas))}.bind(this)):(this.getMap().once("postcompose",function(n){n.context||(this._ol6=!0),e(this._getCanvas(n,t.imageType,t.canvas))}.bind(this)),this.getMap().render())}print(t){t=t||{};var e=t.imageType||this.get("imageType"),n=t.quality||this.get("quality");if(this.getMap()){if("silent"!==t.immediate&&this.dispatchEvent(Object.assign({type:"printing"},t)),!t.immediate)return void setTimeout(function(){t=Object.assign({},t),t.immediate="silent",this.print(t)}.bind(this),200);this.getMap().once(this.get("immediate")?"postcompose":"rendercomplete",function(i){var r,s,o,a,l=this._getCanvas(i,e),c=t.size||[210,297],u=t.format||"a4",h=t.orient||this.get("orientation"),A="number"===typeof t.margin?t.margin:10;if(l){"landscape"!==h&&"portrait"!==h&&(h=l.width>l.height?"landscape":"portrait"),"landscape"===h&&(c=[c[1],c[0]]);var d=Math.min((c[0]-2*A)/l.width,(c[1]-2*A)/l.height);r=d*l.width,s=d*l.height,o=[(c[0]-r)/2,(c[1]-s)/2]}try{a=l?l.toDataURL(e,n):null}catch(f){return void this.dispatchEvent({type:"error",canvas:l})}var f=Object.assign({type:"print",print:{format:u,orientation:h,unit:"mm",size:c,position:o,imageWidth:r,imageHeight:s},image:a,imageType:e,quality:n,canvas:l},t);this.dispatchEvent(f)}.bind(this)),this.getMap().render()}}},oM=sM,aM=class extends nM{constructor(t){t=t||{};var e=_R.create("DIV",{className:(t.className||"")+" ol-control-title ol-unselectable",style:{display:"block",visibility:"hidden"}});super({element:e,style:t.style}),this.setTitle(t.title||""),this.setVisible(!1!==t.visible),this.element.style.font=this.getTextFont()}setStyle(t){super.setStyle(t),this.element&&(this.element.style.font=this.getTextFont()),this.getMap()&&this.getMap().render()}setTitle(t){if(this.element.textContent=t,this.set("title",t),this.getMap())try{this.getMap().renderSync()}catch(Rdt){}}getTitle(){return this.get("title")}setVisible(t){if(this.element.style.display=t?"block":"none",this.getMap())try{this.getMap().renderSync()}catch(Rdt){}}getVisible(){return"none"!==this.element.style.display}_draw(t){if(this.getVisible()){var e=this.getContext(t);if(e){var n=t.frameState.pixelRatio;e.save(),e.scale(n,n);var i=this.element.getBoundingClientRect(),r=this.getMap().getViewport().getBoundingClientRect(),s=this.getMap().getSize()[0]/r.width;e.translate(Math.round((i.left-r.left)*s),Math.round((i.top-r.top)*s));var o=this.element.clientHeight,a=this.element.clientWidth,l=a/2;e.beginPath(),e.fillStyle=za(this.getFill().getColor()),e.rect(0,0,a,o),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=za(this.getTextFill().getColor()),e.strokeStyle=za(this.getTextStroke().getColor()),e.lineWidth=this.getTextStroke().getWidth(),e.textAlign="center",e.textBaseline="middle",e.font=this.getTextFont(),e.lineJoin="round",e.lineWidth&&e.strokeText(this.getTitle(),l,o/2),e.fillText(this.getTitle(),l,o/2),e.closePath(),e.restore()}}}},lM=aM,cM=function(t,e){var n=t.getView(),i=n.getProjection(),r=n.getCenter(),s=t.getPixelFromCoordinate(r);s[1]+=1;var o=t.getCoordinateFromPixel(s),a=rn(Sn(r,i,"EPSG:4326"),Sn(o,i,"EPSG:4326"));return a*=(e||96)/.0254,a},uM=function(t,e,n){if(t&&e){var i=e;if("string"===typeof e&&(e=e.replace(":","/").split("/"),i=e[1],i||(i=e[0]||""),i=i.replace(/[^\d]/g,""),i=parseInt(i),e[1])){var r=parseInt(e[0]);r&&(i/=r)}if(!i)return;var s=t.getView(),o=s.getProjection(),a=s.getCenter(),l=t.getPixelFromCoordinate(a);l[1]+=1;var c=t.getCoordinateFromPixel(l),u=rn(Sn(a,o,"EPSG:4326"),Sn(c,o,"EPSG:4326"));return u*=(n||96)/.0254,s.setResolution(s.getResolution()*i/u),i}},hM=class extends nM{constructor(t){t=t||{};var e=document.createElement("div");e.className="ol-control ol-compassctrl ol-unselectable ol-hidden"+(t.className?" "+t.className:""),e.style.position="absolute",e.style.visibility="hidden";var n=t.style instanceof ql?new Qc({stroke:t.style}):t.style;t.style||(n=new Qc({stroke:new ql({width:0})})),super({element:e,style:n}),this.set("rotateVithView",!1!==t.rotateWithView),this.setVisible(!1!==t.visible),this.setImage(t.image||t.src)}setImage(t){if(t instanceof Image)this.img_=t,this.img_.onload=function(){if(this.getMap())try{this.getMap().renderSync()}catch(Rdt){}}.bind(this);else if("string"===typeof t)switch(t){case"compact":this.img_=this.compactCompass_(this.element.clientWidth,this.getStroke().getColor());break;case"default":this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor());break;default:this.img_=new Image,this.img_.onload=function(){if(this.getMap())try{this.getMap().renderSync()}catch(Rdt){}}.bind(this),this.img_.src=t;break}else this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor())}compactCompass_(t,e){var n=document.createElement("canvas"),i=n.getContext("2d");t=n.width=n.height=t||150;var r=t/2;return i.translate(r,r),i.fillStyle=e||"#963",i.lineWidth=5,i.lineJoin=i.lineCap="round",i.font="bold "+.4*r+"px sans-serif",i.textBaseline="bottom",i.textAlign="center",i.strokeStyle="#fff",i.globalAlpha=.75,i.strokeText("N",0,-r/2),i.globalAlpha=1,i.fillText("N",0,-r/2),i.beginPath(),i.moveTo(0,r/4),i.lineTo(r/3,r/2),i.lineTo(0,-r/2),i.lineTo(-r/3,r/2),i.lineTo(0,r/4),i.lineWidth=12,i.fillStyle="#fff",i.globalAlpha=.75,i.fill(),i.stroke(),i.globalAlpha=1,i.fillStyle=i.strokeStyle=e||"#963",i.lineWidth=5,i.beginPath(),i.moveTo(0,r/4),i.lineTo(0,-r/2),i.lineTo(r/3,r/2),i.lineTo(0,r/4),i.fill(),i.stroke(),i.beginPath(),i.moveTo(0,r/4),i.lineTo(0,-r/2),i.lineTo(-r/3,r/2),i.lineTo(0,r/4),i.stroke(),n}defaultCompass_(t,e){var n=document.createElement("canvas"),i=n.getContext("2d");t=n.width=n.height=t||150;var r=t/2,s=.22*r;function o(t,n){i.fillStyle=e||"#963",i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(n,n),i.moveTo(0,0),i.lineTo(-t,0),i.lineTo(-n,-n),i.moveTo(0,0),i.lineTo(0,t),i.lineTo(-n,n),i.moveTo(0,0),i.lineTo(0,-t),i.lineTo(n,-n),i.moveTo(0,0),i.fill(),i.stroke()}function a(t,e){i.globalCompositeOperation="destination-out",i.fillStyle="#fff",i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(e,-e),i.moveTo(0,0),i.lineTo(-t,0),i.lineTo(-e,e),i.moveTo(0,0),i.lineTo(0,t),i.lineTo(e,e),i.moveTo(0,0),i.lineTo(0,-t),i.lineTo(-e,-e),i.moveTo(0,0),i.fill(),i.globalCompositeOperation="source-over",i.beginPath(),i.moveTo(0,0),i.lineTo(t,0),i.lineTo(e,-e),i.moveTo(0,0),i.lineTo(-t,0),i.lineTo(-e,e),i.moveTo(0,0),i.lineTo(0,t),i.lineTo(e,e),i.moveTo(0,0),i.lineTo(0,-t),i.lineTo(-e,-e),i.moveTo(0,0),i.stroke()}return i.translate(r,r),i.strokeStyle=e||"#963",i.lineWidth=1.5,i.beginPath(),i.arc(0,0,.41*t,0,2*Math.PI),i.arc(0,0,.44*t,0,2*Math.PI),i.stroke(),i.rotate(Math.PI/4),o(.9*r,.8*s),a(.9*r,.8*s),i.rotate(-Math.PI/4),o(r,s),a(r,s),n}getVisible(){return"block"===_R.getStyle(this.element,"display")}setVisible(t){t?this.element.classList.add("ol-visible"):this.element.classList.remove("ol-visible"),this.getMap()&&this.getMap().render()}_draw(t){var e=this.getContext(t);if(e&&this.getVisible()){var n,i=e.canvas,r=[];for(n=0;n<8;n++)r[n]=[Math.cos(Math.PI*n/8),Math.sin(Math.PI*n/8)];var s=t.frameState.pixelRatio;e.save(),e.scale(s,s);var o=this.element.clientWidth,a=this.element.clientHeight,l={left:this.element.offsetLeft,top:this.element.offsetTop},c=this.img_,u=t.frameState.viewState.rotation;if(e.beginPath(),e.translate(l.left+o/2,l.top+a/2),this.get("rotateVithView")&&e.rotate(u),this.getStroke().getWidth()){e.beginPath(),e.strokeStyle=this.getStroke().getColor(),e.lineWidth=this.getStroke().getWidth();var h=Math.max(i.width,i.height);for(n=0;n<8;n++)e.moveTo(-r[n][0]*h,-r[n][1]*h),e.lineTo(r[n][0]*h,r[n][1]*h);e.stroke()}c.width&&e.drawImage(c,-o/2,-a/2,o,a),e.closePath(),e.restore()}}},AM=hM,dM=class extends Cw{constructor(t){t=t||{};var e=_R.create("DIV",{className:(t.className||"ol-print")+" ol-unselectable ol-control"});super({element:e}),this._lang=t.lang||"en",t.target||_R.create("BUTTON",{type:"button",title:t.title||"Print",click:function(){this.print()}.bind(this),parent:e}),t.openWindow&&this.on("print",(function(t){t.canvas&&window.open().document.write('<img src="'+t.canvas.toDataURL()+'"/>')})),t.target=t.target||_R.create("DIV");var n=this._printCtrl=new oM(t);n.on(["print","error","printing"],function(t){r.setAttribute("data-status",t.type),t.clipboard||this.dispatchEvent(t)}.bind(this)),this._compass=new AM({src:t.northImage||"compact",visible:!1,className:"olext-print-compass",style:new ql({color:"#333",width:0})});var i=this._printDialog=new ZR({target:t.targetDialog||document.body,closeBox:!0,className:"ol-ext-print-dialog"}),r=i.getContentElement();this._input={};var s=_R.create("DIV",{className:"ol-print-param",parent:r});this._pages=[_R.create("DIV",{className:"ol-page"})];var o=_R.create("DIV",{className:"ol-map",parent:this._pages[0]});_R.create("DIV",{html:this._pages[0],className:"ol-print-map",parent:r}),_R.create("H2",{html:this.i18n("title"),parent:s});var a=_R.create("UL",{parent:s}),l=_R.create("LI",{className:"ol-orientation",parent:a});this._input.orientation={list:l};var c,u=_R.create("LABEL",{className:"portrait",parent:l});this._input.orientation.portrait=_R.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"portrait",checked:!0,on:{change:function(t){this.setOrientation(t.target.value)}.bind(this)},parent:u}),_R.create("SPAN",{html:this.i18n("portrait"),parent:u}),u=_R.create("LABEL",{className:"landscape",parent:l}),this._input.orientation.landscape=_R.create("INPUT",{type:"radio",name:"ol-print-orientation",value:"landscape",on:{change:function(t){this.setOrientation(t.target.value)}.bind(this)},parent:u}),_R.create("SPAN",{html:this.i18n("landscape"),parent:u}),l=_R.create("LI",{html:_R.create("LABEL",{html:this.i18n("size")}),className:"ol-size",parent:a});var h=this._input.size=_R.create("SELECT",{on:{change:function(){this.setSize(h.value||E)}.bind(this)},parent:l});for(c in this.paperSize)_R.create("OPTION",{html:c+(this.paperSize[c]?" - "+this.paperSize[c][0]+"x"+this.paperSize[c][1]+" mm":this.i18n("custom")),value:c,parent:h});l=_R.create("LI",{html:_R.create("LABEL",{html:this.i18n("margin")}),className:"ol-margin",parent:a});var A=this._input.margin=_R.create("SELECT",{on:{change:function(){this.setMargin(A.value)}.bind(this)},parent:l});for(c in this.marginSize)_R.create("OPTION",{html:this.i18n(c)+" - "+this.marginSize[c]+" mm",value:this.marginSize[c],parent:A});l=_R.create("LI",{html:_R.create("LABEL",{html:this.i18n("scale")}),className:"ol-scale",parent:a});var d=this._input.scale=_R.create("SELECT",{on:{change:function(){this.setScale(parseInt(d.value))}.bind(this)},parent:l});Object.keys(this.scales).forEach(function(t){_R.create("OPTION",{html:this.scales[t],value:t,parent:d})}.bind(this)),l=_R.create("LI",{className:"ol-legend",parent:a});var f=_R.createSwitch({html:this.i18n("legend"),checked:!1,on:{change:function(){B.legend.control.setCanvas(f.checked)}.bind(this)},parent:l});l=_R.create("LI",{className:"ol-print-north",parent:a});var p=this._input.north=_R.createSwitch({html:this.i18n("north"),checked:"checked",on:{change:function(){p.checked?this._compass.element.classList.add("ol-print-compass"):this._compass.element.classList.remove("ol-print-compass"),this.getMap().render()}.bind(this)},parent:l});l=_R.create("LI",{className:"ol-print-title",parent:a});var g=_R.createSwitch({html:this.i18n("mapTitle"),checked:!1,on:{change:function(t){B.title.control.setVisible(t.target.checked)}.bind(this)},parent:l}),m=_R.create("INPUT",{type:"text",placeholder:this.i18n("mapTitle"),on:{keydown:function(t){13===t.keyCode&&t.preventDefault()},keyup:function(){B.title.control.setTitle(m.value)},change:function(){B.title.control.setTitle(m.value)}.bind(this)},parent:l}),v=_R.create("DIV",{className:"ol-user-param",parent:s});l=_R.create("LI",{className:"ol-saveas",parent:a});var y=_R.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:l}),w=_R.create("SELECT",{on:{change:function(){if(this.formats[w.value].clipboard)n.copyMap(this.formats[w.value],(function(t){t&&(y.classList.add("visible"),setTimeout((function(){y.classList.remove("visible")}),1e3))}));else{var t="string"===typeof this.getSize()?this.getSize():null,e=Object.assign({format:t,size:t?this.paperSize[t]:null,orient:this.getOrientation(),margin:this.getMargin()},this.formats[w.value]);n.print(e)}w.value=""}.bind(this)},parent:l});_R.create("OPTION",{html:this.i18n("saveas"),style:{display:"none"},value:"",parent:w}),this.formats.forEach(function(e,n){if(e.pdf){if(!1===t.pdf)return}else if(e.clipboard){if(!1===t.copy)return}else if(!1===t.save)return;_R.create("OPTION",{html:this.i18n(e.title),value:n,parent:w})}.bind(this)),l=_R.create("LI",{className:"ol-savelegend",parent:a});var _=_R.create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:l}),b=_R.create("SELECT",{on:{change:function(){var t=B.legend.control.getLegend().getCanvas(),e=document.createElement("CANVAS");e.width=t.width,e.height=t.height;var n,i=e.getContext("2d");if(i.fillStyle="#fff",i.fillRect(0,0,e.width,e.height),i.drawImage(t,0,0),this.formats[b.value].clipboard)e.toBlob((function(t){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},t.type,{value:t,enumerable:!0}))]),_.classList.add("visible"),setTimeout((function(){_.classList.remove("visible")}),1e3)}catch(e){}}),"image/png");else try{n=e.toDataURL(this.formats[b.value].imageType,this.formats[b.value].quality);var r="string"===typeof this.getSize()?this.getSize():"A4",s=e.width/96*25.4,o=e.height/96*25.4,a=this.paperSize[r];"landscape"===this.getOrientation()&&(a=[a[1],a[0]]);var l=[(a[0]-s)/2,(a[1]-o)/2];this.dispatchEvent({type:"print",print:{legend:!0,format:r,orientation:this.getOrientation(),unit:"mm",size:this.paperSize[r],position:l,imageWidth:s,imageHeight:o},image:n,imageType:this.formats[b.value].imageType,pdf:this.formats[b.value].pdf,quality:this.formats[b.value].quality,canvas:e})}catch(c){}b.value=""}.bind(this)},parent:l});_R.create("OPTION",{html:this.i18n("saveLegend"),style:{display:"none"},value:"",parent:b}),this.formats.forEach(function(t,e){_R.create("OPTION",{html:this.i18n(t.title),value:e,parent:b})}.bind(this));var x,E,C,S=_R.create("DIV",{className:"ol-ext-buttons",parent:s});_R.create("BUTTON",{html:this.i18n("printBt"),type:"submit",click:function(t){t.preventDefault(),window.print()},parent:S}),_R.create("BUTTON",{html:this.i18n("cancel"),type:"button",click:function(){i.hide()},parent:S}),_R.create("DIV",{html:this.i18n("errorMsg"),className:"ol-error",parent:s});var B={};i.on("show",function(){this.dispatchEvent({type:"show",userElement:v,dialog:this._printDialog,page:this.getPage()});var t=this.getMap();t&&(document.body.classList.add("ol-print-document"),x=t.getTargetElement(),E=t.getSize(),"string"===typeof this.getSize()?this.setSize(this.getSize()):this.setSize(E),t.setTarget(o),C&&k(C),C=t.on("moveend",function(){this.setScale(cM(t))}.bind(this)),this.setScale(cM(t)),B={},this.getMap().getControls().forEach(function(t){t instanceof rM&&(B.legend={control:t}),t instanceof lM&&(B.title={control:t}),t instanceof AM&&(B.compass?t.element.classList.remove("ol-print-compass"):(this._input.north.checked?t.element.classList.add("ol-print-compass"):t.element.classList.remove("ol-print-compass"),this._compass=t,B.compass={control:t}))}.bind(this)),B.title?(g.checked=B.title.isVisible=B.title.control.getVisible(),m.value=B.title.control.getTitle(),g.parentNode.parentNode.classList.remove("hidden")):g.parentNode.parentNode.classList.add("hidden"),B.legend?(B.legend.ison=B.legend.control.onCanvas(),B.legend.collapsed=B.legend.control.isCollapsed(),B.legend.control.collapse(!1),b.parentNode.classList.remove("hidden"),f.parentNode.parentNode.classList.remove("hidden"),f.checked=!B.legend.collapsed,B.legend.control.setCanvas(!B.legend.collapsed)):(b.parentNode.classList.add("hidden"),f.parentNode.parentNode.classList.add("hidden")))}.bind(this)),i.on("hide",function(){document.body.classList.remove("ol-print-document"),x&&(this.getMap().setTarget(x),x=null,C&&k(C),B.title&&B.title.control.setVisible(B.title.isVisible),B.legend&&(B.legend.control.setCanvas(B.legend.ison),B.legend.control.collapse(B.legend.collapsed)),this.dispatchEvent({type:"hide"}))}.bind(this)),window.addEventListener("resize",function(){this.setSize()}.bind(this)),t.saveAs&&this.on("print",(function(e){e.pdf||e.canvas.toBlob((function(n){var i=(e.print.legend?"legend.":"map.")+e.imageType.replace("image/","");t.saveAs(n,i)}),e.imageType,e.quality)})),t.jsPDF&&this.on("print",(function(e){if(e.pdf){var n=new t.jsPDF({orientation:e.print.orientation,unit:e.print.unit,format:e.print.size});n.addImage(e.image,"JPEG",e.print.position[0],e.print.position[0],e.print.imageWidth,e.print.imageHeight),n.save(e.print.legend?"legend.pdf":"map.pdf")}}))}static addLang(t,e){dM.prototype._labels[t]=e}isOpen(){return this._printDialog.isOpen()}i18n(t){var e=this._labels.en[t]||t;return this._labels[this._lang]&&this._labels[this._lang][t]&&(e=this._labels[this._lang][t]),e}getOrientation(){return this._orientation||"portrait"}setOrientation(t){this._orientation="landscape"===t?"landscape":"portrait",this._input.orientation[this._orientation].checked=!0,this.setSize()}getMargin(){return this._margin||0}setMargin(t){this._margin=t,this._input.margin.value=t,this.setSize()}getSize(){return this._size}setSize(t){if(this._printDialog.getContentElement().setAttribute("data-status",""),t?this._size=t:t=this._size,t){if("string"===typeof t){for(var e in this.paperSize)e&&new RegExp(e,"i").test(t)&&(t=e);this.paperSize[t]||(t=this._size="A4"),this._input.size.value=t,t=[Math.trunc(96*this.paperSize[t][0]/25.4),Math.trunc(96*this.paperSize[t][1]/25.4)],"landscape"===this.getOrientation()&&(t=[t[1],t[0]]),this.getPage().classList.remove("margin")}else this._input.size.value="",this.getPage().classList.add("margin");var n=this.getPage(),i=n.parentNode.getBoundingClientRect(),r=(i.width-40)/t[0],s=(i.height-40)/t[1],o=Math.min(r,s,1);n.style.width=t[0]+"px",n.style.height=t[1]+"px",n.style["-webkit-transform"]=n.style.transform="translate(-50%,-50%) scale("+o+")";var a=Math.round(5/o);n.style["-webkit-box-shadow"]=n.style["box-shadow"]=a+"px "+a+"px "+a+"px rgba(0,0,0,.6)",n.style["padding"]=96*this.getMargin()/25.4+"px",this.getMap()&&this.getMap().updateSize(),this.dispatchEvent({type:"dialog:refresh"})}}getContentElement(){return this._printDialog.getContentElement()}getUserElement(){return this._printDialog.getContentElement().querySelector(".ol-user-param")}getPage(){return this._pages[0]}setMap(t){this.getMap()&&(this.getMap().removeControl(this._compass),this.getMap().removeControl(this._printCtrl),this.getMap().removeControl(this._printDialog)),super.setMap(t),this.getMap()&&(this.getMap().addControl(this._compass),this.getMap().addControl(this._printCtrl),this.getMap().addControl(this._printDialog))}setScale(t){uM(this.getMap(),t),this._input.scale.value=" "+100*Math.round(t/100)}getScale(){return cM(this.getMap())}print(t){t=t||{},t.size&&this.setSize(t.size),t.scale&&this.setScale(t.scale),t.orientation&&this.setOrientation(t.orientation),t.margin&&this.setMargin(t.margin),this._printDialog.show()}getrintControl(){return this._printCtrl}};dM.prototype._labels={en:{title:"Print",orientation:"Orientation",portrait:"Portrait",landscape:"Landscape",size:"Page size",custom:"screen size",margin:"Margin",scale:"Scale",legend:"Legend",north:"North arrow",mapTitle:"Map title",saveas:"Save as...",saveLegend:"Save legend...",copied:" Copied to clipboard",errorMsg:"Can't save map canvas...",printBt:"Print...",clipboardFormat:"copy to clipboard...",jpegFormat:"save as jpeg",pngFormat:"save as png",pdfFormat:"save as pdf",none:"none",small:"small",large:"large",cancel:"cancel"},fr:{title:"Imprimer",orientation:"Orientation",portrait:"Portrait",landscape:"Paysage",size:"Taille du papier",custom:"taille cran",margin:"Marges",scale:"Echelle",legend:"Lgende",north:"Flche du nord",mapTitle:"Titre de la carte",saveas:"Enregistrer sous...",saveLegend:"Enregistrer la lgende...",copied:" Carte copie",errorMsg:"Impossible d'enregistrer la carte",printBt:"Imprimer",clipboardFormat:"copier dans le presse-papier...",jpegFormat:"enregistrer un jpeg",pngFormat:"enregistrer un png",pdfFormat:"enregistrer un pdf",none:"aucune",small:"petites",large:"larges",cancel:"annuler"},de:{title:"Drucken",orientation:"Ausrichtung",portrait:"Hochformat",landscape:"Querformat",size:"Papierformat",custom:"Bildschirmgre",margin:"Rand",scale:"Mastab",legend:"Legende",north:"Nordpfeil",mapTitle:"Kartentitel",saveas:"Speichern als...",saveLegend:"Legende speichern...",copied:" In die Zwischenablage kopiert",errorMsg:"Kann Karte nicht speichern...",printBt:"Drucken...",clipboardFormat:"in die Zwischenablage kopieren...",jpegFormat:"speichern als jpeg",pngFormat:"speichern als png",pdfFormat:"speichern als pdf",none:"kein",small:"klein",large:"gro",cancel:"abbrechen"},zh:{title:"",orientation:"",portrait:"",landscape:"",size:"",custom:"",margin:"",scale:"",legend:"",north:"",mapTitle:"",saveas:"...",saveLegend:"...",copied:" ",errorMsg:"...",printBt:"...",cancel:""}},dM.prototype.paperSize={"":null,A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],"US Letter":[215.9,279.4],A5:[148,210],B4:[257,364],B5:[182,257]},dM.prototype.marginSize={none:0,small:5,large:10},dM.prototype.formats=[{title:"clipboardFormat",imageType:"image/png",clipboard:!0},{title:"jpegFormat",imageType:"image/jpeg",quality:.8},{title:"pngFormat",imageType:"image/png",quality:.8},{title:"pdfFormat",imageType:"image/jpeg",pdf:!0}],dM.prototype.scales={" 5000":"1/5.000"," 10000":"1/10.000"," 25000":"1/25.000"," 50000":"1/50.000"," 100000":"1/100.000"," 250000":"1/250.000"," 1000000":"1/1.000.000"};var fM=dM,pM=class extends Cw{constructor(t){t=t||{};var e=(t.className||"")+" ol-search"+(t.target?"":" ol-unselectable ol-control"),n=_R.create("DIV",{className:e});super({element:n,target:t.target});var i=this;if(void 0==t.typing&&(t.typing=300),this._classname=t.className||"search",!1!==t.collapsed&&n.classList.add("ol-collapsed"),t.target||(this.button=document.createElement("BUTTON"),this.button.setAttribute("type","button"),this.button.setAttribute("title",t.title||t.label||"Search"),this.button.addEventListener("click",(function(){if(n.classList.toggle("ol-collapsed"),!n.classList.contains("ol-collapsed")){n.querySelector("input.search").focus();for(var t=n.querySelectorAll("li"),e=0;e<t.length;e++)t[e].classList.remove("select");a.value||i.drawList_()}})),n.appendChild(this.button)),t.inputLabel){var r=document.createElement("LABEL");r.innerText=t.inputLabel,n.appendChild(r)}var s,o="",a=this._input=document.createElement("INPUT");a.setAttribute("type","search"),a.setAttribute("class","search"),a.setAttribute("autocomplete","off"),a.setAttribute("placeholder",t.placeholder||"Search..."),a.addEventListener("change",(function(t){i.dispatchEvent({type:"change:input",input:t,value:a.value})}));var l=function(e){var r=n.querySelector("ul.autocomplete li.select"),l=a.value;if("ArrowDown"==e.key||"ArrowUp"==e.key||"Down"==e.key||"Up"==e.key)r?(r.classList.remove("select"),r=/Down/.test(e.key)?r.nextElementSibling:r.previousElementSibling,r&&r.classList.add("select")):n.querySelector("ul.autocomplete li").classList.add("select");else if("input"!=e.type||l)if(!r||"search"!=e.type&&"Enter"!=e.key)if("search"==e.type||"Enter"==e.key||o!=l&&t.typing>=0)if(o=l,o){s&&clearTimeout(s);var c=i.get("minLength");s=setTimeout((function(){if(o.length>=c){var t=i.autocomplete(o,(function(t){i.drawList_(t)}));t&&i.drawList_(t)}else i.drawList_()}),t.typing)}else i.drawList_();else r=n.querySelector("ul.autocomplete li"),r&&r.classList.remove("select");else n.classList.contains("ol-control")&&a.blur(),r.classList.remove("select"),o=l,i._handleSelect(i._list[r.getAttribute("data-search")]);else setTimeout((function(){i.drawList_()}),200)};if(a.addEventListener("keyup",l),a.addEventListener("search",l),a.addEventListener("cut",l),a.addEventListener("paste",l),a.addEventListener("input",l),t.noCollapse||(a.addEventListener("blur",function(){setTimeout(function(){a!==document.activeElement&&(n.classList.add("ol-collapsed"),this.set("reverse",!1),n.classList.remove("ol-revers"))}.bind(this),200)}.bind(this)),a.addEventListener("focus",function(){this.get("reverse")||(n.classList.remove("ol-collapsed"),n.classList.remove("ol-revers"))}.bind(this))),n.appendChild(a),t.reverse){var c=_R.create("BUTTON",{type:"button",class:"ol-revers",title:t.reverseTitle||"click on the map",click:function(){this.get("reverse")?this.set("reverse",!1):(this.set("reverse",!this.get("reverse")),a.focus(),n.classList.add("ol-revers"))}.bind(this)});n.appendChild(c)}var u=document.createElement("UL");u.classList.add("autocomplete"),n.appendChild(u),"function"==typeof t.getTitle&&(this.getTitle=t.getTitle),"function"==typeof t.autocomplete&&(this.autocomplete=t.autocomplete),this.set("copy",t.copy),this.set("minLength",t.minLength||1),this.set("maxItems",t.maxItems||10),this.set("maxHistory",t.maxHistory||t.maxItems||10),t.onselect&&this.on("select",t.onselect),t.centerOnSelect&&this.on("select",function(t){var e=this.getMap();e&&e.getView().setCenter(t.coordinate)}.bind(this)),t.zoomOnSelect&&this.on("select",function(e){var n=this.getMap();n&&(n.getView().setCenter(e.coordinate),n.getView().getZoom()<t.zoomOnSelect&&n.getView().setZoom(t.zoomOnSelect))}.bind(this)),this.restoreHistory(),this.drawList_()}setMap(t){this._listener&&k(this._listener),this._listener=null,super.setMap(t),t&&(this._listener=t.on("click",this._handleClick.bind(this)))}collapse(t){!1===t?this.element.classList.remove("ol-collapsed"):this.element.classList.add("ol-collapsed")}getInputField(){return this._input}getTitle(t){return t.name||"No title"}_getTitleTxt(t){return _R.create("DIV",{html:this.getTitle(t)}).innerText}search(){var t=this.element.querySelector("input.search");this._triggerCustomEvent("search",t)}_handleClick(t){this.get("reverse")&&(document.activeElement.blur(),this.reverseGeocode(t.coordinate))}reverseGeocode(){}_triggerCustomEvent(t,e){_R.dispatchEvent(t,e)}setInput(t,e){var n=this.element.querySelector("input.search");n.value=t,e&&this._triggerCustomEvent("keyup",n)}select(t,e,n,i){var r={type:"select",search:t,reverse:!!e,coordinate:n};if(i)for(var s in i)r[s]=i[s];this.dispatchEvent(r)}_handleSelect(t,e,n){if(t){var i,r=this.get("history");try{var s=JSON.stringify(t);for(i=r.length-1;i>=0;i--)r[i]&&JSON.stringify(r[i])!==s||r.splice(i,1)}catch(Rdt){for(i=r.length-1;i>=0;i--)r[i]===t&&r.splice(i,1)}r.unshift(t);var o=Math.max(0,this.get("maxHistory")||10)||0;while(r.length>o)r.pop();this.saveHistory(),this.select(t,e,null,n),e&&(this.setInput(this._getTitleTxt(t)),this.drawList_(),setTimeout(function(){this.collapse(!1)}.bind(this),300))}}saveHistory(){try{this.get("maxHistory")>=0?localStorage["ol@search-"+this._classname]=JSON.stringify(this.get("history")):localStorage.removeItem("ol@search-"+this._classname)}catch(Rdt){console.warn("Failed to access localStorage...")}}restoreHistory(){if(this._history[this._classname])this.set("history",this._history[this._classname]);else try{this._history[this._classname]=JSON.parse(localStorage["ol@search-"+this._classname]),this.set("history",this._history[this._classname])}catch(Rdt){this.set("history",[])}}clearHistory(){this.set("history",[]),this.saveHistory(),this.drawList_()}getHistory(){return this.get("history")}autocomplete(t,e){return e([]),!1}drawList_(t){var e=this,n=this.element.querySelector("ul.autocomplete");if(n.innerHTML="",this._list=[],t)n.setAttribute("class","autocomplete");else{var i=this.element.querySelector("input.search"),r=i.value;if(r)return;t=this.get("history"),n.setAttribute("class","autocomplete history")}for(var s,o=Math.min(e.get("maxItems"),t.length),a=0;a<o;a++)if(t[a]&&(!a||!e.equalFeatures(t[a],t[a-1]))){s=document.createElement("LI"),s.setAttribute("data-search",this._list.length),this._list.push(t[a]),s.addEventListener("click",(function(t){e._handleSelect(e._list[t.currentTarget.getAttribute("data-search")])}));var l=e.getTitle(t[a]);l instanceof Element?s.appendChild(l):s.innerHTML=l,n.appendChild(s)}o&&this.get("copy")&&(s=document.createElement("LI"),s.classList.add("copy"),s.innerHTML=this.get("copy"),n.appendChild(s))}equalFeatures(){return!1}};pM.prototype._history={};var gM=pM,mM=class extends Cw{constructor(t){t=t||{};var e=document.createElement("div");super({element:e}),e.className=(t.className||"ol-swipe")+" ol-unselectable ol-control";var n=document.createElement("button");e.appendChild(n),e.addEventListener("mousedown",this.move.bind(this)),e.addEventListener("touchstart",this.move.bind(this)),this.precomposeRight_=this.precomposeRight.bind(this),this.precomposeLeft_=this.precomposeLeft.bind(this),this.postcompose_=this.postcompose.bind(this),this.layers=[],t.layers&&this.addLayer(t.layers,!1),t.rightLayers&&this.addLayer(t.rightLayers,!0),this.on("propertychange",function(t){if(this.getMap())try{this.getMap().renderSync()}catch(t){}"horizontal"===this.get("orientation")?(this.element.style.top=100*this.get("position")+"%",this.element.style.left=""):("vertical"!==this.get("orientation")&&this.set("orientation","vertical"),this.element.style.left=100*this.get("position")+"%",this.element.style.top=""),"orientation"===t.key&&(this.element.classList.remove("horizontal","vertical"),this.element.classList.add(this.get("orientation"))),this.isMoving||this.layers.forEach((function(t){t.layer.getImageRatio&&t.layer.changed()}))}.bind(this)),this.set("position",t.position||.5),this.set("orientation",t.orientation||"vertical")}setMap(t){var e,n;if(this.getMap()){for(e=0;e<this.layers.length;e++)n=this.layers[e],n.right?n.layer.un(["precompose","prerender"],this.precomposeRight_):n.layer.un(["precompose","prerender"],this.precomposeLeft_),n.layer.un(["postcompose","postrender"],this.postcompose_);try{this.getMap().renderSync()}catch(Rdt){}}if(super.setMap(t),t){for(this._listener=[],e=0;e<this.layers.length;e++)n=this.layers[e],n.right?n.layer.on(["precompose","prerender"],this.precomposeRight_):n.layer.on(["precompose","prerender"],this.precomposeLeft_),n.layer.on(["postcompose","postrender"],this.postcompose_);try{t.renderSync()}catch(Rdt){}}}isLayer_(t){for(var e=0;e<this.layers.length;e++)if(this.layers[e].layer===t)return e;return-1}addLayer(t,e){t instanceof Array||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if(this.isLayer_(i)<0&&(this.layers.push({layer:i,right:e}),this.getMap())){e?i.on(["precompose","prerender"],this.precomposeRight_):i.on(["precompose","prerender"],this.precomposeLeft_),i.on(["postcompose","postrender"],this.postcompose_);try{this.getMap().renderSync()}catch(Rdt){}}}}removeLayers(){var t=[];this.layers.forEach((function(e){t.push(e.layer)})),this.removeLayer(t)}removeLayer(t){t instanceof Array||(t=[t]);for(var e=0;e<t.length;e++){var n=this.isLayer_(t[e]);n>=0&&this.getMap()&&(this.layers[n].right?t[e].un(["precompose","prerender"],this.precomposeRight_):t[e].un(["precompose","prerender"],this.precomposeLeft_),t[e].un(["postcompose","postrender"],this.postcompose_),this.layers.splice(n,1))}if(this.getMap())try{this.getMap().renderSync()}catch(Rdt){}}getRectangle(){var t;return"vertical"===this.get("orientation")?(t=this.getMap().getSize(),[0,0,t[0]*this.get("position"),t[1]]):(t=this.getMap().getSize(),[0,0,t[0],t[1]*this.get("position")])}move(t){var e,n=this;switch(this._movefn||(this._movefn=this.move.bind(this)),t.type){case"touchcancel":case"touchend":case"mouseup":n.isMoving=!1,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach((function(t){document.removeEventListener(t,n._movefn)})),this.layers.forEach((function(t){t.layer.getImageRatio&&t.layer.changed()}));break;case"mousedown":case"touchstart":n.isMoving=!0,["mouseup","mousemove","touchend","touchcancel","touchmove"].forEach((function(t){document.addEventListener(t,n._movefn)}));case"mousemove":case"touchmove":if(n.isMoving)if("vertical"===n.get("orientation")){var i=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX;if(!i)break;i-=n.getMap().getTargetElement().getBoundingClientRect().left+window.pageXOffset-document.documentElement.clientLeft,e=n.getMap().getSize()[0];var r=e-Math.min(Math.max(0,e-i),e);e=r/e,n.set("position",e),n.dispatchEvent({type:"moving",size:[r,n.getMap().getSize()[1]],position:[e,0]})}else{var s=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;if(!s)break;s-=n.getMap().getTargetElement().getBoundingClientRect().top+window.pageYOffset-document.documentElement.clientTop,e=n.getMap().getSize()[1];var o=e-Math.min(Math.max(0,e-s),e);e=o/e,n.set("position",e),n.dispatchEvent({type:"moving",size:[n.getMap().getSize()[0],o],position:[0,e]})}break;default:break}}_transformPt(t,e){var n=t.inversePixelTransform,i=e[0],r=e[1];return e[0]=n[0]*i+n[2]*r+n[4],e[1]=n[1]*i+n[3]*r+n[5],e}_drawRect(t,e){var n=t.inversePixelTransform;if(n){var i=[[e[0][0],e[0][1]],[e[0][0],e[1][1]],[e[1][0],e[1][1]],[e[1][0],e[0][1]],[e[0][0],e[0][1]]];if(t.context.save(),t.target.getImageRatio){var r=-Math.atan2(t.frameState.pixelToCoordinateTransform[1],t.frameState.pixelToCoordinateTransform[0]);t.context.translate(t.frameState.size[0]/2,t.frameState.size[1]/2),t.context.rotate(r),t.context.translate(-t.frameState.size[0]/2,-t.frameState.size[1]/2)}i.forEach((function(e,i){e=[e[0]*n[0]-e[1]*n[1]+n[4],-e[0]*n[2]+e[1]*n[3]+n[5]],i?t.context.lineTo(e[0],e[1]):t.context.moveTo(e[0],e[1])})),t.context.restore()}else{var s=t.frameState.pixelRatio;t.context.rect(e[0][0]*s,e[0][1]*s,e[1][0]*s,e[1][1]*s)}}precomposeLeft(t){var e=t.context;if(e instanceof WebGLRenderingContext){if("prerender"===t.type){e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.SCISSOR_TEST);var n,i,r=this.getMap().getSize(),s=this._transformPt(t,[0,r[1]]),o=this._transformPt(t,[r[0],0]),a=o[0]-s[0],l=o[1]-s[1];"vertical"===this.get("orientation")?(n=Math.round(a*this.get("position")),i=l):(n=a,i=Math.round(l*this.get("position")),s[1]+=l-i),e.scissor(s[0],s[1],n,i)}}else{var c=t.frameState.size;e.save(),e.beginPath();var u=[[0,0],[c[0],c[1]]];"vertical"===this.get("orientation")?u[1]=[.5*c[0]+this.getMap().getSize()[0]*(this.get("position")-.5),c[1]]:u[1]=[c[0],.5*c[1]+this.getMap().getSize()[1]*(this.get("position")-.5)],this._drawRect(t,u),e.clip()}}precomposeRight(t){var e=t.context;if(e instanceof WebGLRenderingContext){if("prerender"===t.type){e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT),e.enable(e.SCISSOR_TEST);var n,i,r=this.getMap().getSize(),s=this._transformPt(t,[0,r[1]]),o=this._transformPt(t,[r[0],0]),a=o[0]-s[0],l=o[1]-s[1];"vertical"===this.get("orientation")?(i=l,n=Math.round(a*(1-this.get("position"))),s[0]+=a-n):(n=a,i=Math.round(l*(1-this.get("position")))),e.scissor(s[0],s[1],n,i)}}else{var c=t.frameState.size;e.save(),e.beginPath();var u=[[0,0],[c[0],c[1]]];"vertical"===this.get("orientation")?u[0]=[.5*c[0]+this.getMap().getSize()[0]*(this.get("position")-.5),0]:u[0]=[0,.5*c[1]+this.getMap().getSize()[1]*(this.get("position")-.5)],this._drawRect(t,u),e.clip()}}postcompose(t){if(t.context instanceof WebGLRenderingContext){if("postrender"===t.type){var e=t.context;e.disable(e.SCISSOR_TEST)}}else t.target.getClassName&&"ol-layer"!==t.target.getClassName()&&t.target.get("declutter")?setTimeout((function(){t.context.restore()}),0):t.context.restore()}},vM=mM,yM=class extends xR{constructor(t){t=t||{},t.toggleFn&&(t.onToggle=t.toggleFn),t.handleClick=function(){e.toggle(),t.onToggle&&t.onToggle.call(e,e.getActive())},t.className=(t.className||"")+" ol-toggle",super(t);var e=this;this.interaction_=t.interaction,this.interaction_&&(this.interaction_.setActive(t.active),this.interaction_.on("change:active",(function(){e.setActive(e.interaction_.getActive())}))),this.set("title",t.title),this.set("autoActivate",t.autoActivate),t.bar&&this.setSubBar(t.bar),this.setActive(t.active),this.setDisable(t.disable)}setMap(t){!t&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),super.setMap(t),t&&(this.interaction_&&t.addInteraction(this.interaction_),this.subbar_&&t.addControl(this.subbar_))}getSubBar(){return this.subbar_}setSubBar(t){var e=this.getMap();e&&this.subbar_&&e.removeControl(this.subbar_),this.subbar_=t,t&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),e&&e.addControl(this.subbar_))}getDisable(){var t=this.element.querySelector("button");return t&&t.disabled}setDisable(t){this.getDisable()!=t&&(this.element.querySelector("button").disabled=t,t&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!t,disable:t}))}getActive(){return this.element.classList.contains("ol-active")}toggle(){this.getActive()?this.setActive(!1):this.setActive(!0)}setActive(t){this.interaction_&&this.interaction_.setActive(t),this.subbar_&&this.subbar_.setActive(t),this.getActive()!==t&&(t?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.dispatchEvent({type:"change:active",key:"active",oldValue:!t,active:t}))}setInteraction(t){this.interaction_=t}getInteraction(){return this.interaction_}},wM=yM,_M=class extends Cw{constructor(t){t=t||{};var e=_R.create("DIV",{className:(t.className||"ol-videorec")+" ol-unselectable ol-control"});super({element:e,target:t.target}),_R.create("BUTTON",{type:"button",className:"ol-start",title:_M.prototype.tips.start,click:function(){this.start()}.bind(this),parent:e}),_R.create("BUTTON",{type:"button",className:"ol-stop",title:_M.prototype.tips.stop,click:function(){this.stop()}.bind(this),parent:e}),_R.create("BUTTON",{type:"button",className:"ol-pause",title:_M.prototype.tips.pause,click:function(){this.pause()}.bind(this),parent:e}),_R.create("BUTTON",{type:"button",className:"ol-resume",title:_M.prototype.tips.resume,click:function(){this.resume()}.bind(this),parent:e}),this.set("framerate",30),this.set("videoBitsPerSecond",5e6),"DIALOG"===t.videoTarget?(this._dialog=new ZR({className:"ol-fullscreen-dialog",target:document.body,closeBox:!0}),this._videoTarget=this._dialog.getContentElement()):this._videoTarget=t.videoTarget,this._printCtrl=new oM({target:_R.create("DIV")})}setTooltip(t,e){var n=this.element.querySelector("button.ol-"+t);n&&(n.title=e)}setMap(t){this.getMap()&&(this.getMap().removeControl(this._printCtrl),this._dialog&&this.getMap().removeControl(this._dialog)),super.setMap(t),this.getMap()&&(this.getMap().addControl(this._printCtrl),this._dialog&&this.getMap().addControl(this._dialog))}start(){var t=this._printCtrl,e=!1;function n(i){e||t.fastPrint({canvas:i},n)}t.fastPrint({},function(t){var i;try{i=t.captureStream(this.get("framerate")||30)}catch(Rdt){return void this.dispatchEvent({type:"error",error:Rdt})}this._mediaRecorder=new MediaRecorder(i,{videoBitsPerSecond:this.get("videoBitsPerSecond")||5e6});var r=[];this._mediaRecorder.ondataavailable=function(t){r.push(t.data)},this._mediaRecorder.onstop=function(){e=!0;var t,n=new Blob(r,{type:"video/mp4"});(r=[],this._videoTarget instanceof Element)?("VIDEO"===this._videoTarget.tagName?t=this._videoTarget:(t=this._videoTarget.querySelector("video"),t||(t=_R.create("VIDEO",{controls:"",parent:this._videoTarget}))),this._dialog&&this._dialog.show(),t.src=URL.createObjectURL(n),this.dispatchEvent({type:"stop",videoURL:t.src})):this.dispatchEvent({type:"stop",videoURL:URL.createObjectURL(n)})}.bind(this),this._mediaRecorder.onpause=function(){e=!0,this.dispatchEvent({type:"pause"})}.bind(this),this._mediaRecorder.onresume=function(){e=!1,n(t),this.dispatchEvent({type:"resume"})}.bind(this),this._mediaRecorder.onerror=function(t){this.dispatchEvent({type:"error",error:t})}.bind(this),e=!1,n(t),this._mediaRecorder.start(),this.dispatchEvent({type:"start",canvas:t}),this.element.setAttribute("data-state","rec")}.bind(this))}stop(){this._mediaRecorder&&(this._mediaRecorder.stop(),this._mediaRecorder=null,this.element.setAttribute("data-state","inactive"))}pause(){this._mediaRecorder&&(this._mediaRecorder.pause(),this.element.setAttribute("data-state","pause"))}resume(){this._mediaRecorder&&(this._mediaRecorder.resume(),this.element.setAttribute("data-state","rec"))}};_M.prototype.tips={start:"start video",stop:"stop",pause:"pause",resume:"resume"};var bM=_M,xM=class extends Cw{constructor(t){t=t||{};var e=e=_R.create("DIV",{className:t.className||"ol-mapzone"});if(super({element:e,target:t.target}),!t.target){["ol-unselectable","ol-control","ol-collapsed"].forEach((function(t){e.classList.add(t)}));var n=_R.create("BUTTON",{type:"button",on:{click:function(){e.classList.toggle("ol-collapsed"),i.forEach((function(t){t.updateSize()}))}.bind(this)},parent:e});_R.create("I",{parent:n})}this.set("centerOnClick",t.centerOnClick);var i=this._maps=[];this._projection=t.projection,this._layer=t.layer,t.zones.forEach(this.addZone.bind(this)),setTimeout((function(){i.forEach((function(t){t.updateSize()}))}))}setCollapsed(t){t?(this.element.classList.remove("ol-collapsed"),this.getMaps().forEach((function(t){t.updateSize()}))):this.element.classList.add("ol-collapsed")}setVisible(t){this.setCollapsed(!t)}getCollapsed(){return this.element.classList.contains("ol-collapsed")}getMaps(){return this._maps}getLength(){return this._maps.length}addZone(t){var e,n=new cv({zoom:6,center:[0,0],projection:this._projection});e=t.map?Bn(t.map.getView().calculateExtent(),t.map.getView().getProjection(),n.getProjection()):Bn(t.extent,"EPSG:4326",n.getProjection());var i,r=_R.create("DIV",{className:"ol-mapzonezone",parent:this.element,click:function(){var n=-1;this._maps.forEach((function(e,i){e.get("zone")===t&&(n=i)})),this.dispatchEvent({type:"select",zone:t,index:n,coordinate:Gt(e),extent:e}),!1!==this.get("centerOnClick")&&this.getMap().getView().fit(e),this.setVisible(!1)}.bind(this)});i=t.layer?t.layer:"function"===typeof this._layer?this._layer(t):new this._layer.constructor({source:this._layer.getSource()});var s=new y_({target:r,view:n,controls:[],interactions:[],layers:[i]});s.set("zone",t),this._maps.push(s),n.fit(e),_R.create("P",{html:t.title,parent:r})}removeZone(t){var e=this.element.querySelectorAll(".ol-mapzonezone")[t];e&&(e.remove(),this._maps.splice(t,1))}};xM.zones={},xM.zones.DOM=[{title:"Guadeloupe",extent:[-61.898594315312444,15.75623038647845,-60.957887532935324,16.575317670979473]},{title:"Guyane",extent:[-54.72525931072715,2.1603763430019,-51.528236062921344,5.7984307809552575]},{title:"Martinique",extent:[-61.257556528564756,14.387506317407514,-60.76934912110432,14.895067461729951]},{title:"Mayotte",extent:[44.959844536967815,-13.01674138212816,45.35328866510648,-12.65521942207829]},{title:"La runion",extent:[55.17059012967656,-21.407680069231688,55.88195702001797,-20.85560221637526]}],xM.zones.TOM=[{title:"Polynsie Franaise",extent:[206.23664226630862,-22.189040615809787,221.85920743981987,-10.835039595040698]},{title:"Nouvelle Caldonie",extent:[163.76420580160925,-22.581641092751838,167.66984709498706,-19.816411635668445]},{title:"St-Pierre et Miquelon",extent:[-56.453698765748676,46.74449858188555,-56.0980198121544,47.14669874229787]},{title:"Wallis et Futuna",extent:[181.7588623143665,-14.7341169873267,183.95612353301715,-13.134720799175085]},{title:"St-Martin St-Barthlemy",extent:[-63.1726389501678,17.806097291313506,-62.7606535945649,18.13267688837938]}],xM.zones.DOMTOM=[{title:"Mtropole",extent:[-5.318421740712579,41.16082274292913,9.73284186155716,51.21957336557702]}].concat(xM.zones.DOM,xM.zones.TOM);var EM=xM;const CM={VERTICAL:0,HORIZONTAL:1};class SM extends Cw{constructor(t){t=t||{},super({target:t.target,element:document.createElement("div"),render:t.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=CM.VERTICAL,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==t.duration?t.duration:200;const e=void 0!==t.className?t.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=e+"-thumb "+Jl;const i=this.element;i.className=e+" "+Jl+" "+ec,i.appendChild(n),i.addEventListener(Aw.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),i.addEventListener(Aw.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),i.addEventListener(Aw.POINTERUP,this.handleDraggerEnd_.bind(this),!1),i.addEventListener(R.CLICK,this.handleContainerClick_.bind(this),!1),n.addEventListener(R.CLICK,u,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){const t=this.element;let e=t.offsetWidth,n=t.offsetHeight;if(0===e&&0===n)return this.sliderInitialized_=!1;const i=getComputedStyle(t);e-=parseFloat(i["paddingRight"])+parseFloat(i["paddingLeft"]),n-=parseFloat(i["paddingTop"])+parseFloat(i["paddingBottom"]);const r=t.firstElementChild,s=getComputedStyle(r),o=r.offsetWidth+parseFloat(s["marginRight"])+parseFloat(s["marginLeft"]),a=r.offsetHeight+parseFloat(s["marginTop"])+parseFloat(s["marginBottom"]);return this.thumbSize_=[o,a],e>n?(this.direction_=CM.HORIZONTAL,this.widthLimit_=e-o):(this.direction_=CM.VERTICAL,this.heightLimit_=n-a),this.sliderInitialized_=!0}handleContainerClick_(t){const e=this.getMap().getView(),n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(n),r=e.getConstrainedZoom(e.getZoomForResolution(i));e.animateInternal({zoom:r,duration:this.duration_,easing:wm})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){const e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const t=this.handleDraggerDrag_,e=this.handleDraggerEnd_,n=this.getMap().getOwnerDocument();this.dragListenerKeys_.push(M(n,Aw.POINTERMOVE,t,this),M(n,Aw.POINTERUP,e,this))}}}handleDraggerDrag_(t){if(this.dragging_){const e=t.clientX-this.startX_,n=t.clientY-this.startY_,i=this.getRelativePosition_(e,n);this.currentResolution_=this.getResolutionForPosition_(i),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){if(this.dragging_){const t=this.getMap().getView();t.endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(N),this.dragListenerKeys_.length=0}}setThumbPosition_(t){const e=this.getPositionForResolution_(t),n=this.element.firstElementChild;this.direction_==CM.HORIZONTAL?n.style.left=this.widthLimit_*e+"px":n.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let n;return n=this.direction_===CM.HORIZONTAL?t/this.widthLimit_:e/this.heightLimit_,Me(n,0,1)}getResolutionForPosition_(t){const e=this.getMap().getView().getResolutionForValueFunction();return e(1-t)}getPositionForResolution_(t){const e=this.getMap().getView().getValueForResolutionFunction();return Me(1-e(t),0,1)}render(t){if(!t.frameState)return;if(!this.sliderInitialized_&&!this.initSlider_())return;const e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}var BM=SM;class TM extends Cw{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.extent=t.extent?t.extent:null;const e=void 0!==t.className?t.className:"ol-zoom-extent",n=void 0!==t.label?t.label:"E",i=void 0!==t.tipLabel?t.tipLabel:"Fit to extent",r=document.createElement("button");r.setAttribute("type","button"),r.title=i,r.appendChild("string"===typeof n?document.createTextNode(n):n),r.addEventListener(R.CLICK,this.handleClick_.bind(this),!1);const s=e+" "+Jl+" "+ec,o=this.element;o.className=s,o.appendChild(r)}handleClick_(t){t.preventDefault(),this.handleZoomToExtent()}handleZoomToExtent(){const t=this.getMap(),e=t.getView(),n=this.extent?Mn(this.extent,e.getProjection()):e.getProjection().getExtent();e.fitInternal(or(n))}}var IM=TM;const FM={DRAWSTART:"drawstart",DRAWEND:"drawend",DRAWABORT:"drawabort"};class LM extends h{constructor(t,e){super(t),this.feature=e}}function RM(t,e){const n=[];for(let i=0;i<e.length;++i){const r=e[i],s=r.getGeometry();OM(t,s,n)}return n}function MM(t,e){return Ne(t[0],t[1],e[0],e[1])}function PM(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function NM(t,e,n){let i,r;e<n?(i=e,r=n):(i=n,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o){const e=HM(t,i),n=HM(t,r);return MM(e,n)}let a=0;if(i<s){const e=HM(t,i),n=PM(t,s);a+=MM(e,n)}if(o<r){const e=PM(t,o),n=HM(t,r);a+=MM(e,n)}for(let l=s;l<o-1;++l){const e=PM(t,l),n=PM(t,l+1);a+=MM(e,n)}return a}function OM(t,e,n){if(e instanceof Gi)UM(t,e.getCoordinates(),!1,n);else if(e instanceof Vi){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e)UM(t,i[e],!1,n)}else if(e instanceof rr){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e)UM(t,i[e],!0,n)}else if(e instanceof hr){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e){const r=i[e];for(let e=0,i=r.length;e<i;++e)UM(t,r[e],!0,n)}}else if(e instanceof ri){const i=e.getGeometries();for(let e=0;e<i.length;++e)OM(t,i[e],n)}else;}const kM={index:-1,endIndex:NaN};function DM(t,e,n,i){const r=t[0],s=t[1];let o=1/0,a=-1,l=NaN;for(let h=0;h<e.targets.length;++h){const t=e.targets[h],n=t.coordinates;let i,c=1/0;for(let e=0;e<n.length-1;++e){const t=n[e],o=n[e+1],a=GM(r,s,t,o);a.squaredDistance<c&&(c=a.squaredDistance,i=e+a.along)}c<o&&(o=c,t.ring&&e.targetIndex===h&&(t.endIndex>t.startIndex?i<t.startIndex&&(i+=n.length):t.endIndex<t.startIndex&&i>t.startIndex&&(i-=n.length)),l=i,a=h)}const c=e.targets[a];let u=c.ring;if(e.targetIndex===a&&u){const t=HM(c.coordinates,l),r=n.getPixelFromCoordinate(t);Ze(r,e.startPx)>i&&(u=!1)}if(u){const t=c.coordinates,e=t.length,n=c.startIndex,i=l;if(n<i){const r=NM(t,n,i),s=NM(t,n,i-e);s<r&&(l-=e)}else{const r=NM(t,n,i),s=NM(t,n,i+e);s<r&&(l+=e)}}return kM.index=a,kM.endIndex=l,kM}function UM(t,e,n,i){const r=t[0],s=t[1];for(let o=0,a=e.length-1;o<a;++o){const t=e[o],a=e[o+1],l=GM(r,s,t,a);if(0===l.squaredDistance){const t=o+l.along;return void i.push({coordinates:e,ring:n,startIndex:t,endIndex:t})}}}const QM={along:0,squaredDistance:0};function GM(t,e,n,i){const r=n[0],s=n[1],o=i[0],a=i[1],l=o-r,c=a-s;let u=0,h=r,A=s;return 0===l&&0===c||(u=Me(((t-r)*l+(e-s)*c)/(l*l+c*c),0,1),h+=l*u,A+=c*u),QM.along=u,QM.squaredDistance=Ge(Ne(t,e,h,A),10),QM}function HM(t,e){const n=t.length;let i=Math.floor(e);const r=e-i;i>=n?i-=n:i<0&&(i+=n);let s=i+1;s>=n&&(s-=n);const o=t[i],a=o[0],l=o[1],c=t[s],u=c[0]-a,h=c[1]-l;return[a+u*r,l+h*r]}class VM extends Hw{constructor(t){const e=t;e.stopDown||(e.stopDown=E),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=WM(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:x,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let n=t.geometryFunction;if(!n){const t=this.mode_;if("Circle"===t)n=function(t,e,n){const i=e||new ei([NaN,NaN]),r=Ln(t[0],n),s=Ye(r,Ln(t[t.length-1],n));i.setCenterAndRadius(r,Math.sqrt(s),this.geometryLayout_);const o=In();return o&&i.transform(n,o),i};else{let e;"Point"===t?e=Wi:"LineString"===t?e=Gi:"Polygon"===t&&(e=rr),n=function(n,i,r){return i?"Polygon"===t?n[0].length?i.setCoordinates([n[0].concat([n[0][0]])],this.geometryLayout_):i.setCoordinates([],this.geometryLayout_):i.setCoordinates(n,this.geometryLayout_):i=new e(n,this.geometryLayout_),i}}}this.geometryFunction_=n,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new hx({source:new O_({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:jM(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:um,this.freehandCondition_,t.freehand?this.freehandCondition_=im:this.freehandCondition_=t.freehandCondition?t.freehandCondition:dm,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(Mw.ACTIVE,this.updateState_)}setTrace(t){let e;e=t?!0===t?im:t:om,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===R.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);let e=t.type===Yg.POINTERMOVE,n=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===Yg.POINTERDRAG){const n=Date.now();n-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===Yg.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===Yg.POINTERDOWN?n=!1:e&&this.getPointerCount()<2?(n=t.type===Yg.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===Yg.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t)):t.type===Yg.DBLCLICK&&(n=!1),super.handleEvent(t)&&n}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((()=>{this.handlePointerMove_(new hw(Yg.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),n=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),i=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),r=dt([n,i]),s=this.traceSource_.getFeaturesInExtent(r);if(0===s.length)return;const o=RM(t.coordinate,s);o.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:o,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const n=t.startIndex<=t.endIndex,i=t.startIndex<=e;n===i?n&&e>t.endIndex||!n&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(n&&e<t.endIndex||!n&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let n=0;if(t<e){const i=Math.ceil(t);let r=Math.floor(e);r===e&&(r-=1),n=r-i+1}else{const i=Math.floor(t);let r=Math.ceil(e);r===e&&(r+=1),n=i-r+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(t,e,n){if(e===n)return;const i=[];if(e<n){const r=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1);for(let e=r;e<=s;++e)i.push(PM(t.coordinates,e))}else{const r=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1);for(let e=r;e>=s;--e)i.push(PM(t.coordinates,e))}i.length&&this.appendCoordinates(i)}updateTrace_(t){const e=this.traceState_;if(!e.active)return;if(-1===e.targetIndex&&Ze(e.startPx,t.pixel)<this.snapTolerance_)return;const n=DM(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==n.index){if(-1!==e.targetIndex){const t=e.targets[e.targetIndex];this.removeTracedCoordinates_(t.startIndex,t.endIndex)}const t=e.targets[n.index];this.addTracedCoordinates_(t,t.startIndex,n.endIndex)}else{const t=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(t,n.endIndex)}e.targetIndex=n.index;const i=e.targets[e.targetIndex];i.endIndex=n.endIndex;const r=HM(i.coordinates,i.endIndex),s=this.getMap().getPixelFromCoordinate(r);t.coordinate=r,t.pixel=[Math.round(s[0]),Math.round(s[1])]}handleUpEvent(t){let e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const n=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():this.freehand_||i&&"Point"!==this.mode_||(this.atFinish_(t.pixel,n)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,n=t.pixel,i=e[0]-n[0],r=e[1]-n[1],s=i*i+r*r;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let n=!1;if(this.sketchFeature_){let i=!1,r=[this.finishCoordinate_];const s=this.mode_;if("Point"===s)n=!0;else if("Circle"===s)n=2===this.sketchCoords_.length;else if("LineString"===s)i=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===s){const t=this.sketchCoords_;i=t[0].length>this.minPoints_,r=[t[0][0],t[0][t[0].length-2]],r=e?[t[0][0]]:[t[0][0],t[0][t[0].length-2]]}if(i){const e=this.getMap();for(let i=0,s=r.length;i<s;i++){const s=r[i],o=e.getPixelFromCoordinate(s),a=t[0]-o[0],l=t[1]-o[1],c=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(a*a+l*l)<=c,n){this.finishCoordinate_=s;break}}}}return n}createOrUpdateSketchPoint_(t){if(this.sketchPoint_){const e=this.sketchPoint_.getGeometry();e.setCoordinates(t)}else this.sketchPoint_=new $(new Wi(t)),this.updateSketchFeatures_()}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new $);const e=t.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new Gi(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(t){const e=this.getMap().getView().getProjection(),n=Kn(this.geometryLayout_);while(t.length<n)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new $(new Gi(this.sketchLineCoords_)));const i=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new $,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(i),this.updateSketchFeatures_(),this.dispatchEvent(new LM(FM.DRAWSTART,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),n=this.sketchFeature_.getGeometry(),i=e.getView().getProjection(),r=Kn(this.geometryLayout_);let s,o;while(t.length<r)t.push(0);if("Point"===this.mode_?o=this.sketchCoords_:"Polygon"===this.mode_?(s=this.sketchCoords_[0],o=s[s.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(s=this.sketchCoords_,o=s[s.length-1]),o[0]=t[0],o[1]=t[1],this.geometryFunction_(this.sketchCoords_,n,i),this.sketchPoint_){const e=this.sketchPoint_.getGeometry();e.setCoordinates(t)}if("Polygon"===n.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(n);else if(this.sketchLineCoords_){const t=this.sketchLine_.getGeometry();t.setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let i,r;const s=this.mode_;return"LineString"===s||"Circle"===s?(this.finishCoordinate_=t.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():i=!0),r.push(t.slice()),this.geometryFunction_(r,e,n)):"Polygon"===s&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():i=!0),r.push(t.slice()),i&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,e,n)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i=this.mode_;for(let r=0;r<t;++r){let t;if("LineString"===i||"Circle"===i){if(t=this.sketchCoords_,t.splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();const e=this.finishCoordinate_.slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}this.geometryFunction_(t,e,n),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===i){t=this.sketchCoords_[0],t.splice(-2,1);const i=this.sketchLine_.getGeometry();if(t.length>=2){const e=t[t.length-2].slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}i.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,n)}if(1===t.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const n=t.getGeometry(),i=this.getMap().getView().getProjection();return"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,n,i)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,n,i),e=n.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new Ki([e])):"MultiLineString"===this.type_?t.setGeometry(new Vi([e])):"MultiPolygon"===this.type_&&t.setGeometry(new hr([e])),this.dispatchEvent(new LM(FM.DRAWEND,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new LM(FM.DRAWABORT,t))}appendCoordinates(t){const e=this.mode_,n=!this.sketchFeature_;let i;if(n&&this.startDrawing_(t[0]),"LineString"===e||"Circle"===e)i=this.sketchCoords_;else{if("Polygon"!==e)return;i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&i.shift(),i.pop();for(let s=0;s<t.length;s++)this.addToDrawing_(t[s]);const r=t[t.length-1];this.sketchFeature_=this.addToDrawing_(r),this.modifyDrawing_(r)}extend(t){const e=t.getGeometry(),n=e;this.sketchFeature_=t,this.sketchCoords_=n.getCoordinates();const i=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=i.slice(),this.sketchCoords_.push(i.slice()),this.sketchPoint_=new $(new Wi(i)),this.updateSketchFeatures_(),this.dispatchEvent(new LM(FM.DRAWSTART,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function jM(){const t=Dc();return function(e,n){return t[e.getGeometry().getType()]}}function WM(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}var zM=VM;const KM=0,qM=1,$M=[0,0,0,0],XM=[],YM={MODIFYSTART:"modifystart",MODIFYEND:"modifyend"};class ZM extends h{constructor(t,e,n){super(t),this.features=e,this.mapBrowserEvent=n}}class JM extends Hw{constructor(t){let e;if(super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:vm,this.defaultDeleteCondition_=function(t){return Jg(t)&&lm(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:im,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new S_,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new hx({source:new O_({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:iP(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,t.features?e=t.features:t.source&&(this.source_=t.source,e=new Nm(this.source_.getFeatures()),this.source_.addEventListener(F_.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(F_.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(Lm.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(Lm.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===t.snapToPointer?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const n=this.SEGMENT_WRITERS_[e.getType()];n&&n(t,e)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(this.lastPixel_,n),t.addEventListener(R.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new Nm;const n=this.featuresBeingModified_.getArray();for(let t=0,i=e.length;t<i;++t){const i=e[t];for(let t=0,e=i.length;t<e;++t){const e=i[t].feature;e&&!n.includes(e)&&this.featuresBeingModified_.push(e)}}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new ZM(YM.MODIFYSTART,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(R.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(let i=n.length-1;i>=0;--i){const t=n[i];for(let e=this.dragSegments_.length-1;e>=0;--e)this.dragSegments_[e][0]===t&&this.dragSegments_.splice(e,1);e.remove(t)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)}writeMultiPointGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i],s={feature:t,geometry:e,depth:[i],index:i,segment:[r,r]};this.rBush_.insert(e.getExtent(),s)}}writeLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length-1;i<r;++i){const r=n.slice(i,i+2),s={feature:t,geometry:e,index:i,segment:r};this.rBush_.insert(dt(r),s)}}writeMultiLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,s=r.length-1;n<s;++n){const s=r.slice(n,n+2),o={feature:t,geometry:e,depth:[i],index:n,segment:s};this.rBush_.insert(dt(s),o)}}}writePolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,s=r.length-1;n<s;++n){const s=r.slice(n,n+2),o={feature:t,geometry:e,depth:[i],index:n,segment:s};this.rBush_.insert(dt(s),o)}}}writeMultiPolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,s=r.length;n<s;++n){const s=r[n];for(let r=0,o=s.length-1;r<o;++r){const o=s.slice(r,r+2),a={feature:t,geometry:e,depth:[n,i],index:r,segment:o};this.rBush_.insert(dt(o),a)}}}}writeCircleGeometry_(t,e){const n=e.getCenter(),i={feature:t,geometry:e,index:KM,segment:[n,n]},r={feature:t,geometry:e,index:qM,segment:[n,n]},s=[i,r];i.featureSegments=s,r.featureSegments=s,this.rBush_.insert(Ct(n),i);let o=e;const a=In();if(a&&this.getMap()){const t=this.getMap().getView().getProjection();o=o.clone().transform(a,t),o=ar(o).transform(t,a)}this.rBush_.insert(o.getExtent(),r)}writeGeometryCollectionGeometry_(t,e){const n=e.getGeometriesArray();for(let i=0;i<n.length;++i){const e=n[i],r=this.SEGMENT_WRITERS_[e.getType()];r(t,e)}}createOrUpdateVertexFeature_(t,e,n){let i=this.vertexFeature_;if(i){const e=i.getGeometry();e.setCoordinates(t)}else i=new $(new Wi(t)),this.vertexFeature_=i,this.overlay_.getSource().addFeature(i);return i.set("features",e),i.set("geometries",n),i}handleEvent(t){if(!t.originalEvent)return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=Yg.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=Yg.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==Yg.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_);const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],i=[];for(let r=0,s=this.dragSegments_.length;r<s;++r){const s=this.dragSegments_[r],o=s[0],a=o.feature;n.includes(a)||n.push(a);const l=o.geometry;i.includes(l)||i.push(l);const c=o.depth;let u;const h=o.segment,A=s[1];while(e.length<l.getStride())e.push(h[A][e.length]);switch(l.getType()){case"Point":u=e,h[0]=e,h[1]=e;break;case"MultiPoint":u=l.getCoordinates(),u[o.index]=e,h[0]=e,h[1]=e;break;case"LineString":u=l.getCoordinates(),u[o.index+A]=e,h[A]=e;break;case"MultiLineString":u=l.getCoordinates(),u[c[0]][o.index+A]=e,h[A]=e;break;case"Polygon":u=l.getCoordinates(),u[c[0]][o.index+A]=e,h[A]=e;break;case"MultiPolygon":u=l.getCoordinates(),u[c[1]][c[0]][o.index+A]=e,h[A]=e;break;case"Circle":if(h[0]=e,h[1]=e,o.index===KM)this.changingFeature_=!0,l.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;const n=t.map.getView().getProjection();let i=Ze(Ln(l.getCenter(),n),Ln(e,n));const r=In();if(r){const t=l.clone().transform(r,n);t.setRadius(i),i=t.transform(n,r).getRadius()}l.setRadius(i),this.changingFeature_=!1}break;default:}u&&this.setGeometryCoordinates_(l,u)}this.createOrUpdateVertexFeature_(e,n,i)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate;this.handlePointerAtPixel_(t.pixel,t.map,e),this.dragSegments_.length=0,this.featuresBeingModified_=null;const n=this.vertexFeature_;if(n){const i=t.map.getView().getProjection(),r=[],s=n.getGeometry().getCoordinates(),o=dt([s]),a=this.rBush_.getInExtent(o),l={};a.sort(tP);for(let n=0,c=a.length;n<c;++n){const o=a[n],c=o.segment;let u=G(o.geometry);const h=o.depth;if(h&&(u+="-"+h.join("-")),l[u]||(l[u]=new Array(2)),"Circle"!==o.geometry.getType()||o.index!==qM)if(!qe(c[0],s)||l[u][0])if(!qe(c[1],s)||l[u][1])G(c)in this.vertexSegments_&&!l[u][0]&&!l[u][1]&&this.insertVertexCondition_(t)&&r.push(o);else{if(l[u][0]&&0===l[u][0].index){let t=o.geometry.getCoordinates();switch(o.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":t=t[h[1]];case"Polygon":if(o.index!==t[h[0]].length-2)continue;break;default:}}this.dragSegments_.push([o,1]),l[u][1]=o}else this.dragSegments_.push([o,0]),l[u][0]=o;else{const t=nP(e,o,i);qe(t,s)&&!l[u][0]&&(this.dragSegments_.push([o,0]),l[u][0]=o)}}r.length&&this.willModifyFeatures_(t,[r]);for(let t=r.length-1;t>=0;--t)this.insertVertex_(r[t],s)}return!!this.vertexFeature_}handleUpEvent(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const n=this.dragSegments_[e][0],i=n.geometry;if("Circle"===i.getType()){const e=i.getCenter(),r=n.featureSegments[0],s=n.featureSegments[1];r.segment[0]=e,r.segment[1]=e,s.segment[0]=e,s.segment[1]=e,this.rBush_.update(Ct(e),r);let o=i;const a=In();if(a){const e=t.map.getView().getProjection();o=o.clone().transform(a,e),o=ar(o).transform(e,a)}this.rBush_.update(o.getExtent(),s)}else this.rBush_.update(dt(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new ZM(YM.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.pixel,t.map,t.coordinate)}handlePointerAtPixel_(t,e,n){const i=n||e.getCoordinateFromPixel(t),r=e.getView().getProjection(),s=function(t,e){return eP(i,t,r)-eP(i,e,r)};let o,a;if(this.hitDetection_){const n="object"===typeof this.hitDetection_?t=>t===this.hitDetection_:void 0;e.forEachFeatureAtPixel(t,((t,e,n)=>{n&&"Point"===n.getType()&&(n=new Wi(Fn(n.getCoordinates(),r)));const i=n||t.getGeometry();if(t instanceof $&&this.features_.getArray().includes(t)){a=i;const e=t.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:t,geometry:a,segment:[e,e]}]}return!0}),{layerFilter:n})}if(!o){const t=Mn(Ct(i,$M),r),n=e.getView().getResolution()*this.pixelTolerance_,s=Rn(pt(t,n,$M),r);o=this.rBush_.getInExtent(s)}if(o&&o.length>0){const n=o.sort(s)[0],l=n.segment;let c=nP(i,n,r);const u=e.getPixelFromCoordinate(c);let h=Ze(t,u);if(a||h<=this.pixelTolerance_){const t={};if(t[G(l)]=!0,this.snapToPointer_||(this.delta_[0]=c[0]-i[0],this.delta_[1]=c[1]-i[1]),"Circle"===n.geometry.getType()&&n.index===qM)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(c,[n.feature],[n.geometry]);else{const i=e.getPixelFromCoordinate(l[0]),r=e.getPixelFromCoordinate(l[1]),s=Ye(u,i),a=Ye(u,r);h=Math.sqrt(Math.min(s,a)),this.snappedToVertex_=h<=this.pixelTolerance_,this.snappedToVertex_&&(c=s>a?l[1]:l[0]),this.createOrUpdateVertexFeature_(c,[n.feature],[n.geometry]);const A={};A[G(n.geometry)]=!0;for(let e=1,n=o.length;e<n;++e){const n=o[e].segment;if(!(qe(l[0],n[0])&&qe(l[1],n[1])||qe(l[0],n[1])&&qe(l[1],n[0])))break;{const i=G(o[e].geometry);i in A||(A[i]=!0,t[G(n)]=!0)}}}return void(this.vertexSegments_=t)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const n=t.segment,i=t.feature,r=t.geometry,s=t.depth,o=t.index;let a;while(e.length<r.getStride())e.push(0);switch(r.getType()){case"MultiLineString":a=r.getCoordinates(),a[s[0]].splice(o+1,0,e);break;case"Polygon":a=r.getCoordinates(),a[s[0]].splice(o+1,0,e);break;case"MultiPolygon":a=r.getCoordinates(),a[s[1]][s[0]].splice(o+1,0,e);break;case"LineString":a=r.getCoordinates(),a.splice(o+1,0,e);break;default:return}this.setGeometryCoordinates_(r,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(r,o,s,1);const c={segment:[n[0],e],feature:i,geometry:r,depth:s,index:o};l.insert(dt(c.segment),c),this.dragSegments_.push([c,1]);const u={segment:[e,n[1]],feature:i,geometry:r,depth:s,index:o+1};l.insert(dt(u.segment),u),this.dragSegments_.push([u,0]),this.ignoreNextSingleClick_=!0}removePoint(){if(this.lastPointerEvent_&&this.lastPointerEvent_.type!=Yg.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_);const e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new ZM(YM.MODIFYEND,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){const t=this.dragSegments_,e={};let n,i,r,s,o,a,l,c,u,h,A,d=!1;for(o=t.length-1;o>=0;--o)r=t[o],h=r[0],A=G(h.feature),h.depth&&(A+="-"+h.depth.join("-")),A in e||(e[A]={}),0===r[1]?(e[A].right=h,e[A].index=h.index):1==r[1]&&(e[A].left=h,e[A].index=h.index+1);for(A in e){switch(u=e[A].right,l=e[A].left,a=e[A].index,c=a-1,h=void 0!==l?l:u,c<0&&(c=0),s=h.geometry,i=s.getCoordinates(),n=i,d=!1,s.getType()){case"MultiLineString":i[h.depth[0]].length>2&&(i[h.depth[0]].splice(a,1),d=!0);break;case"LineString":i.length>2&&(i.splice(a,1),d=!0);break;case"MultiPolygon":n=n[h.depth[1]];case"Polygon":n=n[h.depth[0]],n.length>4&&(a==n.length-1&&(a=0),n.splice(a,1),d=!0,0===a&&(n.pop(),n.push(n[0]),c=n.length-1));break;default:}if(d){this.setGeometryCoordinates_(s,i);const e=[];if(void 0!==l&&(this.rBush_.remove(l),e.push(l.segment[0])),void 0!==u&&(this.rBush_.remove(u),e.push(u.segment[1])),void 0!==l&&void 0!==u){const t={depth:h.depth,feature:h.feature,geometry:h.geometry,index:c,segment:e};this.rBush_.insert(dt(t.segment),t)}this.updateSegmentIndices_(s,a,h.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return d}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===n||void 0===r.depth||_(r.depth,n))&&r.index>e&&(r.index+=i)}))}}function tP(t,e){return t.index-e.index}function eP(t,e,n){const i=e.geometry;if("Circle"===i.getType()){let r=i;if(e.index===qM){const e=In();e&&(r=r.clone().transform(e,n));const i=Ye(r.getCenter(),Ln(t,n)),s=Math.sqrt(i)-r.getRadius();return s*s}}const r=Ln(t,n);return XM[0]=Ln(e.segment[0],n),XM[1]=Ln(e.segment[1],n),Je(r,XM)}function nP(t,e,n){const i=e.geometry;if("Circle"===i.getType()&&e.index===qM){let e=i;const r=In();return r&&(e=e.clone().transform(r,n)),Fn(e.getClosestPoint(Ln(t,n)),n)}const r=Ln(t,n);return XM[0]=Ln(e.segment[0],n),XM[1]=Ln(e.segment[1],n),Fn(Ke(r,XM),n)}function iP(){const t=Dc();return function(e,n){return t["Point"]}}var rP,sP=JM,oP=function(t,e){var n=t[0]-e[0],i=t[1]-e[1];return Math.sqrt(n*n+i*i)},aP=function(t,e){return t[0]==e[0]&&t[1]==e[1]};(function(){function t(t,e){var n;for(let i=t.length-1;i>0;i--)(t[i][0]>e&&t[i-1][0]<e||t[i][0]<e&&t[i-1][0]>e)&&(n=[e,(e-t[i][0])/(t[i-1][0]-t[i][0])*(t[i-1][1]-t[i][1])+t[i][1]],t.splice(i,0,n))}function e(t,e){var n;for(let i=t.length-1;i>0;i--)(t[i][1]>e&&t[i-1][1]<e||t[i][1]<e&&t[i-1][1]>e)&&(n=[(e-t[i][1])/(t[i-1][1]-t[i][1])*(t[i-1][0]-t[i][0])+t[i][0],e],t.splice(i,0,n))}rP=function(n,i){var r="Polygon"===i.getType();if(!r&&"MultiPolygon"!==i.getType())return null;var s=i.getCoordinates();return r&&(s=[s]),s.forEach((function(i){i.forEach((function(i){t(i,n[0]),t(i,n[2]),e(i,n[1]),e(i,n[3])}))})),s.forEach((function(t){t.forEach((function(t){t.forEach((function(t){t[0]<n[0]?t[0]=n[0]:t[0]>n[2]&&(t[0]=n[2]),t[1]<n[1]?t[1]=n[1]:t[1]>n[3]&&(t[1]=n[3])}))}))})),r?new rr(s[0]):new hr(s)}})();var lP=function(t,e,n,i){var r=[];!1!==i&&r.push(t);var s=oP(t,e);if(s){var o=Math.round(s/n);if(o>1)for(var a=(e[0]-t[0])/o,l=(e[1]-t[1])/o,c=1;c<o;c++)r.push([t[0]+a*c,t[1]+l*c])}return r.push(e),r};Gi.prototype.sampleAt=function(t){for(var e=this.getCoordinates(),n=[],i=1;i<e.length;i++)n=n.concat(lP(e[i-1],e[i],t,1===i));return new Gi(n)},Vi.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach((function(e){for(var i=[],r=1;r<e.length;r++)i=i.concat(lP(e[r-1],e[r],t,1===r));n.push(i)})),new Vi(n)},rr.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach((function(e){for(var i=[],r=1;r<e.length;r++)i=i.concat(lP(e[r-1],e[r],t,1===r));n.push(i)})),new rr(n)},hr.prototype.sampleAt=function(t){var e=this.getCoordinates(),n=[];return e.forEach((function(e){var i=[];n.push(i),e.forEach((function(e){for(var n=[],r=1;r<e.length;r++)n=n.concat(lP(e[r-1],e[r],t,1===r));i.push(n)}))})),new hr(n)},ei.prototype.intersection=function(t,e){if(t.sampleAt){var n=pt(this.getCenter().concat(this.getCenter()),this.getRadius());t=rP(n,t),t=t.simplify(e);var i=this.getCenter(),r=this.getRadius(),s=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":s=[s];case"MultiPolygon":var o=!1,a=[];return s.forEach((function(t){var e=[];a.push(e),t.forEach((function(t){var n=[];e.push(n),t.forEach((function(t){var e=oP(i,t);e>r?(o=!0,n.push([i[0]+r/e*(t[0]-i[0]),i[1]+r/e*(t[1]-i[1])])):n.push(t)}))}))})),o?"Polygon"===t.getType()?new rr(a[0]):new hr(a):t}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: "+t.getType());return t},Gi.prototype.splitAt=function(t,e){var n;if(!t)return[this];if(e||(e=1e-10),t.length&&t[0].length){var i=[this];for(n=0;n<t.length;n++){for(var r=[],s=0;s<i.length;s++){var o=i[s].splitAt(t[n],e);r=r.concat(o)}i=r}return i}if(aP(t,this.getFirstCoordinate())||aP(t,this.getLastCoordinate()))return[this];var a=this.getCoordinates(),l=[a[0]],c=[];for(n=0;n<a.length-1;n++)if(!aP(a[n],a[n+1])){if(aP(t,a[n+1]))l.push(a[n+1]),c.push(new Gi(l)),l=[];else if(!aP(t,a[n])){var u,h,A=!1;a[n][0]==a[n+1][0]?(u=(a[n][1]-t[1])/(a[n][1]-a[n+1][1]),A=a[n][0]==t[0]&&0<u&&u<=1):a[n][1]==a[n+1][1]?(u=(a[n][0]-t[0])/(a[n][0]-a[n+1][0]),A=a[n][1]==t[1]&&0<u&&u<=1):(u=(a[n][0]-t[0])/(a[n][0]-a[n+1][0]),h=(a[n][1]-t[1])/(a[n][1]-a[n+1][1]),A=Math.abs(u-h)<=e&&0<u&&u<=1),A&&(l.push(t),c.push(new Gi(l)),l=[t])}l.push(a[n+1])}return l.length>1&&c.push(new Gi(l)),c.length?c:[this]};var cP=class extends Qc{constructor(t){t=t||{},super({stroke:t.stroke,text:t.text,zIndex:t.zIndex,geometry:t.geometry}),this.setRenderer(this._render.bind(this)),this._visible=!1!==t.visible,"function"===typeof t.width?this._widthFn=t.width:this.setWidth(t.width),this.setWidth2(t.width2),"function"===typeof t.color?this._colorFn=t.color:this.setColor(t.color),this.setColor2(t.color2),this.setLineCap(t.lineCap),this.setArrow(t.arrow),this.setArrowSize(t.arrowSize),this.setArrowColor(t.arrowColor),this._offset=[0,0],this.setOffset(t.offset0,0),this.setOffset(t.offset1,1),this._noOverlap=t.noOverlap}setWidth(t){this._width=t||0}setWidth2(t){this._width2=t}getOffset(t){return this._offset[t]}setOffset(t,e){switch(t=Math.max(0,parseFloat(t)),e){case 0:this._offset[0]=t;break;case 1:this._offset[1]=t;break}}setLineCap(t){this._lineCap="round"===t?"round":"butt"}getWidth(t,e){if(this._widthFn)return this._widthFn(t,e);var n="number"===typeof this._width2?this._width2:this._width;return this._width+(n-this._width)*e}setColor(t){try{this._color=tl(t)}catch(Rdt){this._color=[0,0,0,1]}}setColor2(t){try{this._color2=tl(t)}catch(Rdt){this._color2=null}}setArrowColor(t){try{this._acolor=za(t)}catch(Rdt){this._acolor=null}}getColor(t,e){if(this._colorFn)return za(this._colorFn(t,e));var n=this._color,i=this._color2||this._color;return"rgba("+ +Math.round(n[0]+(i[0]-n[0])*e)+","+Math.round(n[1]+(i[1]-n[1])*e)+","+Math.round(n[2]+(i[2]-n[2])*e)+","+(n[3]+(i[3]-n[3])*e)+")"}getArrow(){return this._arrow}setArrow(t){this._arrow=parseInt(t),(this._arrow<-1||this._arrow>2)&&(this._arrow=0)}getArrowSize(){return this._arrowSize||[16,16]}setArrowSize(t){Array.isArray(t)?this._arrowSize=t:"number"===typeof t&&(this._arrowSize=[t,t])}drawArrow(t,e,n,i,r){var s=this.getArrowSize()[0]*r,o=oP(e,n),a=(e[0]-n[0])/o,l=(e[1]-n[1])/o;i=Math.max(this.getArrowSize()[1]/2,i/2)*r,t.beginPath(),t.moveTo(e[0],e[1]),t.lineTo(e[0]-s*a+i*l,e[1]-s*l-i*a),t.lineTo(e[0]-s*a-i*l,e[1]-s*l+i*a),t.lineTo(e[0],e[1]),t.fill()}_render(t,e){if("LineString"===e.geometry.getType()){var n,i,r,s=e.context;if(!this._visible){var o=e.pixelRatio/e.resolution,a=Math.cos(e.rotation),l=Math.sin(e.rotation);i=e.geometry.getCoordinates();var c=t[0][0]-i[0][0]*o*a-i[0][1]*o*l,u=t[0][1]-i[0][0]*o*l+i[0][1]*o*a;for(t=[],n=0;r=i[n];n++)t[n]=[c+r[0]*o*a+r[1]*o*l,u+r[0]*o*l-r[1]*o*a,r[2]]}var h=this.getArrowSize()[0]*e.pixelRatio;s.save(),this.getOffset(0)&&this._splitAsize(t,this.getOffset(0)*e.pixelRatio),this.getOffset(1)&&this._splitAsize(t,this.getOffset(1)*e.pixelRatio,!0),t.length>1&&(-1===this.getArrow()||2===this.getArrow())&&(r=this._splitAsize(t,h),this._acolor?s.fillStyle=this._acolor:s.fillStyle=this.getColor(e.feature,0),this.drawArrow(s,r[0],r[1],this.getWidth(e.feature,0),e.pixelRatio)),t.length>1&&this.getArrow()>0&&(r=this._splitAsize(t,h,!0),this._acolor?s.fillStyle=this._acolor:s.fillStyle=this.getColor(e.feature,1),this.drawArrow(s,r[0],r[1],this.getWidth(e.feature,1),e.pixelRatio));var A=this._splitInto(t,255,2),d=0,f=A.length;if(s.lineJoin="round",s.lineCap=this._lineCap||"butt",A.length>1)for(d=0;d<A.length;d++){var p=d/f;for(i=A[d],s.lineWidth=this.getWidth(e.feature,p)*e.pixelRatio,s.strokeStyle=this.getColor(e.feature,p),s.beginPath(),s.moveTo(i[0][0],i[0][1]),n=1;r=i[n];n++)s.lineTo(r[0],r[1]);s.stroke()}s.restore()}}_splitAsize(t,e,n){var i,r,s,o,a=0;s=n?t.pop():t.shift(),i=s;while(t.length){if(r=n?t.pop():t.shift(),o=oP(i,r),a+o>e){i=[i[0]+(r[0]-i[0])*(e-a)/o,i[1]+(r[1]-i[1])*(e-a)/o],o=oP(i,s),n?(t.push(r),t.push(i),t.push([i[0]+(s[0]-i[0])/o,i[1]+(s[1]-i[1])/o])):(t.unshift(r),t.unshift(i),t.unshift([i[0]+(s[0]-i[0])/o,i[1]+(s[1]-i[1])/o]));break}a+=o,i=r}return[s,i]}_splitInto(t,e,n){var i,r,s,o=this._noOverlap?1:.9,a=[],l=0;for(i=1;r=t[i];i++)l+=oP(t[i-1],r);var c=Math.max(n||2,l/(e||255)),u=t[0];l=0;var h=[u];i=1,r=t[1];while(i<t.length){var A=r[0]-u[0],d=r[1]-u[1];if(s=Math.sqrt(A*A+d*d),l+s>c){var f=(c-l)/s;h.push([u[0]+A*f,u[1]+d*f]),a.push(h),u=[u[0]+A*f*o,u[1]+d*f*o],h=[u],l=0}else l+=s,u=r,h.push(u),i++,r=t[i]}return a.push(h),a}},uP=cP;const hP={SELECT:"select"};class AP extends h{constructor(t,e,n,i){super(t),this.selected=e,this.deselected=n,this.mapBrowserEvent=i}}const dP={};class fP extends kw{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:lm,this.addCondition_=t.addCondition?t.addCondition:om,this.removeCondition_=t.removeCondition?t.removeCondition:om,this.toggleCondition_=t.toggleCondition?t.toggleCondition:dm,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:x,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:pP(),this.features_=t.features||new Nm,t.layers)if("function"===typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=x;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[G(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[G(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const e=this.getMap();e&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(Lm.ADD,this.boundAddFeature_),this.features_.addEventListener(Lm.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(Lm.ADD,this.boundAddFeature_),this.features_.removeEventListener(Lm.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find((function(t){if(t instanceof hx&&t.getSource()&&t.getSource().hasFeature(e))return t}));t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=G(t);e in dP||(dP[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let i=e.length-1;i>=0;--i){const n=e[i];if(n!==this&&n instanceof fP&&n.getStyle()&&-1!==n.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(n.getStyle())}const n=G(t);t.setStyle(dP[n]),delete dP[n]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[G(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),r=!e&&!n&&!i,s=t.map,o=this.getFeatures(),a=[],l=[];if(r){T(this.featureLayerAssociation_),s.forEachFeatureAtPixel(t.pixel,((t,e)=>{if(t instanceof $&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),l.push(t),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=o.getLength()-1;t>=0;--t){const e=o.item(t),n=l.indexOf(e);n>-1?l.splice(n,1):(o.remove(e),a.push(e))}0!==l.length&&o.extend(l)}else{s.forEachFeatureAtPixel(t.pixel,((t,r)=>{if(t instanceof $&&this.filter_(t,r))return!e&&!i||o.getArray().includes(t)?(n||i)&&o.getArray().includes(t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,r),l.push(t)),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)o.remove(a[t]);o.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new AP(hP.SELECT,l,a,t)),!0}}function pP(){const t=Dc();return w(t["Polygon"],t["LineString"]),w(t["GeometryCollection"],t["LineString"]),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}var gP=fP,mP=class extends gP{constructor(t){t=t||{};var e=new hx({source:new O_({features:new Nm,wrapX:t.wrapX,useSpatialIndex:!0}),name:"Cluster overlay",updateWhileAnimating:!0,updateWhileInteracting:!0,displayInLayerSwitcher:!1,style:t.featureStyle});if(t.layers)if("function"==typeof t.layers){var n=t.layers;t.layers=function(t){return t===e||n(t)}}else t.layers.push&&t.layers.push(e);if(t.filter){var i=t.filter;t.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))&&i(t,e)}}else t.filter=function(t,e){return!(!e&&t.get("selectclusterlink"))};!1!==t.autoClose||t.toggleCondition||(t.toggleCondition=lm),super(t),this.overlayLayer_=e,this.filter_=t.filter,this.pointRadius=t.pointRadius||12,this.circleMaxObjects=t.circleMaxObjects||10,this.maxObjects=t.maxObjects||60,this.spiral=!1!==t.spiral,this.animate=t.animate,this.animationDuration=t.animationDuration||500,this.selectCluster_=!1!==t.selectCluster,this._autoClose=!1!==t.autoClose,this.on("select",this.selectCluster.bind(this))}setMap(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),this._listener&&k(this._listener),this._listener=null,super.setMap(t),this.overlayLayer_.setMap(t),t&&t.getView()&&(this._listener=t.getView().on("change:resolution",this.clear.bind(this)))}clear(){this.getFeatures().clear(),this.overlayLayer_.getSource().clear()}getLayer(){return this.overlayLayer_}selectCluster(t){if(t instanceof $&&(t={selected:[t]}),t.selected.length){var e=t.selected[0];if(!e.get("selectclusterfeature")){var n=this.overlayLayer_.getSource();this._autoClose&&n.clear();var i=e.get("features");if(i&&1!=i.length){this.selectCluster_||this.getFeatures().clear();var r,s,o,a,l,c,u,h=e.getGeometry().getCoordinates(),A=this.getMap().getView().getResolution(),d=[];if(!this.spiral||i.length<=this.circleMaxObjects)for(a=Math.min(i.length,this.circleMaxObjects),r=A*this.pointRadius*(.5+a/4),o=0;o<a;o++)s=2*Math.PI*o/a,2!=a&&4!=a||(s+=Math.PI/4),l=[h[0]+r*Math.sin(s),h[1]+r*Math.cos(s)],c=new $({selectclusterfeature:!0,features:[i[o]],geometry:new Wi(l)}),c.setStyle(i[o].getStyle()),d.push(c),u=new $({selectclusterlink:!0,geometry:new Gi([h,l])}),d.push(u);else{s=0;var f=2*this.pointRadius;for(a=Math.min(this.maxObjects,i.length),o=0;o<a;o++){r=f/2+f*s/(2*Math.PI),s+=(f+.1)/r;var p=A*r*Math.sin(s),g=A*r*Math.cos(s);l=[h[0]+p,h[1]+g],c=new $({selectclusterfeature:!0,features:[i[o]],geometry:new Wi(l)}),c.setStyle(i[o].getStyle()),d.push(c),u=new $({selectclusterlink:!0,geometry:new Gi([h,l])}),d.push(u)}}e.set("selectcluserfeatures",d),this.animate?this.animateCluster_(h,d):n.addFeatures(d)}}}else if(this._autoClose)this.clear();else{var m=t.deselected;m.forEach((t=>{var e=t.get("selectcluserfeatures");e&&e.forEach((t=>{this.overlayLayer_.getSource().removeFeature(t)}))}))}}animateCluster_(t,e){if(this.listenerKey_&&k(this.listenerKey_),e.length){var n=this.overlayLayer_.getStyle(),i="function"==typeof n?n:n.length?function(){return n}:function(){return[n]},r=this.animationDuration||500,s=(new Date).getTime();this.listenerKey_=this.overlayLayer_.on(["postcompose","postrender"],a.bind(this));var o=new $(new Wi(this.getMap().getView().getCenter()));o.setStyle(new Qc({image:new Mc({})})),this.overlayLayer_.getSource().addFeature(o)}function a(n){for(var o,a=n.vectorContext||dx(n),l=n.frameState.pixelRatio,c=this.getMap().getView().getResolution(),u=wm((n.frameState.time-s)/r),h=0;o=e[h];h++)if(o.get("features")){var A=o.getGeometry().getCoordinates();A[0]=t[0]+u*(A[0]-t[0]),A[1]=t[1]+u*(A[1]-t[1]);for(var d=new Wi(A),f=i(o,c),p=0;p<f.length;p++){var g,m=!y_.prototype.getFeaturesAtPixel&&f[p].getImage();m&&(g=m.getScale(),m.setScale(l)),a.setStyle?(a.setStyle(f[p]),a.drawGeometry(d)):(a.setImageStyle(m),a.drawPointGeometry(d)),m&&m.setScale(g)}}if(u>1)return k(this.listenerKey_),this.overlayLayer_.getSource().addFeatures(e),void this.overlayLayer_.changed();n.frameState.animate=!0}}getClusterExtent(t){if(!t.get("features"))return null;var e=bt();return t.get("features").forEach((function(t){e=Lt(e,t.getGeometry().getExtent())})),e[0]===e[2]&&e[1]===e[3]?null:e}},vP=mP;class yP extends Hw{constructor(t){t=t||{},super(t),this.condition_=t.condition?t.condition:dm,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==t.duration?t.duration:400}handleDragEvent(t){if(!pm(t))return;const e=t.map,n=e.getSize(),i=t.pixel,r=i[0]-n[0]/2,s=n[1]/2-i[1],o=Math.atan2(s,r),a=Math.sqrt(r*r+s*s),l=e.getView();if(void 0!==this.lastAngle_){const t=this.lastAngle_-o;l.adjustRotationInternal(t)}this.lastAngle_=o,void 0!==this.lastMagnitude_&&l.adjustResolutionInternal(this.lastMagnitude_/a),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/a),this.lastMagnitude_=a}handleUpEvent(t){if(!pm(t))return!0;const e=t.map,n=e.getView(),i=this.lastScaleDelta_>1?1:-1;return n.endInteraction(this.duration_,i),this.lastScaleDelta_=0,!1}handleDownEvent(t){return!!pm(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}}var wP=yP;const _P={SNAP:"snap"};class bP extends h{constructor(t,e){super(t),this.vertex=e.vertex,this.vertexPixel=e.vertexPixel,this.feature=e.feature,this.segment=e.segment}}function xP(t){return t.feature?t.feature:t.element?t.element:null}const EP=[];class CP extends Hw{constructor(t){t=t||{};const e=t;e.handleDownEvent||(e.handleDownEvent=x),e.stopDown||(e.stopDown=E),super(e),this.on,this.once,this.un,this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new S_,this.GEOMETRY_SEGMENTERS_={Point:this.segmentPointGeometry_.bind(this),LineString:this.segmentLineStringGeometry_.bind(this),LinearRing:this.segmentLineStringGeometry_.bind(this),Polygon:this.segmentPolygonGeometry_.bind(this),MultiPoint:this.segmentMultiPointGeometry_.bind(this),MultiLineString:this.segmentMultiLineStringGeometry_.bind(this),MultiPolygon:this.segmentMultiPolygonGeometry_.bind(this),GeometryCollection:this.segmentGeometryCollectionGeometry_.bind(this),Circle:this.segmentCircleGeometry_.bind(this)}}addFeature(t,e){e=void 0===e||e;const n=G(t),i=t.getGeometry();if(i){const e=this.GEOMETRY_SEGMENTERS_[i.getType()];if(e){this.indexedFeaturesExtents_[n]=i.getExtent(bt());const r=[];if(e(r,i),1===r.length)this.rBush_.insert(dt(r[0]),{feature:t,segment:r[0]});else if(r.length>1){const e=r.map((t=>dt(t))),n=r.map((e=>({feature:t,segment:e})));this.rBush_.load(e,n)}}}e&&(this.featureChangeListenerKeys_[n]=M(t,R.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t}handleEvent(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e&&(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel,this.dispatchEvent(new bP(_P.SNAP,{vertex:t.coordinate,vertexPixel:t.pixel,feature:e.feature,segment:e.segment}))),super.handleEvent(t)}handleFeatureAdd_(t){const e=xP(t);e&&this.addFeature(e)}handleFeatureRemove_(t){const e=xP(t);e&&this.removeFeature(e)}handleFeatureChange_(t){const e=t.target;if(this.handlingDownUpSequence){const t=G(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)}handleUpEvent(t){const e=Object.values(this.pendingFeatures_);return e.length&&(e.forEach(this.updateFeature_.bind(this)),this.pendingFeatures_={}),!1}removeFeature(t,e){const n=void 0===e||e,i=G(t),r=this.indexedFeaturesExtents_[i];if(r){const e=this.rBush_,n=[];e.forEachInExtent(r,(function(e){t===e.feature&&n.push(e)}));for(let t=n.length-1;t>=0;--t)e.remove(n[t])}n&&(N(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])}setMap(t){const e=this.getMap(),n=this.featuresListenerKeys_,i=this.getFeatures_();e&&(n.forEach(N),n.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(N),this.featureChangeListenerKeys_={}),super.setMap(t),t&&(this.features_?n.push(M(this.features_,Lm.ADD,this.handleFeatureAdd_,this),M(this.features_,Lm.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push(M(this.source_,F_.ADDFEATURE,this.handleFeatureAdd_,this),M(this.source_,F_.REMOVEFEATURE,this.handleFeatureRemove_,this)),i.forEach((t=>this.addFeature(t))))}snapTo(t,e,n){const i=n.getView().getProjection(),r=Ln(e,i),s=Rn(pt(dt([r]),n.getView().getResolution()*this.pixelTolerance_),i),o=this.rBush_.getInExtent(s),a=o.length;if(0===a)return null;let l,c,u=1/0,h=null;const A=this.pixelTolerance_*this.pixelTolerance_,d=()=>{if(l){const e=n.getPixelFromCoordinate(l),i=Ye(t,e);if(i<=A)return{vertex:l,vertexPixel:[Math.round(e[0]),Math.round(e[1])],feature:c,segment:h}}return null};if(this.vertex_){for(let e=0;e<a;++e){const t=o[e];"Circle"!==t.feature.getGeometry().getType()&&t.segment.forEach((e=>{const n=Ln(e,i),s=Ye(r,n);s<u&&(l=e,u=s,c=t.feature)}))}const t=d();if(t)return t}if(this.edge_){for(let e=0;e<a;++e){let t=null;const n=o[e];if("Circle"===n.feature.getGeometry().getType()){let e=n.feature.getGeometry();const s=In();s&&(e=e.clone().transform(s,i)),t=ze(r,e)}else{const[e,s]=n.segment;s&&(EP[0]=Ln(e,i),EP[1]=Ln(s,i),t=Ke(r,EP))}if(t){const e=Ye(r,t);e<u&&(l=Fn(t,i),h="Circle"===n.feature.getGeometry().getType()?null:n.segment,u=e)}}const t=d();if(t)return t}return null}updateFeature_(t){this.removeFeature(t,!1),this.addFeature(t,!1)}segmentCircleGeometry_(t,e){const n=this.getMap().getView().getProjection();let i=e;const r=In();r&&(i=i.clone().transform(r,n));const s=ar(i);r&&s.transform(n,r);const o=s.getCoordinates()[0];for(let a=0,l=o.length-1;a<l;++a)t.push(o.slice(a,a+2))}segmentGeometryCollectionGeometry_(t,e){const n=e.getGeometriesArray();for(let i=0;i<n.length;++i){const e=this.GEOMETRY_SEGMENTERS_[n[i].getType()];e&&e(t,n[i])}}segmentLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length-1;i<r;++i)t.push(n.slice(i,i+2))}segmentMultiLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const e=n[i];for(let n=0,i=e.length-1;n<i;++n)t.push(e.slice(n,n+2))}}segmentMultiPointGeometry_(t,e){e.getCoordinates().forEach((e=>{t.push([e])}))}segmentMultiPolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const e=n[i];for(let n=0,i=e.length;n<i;++n){const i=e[n];for(let e=0,n=i.length-1;e<n;++e)t.push(i.slice(e,e+2))}}}segmentPointGeometry_(t,e){t.push([e.getCoordinates()])}segmentPolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const e=n[i];for(let n=0,i=e.length-1;n<i;++n)t.push(e.slice(n,n+2))}}}var SP=CP,BP=class extends Hw{constructor(t){t=t||{},super({handleDownEvent:function(t){return e.handleDownEvent_(t)},handleDragEvent:function(t){return this.handleDragEvent_(t)},handleMoveEvent:function(t){return this.handleMoveEvent_(t)},handleUpEvent:function(t){return this.handleUpEvent_(t)}});var e=this;this.selection_=new Nm,this.handles_=new Nm,this.overlayLayer_=new hx({source:new O_({features:this.handles_,useSpatialIndex:!1,wrapX:!1}),name:"Transform overlay",displayInLayerSwitcher:!1,style:function(t){return e.style[(t.get("handle")||"default")+(t.get("constraint")||"")+(t.get("option")||"")]}}),this.features_=t.features,"function"===typeof t.filter&&(this._filter=t.filter),this.layers_=t.layers?t.layers instanceof Array?t.layers:[t.layers]:null,this._handleEvent=t.condition||function(){return!0},this.addFn_=t.addCondition||function(){return!1},this.setPointRadius(t.pointRadius),this.set("translateFeature",!1!==t.translateFeature),this.set("translate",!1!==t.translate),this.set("translateBBox",!0===t.translateBBox),this.set("stretch",!1!==t.stretch),this.set("scale",!1!==t.scale),this.set("rotate",!1!==t.rotate),this.set("keepAspectRatio",t.keepAspectRatio||function(t){return t.originalEvent.shiftKey}),this.set("modifyCenter",t.modifyCenter||function(t){return t.originalEvent.metaKey||t.originalEvent.ctrlKey}),this.set("noFlip",t.noFlip||!1),this.set("selection",!1!==t.selection),this.set("hitTolerance",t.hitTolerance||0),this.set("enableRotatedTransform",t.enableRotatedTransform||!1),this.set("keepRectangle",t.keepRectangle||!1),this.set("buffer",t.buffer||0),this.on("propertychange",(function(){this.drawSketch_()})),this.setDefaultStyle()}setMap(t){var e=this.getMap();if(e){var n=e.getTargetElement();e.removeLayer(this.overlayLayer_),this.previousCursor_&&n&&(n.style.cursor=this.previousCursor_),this.previousCursor_=void 0}super.setMap(t),this.overlayLayer_.setMap(t),null===t&&this.select(null),null!==t&&(this.isTouch=/touch/.test(t.getViewport().className),this.setDefaultStyle())}setActive(t){this.select(null),this.overlayLayer_&&this.overlayLayer_.setVisible(t),super.setActive(t)}setDefaultStyle(t){t=t||{};var e=t.pointStroke||new ql({color:[255,0,0,1],width:1}),n=t.stroke||new ql({color:[255,0,0,1],width:1,lineDash:[4,4]}),i=t.fill||new Dl({color:[255,0,0,.01]}),r=t.pointFill||new Dl({color:[255,255,255,.8]}),s=new Lc({fill:r,stroke:e,radius:this.isTouch?12:6,displacement:this.isTouch?[24,-24]:[12,-12],points:15});s.setDisplacement||(s.getAnchor()[0]=this.isTouch?-10:-5);var o=new Lc({fill:r,stroke:e,radius:this.isTouch?16:8,points:4,angle:Math.PI/4}),a=new Lc({fill:r,stroke:e,radius:this.isTouch?12:6,points:4,angle:Math.PI/4});function l(t,e,n){return[new Qc({image:t,stroke:e,fill:n})]}this.style={default:l(o,n,i),translate:l(o,e,r),rotate:l(s,e,r),rotate0:l(o,e,r),scale:l(o,e,r),scale1:l(o,e,r),scale2:l(o,e,r),scale3:l(o,e,r),scalev:l(a,e,r),scaleh1:l(a,e,r),scalev2:l(a,e,r),scaleh3:l(a,e,r)},this.drawSketch_()}setStyle(t,e){if(e){this.style[t]=e instanceof Array?e:[e];for(var n=0;n<this.style[t].length;n++){var i=this.style[t][n].getImage();i&&("rotate"==t&&(i.getAnchor()[0]=-5),this.isTouch&&i.setScale(1.8));var r=this.style[t][n].getText();r&&("rotate"==t&&r.setOffsetX(this.isTouch?14:7),this.isTouch&&r.setScale(1.8))}this.drawSketch_()}}getFeatureAtPixel_(t){var e=this;return this.getMap().forEachFeatureAtPixel(t,(function(t,n){var i=!1;if(!n){if(t===e.bbox_)return!!e.get("translateBBox")&&{feature:t,handle:"translate",constraint:"",option:""};if(e.handles_.forEach((function(e){e===t&&(i=!0)})),i)return{feature:t,handle:t.get("handle"),constraint:t.get("constraint"),option:t.get("option")}}if(!e.get("selection"))return e.selection_.getArray().some((function(e){return t===e}))?{feature:t}:null;if(e._filter)return e._filter(t,n)?{feature:t}:null;if(e.layers_){for(var r=0;r<e.layers_.length;r++)if(e.layers_[r]===n)return{feature:t};return null}return e.features_?(e.features_.forEach((function(e){e===t&&(i=!0)})),i?{feature:t}:null):{feature:t}}),{hitTolerance:this.get("hitTolerance")})||{}}getGeometryRotateToZero_(t,e){var n=t.getGeometry(),i=this.getMap().getView().getRotation();if(0===i||!this.get("enableRotatedTransform"))return e?n.clone():n;var r=n.clone();return r.rotate(-1*i,this.getMap().getView().getCenter()),r}_isRectangle(t){if(this.get("keepRectangle")&&"Polygon"===t.getType()){var e=t.getCoordinates()[0];return 5===e.length}return!1}drawSketch_(t){var e,n,i,r=this.selection_.item(0)&&this._isRectangle(this.selection_.item(0).getGeometry());if(this.overlayLayer_.getSource().clear(),this.selection_.getLength()){var s,o=this.getMap().getView().getRotation(),a=this.getGeometryRotateToZero_(this.selection_.item(0)).getExtent();r&&(s=this.getGeometryRotateToZero_(this.selection_.item(0)).getCoordinates()[0].slice(0,4),s.unshift(s[3])),a=pt(a,this.get("buffer")),this.selection_.forEach(function(t){var e=this.getGeometryRotateToZero_(t).getExtent();Lt(a,e)}.bind(this));var l=1===this.selection_.getLength()?this._pointRadius(this.selection_.item(0)):0;if(!l||l instanceof Array||(l=[l,l]),!0===t)this.ispt_||(this.overlayLayer_.getSource().addFeature(new $({geometry:new Wi(this.center_),handle:"rotate0"})),i=or(a),this.get("enableRotatedTransform")&&0!==o&&i.rotate(o,this.getMap().getView().getCenter()),n=this.bbox_=new $(i),this.overlayLayer_.getSource().addFeature(n));else{if(this.ispt_){var c=this.getMap().getPixelFromCoordinate([a[0],a[1]]);if(c){var u=l&&l[0]||10,h=l&&l[1]||10;a=dt([this.getMap().getCoordinateFromPixel([c[0]-u,c[1]-h]),this.getMap().getCoordinateFromPixel([c[0]+u,c[1]+h])])}}i=r?new rr([s]):or(a),this.get("enableRotatedTransform")&&0!==o&&i.rotate(o,this.getMap().getView().getCenter()),n=this.bbox_=new $(i);var A=[],d=i.getCoordinates()[0];if(!this.ispt_||l){if(A.push(n),!this.iscircle_&&!this.ispt_&&this.get("stretch")&&this.get("scale"))for(e=0;e<d.length-1;e++)n=new $({geometry:new Wi([(d[e][0]+d[e+1][0])/2,(d[e][1]+d[e+1][1])/2]),handle:"scale",constraint:e%2?"h":"v",option:e}),A.push(n);if(this.get("scale"))for(e=0;e<d.length-1;e++)n=new $({geometry:new Wi(d[e]),handle:"scale",option:e}),A.push(n);this.get("translate")&&!this.get("translateFeature")&&(n=new $({geometry:new Wi([(d[0][0]+d[2][0])/2,(d[0][1]+d[2][1])/2]),handle:"translate"}),A.push(n))}!this.iscircle_&&this.get("rotate")&&(n=new $({geometry:new Wi(d[3]),handle:"rotate"}),A.push(n)),this.overlayLayer_.getSource().addFeatures(A)}}}select(t,e){if(t){if(t.getGeometry&&t.getGeometry()){if(e)this.selection_.push(t);else{var n=this.selection_.getArray().indexOf(t);this.selection_.removeAt(n)}this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:t,features:this.selection_})}}else this.selection_&&(this.selection_.clear(),this.drawSketch_())}setSelection(t){this.selection_.clear(),t.forEach(function(t){this.selection_.push(t)}.bind(this)),this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",features:this.selection_})}watchFeatures_(){this._featureListeners&&this._featureListeners.forEach((function(t){k(t)})),this._featureListeners=[],this.selection_.forEach(function(t){this._featureListeners.push(t.on("change",function(){this.isUpdating_||this.drawSketch_()}.bind(this)))}.bind(this))}handleDownEvent_(t){if(this._handleEvent(t,this.selection_)){var e=this.getFeatureAtPixel_(t.pixel),n=e.feature;if(this.selection_.getLength()&&this.selection_.getArray().indexOf(n)>=0&&(this.ispt_&&this.get("translate")||this.get("translateFeature"))&&(e.handle="translate"),e.handle){this.mode_=e.handle,this.opt_=e.option,this.constraint_=e.constraint;var i=this.getMap().getView().getRotation();this.coordinate_=n.get("handle")?n.getGeometry().getCoordinates():t.coordinate,this.pixel_=this.getMap().getCoordinateFromPixel(this.coordinate_),this.geoms_=[],this.rotatedGeoms_=[];for(var r,s=bt(),o=bt(),a=0;r=this.selection_.item(a);a++)if(this.geoms_.push(r.getGeometry().clone()),s=Lt(s,r.getGeometry().getExtent()),this.get("enableRotatedTransform")&&0!==i){var l=this.getGeometryRotateToZero_(r,!0);this.rotatedGeoms_.push(l),o=Lt(o,l.getExtent())}if(this.extent_=or(s).getCoordinates()[0],this.get("enableRotatedTransform")&&0!==i&&(this.rotatedExtent_=or(o).getCoordinates()[0]),"rotate"===this.mode_){this.center_=this.getCenter()||Gt(s);var c=t.map.getTargetElement();c.style.cursor=this.Cursors.rotate0,this.previousCursor_=c.style.cursor}else this.center_=Gt(s);return this.angle_=Math.atan2(this.center_[1]-t.coordinate[1],this.center_[0]-t.coordinate[0]),this.dispatchEvent({type:this.mode_+"start",feature:this.selection_.item(0),features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!0}if(this.get("selection")){if(n){this.addFn_(t)||this.selection_.clear();var u=this.selection_.getArray().indexOf(n);u<0?this.selection_.push(n):this.selection_.removeAt(u)}else this.selection_.clear();return this.ispt_=1===this.selection_.getLength()&&"Point"==this.selection_.item(0).getGeometry().getType(),this.iscircle_=1===this.selection_.getLength()&&"Circle"==this.selection_.item(0).getGeometry().getType(),this.drawSketch_(),this.watchFeatures_(),this.dispatchEvent({type:"select",feature:n,features:this.selection_,pixel:t.pixel,coordinate:t.coordinate}),!1}}}getCenter(){return this.get("center")}setCenter(t){return this.set("center",t)}handleDragEvent_(t){if(this._handleEvent(t,this.features_)){var e,n,i,r,s=this.getMap().getView().getRotation(),o=[this.coordinate_[0],this.coordinate_[1]],a=[t.coordinate[0],t.coordinate[1]];switch(this.isUpdating_=!0,this.mode_){case"rotate":var l=Math.atan2(this.center_[1]-a[1],this.center_[0]-a[0]);if(!this.ispt)for(e=0,i;i=this.selection_.item(e);e++)r=this.geoms_[e].clone(),r.rotate(l-this.angle_,this.center_),"Circle"==r.getType()&&r.setCenterAndRadius(r.getCenter(),r.getRadius()),i.setGeometry(r);this.drawSketch_(!0),this.dispatchEvent({type:"rotating",feature:this.selection_.item(0),features:this.selection_,angle:l-this.angle_,pixel:t.pixel,coordinate:t.coordinate});break;case"translate":var c=a[0]-o[0],u=a[1]-o[1];for(e=0,i;i=this.selection_.item(e);e++)i.getGeometry().translate(c,u);this.handles_.forEach((function(t){t.getGeometry().translate(c,u)})),this.coordinate_=t.coordinate,this.dispatchEvent({type:"translating",feature:this.selection_.item(0),features:this.selection_,delta:[c,u],pixel:t.pixel,coordinate:t.coordinate});break;case"scale":var h=this.center_;if(this.get("modifyCenter")(t)){var A=this.extent_;this.get("enableRotatedTransform")&&0!==s&&(A=this.rotatedExtent_),h=A[(Number(this.opt_)+2)%4]}var d=1==this.geoms_.length&&this._isRectangle(this.geoms_[0]),f=this.constraint_,p=this.opt_,g=this.coordinate_,m=t.coordinate;if(this.get("enableRotatedTransform")&&0!==s){var v=new Wi(this.coordinate_);v.rotate(-1*s,h),g=v.getCoordinates();var y=new Wi(t.coordinate);y.rotate(-1*s,h),m=y.getCoordinates()}var w=(m[0]-h[0])/(g[0]-h[0]),_=(m[1]-h[1])/(g[1]-h[1]),b=[m[0]-g[0],m[1]-g[1]];if(this.get("enableRotatedTransform")&&0!==s){var x=new Wi(h);x.rotate(-1*s,this.getMap().getView().getCenter()),h=x.getCoordinates()}for(this.get("noFlip")&&(w<0&&(w=-w),_<0&&(_=-_)),this.constraint_?"h"==this.constraint_?w=1:_=1:this.get("keepAspectRatio")(t)&&(w=_=Math.min(w,_)),e=0,i;i=this.selection_.item(e);e++)r=0!==s&&this.get("enableRotatedTransform")?this.rotatedGeoms_[e].clone():this.geoms_[e].clone(),r.applyTransform(function(t,e,i){if(i<2)return e;if(d){var s=[[6],[0,8],[2],[4]],o=[t[0],t[1]],a=[t[2],t[3]],l=[t[4],t[5]],c=[t[6],t[7]],u=[t[8],t[9]];if(f){var A=p%2===0?this._countVector(o,a):this._countVector(c,o),g=this._projectVectorOnVector(b,A),v=p+1<s.length?p+1:0,y=[...s[p],...s[v]];for(n=0;n<t.length;n+=i)e[n]=y.includes(n)?t[n]+g[0]:t[n],e[n+1]=y.includes(n)?t[n+1]+g[1]:t[n+1]}else{var x,E;switch(p){case 0:b=this._countVector(c,m),x=this._projectVectorOnVector(b,this._countVector(l,c)),E=this._projectVectorOnVector(b,this._countVector(o,c)),[e[0],e[1]]=this._movePoint(o,x),[e[4],e[5]]=this._movePoint(l,E),[e[6],e[7]]=this._movePoint(c,b),[e[8],e[9]]=this._movePoint(u,x);break;case 1:b=this._countVector(o,m),x=this._projectVectorOnVector(b,this._countVector(c,o)),E=this._projectVectorOnVector(b,this._countVector(a,o)),[e[0],e[1]]=this._movePoint(o,b),[e[2],e[3]]=this._movePoint(a,x),[e[6],e[7]]=this._movePoint(c,E),[e[8],e[9]]=this._movePoint(u,b);break;case 2:b=this._countVector(a,m),x=this._projectVectorOnVector(b,this._countVector(o,a)),E=this._projectVectorOnVector(b,this._countVector(l,a)),[e[0],e[1]]=this._movePoint(o,E),[e[2],e[3]]=this._movePoint(a,b),[e[4],e[5]]=this._movePoint(l,x),[e[8],e[9]]=this._movePoint(u,E);break;case 3:b=this._countVector(l,m),x=this._projectVectorOnVector(b,this._countVector(a,l)),E=this._projectVectorOnVector(b,this._countVector(c,l)),[e[2],e[3]]=this._movePoint(a,E),[e[4],e[5]]=this._movePoint(l,b),[e[6],e[7]]=this._movePoint(c,x);break}}}else for(n=0;n<t.length;n+=i)1!=w&&(e[n]=h[0]+(t[n]-h[0])*w),1!=_&&(e[n+1]=h[1]+(t[n+1]-h[1])*_);return"Circle"==r.getType()&&r.setCenterAndRadius(r.getCenter(),r.getRadius()),e}.bind(this)),this.get("enableRotatedTransform")&&0!==s&&r.rotate(s,this.getMap().getView().getCenter()),i.setGeometry(r);this.drawSketch_(),this.dispatchEvent({type:"scaling",feature:this.selection_.item(0),features:this.selection_,scale:[w,_],pixel:t.pixel,coordinate:t.coordinate});break;default:break}this.isUpdating_=!1}}handleMoveEvent_(t){if(this._handleEvent(t,this.features_)&&!this.mode_){var e=this.getFeatureAtPixel_(t.pixel),n=t.map.getTargetElement();if(e.feature){var i=e.handle?this.Cursors[(e.handle||"default")+(e.constraint||"")+(e.option||"")]:this.Cursors.select;void 0===this.previousCursor_&&(this.previousCursor_=n.style.cursor),n.style.cursor=i}else void 0!==this.previousCursor_&&(n.style.cursor=this.previousCursor_),this.previousCursor_=void 0}}handleUpEvent_(t){if("rotate"===this.mode_){var e=t.map.getTargetElement();e.style.cursor=this.Cursors.default,this.previousCursor_=void 0}return this.dispatchEvent({type:this.mode_+"end",feature:this.selection_.item(0),features:this.selection_,oldgeom:this.geoms_[0],oldgeoms:this.geoms_}),this.drawSketch_(),this.mode_=null,!1}setPointRadius(t){this._pointRadius="function"===typeof t?t:function(){return t}}getFeatures(){return this.selection_}_projectVectorOnVector(t,e){var n=(t[0]*e[0]+t[1]*e[1])/(e[0]*e[0]+e[1]*e[1]);return[e[0]*n,e[1]*n]}_countVector(t,e){return[e[0]-t[0],e[1]-t[1]]}_movePoint(t,e){return[t[0]+e[0],t[1]+e[1]]}};BP.prototype.Cursors={default:"auto",select:"pointer",translate:"move",rotate:"move",rotate0:"move",scale:"nesw-resize",scale1:"nwse-resize",scale2:"nesw-resize",scale3:"nwse-resize",scalev:"ew-resize",scaleh1:"ns-resize",scalev2:"ew-resize",scaleh3:"ns-resize"};var TP=BP,IP=class extends W{constructor(t){t=t||{},super(),this.duration_="number"==typeof t.duration?t.duration>=0?t.duration:0:1e3,this.fade_="function"==typeof t.fade?t.fade:null,this.repeat_=Number(t.repeat);var e="function"==typeof t.easing?t.easing:bm;t.revers?this.easing_=function(t){return 1-e(t)}:this.easing_=e,this.hiddenStyle=t.hiddenStyle}drawGeom_(t,e,n){var i={type:"drawing",time:t.time,feature:t.feature,start:t.start,stop:t.stop,rotation:t.rotation,style:t.style,extra:t.extra};this.dispatchEvent(i);var r=i.style instanceof Array?i.style:[i.style];this.fade_&&(t.context.globalAlpha=this.fade_(1-t.elapsed));for(var s=0;s<r.length;s++)try{var o=t.vectorContext||dx(t),a=gx(t,r[s]);o.setStyle(a),a.getZIndex()<0?o.drawGeometry(n||e):o.drawGeometry(e)}catch(l){}}animate(){return!1}};IP.hiddenStyle=new Qc({image:new Mc({}),stroke:new ql({color:"transparent"})}),y_.prototype.animateFeature=function(t,e){var n=this._featureAnimationLayer;n||(n=this._featureAnimationLayer=new hx({source:new O_}),n.setMap(this)),n.getSource().addFeature(t);var i=e.on("animationend",(function(e){e.feature===t&&(n.getSource().removeFeature(t),k(i))}));n.animateFeature(t,e)},Dm.prototype.animateFeature=function(t,e,n){var i,r=this,s=t.getStyle(),o=s||(this.getStyleFunction?this.getStyleFunction()(t):null);o||(o=[]),o instanceof Array||(o=[o]);var a={vectorContext:null,frameState:null,start:0,time:0,elapsed:0,extent:!1,feature:t,geom:t.getGeometry(),typeGeom:t.getGeometry().getType(),bbox:t.getGeometry().getExtent(),coord:Gt(t.getGeometry().getExtent()),style:o};e instanceof Array||(e=[e]);for(var l=e.length-1;l>=0;l--)0===e[l].duration_&&e.splice(l,1);var c=0,u=0,h=n&&this.getFilters?this.getFilters():[];function A(n){a.type=n.type;try{a.vectorContext=n.vectorContext||dx(n)}catch(n){}if(a.frameState=n.frameState,a.inversePixelTransform=n.inversePixelTransform,a.extent||(a.extent=n.frameState.extent,a.start=n.frameState.time,a.context=n.context),a.time=n.frameState.time-a.start,a.elapsed=a.time/e[u].duration_,a.elapsed>1&&(a.elapsed=1),n.context.save(),h.forEach((function(t){t.get("active")&&t.precompose(n)})),this.getOpacity&&(n.context.globalAlpha=this.getOpacity()),e[u].animate(a)){var i={type:"animating",step:u,start:a.start,time:a.time,elapsed:a.elapsed,rotation:a.rotation||0,geom:a.geom,coordinate:a.coord,feature:t,extra:a.extra||{},style:o};e[u].dispatchEvent(i),r.dispatchEvent(i)}else c++,c<e[u].repeat_?a.extent=!1:u<e.length-1?(e[u].dispatchEvent({type:"animationend",feature:t}),u++,c=0,a.extent=!1):d();h.forEach((function(t){t.get("active")&&t.postcompose(n)})),n.context.restore(),n.frameState.animate=!0}function d(n){k(i),i=null,t.setStyle(s),a.stop=(new Date).getTime();var o={type:"animationend",feature:t};if(n)for(var l in n)n.hasOwnProperty(l)&&(o[l]=n[l]);e[u].dispatchEvent(o),r.dispatchEvent(o)}function f(n){if(e.length&&!i){if(a.stop&&(a.start=(new Date).getTime()-a.stop+a.start,a.stop=0),i=r.on(["postcompose","postrender"],A.bind(r)),r.renderSync)try{r.renderSync()}catch(Rdt){}else r.changed();t.setStyle(e[u].hiddenStyle||IP.hiddenStyle);var s={type:"animationstart",feature:t};if(n)for(var o in n)n.hasOwnProperty(o)&&(s[o]=n[o]);e[u].dispatchEvent(s),r.dispatchEvent(s)}}return f(),{start:f,stop:d,isPlaying:function(){return!!i}}};var FP=IP,LP=class extends FP{constructor(t){t=t||{},super(t),this.speed_=t.speed||0,this.side_=t.side||"top"}animate(t){if(!t.time){var e=t.frameState.viewState.rotation,n=t.frameState.size[1]*t.frameState.viewState.resolution;"top"!=this.side_&&(n*=-1),this.dx=-Math.sin(e)*n,this.dy=Math.cos(e)*n,this.speed_&&(this.duration_=n/this.speed_/t.frameState.viewState.resolution)}var i=t.geom.clone();return i.translate(this.dx*(1-this.easing_(t.elapsed)),this.dy*(1-this.easing_(t.elapsed))),this.drawGeom_(t,i,t.geom),t.time<=this.duration_}},RP=LP,MP=class extends FP{constructor(t){t=t||{},super(t),this.speed_=t.speed||0}animate(t){return t.context.globalAlpha=this.easing_(t.elapsed),this.drawGeom_(t,t.geom),t.time<=this.duration_}},PP=MP,NP=class extends FP{constructor(t){switch(t=t||{},super(t),this.speed_=t.speed||0,this.path_=t.path,t.rotate){case!0:case 0:this.rotate_=0;break;default:this.rotate_=t.rotate||!1;break}this.path_&&this.path_.getGeometry&&(this.path_=this.path_.getGeometry()),this.path_&&this.path_.getLineString&&(this.path_=this.path_.getLineString()),this.path_.getLength?(this.dist_=this.path_.getLength(),this.path_&&this.path_.getCoordinates&&(this.path_=this.path_.getCoordinates())):this.dist_=0,this.speed_>0&&(this.duration_=this.dist_/this.speed_)}animate(t){if(!t.time&&!this.dist_)return!1;var e,n,i,r,s,o,a=this.dist_*this.easing_(t.elapsed),l=0;n=this.path_[0];for(var c=1;c<this.path_.length;c++){if(e=n,n=this.path_[c],r=n[0]-e[0],s=n[1]-e[1],o=Math.sqrt(r*r+s*s),o&&l+o>=a){t.extra={index:c,coordinates:n},i=(a-l)/o,n=[e[0]+(n[0]-e[0])*i,e[1]+(n[1]-e[1])*i];break}l+=o}var u=t.style;if(t.rotation=Math.PI/2+Math.atan2(e[1]-n[1],e[0]-n[0]),!1!==this.rotate_){var h=[],A=this.rotate_-t.rotation+t.frameState.viewState.rotation;t.rotation=Math.PI/2+Math.atan2(e[1]-n[1],e[0]-n[0]);for(var d=0;i=t.style[d];d++)i.getImage()&&i.getImage().setRotation(A),h.push(i);t.style=h}return t.geom.setCoordinates(n),this.drawGeom_(t,t.geom),t.style=u,t.time<=this.duration_}},OP=NP,kP=class extends FP{constructor(t){t=t||{},super(t),this.amplitude_=t.amplitude||40,this.bounce_=-Math.PI*(t.bounce||6),this.horizontal_=t.horizontal}animate(t){var e=t.geom.clone(),n=t.geom.clone(),i=this.easing_(t.elapsed);return i=Math.sin(this.bounce_*i)*this.amplitude_*(1-i)*t.frameState.viewState.resolution,this.horizontal_?(e.translate(i,0),n.translate(i,0)):e.translate(0,i),this.drawGeom_(t,e,n),t.time<=this.duration_}},DP=kP,UP=class extends FP{constructor(t){t=t||{},super(t),this.speed_=t.speed||0,this.side_=t.side||"left"}animate(t){t.time||("left"==this.side_?this.dx=t.extent[0]-t.bbox[2]:this.dx=t.extent[2]-t.bbox[0],this.speed_&&(this.duration_=Math.abs(this.dx)/this.speed_/t.frameState.viewState.resolution));var e=t.geom.clone();return e.translate(this.dx*(1-this.easing_(t.elapsed)),0),this.drawGeom_(t,e),t.time<=this.duration_}},QP=UP,GP=class extends FP{constructor(t){super(t)}animate(t){var e=this.easing_(t.elapsed);if(e){t.context.save();var n=t.frameState.pixelRatio;t.context.globalAlpha=e,t.context.scale(e,1/e);var i=t.frameState.coordinateToPixelTransform,r=(1/e-1)*n*(i[0]*t.coord[0]+i[1]*t.coord[1]+i[4]),s=(e-1)*n*(i[2]*t.coord[0]+i[3]*t.coord[1]+i[5]);t.context.translate(r,s),this.drawGeom_(t,t.geom),t.context.restore()}return t.time<=this.duration_}},HP=GP,VP=class extends FP{constructor(t){t=t||{},super(t),this.set("zoomout",t.zoomOut)}animate(t){var e=this.easing_(t.elapsed);if(e){this.get("zoomout")&&(e=1/e);var n,i,r=t.style,s=[];for(n=0;n<r.length;n++)i=r[n].getImage(),i&&(s[n]=i.getScale(),"postrender"===t.type?i.setScale(s[n]*e/t.frameState.pixelRatio):i.setScale(s[n]*e));for(this.drawGeom_(t,t.geom),n=0;n<r.length;n++)i=r[n].getImage(),i&&i.setScale(s[n])}return t.time<=this.duration_}},jP=VP,WP=Object.defineProperty,zP=(t,e,n)=>e in t?WP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,KP=(t,e,n)=>(zP(t,"symbol"!==typeof e?e+"":e,n),n);const qP=(0,Em.pM)({__name:"OlFeature",props:{properties:{default:()=>[]}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("vectorSource"),r=(0,Em.WQ)("vectorLayer",null),s=(0,Em.WQ)("heatmapLayer",null),o=s||r,a=(0,Em.WQ)("animation",null),l=(0,Cm.KR)(new $({...n.properties}));return(0,Em.wB)((()=>n.properties),(()=>{l.value.setProperties(n.properties)})),(0,Em.wB)((()=>i),((t,e)=>{var n,i,r;null==(n=null==e?void 0:e.value)||n.removeFeature(l.value),null==(i=null==t?void 0:t.value)||i.addFeature(l.value),null==(r=null==t?void 0:t.value)||r.changed()})),(0,Em.sV)((()=>{var t;(null==a?void 0:a.value)&&(null==(t=null==o?void 0:o.value)||t.animateFeature(l.value,a.value)),(0,Em.dY)((()=>{var t;null==(t=null==i?void 0:i.value)||t.addFeature(l.value)}))})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.removeFeature(l.value)})),(0,Em.Gt)("feature",l),(0,Em.Gt)("stylable",l),e({feature:l}),(t,e)=>(0,Em.RG)(t.$slots,"default")}});function $P(t,e){"styles"===e&&(t.style=(0,Cm.KR)(t[e].value))}function XP(t,e=[]){const n=(0,Em.WQ)("ol-options");let i=(0,Cm.QW)(t);Object.keys(i).forEach((t=>{$P(i,t),i[t]=i[t].value}));const r=(0,Cm.Kh)({...i});return(0,Em.wB)(t,(()=>{i=(0,Cm.QW)(t),Object.keys(i).forEach((t=>{r[t]==i[t].value||e.includes(t)||($P(i,t),r[t]=i[t].value)}))})),(null==n?void 0:n.debug)&&console.debug("[Vue3-OpenLayers Debug] PROPS",{in:t,out:r}),{properties:r}}const YP=["change","error","propertychange"],ZP=["tileloadend","tileloaderror","tileloadstart"],JP=["imageloadend","imageloaderror","imageloadstart"],tN=["addFeature","changefeature","clear","featuresloadend","featuresloaderror","featuresloadstart","removefeature"];function eN(t,e){const n=(0,Em.nI)(),i=(0,Em.WQ)("ol-options");(0,Em.sV)((()=>{[...YP,...e].forEach((e=>{let r;r=(0,Cm.i9)(t)?"function"===typeof t.value?t.value():t.value:t,r.on(e,((...r)=>{(null==i?void 0:i.debug)&&console.debug("[Vue3-OpenLayers Debug] EVENT",e,{eventName:e,args:r,source:t}),null==n||n.emit(e,...r)}))}))}))}const nN=(0,Em.pM)({inheritAttrs:!1,__name:"OlGeoLocation",props:{tracking:{type:Boolean,default:!0},trackingOptions:{default:()=>({enableHighAccuracy:!0})},projection:{default:"EPSG:3857"}},setup(t,{expose:e}){const n=t,{properties:i}=XP(n),r=(0,Em.EW)((()=>new Fm(i)));eN(r,["change:accuracy","change:accuracyGeometry","change:altitude","change:altitudeAccuracy","change:heading","change:position","change:projection","change:speed","change:tracking","change:trackingOptions"]);const s=(0,Cm.KR)([]),o=(0,Cm.KR)(0),a=(0,Cm.KR)(0),l=(0,Cm.KR)(0),c=(0,Cm.KR)(0),u=(0,Cm.KR)(0),h=(0,Cm.KR)(null);return e({geoLoc:r,position:s,accuracy:o,altitude:a,altitudeAccuracy:l,speed:c,heading:u,accuracyGeometry:h}),(t,e)=>(0,Em.RG)(t.$slots,"default",{position:s.value,speed:c.value,heading:u.value,accuracy:o.value,altitude:a.value,altitudeAccuracy:l.value,accuracyGeometry:h.value})}}),iN=(0,Em.pM)({__name:"OlMap",props:{controls:{},pixelRatio:{},interactions:{},keyboardEventTarget:{},layers:{},maxTilesLoading:{},moveTolerance:{},overlays:{},target:{},view:{}},emits:["change:layerGroup","change:size","change:target","change:view","click","dblclick","singleclick","pointerdrag","pointermove","movestart","moveend","postrender","precompose","postcompose","rendercomplete"],setup(t,{expose:e,emit:n}){const i=t,r=n,{properties:s}=XP(i),o=(0,Cm.KR)(void 0);let a=new y_(s);(0,Em.wB)(s,(()=>{null==a||a.setProperties(s)})),(0,Em.sV)((()=>{null==a||a.setTarget(o.value)})),(0,Em.hi)((()=>{null==a||a.setTarget(void 0),a=void 0})),(0,Em.Gt)("map",a);const l=(t,e,n)=>null==a?void 0:a.forEachFeatureAtPixel(t,e,n),c=t=>null==a?void 0:a.getCoordinateFromPixel(t),u=()=>null==a?void 0:a.render(),h=()=>null==a?void 0:a.updateSize();return a.on("click",(t=>r("click",t))),a.on("change:size",(t=>r("change:size",t))),a.on("change:target",(t=>r("change:target",t))),a.on("change:view",(t=>r("change:view",t))),a.on("dblclick",(t=>r("dblclick",t))),a.on("singleclick",(t=>r("singleclick",t))),a.on("pointerdrag",(t=>r("pointerdrag",t))),a.on("pointermove",(t=>r("pointermove",t))),a.on("movestart",(t=>r("movestart",t))),a.on("moveend",(t=>r("moveend",t))),a.on("postrender",(t=>r("postrender",t))),a.on("precompose",(t=>r("precompose",t))),a.on("postcompose",(t=>r("postcompose",t))),a.on("rendercomplete",(t=>r("rendercomplete",t))),e({map:a,mapRef:o,forEachFeatureAtPixel:l,getCoordinateFromPixel:c,render:u,updateSize:h}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",{ref_key:"mapRef",ref:o},[(0,Em.RG)(t.$slots,"default")],512))}}),rN=(0,Em.pM)({inheritAttrs:!1,__name:"OlOverlay",props:{id:{},element:{},offset:{},position:{},positioning:{},stopEvent:{type:Boolean},insertFirst:{type:Boolean},autoPan:{type:[Boolean,Object]},className:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Cm.KR)(),{properties:s}=XP(n),o=(0,Em.EW)((()=>new b_(s)));eN(o,["change:element","change:map","change:offset","change:position","change:positioning"]);const a=()=>o.value.getOffset(),l=()=>o.value.getPosition(),c=()=>o.value.getPositioning(),u=t=>o.value.panIntoView(t),h=t=>o.value.setElement(t),A=t=>o.value.setOffset(t),d=t=>o.value.setPosition(t),f=t=>o.value.setPositioning(t);function p(t){const e=null==i?void 0:i.removeOverlay(t);e||console.warn("couldn't find matching overlay to remove",o.value)}return(0,Em.sV)((()=>{null==i||i.addOverlay(o.value)})),(0,Em.hi)((()=>p(o.value))),(0,Em.wB)(o,((t,e)=>{p(e),null==i||i.addOverlay(t)})),(0,Em.nT)((()=>{h(r.value)}),{flush:"post"}),e({overlay:o,htmlContent:r,getOffset:a,getPosition:l,getPositioning:c,panIntoView:u,setElement:h,setOffset:A,setPosition:d,setPositioning:f}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",{ref_key:"htmlContent",ref:r},[(0,Em.RG)(t.$slots,"default",{position:t.position})],512))}});function sN(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}var oN=1,aN=2,lN=3,cN=4,uN=5,hN=6378137,AN=6356752.314,dN=.0066943799901413165,fN=484813681109536e-20,pN=Math.PI/2,gN=.16666666666666666,mN=.04722222222222222,vN=.022156084656084655,yN=1e-10,wN=.017453292519943295,_N=57.29577951308232,bN=Math.PI/4,xN=2*Math.PI,EN=3.14159265359,CN={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667};const SN={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}};var BN=/[\s_\-\/\(\)]/g;function TN(t,e){if(t[e])return t[e];var n,i,r=Object.keys(t),s=e.toLowerCase().replace(BN,""),o=-1;while(++o<r.length)if(n=r[o],i=n.toLowerCase().replace(BN,""),i===s)return t[n]}function IN(t){var e,n,i,r={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*wN},lat_1:function(t){r.lat1=t*wN},lat_2:function(t){r.lat2=t*wN},lat_ts:function(t){r.lat_ts=t*wN},lon_0:function(t){r.long0=t*wN},lon_1:function(t){r.long1=t*wN},lon_2:function(t){r.long2=t*wN},alpha:function(t){r.alpha=parseFloat(t)*wN},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*wN},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=TN(SN,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*wN},pm:function(t){var e=TN(CN,t);r.from_greenwich=(e||parseFloat(t))*wN},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in s)n=s[e],e in o?(i=o[e],"function"===typeof i?i(n):r[i]=n):r[e]=n;return"string"===typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var FN=1,LN=2,RN=3,MN=4,PN=5,NN=-1,ON=/\s/,kN=/[A-Za-z]/,DN=/[A-Za-z84_]/,UN=/[,\]]/,QN=/[\d\.E\-\+]/;function GN(t){if("string"!==typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=FN}function HN(t){var e=new GN(t);return e.output()}function VN(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce((function(t,e){return jN(e,t),t}),i);e&&(t[e]=r)}function jN(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void jN(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var i;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&jN(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&jN(t[3],e[n]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void VN(e,n,t);default:i=-1;while(++i<t.length)if(!Array.isArray(t[i]))return jN(t,e[n]);return VN(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}GN.prototype.readCharicter=function(){var t=this.text[this.place++];if(this.state!==MN)while(ON.test(t)){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case FN:return this.neutral(t);case LN:return this.keyword(t);case MN:return this.quoted(t);case PN:return this.afterquote(t);case RN:return this.number(t);case NN:return}},GN.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=MN);if(UN.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},GN.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=FN)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=FN,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=NN))):void 0},GN.prototype.number=function(t){if(!QN.test(t)){if(UN.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},GN.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=PN},GN.prototype.keyword=function(t){if(DN.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=FN)}if(!UN.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},GN.prototype.neutral=function(t){if(kN.test(t))return this.word=t,void(this.state=LN);if('"'===t)return this.word="",void(this.state=MN);if(QN.test(t))return this.word=t,void(this.state=RN);if(!UN.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},GN.prototype.output=function(){while(this.place<this.text.length)this.readCharicter();if(this.state===NN)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var WN=.017453292519943295;function zN(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}function KN(t){return t*WN}function qN(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",n=0,i=t.AXIS.length;n<i;++n){var r=[t.AXIS[n][0].toLowerCase(),t.AXIS[n][1].toLowerCase()];-1!==r[0].indexOf("north")||("y"===r[0]||"lat"===r[0])&&"north"===r[1]?e+="n":-1!==r[0].indexOf("south")||("y"===r[0]||"lat"===r[0])&&"south"===r[1]?e+="s":-1!==r[0].indexOf("east")||("x"===r[0]||"lon"===r[0])&&"east"===r[1]?e+="e":-1===r[0].indexOf("west")&&("x"!==r[0]&&"lon"!==r[0]||"west"!==r[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var s=t.GEOGCS;function o(e){var n=t.to_meter||1;return e*n}"GEOGCS"===t.type&&(s=t),s&&(s.DATUM?t.datumCode=s.DATUM.name.toLowerCase():t.datumCode=s.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),s.DATUM&&s.DATUM.SPHEROID&&(t.ellps=s.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=s.DATUM.SPHEROID.a,t.rf=parseFloat(s.DATUM.SPHEROID.rf,10)),s.DATUM&&s.DATUM.TOWGS84&&(t.datum_params=s.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);var a=function(e){return zN(t,e)},l=[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",KN],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",KN],["x0","false_easting",o],["y0","false_northing",o],["long0","central_meridian",KN],["lat0","latitude_of_origin",KN],["lat0","standard_parallel_1",KN],["lat1","standard_parallel_1",KN],["lat2","standard_parallel_2",KN],["azimuth","Azimuth"],["alpha","azimuth",KN],["srsCode","name"]];l.forEach(a),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=KN(t.lat0>0?90:-90)):(t.lat0=KN(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function $N(t){var e=HN(t),n=e.shift(),i=e.shift();e.unshift(["name",i]),e.unshift(["type",n]);var r={};return jN(e,r),qN(r),r}function XN(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"===typeof n?"+"===n.charAt(0)?XN[t]=IN(arguments[1]):XN[t]=$N(arguments[1]):XN[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?XN.apply(e,t):XN(t)}));if("string"===typeof t){if(t in XN)return XN[t]}else"EPSG"in t?XN["EPSG:"+t.EPSG]=t:"ESRI"in t?XN["ESRI:"+t.ESRI]=t:"IAU2000"in t?XN["IAU2000:"+t.IAU2000]=t:console.log(t);return}}function YN(t){return"string"===typeof t}function ZN(t){return t in XN}sN(XN);var JN=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function tO(t){return JN.some((function(e){return t.indexOf(e)>-1}))}var eO=["3857","900913","3785","102113"];function nO(t){var e=TN(t,"authority");if(e){var n=TN(e,"epsg");return n&&eO.indexOf(n)>-1}}function iO(t){var e=TN(t,"extension");if(e)return TN(e,"proj4")}function rO(t){return"+"===t[0]}function sO(t){if(!YN(t))return t;if(ZN(t))return XN[t];if(tO(t)){var e=$N(t);if(nO(e))return XN["EPSG:3857"];var n=iO(e);return n?IN(n):e}return rO(t)?IN(t):void 0}function oO(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)n=e[i],void 0!==n&&(t[i]=n);return t}function aO(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function lO(t){return t<0?-1:1}function cO(t){return Math.abs(t)<=EN?t:t-lO(t)*xN}function uO(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(pN-e))/i}function hO(t,e){for(var n,i,r=.5*t,s=pN-2*Math.atan(e),o=0;o<=15;o++)if(n=t*Math.sin(s),i=pN-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-s,s+=i,Math.abs(i)<=1e-10)return s;return-9999}function AO(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=aO(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)}function dO(t){var e,n,i=t.x,r=t.y;if(r*_N>90&&r*_N<-90&&i*_N>180&&i*_N<-180)return null;if(Math.abs(Math.abs(r)-pN)<=yN)return null;if(this.sphere)e=this.x0+this.a*this.k0*cO(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(bN+.5*r));else{var s=Math.sin(r),o=uO(this.e,r,s);e=this.x0+this.a*this.k0*cO(i-this.long0),n=this.y0-this.a*this.k0*Math.log(o)}return t.x=e,t.y=n,t}function fO(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=pN-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(n=hO(this.e,s),-9999===n)return null}return e=cO(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t}var pO=["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"];const gO={init:AO,forward:dO,inverse:fO,names:pO};function mO(){}function vO(t){return t}var yO=["longlat","identity"];const wO={init:mO,forward:vO,inverse:vO,names:yO};var _O=[gO,wO],bO={},xO=[];function EO(t,e){var n=xO.length;return t.names?(xO[n]=t,t.names.forEach((function(t){bO[t.toLowerCase()]=n})),this):(console.log(e),!0)}function CO(t){if(!t)return!1;var e=t.toLowerCase();return"undefined"!==typeof bO[e]&&xO[bO[e]]?xO[bO[e]]:void 0}function SO(){_O.forEach(EO)}const BO={start:SO,add:EO,get:CO};var TO={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},IO=TO.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};function FO(t,e,n,i){var r=t*t,s=e*e,o=(r-s)/r,a=0;i?(t*=1-o*(gN+o*(mN+o*vN)),r=t*t,o=0):a=Math.sqrt(o);var l=(r-s)/s;return{es:o,e:a,ep2:l}}function LO(t,e,n,i,r){if(!t){var s=TN(TO,i);s||(s=IO),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<yN)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}TO.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var RO={};function MO(t,e,n,i,r,s,o){var a={};return a.datum_type=void 0===t||"none"===t?uN:cN,e&&(a.datum_params=e.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=oN),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=aN,a.datum_params[3]*=fN,a.datum_params[4]*=fN,a.datum_params[5]*=fN,a.datum_params[6]=a.datum_params[6]/1e6+1))),o&&(a.datum_type=lN,a.grids=o),a.a=n,a.b=i,a.es=r,a.ep2=s,a}RO.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},RO.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},RO.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},RO.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},RO.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},RO.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},RO.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},RO.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},RO.militargeographische_institut={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},RO.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},RO.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},RO.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},RO.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},RO.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},RO.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},RO.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},RO.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},RO.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var PO={};function NO(t,e){var n=new DataView(e),i=UO(n),r=QO(n,i),s=HO(n,r,i),o={header:r,subgrids:s};return PO[t]=o,o}function OO(t){if(void 0===t)return null;var e=t.split(",");return e.map(kO)}function kO(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:PO[t]||null,isNull:!1}}function DO(t){return t/3600*Math.PI/180}function UO(t){var e=t.getInt32(8,!1);return 11!==e&&(e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}function QO(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:GO(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}function GO(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function HO(t,e,n){for(var i=176,r=[],s=0;s<e.nSubgrids;s++){var o=jO(t,i,n),a=WO(t,i,o,n),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),c=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[DO(o.lowerLongitude),DO(o.lowerLatitude)],del:[DO(o.longitudeInterval),DO(o.latitudeInterval)],lim:[l,c],count:o.gridNodeCount,cvs:VO(a)}),i+=176+16*o.gridNodeCount}return r}function VO(t){return t.map((function(t){return[DO(t.longitudeShift),DO(t.latitudeShift)]}))}function jO(t,e,n){return{name:GO(t,e+8,e+16).trim(),parent:GO(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function WO(t,e,n,i){for(var r=e+176,s=16,o=[],a=0;a<n.gridNodeCount;a++){var l={latitudeShift:t.getFloat32(r+a*s,i),longitudeShift:t.getFloat32(r+a*s+4,i),latitudeAccuracy:t.getFloat32(r+a*s+8,i),longitudeAccuracy:t.getFloat32(r+a*s+12,i)};o.push(l)}return o}function zO(t,e){if(!(this instanceof zO))return new zO(t);e=e||function(t){if(t)throw t};var n=sO(t);if("object"===typeof n){var i=zO.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=TN(RO,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s=LO(n.a,n.b,n.rf,n.ellps,n.sphere),o=FO(s.a,s.b,s.rf,n.R_A),a=OO(n.nadgrids),l=n.datum||MO(n.datumCode,n.datum_params,s.a,s.b,o.es,o.ep2,a);oO(this,n),oO(this,i),this.a=s.a,this.b=s.b,this.rf=s.rf,this.sphere=s.sphere,this.es=o.es,this.e=o.e,this.ep2=o.ep2,this.datum=l,this.init(),e(null,this)}else e(t)}else e(t)}function KO(t,e){return t.datum_type===e.datum_type&&(!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===oN?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==aN||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6]))}function qO(t,e,n){var i,r,s,o,a=t.x,l=t.y,c=t.z?t.z:0;if(l<-pN&&l>-1.001*pN)l=-pN;else if(l>pN&&l<1.001*pN)l=pN;else{if(l<-pN)return{x:-1/0,y:-1/0,z:t.z};if(l>pN)return{x:1/0,y:1/0,z:t.z}}return a>Math.PI&&(a-=2*Math.PI),r=Math.sin(l),o=Math.cos(l),s=r*r,i=n/Math.sqrt(1-e*s),{x:(i+c)*o*Math.cos(a),y:(i+c)*o*Math.sin(a),z:(i*(1-e)+c)*r}}function $O(t,e,n,i){var r,s,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w=1e-12,_=w*w,b=30,x=t.x,E=t.y,C=t.z?t.z:0;if(r=Math.sqrt(x*x+E*E),s=Math.sqrt(x*x+E*E+C*C),r/n<w){if(m=0,s/n<w)return v=pN,y=-i,{x:t.x,y:t.y,z:t.z}}else m=Math.atan2(E,x);o=C/s,a=r/s,l=1/Math.sqrt(1-e*(2-e)*a*a),h=a*(1-e)*l,A=o*l,g=0;do{g++,u=n/Math.sqrt(1-e*A*A),y=r*h+C*A-u*(1-e*A*A),c=e*u/(u+y),l=1/Math.sqrt(1-c*(2-c)*a*a),d=a*(1-c)*l,f=o*l,p=f*h-d*A,h=d,A=f}while(p*p>_&&g<b);return v=Math.atan(f/Math.abs(d)),{x:m,y:v,z:y}}function XO(t,e,n){if(e===oN)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(e===aN){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6];return{x:c*(t.x-l*t.y+a*t.z)+i,y:c*(l*t.x+t.y-o*t.z)+r,z:c*(-a*t.x+o*t.y+t.z)+s}}}function YO(t,e,n){if(e===oN)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(e===aN){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],c=n[6],u=(t.x-i)/c,h=(t.y-r)/c,A=(t.z-s)/c;return{x:u+l*h-a*A,y:-l*u+h+o*A,z:a*u-o*h+A}}}function ZO(t){return t===oN||t===aN}function JO(t,e,n){if(KO(t,e))return n;if(t.datum_type===uN||e.datum_type===uN)return n;var i=t.a,r=t.es;if(t.datum_type===lN){var s=tk(t,!1,n);if(0!==s)return;i=hN,r=dN}var o=e.a,a=e.b,l=e.es;if(e.datum_type===lN&&(o=hN,a=AN,l=dN),r===l&&i===o&&!ZO(t.datum_type)&&!ZO(e.datum_type))return n;if(n=qO(n,r,i),ZO(t.datum_type)&&(n=XO(n,t.datum_type,t.datum_params)),ZO(e.datum_type)&&(n=YO(n,e.datum_type,e.datum_params)),n=$O(n,l,o,a),e.datum_type===lN){var c=tk(e,!0,n);if(0!==c)return}return n}function tk(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},s=[];t:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){r=i;break}if(a.mandatory,null!==a.grid)for(var l=a.grid.subgrids,c=0,u=l.length;c<u;c++){var h=l[c],A=(Math.abs(h.del[1])+Math.abs(h.del[0]))/1e4,d=h.ll[0]-A,f=h.ll[1]-A,p=h.ll[0]+(h.lim[0]-1)*h.del[0]+A,g=h.ll[1]+(h.lim[1]-1)*h.del[1]+A;if(!(f>i.y||d>i.x||g<i.y||p<i.x)&&(r=ek(i,e,h),!isNaN(r.x)))break t}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*_N+" "+i.y*_N+" tried: '"+s+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function ek(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var r={x:t.x,y:t.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=cO(r.x-Math.PI)+Math.PI;var s=nk(r,n);if(e){if(isNaN(s.x))return i;s.x=r.x-s.x,s.y=r.y-s.y;var o,a,l=9,c=1e-12;do{if(a=nk(s,n),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:r.x-(a.x+s.x),y:r.y-(a.y+s.y)},s.x+=o.x,s.y+=o.y}while(l--&&Math.abs(o.x)>c&&Math.abs(o.y)>c);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=cO(s.x+n.ll[0]),i.y=s.y+n.ll[1]}else isNaN(s.x)||(i.x=t.x+s.x,i.y=t.y+s.y);return i}function nk(t,e){var n,i={x:t.x/e.del[0],y:t.y/e.del[1]},r={x:Math.floor(i.x),y:Math.floor(i.y)},s={x:i.x-1*r.x,y:i.y-1*r.y},o={x:Number.NaN,y:Number.NaN};if(r.x<0||r.x>=e.lim[0])return o;if(r.y<0||r.y>=e.lim[1])return o;n=r.y*e.lim[0]+r.x;var a={x:e.cvs[n][0],y:e.cvs[n][1]};n++;var l={x:e.cvs[n][0],y:e.cvs[n][1]};n+=e.lim[0];var c={x:e.cvs[n][0],y:e.cvs[n][1]};n--;var u={x:e.cvs[n][0],y:e.cvs[n][1]},h=s.x*s.y,A=s.x*(1-s.y),d=(1-s.x)*(1-s.y),f=(1-s.x)*s.y;return o.x=d*a.x+A*l.x+f*u.x+h*c.x,o.y=d*a.y+A*l.y+f*u.y+h*c.y,o}function ik(t,e,n){var i,r,s,o=n.x,a=n.y,l=n.z||0,c={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==n.z)switch(0===s?(i=o,r=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(i=a,r=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(i=l,r="z"),t.axis[s]){case"e":c[r]=i;break;case"w":c[r]=-i;break;case"n":c[r]=i;break;case"s":c[r]=-i;break;case"u":void 0!==n[r]&&(c.z=i);break;case"d":void 0!==n[r]&&(c.z=-i);break;default:return null}return c}function rk(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function sk(t){ok(t.x),ok(t.y)}function ok(t){if("function"===typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!==typeof t||t!==t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function ak(t,e){return(t.datum.datum_type===oN||t.datum.datum_type===aN||t.datum.datum_type===lN)&&"WGS84"!==e.datumCode||(e.datum.datum_type===oN||e.datum.datum_type===aN||e.datum.datum_type===lN)&&"WGS84"!==t.datumCode}function lk(t,e,n,i){var r;n=Array.isArray(n)?rk(n):{x:n.x,y:n.y,z:n.z,m:n.m};var s=void 0!==n.z;if(sk(n),t.datum&&e.datum&&ak(t,e)&&(r=new zO("WGS84"),n=lk(t,r,n,i),t=r),i&&"enu"!==t.axis&&(n=ik(t,!1,n)),"longlat"===t.projName)n={x:n.x*wN,y:n.y*wN,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),n=t.inverse(n),!n)return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=JO(t.datum,e.datum,n),n)return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*_N,y:n.y*_N,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),i&&"enu"!==e.axis?ik(e,!0,n):(n&&!s&&delete n.z,n)}zO.projections=BO,zO.projections.start();var ck=zO("WGS84");function uk(t,e,n,i){var r,s,o;return Array.isArray(n)?(r=lk(t,e,n,i)||{x:NaN,y:NaN},n.length>2?"undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name?"number"===typeof r.z?[r.x,r.y,r.z].concat(n.splice(3)):[r.x,r.y,n[2]].concat(n.splice(3)):[r.x,r.y].concat(n.splice(2)):[r.x,r.y]):(s=lk(t,e,n,i),o=Object.keys(n),2===o.length||o.forEach((function(i){if("undefined"!==typeof t.name&&"geocent"===t.name||"undefined"!==typeof e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;s[i]=n[i]})),s)}function hk(t){return t instanceof zO?t:t.oProj?t.oProj:zO(t)}function Ak(t,e,n){t=hk(t);var i,r=!1;return"undefined"===typeof e?(e=t,t=ck,r=!0):("undefined"!==typeof e.x||Array.isArray(e))&&(n=e,e=t,t=ck,r=!0),e=hk(e),n?uk(t,e,n):(i={forward:function(n,i){return uk(t,e,n,i)},inverse:function(n,i){return uk(e,t,n,i)}},r&&(i.oProj=e),i)}var dk=6,fk="AJSAJS",pk="AFAFAF",gk=65,mk=73,vk=79,yk=86,wk=90;const _k={forward:bk,inverse:xk,toPoint:Ek};function bk(t,e){return e=e||5,Fk(Bk({lat:t[1],lon:t[0]}),e)}function xk(t){var e=Tk(Pk(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]}function Ek(t){var e=Tk(Pk(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ck(t){return t*(Math.PI/180)}function Sk(t){return t/Math.PI*180}function Bk(t){var e,n,i,r,s,o,a,l,c,u=t.lat,h=t.lon,A=6378137,d=.00669438,f=.9996,p=Ck(u),g=Ck(h);c=Math.floor((h+180)/6)+1,180===h&&(c=60),u>=56&&u<64&&h>=3&&h<12&&(c=32),u>=72&&u<84&&(h>=0&&h<9?c=31:h>=9&&h<21?c=33:h>=21&&h<33?c=35:h>=33&&h<42&&(c=37)),e=6*(c-1)-180+3,l=Ck(e),n=d/(1-d),i=A/Math.sqrt(1-d*Math.sin(p)*Math.sin(p)),r=Math.tan(p)*Math.tan(p),s=n*Math.cos(p)*Math.cos(p),o=Math.cos(p)*(g-l),a=A*((1-d/4-3*d*d/64-5*d*d*d/256)*p-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*p)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*p)-35*d*d*d/3072*Math.sin(6*p));var m=f*i*(o+(1-r+s)*o*o*o/6+(5-18*r+r*r+72*s-58*n)*o*o*o*o*o/120)+5e5,v=f*(a+i*Math.tan(p)*(o*o/2+(5-r+9*s+4*s*s)*o*o*o*o/24+(61-58*r+r*r+600*s-330*n)*o*o*o*o*o*o/720));return u<0&&(v+=1e7),{northing:Math.round(v),easting:Math.round(m),zoneNumber:c,zoneLetter:Ik(u)}}function Tk(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s,o,a,l,c,u,h,A,d,f,p=.9996,g=6378137,m=.00669438,v=(1-Math.sqrt(1-m))/(1+Math.sqrt(1-m)),y=n-5e5,w=e;i<"N"&&(w-=1e7),A=6*(r-1)-180+3,s=m/(1-m),h=w/p,d=h/(g*(1-m/4-3*m*m/64-5*m*m*m/256)),f=d+(3*v/2-27*v*v*v/32)*Math.sin(2*d)+(21*v*v/16-55*v*v*v*v/32)*Math.sin(4*d)+151*v*v*v/96*Math.sin(6*d),o=g/Math.sqrt(1-m*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),l=s*Math.cos(f)*Math.cos(f),c=g*(1-m)/Math.pow(1-m*Math.sin(f)*Math.sin(f),1.5),u=y/(o*p);var _=f-o*Math.tan(f)/c*(u*u/2-(5+3*a+10*l-4*l*l-9*s)*u*u*u*u/24+(61+90*a+298*l+45*a*a-252*s-3*l*l)*u*u*u*u*u*u/720);_=Sk(_);var b,x=(u-(1+2*a+l)*u*u*u/6+(5-2*l+28*a-3*l*l+8*s+24*a*a)*u*u*u*u*u/120)/Math.cos(f);if(x=A+Sk(x),t.accuracy){var E=Tk({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:E.lat,right:E.lon,bottom:_,left:x}}else b={lat:_,lon:x};return b}function Ik(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function Fk(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+Lk(t.easting,t.northing,t.zoneNumber)+n.substr(n.length-5,e)+i.substr(i.length-5,e)}function Lk(t,e,n){var i=Rk(n),r=Math.floor(t/1e5),s=Math.floor(e/1e5)%20;return Mk(r,s,i)}function Rk(t){var e=t%dk;return 0===e&&(e=dk),e}function Mk(t,e,n){var i=n-1,r=fk.charCodeAt(i),s=pk.charCodeAt(i),o=r+t-1,a=s+e,l=!1;o>wk&&(o=o-wk+gk-1,l=!0),(o===mk||r<mk&&o>mk||(o>mk||r<mk)&&l)&&o++,(o===vk||r<vk&&o>vk||(o>vk||r<vk)&&l)&&(o++,o===mk&&o++),o>wk&&(o=o-wk+gk-1),a>yk?(a=a-yk+gk-1,l=!0):l=!1,(a===mk||s<mk&&a>mk||(a>mk||s<mk)&&l)&&a++,(a===vk||s<vk&&a>vk||(a>vk||s<vk)&&l)&&(a++,a===mk&&a++),a>yk&&(a=a-yk+gk-1);var c=String.fromCharCode(o)+String.fromCharCode(a);return c}function Pk(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";var e,n=t.length,i=null,r="",s=0;while(!/[A-Z]/.test(e=t.charAt(s))){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var o=parseInt(r,10);if(0===s||s+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(s,s+=2);var l=Rk(o),c=Nk(i.charAt(0),l),u=Ok(i.charAt(1),l);while(u<kk(a))u+=2e6;var h=n-s;if(h%2!==0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var A,d,f,p,g,m=h/2,v=0,y=0;return m>0&&(A=1e5/Math.pow(10,m),d=t.substring(s,s+m),v=parseFloat(d)*A,f=t.substring(s+m),y=parseFloat(f)*A),p=v+c,g=y+u,{easting:p,northing:g,zoneLetter:a,zoneNumber:o,accuracy:A}}function Nk(t,e){var n=fk.charCodeAt(e-1),i=1e5,r=!1;while(n!==t.charCodeAt(0)){if(n++,n===mk&&n++,n===vk&&n++,n>wk){if(r)throw"Bad character: "+t;n=gk,r=!0}i+=1e5}return i}function Ok(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=pk.charCodeAt(e-1),i=0,r=!1;while(n!==t.charCodeAt(0)){if(n++,n===mk&&n++,n===vk&&n++,n>yk){if(r)throw"Bad character: "+t;n=gk,r=!0}i+=1e5}return i}function kk(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Dk(t,e,n){if(!(this instanceof Dk))return new Dk(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"===typeof t&&"undefined"===typeof e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Dk.fromMGRS=function(t){return new Dk(Ek(t))},Dk.prototype.toMGRS=function(t){return bk([this.x,this.y],t)};var Uk=1,Qk=.25,Gk=.046875,Hk=.01953125,Vk=.01068115234375,jk=.75,Wk=.46875,zk=.013020833333333334,Kk=.007120768229166667,qk=.3645833333333333,$k=.005696614583333333,Xk=.3076171875;function Yk(t){var e=[];e[0]=Uk-t*(Qk+t*(Gk+t*(Hk+t*Vk))),e[1]=t*(jk-t*(Gk+t*(Hk+t*Vk)));var n=t*t;return e[2]=n*(Wk-t*(zk+t*Kk)),n*=t,e[3]=n*(qk-t*$k),e[4]=n*t*Xk,e}function Zk(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}var Jk=20;function tD(t,e,n){for(var i=1/(1-e),r=t,s=Jk;s;--s){var o=Math.sin(r),a=1-e*o*o;if(a=(Zk(r,o,Math.cos(r),n)-t)*(a*Math.sqrt(a))*i,r-=a,Math.abs(a)<yN)return r}return r}function eD(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Yk(this.es),this.ml0=Zk(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))}function nD(t){var e,n,i,r=t.x,s=t.y,o=cO(r-this.long0),a=Math.sin(s),l=Math.cos(s);if(this.es){var c=l*o,u=Math.pow(c,2),h=this.ep2*Math.pow(l,2),A=Math.pow(h,2),d=Math.abs(l)>yN?Math.tan(s):0,f=Math.pow(d,2),p=Math.pow(f,2);e=1-this.es*Math.pow(a,2),c/=Math.sqrt(e);var g=Zk(s,a,l,this.en);n=this.a*(this.k0*c*(1+u/6*(1-f+h+u/20*(5-18*f+p+14*h-58*f*h+u/42*(61+179*p-p*f-479*f)))))+this.x0,i=this.a*(this.k0*(g-this.ml0+a*o*c/2*(1+u/12*(5-f+9*h+4*A+u/30*(61+p-58*f+270*h-330*f*h+u/56*(1385+543*p-p*f-3111*f))))))+this.y0}else{var m=l*Math.sin(o);if(Math.abs(Math.abs(m)-1)<yN)return 93;if(n=.5*this.a*this.k0*Math.log((1+m)/(1-m))+this.x0,i=l*Math.cos(o)/Math.sqrt(1-Math.pow(m,2)),m=Math.abs(i),m>=1){if(m-1>yN)return 93;i=0}else i=Math.acos(i);s<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t}function iD(t){var e,n,i,r,s=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(this.es)if(e=this.ml0+o/this.k0,n=tD(e,this.es,this.en),Math.abs(n)<pN){var a=Math.sin(n),l=Math.cos(n),c=Math.abs(l)>yN?Math.tan(n):0,u=this.ep2*Math.pow(l,2),h=Math.pow(u,2),A=Math.pow(c,2),d=Math.pow(A,2);e=1-this.es*Math.pow(a,2);var f=s*Math.sqrt(e)/this.k0,p=Math.pow(f,2);e*=c,i=n-e*p/(1-this.es)*.5*(1-p/12*(5+3*A-9*u*A+u-4*h-p/30*(61+90*A-252*u*A+45*d+46*u-p/56*(1385+3633*A+4095*d+1574*d*A)))),r=cO(this.long0+f*(1-p/6*(1+2*A+u-p/20*(5+28*A+24*d+8*u*A+6*u-p/42*(61+662*A+1320*d+720*d*A))))/l)}else i=pN*lO(o),r=0;else{var g=Math.exp(s/this.k0),m=.5*(g-1/g),v=this.lat0+o/this.k0,y=Math.cos(v);e=Math.sqrt((1-Math.pow(y,2))/(1+Math.pow(m,2))),i=Math.asin(e),o<0&&(i=-i),r=0===m&&0===y?0:cO(Math.atan2(m,y)+this.long0)}return t.x=r,t.y=i,t}var rD=["Fast_Transverse_Mercator","Fast Transverse Mercator"];const sD={init:eD,forward:nD,inverse:iD,names:rD};function oD(t){var e=Math.exp(t);return e=(e-1/e)/2,e}function aD(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function lD(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}function cD(t){var e=Math.abs(t);return e=lD(e*(1+e/(aD(1,e)+1))),t<0?-e:e}function uD(t,e){var n,i=2*Math.cos(2*e),r=t.length-1,s=t[r],o=0;while(--r>=0)n=i*s-o+t[r],o=s,s=n;return e+n*Math.sin(2*e)}function hD(t,e){var n,i=2*Math.cos(e),r=t.length-1,s=t[r],o=0;while(--r>=0)n=i*s-o+t[r],o=s,s=n;return Math.sin(e)*n}function AD(t){var e=Math.exp(t);return e=(e+1/e)/2,e}function dD(t,e,n){var i,r,s=Math.sin(e),o=Math.cos(e),a=oD(n),l=AD(n),c=2*o*l,u=-2*s*a,h=t.length-1,A=t[h],d=0,f=0,p=0;while(--h>=0)i=f,r=d,f=A,d=p,A=c*f-i-u*d+t[h],p=u*f-r+c*d;return c=s*l,u=o*a,[c*A-u*p,c*p+u*A]}function fD(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(sD.init.apply(this),this.forward=sD.forward,this.inverse=sD.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=uD(this.cbg,this.lat0);this.Zb=-this.Qn*(i+hD(this.gtu,2*i))}function pD(t){var e=cO(t.x-this.long0),n=t.y;n=uD(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(i,o*r),e=Math.atan2(s*r,aD(i,r*o)),e=cD(Math.tan(e));var a,l,c=dD(this.gtu,2*n,2*e);return n+=c[0],e+=c[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t}function gD(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var s=dD(this.utg,2*r,2*i);r+=s[0],i+=s[1],i=Math.atan(oD(i));var o=Math.sin(r),a=Math.cos(r),l=Math.sin(i),c=Math.cos(i);r=Math.atan2(o*c,aD(l,c*a)),i=Math.atan2(l,c*a),e=cO(i+this.long0),n=uD(this.cgb,r)}else e=1/0,n=1/0;return t.x=e,t.y=n,t}var mD=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"];const vD={init:fD,forward:pD,inverse:gD,names:mD};function yD(t,e){if(void 0===t){if(t=Math.floor(30*(cO(e)+Math.PI)/Math.PI)+1,t<0)return 0;if(t>60)return 60}return t}var wD="etmerc";function _D(){var t=yD(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*wN,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,vD.init.apply(this),this.forward=vD.forward,this.inverse=vD.inverse}var bD=["Universal Transverse Mercator System","utm"];const xD={init:_D,names:bD,dependsOn:wD};function ED(t,e){return Math.pow((1-t)/(1+t),e)}var CD=20;function SD(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+bN)/(Math.pow(Math.tan(.5*this.lat0+bN),this.C)*ED(this.e*t,this.ratexp))}function BD(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+bN),this.C)*ED(this.e*Math.sin(n),this.ratexp))-pN,t.x=this.C*e,t}function TD(t){for(var e=1e-14,n=t.x/this.C,i=t.y,r=Math.pow(Math.tan(.5*i+bN)/this.K,1/this.C),s=CD;s>0;--s){if(i=2*Math.atan(r*ED(this.e*Math.sin(t.y),-.5*this.e))-pN,Math.abs(i-t.y)<e)break;t.y=i}return s?(t.x=n,t.y=i,t):null}var ID=["gauss"];const FD={init:SD,forward:BD,inverse:TD,names:ID};function LD(){FD.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))}function RD(t){var e,n,i,r;return t.x=cO(t.x-this.long0),FD.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t}function MD(t){var e,n,i,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=aD(t.x,t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),i=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,FD.inverse.apply(this,[t]),t.x=cO(t.x+this.long0),t}var PD=["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"];const ND={init:LD,forward:RD,inverse:MD,names:PD};function OD(t,e,n){return e*=n,Math.tan(.5*(pN+t))*Math.pow((1-e)/(1+e),.5*n)}function kD(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=yN&&(this.k0=.5*(1+lO(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=yN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=yN&&Math.abs(Math.cos(this.lat_ts))>yN&&(this.k0=.5*this.cons*aO(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/uO(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=aO(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-pN,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function DD(t){var e,n,i,r,s,o,a=t.x,l=t.y,c=Math.sin(l),u=Math.cos(l),h=cO(a-this.long0);return Math.abs(Math.abs(a-this.long0)-Math.PI)<=yN&&Math.abs(l+this.lat0)<=yN?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*u*Math.cos(h)),t.x=this.a*e*u*Math.sin(h)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*u*Math.cos(h))+this.y0,t):(n=2*Math.atan(this.ssfn_(l,c,this.e))-pN,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=yN?(s=uO(this.e,l*this.con,this.con*c),o=2*this.a*this.k0*s/this.cons,t.x=this.x0+o*Math.sin(a-this.long0),t.y=this.y0-this.con*o*Math.cos(a-this.long0),t):(Math.abs(this.sinlat0)<yN?(e=2*this.a*this.k0/(1+r*Math.cos(h)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(h))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(h))+this.y0),t.x=e*r*Math.sin(h)+this.x0,t))}function UD(t){var e,n,i,r,s;t.x-=this.x0,t.y-=this.y0;var o=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var a=2*Math.atan(o/(2*this.a*this.k0));return e=this.long0,n=this.lat0,o<=yN?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(a)*this.sinlat0+t.y*Math.sin(a)*this.coslat0/o),e=Math.abs(this.coslat0)<yN?this.lat0>0?cO(this.long0+Math.atan2(t.x,-1*t.y)):cO(this.long0+Math.atan2(t.x,t.y)):cO(this.long0+Math.atan2(t.x*Math.sin(a),o*this.coslat0*Math.cos(a)-t.y*this.sinlat0*Math.sin(a))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=yN){if(o<=yN)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=o*this.cons/(2*this.a*this.k0),n=this.con*hO(this.e,i),e=this.con*cO(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(o*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,o<=yN?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/o),e=cO(this.long0+Math.atan2(t.x*Math.sin(r),o*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*hO(this.e,Math.tan(.5*(pN+s)));return t.x=e,t.y=n,t}var QD=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"];const GD={init:kD,forward:DD,inverse:UD,names:QD,ssfn_:OD};function HD(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=this.rf,r=1/i,s=2*r-Math.pow(r,2),o=this.e=Math.sqrt(s);this.R=this.k0*n*Math.sqrt(1-s)/(1-s*Math.pow(e,2)),this.alpha=Math.sqrt(1+s/(1-s)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),l=Math.log(Math.tan(Math.PI/4+t/2)),c=Math.log((1+o*e)/(1-o*e));this.K=a-this.alpha*l+this.alpha*o/2*c}function VD(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t}function jD(t){var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,c=s,u=-1e3,h=0;while(Math.abs(c-u)>1e-7){if(++h>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(c))/2)),u=c,c=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=c,t}var WD=["somerc"];const zD={init:HD,forward:VD,inverse:jD,names:WD};var KD=1e-7;function qD(t){var e=["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"],n="object"===typeof t.PROJECTION?Object.keys(t.PROJECTION)[0]:t.PROJECTION;return"no_uoff"in t||"no_off"in t||-1!==e.indexOf(n)}function $D(){var t,e,n,i,r,s,o,a,l,c,u,h=0,A=0,d=0,f=0,p=0,g=0,m=0;this.no_off=qD(this),this.no_rot="no_rot"in this;var v=!1;"alpha"in this&&(v=!0);var y=!1;if("rectified_grid_angle"in this&&(y=!0),v&&(m=this.alpha),y&&(h=this.rectified_grid_angle*wN),v||y)A=this.longc;else if(d=this.long1,p=this.lat1,f=this.long2,g=this.lat2,Math.abs(p-g)<=KD||(t=Math.abs(p))<=KD||Math.abs(t-pN)<=KD||Math.abs(Math.abs(this.lat0)-pN)<=KD||Math.abs(Math.abs(g)-pN)<=KD)throw new Error;var w=1-this.es;e=Math.sqrt(w),Math.abs(this.lat0)>yN?(a=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*a*a,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/w),this.A=this.B*this.k0*e/t,i=this.B*e/(n*Math.sqrt(t)),r=i*i-1,r<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(uO(this.e,this.lat0,a),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),v||y?(v?(u=Math.asin(Math.sin(m)/i),y||(h=m)):(u=h,m=Math.asin(i*Math.sin(u))),this.lam0=A-Math.asin(.5*(r-1/r)*Math.tan(u))/this.B):(s=Math.pow(uO(this.e,p,Math.sin(p)),this.B),o=Math.pow(uO(this.e,g,Math.sin(g)),this.B),r=this.E/s,l=(o-s)/(o+s),c=this.E*this.E,c=(c-o*s)/(c+o*s),t=d-f,t<-Math.pi?f-=xN:t>Math.pi&&(f+=xN),this.lam0=cO(.5*(d+f)-Math.atan(c*Math.tan(.5*this.B*(d-f))/l)/this.B),u=Math.atan(2*Math.sin(this.B*cO(d-this.lam0))/(r-1/r)),h=m=Math.asin(i*Math.sin(u))),this.singam=Math.sin(u),this.cosgam=Math.cos(u),this.sinrot=Math.sin(h),this.cosrot=Math.cos(h),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(m))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*u,this.v_pole_n=this.ArB*Math.log(Math.tan(bN-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(bN+r))}function XD(t){var e,n,i,r,s,o,a,l,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-pN)>yN){if(s=this.E/Math.pow(uO(this.e,t.y,Math.sin(t.y)),this.B),o=1/s,e=.5*(s-o),n=.5*(s+o),r=Math.sin(this.B*t.x),i=(e*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(i)-1)<yN)throw new Error;l=.5*this.ArB*Math.log((1-i)/(1+i)),o=Math.cos(this.B*t.x),a=Math.abs(o)<KD?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,o)}else l=t.y>0?this.v_pole_n:this.v_pole_s,a=this.ArB*t.y;return this.no_rot?(c.x=a,c.y=l):(a-=this.u_0,c.x=l*this.cosrot+a*this.sinrot,c.y=a*this.cosrot-l*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c}function YD(t){var e,n,i,r,s,o,a,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),i=Math.exp(-this.BrA*n),r=.5*(i-1/i),s=.5*(i+1/i),o=Math.sin(this.BrA*e),a=(o*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(a)-1)<yN)l.x=0,l.y=a<0?-pN:pN;else{if(l.y=this.E/Math.sqrt((1+a)/(1-a)),l.y=hO(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(r*this.cosgam-o*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l}var ZD=["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"];const JD={init:$D,forward:XD,inverse:YD,names:ZD};function tU(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<yN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=aO(this.e,e,n),r=uO(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),a=aO(this.e,s,o),l=uO(this.e,this.lat2,s),c=uO(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>yN?this.ns=Math.log(i/a)/Math.log(r/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(c,this.ns),this.title||(this.title="Lambert Conformal Conic")}}function eU(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=yN&&(n=lO(n)*(pN-2*yN));var i,r,s=Math.abs(Math.abs(n)-pN);if(s>yN)i=uO(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if(s=n*this.ns,s<=0)return null;r=0}var o=this.ns*cO(e-this.long0);return t.x=this.k0*(r*Math.sin(o))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(o))+this.y0,t}function nU(t){var e,n,i,r,s,o=(t.x-this.x0)/this.k0,a=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(o*o+a*a),n=1):(e=-Math.sqrt(o*o+a*a),n=-1);var l=0;if(0!==e&&(l=Math.atan2(n*o,n*a)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),r=hO(this.e,i),-9999===r)return null}else r=-pN;return s=cO(l/this.ns+this.long0),t.x=s,t.y=r,t}var iU=["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"];const rU={init:tU,forward:eU,inverse:nU,names:iU};function sU(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq}function oU(t){var e,n,i,r,s,o,a,l=t.x,c=t.y,u=cO(l-this.long0);return e=Math.pow((1+this.e*Math.sin(c))/(1-this.e*Math.sin(c)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(c/2+this.s45),this.alfa)/e)-this.s45),i=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t}function aU(t){var e,n,i,r,s,o,a,l,c=t.x;t.x=t.y,t.y=c,this.czech||(t.y*=-1,t.x*=-1),o=Math.sqrt(t.x*t.x+t.y*t.y),s=Math.atan2(t.y,t.x),r=s/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,a=e,l=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(l=1),a=t.y,u+=1}while(0===l&&u<15);return u>=15?null:t}var lU=["Krovak","krovak"];const cU={init:sU,forward:oU,inverse:aU,names:lU};function uU(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function hU(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function AU(t){return.375*t*(1+.25*t*(1+.46875*t))}function dU(t){return.05859375*t*t*(1+.75*t)}function fU(t){return t*t*t*(35/3072)}function pU(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function gU(t){return Math.abs(t)<pN?t:t-lO(t)*Math.PI}function mU(t,e,n,i,r){var s,o;s=t/e;for(var a=0;a<15;a++)if(o=(t-(e*s-n*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),s+=o,Math.abs(o)<=1e-10)return s;return NaN}function vU(){this.sphere||(this.e0=hU(this.es),this.e1=AU(this.es),this.e2=dU(this.es),this.e3=fU(this.es),this.ml0=this.a*uU(this.e0,this.e1,this.e2,this.e3,this.lat0))}function yU(t){var e,n,i=t.x,r=t.y;if(i=cO(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=pU(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),c=i*Math.cos(r),u=c*c,h=this.es*o*o/(1-this.es),A=this.a*uU(this.e0,this.e1,this.e2,this.e3,r);e=a*c*(1-u*l*(1/6-(8-l+8*h)*u/120)),n=A-this.ml0+a*s/o*u*(.5+(5-l+6*h)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t}function wU(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(s))}else{var o=this.ml0/this.a+r,a=mU(o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-pN)<=yN)return t.x=this.long0,t.y=pN,r<0&&(t.y*=-1),t;var l=pU(this.a,this.e,Math.sin(a)),c=l*l*l/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),h=i*this.a/l,A=h*h;e=a-l*Math.tan(a)/c*h*h*(.5-(1+3*u)*h*h/24),n=h*(1-A*(u/3+(1+3*u)*u*A/15))/Math.cos(a)}return t.x=cO(n+this.long0),t.y=gU(e),t}var _U=["Cassini","Cassini_Soldner","cass"];const bU={init:vU,forward:yU,inverse:wU,names:_U};function xU(t,e){var n;return t>1e-7?(n=t*e,(1-t*t)*(e/(1-n*n)-.5/t*Math.log((1-n)/(1+n)))):2*e}var EU=1,CU=2,SU=3,BU=4;function TU(){var t,e=Math.abs(this.lat0);if(Math.abs(e-pN)<yN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<yN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=xU(this.e,1),this.mmf=.5/(1-this.es),this.apa=kU(this.es),this.mode){case this.N_POLE:this.dd=1;break;case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=xU(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd;break}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function IU(t){var e,n,i,r,s,o,a,l,c,u,h=t.x,A=t.y;if(h=cO(h-this.long0),this.sphere){if(s=Math.sin(A),u=Math.cos(A),i=Math.cos(h),this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n=this.mode===this.EQUIT?1+u*i:1+this.sinph0*s+this.cosph0*u*i,n<=yN)return null;n=Math.sqrt(2/n),e=n*u*Math.sin(h),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*u*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(A+this.lat0)<yN)return null;n=bN-.5*A,n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)),e=n*Math.sin(h),n*=i}}else{switch(a=0,l=0,c=0,i=Math.cos(h),r=Math.sin(h),s=Math.sin(A),o=xU(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(a=o/this.qp,l=Math.sqrt(1-a*a)),this.mode){case this.OBLIQ:c=1+this.sinb1*a+this.cosb1*l*i;break;case this.EQUIT:c=1+l*i;break;case this.N_POLE:c=pN+A,o=this.qp-o;break;case this.S_POLE:c=A-pN,o=this.qp+o;break}if(Math.abs(c)<yN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:c=Math.sqrt(2/c),n=this.mode===this.OBLIQ?this.ymf*c*(this.cosb1*a-this.sinb1*l*i):(c=Math.sqrt(2/(1+l*i)))*a*this.ymf,e=this.xmf*c*l*r;break;case this.N_POLE:case this.S_POLE:o>=0?(e=(c=Math.sqrt(o))*r,n=i*(this.mode===this.S_POLE?c:-c)):e=n=0;break}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t}function FU(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,s,o,a,l=t.x/this.a,c=t.y/this.a;if(this.sphere){var u,h=0,A=0;if(u=Math.sqrt(l*l+c*c),n=.5*u,n>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(A=Math.sin(n),h=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(u)<=yN?0:Math.asin(c*A/u),l*=A,c=h*u;break;case this.OBLIQ:n=Math.abs(u)<=yN?this.lat0:Math.asin(h*this.sinph0+c*A*this.cosph0/u),l*=A*this.cosph0,c=(h-Math.sin(n)*this.sinph0)*u;break;case this.N_POLE:c=-c,n=pN-n;break;case this.S_POLE:n-=pN;break}e=0!==c||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(l,c):0}else{if(a=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(l/=this.dd,c*=this.dd,o=Math.sqrt(l*l+c*c),o<yN)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*o/this.rq),i=Math.cos(r),l*=r=Math.sin(r),this.mode===this.OBLIQ?(a=i*this.sinb1+c*r*this.cosb1/o,s=this.qp*a,c=o*this.cosb1*i-c*this.sinb1*r):(a=c*r/o,s=this.qp*a,c=o*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(c=-c),s=l*l+c*c,!s)return t.x=this.long0,t.y=this.lat0,t;a=1-s/this.qp,this.mode===this.S_POLE&&(a=-a)}e=Math.atan2(l,c),n=DU(Math.asin(a),this.apa)}return t.x=cO(this.long0+e),t.y=n,t}var LU=.3333333333333333,RU=.17222222222222222,MU=.10257936507936508,PU=.06388888888888888,NU=.0664021164021164,OU=.016415012942191543;function kU(t){var e,n=[];return n[0]=t*LU,e=t*t,n[0]+=e*RU,n[1]=e*PU,e*=t,n[0]+=e*MU,n[1]+=e*NU,n[2]=e*OU,n}function DU(t,e){var n=t+t;return t+e[0]*Math.sin(n)+e[1]*Math.sin(n+n)+e[2]*Math.sin(n+n+n)}var UU=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"];const QU={init:TU,forward:IU,inverse:FU,names:UU,S_POLE:EU,N_POLE:CU,EQUIT:SU,OBLIQ:BU};function GU(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}function HU(){Math.abs(this.lat1+this.lat2)<yN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=aO(this.e3,this.sin_po,this.cos_po),this.qs1=xU(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=aO(this.e3,this.sin_po,this.cos_po),this.qs2=xU(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=xU(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>yN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function VU(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=xU(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*cO(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return t.x=o,t.y=a,t}function jU(t){var e,n,i,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,n)),s=cO(r/this.ns0+this.long0),t.x=s,t.y=o,t}function WU(t,e){var n,i,r,s,o,a=GU(.5*e);if(t<yN)return a;for(var l=t*t,c=1;c<=25;c++)if(n=Math.sin(a),i=Math.cos(a),r=t*n,s=1-r*r,o=.5*s*s/i*(e/(1-l)-n/s+.5/t*Math.log((1-r)/(1+r))),a+=o,Math.abs(o)<=1e-7)return a;return null}var zU=["Albers_Conic_Equal_Area","Albers","aea"];const KU={init:HU,forward:VU,inverse:jU,names:zU,phi1z:WU};function qU(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1}function $U(t){var e,n,i,r,s,o,a,l,c=t.x,u=t.y;return i=cO(c-this.long0),e=Math.sin(u),n=Math.cos(u),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*n*r,s=1,o>0||Math.abs(o)<=yN?(a=this.x0+this.a*s*n*Math.sin(i)/o,l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*r)/o):(a=this.x0+this.infinity_dist*n*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=a,t.y=l,t}function XU(t){var e,n,i,r,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),i=Math.cos(r),o=GU(i*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),s=cO(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t}var YU=["gnom"];const ZU={init:qU,forward:$U,inverse:XU,names:YU};function JU(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*pN:pN;for(var i,r,s,o,a=Math.asin(.5*e),l=0;l<30;l++)if(r=Math.sin(a),s=Math.cos(a),o=t*r,i=Math.pow(1-o*o,2)/(2*s)*(e/(1-t*t)-r/(1-o*o)+.5/t*Math.log((1-o)/(1+o))),a+=i,Math.abs(i)<=1e-10)return a;return NaN}function tQ(){this.sphere||(this.k0=aO(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))}function eQ(t){var e,n,i=t.x,r=t.y,s=cO(i-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=xU(this.e,Math.sin(r));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=n,t}function nQ(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=cO(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=JU(this.e,2*t.y*this.k0/this.a),e=cO(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t}var iQ=["cea"];const rQ={init:tQ,forward:eQ,inverse:nQ,names:iQ};function sQ(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)}function oQ(t){var e=t.x,n=t.y,i=cO(e-this.long0),r=gU(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t}function aQ(t){var e=t.x,n=t.y;return t.x=cO(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=gU(this.lat0+(n-this.y0)/this.a),t}var lQ=["Equirectangular","Equidistant_Cylindrical","eqc"];const cQ={init:sQ,forward:oQ,inverse:aQ,names:lQ};var uQ=20;function hQ(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=hU(this.es),this.e1=AU(this.es),this.e2=dU(this.es),this.e3=fU(this.es),this.ml0=this.a*uU(this.e0,this.e1,this.e2,this.e3,this.lat0)}function AQ(t){var e,n,i,r=t.x,s=t.y,o=cO(r-this.long0);if(i=o*Math.sin(s),this.sphere)Math.abs(s)<=yN?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(s),n=this.a*(gU(s-this.lat0)+(1-Math.cos(i))/Math.tan(s)));else if(Math.abs(s)<=yN)e=this.a*o,n=-1*this.ml0;else{var a=pU(this.a,this.e,Math.sin(s))/Math.tan(s);e=a*Math.sin(i),n=this.a*uU(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+a*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t}function dQ(t){var e,n,i,r,s,o,a,l,c;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=yN)e=cO(i/this.a+this.long0),n=0;else{var u;for(o=this.lat0+r/this.a,a=i*i/this.a/this.a+o*o,l=o,s=uQ;s;--s)if(u=Math.tan(l),c=-1*(o*(l*u+1)-l-.5*(l*l+a)*u)/((l-o)/u-1),l+=c,Math.abs(c)<=yN){n=l;break}e=cO(this.long0+Math.asin(i*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=yN)n=0,e=cO(this.long0+i/this.a);else{var h,A,d,f,p;for(o=(this.ml0+r)/this.a,a=i*i/this.a/this.a+o*o,l=o,s=uQ;s;--s)if(p=this.e*Math.sin(l),h=Math.sqrt(1-p*p)*Math.tan(l),A=this.a*uU(this.e0,this.e1,this.e2,this.e3,l),d=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),f=A/this.a,c=(o*(h*f+1)-f-.5*h*(f*f+a))/(this.es*Math.sin(2*l)*(f*f+a-2*o*f)/(4*h)+(o-f)*(h*d-2/Math.sin(2*l))-d),l-=c,Math.abs(c)<=yN){n=l;break}h=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=cO(this.long0+Math.asin(i*h/this.a)/Math.sin(n))}return t.x=e,t.y=n,t}var fQ=["Polyconic","poly"];const pQ={init:hQ,forward:AQ,inverse:dQ,names:fQ};function gQ(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function mQ(t){var e,n=t.x,i=t.y,r=i-this.lat0,s=n-this.long0,o=r/fN*1e-5,a=s,l=1,c=0;for(e=1;e<=10;e++)l*=o,c+=this.A[e]*l;var u,h,A=c,d=a,f=1,p=0,g=0,m=0;for(e=1;e<=6;e++)u=f*A-p*d,h=p*A+f*d,f=u,p=h,g=g+this.B_re[e]*f-this.B_im[e]*p,m=m+this.B_im[e]*f+this.B_re[e]*p;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t}function vQ(t){var e,n,i,r=t.x,s=t.y,o=r-this.x0,a=s-this.y0,l=a/this.a,c=o/this.a,u=1,h=0,A=0,d=0;for(e=1;e<=6;e++)n=u*l-h*c,i=h*l+u*c,u=n,h=i,A=A+this.C_re[e]*u-this.C_im[e]*h,d=d+this.C_im[e]*u+this.C_re[e]*h;for(var f=0;f<this.iterations;f++){var p,g,m=A,v=d,y=l,w=c;for(e=2;e<=6;e++)p=m*A-v*d,g=v*A+m*d,m=p,v=g,y+=(e-1)*(this.B_re[e]*m-this.B_im[e]*v),w+=(e-1)*(this.B_im[e]*m+this.B_re[e]*v);m=1,v=0;var _=this.B_re[1],b=this.B_im[1];for(e=2;e<=6;e++)p=m*A-v*d,g=v*A+m*d,m=p,v=g,_+=e*(this.B_re[e]*m-this.B_im[e]*v),b+=e*(this.B_im[e]*m+this.B_re[e]*v);var x=_*_+b*b;A=(y*_+w*b)/x,d=(w*_-y*b)/x}var E=A,C=d,S=1,B=0;for(e=1;e<=9;e++)S*=E,B+=this.D[e]*S;var T=this.lat0+B*fN*1e5,I=this.long0+C;return t.x=I,t.y=T,t}var yQ=["New_Zealand_Map_Grid","nzmg"];const wQ={init:gQ,forward:mQ,inverse:vQ,names:yQ};function _Q(){}function bQ(t){var e=t.x,n=t.y,i=cO(e-this.long0),r=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=s,t}function xQ(t){t.x-=this.x0,t.y-=this.y0;var e=cO(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t}var EQ=["Miller_Cylindrical","mill"];const CQ={init:_Q,forward:bQ,inverse:xQ,names:EQ};var SQ=20;function BQ(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Yk(this.es)}function TQ(t){var e,n,i=t.x,r=t.y;if(i=cO(i-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(r),o=SQ;o;--o){var a=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=a,Math.abs(a)<yN)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var l=Math.sin(r),c=Math.cos(r);n=this.a*Zk(r,l,c,this.en),e=this.a*i*c/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=n,t}function IQ(t){var e,n,i,r;return t.x-=this.x0,i=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,i/=this.C_x*(this.m+Math.cos(e)),this.m?e=GU((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=GU(Math.sin(e)/this.n)),i=cO(i+this.long0),e=gU(e)):(e=tD(t.y/this.a,this.es,this.en),r=Math.abs(e),r<pN?(r=Math.sin(e),n=this.long0+t.x*Math.sqrt(1-this.es*r*r)/(this.a*Math.cos(e)),i=cO(n)):r-yN<pN&&(i=this.long0)),t.x=i,t.y=e,t}var FQ=["Sinusoidal","sinu"];const LQ={init:BQ,forward:TQ,inverse:IQ,names:FQ};function RQ(){}function MQ(t){var e=t.x,n=t.y,i=cO(e-this.long0),r=n,s=Math.PI*Math.sin(n);while(1){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<yN)break}r/=2,Math.PI/2-Math.abs(n)<yN&&(i=0);var a=.900316316158*this.a*i*Math.cos(r)+this.x0,l=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=a,t.y=l,t}function PQ(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=cO(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t}var NQ=["Mollweide","moll"];const OQ={init:RQ,forward:MQ,inverse:PQ,names:NQ};function kQ(){Math.abs(this.lat1+this.lat2)<yN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=hU(this.es),this.e1=AU(this.es),this.e2=dU(this.es),this.e3=fU(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=aO(this.e,this.sinphi,this.cosphi),this.ml1=uU(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<yN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=aO(this.e,this.sinphi,this.cosphi),this.ml2=uU(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=uU(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))}function DQ(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=uU(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var s=this.ns*cO(n-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t}function UQ(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;if(0!==n&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere)return r=cO(this.long0+s/this.ns),i=gU(this.g-n/this.a),t.x=r,t.y=i,t;var o=this.g-n/this.a;return i=mU(o,this.e0,this.e1,this.e2,this.e3),r=cO(this.long0+s/this.ns),t.x=r,t.y=i,t}var QQ=["Equidistant_Conic","eqdc"];const GQ={init:kQ,forward:DQ,inverse:UQ,names:QQ};function HQ(){this.R=this.a}function VQ(t){var e,n,i=t.x,r=t.y,s=cO(i-this.long0);Math.abs(r)<=yN&&(e=this.x0+this.R*s,n=this.y0);var o=GU(2*Math.abs(r/Math.PI));(Math.abs(s)<=yN||Math.abs(Math.abs(r)-pN)<=yN)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*o):this.y0+Math.PI*this.R*-Math.tan(.5*o));var a=.5*Math.abs(Math.PI/s-s/Math.PI),l=a*a,c=Math.sin(o),u=Math.cos(o),h=u/(c+u-1),A=h*h,d=h*(2/c-1),f=d*d,p=Math.PI*this.R*(a*(h-f)+Math.sqrt(l*(h-f)*(h-f)-(f+l)*(A-f)))/(f+l);s<0&&(p=-p),e=this.x0+p;var g=l+h;return p=Math.PI*this.R*(d*g-a*Math.sqrt((f+l)*(l+1)-g*g))/(f+l),n=r>=0?this.y0+p:this.y0-p,t.x=e,t.y=n,t}function jQ(t){var e,n,i,r,s,o,a,l,c,u,h,A,d;return t.x-=this.x0,t.y-=this.y0,h=Math.PI*this.R,i=t.x/h,r=t.y/h,s=i*i+r*r,o=-Math.abs(r)*(1+s),a=o-2*r*r+i*i,l=-2*o+1+2*r*r+s*s,d=r*r/l+(2*a*a*a/l/l/l-9*o*a/l/l)/27,c=(o-a*a/3/l)/l,u=2*Math.sqrt(-c/3),h=3*d/c/u,Math.abs(h)>1&&(h=h>=0?1:-1),A=Math.acos(h)/3,n=t.y>=0?(-u*Math.cos(A+Math.PI/3)-a/3/l)*Math.PI:-(-u*Math.cos(A+Math.PI/3)-a/3/l)*Math.PI,e=Math.abs(i)<yN?this.long0:cO(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-r*r)+s*s))/2/i),t.x=e,t.y=n,t}var WQ=["Van_der_Grinten_I","VanDerGrinten","vandg"];const zQ={init:HQ,forward:VQ,inverse:jQ,names:WQ};function KQ(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)}function qQ(t){var e,n,i,r,s,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w,_,b,x,E=t.x,C=t.y,S=Math.sin(t.y),B=Math.cos(t.y),T=cO(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=yN?(t.x=this.x0+this.a*(pN-C)*Math.sin(T),t.y=this.y0-this.a*(pN-C)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=yN?(t.x=this.x0+this.a*(pN+C)*Math.sin(T),t.y=this.y0+this.a*(pN+C)*Math.cos(T),t):(v=this.sin_p12*S+this.cos_p12*B*Math.cos(T),g=Math.acos(v),m=g?g/Math.sin(g):1,t.x=this.x0+this.a*m*B*Math.sin(T),t.y=this.y0+this.a*m*(this.cos_p12*S-this.sin_p12*B*Math.cos(T)),t):(e=hU(this.es),n=AU(this.es),i=dU(this.es),r=fU(this.es),Math.abs(this.sin_p12-1)<=yN?(s=this.a*uU(e,n,i,r,pN),o=this.a*uU(e,n,i,r,C),t.x=this.x0+(s-o)*Math.sin(T),t.y=this.y0-(s-o)*Math.cos(T),t):Math.abs(this.sin_p12+1)<=yN?(s=this.a*uU(e,n,i,r,pN),o=this.a*uU(e,n,i,r,C),t.x=this.x0+(s+o)*Math.sin(T),t.y=this.y0+(s+o)*Math.cos(T),t):(a=S/B,l=pU(this.a,this.e,this.sin_p12),c=pU(this.a,this.e,S),u=Math.atan((1-this.es)*a+this.es*l*this.sin_p12/(c*B)),h=Math.atan2(Math.sin(T),this.cos_p12*Math.tan(u)-this.sin_p12*Math.cos(T)),y=0===h?Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.abs(Math.abs(h)-Math.PI)<=yN?-Math.asin(this.cos_p12*Math.sin(u)-this.sin_p12*Math.cos(u)):Math.asin(Math.sin(T)*Math.cos(u)/Math.sin(h)),A=this.e*this.sin_p12/Math.sqrt(1-this.es),d=this.e*this.cos_p12*Math.cos(h)/Math.sqrt(1-this.es),f=A*d,p=d*d,w=y*y,_=w*y,b=_*y,x=b*y,g=l*y*(1-w*p*(1-p)/6+_/8*f*(1-2*p)+b/120*(p*(4-7*p)-3*A*A*(1-7*p))-x/48*f),t.x=this.x0+g*Math.sin(h),t.y=this.y0+g*Math.cos(h),t))}function $Q(t){var e,n,i,r,s,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w,_,b,x,E;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if(e=Math.sqrt(t.x*t.x+t.y*t.y),e>2*pN*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=yN?o=this.lat0:(o=GU(r*this.sin_p12+t.y*i*this.cos_p12/e),a=Math.abs(this.lat0)-pN,s=Math.abs(a)<=yN?this.lat0>=0?cO(this.long0+Math.atan2(t.x,-t.y)):cO(this.long0-Math.atan2(-t.x,t.y)):cO(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=s,t.y=o,t}return l=hU(this.es),c=AU(this.es),u=dU(this.es),h=fU(this.es),Math.abs(this.sin_p12-1)<=yN?(A=this.a*uU(l,c,u,h,pN),e=Math.sqrt(t.x*t.x+t.y*t.y),d=A-e,o=mU(d/this.a,l,c,u,h),s=cO(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=o,t):Math.abs(this.sin_p12+1)<=yN?(A=this.a*uU(l,c,u,h,pN),e=Math.sqrt(t.x*t.x+t.y*t.y),d=e-A,o=mU(d/this.a,l,c,u,h),s=cO(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=o,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),g=Math.atan2(t.x,t.y),f=pU(this.a,this.e,this.sin_p12),m=Math.cos(g),v=this.e*this.cos_p12*m,y=-v*v/(1-this.es),w=3*this.es*(1-y)*this.sin_p12*this.cos_p12*m/(1-this.es),_=e/f,b=_-y*(1+y)*Math.pow(_,3)/6-w*(1+3*y)*Math.pow(_,4)/24,x=1-y*b*b/2-_*b*b*b/6,p=Math.asin(this.sin_p12*Math.cos(b)+this.cos_p12*Math.sin(b)*m),s=cO(this.long0+Math.asin(Math.sin(g)*Math.sin(b)/Math.cos(p))),E=Math.sin(p),o=Math.atan2((E-this.es*x*this.sin_p12)*Math.tan(p),E*(1-this.es)),t.x=s,t.y=o,t)}var XQ=["Azimuthal_Equidistant","aeqd"];const YQ={init:KQ,forward:qQ,inverse:$Q,names:XQ};function ZQ(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)}function JQ(t){var e,n,i,r,s,o,a,l,c=t.x,u=t.y;return i=cO(c-this.long0),e=Math.sin(u),n=Math.cos(u),r=Math.cos(i),o=this.sin_p14*e+this.cos_p14*n*r,s=1,(o>0||Math.abs(o)<=yN)&&(a=this.a*s*n*Math.sin(i),l=this.y0+this.a*s*(this.cos_p14*e-this.sin_p14*n*r)),t.x=a,t.y=l,t}function tG(t){var e,n,i,r,s,o,a;return t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=GU(e/this.a),i=Math.sin(n),r=Math.cos(n),o=this.long0,Math.abs(e)<=yN?(a=this.lat0,t.x=o,t.y=a,t):(a=GU(r*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-pN,Math.abs(s)<=yN?(o=this.lat0>=0?cO(this.long0+Math.atan2(t.x,-t.y)):cO(this.long0-Math.atan2(-t.x,t.y)),t.x=o,t.y=a,t):(o=cO(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=o,t.y=a,t))}var eG=["ortho"];const nG={init:ZQ,forward:JQ,inverse:tG,names:eG};var iG={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},rG={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function sG(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=pN-bN/2?this.face=iG.TOP:this.lat0<=-(pN-bN/2)?this.face=iG.BOTTOM:Math.abs(this.long0)<=bN?this.face=iG.FRONT:Math.abs(this.long0)<=pN+bN?this.face=this.long0>0?iG.RIGHT:iG.LEFT:this.face=iG.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)}function oG(t){var e,n,i,r,s,o,a={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===iG.TOP)r=pN-e,n>=bN&&n<=pN+bN?(l.value=rG.AREA_0,i=n-pN):n>pN+bN||n<=-(pN+bN)?(l.value=rG.AREA_1,i=n>0?n-EN:n+EN):n>-(pN+bN)&&n<=-bN?(l.value=rG.AREA_2,i=n+pN):(l.value=rG.AREA_3,i=n);else if(this.face===iG.BOTTOM)r=pN+e,n>=bN&&n<=pN+bN?(l.value=rG.AREA_0,i=-n+pN):n<bN&&n>=-bN?(l.value=rG.AREA_1,i=-n):n<-bN&&n>=-(pN+bN)?(l.value=rG.AREA_2,i=-n-pN):(l.value=rG.AREA_3,i=n>0?-n+EN:-n-EN);else{var c,u,h,A,d,f,p;this.face===iG.RIGHT?n=cG(n,+pN):this.face===iG.BACK?n=cG(n,+EN):this.face===iG.LEFT&&(n=cG(n,-pN)),A=Math.sin(e),d=Math.cos(e),f=Math.sin(n),p=Math.cos(n),c=d*p,u=d*f,h=A,this.face===iG.FRONT?(r=Math.acos(c),i=lG(r,h,u,l)):this.face===iG.RIGHT?(r=Math.acos(u),i=lG(r,h,-c,l)):this.face===iG.BACK?(r=Math.acos(-c),i=lG(r,h,-u,l)):this.face===iG.LEFT?(r=Math.acos(-u),i=lG(r,h,c,l)):(r=i=0,l.value=rG.AREA_0)}return o=Math.atan(12/EN*(i+Math.acos(Math.sin(i)*Math.cos(bN))-pN)),s=Math.sqrt((1-Math.cos(r))/(Math.cos(o)*Math.cos(o))/(1-Math.cos(Math.atan(1/Math.cos(i))))),l.value===rG.AREA_1?o+=pN:l.value===rG.AREA_2?o+=EN:l.value===rG.AREA_3&&(o+=1.5*EN),a.x=s*Math.cos(o),a.y=s*Math.sin(o),a.x=a.x*this.a+this.x0,a.y=a.y*this.a+this.y0,t.x=a.x,t.y=a.y,t}function aG(t){var e,n,i,r,s,o,a,l,c,u,h,A,d={lam:0,phi:0},f={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?f.value=rG.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(f.value=rG.AREA_1,e-=pN):t.x<0&&-t.x>=Math.abs(t.y)?(f.value=rG.AREA_2,e=e<0?e+EN:e-EN):(f.value=rG.AREA_3,e+=pN),c=EN/12*Math.tan(e),s=Math.sin(c)/(Math.cos(c)-1/Math.sqrt(2)),o=Math.atan(s),i=Math.cos(e),r=Math.tan(n),a=1-i*i*r*r*(1-Math.cos(Math.atan(1/Math.cos(o)))),a<-1?a=-1:a>1&&(a=1),this.face===iG.TOP)l=Math.acos(a),d.phi=pN-l,f.value===rG.AREA_0?d.lam=o+pN:f.value===rG.AREA_1?d.lam=o<0?o+EN:o-EN:f.value===rG.AREA_2?d.lam=o-pN:d.lam=o;else if(this.face===iG.BOTTOM)l=Math.acos(a),d.phi=l-pN,f.value===rG.AREA_0?d.lam=-o+pN:f.value===rG.AREA_1?d.lam=-o:f.value===rG.AREA_2?d.lam=-o-pN:d.lam=o<0?-o-EN:-o+EN;else{var p,g,m;p=a,c=p*p,m=c>=1?0:Math.sqrt(1-c)*Math.sin(o),c+=m*m,g=c>=1?0:Math.sqrt(1-c),f.value===rG.AREA_1?(c=g,g=-m,m=c):f.value===rG.AREA_2?(g=-g,m=-m):f.value===rG.AREA_3&&(c=g,g=m,m=-c),this.face===iG.RIGHT?(c=p,p=-g,g=c):this.face===iG.BACK?(p=-p,g=-g):this.face===iG.LEFT&&(c=p,p=g,g=-c),d.phi=Math.acos(-m)-pN,d.lam=Math.atan2(g,p),this.face===iG.RIGHT?d.lam=cG(d.lam,-pN):this.face===iG.BACK?d.lam=cG(d.lam,-EN):this.face===iG.LEFT&&(d.lam=cG(d.lam,+pN))}0!==this.es&&(u=d.phi<0?1:0,h=Math.tan(d.phi),A=this.b/Math.sqrt(h*h+this.one_minus_f_squared),d.phi=Math.atan(Math.sqrt(this.a*this.a-A*A)/(this.one_minus_f*A)),u&&(d.phi=-d.phi));return d.lam+=this.long0,t.x=d.lam,t.y=d.phi,t}function lG(t,e,n,i){var r;return t<yN?(i.value=rG.AREA_0,r=0):(r=Math.atan2(e,n),Math.abs(r)<=bN?i.value=rG.AREA_0:r>bN&&r<=pN+bN?(i.value=rG.AREA_1,r-=pN):r>pN+bN||r<=-(pN+bN)?(i.value=rG.AREA_2,r=r>=0?r-EN:r+EN):(i.value=rG.AREA_3,r+=pN)),r}function cG(t,e){var n=t+e;return n<-EN?n+=xN:n>+EN&&(n-=xN),n}var uG=["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"];const hG={init:sG,forward:oG,inverse:aG,names:uG};var AG=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],dG=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],fG=.8487,pG=1.3523,gG=_N/5,mG=1/gG,vG=18,yG=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},wG=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};function _G(t,e,n,i){for(var r=e;i;--i){var s=t(r);if(r-=s,Math.abs(s)<n)break}return r}function bG(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"}function xG(t){var e=cO(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(n*gG);i<0?i=0:i>=vG&&(i=vG-1),n=_N*(n-mG*i);var r={x:yG(AG[i],n)*e,y:yG(dG[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*fG+this.x0,r.y=r.y*this.a*pG+this.y0,r}function EG(t){var e={x:(t.x-this.x0)/(this.a*fG),y:Math.abs(t.y-this.y0)/(this.a*pG)};if(e.y>=1)e.x/=AG[vG][0],e.y=t.y<0?-pN:pN;else{var n=Math.floor(e.y*vG);for(n<0?n=0:n>=vG&&(n=vG-1);;)if(dG[n][0]>e.y)--n;else{if(!(dG[n+1][0]<=e.y))break;++n}var i=dG[n],r=5*(e.y-i[0])/(dG[n+1][0]-i[0]);r=_G((function(t){return(yG(i,t)-e.y)/wG(i,t)}),r,yN,100),e.x/=yG(AG[n],r),e.y=(5*n+r)*wN,t.y<0&&(e.y=-e.y)}return e.x=cO(e.x+this.long0),e}var CG=["Robinson","robin"];const SG={init:bG,forward:xG,inverse:EG,names:CG};function BG(){this.name="geocent"}function TG(t){var e=qO(t,this.es,this.a);return e}function IG(t){var e=$O(t,this.es,this.a,this.b);return e}var FG=["Geocentric","geocentric","geocent","Geocent"];const LG={init:BG,forward:TG,inverse:IG,names:FG};var RG={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},MG={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};function PG(){if(Object.keys(MG).forEach(function(t){if("undefined"===typeof this[t])this[t]=MG[t].def;else{if(MG[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);MG[t].num&&(this[t]=parseFloat(this[t]))}MG[t].degrees&&(this[t]=this[t]*wN)}.bind(this)),Math.abs(Math.abs(this.lat0)-pN)<yN?this.mode=this.lat0<0?RG.S_POLE:RG.N_POLE:Math.abs(this.lat0)<yN?this.mode=RG.EQUIT:(this.mode=RG.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)}function NG(t){t.x-=this.long0;var e,n,i,r,s=Math.sin(t.y),o=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case RG.OBLIQ:n=this.sinph0*s+this.cosph0*o*a;break;case RG.EQUIT:n=o*a;break;case RG.S_POLE:n=-s;break;case RG.N_POLE:n=s;break}switch(n=this.pn1/(this.p-n),e=n*o*Math.sin(t.x),this.mode){case RG.OBLIQ:n*=this.cosph0*s-this.sinph0*o*a;break;case RG.EQUIT:n*=s;break;case RG.N_POLE:n*=-o*a;break;case RG.S_POLE:n*=o*a;break}return i=n*this.cg+e*this.sg,r=1/(i*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*r,n=i*r,t.x=e*this.a,t.y=n*this.a,t}function OG(t){t.x/=this.a,t.y/=this.a;var e,n,i,r={x:t.x,y:t.y};i=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*i,n=this.pn1*t.y*this.cw*i,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var s=aD(t.x,t.y);if(Math.abs(s)<yN)r.x=0,r.y=t.y;else{var o,a;switch(a=1-s*s*this.pfact,a=(this.p-Math.sqrt(a))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-a*a),this.mode){case RG.OBLIQ:r.y=Math.asin(o*this.sinph0+t.y*a*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(r.y))*s,t.x*=a*this.cosph0;break;case RG.EQUIT:r.y=Math.asin(t.y*a/s),t.y=o*s,t.x*=a;break;case RG.N_POLE:r.y=Math.asin(o),t.y=-t.y;break;case RG.S_POLE:r.y=-Math.asin(o);break}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t}var kG=["Tilted_Perspective","tpers"];const DG={init:PG,forward:NG,inverse:OG,names:kG};function UG(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")}function QG(t){var e,n,i,r,s=t.x,o=t.y;if(s-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var a=this.radius_p/aD(this.radius_p*Math.cos(o),Math.sin(o));if(n=a*Math.cos(s)*Math.cos(o),i=a*Math.sin(s)*Math.cos(o),r=a*Math.sin(o),(this.radius_g-n)*n-i*i-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/aD(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(r/aD(i,e)))}else"sphere"===this.shape&&(e=Math.cos(o),n=Math.cos(s)*e,i=Math.sin(s)*e,r=Math.sin(o),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/aD(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(r/aD(i,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t}function GG(t){var e,n,i,r,s=-1,o=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*aD(1,a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*aD(1,o));var l=a/this.radius_p;if(e=o*o+l*l+s*s,n=2*this.radius_g*s,i=n*n-4*e*this.C,i<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(i))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+a*a+s*s,n=2*this.radius_g*s,i=n*n-4*e*this.C,i<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(i))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s)}return t.x=t.x+this.long0,t}var HG=["Geostationary Satellite View","Geostationary_Satellite","geos"];const VG={init:UG,forward:QG,inverse:GG,names:HG};function jG(t){t.Proj.projections.add(sD),t.Proj.projections.add(vD),t.Proj.projections.add(xD),t.Proj.projections.add(ND),t.Proj.projections.add(GD),t.Proj.projections.add(zD),t.Proj.projections.add(JD),t.Proj.projections.add(rU),t.Proj.projections.add(cU),t.Proj.projections.add(bU),t.Proj.projections.add(QU),t.Proj.projections.add(KU),t.Proj.projections.add(ZU),t.Proj.projections.add(rQ),t.Proj.projections.add(cQ),t.Proj.projections.add(pQ),t.Proj.projections.add(wQ),t.Proj.projections.add(CQ),t.Proj.projections.add(LQ),t.Proj.projections.add(OQ),t.Proj.projections.add(GQ),t.Proj.projections.add(zQ),t.Proj.projections.add(YQ),t.Proj.projections.add(nG),t.Proj.projections.add(hG),t.Proj.projections.add(SG),t.Proj.projections.add(LG),t.Proj.projections.add(DG),t.Proj.projections.add(VG)}Ak.defaultDatum="WGS84",Ak.Proj=zO,Ak.WGS84=new Ak.Proj("WGS84"),Ak.Point=Dk,Ak.toPoint=rk,Ak.defs=XN,Ak.nadgrid=NO,Ak.transform=lk,Ak.mgrs=_k,Ak.version="__VERSION__",jG(Ak);const WG=(0,Em.pM)({__name:"OlProjectionRegister",props:{projectionName:{},projectionDef:{},projectionExtent:{default:void 0}},setup(t,{expose:e}){const n=t,{projectionName:i,projectionDef:r,projectionExtent:s}=(0,Cm.QW)(n);Ak.defs(i.value,r.value),E_(Ak);const o=new Ae({code:i.value,extent:s.value});return e({projection:o}),(t,e)=>(0,Em.Q3)("",!0)}});function zG(t){if(t)return"string"===typeof t||t instanceof Ae?t:new Ae(t)}const KG=(0,Em.pM)({inheritAttrs:!1,__name:"OlView",props:{center:{},constrainRotation:{type:[Number,Boolean]},enableRotation:{type:Boolean,default:!0},extent:{},constrainOnlyCenter:{type:Boolean},smoothExtentConstraint:{type:Boolean},maxResolution:{},minResolution:{},maxZoom:{},minZoom:{},multiWorld:{type:Boolean},constrainResolution:{type:Boolean},smoothResolutionConstraint:{type:Boolean},showFullExtent:{type:Boolean},projection:{},resolution:{},resolutions:{},rotation:{},zoom:{},zoomFactor:{},padding:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),{properties:r}=XP(n),s=()=>({...r,projection:zG(r.projection)}),o=new cv(s());eN(o,["change:center","change:resolution","change:rotation"]),(0,Em.sV)((()=>{null==i||i.setView(o)})),(0,Em.wB)(r,(()=>{const t=s();o.setProperties(t),o.applyOptions_(t)}));const a=t=>o.adjustCenter(t),l=(t,e)=>o.adjustResolution(t,e),c=(t,e)=>o.adjustRotation(t,e),u=(t,e)=>o.adjustZoom(t,e),h=(...t)=>o.animate(...t),A=()=>o.beginInteraction(),d=t=>o.calculateExtent(t),f=()=>o.cancelAnimations(),p=(t,e,n)=>o.centerOn(t,e,n),g=()=>o.changed(),m=t=>o.dispatchEvent(t),v=(t,e,n)=>o.endInteraction(t,e,n),y=(t,e)=>o.fit(t,e),w=t=>o.get(t),_=()=>o.getAnimating(),b=()=>o.getCenter(),x=()=>o.getInteracting(),E=()=>o.getKeys(),C=()=>o.getMaxResolution(),S=()=>o.getMaxZoom(),B=()=>o.getMinResolution(),T=()=>o.getMinZoom(),I=()=>o.getProjection(),F=()=>o.getProperties(),L=()=>o.getResolution(),R=(t,e)=>o.getResolutionForExtent(t,e),M=t=>o.getResolutionForZoom(t),P=()=>o.getResolutions(),N=()=>o.getRevision(),O=()=>o.getRotation(),k=()=>o.getZoom(),D=t=>o.getZoomForResolution(t),U=t=>o.setCenter(t),Q=t=>o.setConstrainResolution(t),G=t=>o.setMaxZoom(t),H=t=>o.setMinZoom(t),V=t=>o.setResolution(t),j=t=>o.setRotation(t),W=t=>o.setZoom(t);return e({view:o,adjustCenter:a,adjustResolution:l,adjustRotation:c,adjustZoom:u,animate:h,beginInteraction:A,calculateExtent:d,cancelAnimations:f,centerOn:p,changed:g,dispatchEvent:m,endInteraction:v,fit:y,get:w,getAnimating:_,getCenter:b,getInteracting:x,getKeys:E,getMaxResolution:C,getMaxZoom:S,getMinResolution:B,getMinZoom:T,getProjection:I,getProperties:F,getResolution:L,getResolutionForExtent:R,getResolutionForZoom:M,getResolutions:P,getRevision:N,getRotation:O,getZoom:k,getZoomForResolution:D,setCenter:U,setConstrainResolution:Q,setMaxZoom:G,setMinZoom:H,setResolution:V,setRotation:j,setZoom:W}),(t,e)=>(0,Em.Q3)("",!0)}});function qG(t){t.component("ol-feature",qP),t.component("ol-geolocation",nN),t.component("ol-map",iN),t.component("ol-overlay",rN),t.component("ol-projection-register",WG),t.component("ol-view",KG)}Symbol.toStringTag;const $G={className:"ol-layer",opacity:1,visible:!0,properties:()=>({})},XG=(0,Em.pM)({inheritAttrs:!1,__name:"OlAnimatedClusterLayer",props:(0,Em.HF)({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},animationDuration:{},distance:{},animationMethod:{type:Function},updateWhileAnimating:{type:Boolean},updateWhileInteracting:{type:Boolean}},{...$G,opacity:1,visible:!0,animationDuration:700,distance:20,animationMethod:wm,updateWhileAnimating:!1,updateWhileInteracting:!1}),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),{properties:s}=XP(n),o=(0,Em.EW)((()=>new D_({distance:s.distance,geometryFunction:t=>t.getGeometry()}))),a=(0,Em.EW)((()=>new vx({...s,source:o.value})));eN(o,tN);const l=(0,Em.EW)((()=>a.value.getSource()));return(0,Em.wB)(s,(()=>{if(a.value.setProperties(s),a.value.changed(),r){const t=r.getLayers();t.push(a.value),r.setLayers(t)}})),(0,Em.sV)((()=>{null==i||i.addLayer(a.value),a.value.changed(),null==i||i.changed()})),(0,Em.hi)((()=>{null==i||i.removeLayer(a.value)})),(0,Em.Gt)("vectorLayer",l),(0,Em.Gt)("stylable",a),e({vectorLayer:a,map:i}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),YG=(0,Em.pM)({__name:"OlHeatmapLayer",props:(0,Em.HF)({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},weight:{type:[String,Function]},blur:{},radius:{},gradient:{}},{...$G,weight:"weight",radius:8,blur:15,gradient:()=>["#00f","#0ff","#0f0","#ff0","#f00"]}),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),{properties:s}=XP(n),o=(0,Em.EW)((()=>new $C(s)));return(0,Em.wB)(s,(()=>{o.value.setProperties(s),null==i||i.changed()})),(0,Em.sV)((()=>{if(null==i||i.addLayer(o.value),r){const t=r.getLayers();t.push(o.value),r.setLayers(t)}})),(0,Em.hi)((()=>{null==i||i.removeLayer(o.value)})),(0,Em.Gt)("heatmapLayer",o),(0,Em.Gt)("stylable",o),e({heatmapLayer:o}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),ZG=(0,Em.pM)({__name:"OlImageLayer",props:(0,Em.HF)({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function}},$G),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),{properties:s}=XP(n),o=(0,Cm.KR)(new eS(s));return(0,Em.wB)(s,(()=>{o.value.setProperties(s)})),(0,Em.wB)((()=>n.opacity),(t=>{o.value.setOpacity(t)}),{immediate:!0}),(0,Em.wB)((()=>n.visible),(t=>{o.value.setVisible(t)}),{immediate:!0}),(0,Em.sV)((()=>{if(null==i||i.addLayer(o.value),r){const t=r.getLayers();t.push(o.value),r.setLayers(t)}})),(0,Em.hi)((()=>{null==i||i.removeLayer(o.value)})),(0,Em.Gt)("imageLayer",o.value),e({imageLayer:o.value}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),JG=(0,Em.pM)({inheritAttrs:!1,__name:"OlLayerGroup",props:(0,Em.HF)({opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},layers:{},properties:{},className:{}},$G),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),{properties:r}=XP(n),s=new aw(r);eN(s,["change:extend","change:layers","change:maxResolution","change:maxZoom","change:minResolution","change:minZoom","change:opacity","change:visible","change:zIndex"]);const o=(0,Em.WQ)("layerGroup",null);return(0,Em.wB)(r,(()=>{s.setProperties(r)})),(0,Em.sV)((()=>{if(null==i||i.addLayer(s),o){const t=o.getLayers();t.push(s),o.setLayers(t)}})),(0,Em.hi)((()=>{null==i||i.removeLayer(s)})),(0,Em.Gt)("layerGroup",s),e({layerGroup:s}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),tH=(0,Em.pM)({__name:"OlTileLayer",props:(0,Em.HF)({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},preload:{}},{...$G,preload:1}),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),s=(0,Em.WQ)("overviewMap",null),{properties:o}=XP(n),a=(0,Cm.KR)(new lS(o));(0,Em.wB)((()=>n.opacity),(t=>{a.value.setOpacity(t)}),{immediate:!0}),(0,Em.wB)((()=>n.visible),(t=>{a.value.setVisible(t)}),{immediate:!0});const l=()=>{var t,e;if(r){const t=r.getLayers();t.push(a.value),r.setLayers(t)}(null==s?void 0:s.value)?(null==(t=s.value)||t.getOverviewMap().addLayer(a.value),null==(e=s.value)||e.changed()):null==i||i.addLayer(a.value)},c=()=>{var t,e;(null==s?void 0:s.value)?(null==(t=s.value)||t.getOverviewMap().removeLayer(a.value),null==(e=s.value)||e.changed()):null==i||i.removeLayer(a.value)};return(null==s?void 0:s.value)&&(0,Em.wB)(s,(()=>{c(),l()})),(0,Em.sV)((()=>{l()})),(0,Em.hi)((()=>{c()})),(0,Em.Gt)("tileLayer",a),e({tileLayer:a}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),eH=(0,Em.pM)({__name:"OlVectorLayer",props:(0,Em.HF)({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},renderBuffer:{},updateWhileAnimating:{type:Boolean},styles:{type:[Object,Array,Function,null]},updateWhileInteracting:{type:Boolean}},{...$G,renderBuffer:100,updateWhileAnimating:!1,updateWhileInteracting:!1}),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),{properties:s}=XP(n),o=(0,Em.EW)((()=>new hx(s)));return(0,Em.wB)(s,(()=>{o.value.setProperties(s)})),(0,Em.sV)((()=>{if(null==i||i.addLayer(o.value),r){const t=r.getLayers();t.push(o.value),r.setLayers(t)}})),(0,Em.hi)((()=>{null==i||i.removeLayer(o.value)})),(0,Em.Gt)("vectorLayer",o),(0,Em.Gt)("stylable",o),e({vectorLayer:o}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),nH=(0,Em.pM)({__name:"OlVectorTileLayer",props:(0,Em.HF)({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},renderBuffer:{},updateWhileAnimating:{type:Boolean},styles:{type:[Object,Array,Function,null]},updateWhileInteracting:{type:Boolean},renderMode:{}},{...$G,renderBuffer:100,updateWhileAnimating:!1,updateWhileInteracting:!1,renderMode:"hybrid"}),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),{properties:s}=XP(n),o=(0,Em.EW)((()=>new fS(s)));return(0,Em.wB)(s,(()=>{o.value.setProperties(s)})),(0,Em.sV)((()=>{if(null==i||i.addLayer(o.value),r){const t=r.getLayers();t.push(o.value),r.setLayers(t)}})),(0,Em.hi)((()=>{null==i||i.removeLayer(o.value)})),(0,Em.Gt)("vectorTileLayer",o),(0,Em.Gt)("stylable",o),e({vectorTileLayer:o}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),iH=(0,Em.pM)({__name:"OlVectorImageLayer",props:(0,Em.HF)({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},renderBuffer:{},updateWhileAnimating:{type:Boolean},styles:{type:Function},updateWhileInteracting:{type:Boolean}},{...$G,renderBuffer:100,updateWhileAnimating:!1,updateWhileInteracting:!1}),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),{properties:s}=XP(n),o=(0,Em.EW)((()=>new _S(s)));return(0,Em.wB)(s,(()=>{o.value.setProperties(s)})),(0,Em.sV)((()=>{if(null==i||i.addLayer(o.value),r){const t=r.getLayers();t.push(o.value),r.setLayers(t)}})),(0,Em.hi)((()=>{null==i||i.removeLayer(o.value)})),(0,Em.Gt)("vectorLayer",o),(0,Em.Gt)("stylable",o),e({vectorImageLayer:o}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),rH=class t extends Av{constructor(e){t.options=e,super(e)}createRenderer(){return new tB(this,{className:this.getClassName(),style:this.getProperties().style})}};KP(rH,"options",{});let sH=rH;const oH=(0,Em.pM)({__name:"OlWebglVectorLayer",props:(0,Em.HF)({className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},title:{},name:{},preview:{},baseLayer:{type:Boolean},properties:{type:Function},disableHitDetection:{type:Boolean},styles:{}},{...$G,disableHitDetection:!1,styles:()=>({"shape-points":1,"shape-radius":10,"shape-opacity":.5,"shape-fill-color":"blue"})}),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),{properties:s}=XP(n),o=(0,Em.EW)((()=>new sH({...s,styles:s.styles})));return(0,Em.wB)(s,(()=>{o.value.setProperties(s)})),(0,Em.sV)((()=>{if(null==i||i.addLayer(o.value),r){const t=r.getLayers();t.push(o.value),r.setLayers(t)}})),(0,Em.hi)((()=>{null==i||i.removeLayer(o.value)})),(0,Em.Gt)("webglVectorLayer",o),e({webglVectorLayer:o}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),aH=(0,Em.pM)({__name:"OlWebglTileLayer",props:(0,Em.HF)({style:{},className:{},opacity:{},visible:{type:Boolean},extent:{},zIndex:{},minResolution:{},maxResolution:{},minZoom:{},maxZoom:{},preload:{},source:{},sources:{type:[Array,Function]},map:{},useInterimTilesOnError:{type:Boolean},cacheSize:{},properties:{}},$G),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("layerGroup",null),s=(0,Em.WQ)("overviewMap",null),{properties:o}=XP(n),a=(0,Em.EW)((()=>new iB(o)));(0,Em.wB)((()=>n.opacity),(t=>{a.value.setOpacity(t)}),{immediate:!0}),(0,Em.wB)((()=>n.visible),(t=>{a.value.setVisible(t)}),{immediate:!0});const l=()=>{var t,e;if(r){const t=r.getLayers();t.push(a.value),r.setLayers(t)}(null==s?void 0:s.value)?(null==(t=s.value)||t.getOverviewMap().addLayer(a.value),null==(e=s.value)||e.changed()):null==i||i.addLayer(a.value)},c=()=>{var t,e;null!=s?(null==(t=s.value)||t.getOverviewMap().removeLayer(a.value),null==(e=s.value)||e.changed()):null==i||i.removeLayer(a.value)};return null!=s&&(0,Em.wB)(s,(()=>{c(),l()})),(0,Em.sV)((()=>{l()})),(0,Em.hi)((()=>{c()})),(0,Em.Gt)("tileLayer",a),e({tileLayer:a}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}});function lH(t){t.component("ol-animated-clusterlayer",XG),t.component("ol-heatmap-layer",YG),t.component("ol-image-layer",ZG),t.component("ol-layer-group",JG),t.component("ol-tile-layer",tH),t.component("ol-vector-image-layer",iH),t.component("ol-vector-layer",eH),t.component("ol-vector-tile-layer",nH),t.component("ol-webgl-vector-layer",oH),t.component("ol-webgl-tile-layer",aH)}Symbol.toStringTag;const cH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceBingMaps",props:{cacheSize:{},hidpi:{type:Boolean},culture:{},imagerySet:{},interpolate:{type:Boolean},maxZoom:{},reprojectionErrorThreshold:{},tileLoadFunction:{type:Function},wrapX:{type:Boolean},transition:{},zDirection:{type:[Number,Function]},placeholderTiles:{type:Boolean},apiKey:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new MB({...r,key:r.apiKey})));return eN(s,JP),(0,Em.wB)(s,(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.sV)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({layer:i,source:s}),(t,e)=>(0,Em.Q3)("",!0)}}),uH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceCluster",props:{attributions:{},distance:{default:20},minDistance:{},geometryFunction:{type:Function,default:t=>t.getGeometry()},createCluster:{},source:{},wrapX:{type:Boolean,default:!0}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("vectorLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new D_(r)));eN(s,tN);const o=()=>{var t,e,n;null==(t=null==i?void 0:i.value)||t.setSource(null),null==(e=null==i?void 0:i.value)||e.setSource(s.value),null==(n=null==i?void 0:i.value)||n.changed()};return(0,Em.wB)(r,(()=>{o()})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{o()})),(0,Em.sV)((()=>{var t,e;null==(t=null==i?void 0:i.value)||t.setSource(s.value),null==(e=null==i?void 0:i.value)||e.changed()})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),(0,Em.Gt)("vectorLayer",s),e({layer:i,source:s}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),hH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceImageStatic",props:{attributions:{},crossOrigin:{},imageExtent:{},imageLoadFunction:{},interpolate:{type:Boolean,default:!0},projection:{},url:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("imageLayer"),{properties:r}=XP(n),s=()=>new WB({...r,projection:zG(r.projection)});let o=s();return eN(o,JP),(0,Em.wB)(r,(()=>{null==i||i.setSource(null),o=s(),null==i||i.setSource(o)})),(0,Em.sV)((()=>{null==i||i.setSource(o)})),(0,Em.hi)((()=>{null==i||i.setSource(null)})),e({layer:i,source:o}),(t,e)=>(0,Em.Q3)("",!0)}}),AH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceImageWMS",props:{attributions:{},crossOrigin:{},hidpi:{type:Boolean},serverType:{default:"mapserver"},imageLoadFunction:{},interpolate:{type:Boolean},params:{},projection:{default:"EPSG:3857"},ratio:{default:1},resolutions:{},url:{},layers:{},styles:{default:""},time:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("imageLayer"),{properties:r}=XP(n),s=()=>new nT({...r,params:{...n.params,LAYERS:n.layers,STYLES:n.styles,TIME:n.time},projection:zG(r.projection)});let o=s();return eN(o,JP),(0,Em.wB)(r,(()=>{null==i||i.setSource(null),o=s(),null==i||i.setSource(o)})),(0,Em.sV)((()=>{null==i||i.setSource(o)})),(0,Em.hi)((()=>{null==i||i.setSource(null)})),e({layer:i,source:o}),(t,e)=>(0,Em.Q3)("",!0)}}),dH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceOSM",props:{attributions:{},cacheSize:{},crossOrigin:{default:"anonymous"},interpolate:{type:Boolean,default:!0},maxZoom:{default:19},opaque:{type:Boolean,default:!0},reprojectionErrorThreshold:{default:.5},tileLoadFunction:{},transition:{default:250},url:{default:"https://tile.openstreetmap.org/{z}/{x}/{y}.png"},wrapX:{type:Boolean,default:!0},zDirection:{type:[Number,Function],default:0}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new aT(r)));return eN(s,ZP),(0,Em.wB)(s,(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.sV)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({layer:i,source:s}),(t,e)=>(0,Em.Q3)("",!0)}}),fH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceStadiaMaps",props:{cacheSize:{},interpolate:{type:Boolean,default:!0},layer:{},minZoom:{},maxZoom:{},reprojectionErrorThreshold:{default:.5},tileLoadFunction:{},transition:{default:250},url:{},wrapX:{type:Boolean,default:!0},zDirection:{type:[Number,Function],default:0},apiKey:{},retina:{type:Boolean}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new fT(r)));eN(s,[...ZP,"removefeature"]);const o=()=>{var t,e,n;null==(t=null==i?void 0:i.value)||t.setSource(null),null==(e=null==i?void 0:i.value)||e.setSource(s.value),null==(n=null==i?void 0:i.value)||n.changed()};return(0,Em.wB)(r,(()=>{o()})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{o()})),(0,Em.sV)((()=>{var t,e;null==(t=null==i?void 0:i.value)||t.setSource(s.value),null==(e=null==i?void 0:i.value)||e.changed()})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({layer:i,source:s}),(t,e)=>(0,Em.Q3)("",!0)}}),pH=class t extends gT{constructor(e){t.layerLabelMap={vec:"cva",ter:"cta",img:"cia"},t.layerZoomMap={vec:18,ter:14,img:18};const n={...e};n.layerType=n.layerType||"vec",n.layerType=n.isLabel?t.layerLabelMap[n.layerType]:n.layerType,n.matrixSet="EPSG:4326"===n.projection||"EPSG:4490"===n.projection?"c":"w",n.url||n.urls||(n.url="https://t{0-7}.tianditu.gov.cn/{layer}_{proj}/wmts?"),n.tk&&(n.url=`${n.url}tk=${n.tk}`),n.url=(n.url||"").replace("{layer}",n.layerType).replace("{proj}",n.matrixSet);const i=n.tileGrid||t.getTileGrid(n.projection),r=void 0!==n.crossOrigin?n.crossOrigin:"anonymous",s={version:n.version||"1.0.0",format:n.format||"tiles",dimensions:n.dimensions||{},layer:n.layerType,matrixSet:n.matrixSet,tileGrid:i,style:n.style||"default",cacheSize:n.cacheSize,crossOrigin:r,opaque:void 0===n.opaque||n.opaque,maxZoom:t.layerZoomMap[n.layerType],reprojectionErrorThreshold:n.reprojectionErrorThreshold,url:n.url,urls:n.urls,projection:n.projection||"EPSG:3857",wrapX:n.wrapX};n.tileProxy&&(t.tileProxy=n.tileProxy,s.tileLoadFunction=(e,n)=>{e.getImage().src=t.tileProxy+encodeURIComponent(n)}),super(s)}static getTileGrid(e){return"EPSG:4326"===e||"EPSG:4490"===e?t.default4326TileGrid():t.default3857TileGrid()}static default4326TileGrid(){const t=[],e=[];for(let i=1;i<19;i++)t.push(1.40625/2**i),e.push(i.toString());const n=new vT({extent:[-180,-90,180,90],resolutions:t,origin:[-180,90],matrixIds:e});return n}static default3857TileGrid(){const t=[],e=[];for(let i=1;i<19;i++)t.push(156543.03392804062/2**i),e.push(i.toString());const n=new vT({extent:[-20037508.3427892,-20037508.3427892,20037508.3427892,20037508.3427892],resolutions:t,matrixIds:e,origin:[-20037508.3427892,20037508.3427892]});return n}};KP(pH,"layerLabelMap",{}),KP(pH,"layerZoomMap",{}),KP(pH,"tileProxy");let gH=pH;const mH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceTianditu",props:{attributions:{},attributionsCollapsible:{type:Boolean},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean},tileGrid:{},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{},requestEncoding:{default:"KVP"},layer:{},style:{},tileClass:{},tilePixelRatio:{},format:{},version:{default:"1.0.0"},matrixSet:{},dimensions:{default:()=>({})},url:{},tileLoadFunction:{type:Function,default:(t,e)=>{t.getImage().src=e}},urls:{},wrapX:{type:Boolean,default:!0},transition:{},zDirection:{},tileProxy:{},layerType:{default:"img"},tk:{},isLabel:{type:Boolean,default:!1},maxZoom:{default:21},opaque:{type:Boolean}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new gH(r)));return eN(s,ZP),(0,Em.wB)(s,(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.sV)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({layer:i,source:s}),(t,e)=>(0,Em.Q3)("",!0)}}),vH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceTileArcGISRest",props:{attributions:{},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean,default:!0},params:{},hidpi:{type:Boolean,default:!1},tileGrid:{},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{default:.5},tileLoadFunction:{type:Function,default:(t,e)=>{t.getImage().src=e}},url:{},wrapX:{type:Boolean,default:!1},transition:{},urls:{},zDirection:{type:[Number,Function],default:0}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>n.tileGrid||fB({tileSize:n.tileSize}))),o=(0,Em.EW)((()=>new _T({...r,projection:zG(r.projection),tileGrid:s.value})));return eN(o,ZP),(0,Em.wB)(o,(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(o.value)})),(0,Em.wB)((()=>i),(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(o.value)})),(0,Em.sV)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(o.value)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({tileLayer:i,source:o}),(t,e)=>(0,Em.Q3)("",!0)}}),yH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceTileDebug",props:{projection:{},tileGrid:{},wrapX:{type:Boolean},zDirection:{},template:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new xT(r)));eN(s,["tileloadend","tileloadstart","tileloaderror"]);const o=()=>{var t,e,n;null==(t=null==i?void 0:i.value)||t.setSource(null),null==(e=null==i?void 0:i.value)||e.setSource(s.value),null==(n=null==i?void 0:i.value)||n.changed()};return(0,Em.wB)(r,(()=>{o()})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{o()})),(0,Em.sV)((()=>{var t,e;null==(t=null==i?void 0:i.value)||t.setSource(s.value),null==(e=null==i?void 0:i.value)||e.changed()})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({layer:i,source:s}),(t,e)=>(0,Em.Q3)("",!0)}}),wH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceGeoTIFF",props:{sources:{},sourceOptions:{},convertToRGB:{type:[Boolean,String]},normalize:{type:Boolean},opaque:{type:Boolean},projection:{},transition:{},wrapX:{type:Boolean},interpolate:{type:Boolean}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=()=>new RL({...r,projection:zG(r.projection)});let o=s();return eN(o,ZP),(0,Em.wB)(r,(()=>{null==i||i.value.setSource(null),o=s(),null==i||i.value.setSource(o)})),(0,Em.sV)((()=>{null==i||i.value.setSource(o)})),(0,Em.hi)((()=>{null==i||i.value.setSource(null)})),e({layer:i,source:o}),(t,e)=>(0,Em.Q3)("",!0)}}),_H=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceTileJSON",props:{attributions:{},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean,default:!0},jsonp:{type:Boolean,default:!1},reprojectionErrorThreshold:{default:.5},tileJSON:{},tileLoadFunction:{},tileSize:{},url:{},wrapX:{type:Boolean,default:!0},transition:{},zDirection:{type:[Number,Function],default:0}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new NL(r)));eN(s,["removefeature","tileloadend","tileloadstart","tileloaderror"]);const o=()=>{var t,e,n;null==(t=null==i?void 0:i.value)||t.setSource(null),null==(e=null==i?void 0:i.value)||e.setSource(s.value),null==(n=null==i?void 0:i.value)||n.changed()};return(0,Em.wB)(r,(()=>{o()})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{o()})),(0,Em.sV)((()=>{var t,e;null==(t=null==i?void 0:i.value)||t.setSource(s.value),null==(e=null==i?void 0:i.value)||e.changed()})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({layer:i,source:s}),(t,e)=>(0,Em.Q3)("",!0)}}),bH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceTileWMS",props:{attributions:{},attributionsCollapsible:{type:Boolean,default:!0},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean,default:!0},params:{},gutter:{default:0},hidpi:{type:Boolean,default:!0},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{default:.5},tileClass:{},tileGrid:{},serverType:{},tileLoadFunction:{type:Function,default:(t,e)=>{t.getImage().src=e}},url:{},urls:{},wrapX:{type:Boolean,default:!0},transition:{},zDirection:{},layers:{},styles:{default:""}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=()=>new kL({...r,params:{...n.params,LAYERS:n.layers,STYLES:n.styles},projection:zG(r.projection)});let o=s();return eN(o,ZP),(0,Em.wB)(r,(()=>{null==i||i.value.setSource(null),o=s(),null==i||i.value.setSource(o)})),(0,Em.sV)((()=>{null==i||i.value.setSource(o)})),(0,Em.hi)((()=>{null==i||i.value.setSource(null)})),e({layer:i,source:o}),(t,e)=>(0,Em.Q3)("",!0)}}),xH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceVector",props:{attributions:{},features:{},format:{},loader:{},overlaps:{type:Boolean,default:!0},strategy:{},url:{},useSpatialIndex:{type:Boolean,default:!0},wrapX:{type:Boolean,default:!0}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("vectorLayer",null),r=(0,Em.WQ)("heatmapLayer",null),s=(0,Em.WQ)("webglVectorLayer",null),o=r||i||s,{properties:a}=XP(n),l=()=>new O_(a);let c=l();eN(c,tN);const u=()=>{var t,e;null==(t=null==o?void 0:o.value)||t.setSource(null),c=l(),null==(e=null==o?void 0:o.value)||e.setSource(c)};return(0,Em.wB)(a,(()=>u())),(0,Em.wB)((()=>null==o?void 0:o.value),(()=>u())),(0,Em.sV)((()=>{null==o||o.value.setSource(c)})),(0,Em.hi)((()=>{null==o||o.value.setSource(null)})),(0,Em.Gt)("vectorSource",(0,Cm.KR)(c)),e({layer:o,source:(0,Cm.KR)(c)}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),EH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceVectorTile",props:{attributions:{},attributionsCollapsible:{type:Boolean},cacheSize:{},extent:{},format:{},overlaps:{type:Boolean,default:!0},projection:{default:"EPSG:3857"},state:{},tileClass:{},maxZoom:{},minZoom:{},tileSize:{},maxResolution:{},tileGrid:{},tileLoadFunction:{},tileUrlFunction:{},url:{},transition:{},urls:{},wrapX:{type:Boolean,default:!0},zDirection:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("vectorTileLayer",null),{properties:r}=XP(n),s=(0,Em.EW)((()=>new jL(r)));eN(s,ZP);const o=()=>{var t,e,n;null==(t=null==i?void 0:i.value)||t.setSource(null),null==(e=null==i?void 0:i.value)||e.setSource(s.value),null==(n=null==i?void 0:i.value)||n.changed()};return(0,Em.wB)(r,(()=>{o()})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{o()})),(0,Em.sV)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),(0,Em.Gt)("vectorSource",s),e({vectorTileLayer:i,source:s}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),CH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceXYZ",props:{attributions:{},attributionsCollapsible:{type:Boolean,default:!0},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean,default:!0},opaque:{type:Boolean,default:!0},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{default:.5},maxZoom:{default:42},minZoom:{default:0},maxResolution:{},tileGrid:{},tileLoadFunction:{type:Function,default:(t,e)=>{t.getImage().src=e}},tilePixelRatio:{default:1},tileSize:{default:()=>[256,256]},gutter:{default:0},tileUrlFunction:{},url:{},urls:{},wrapX:{type:Boolean,default:!0},transition:{default:250},zDirection:{type:[Number,Function],default:0}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new rT({...r,projection:zG(r.projection)})));return eN(s,ZP),(0,Em.wB)(s,(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.wB)((()=>null==i?void 0:i.value),(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.sV)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(s.value)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({layer:i,source:s}),(t,e)=>(0,Em.Q3)("",!0)}}),SH=(0,Em.pM)({inheritAttrs:!1,__name:"OlSourceWMTS",props:{attributions:{},attributionsCollapsible:{type:Boolean,default:!0},cacheSize:{},crossOrigin:{},interpolate:{type:Boolean},tileGrid:{},projection:{default:"EPSG:3857"},reprojectionErrorThreshold:{default:.5},requestEncoding:{default:"KVP"},layer:{},style:{},tileClass:{},tilePixelRatio:{default:1},format:{default:"image/jpeg"},version:{default:"1.0.0"},matrixSet:{},dimensions:{},url:{},tileLoadFunction:{},urls:{},wrapX:{type:Boolean,default:!1},transition:{},zDirection:{},styles:{},tileZoomLevel:{default:30},tileMatrixPrefix:{default:""}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("tileLayer"),{properties:r}=XP(n),s=(0,Em.EW)((()=>{var t;return null==(t=gn(r.projection))?void 0:t.getExtent()})),o=(0,Em.EW)((()=>s.value?Yt(s.value):void 0)),a=(0,Em.EW)((()=>s.value?Jt(s.value)/256:0)),l=(0,Em.EW)((()=>{if(n.tileGrid)return n.tileGrid;const t=[r.tileZoomLevel],e=[`${r.tileZoomLevel}`];for(let i=0;i<r.tileZoomLevel;++i)t[i]=a.value/Math.pow(2,i),e[i]=n.tileMatrixPrefix+i;return new vT({origin:o.value,resolutions:t,matrixIds:e})})),c=(0,Em.EW)((()=>new gT({...r,projection:zG(r.projection),tileGrid:l.value})));return eN(c,ZP),(0,Em.wB)(c,(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(c.value)})),(0,Em.wB)((()=>i),(()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(c.value)})),(0,Em.sV)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(c.value)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setSource(null)})),e({tileLayer:i,source:c}),(t,e)=>(0,Em.Q3)("",!0)}});function BH(t){t.component("ol-source-bingmaps",cH),t.component("ol-source-cluster",uH),t.component("ol-source-image-static",hH),t.component("ol-source-image-wms",AH),t.component("ol-source-osm",dH),t.component("ol-source-stadia-maps",fH),t.component("ol-source-tianditu",mH),t.component("ol-source-tile-arcgis-rest",vH),t.component("ol-source-tile-debug",yH),t.component("ol-source-geo-tiff",wH),t.component("ol-source-tile-json",_H),t.component("ol-source-tile-wms",bH),t.component("ol-source-vector",xH),t.component("ol-source-vector-tile",EH),t.component("ol-source-xyz",CH),t.component("ol-source-wmts",SH)}Symbol.toStringTag;function TH(t,e,n){const i=(0,Em.WQ)("map"),r=(0,Em.WQ)("controlBar",null),s=null!==r?null==r?void 0:r.value:i,o=(0,Em.EW)((()=>new t({...e})));return o.value.set("order",void 0===n.order?0:n.order),(0,Em.wB)(o,((t,e)=>{if(s){if(s instanceof y_)s.removeControl(e),s.addControl(t);else if(s instanceof hR){if(null==s?void 0:s.controls_){const t=null==s?void 0:s.controls_.findIndex((t=>t===o.value));t&&(null==s||s.controls_.splice(t,1))}s.addControl(t)}null==i||i.changed()}})),(0,Em.sV)((()=>{if(s&&(s instanceof y_||s instanceof hR)&&s.addControl(o.value),void 0!==(null==s?void 0:s.controls_)){const t=[...s.controls_];t.sort(((t,e)=>t.get("order")-e.get("order"))),s.controls_=[],s&&(s instanceof y_||s instanceof hR)&&t.forEach((t=>{s.addControl(t)})),s.changed()}null==i||i.changed()})),(0,Em.hi)((()=>{if(s&&s instanceof y_)null==s||s.getControls().getArray().forEach((e=>{e instanceof t&&s.removeControl(e)}));else if(null==s?void 0:s.controls_){const t=null==s?void 0:s.controls_.findIndex((t=>t===o.value));t&&(null==s||s.controls_.splice(t,1))}o.value.dispose(),null==i||i.changed()})),{map:i,control:o}}const IH=(0,Em.pM)({__name:"OlAttributionControl",props:{className:{default:"ol-attribution"},target:{},collapsible:{type:Boolean},collapsed:{type:Boolean,default:!0},tipLabel:{default:"Attributions"},label:{default:"i"},expandClassName:{default:"ol-attribution-expand"},collapseLabel:{default:""},collapseClassName:{default:"ol-attribution-collapse"},render:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(Bw,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),FH=(0,Em.pM)({__name:"OlButtonControl",props:{html:{},name:{},className:{},title:{},handleClick:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(xR,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),LH=(0,Em.pM)({__name:"OlContextMenuControl",props:{eventType:{default:"contextmenu"},defaultItems:{type:Boolean,default:!0},width:{default:150},items:{default:()=>[]}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(HR,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),RH=(0,Em.pM)({__name:"OlControlBar",props:{toggleOne:{type:Boolean,default:!0},group:{type:Boolean,default:!0}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(hR,r,i);return(0,Em.Gt)("controlBar",s),e({control:s}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),MH=(0,Em.pM)({__name:"OlFullScreenControl",props:{className:{default:"ol-full-screen"},label:{default:""},labelActive:{default:""},activeClassName:{default:"ol-full-screen-true"},inactiveClassName:{default:"ol-full-screen-false"},tipLabel:{default:"Toggle full-screen"},keys:{type:Boolean,default:!1},target:{default:void 0},source:{default:void 0}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(tR,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),PH=(0,Em.pM)({__name:"OlLayerSwitcherControl",props:{displayInLayerSwitcher:{},show_progress:{type:Boolean,default:!1},mouseover:{type:Boolean,default:!1},reordering:{type:Boolean,default:!0},trash:{type:Boolean,default:!1},oninfo:{},extent:{type:Boolean},onExtent:{},drawDelay:{},collapsed:{type:Boolean,default:!0},layerGroup:{},noScroll:{type:Boolean,default:!1},onchangeCheck:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(jR,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),NH=(0,Em.pM)({__name:"OlLayerSwitcherImageControl",props:{displayInLayerSwitcher:{},show_progress:{type:Boolean,default:!1},mouseover:{type:Boolean,default:!1},reordering:{type:Boolean,default:!0},trash:{type:Boolean,default:!1},oninfo:{},extent:{type:Boolean},onExtent:{},drawDelay:{},collapsed:{type:Boolean,default:!0},layerGroup:{},noScroll:{type:Boolean,default:!1},onchangeCheck:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(zR,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),OH=(0,Em.pM)({__name:"OlMousePositionControl",props:{className:{default:"ol-mouse-position"},coordinateFormat:{},projection:{},render:{},target:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(rR,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),kH=(0,Em.pM)({__name:"OlOverviewMapControl",props:{className:{},collapsed:{type:Boolean},collapseLabel:{},collapsible:{type:Boolean},label:{},layers:{},render:{type:Function},rotateWithView:{type:Boolean},target:{},tipLabel:{},view:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(XR,r,i);return(0,Em.Gt)("overviewMap",s),e({control:s}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}});var DH="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{};function UH(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t["default"]:t}var QH={exports:{}};(function(t,e){(function(t,e){e()})(0,(function(){function e(t,e){return"undefined"==typeof e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}function n(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){a(i.response,e,n)},i.onerror=function(){console.error("could not download file")},i.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(n){}return 200<=e.status&&299>=e.status}function r(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof DH&&DH.global===DH?DH:void 0,o=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),a=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!o?function(t,e,o){var a=s.URL||s.webkitURL,l=document.createElement("a");e=e||t.name||"download",l.download=e,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?r(l):i(l.href)?n(t,e,o):r(l,l.target="_blank")):(l.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(l.href)}),4e4),setTimeout((function(){r(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,s,o){if(s=s||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(e(t,o),s);else if(i(t))n(t,s,o);else{var a=document.createElement("a");a.href=t,a.target="_blank",setTimeout((function(){r(a)}))}}:function(t,e,i,r){if(r=r||open("","_blank"),r&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return n(t,e,i);var a="application/octet-stream"===t.type,l=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&l||o)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var h=s.URL||s.webkitURL,A=h.createObjectURL(t);r?r.location=A:location.href=A,r=null,setTimeout((function(){h.revokeObjectURL(A)}),4e4)}});s.saveAs=a.saveAs=a,t.exports=a}))})(QH);var GH=QH.exports;function HH(t){return HH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},HH(t)}var VH=Uint8Array,jH=Uint16Array,WH=Uint32Array,zH=new VH([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),KH=new VH([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),qH=new VH([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),$H=function(t,e){for(var n=new jH(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var r=new WH(n[30]);for(i=1;i<30;++i)for(var s=n[i];s<n[i+1];++s)r[s]=s-n[i]<<5|i;return[n,r]},XH=$H(zH,2),YH=XH[0],ZH=XH[1];YH[28]=258,ZH[258]=28;for(var JH=$H(KH,0),tV=JH[0],eV=JH[1],nV=new jH(32768),iV=0;iV<32768;++iV){var rV=(43690&iV)>>>1|(21845&iV)<<1;rV=(52428&rV)>>>2|(13107&rV)<<2,rV=(61680&rV)>>>4|(3855&rV)<<4,nV[iV]=((65280&rV)>>>8|(255&rV)<<8)>>>1}var sV=function(t,e,n){for(var i=t.length,r=0,s=new jH(e);r<i;++r)++s[t[r]-1];var o,a=new jH(e);for(r=0;r<e;++r)a[r]=a[r-1]+s[r-1]<<1;if(n){o=new jH(1<<e);var l=15-e;for(r=0;r<i;++r)if(t[r])for(var c=r<<4|t[r],u=e-t[r],h=a[t[r]-1]++<<u,A=h|(1<<u)-1;h<=A;++h)o[nV[h]>>>l]=c}else for(o=new jH(i),r=0;r<i;++r)o[r]=nV[a[t[r]-1]++]>>>15-t[r];return o},oV=new VH(288);for(iV=0;iV<144;++iV)oV[iV]=8;for(iV=144;iV<256;++iV)oV[iV]=9;for(iV=256;iV<280;++iV)oV[iV]=7;for(iV=280;iV<288;++iV)oV[iV]=8;var aV=new VH(32);for(iV=0;iV<32;++iV)aV[iV]=5;var lV=sV(oV,9,0),cV=sV(oV,9,1),uV=sV(aV,5,0),hV=sV(aV,5,1),AV=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},dV=function(t,e,n){var i=e/8>>0;return(t[i]|t[i+1]<<8)>>>(7&e)&n},fV=function(t,e){var n=e/8>>0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>>(7&e)},pV=function(t){return(t/8>>0)+(7&t&&1)},gV=function(t,e,n){(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length);var i=new(t instanceof jH?jH:t instanceof WH?WH:VH)(n-e);return i.set(t.subarray(e,n)),i},mV=function(t,e,n){var i=t.length,r=!e||n,s=!n||n.i;n||(n={}),e||(e=new VH(3*i));var o=function(t){var n=e.length;if(t>n){var i=new VH(Math.max(2*n,t));i.set(e),e=i}},a=n.f||0,l=n.p||0,c=n.b||0,u=n.l,h=n.d,A=n.m,d=n.n,f=8*i;do{if(!u){n.f=a=dV(t,l,1);var p=dV(t,l+1,3);if(l+=3,!p){var g=pV(l)+4,m=t[g-4]|t[g-3]<<8,v=g+m;if(v>i){if(s)throw"unexpected EOF";break}r&&o(c+m),e.set(t.subarray(g,v),c),n.b=c+=m,n.p=l=8*v;continue}if(1==p)u=cV,h=hV,A=9,d=5;else{if(2!=p)throw"invalid block type";var y=dV(t,l,31)+257,w=dV(t,l+10,15)+4,_=y+dV(t,l+5,31)+1;l+=14;for(var b=new VH(_),x=new VH(19),E=0;E<w;++E)x[qH[E]]=dV(t,l+3*E,7);l+=3*w;var C=AV(x),S=(1<<C)-1;if(!s&&l+_*(C+7)>f)break;var B=sV(x,C,1);for(E=0;E<_;){var T=B[dV(t,l,S)];l+=15&T;g=T>>>4;if(g<16)b[E++]=g;else{var I=0,F=0;16==g?(F=3+dV(t,l,3),l+=2,I=b[E-1]):17==g?(F=3+dV(t,l,7),l+=3):18==g&&(F=11+dV(t,l,127),l+=7);while(F--)b[E++]=I}}var L=b.subarray(0,y),R=b.subarray(y);A=AV(L),d=AV(R),u=sV(L,A,1),h=sV(R,d,1)}if(l>f)throw"unexpected EOF"}r&&o(c+131072);var M=(1<<A)-1,P=(1<<d)-1,N=A+d+18;while(s||l+N<f){I=u[fV(t,l)&M];var O=I>>>4;if(l+=15&I,l>f)throw"unexpected EOF";if(!I)throw"invalid length/literal";if(O<256)e[c++]=O;else{if(256==O){u=null;break}var k=O-254;if(O>264){E=O-257;var D=zH[E];k=dV(t,l,(1<<D)-1)+YH[E],l+=D}var U=h[fV(t,l)&P],Q=U>>>4;if(!U)throw"invalid distance";l+=15&U;R=tV[Q];if(Q>3){D=KH[Q];R+=fV(t,l)&(1<<D)-1,l+=D}if(l>f)throw"unexpected EOF";r&&o(c+131072);for(var G=c+k;c<G;c+=4)e[c]=e[c-R],e[c+1]=e[c+1-R],e[c+2]=e[c+2-R],e[c+3]=e[c+3-R];c=G}}n.l=u,n.p=l,n.b=c,u&&(a=1,n.m=A,n.d=h,n.n=d)}while(!a);return c==e.length?e:gV(e,0,c)},vV=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8},yV=function(t,e,n){n<<=7&e;var i=e/8>>0;t[i]|=n,t[i+1]|=n>>>8,t[i+2]|=n>>>16},wV=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,s=n.slice();if(!r)return[new VH(0),0];if(1==r){var o=new VH(n[0].s+1);return o[n[0].s]=1,[o,1]}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var a=n[0],l=n[1],c=0,u=1,h=2;n[0]={s:-1,f:a.f+l.f,l:a,r:l};while(u!=r-1)a=n[n[c].f<n[h].f?c++:h++],l=n[c!=u&&n[c].f<n[h].f?c++:h++],n[u++]={s:-1,f:a.f+l.f,l:a,r:l};var A=s[0].s;for(i=1;i<r;++i)s[i].s>A&&(A=s[i].s);var d=new jH(A+1),f=_V(n[u-1],d,0);if(f>e){i=0;var p=0,g=f-e,m=1<<g;for(s.sort((function(t,e){return d[e.s]-d[t.s]||t.f-e.f}));i<r;++i){var v=s[i].s;if(!(d[v]>e))break;p+=m-(1<<f-d[v]),d[v]=e}p>>>=g;while(p>0){var y=s[i].s;d[y]<e?p-=1<<e-d[y]++-1:++i}for(;i>=0&&p;--i){var w=s[i].s;d[w]==e&&(--d[w],++p)}f=e}return[new VH(d),f]},_V=function(t,e,n){return-1==t.s?Math.max(_V(t.l,e,n+1),_V(t.r,e,n+1)):e[t.s]=n},bV=function(t){var e=t.length;while(e&&!t[--e]);for(var n=new jH(++e),i=0,r=t[0],s=1,o=function(t){n[i++]=t},a=1;a<=e;++a)if(t[a]==r&&a!=e)++s;else{if(!r&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(r),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}while(s--)o(r);s=1,r=t[a]}return[n.subarray(0,i),e]},xV=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},EV=function(t,e,n){var i=n.length,r=pV(e+2);t[r]=255&i,t[r+1]=i>>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},CV=function(t,e,n,i,r,s,o,a,l,c,u){vV(e,u++,n),++r[256];for(var h=wV(r,15),A=h[0],d=h[1],f=wV(s,15),p=f[0],g=f[1],m=bV(A),v=m[0],y=m[1],w=bV(p),_=w[0],b=w[1],x=new jH(19),E=0;E<v.length;++E)x[31&v[E]]++;for(E=0;E<_.length;++E)x[31&_[E]]++;for(var C=wV(x,7),S=C[0],B=C[1],T=19;T>4&&!S[qH[T-1]];--T);var I,F,L,R,M=c+5<<3,P=xV(r,oV)+xV(s,aV)+o,N=xV(r,A)+xV(s,p)+o+14+3*T+xV(x,S)+(2*x[16]+3*x[17]+7*x[18]);if(M<=P&&M<=N)return EV(e,u,t.subarray(l,l+c));if(vV(e,u,1+(N<P)),u+=2,N<P){I=sV(A,d,0),F=A,L=sV(p,g,0),R=p;var O=sV(S,B,0);vV(e,u,y-257),vV(e,u+5,b-1),vV(e,u+10,T-4),u+=14;for(E=0;E<T;++E)vV(e,u+3*E,S[qH[E]]);u+=3*T;for(var k=[v,_],D=0;D<2;++D){var U=k[D];for(E=0;E<U.length;++E){var Q=31&U[E];vV(e,u,O[Q]),u+=S[Q],Q>15&&(vV(e,u,U[E]>>>5&127),u+=U[E]>>>12)}}}else I=lV,F=oV,L=uV,R=aV;for(E=0;E<a;++E)if(i[E]>255){Q=i[E]>>>18&31;yV(e,u,I[Q+257]),u+=F[Q+257],Q>7&&(vV(e,u,i[E]>>>23&31),u+=zH[Q]);var G=31&i[E];yV(e,u,L[G]),u+=R[G],G>3&&(yV(e,u,i[E]>>>5&8191),u+=KH[G])}else yV(e,u,I[i[E]]),u+=F[i[E]];return yV(e,u,I[256]),u+F[256]},SV=new WH([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),BV=new VH(0),TV=function(t,e,n,i,r,s){var o=t.length,a=new VH(i+o+5*(1+Math.floor(o/7e3))+r),l=a.subarray(i,a.length-r),c=0;if(!e||o<8)for(var u=0;u<=o;u+=65535){var h=u+65535;h<o?c=EV(l,c,t.subarray(u,h)):(l[u]=s,c=EV(l,c,t.subarray(u,o)))}else{for(var A=SV[e-1],d=A>>>13,f=8191&A,p=(1<<n)-1,g=new jH(32768),m=new jH(p+1),v=Math.ceil(n/3),y=2*v,w=function(e){return(t[e]^t[e+1]<<v^t[e+2]<<y)&p},_=new WH(25e3),b=new jH(288),x=new jH(32),E=0,C=0,S=(u=0,0),B=0,T=0;u<o;++u){var I=w(u),F=32767&u,L=m[I];if(g[F]=L,m[I]=F,B<=u){var R=o-u;if((E>7e3||S>24576)&&R>423){c=CV(t,l,0,_,b,x,C,S,T,u-T,c),S=E=C=0,T=u;for(var M=0;M<286;++M)b[M]=0;for(M=0;M<30;++M)x[M]=0}var P=2,N=0,O=f,k=F-L&32767;if(R>2&&I==w(u-k)){var D=Math.min(d,R)-1,U=Math.min(32767,u),Q=Math.min(258,R);while(k<=U&&--O&&F!=L){if(t[u+P]==t[u+P-k]){for(var G=0;G<Q&&t[u+G]==t[u+G-k];++G);if(G>P){if(P=G,N=k,G>D)break;var H=Math.min(k,G-2),V=0;for(M=0;M<H;++M){var j=u-k+M+32768&32767,W=g[j],z=j-W+32768&32767;z>V&&(V=z,L=j)}}}F=L,L=g[F],k+=F-L+32768&32767}}if(N){_[S++]=268435456|ZH[P]<<18|eV[N];var K=31&ZH[P],q=31&eV[N];C+=zH[K]+KH[q],++b[257+K],++x[q],B=u+P,++E}else _[S++]=t[u],++b[t[u]]}}c=CV(t,l,s,_,b,x,C,S,T,u-T,c),s||(c=EV(l,c,BV))}return gV(a,0,i+pV(c)+r)},IV=function(){var t=1,e=0;return{p:function(n){for(var i=t,r=e,s=n.length,o=0;o!=s;){for(var a=Math.min(o+5552,s);o<a;++o)i+=n[o],r+=i;i%=65521,r%=65521}t=i,e=r},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+2*((255&t)<<23)}}},FV=function(t,e,n,i,r){return TV(t,null==e.level?6:e.level,null==e.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):12+e.mem,n,i,!r)},LV=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},RV=function(t,e){var n=e.level,i=0==n?0:n<6?1:9==n?3:2;t[0]=120,t[1]=i<<6|(i?32-2*i:1)},MV=function(t){if(8!=(15&t[0])||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function PV(t,e){void 0===e&&(e={});var n=IV();n.p(t);var i=FV(t,e,2,4);return RV(i,e),LV(i,i.length-4,n.d()),i}function NV(t,e){return mV((MV(t),t.subarray(2,-4)),e)}
/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Hollnder <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var OV=function(){return"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this}();function kV(){OV.console&&"function"==typeof OV.console.log&&OV.console.log.apply(OV.console,arguments)}var DV={log:kV,warn:function(t){OV.console&&("function"==typeof OV.console.warn?OV.console.warn.apply(OV.console,arguments):kV.call(null,arguments))},error:function(t){OV.console&&("function"==typeof OV.console.error?OV.console.error.apply(OV.console,arguments):kV(t))}};function UV(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){jV(i.response,e,n)},i.onerror=function(){DV.error("could not download file")},i.send()}function QV(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(n){}return e.status>=200&&e.status<=299}function GV(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var HV,VV,jV=OV.saveAs||("object"!==("undefined"==typeof window?"undefined":HH(window))||window!==OV?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=OV.URL||OV.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener","string"==typeof t?(r.href=t,r.origin!==location.origin?QV(r.href)?UV(t,e,n):GV(r,r.target="_blank"):GV(r)):(r.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(r.href)}),4e4),setTimeout((function(){GV(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(QV(t))UV(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout((function(){GV(i)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==HH(e)&&(DV.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return UV(t,e,n);var r="application/octet-stream"===t.type,s=/constructor/i.test(OV.HTMLElement)||OV.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||r&&s)&&"object"===("undefined"==typeof FileReader?"undefined":HH(FileReader))){var a=new FileReader;a.onloadend=function(){var t=a.result;t=o?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},a.readAsDataURL(t)}else{var l=OV.URL||OV.webkitURL,c=l.createObjectURL(t);i?i.location=c:location.href=c,i=null,setTimeout((function(){l.revokeObjectURL(c)}),4e4)}});
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function WV(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,s=n[i].process,o=r.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n}}
/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function zV(t,e){var n=t[0],i=t[1],r=t[2],s=t[3];n=qV(n,i,r,s,e[0],7,-680876936),s=qV(s,n,i,r,e[1],12,-389564586),r=qV(r,s,n,i,e[2],17,606105819),i=qV(i,r,s,n,e[3],22,-1044525330),n=qV(n,i,r,s,e[4],7,-176418897),s=qV(s,n,i,r,e[5],12,1200080426),r=qV(r,s,n,i,e[6],17,-1473231341),i=qV(i,r,s,n,e[7],22,-45705983),n=qV(n,i,r,s,e[8],7,1770035416),s=qV(s,n,i,r,e[9],12,-1958414417),r=qV(r,s,n,i,e[10],17,-42063),i=qV(i,r,s,n,e[11],22,-1990404162),n=qV(n,i,r,s,e[12],7,1804603682),s=qV(s,n,i,r,e[13],12,-40341101),r=qV(r,s,n,i,e[14],17,-1502002290),n=$V(n,i=qV(i,r,s,n,e[15],22,1236535329),r,s,e[1],5,-165796510),s=$V(s,n,i,r,e[6],9,-1069501632),r=$V(r,s,n,i,e[11],14,643717713),i=$V(i,r,s,n,e[0],20,-373897302),n=$V(n,i,r,s,e[5],5,-701558691),s=$V(s,n,i,r,e[10],9,38016083),r=$V(r,s,n,i,e[15],14,-660478335),i=$V(i,r,s,n,e[4],20,-405537848),n=$V(n,i,r,s,e[9],5,568446438),s=$V(s,n,i,r,e[14],9,-1019803690),r=$V(r,s,n,i,e[3],14,-187363961),i=$V(i,r,s,n,e[8],20,1163531501),n=$V(n,i,r,s,e[13],5,-1444681467),s=$V(s,n,i,r,e[2],9,-51403784),r=$V(r,s,n,i,e[7],14,1735328473),n=XV(n,i=$V(i,r,s,n,e[12],20,-1926607734),r,s,e[5],4,-378558),s=XV(s,n,i,r,e[8],11,-2022574463),r=XV(r,s,n,i,e[11],16,1839030562),i=XV(i,r,s,n,e[14],23,-35309556),n=XV(n,i,r,s,e[1],4,-1530992060),s=XV(s,n,i,r,e[4],11,1272893353),r=XV(r,s,n,i,e[7],16,-155497632),i=XV(i,r,s,n,e[10],23,-1094730640),n=XV(n,i,r,s,e[13],4,681279174),s=XV(s,n,i,r,e[0],11,-358537222),r=XV(r,s,n,i,e[3],16,-722521979),i=XV(i,r,s,n,e[6],23,76029189),n=XV(n,i,r,s,e[9],4,-640364487),s=XV(s,n,i,r,e[12],11,-421815835),r=XV(r,s,n,i,e[15],16,530742520),n=YV(n,i=XV(i,r,s,n,e[2],23,-995338651),r,s,e[0],6,-198630844),s=YV(s,n,i,r,e[7],10,1126891415),r=YV(r,s,n,i,e[14],15,-1416354905),i=YV(i,r,s,n,e[5],21,-57434055),n=YV(n,i,r,s,e[12],6,1700485571),s=YV(s,n,i,r,e[3],10,-1894986606),r=YV(r,s,n,i,e[10],15,-1051523),i=YV(i,r,s,n,e[1],21,-2054922799),n=YV(n,i,r,s,e[8],6,1873313359),s=YV(s,n,i,r,e[15],10,-30611744),r=YV(r,s,n,i,e[6],15,-1560198380),i=YV(i,r,s,n,e[13],21,1309151649),n=YV(n,i,r,s,e[4],6,-145523070),s=YV(s,n,i,r,e[11],10,-1120210379),r=YV(r,s,n,i,e[2],15,718787259),i=YV(i,r,s,n,e[9],21,-343485551),t[0]=sj(n,t[0]),t[1]=sj(i,t[1]),t[2]=sj(r,t[2]),t[3]=sj(s,t[3])}function KV(t,e,n,i,r,s){return e=sj(sj(e,t),sj(i,s)),sj(e<<r|e>>>32-r,n)}function qV(t,e,n,i,r,s,o){return KV(e&n|~e&i,t,e,r,s,o)}function $V(t,e,n,i,r,s,o){return KV(e&i|n&~i,t,e,r,s,o)}function XV(t,e,n,i,r,s,o){return KV(e^n^i,t,e,r,s,o)}function YV(t,e,n,i,r,s,o){return KV(n^(e|~i),t,e,r,s,o)}function ZV(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)zV(i,JV(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(zV(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*n,zV(i,r),i}function JV(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}HV=OV.atob.bind(OV),VV=OV.btoa.bind(OV);var tj="0123456789abcdef".split("");function ej(t){for(var e="",n=0;n<4;n++)e+=tj[t>>8*n+4&15]+tj[t>>8*n&15];return e}function nj(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function ij(t){return ZV(t).map(nj).join("")}var rj="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=ej(t[e]);return t.join("")}(ZV("hello"));function sj(t,e){if(rj){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}
/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function oj(t,e){var n,i,r,s;if(t!==n){for(var o=(r=t,s=1+(256/t.length>>0),new Array(s+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var c=0;for(l=0;l<256;l++){var u=a[l];c=(c+u+o.charCodeAt(l))%256,a[l]=a[c],a[c]=u}n=t,i=a}else a=i;var h=e.length,A=0,d=0,f="";for(l=0;l<h;l++)d=(d+(u=a[A=(A+1)%256]))%256,a[A]=a[d],a[d]=u,o=a[(a[A]+a[d])%256],f+=String.fromCharCode(e.charCodeAt(l)^o);return f}
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var aj={print:4,modify:8,copy:16,"annot-forms":32};function lj(t,e,n,i){this.v=1,this.r=2;var r=192;t.forEach((function(t){if(void 0!==aj.perm)throw new Error("Invalid permission: "+t);r+=aj[t]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^r)),this.encryptionKey=ij(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=oj(this.encryptionKey,this.padding)}function cj(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var r=t.charCodeAt(i);e+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):t[i]}return e}function uj(t){if("object"!==HH(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[n,!!i],r},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var s in e[n]){var o=e[n][s];try{o[0].apply(t,i)}catch(a){OV.console&&DV.error("jsPDF PubSub Error",a.message,a)}o[1]&&r.push(s)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function hj(t){if(!(this instanceof hj))return new hj(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function Aj(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function dj(t,e,n,i,r){if(!(this instanceof dj))return new dj(t,e,n,i,r);this.type="axial"===t?2:3,this.coords=e,this.colors=n,Aj.call(this,i,r)}function fj(t,e,n,i,r){if(!(this instanceof fj))return new fj(t,e,n,i,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,Aj.call(this,i,r)}function pj(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",i=arguments[1],r=arguments[2],s=arguments[3],o=[],a=1,l=16,c="S",u=null;"object"===HH(t=t||{})&&(n=t.orientation,i=t.unit||i,r=t.format||r,s=t.compress||t.compressPdf||s,null!==(u=t.encryption||null)&&(u.userPassword=u.userPassword||"",u.ownerPassword=u.ownerPassword||"",u.userPermissions=u.userPermissions||[]),a="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(l=t.floatPrecision),c=t.defaultPathOperation||"S"),o=t.filters||(!0===s?["FlateEncode"]:o),i=i||"mm",n=(""+(n||"P")).toLowerCase();var h=t.putOnlyUsedFonts||!1,A={},d={internal:{},__private__:{}};d.__private__.PubSub=uj;var f="1.3",p=d.__private__.getPdfVersion=function(){return f};d.__private__.setPdfVersion=function(t){f=t};var g={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};d.__private__.getPageFormats=function(){return g};var m=d.__private__.getPageFormat=function(t){return g[t]};r=r||"a4";var v={COMPAT:"compat",ADVANCED:"advanced"},y=v.COMPAT;function w(){this.saveGraphicsState(),Z(new Rt(dt,0,0,-dt,0,Bn()*dt).toString()+" cm"),this.setFontSize(this.getFontSize()/dt),c="n",y=v.ADVANCED}function _(){this.restoreGraphicsState(),c="S",y=v.COMPAT}var b=d.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};d.advancedAPI=function(t){var e=y===v.COMPAT;return e&&w.call(this),"function"!=typeof t||(t(this),e&&_.call(this)),this},d.compatAPI=function(t){var e=y===v.ADVANCED;return e&&_.call(this),"function"!=typeof t||(t(this),e&&w.call(this)),this},d.isAdvancedAPI=function(){return y===v.ADVANCED};var x,E=function(t){if(y!==v.ADVANCED)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},C=d.roundToPrecision=d.__private__.roundToPrecision=function(t,n){var i=e||n;if(isNaN(t)||isNaN(i))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(i).replace(/0+$/,"")};x=d.hpf=d.__private__.hpf="number"==typeof l?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,l)}:"smart"===l?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return C(t,16)};var S=d.f2=d.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return C(t,2)},B=d.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return C(t,3)},T=d.scale=d.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return y===v.COMPAT?t*dt:y===v.ADVANCED?t:void 0},I=function(t){return y===v.COMPAT?Bn()-t:y===v.ADVANCED?t:void 0},F=function(t){return T(I(t))};d.__private__.setPrecision=d.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var L,R="00000000000000000000000000000000",M=d.__private__.getFileId=function(){return R},P=d.__private__.setFileId=function(t){return R=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():R.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==u&&(Pe=new lj(u.userPermissions,u.userPassword,u.ownerPassword,R)),R};d.setFileId=function(t){return P(t),this},d.getFileId=function(){return M()};var N=d.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",i=Math.floor(Math.abs(e/60)),r=Math.abs(e%60),s=[n,Q(i),"'",Q(r),"'"].join("");return["D:",t.getFullYear(),Q(t.getMonth()+1),Q(t.getDate()),Q(t.getHours()),Q(t.getMinutes()),Q(t.getSeconds()),s].join("")},O=d.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,i=parseInt(t.substr(8,2),10),r=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),o=parseInt(t.substr(14,2),10);return new Date(e,n,i,r,s,o,0)},k=d.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=N(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return L=e},D=d.__private__.getCreationDate=function(t){var e=L;return"jsDate"===t&&(e=O(L)),e};d.setCreationDate=function(t){return k(t),this},d.getCreationDate=function(t){return D(t)};var U,Q=d.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},G=d.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},H=0,V=[],j=[],W=0,z=[],K=[],q=!1,$=j,X=function(){H=0,W=0,j=[],V=[],z=[],Qt=kt(),Gt=kt()};d.__private__.setCustomOutputDestination=function(t){q=!0,$=t};var Y=function(t){q||($=t)};d.__private__.resetCustomOutputDestination=function(){q=!1,$=j};var Z=d.__private__.out=function(t){return t=t.toString(),W+=t.length+1,$.push(t),$},J=d.__private__.write=function(t){return Z(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},tt=d.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n);e--;)i[e]=t.charCodeAt(e);return n},et=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];d.__private__.getStandardFonts=function(){return et};var nt=t.fontSize||16;d.__private__.setFontSize=d.setFontSize=function(t){return nt=y===v.ADVANCED?t/dt:t,this};var it,rt=d.__private__.getFontSize=d.getFontSize=function(){return y===v.COMPAT?nt:nt*dt},st=t.R2L||!1;d.__private__.setR2L=d.setR2L=function(t){return st=t,this},d.__private__.getR2L=d.getR2L=function(){return st};var ot,at=d.__private__.setZoomMode=function(t){var e=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))it=t;else if(isNaN(t)){if(-1===e.indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');it=t}else it=parseInt(t,10)};d.__private__.getZoomMode=function(){return it};var lt,ct=d.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');ot=t};d.__private__.getPageMode=function(){return ot};var ut=d.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');lt=t};d.__private__.getLayoutMode=function(){return lt},d.__private__.setDisplayMode=d.setDisplayMode=function(t,e,n){return at(t),ut(e),ct(n),this};var ht={title:"",subject:"",author:"",keywords:"",creator:""};d.__private__.getDocumentProperty=function(t){if(-1===Object.keys(ht).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return ht[t]},d.__private__.getDocumentProperties=function(){return ht},d.__private__.setDocumentProperties=d.setProperties=d.setDocumentProperties=function(t){for(var e in ht)ht.hasOwnProperty(e)&&t[e]&&(ht[e]=t[e]);return this},d.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(ht).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return ht[t]=e};var At,dt,ft,pt,gt,mt={},vt={},yt=[],wt={},_t={},bt={},xt={},Et=null,Ct=0,St=[],Bt=new uj(d),Tt=t.hotfixes||[],It={},Ft={},Lt=[],Rt=function t(e,n,i,r,s,o){if(!(this instanceof t))return new t(e,n,i,r,s,o);isNaN(e)&&(e=1),isNaN(n)&&(n=0),isNaN(i)&&(i=0),isNaN(r)&&(r=1),isNaN(s)&&(s=0),isNaN(o)&&(o=0),this._matrix=[e,n,i,r,s,o]};Object.defineProperty(Rt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Rt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Rt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Rt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Rt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Rt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Rt.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Rt.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Rt.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Rt.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Rt.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Rt.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Rt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Rt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Rt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Rt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Rt.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(x).join(t)},Rt.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,n=t.sx*this.shy+t.shy*this.sy,i=t.shx*this.sx+t.sy*this.shx,r=t.shx*this.shy+t.sy*this.sy,s=t.tx*this.sx+t.ty*this.shx+this.tx,o=t.tx*this.shy+t.ty*this.sy+this.ty;return new Rt(e,n,i,r,s,o)},Rt.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,s=this.ty,o=Math.sqrt(t*t+e*e),a=(t/=o)*n+(e/=o)*i;n-=t*a,i-=e*a;var l=Math.sqrt(n*n+i*i);return a/=l,t*(i/=l)<e*(n/=l)&&(t=-t,e=-e,a=-a,o=-o),{scale:new Rt(o,0,0,l,0,0),translate:new Rt(1,0,0,1,r,s),rotate:new Rt(t,e,-e,t,0,0),skew:new Rt(1,0,a,1,0,0)}},Rt.prototype.toString=function(t){return this.join(" ")},Rt.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,s=this.ty,o=1/(t*i-e*n),a=i*o,l=-e*o,c=-n*o,u=t*o;return new Rt(a,l,c,u,-a*r-c*s,-l*r-u*s)},Rt.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,n=t.x*this.shy+t.y*this.sy+this.ty;return new yn(e,n)},Rt.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new yn(t.x+t.w,t.y+t.h));return new wn(e.x,e.y,n.x-e.x,n.y-e.y)},Rt.prototype.clone=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,s=this.ty;return new Rt(t,e,n,i,r,s)},d.Matrix=Rt;var Mt=d.matrixMult=function(t,e){return e.multiply(t)},Pt=new Rt(1,0,0,1,0,0);d.unitMatrix=d.identityMatrix=Pt;var Nt=function(t,e){if(!_t[t]){var n=(e instanceof dj?"Sh":"P")+(Object.keys(wt).length+1).toString(10);e.id=n,_t[t]=n,wt[n]=e,Bt.publish("addPattern",e)}};d.ShadingPattern=dj,d.TilingPattern=fj,d.addShadingPattern=function(t,e){return E("addShadingPattern()"),Nt(t,e),this},d.beginTilingPattern=function(t){E("beginTilingPattern()"),bn(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},d.endTilingPattern=function(t,e){E("endTilingPattern()"),e.stream=K[U].join("\n"),Nt(t,e),Bt.publish("endTilingPattern",e),Lt.pop().restore()};var Ot=d.__private__.newObject=function(){var t=kt();return Dt(t,!0),t},kt=d.__private__.newObjectDeferred=function(){return H++,V[H]=function(){return W},H},Dt=function(t,e){return e="boolean"==typeof e&&e,V[t]=W,e&&Z(t+" 0 obj"),t},Ut=d.__private__.newAdditionalObject=function(){var t={objId:kt(),content:""};return z.push(t),t},Qt=kt(),Gt=kt(),Ht=d.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var i="#",r=0;r<3;r++)i+=("0"+Math.floor(255*parseFloat(e[r])).toString(16)).slice(-2);return i},Vt=d.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,i=t.ch2,r=t.ch3,s=t.ch4,o="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var a=new WV(n);if(a.ok)n=a.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var l=parseInt(n.substr(1),16);n=l>>16&255,i=l>>8&255,r=255&l}if(void 0===i||void 0===s&&n===i&&i===r)if("string"==typeof n)e=n+" "+o[0];else switch(t.precision){case 2:e=S(n/255)+" "+o[0];break;case 3:default:e=B(n/255)+" "+o[0]}else if(void 0===s||"object"===HH(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.","1.","1.",o[1]].join(" ");if("string"==typeof n)e=[n,i,r,o[1]].join(" ");else switch(t.precision){case 2:e=[S(n/255),S(i/255),S(r/255),o[1]].join(" ");break;default:case 3:e=[B(n/255),B(i/255),B(r/255),o[1]].join(" ")}}else if("string"==typeof n)e=[n,i,r,s,o[2]].join(" ");else switch(t.precision){case 2:e=[S(n),S(i),S(r),S(s),o[2]].join(" ");break;case 3:default:e=[B(n),B(i),B(r),B(s),o[2]].join(" ")}return e},jt=d.__private__.getFilters=function(){return o},Wt=d.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||jt(),i=t.alreadyAppliedFilters||[],r=t.addLength1||!1,s=e.length,o=t.objectId,a=function(t){return t};if(null!==u&&void 0===o)throw new Error("ObjectId must be passed to putStream for file encryption");null!==u&&(a=Pe.encryptor(o,0));var l={};!0===n&&(n=["FlateEncode"]);var c=t.additionalKeyValues||[],h=(l=void 0!==pj.API.processDataByFilters?pj.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(i)?i.join(" "):i.toString());if(0!==l.data.length&&(c.push({key:"Length",value:l.data.length}),!0===r&&c.push({key:"Length1",value:s})),0!=h.length)if(h.split("/").length-1==1)c.push({key:"Filter",value:h});else{c.push({key:"Filter",value:"["+h+"]"});for(var A=0;A<c.length;A+=1)if("DecodeParms"===c[A].key){for(var d=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)d.push("null");d.push(c[A].value),c[A].value="["+d.join(" ")+"]"}}Z("<<");for(var p=0;p<c.length;p++)Z("/"+c[p].key+" "+c[p].value);Z(">>"),0!==l.data.length&&(Z("stream"),Z(a(l.data)),Z("endstream"))},zt=d.__private__.putPage=function(t){var e=t.number,n=t.data,i=t.objId,r=t.contentsObjId;Dt(i,!0),Z("<</Type /Page"),Z("/Parent "+t.rootDictionaryObjId+" 0 R"),Z("/Resources "+t.resourceDictionaryObjId+" 0 R"),Z("/MediaBox ["+parseFloat(x(t.mediaBox.bottomLeftX))+" "+parseFloat(x(t.mediaBox.bottomLeftY))+" "+x(t.mediaBox.topRightX)+" "+x(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&Z("/CropBox ["+x(t.cropBox.bottomLeftX)+" "+x(t.cropBox.bottomLeftY)+" "+x(t.cropBox.topRightX)+" "+x(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&Z("/BleedBox ["+x(t.bleedBox.bottomLeftX)+" "+x(t.bleedBox.bottomLeftY)+" "+x(t.bleedBox.topRightX)+" "+x(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&Z("/TrimBox ["+x(t.trimBox.bottomLeftX)+" "+x(t.trimBox.bottomLeftY)+" "+x(t.trimBox.topRightX)+" "+x(t.trimBox.topRightY)+"]"),null!==t.artBox&&Z("/ArtBox ["+x(t.artBox.bottomLeftX)+" "+x(t.artBox.bottomLeftY)+" "+x(t.artBox.topRightX)+" "+x(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&Z("/UserUnit "+t.userUnit),Bt.publish("putPage",{objId:i,pageContext:St[e],pageNumber:e,page:n}),Z("/Contents "+r+" 0 R"),Z(">>"),Z("endobj");var s=n.join("\n");return y===v.ADVANCED&&(s+="\nQ"),Dt(r,!0),Wt({data:s,filters:jt(),objectId:r}),Z("endobj"),i},Kt=d.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=Ct;t++)St[t].objId=kt(),St[t].contentsObjId=kt();for(t=1;t<=Ct;t++)n.push(zt({number:t,data:K[t],objId:St[t].objId,contentsObjId:St[t].contentsObjId,mediaBox:St[t].mediaBox,cropBox:St[t].cropBox,bleedBox:St[t].bleedBox,trimBox:St[t].trimBox,artBox:St[t].artBox,userUnit:St[t].userUnit,rootDictionaryObjId:Qt,resourceDictionaryObjId:Gt}));Dt(Qt,!0),Z("<</Type /Pages");var i="/Kids [";for(e=0;e<Ct;e++)i+=n[e]+" 0 R ";Z(i+"]"),Z("/Count "+Ct),Z(">>"),Z("endobj"),Bt.publish("postPutPages")},qt=function(t){Bt.publish("putFont",{font:t,out:Z,newObject:Ot,putStream:Wt}),!0!==t.isAlreadyPutted&&(t.objectNumber=Ot(),Z("<<"),Z("/Type /Font"),Z("/BaseFont /"+cj(t.postScriptName)),Z("/Subtype /Type1"),"string"==typeof t.encoding&&Z("/Encoding /"+t.encoding),Z("/FirstChar 32"),Z("/LastChar 255"),Z(">>"),Z("endobj"))},$t=function(){for(var t in mt)mt.hasOwnProperty(t)&&(!1===h||!0===h&&A.hasOwnProperty(t))&&qt(mt[t])},Xt=function(t){t.objectNumber=Ot();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[x(t.x),x(t.y),x(t.x+t.width),x(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");Wt({data:n,additionalKeyValues:e,objectId:t.objectNumber}),Z("endobj")},Yt=function(){for(var t in It)It.hasOwnProperty(t)&&Xt(It[t])},Zt=function(t,e){var n,i=[],r=1/(e-1);for(n=0;n<1;n+=r)i.push(n);if(i.push(1),0!=t[0].offset){var s={offset:0,color:t[0].color};t.unshift(s)}if(1!=t[t.length-1].offset){var o={offset:1,color:t[t.length-1].color};t.push(o)}for(var a="",l=0,c=0;c<i.length;c++){for(n=i[c];n>t[l+1].offset;)l++;var u=t[l].offset,h=(n-u)/(t[l+1].offset-u),A=t[l].color,d=t[l+1].color;a+=G(Math.round((1-h)*A[0]+h*d[0]).toString(16))+G(Math.round((1-h)*A[1]+h*d[1]).toString(16))+G(Math.round((1-h)*A[2]+h*d[2]).toString(16))}return a.trim()},Jt=function(t,e){e||(e=21);var n=Ot(),i=Zt(t.colors,e),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+e+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Wt({data:i,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),Z("endobj"),t.objectNumber=Ot(),Z("<< /ShadingType "+t.type),Z("/ColorSpace /DeviceRGB");var s="/Coords ["+x(parseFloat(t.coords[0]))+" "+x(parseFloat(t.coords[1]))+" ";2===t.type?s+=x(parseFloat(t.coords[2]))+" "+x(parseFloat(t.coords[3])):s+=x(parseFloat(t.coords[2]))+" "+x(parseFloat(t.coords[3]))+" "+x(parseFloat(t.coords[4]))+" "+x(parseFloat(t.coords[5])),Z(s+="]"),t.matrix&&Z("/Matrix ["+t.matrix.toString()+"]"),Z("/Function "+n+" 0 R"),Z("/Extend [true true]"),Z(">>"),Z("endobj")},te=function(t,e){var n=kt(),i=Ot();e.push({resourcesOid:n,objectOid:i}),t.objectNumber=i;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+t.boundingBox.map(x).join(" ")+"]"}),r.push({key:"XStep",value:x(t.xStep)}),r.push({key:"YStep",value:x(t.yStep)}),r.push({key:"Resources",value:n+" 0 R"}),t.matrix&&r.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),Wt({data:t.stream,additionalKeyValues:r,objectId:t.objectNumber}),Z("endobj")},ee=function(t){var e;for(e in wt)wt.hasOwnProperty(e)&&(wt[e]instanceof dj?Jt(wt[e]):wt[e]instanceof fj&&te(wt[e],t))},ne=function(t){for(var e in t.objectNumber=Ot(),Z("<<"),t)switch(e){case"opacity":Z("/ca "+S(t[e]));break;case"stroke-opacity":Z("/CA "+S(t[e]))}Z(">>"),Z("endobj")},ie=function(){var t;for(t in bt)bt.hasOwnProperty(t)&&ne(bt[t])},re=function(){for(var t in Z("/XObject <<"),It)It.hasOwnProperty(t)&&It[t].objectNumber>=0&&Z("/"+t+" "+It[t].objectNumber+" 0 R");Bt.publish("putXobjectDict"),Z(">>")},se=function(){Pe.oid=Ot(),Z("<<"),Z("/Filter /Standard"),Z("/V "+Pe.v),Z("/R "+Pe.r),Z("/U <"+Pe.toHexString(Pe.U)+">"),Z("/O <"+Pe.toHexString(Pe.O)+">"),Z("/P "+Pe.P),Z(">>"),Z("endobj")},oe=function(){for(var t in Z("/Font <<"),mt)mt.hasOwnProperty(t)&&(!1===h||!0===h&&A.hasOwnProperty(t))&&Z("/"+t+" "+mt[t].objectNumber+" 0 R");Z(">>")},ae=function(){if(Object.keys(wt).length>0){for(var t in Z("/Shading <<"),wt)wt.hasOwnProperty(t)&&wt[t]instanceof dj&&wt[t].objectNumber>=0&&Z("/"+t+" "+wt[t].objectNumber+" 0 R");Bt.publish("putShadingPatternDict"),Z(">>")}},le=function(t){if(Object.keys(wt).length>0){for(var e in Z("/Pattern <<"),wt)wt.hasOwnProperty(e)&&wt[e]instanceof d.TilingPattern&&wt[e].objectNumber>=0&&wt[e].objectNumber<t&&Z("/"+e+" "+wt[e].objectNumber+" 0 R");Bt.publish("putTilingPatternDict"),Z(">>")}},ce=function(){if(Object.keys(bt).length>0){var t;for(t in Z("/ExtGState <<"),bt)bt.hasOwnProperty(t)&&bt[t].objectNumber>=0&&Z("/"+t+" "+bt[t].objectNumber+" 0 R");Bt.publish("putGStateDict"),Z(">>")}},ue=function(t){Dt(t.resourcesOid,!0),Z("<<"),Z("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),oe(),ae(),le(t.objectOid),ce(),re(),Z(">>"),Z("endobj")},he=function(){var t=[];$t(),ie(),Yt(),ee(t),Bt.publish("putResources"),t.forEach(ue),ue({resourcesOid:Gt,objectOid:Number.MAX_SAFE_INTEGER}),Bt.publish("postPutResources")},Ae=function(){Bt.publish("putAdditionalObjects");for(var t=0;t<z.length;t++){var e=z[t];Dt(e.objId,!0),Z(e.content),Z("endobj")}Bt.publish("postPutAdditionalObjects")},de=function(t){vt[t.fontName]=vt[t.fontName]||{},vt[t.fontName][t.fontStyle]=t.id},fe=function(t,e,n,i,r){var s={id:"F"+(Object.keys(mt).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:i,isStandardFont:r||!1,metadata:{}};return Bt.publish("addFont",{font:s,instance:this}),mt[s.id]=s,de(s),s.id},pe=function(t){for(var e=0,n=et.length;e<n;e++){var i=fe.call(this,t[e][0],t[e][1],t[e][2],et[e][3],!0);!1===h&&(A[i]=!0);var r=t[e][0].split("-");de({id:i,fontName:r[0],fontStyle:r[1]||""})}Bt.publish("addFonts",{fonts:mt,dictionary:vt})},ge=function(t){return t.foo=function(){try{return t.apply(this,arguments)}catch(i){var e=i.stack||"";~e.indexOf(" at ")&&(e=e.split(" at ")[1]);var n="Error in function "+e.split("\n")[0].split("<")[0]+": "+i.message;if(!OV.console)throw new Error(n);OV.console.error(n,i),OV.alert&&alert(n)}},t.foo.bar=t,t.foo},me=function(t,e){var n,i,r,s,o,a,l,c,u;if(r=(e=e||{}).sourceEncoding||"Unicode",o=e.outputEncoding,(e.autoencode||o)&&mt[At].metadata&&mt[At].metadata[r]&&mt[At].metadata[r].encoding&&(s=mt[At].metadata[r].encoding,!o&&mt[At].encoding&&(o=mt[At].encoding),!o&&s.codePages&&(o=s.codePages[0]),"string"==typeof o&&(o=s[o]),o)){for(l=!1,a=[],n=0,i=t.length;n<i;n++)(c=o[t.charCodeAt(n)])?a.push(String.fromCharCode(c)):a.push(t[n]),a[n].charCodeAt(0)>>8&&(l=!0);t=a.join("")}for(n=t.length;void 0===l&&0!==n;)t.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return t;for(a=e.noBOM?[]:[254,255],n=0,i=t.length;n<i;n++){if((u=(c=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(u),a.push(c-(u<<8))}return String.fromCharCode.apply(void 0,a)},ve=d.__private__.pdfEscape=d.pdfEscape=function(t,e){return me(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ye=d.__private__.beginPage=function(t){K[++Ct]=[],St[Ct]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},be(Ct),Y(K[U])},we=function(t,e){var i,s,o;switch(n=e||n,"string"==typeof t&&(i=m(t.toLowerCase()),Array.isArray(i)&&(s=i[0],o=i[1])),Array.isArray(t)&&(s=t[0]*dt,o=t[1]*dt),isNaN(s)&&(s=r[0],o=r[1]),(s>14400||o>14400)&&(DV.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),s=Math.min(14400,s),o=Math.min(14400,o)),r=[s,o],n.substr(0,1)){case"l":o>s&&(r=[o,s]);break;case"p":s>o&&(r=[o,s])}ye(r),en(Je),Z(un),0!==gn&&Z(gn+" J"),0!==mn&&Z(mn+" j"),Bt.publish("addPage",{pageNumber:Ct})},_e=function(t){t>0&&t<=Ct&&(K.splice(t,1),St.splice(t,1),Ct--,U>Ct&&(U=Ct),this.setPage(U))},be=function(t){t>0&&t<=Ct&&(U=t)},xe=d.__private__.getNumberOfPages=d.getNumberOfPages=function(){return K.length-1},Ee=function(t,e,n){var i,r=void 0;return n=n||{},t=void 0!==t?t:mt[At].fontName,e=void 0!==e?e:mt[At].fontStyle,i=t.toLowerCase(),void 0!==vt[i]&&void 0!==vt[i][e]?r=vt[i][e]:void 0!==vt[t]&&void 0!==vt[t][e]?r=vt[t][e]:!1===n.disableWarning&&DV.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=vt.times[e])&&(r=vt.times.normal),r},Ce=d.__private__.putInfo=function(){var t=Ot(),e=function(t){return t};for(var n in null!==u&&(e=Pe.encryptor(t,0)),Z("<<"),Z("/Producer ("+ve(e("jsPDF "+pj.version))+")"),ht)ht.hasOwnProperty(n)&&ht[n]&&Z("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+ve(e(ht[n]))+")");Z("/CreationDate ("+ve(e(L))+")"),Z(">>"),Z("endobj")},Se=d.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||Qt;switch(Ot(),Z("<<"),Z("/Type /Catalog"),Z("/Pages "+e+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":Z("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Z("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Z("/OpenAction [3 0 R /Fit]");break;case"original":Z("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+it;"%"===n.substr(n.length-1)&&(it=parseInt(it)/100),"number"==typeof it&&Z("/OpenAction [3 0 R /XYZ null null "+S(it)+"]")}switch(lt||(lt="continuous"),lt){case"continuous":Z("/PageLayout /OneColumn");break;case"single":Z("/PageLayout /SinglePage");break;case"two":case"twoleft":Z("/PageLayout /TwoColumnLeft");break;case"tworight":Z("/PageLayout /TwoColumnRight")}ot&&Z("/PageMode /"+ot),Bt.publish("putCatalog"),Z(">>"),Z("endobj")},Be=d.__private__.putTrailer=function(){Z("trailer"),Z("<<"),Z("/Size "+(H+1)),Z("/Root "+H+" 0 R"),Z("/Info "+(H-1)+" 0 R"),null!==u&&Z("/Encrypt "+Pe.oid+" 0 R"),Z("/ID [ <"+R+"> <"+R+"> ]"),Z(">>")},Te=d.__private__.putHeader=function(){Z("%PDF-"+f),Z("%")},Ie=d.__private__.putXRef=function(){var t="0000000000";Z("xref"),Z("0 "+(H+1)),Z("0000000000 65535 f ");for(var e=1;e<=H;e++)"function"==typeof V[e]?Z((t+V[e]()).slice(-10)+" 00000 n "):void 0!==V[e]?Z((t+V[e]).slice(-10)+" 00000 n "):Z("0000000000 00000 n ")},Fe=d.__private__.buildDocument=function(){X(),Y(j),Bt.publish("buildDocument"),Te(),Kt(),Ae(),he(),null!==u&&se(),Ce(),Se();var t=W;return Ie(),Be(),Z("startxref"),Z(""+t),Z("%%EOF"),Y(K[U]),j.join("\n")},Le=d.__private__.getBlob=function(t){return new Blob([tt(t)],{type:"application/pdf"})},Re=d.output=d.__private__.output=ge((function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return Fe();case"save":d.save(e.filename);break;case"arraybuffer":return tt(Fe());case"blob":return Le(Fe());case"bloburi":case"bloburl":if(void 0!==OV.URL&&"function"==typeof OV.URL.createObjectURL)return OV.URL&&OV.URL.createObjectURL(Le(Fe()))||void 0;DV.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",i=Fe();try{n=VV(i)}catch(f){n=VV(unescape(encodeURIComponent(i)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(OV)){var r="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",s=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(r=e.pdfObjectUrl,s="");var o='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+r+'"'+s+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",a=OV.open();return null!==a&&a.document.write(o),a}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(OV)){var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',c=OV.open();if(null!==c){c.document.write(l);var u=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=e.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(u.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(OV))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',A=OV.open();if(null!==A&&(A.document.write(h),A.document.title=e.filename),A||"undefined"==typeof safari)return A;break;case"datauri":case"dataurl":return OV.document.location.href=this.output("datauristring",e);default:return null}})),Me=function(t){return!0===Array.isArray(Tt)&&Tt.indexOf(t)>-1};switch(i){case"pt":dt=1;break;case"mm":dt=72/25.4;break;case"cm":dt=72/2.54;break;case"in":dt=72;break;case"px":dt=1==Me("px_scaling")?.75:96/72;break;case"pc":case"em":dt=12;break;case"ex":dt=6;break;default:if("number"!=typeof i)throw new Error("Invalid unit: "+i);dt=i}var Pe=null;k(),P();var Ne=function(t){return null!==u?Pe.encryptor(t,0):function(t){return t}},Oe=d.__private__.getPageInfo=d.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:St[t].objId,pageNumber:t,pageContext:St[t]}},ke=d.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in St)if(St[e].objId===t)break;return Oe(e)},De=d.__private__.getCurrentPageInfo=d.getCurrentPageInfo=function(){return{objId:St[U].objId,pageNumber:U,pageContext:St[U]}};d.addPage=function(){return we.apply(this,arguments),this},d.setPage=function(){return be.apply(this,arguments),Y.call(this,K[U]),this},d.insertPage=function(t){return this.addPage(),this.movePage(U,t),this},d.movePage=function(t,e){var n,i;if(t>e){n=K[t],i=St[t];for(var r=t;r>e;r--)K[r]=K[r-1],St[r]=St[r-1];K[e]=n,St[e]=i,this.setPage(e)}else if(t<e){n=K[t],i=St[t];for(var s=t;s<e;s++)K[s]=K[s+1],St[s]=St[s+1];K[e]=n,St[e]=i,this.setPage(e)}return this},d.deletePage=function(){return _e.apply(this,arguments),this},d.__private__.text=d.text=function(t,e,n,i,r){var s,o,a,l,c,u,h,d,f,p=(i=i||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var g=n;n=e,e=t,t=g}if(arguments[3]instanceof Rt==0?(a=arguments[4],l=arguments[5],"object"===HH(h=arguments[3])&&null!==h||("string"==typeof a&&(l=a,a=null),"string"==typeof h&&(l=h,h=null),"number"==typeof h&&(a=h,h=null),i={flags:h,angle:a,align:l})):(E("The transform parameter of text() with a Matrix value"),f=r),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return p;var m="",w=!1,_="number"==typeof i.lineHeightFactor?i.lineHeightFactor:Ze,b=p.internal.scaleFactor;function C(t){return t=t.split("\t").join(Array(i.TabLen||9).join(" ")),ve(t,h)}function S(t){for(var e,n=t.concat(),i=[],r=n.length;r--;)"string"==typeof(e=n.shift())?i.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?i.push(e[0]):i.push([e[0],e[1],e[2]]);return i}function B(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var i,r,s=t.concat(),o=[],a=s.length;a--;)"string"==typeof(i=s.shift())?o.push(e(i)[0]):Array.isArray(i)&&"string"==typeof i[0]&&(r=e(i[0],i[1],i[2]),o.push([r[0],r[1],r[2]]));n=o}return n}var I=!1,F=!0;if("string"==typeof t)I=!0;else if(Array.isArray(t)){var L=t.concat();o=[];for(var R,M=L.length;M--;)("string"!=typeof(R=L.shift())||Array.isArray(R)&&"string"!=typeof R[0])&&(F=!1);I=F}if(!1===I)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var P=nt/p.internal.scaleFactor,N=P*(_-1);switch(i.baseline){case"bottom":n-=N;break;case"top":n+=P-N;break;case"hanging":n+=P-2*N;break;case"middle":n+=P/2-N}if((u=i.maxWidth||0)>0&&("string"==typeof t?t=p.splitTextToSize(t,u):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(p.splitTextToSize(e,u))}),[]))),s={text:t,x:e,y:n,options:i,mutex:{pdfEscape:ve,activeFontKey:At,fonts:mt,activeFontSize:nt}},Bt.publish("preProcessText",s),t=s.text,a=(i=s.options).angle,f instanceof Rt==0&&a&&"number"==typeof a){a*=Math.PI/180,0===i.rotationDirection&&(a=-a),y===v.ADVANCED&&(a=-a);var O=Math.cos(a),k=Math.sin(a);f=new Rt(O,k,-k,O,0,0)}else a&&a instanceof Rt&&(f=a);y!==v.ADVANCED||f||(f=Pt),void 0!==(c=i.charSpace||fn)&&(m+=x(T(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(d=i.horizontalScale)&&(m+=x(100*d)+" Tz\n"),i.lang;var D=-1,U=void 0!==i.renderingMode?i.renderingMode:i.stroke,Q=p.internal.getCurrentPageInfo().pageContext;switch(U){case 0:case!1:case"fill":D=0;break;case 1:case!0:case"stroke":D=1;break;case 2:case"fillThenStroke":D=2;break;case 3:case"invisible":D=3;break;case 4:case"fillAndAddForClipping":D=4;break;case 5:case"strokeAndAddPathForClipping":D=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":D=6;break;case 7:case"addToPathForClipping":D=7}var G=void 0!==Q.usedRenderingMode?Q.usedRenderingMode:-1;-1!==D?m+=D+" Tr\n":-1!==G&&(m+="0 Tr\n"),-1!==D&&(Q.usedRenderingMode=D),l=i.align||"left";var H,V=nt*_,j=p.internal.pageSize.getWidth(),W=mt[At];c=i.charSpace||fn,u=i.maxWidth||0,h=Object.assign({autoencode:!0,noBOM:!0},i.flags);var z=[];if("[object Array]"===Object.prototype.toString.call(t)){var K;o=S(t),"left"!==l&&(H=o.map((function(t){return p.getStringUnitWidth(t,{font:W,charSpace:c,fontSize:nt,doKerning:!1})*nt/b})));var q,$=0;if("right"===l){e-=H[0],t=[],M=o.length;for(var X=0;X<M;X++)0===X?(q=on(e),K=an(n)):(q=T($-H[X]),K=-V),t.push([o[X],q,K]),$=H[X]}else if("center"===l){e-=H[0]/2,t=[],M=o.length;for(var Y=0;Y<M;Y++)0===Y?(q=on(e),K=an(n)):(q=T(($-H[Y])/2),K=-V),t.push([o[Y],q,K]),$=H[Y]}else if("left"===l){t=[],M=o.length;for(var J=0;J<M;J++)t.push(o[J])}else{if("justify"!==l)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');t=[],M=o.length,u=0!==u?u:j;for(var tt=0;tt<M;tt++)K=0===tt?an(n):-V,q=0===tt?on(e):0,tt<M-1?z.push(x(T((u-H[tt])/(o[tt].split(" ").length-1)))):z.push(0),t.push([o[tt],q,K])}}var et="boolean"==typeof i.R2L?i.R2L:st;!0===et&&(t=B(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),s={text:t,x:e,y:n,options:i,mutex:{pdfEscape:ve,activeFontKey:At,fonts:mt,activeFontSize:nt}},Bt.publish("postProcessText",s),t=s.text,w=s.mutex.isHex||!1;var it=mt[At].encoding;"WinAnsiEncoding"!==it&&"StandardEncoding"!==it||(t=B(t,(function(t,e,n){return[C(t),e,n]}))),o=S(t),t=[];for(var rt,ot,at,lt=0,ct=1,ut=Array.isArray(o[0])?ct:lt,ht="",dt=function(t,e,n){var r="";return n instanceof Rt?(n="number"==typeof i.angle?Mt(n,new Rt(1,0,0,1,t,e)):Mt(new Rt(1,0,0,1,t,e),n),y===v.ADVANCED&&(n=Mt(new Rt(1,0,0,-1,0,0),n)),r=n.join(" ")+" Tm\n"):r=x(t)+" "+x(e)+" Td\n",r},ft=0;ft<o.length;ft++){switch(ht="",ut){case ct:at=(w?"<":"(")+o[ft][0]+(w?">":")"),rt=parseFloat(o[ft][1]),ot=parseFloat(o[ft][2]);break;case lt:at=(w?"<":"(")+o[ft]+(w?">":")"),rt=on(e),ot=an(n)}void 0!==z&&void 0!==z[ft]&&(ht=z[ft]+" Tw\n"),0===ft?t.push(ht+dt(rt,ot,f)+at):ut===lt?t.push(ht+at):ut===ct&&t.push(ht+dt(rt,ot,f)+at)}t=ut===lt?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var pt="BT\n/";return pt+=At+" "+nt+" Tf\n",pt+=x(nt*_)+" TL\n",pt+=An+"\n",pt+=m,pt+=t,Z(pt+="ET"),A[At]=!0,p};var Ue=d.__private__.clip=d.clip=function(t){return Z("evenodd"===t?"W*":"W"),this};d.clipEvenOdd=function(){return Ue("evenodd")},d.__private__.discardPath=d.discardPath=function(){return Z("n"),this};var Qe=d.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};d.__private__.setDefaultPathOperation=d.setDefaultPathOperation=function(t){return Qe(t)&&(c=t),this};var Ge=d.__private__.getStyle=d.getStyle=function(t){var e=c;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},He=d.close=function(){return Z("h"),this};d.stroke=function(){return Z("S"),this},d.fill=function(t){return Ve("f",t),this},d.fillEvenOdd=function(t){return Ve("f*",t),this},d.fillStroke=function(t){return Ve("B",t),this},d.fillStrokeEvenOdd=function(t){return Ve("B*",t),this};var Ve=function(t,e){"object"===HH(e)?ze(e,t):Z(t)},je=function(t){null===t||y===v.ADVANCED&&void 0===t||(t=Ge(t),Z(t))};function We(t,e,n,i,r){var s=new fj(e||this.boundingBox,n||this.xStep,i||this.yStep,this.gState,r||this.matrix);s.stream=this.stream;var o=t+"$$"+this.cloneIndex+++"$$";return Nt(o,s),s}var ze=function(t,e){var n=_t[t.key],i=wt[n];if(i instanceof dj)Z("q"),Z(Ke(e)),i.gState&&d.setGState(i.gState),Z(t.matrix.toString()+" cm"),Z("/"+n+" sh"),Z("Q");else if(i instanceof fj){var r=new Rt(1,0,0,-1,0,Bn());t.matrix&&(r=r.multiply(t.matrix||Pt),n=We.call(i,t.key,t.boundingBox,t.xStep,t.yStep,r).id),Z("q"),Z("/Pattern cs"),Z("/"+n+" scn"),i.gState&&d.setGState(i.gState),Z(e),Z("Q")}},Ke=function(t){switch(t){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},qe=d.moveTo=function(t,e){return Z(x(T(t))+" "+x(F(e))+" m"),this},$e=d.lineTo=function(t,e){return Z(x(T(t))+" "+x(F(e))+" l"),this},Xe=d.curveTo=function(t,e,n,i,r,s){return Z([x(T(t)),x(F(e)),x(T(n)),x(F(i)),x(T(r)),x(F(s)),"c"].join(" ")),this};d.__private__.line=d.line=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.line");return y===v.COMPAT?this.lines([[n-t,i-e]],t,e,[1,1],r||"S"):this.lines([[n-t,i-e]],t,e,[1,1]).stroke()},d.__private__.lines=d.lines=function(t,e,n,i,r,s){var o,a,l,c,u,h,A,d,f,p,g,m;if("number"==typeof t&&(m=n,n=e,e=t,t=m),i=i||[1,1],s=s||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(i)||!Qe(r)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for(qe(e,n),o=i[0],a=i[1],c=t.length,p=e,g=n,l=0;l<c;l++)2===(u=t[l]).length?(p=u[0]*o+p,g=u[1]*a+g,$e(p,g)):(h=u[0]*o+p,A=u[1]*a+g,d=u[2]*o+p,f=u[3]*a+g,p=u[4]*o+p,g=u[5]*a+g,Xe(h,A,d,f,p,g));return s&&He(),je(r),this},d.path=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.c;switch(n.op){case"m":qe(i[0],i[1]);break;case"l":$e(i[0],i[1]);break;case"c":Xe.apply(this,i);break;case"h":He()}}return this},d.__private__.rect=d.rect=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.rect");return y===v.COMPAT&&(i=-i),Z([x(T(t)),x(F(e)),x(T(n)),x(T(i)),"re"].join(" ")),je(r),this},d.__private__.triangle=d.triangle=function(t,e,n,i,r,s,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(s)||!Qe(o))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,i-e],[r-n,s-i],[t-r,e-s]],t,e,[1,1],o,!0),this},d.__private__.roundedRect=d.roundedRect=function(t,e,n,i,r,s,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(s)||!Qe(o))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*n),s=Math.min(s,.5*i),this.lines([[n-2*r,0],[r*a,0,r,s-s*a,r,s],[0,i-2*s],[0,s*a,-r*a,s,-r,s],[2*r-n,0],[-r*a,0,-r,-s*a,-r,-s],[0,2*s-i],[0,-s*a,r*a,-s,r,-s]],t+r,e,[1,1],o,!0),this},d.__private__.ellipse=d.ellipse=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Qe(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,o=4/3*(Math.SQRT2-1)*i;return qe(t+n,e),Xe(t+n,e-o,t+s,e-i,t,e-i),Xe(t-s,e-i,t-n,e-o,t-n,e),Xe(t-n,e+o,t-s,e+i,t,e+i),Xe(t+s,e+i,t+n,e+o,t+n,e),je(r),this},d.__private__.circle=d.circle=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||!Qe(i))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,i)},d.setFont=function(t,e,n){return n&&(e=b(e,n)),At=Ee(t,e,{disableWarning:!1}),this};var Ye=d.__private__.getFont=d.getFont=function(){return mt[Ee.apply(d,arguments)]};d.__private__.getFontList=d.getFontList=function(){var t,e,n={};for(t in vt)if(vt.hasOwnProperty(t))for(e in n[t]=[],vt[t])vt[t].hasOwnProperty(e)&&n[t].push(e);return n},d.addFont=function(t,e,n,i,r){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?r=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(n=b(n,i)),r=r||"Identity-H",fe.call(this,t,e,n,r)};var Ze,Je=t.lineWidth||.200025,tn=d.__private__.getLineWidth=d.getLineWidth=function(){return Je},en=d.__private__.setLineWidth=d.setLineWidth=function(t){return Je=t,Z(x(T(t))+" w"),this};d.__private__.setLineDash=pj.API.setLineDash=pj.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return x(T(t))})).join(" "),e=x(T(e)),Z("["+t+"] "+e+" d"),this};var nn=d.__private__.getLineHeight=d.getLineHeight=function(){return nt*Ze};d.__private__.getLineHeight=d.getLineHeight=function(){return nt*Ze};var rn=d.__private__.setLineHeightFactor=d.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(Ze=t),this},sn=d.__private__.getLineHeightFactor=d.getLineHeightFactor=function(){return Ze};rn(t.lineHeight);var on=d.__private__.getHorizontalCoordinate=function(t){return T(t)},an=d.__private__.getVerticalCoordinate=function(t){return y===v.ADVANCED?t:St[U].mediaBox.topRightY-St[U].mediaBox.bottomLeftY-T(t)},ln=d.__private__.getHorizontalCoordinateString=d.getHorizontalCoordinateString=function(t){return x(on(t))},cn=d.__private__.getVerticalCoordinateString=d.getVerticalCoordinateString=function(t){return x(an(t))},un=t.strokeColor||"0 G";d.__private__.getStrokeColor=d.getDrawColor=function(){return Ht(un)},d.__private__.setStrokeColor=d.setDrawColor=function(t,e,n,i){return un=Vt({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"draw",precision:2}),Z(un),this};var hn=t.fillColor||"0 g";d.__private__.getFillColor=d.getFillColor=function(){return Ht(hn)},d.__private__.setFillColor=d.setFillColor=function(t,e,n,i){return hn=Vt({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"fill",precision:2}),Z(hn),this};var An=t.textColor||"0 g",dn=d.__private__.getTextColor=d.getTextColor=function(){return Ht(An)};d.__private__.setTextColor=d.setTextColor=function(t,e,n,i){return An=Vt({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"text",precision:3}),this};var fn=t.charSpace,pn=d.__private__.getCharSpace=d.getCharSpace=function(){return parseFloat(fn||0)};d.__private__.setCharSpace=d.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return fn=t,this};var gn=0;d.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},d.__private__.setLineCap=d.setLineCap=function(t){var e=d.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return gn=e,Z(e+" J"),this};var mn=0;d.__private__.setLineJoin=d.setLineJoin=function(t){var e=d.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return mn=e,Z(e+" j"),this},d.__private__.setLineMiterLimit=d.__private__.setMiterLimit=d.setLineMiterLimit=d.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Z(x(T(t))+" M"),this},d.GState=hj,d.setGState=function(t){(t="string"==typeof t?bt[xt[t]]:vn(null,t)).equals(Et)||(Z("/"+t.id+" gs"),Et=t)};var vn=function(t,e){if(!t||!xt[t]){var n=!1;for(var i in bt)if(bt.hasOwnProperty(i)&&bt[i].equals(e)){n=!0;break}if(n)e=bt[i];else{var r="GS"+(Object.keys(bt).length+1).toString(10);bt[r]=e,e.id=r}return t&&(xt[t]=e.id),Bt.publish("addGState",e),e}};d.addGState=function(t,e){return vn(t,e),this},d.saveGraphicsState=function(){return Z("q"),yt.push({key:At,size:nt,color:An}),this},d.restoreGraphicsState=function(){Z("Q");var t=yt.pop();return At=t.key,nt=t.size,An=t.color,Et=null,this},d.setCurrentTransformationMatrix=function(t){return Z(t.toString()+" cm"),this},d.comment=function(t){return Z("#"+t),this};var yn=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var i=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(t){r=t.toString()}}),this},wn=function(t,e,n,i){yn.call(this,t,e),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var s=i||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(t){isNaN(t)||(s=parseFloat(t))}}),this},_n=function(){this.page=Ct,this.currentPage=U,this.pages=K.slice(0),this.pagesContext=St.slice(0),this.x=ft,this.y=pt,this.matrix=gt,this.width=Cn(U),this.height=Bn(U),this.outputDestination=$,this.id="",this.objectNumber=-1};_n.prototype.restore=function(){Ct=this.page,U=this.currentPage,St=this.pagesContext,K=this.pages,ft=this.x,pt=this.y,gt=this.matrix,Sn(U,this.width),Tn(U,this.height),$=this.outputDestination};var bn=function(t,e,n,i,r){Lt.push(new _n),Ct=U=0,K=[],ft=t,pt=e,gt=r,ye([n,i])},xn=function(t){if(Ft[t])Lt.pop().restore();else{var e=new _n,n="Xo"+(Object.keys(It).length+1).toString(10);e.id=n,Ft[t]=n,It[n]=e,Bt.publish("addFormObject",e),Lt.pop().restore()}};for(var En in d.beginFormObject=function(t,e,n,i,r){return bn(t,e,n,i,r),this},d.endFormObject=function(t){return xn(t),this},d.doFormObject=function(t,e){var n=It[Ft[t]];return Z("q"),Z(e.toString()+" cm"),Z("/"+n.id+" Do"),Z("Q"),this},d.getFormObject=function(t){var e=It[Ft[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},d.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(jV(Le(Fe()),t),"function"==typeof jV.unload&&OV.setTimeout&&setTimeout(jV.unload,911),this):new Promise((function(e,n){try{var i=jV(Le(Fe()),t);"function"==typeof jV.unload&&OV.setTimeout&&setTimeout(jV.unload,911),e(i)}catch(r){n(r.message)}}))},pj.API)pj.API.hasOwnProperty(En)&&("events"===En&&pj.API.events.length?function(t,e){var n,i,r;for(r=e.length-1;-1!==r;r--)n=e[r][0],i=e[r][1],t.subscribe.apply(t,[n].concat("function"==typeof i?[i]:i))}(Bt,pj.API.events):d[En]=pj.API[En]);var Cn=d.getPageWidth=function(t){return(St[t=t||U].mediaBox.topRightX-St[t].mediaBox.bottomLeftX)/dt},Sn=d.setPageWidth=function(t,e){St[t].mediaBox.topRightX=e*dt+St[t].mediaBox.bottomLeftX},Bn=d.getPageHeight=function(t){return(St[t=t||U].mediaBox.topRightY-St[t].mediaBox.bottomLeftY)/dt},Tn=d.setPageHeight=function(t,e){St[t].mediaBox.topRightY=e*dt+St[t].mediaBox.bottomLeftY};return d.internal={pdfEscape:ve,getStyle:Ge,getFont:Ye,getFontSize:rt,getCharSpace:pn,getTextColor:dn,getLineHeight:nn,getLineHeightFactor:sn,getLineWidth:tn,write:J,getHorizontalCoordinate:on,getVerticalCoordinate:an,getCoordinateString:ln,getVerticalCoordinateString:cn,collections:{},newObject:Ot,newAdditionalObject:Ut,newObjectDeferred:kt,newObjectDeferredBegin:Dt,getFilters:jt,putStream:Wt,events:Bt,scaleFactor:dt,pageSize:{getWidth:function(){return Cn(U)},setWidth:function(t){Sn(U,t)},getHeight:function(){return Bn(U)},setHeight:function(t){Tn(U,t)}},encryptionOptions:u,encryption:Pe,getEncryptor:Ne,output:Re,getNumberOfPages:xe,pages:K,out:Z,f2:S,f3:B,getPageInfo:Oe,getPageInfoByObjId:ke,getCurrentPageInfo:De,getPDFVersion:p,Point:yn,Rectangle:wn,Matrix:Rt,hasHotfix:Me},Object.defineProperty(d.internal.pageSize,"width",{get:function(){return Cn(U)},set:function(t){Sn(U,t)},enumerable:!0,configurable:!0}),Object.defineProperty(d.internal.pageSize,"height",{get:function(){return Bn(U)},set:function(t){Tn(U,t)},enumerable:!0,configurable:!0}),pe.call(d,et),At="F1",we(r,n),Bt.publish("initialized"),d}lj.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},lj.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},lj.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},lj.prototype.processOwnerPassword=function(t,e){return oj(ij(e).substr(0,5),t)},lj.prototype.encryptor=function(t,e){var n=ij(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return oj(n,t)}},hj.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||HH(t)!==HH(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return 0===i},pj.API={events:[]},pj.version="2.5.1";var gj=pj.API,mj=1,vj=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},yj=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},wj=function(t){return t.toFixed(2)},_j=function(t){return t.toFixed(5)};gj.__acroform__={};var bj=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},xj=function(t){return t*mj},Ej=function(t){var e=new Hj,n=nW.internal.getHeight(t)||0,i=nW.internal.getWidth(t)||0;return e.BBox=[0,0,Number(wj(i)),Number(wj(n))],e},Cj=gj.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Sj=gj.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Bj=gj.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},Tj=gj.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Bj(t,e-1)},Ij=gj.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return Cj(t,e-1)},Fj=gj.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Sj(t,e-1)},Lj=gj.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=i(s+a)||0,l.upperRight_X=n(r+o)||0,l.upperRight_Y=i(s)||0,[Number(wj(l.lowerLeft_X)),Number(wj(l.lowerLeft_Y)),Number(wj(l.upperRight_X)),Number(wj(l.upperRight_Y))]},Rj=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=Mj(t,n),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+wj(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=Ej(t);return s.scope=t.scope,s.stream=e.join("\n"),s}},Mj=function(t,e){var n=0===t.fontSize?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},r=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map((function(t){return t.split("\n")})):r.map((function(t){return[t]}));var s=n,o=nW.internal.getHeight(t)||0;o=o<0?-o:o;var a=nW.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(e,n,i){if(e+1<r.length){var s=n+" "+r[e+1][0];return Pj(s,t,i).width<=a-4}return!1};s++;t:for(;s>0;){e="",s--;var c,u,h=Pj("3",t,s).height,A=t.multiline?o-s:(o-h)/2,d=A+=2,f=0,p=0,g=0;if(s<=0){e="(...) Tj\n",e+="% Width of Text: "+Pj(e,t,s=12).width+", FieldWidth:"+a+"\n";break}for(var m="",v=0,y=0;y<r.length;y++)if(r.hasOwnProperty(y)){var w=!1;if(1!==r[y].length&&g!==r[y].length-1){if((h+2)*(v+2)+2>o)continue t;m+=r[y][g],w=!0,p=y,y--}else{m=" "==(m+=r[y][g]+" ").substr(m.length-1)?m.substr(0,m.length-1):m;var _=parseInt(y),b=l(_,m,s),x=y>=r.length-1;if(b&&!x){m+=" ",g=0;continue}if(b||x){if(x)p=_;else if(t.multiline&&(h+2)*(v+2)+2>o)continue t}else{if(!t.multiline)continue t;if((h+2)*(v+2)+2>o)continue t;p=_}}for(var E="",C=f;C<=p;C++){var S=r[C];if(t.multiline){if(C===p){E+=S[g]+" ",g=(g+1)%S.length;continue}if(C===f){E+=S[S.length-1]+" ";continue}}E+=S[0]+" "}switch(E=" "==E.substr(E.length-1)?E.substr(0,E.length-1):E,u=Pj(E,t,s).width,t.textAlign){case"right":c=a-u-2;break;case"center":c=(a-u)/2;break;case"left":default:c=2}e+=wj(c)+" "+wj(d)+" Td\n",e+="("+vj(E)+") Tj\n",e+=-wj(c)+" 0 Td\n",d=-(s+2),u=0,f=w?p:p+1,v++,m=""}break}return i.text=e,i.fontSize=s,i},Pj=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},Nj={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},Oj=function(t,e){var n={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===n.type&&t.object===n.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},kj=function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var i=n,r=t[n];e.internal.newObjectDeferredBegin(r.objId,!0),"object"===HH(r)&&"function"==typeof r.putStream&&r.putStream(),delete t[i]}},Dj=function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(jj.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(Nj)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");mj=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new Vj,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){!function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0}(t)})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i.objId=void 0,i.hasAnnotation&&Oj(i,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var n=!t;for(var i in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(i)){var r=t[i],s=[],o=r.Rect;if(r.Rect&&(r.Rect=Lj(r.Rect,e)),e.internal.newObjectDeferredBegin(r.objId,!0),r.DA=nW.createDefaultAppearanceStream(r),"object"===HH(r)&&"function"==typeof r.getKeyValueListForStream&&(s=r.getKeyValueListForStream()),r.Rect=o,r.hasAppearanceStream&&!r.appearanceStreamContent){var a=Rj(r);s.push({key:"AP",value:"<</N "+a+">>"}),e.internal.acroformPlugin.xForms.push(a)}if(r.appearanceStreamContent){var l="";for(var c in r.appearanceStreamContent)if(r.appearanceStreamContent.hasOwnProperty(c)){var u=r.appearanceStreamContent[c];if(l+="/"+c+" ",l+="<<",Object.keys(u).length>=1||Array.isArray(u)){for(var i in u)if(u.hasOwnProperty(i)){var h=u[i];"function"==typeof h&&(h=h.call(e,r)),l+="/"+i+" "+h+" ",e.internal.acroformPlugin.xForms.indexOf(h)>=0||e.internal.acroformPlugin.xForms.push(h)}}else"function"==typeof(h=u)&&(h=h.call(e,r)),l+="/"+i+" "+h,e.internal.acroformPlugin.xForms.indexOf(h)>=0||e.internal.acroformPlugin.xForms.push(h);l+=">>"}s.push({key:"AP",value:"<<\n"+l+">>"})}e.internal.putStream({additionalKeyValues:s,objectId:r.objId}),e.internal.out("endobj")}n&&kj(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}},Uj=gj.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(t){return t};if(Array.isArray(t)){for(var r="[",s=0;s<t.length;s++)switch(0!==s&&(r+=" "),HH(t[s])){case"boolean":case"number":case"object":r+=t[s].toString();break;case"string":"/"!==t[s].substr(0,1)?(void 0!==e&&n&&(i=n.internal.getEncryptor(e)),r+="("+vj(i(t[s].toString()))+")"):r+=t[s].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Qj=function(t,e,n){var i=function(t){return t};return void 0!==e&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+vj(i(t))+")"},Gj=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Gj.prototype.toString=function(){return this.objId+" 0 R"},Gj.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Gj.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var n in e)if(!1===Object.getOwnPropertyDescriptor(this,e[n]).configurable){var i=e[n],r=this[i];r&&(Array.isArray(r)?t.push({key:i,value:Uj(r,this.objId,this.scope)}):r instanceof Gj?(r.scope=this.scope,t.push({key:i,value:r.objId+" 0 R"})):"function"!=typeof r&&t.push({key:i,value:r}))}return t};var Hj=function(){Gj.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};bj(Hj,Gj);var Vj=function(){Gj.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+vj(e(t))+")"}},set:function(e){t=e}})};bj(Vj,Gj);var jj=function t(){Gj.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(e,3))},set:function(t){!0===Boolean(t)?this.F=Ij(e,3):this.F=Fj(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(t){i=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(t){i[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(t){i[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(t){i[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(t){i[3]=t}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof Zj)return;s="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+vj(e(s))+")"},set:function(t){s=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(t){s=t}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(t){o=t}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var c=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===c?50/mj:c},set:function(t){c=t}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(t){u=t}});var h="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!h||this instanceof Zj||this instanceof tW))return Qj(h,this.objId,this.scope)},set:function(t){t=t.toString(),h=t}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof $j==0?Qj(A,this.objId,this.scope):A},set:function(t){t=t.toString(),A=this instanceof $j==0?"("===t.substr(0,1)?yj(t.substr(1,t.length-2)):yj(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof $j==1?yj(A.substr(1,A.length-1)):A},set:function(t){t=t.toString(),A=this instanceof $j==1?"/"+t:t}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof $j==0?Qj(d,this.objId,this.scope):d},set:function(t){t=t.toString(),d=this instanceof $j==0?"("===t.substr(0,1)?yj(t.substr(1,t.length-2)):yj(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof $j==1?yj(d.substr(1,d.length-1)):d},set:function(t){t=t.toString(),d=this instanceof $j==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var f,p=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return p},set:function(t){t=Boolean(t),p=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(f)return f},set:function(t){f=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,1):this.Ff=Fj(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,2):this.Ff=Fj(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,3):this.Ff=Fj(this.Ff,3)}});var g=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==g)return g},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');g=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(g){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:g=2;break;case"center":case 1:g=1;break;case"left":case 0:default:g=0}}})};bj(jj,Gj);var Wj=function(){jj.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Uj(e,this.objId,this.scope)},set:function(t){var n,i;i=[],"string"==typeof(n=t)&&(i=function(t,e,n){n||(n=1);for(var i,r=[];i=e.exec(t);)r.push(i[n]);return r}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,18):this.Ff=Fj(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=Ij(this.Ff,19):this.Ff=Fj(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=Ij(this.Ff,20),e.sort()):this.Ff=Fj(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,22):this.Ff=Fj(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,23):this.Ff=Fj(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,27):this.Ff=Fj(this.Ff,27)}}),this.hasAppearanceStream=!1};bj(Wj,jj);var zj=function(){Wj.call(this),this.fontName="helvetica",this.combo=!1};bj(zj,Wj);var Kj=function(){zj.call(this),this.combo=!0};bj(Kj,zj);var qj=function(){Kj.call(this),this.edit=!0};bj(qj,Kj);var $j=function(){jj.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,15):this.Ff=Fj(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,16):this.Ff=Fj(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,17):this.Ff=Fj(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,26):this.Ff=Fj(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+vj(t(e[n]))+")");return i.push(">>"),i.join("\n")}},set:function(t){"object"===HH(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};bj($j,jj);var Xj=function(){$j.call(this),this.pushButton=!0};bj(Xj,$j);var Yj=function(){$j.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};bj(Yj,$j);var Zj=function(){var t,e;jj.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,n=[];for(e in n.push("<<"),i)n.push("/"+e+" ("+vj(t(i[e]))+")");return n.push(">>"),n.join("\n")},set:function(t){"object"===HH(t)&&(i=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(t){"string"==typeof t&&(i.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=nW.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};bj(Zj,jj),Yj.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Yj.prototype.createOption=function(t){var e=new Zj;return e.Parent=this,e.optionName=t,this.Kids.push(e),iW.call(this.scope,e),e};var Jj=function(){$j.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=nW.CheckBox.createAppearanceStream()};bj(Jj,$j);var tW=function(){jj.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,13):this.Ff=Fj(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,21):this.Ff=Fj(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,23):this.Ff=Fj(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,24):this.Ff=Fj(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,25):this.Ff=Fj(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,26):this.Ff=Fj(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};bj(tW,jj);var eW=function(){tW.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(Tj(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=Ij(this.Ff,14):this.Ff=Fj(this.Ff,14)}}),this.password=!0};bj(eW,tW);var nW={CheckBox:{createAppearanceStream:function(){return{N:{On:nW.CheckBox.YesNormal},D:{On:nW.CheckBox.YesPushDown,Off:nW.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ej(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=Mj(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+wj(nW.internal.getWidth(t))+" "+wj(nW.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+wj(s.fontSize)+" Tf "+r),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=Ej(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),r=[],s=nW.internal.getHeight(t),o=nW.internal.getWidth(t),a=Mj(t,t.caption);return r.push("1 g"),r.push("0 0 "+wj(o)+" "+wj(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+wj(o-1)+" "+wj(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+wj(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=Ej(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wj(nW.internal.getWidth(t))+" "+wj(nW.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:nW.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=nW.RadioButton.Circle.YesNormal,e.D[t]=nW.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ej(t);e.scope=t.scope;var n=[],i=nW.internal.getWidth(t)<=nW.internal.getHeight(t)?nW.internal.getWidth(t)/4:nW.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=nW.internal.Bezier_C,s=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+_j(nW.internal.getWidth(t)/2)+" "+_j(nW.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=Ej(t);e.scope=t.scope;var n=[],i=nW.internal.getWidth(t)<=nW.internal.getHeight(t)?nW.internal.getWidth(t)/4:nW.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*nW.internal.Bezier_C).toFixed(5)),o=Number((i*nW.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+_j(nW.internal.getWidth(t)/2)+" "+_j(nW.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+_j(nW.internal.getWidth(t)/2)+" "+_j(nW.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=Ej(t);e.scope=t.scope;var n=[],i=nW.internal.getWidth(t)<=nW.internal.getHeight(t)?nW.internal.getWidth(t)/4:nW.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*nW.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+_j(nW.internal.getWidth(t)/2)+" "+_j(nW.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:nW.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=nW.RadioButton.Cross.YesNormal,e.D[t]=nW.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ej(t);e.scope=t.scope;var n=[],i=nW.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+wj(nW.internal.getWidth(t)-2)+" "+wj(nW.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(wj(i.x1.x)+" "+wj(i.x1.y)+" m"),n.push(wj(i.x2.x)+" "+wj(i.x2.y)+" l"),n.push(wj(i.x4.x)+" "+wj(i.x4.y)+" m"),n.push(wj(i.x3.x)+" "+wj(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=Ej(t);e.scope=t.scope;var n=nW.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+wj(nW.internal.getWidth(t))+" "+wj(nW.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+wj(nW.internal.getWidth(t)-2)+" "+wj(nW.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(wj(n.x1.x)+" "+wj(n.x1.y)+" m"),i.push(wj(n.x2.x)+" "+wj(n.x2.y)+" l"),i.push(wj(n.x4.x)+" "+wj(n.x4.y)+" m"),i.push(wj(n.x3.x)+" "+wj(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=Ej(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+wj(nW.internal.getWidth(t))+" "+wj(nW.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};nW.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=nW.internal.getWidth(t),n=nW.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},nW.internal.getWidth=function(t){var e=0;return"object"===HH(t)&&(e=xj(t.Rect[2])),e},nW.internal.getHeight=function(t){var e=0;return"object"===HH(t)&&(e=xj(t.Rect[3])),e};var iW=gj.addField=function(t){if(Dj(this,t),!(t instanceof jj))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};function rW(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})}gj.AcroFormChoiceField=Wj,gj.AcroFormListBox=zj,gj.AcroFormComboBox=Kj,gj.AcroFormEditBox=qj,gj.AcroFormButton=$j,gj.AcroFormPushButton=Xj,gj.AcroFormRadioButton=Yj,gj.AcroFormCheckBox=Jj,gj.AcroFormTextField=tW,gj.AcroFormPasswordField=eW,gj.AcroFormAppearance=nW,gj.AcroForm={ChoiceField:Wj,ListBox:zj,ComboBox:Kj,EditBox:qj,Button:$j,PushButton:Xj,RadioButton:Yj,CheckBox:Jj,TextField:tW,PasswordField:eW,Appearance:nW},pj.AcroForm={ChoiceField:Wj,ListBox:zj,ComboBox:Kj,EditBox:qj,Button:$j,PushButton:Xj,RadioButton:Yj,CheckBox:Jj,TextField:tW,PasswordField:eW,Appearance:nW},function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=t.__addimage__.getImageFileTypeByImageData=function(t,i){var r,s,o,a,l,c=e;if("RGBA"===(i=i||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(b(t))for(l in n)for(o=n[l],r=0;r<o.length;r+=1){for(a=!0,s=0;s<o[r].length;s+=1)if(void 0!==o[r][s]&&o[r][s]!==t[s]){a=!1;break}if(!0===a){c=l;break}}else for(l in n)for(o=n[l],r=0;r<o.length;r+=1){for(a=!0,s=0;s<o[r].length;s+=1)if(void 0!==o[r][s]&&o[r][s]!==t.charCodeAt(s)){a=!1;break}if(!0===a){c=l;break}}return c===e&&i!==e&&(c=i),c},r=function t(e){for(var n=this.internal.write,i=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:e.width}),s.push({key:"Height",value:e.height}),e.colorSpace===g.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===g.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var o="",a=0,l=e.transparency.length;a<l;a++)o+=e.transparency[a]+" "+e.transparency[a]+" ";s.push({key:"Mask",value:"["+o+"]"})}void 0!==e.sMask&&s.push({key:"SMask",value:e.objectId+1+" 0 R"});var c=void 0!==e.filter?["/"+e.filter]:void 0;if(i({data:e.data,additionalKeyValues:s,alreadyAppliedFilters:c,objectId:e.objectId}),n("endobj"),"sMask"in e&&void 0!==e.sMask){var u="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,h={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:u,data:e.sMask};"filter"in e&&(h.filter=e.filter),t.call(this,h)}if(e.colorSpace===g.INDEXED){var A=this.internal.newObject();i({data:E(new Uint8Array(e.palette)),objectId:A}),n("endobj")}},s=function(){var t=this.internal.collections.addImage_images;for(var e in t)r.call(this,t[e])},o=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var i in e)n("/I"+(t=e[i]).index,t.objectId,"0","R")},a=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",s),this.internal.events.subscribe("putXobjectDict",o))},l=function(){var t=this.internal.collections.addImage_images;return a.call(this),t},c=function(){return Object.keys(this.internal.collections.addImage_images).length},u=function(e){return"function"==typeof t["process"+e.toUpperCase()]},h=function(t){return"object"===HH(t)&&1===t.nodeType},A=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var i=""+e.getAttribute("src");if(0===i.indexOf("data:image/"))return HV(unescape(i).split("base64,").pop());var r=t.loadFile(i,!0);if(void 0!==r)return r}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;case"JPEG":case"JPG":default:s="image/jpeg"}return HV(e.toDataURL(s,1).split("base64,").pop())}},d=function(t){var e=this.internal.collections.addImage_images;if(e)for(var n in e)if(t===e[n].alias)return e[n]},f=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]},p=function(t,e,n,i,r,s){var o=f.call(this,n,i,r),a=this.internal.getCoordinateString,c=this.internal.getVerticalCoordinateString,u=l.call(this);if(n=o[0],i=o[1],u[r.index]=r,s){s*=Math.PI/180;var h=Math.cos(s),A=Math.sin(s),d=function(t){return t.toFixed(4)},p=[d(h),d(A),d(-1*A),d(h),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,a(t),c(e+i),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([a(n),"0","0",a(i),"0","0","cm"].join(" "))):this.internal.write([a(n),"0","0",a(i),a(t),c(e+i),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},g=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var m=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},v=t.__addimage__.sHashCode=function(t){var e,n,i=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;else if(b(t))for(n=t.byteLength/2,e=0;e<n;e++)i=(i<<5)-i+t[e],i|=0;return i},y=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},w=t.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),n=null;if(2===e.length){var i=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(i)&&(n={mimeType:i[1],charset:i[2],data:e[1]})}return n},_=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return _()&&t instanceof ArrayBuffer};var b=t.__addimage__.isArrayBufferView=function(t){return _()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},x=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n},E=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",n=b(t)?t:new Uint8Array(t),i=0;i<n.length;i+=8192)e+=String.fromCharCode.apply(null,n.subarray(i,i+8192));return e};t.addImage=function(){var t,n,i,r,s,o,l,c,u;if("number"==typeof arguments[1]?(n=e,i=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],l=arguments[5],c=arguments[6],u=arguments[7]):(n=arguments[1],i=arguments[2],r=arguments[3],s=arguments[4],o=arguments[5],l=arguments[6],c=arguments[7],u=arguments[8]),"object"===HH(t=arguments[0])&&!h(t)&&"imageData"in t){var A=t;t=A.imageData,n=A.format||n||e,i=A.x||i||0,r=A.y||r||0,s=A.w||A.width||s,o=A.h||A.height||o,l=A.alias||l,c=A.compression||c,u=A.rotation||A.angle||u}var d=this.internal.getFilters();if(void 0===c&&-1!==d.indexOf("FlateEncode")&&(c="SLOW"),isNaN(i)||isNaN(r))throw new Error("Invalid coordinates passed to jsPDF.addImage");a.call(this);var f=C.call(this,t,n,l,c);return p.call(this,i,r,s,o,f,u),this};var C=function(n,r,s,o){var a,l,f;if("string"==typeof n&&i(n)===e){n=unescape(n);var p=S(n,!1);(""!==p||void 0!==(p=t.loadFile(n,!0)))&&(n=p)}if(h(n)&&(n=A(n,r)),r=i(n,r),!u(r))throw new Error("addImage does not support files of type '"+r+"', please ensure that a plugin for '"+r+"' support is added.");if((null==(f=s)||0===f.length)&&(s=function(t){return"string"==typeof t||b(t)?v(t):b(t.data)?v(t.data):null}(n)),(a=d.call(this,s))||(_()&&(n instanceof Uint8Array||"RGBA"===r||(l=n,n=x(n))),a=this["process"+r.toUpperCase()](n,c.call(this),s,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:m.NONE}(o),l)),!a)throw new Error("An unknown error occurred whilst processing the image.");return a},S=t.__addimage__.convertBase64ToBinaryString=function(t,e){var n;e="boolean"!=typeof e||e;var i,r="";if("string"==typeof t){i=null!==(n=w(t))?n.data:t;try{r=HV(i)}catch(s){if(e)throw y(i)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+s.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return r};t.getImageProperties=function(n){var r,s,o="";if(h(n)&&(n=A(n)),"string"==typeof n&&i(n)===e&&(""===(o=S(n,!1))&&(o=t.loadFile(n)||""),n=o),s=i(n),!u(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!_()||n instanceof Uint8Array||(n=x(n)),!(r=this["process"+s.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return r.fileType=s,r}}(pj.API),
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){if(void 0!==t&&""!=t)return!0};pj.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(t){for(var n,i,r,s=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,a=this.internal.getPageInfoByObjId(t.objId),l=t.pageContext.annotations,c=!1,u=0;u<l.length&&!c;u++)switch((n=l[u]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(c=!0);break;case"reference":case"text":case"freetext":c=!0}if(0!=c){this.internal.write("/Annots [");for(var h=0;h<l.length;h++){n=l[h];var A=this.internal.pdfEscape,d=this.internal.getEncryptor(t.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),m=n.title||"Note";r="<</Type /Annot /Subtype /Text "+(i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y)+"] ")+"/Contents ("+A(g(n.contents))+")",r+=" /Popup "+p.objId+" 0 R",r+=" /P "+a.objId+" 0 R",r+=" /T ("+A(g(m))+") >>",f.content=r;var v=f.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+s(n.bounds.x+30)+" "+o(n.bounds.y+n.bounds.h)+" "+s(n.bounds.x+n.bounds.w+30)+" "+o(n.bounds.y)+"] ")+" /Parent "+v,n.open&&(r+=" /Open true"),r+=" >>",p.content=r,this.internal.write(f.objId,"0 R",p.objId,"0 R");break;case"freetext":i="/Rect ["+s(n.bounds.x)+" "+o(n.bounds.y)+" "+s(n.bounds.x+n.bounds.w)+" "+o(n.bounds.y+n.bounds.h)+"] ";var y=n.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+A(d(n.contents))+")",r+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+y+")",r+=" /Border [0 0 0]",r+=" >>",this.internal.write(r);break;case"link":if(n.options.name){var w=this.annotations._nameMap[n.options.name];n.options.pageNumber=w.page,n.options.top=w.y}else n.options.top||(n.options.top=0);if(i="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",r="",n.options.url)r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+A(d(n.options.url))+") >>";else if(n.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,r+=" /FitV "+n.options.left+"]";break;case"XYZ":default:var _=o(n.options.top);n.options.left=n.options.left||0,void 0===n.options.zoom&&(n.options.zoom=0),r+=" /XYZ "+n.options.left+" "+_+" "+n.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),t.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},t.link=function(t,e,n,i,r){var s=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:o(t),y:a(e),w:o(t+n),h:a(e+i)},options:r,type:"link"})},t.textWithLink=function(t,e,n,i){var r,s,o=this.getTextWidth(t),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==i.maxWidth){s=i.maxWidth;var l=this.splitTextToSize(t,s).length;r=Math.ceil(a*l)}else s=o,r=a;return this.text(t,e,n,i),n+=.2*a,"center"===i.align&&(e-=o/2),"right"===i.align&&(e-=o),this.link(e,n-a,s,r,i),o},t.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor}}(pj.API),
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},o=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},a=t.__arabicParser__.isArabicEndLetter=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(t){return o(t)&&r.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=1};var c=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return o(t)&&s(t)&&4==e[t.charCodeAt(0)].length},h=t.__arabicParser__.resolveLigatures=function(t){var e=0,i=n,r="",s=0;for(e=0;e<t.length;e+=1)void 0!==i[t.charCodeAt(e)]?(s++,"number"==typeof(i=i[t.charCodeAt(e)])&&(r+=String.fromCharCode(i),i=n,s=0),e===t.length-1&&(i=n,r+=t.charAt(e-(s-1)),e-=s-1,s=0)):(i=n,r+=t.charAt(e-s),e-=s,s=0);return r};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==i[t.charCodeAt(0)]};var A=t.__arabicParser__.getCorrectForm=function(t,e,n){return o(t)?!1===s(t)?-1:!c(t)||!o(e)&&!o(n)||!o(n)&&a(e)||a(t)&&!o(e)||a(t)&&l(e)||a(t)&&a(e)?0:u(t)&&o(e)&&!a(e)&&o(n)&&c(n)?3:a(t)||!o(n)?1:2:-1},d=function(t){var n=0,i=0,r=0,s="",a="",l="",c=(t=t||"").split("\\s+"),u=[];for(n=0;n<c.length;n+=1){for(u.push(""),i=0;i<c[n].length;i+=1)s=c[n][i],a=c[n][i-1],l=c[n][i+1],o(s)?(r=A(s,a,l),u[n]+=-1!==r?String.fromCharCode(e[s.charCodeAt(0)][r]):s):u[n]+=s;u[n]=h(u[n])}return u.join(" ")},f=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var i=0;for(n=[],i=0;i<e.length;i+=1)Array.isArray(e[i])?n.push([d(e[i][0]),e[i][1],e[i][2]]):n.push([d(e[i])]);t=n}else t=d(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",f])}(pj.API),pj.API.autoPrint=function(t){var e;switch((t=t||{}).variant=t.variant||"non-conform",t.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}))}return this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(t){i=t}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(pj.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new s,this.internal.__cell__.pages=1},s=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var i=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(t){s=t}});var o=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return o},set:function(t){o=t}}),this};s.prototype.clone=function(){return new s(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},s.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return i.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){i.call(this);var n=(e=e||{}).fontSize||this.getFontSize(),r=e.font||this.getFont(),s=e.scaleFactor||this.internal.scaleFactor,o=0,a=0,l=0,c=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var u=e.maxWidth;u>0?"string"==typeof t?t=this.splitTextToSize(t,u):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(c.splitTextToSize(e,u))}),[])):t=Array.isArray(t)?t:[t];for(var h=0;h<t.length;h++)o<(l=this.getStringUnitWidth(t[h],{font:r})*n)&&(o=l);return 0!==o&&(a=t.length),{w:o/=s,h:Math.max((a*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/s,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new s(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var t;t=arguments[0]instanceof s?arguments[0]:new s(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var r=this.internal.__cell__.lastCell,o=this.internal.__cell__.padding,a=this.internal.__cell__.margins||e,l=this.internal.__cell__.tableHeaderRow,c=this.internal.__cell__.printHeaders;return void 0!==r.lineNumber&&(r.lineNumber===t.lineNumber?(t.x=(r.x||0)+(r.width||0),t.y=r.y||0):r.y+r.height+t.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=a.top,c&&l&&(this.printHeaderRow(t.lineNumber,!0),t.y+=l[0].height)):t.y=r.y+r.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===n?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-o,t.y+o,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+o,{align:"center",baseline:"top",maxWidth:t.width-o-o}):this.text(t.text,t.x+o,t.y+o,{align:"left",baseline:"top",maxWidth:t.width-o-o})),this.internal.__cell__.lastCell=t,this};t.table=function(t,n,l,c,u){if(i.call(this),!l)throw new Error("No data for PDF table.");var h,A,d,f,p=[],g=[],m=[],v={},y={},w=[],_=[],b=(u=u||{}).autoSize||!1,x=!1!==u.printHeaders,E=u.css&&void 0!==u.css["font-size"]?16*u.css["font-size"]:u.fontSize||12,C=u.margins||Object.assign({width:this.getPageWidth()},e),S="number"==typeof u.padding?u.padding:3,B=u.headerBackgroundColor||"#c8c8c8",T=u.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=x,this.internal.__cell__.margins=C,this.internal.__cell__.table_font_size=E,this.internal.__cell__.padding=S,this.internal.__cell__.headerBackgroundColor=B,this.internal.__cell__.headerTextColor=T,this.setFontSize(E),null==c)g=p=Object.keys(l[0]),m=p.map((function(){return"left"}));else if(Array.isArray(c)&&"object"===HH(c[0]))for(p=c.map((function(t){return t.name})),g=c.map((function(t){return t.prompt||t.name||""})),m=c.map((function(t){return t.align||"left"})),h=0;h<c.length;h+=1)y[c[h].name]=c[h].width*(19.049976/25.4);else Array.isArray(c)&&"string"==typeof c[0]&&(g=p=c,m=p.map((function(){return"left"})));if(b||Array.isArray(c)&&"string"==typeof c[0])for(h=0;h<p.length;h+=1){for(v[f=p[h]]=l.map((function(t){return t[f]})),this.setFont(void 0,"bold"),w.push(this.getTextDimensions(g[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),A=v[f],this.setFont(void 0,"normal"),d=0;d<A.length;d+=1)w.push(this.getTextDimensions(A[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);y[f]=Math.max.apply(null,w)+S+S,w=[]}if(x){var I={};for(h=0;h<p.length;h+=1)I[p[h]]={},I[p[h]].text=g[h],I[p[h]].align=m[h];var F=a.call(this,I,y);_=p.map((function(e){return new s(t,n,y[e],F,I[e].text,void 0,I[e].align)})),this.setTableHeaderRow(_),this.printHeaderRow(1,!1)}var L=c.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(h=0;h<l.length;h+=1){"rowStart"in u&&u.rowStart instanceof Function&&u.rowStart({row:h,data:l[h]},this);var R=a.call(this,l[h],y);for(d=0;d<p.length;d+=1){var M=l[h][p[d]];"cellStart"in u&&u.cellStart instanceof Function&&u.cellStart({row:h,col:d,data:M},this),o.call(this,new s(t,n,y[p[d]],R,M,h+2,L[p[d]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=n,this};var a=function(t,e){var n=this.internal.__cell__.padding,i=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(t).map((function(i){var r=t[i];return this.splitTextToSize(r.hasOwnProperty("text")?r.text:r,e[i]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*i/r+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){i.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var r;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var a=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new s(a[0],a[1],a[2],a[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],c=0;c<this.internal.__cell__.tableHeaderRow.length;c+=1){r=this.internal.__cell__.tableHeaderRow[c].clone(),e&&(r.y=this.internal.__cell__.margins.top||0,l.push(r)),r.lineNumber=t;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,r),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(pj.API);var sW={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},oW=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],aW=rW(oW),lW=[100,200,300,400,500,600,700,800,900],cW=rW(lW);function uW(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(t){return sW[t=t||"normal"]?t:"normal"}(t.style),i=function(t){if(!t)return 400;if("number"==typeof t)return t>=100&&t<=900&&t%100==0?t:400;if(/^\d00$/.test(t))return parseInt(t);switch(t){case"bold":return 700;case"normal":default:return 400}}(t.weight),r=function(t){return"number"==typeof aW[t=t||"normal"]?t:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,n,i].join(" ")}}}function hW(t,e,n,i){var r;for(r=n;r>=0&&r<e.length;r+=i)if(t[e[r]])return t[e[r]];for(r=n;r>=0&&r<e.length;r-=i)if(t[e[r]])return t[e[r]]}var AW={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},dW={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function fW(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function pW(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},AW,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(r[(s=uW(e[a])).family]&&(s.family=r[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[i]))throw new Error("Could not find a font-family for the rule '"+fW(s)+"' and default family '"+i+"'.");if(o=function(t,e){if(e[t])return e[t];var n=aW[t],i=n<=aW.normal?-1:1,r=hW(e,oW,n,i);if(!r)throw new Error("Could not find a matching font-stretch value for "+t);return r}(s.stretch,o),o=function(t,e){if(e[t])return e[t];for(var n=sW[t],i=0;i<n.length;++i)if(e[n[i]])return e[n[i]];throw new Error("Could not find a matching font-style for "+t)}(s.style,o),!(o=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var n=cW[t],i=hW(e,lW,n,t<400?-1:1);if(!i)throw new Error("Could not find a matching font-weight for value "+t);return i}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+fW(s)+"'.");return o}function gW(t){return t.trimLeft()}function mW(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function vW(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var yW,wW,_W,bW=["times"];!function(t){var e,n,i,r,s,o,a,l,c,u=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new l,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new o,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new o,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new h(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,c=new u}]);var h=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var i=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return i},set:function(t){i=Boolean(t)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(t){isNaN(t)||(r=t)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(t){isNaN(t)||(s=t)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),c.margin=e}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(t){o=t}});var a=0;Object.defineProperty(this,"lastBreak",{get:function(){return a},set:function(t){a=t}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(t){t instanceof u&&(c=t)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(t){c.path=t}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=A(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=A(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var d=null;function f(t,e){if(null===d){var n=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].forEach((function(t){var i=null;switch(t){case"bold":i={family:n,weight:"bold"};break;case"italic":i={family:n,style:"italic"};break;case"bolditalic":i={family:n,weight:"bold",style:"italic"};break;case"":case"normal":i={family:n}}null!==i&&(i.ref={name:n,style:t},e.push(i))}))})),e}(t.getFontList());d=function(t){for(var e={},n=0;n<t.length;++n){var i=uW(t[n]),r=i.family,s=i.stretch,o=i.style,a=i.weight;e[r]=e[r]||{},e[r][s]=e[r][s]||{},e[r][s][o]=e[r][s][o]||{},e[r][s][o][a]=i}return e}(n.concat(e))}return d}var p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(t){d=null,p=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1],i=(e[2],e[3]),r=e[4],s=(e[5],e[6]),o=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===o?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===o?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var a=function(t){var e,n,i=[],r=t.trim();if(""===r)return bW;if(r in dW)return[dW[r]];for(;""!==r;){switch(n=null,e=(r=gW(r)).charAt(0)){case'"':case"'":n=mW(r.substring(1),e);break;default:n=vW(r)}if(null===n)return bW;if(i.push(n[0]),""!==(r=gW(n[1]))&&","!==r.charAt(0))return bW;r=r.replace(/^,/,"")}return i}(s);if(this.fontFaces){var l=pW(f(this.pdf,this.fontFaces),a.map((function(t){return{family:t,stretch:"normal",weight:i,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var c="";("bold"===i||parseInt(i,10)>=700||"bold"===n)&&(c="bold"),"italic"===n&&(c+="italic"),0===c.length&&(c="normal");for(var u="",h={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},A=0;A<a.length;A++){if(void 0!==this.pdf.internal.getFont(a[A],c,{noFallback:!0,disableWarning:!0})){u=a[A];break}if("bolditalic"===c&&void 0!==this.pdf.internal.getFont(a[A],"bold",{noFallback:!0,disableWarning:!0}))u=a[A],c="bold";else if(void 0!==this.pdf.internal.getFont(a[A],"normal",{noFallback:!0,disableWarning:!0})){u=a[A],c="normal";break}}if(""===u)for(var d=0;d<a.length;d++)if(h[a[d]]){u=h[a[d]];break}u=""===u?"Times":u,this.pdf.setFont(u,c)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,k.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,k.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};h.prototype.setLineDash=function(t){this.lineDash=t},h.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},h.prototype.fill=function(){w.call(this,"fill",!1)},h.prototype.stroke=function(){w.call(this,"stroke",!1)},h.prototype.beginPath=function(){this.path=[{type:"begin"}]},h.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw DV.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new o(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(t,e)},h.prototype.closePath=function(){var t=new o(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===HH(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new o(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(t.x,t.y)},h.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw DV.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new o(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new o(n.x,n.y)},h.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),w.call(this,null,!0)},h.prototype.quadraticCurveTo=function(t,e,n,i){if(isNaN(n)||isNaN(i)||isNaN(t)||isNaN(e))throw DV.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new o(n,i)),s=this.ctx.transform.applyToPoint(new o(t,e));this.path.push({type:"qct",x1:s.x,y1:s.y,x:r.x,y:r.y}),this.ctx.lastPoint=new o(r.x,r.y)},h.prototype.bezierCurveTo=function(t,e,n,i,r,s){if(isNaN(r)||isNaN(s)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw DV.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var a=this.ctx.transform.applyToPoint(new o(r,s)),l=this.ctx.transform.applyToPoint(new o(t,e)),c=this.ctx.transform.applyToPoint(new o(n,i));this.path.push({type:"bct",x1:l.x,y1:l.y,x2:c.x,y2:c.y,x:a.x,y:a.y}),this.ctx.lastPoint=new o(a.x,a.y)},h.prototype.arc=function(t,e,n,i,r,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r))throw DV.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var a=this.ctx.transform.applyToPoint(new o(t,e));t=a.x,e=a.y;var l=this.ctx.transform.applyToPoint(new o(0,n)),c=this.ctx.transform.applyToPoint(new o(0,0));n=Math.sqrt(Math.pow(l.x-c.x,2)+Math.pow(l.y-c.y,2))}Math.abs(r-i)>=2*Math.PI&&(i=0,r=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:i,endAngle:r,counterclockwise:s})},h.prototype.arcTo=function(t,e,n,i,r){throw new Error("arcTo not implemented.")},h.prototype.rect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw DV.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},h.prototype.fillRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw DV.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!d.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,i),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},h.prototype.strokeRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw DV.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");f.call(this)||(this.beginPath(),this.rect(t,e,n,i),this.stroke())},h.prototype.clearRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw DV.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,i))},h.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var i=new u(this.ctx);this.ctxStack.push(this.ctx),this.ctx=i}},h.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},h.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(t){var e,n,i,r;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,n=0,i=0,r=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==s)e=parseInt(s[1]),n=parseInt(s[2]),i=parseInt(s[3]),r=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(s[1]),n=parseInt(s[2]),i=parseInt(s[3]),r=parseFloat(s[4]);else{if(r=1,"string"==typeof t&&"#"!==t.charAt(0)){var o=new WV(t);t=o.ok?o.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,i=t.substring(3,4),i+=i):(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),i=parseInt(i,16)}}return{r:e,g:n,b:i,a:r,style:t}},d=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},f=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};h.prototype.fillText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw DV.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(i=isNaN(i)?void 0:i,!d.call(this)){var r=P(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;T.call(this,{text:t,x:e,y:n,scale:s,angle:r,align:this.textAlign,maxWidth:i})}},h.prototype.strokeText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw DV.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!f.call(this)){i=isNaN(i)?void 0:i;var r=P(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;T.call(this,{text:t,x:e,y:n,scale:s,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:i})}},h.prototype.measureText=function(t){if("string"!=typeof t)throw DV.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,i=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*i/e.internal.scaleFactor,s=function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this};return new s({width:r*=Math.round(96*n/72*1e4)/1e4})},h.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw DV.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new l(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.rotate=function(t){if(isNaN(t))throw DV.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new l(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},h.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw DV.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new l(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},h.prototype.transform=function(t,e,n,i,r,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(s))throw DV.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var o=new l(t,e,n,i,r,s);this.ctx.transform=this.ctx.transform.multiply(o)},h.prototype.setTransform=function(t,e,n,i,r,s){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,i=isNaN(i)?1:i,r=isNaN(r)?0:r,s=isNaN(s)?0:s,this.ctx.transform=new l(t,e,n,i,r,s)};var p=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};h.prototype.drawImage=function(t,e,n,i,r,s,o,c,u){var h=this.pdf.getImageProperties(t),A=1,d=1,f=1,m=1;void 0!==i&&void 0!==c&&(f=c/i,m=u/r,A=h.width/i*c/i,d=h.height/r*u/r),void 0===s&&(s=e,o=n,e=0,n=0),void 0!==i&&void 0===c&&(c=i,u=r),void 0===i&&void 0===c&&(c=h.width,u=h.height);for(var w,b=this.ctx.transform.decompose(),x=P(b.rotate.shx),E=new l,C=(E=(E=(E=E.multiply(b.translate)).multiply(b.skew)).multiply(b.scale)).applyToRectangle(new a(s-e*f,o-n*m,i*A,r*d)),S=g.call(this,C),B=[],T=0;T<S.length;T+=1)-1===B.indexOf(S[T])&&B.push(S[T]);if(y(B),this.autoPaging)for(var I=B[0],F=B[B.length-1],L=I;L<F+1;L++){this.pdf.setPage(L);var R=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],M=1===L?this.posY+this.margin[0]:this.margin[0],N=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],O=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],k=1===L?0:N+(L-2)*O;if(0!==this.ctx.clip_path.length){var D=this.path;w=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(w,this.posX+this.margin[3],-k+M+this.ctx.prevPageLastElemOffset),_.call(this,"fill",!0),this.path=D}var U=JSON.parse(JSON.stringify(C));U=v([U],this.posX+this.margin[3],-k+M+this.ctx.prevPageLastElemOffset)[0];var Q=(L>I||L<F)&&p.call(this);Q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],R,O,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",U.x,U.y,U.w,U.h,null,null,x),Q&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",C.x,C.y,C.w,C.h,null,null,x)};var g=function(t,e,n){var i=[];e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var r=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":i.push(Math.floor((t.y+r)/n)+1);break;case"arc":i.push(Math.floor((t.y+r-t.radius)/n)+1),i.push(Math.floor((t.y+r+t.radius)/n)+1);break;case"qct":var s=N(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);i.push(Math.floor((s.y+r)/n)+1),i.push(Math.floor((s.y+s.h+r)/n)+1);break;case"bct":var o=O(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);i.push(Math.floor((o.y+r)/n)+1),i.push(Math.floor((o.y+o.h+r)/n)+1);break;case"rect":i.push(Math.floor((t.y+r)/n)+1),i.push(Math.floor((t.y+t.h+r)/n)+1)}for(var a=0;a<i.length;a+=1)for(;this.pdf.internal.getNumberOfPages()<i[a];)m.call(this);return i},m=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,i=this.lineCap,r=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=i,this.lineWidth=r,this.lineJoin=s},v=function(t,e,n){for(var i=0;i<t.length;i++)switch(t[i].type){case"bct":t[i].x2+=e,t[i].y2+=n;case"qct":t[i].x1+=e,t[i].y1+=n;case"mt":case"lt":case"arc":default:t[i].x+=e,t[i].y+=n}return t},y=function(t){return t.sort((function(t,e){return t-e}))},w=function(t,e){for(var n,i,r=this.fillStyle,s=this.strokeStyle,o=this.lineCap,a=this.lineWidth,l=Math.abs(a*this.ctx.transform.scaleX),c=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),h=JSON.parse(JSON.stringify(this.path)),A=[],d=0;d<h.length;d++)if(void 0!==h[d].x)for(var f=g.call(this,h[d]),w=0;w<f.length;w+=1)-1===A.indexOf(f[w])&&A.push(f[w]);for(var b=0;b<A.length;b++)for(;this.pdf.internal.getNumberOfPages()<A[b];)m.call(this);if(y(A),this.autoPaging)for(var x=A[0],E=A[A.length-1],C=x;C<E+1;C++){this.pdf.setPage(C),this.fillStyle=r,this.strokeStyle=s,this.lineCap=o,this.lineWidth=l,this.lineJoin=c;var S=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],B=1===C?this.posY+this.margin[0]:this.margin[0],T=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],I=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],F=1===C?0:T+(C-2)*I;if(0!==this.ctx.clip_path.length){var L=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(n,this.posX+this.margin[3],-F+B+this.ctx.prevPageLastElemOffset),_.call(this,t,!0),this.path=L}if(i=JSON.parse(JSON.stringify(u)),this.path=v(i,this.posX+this.margin[3],-F+B+this.ctx.prevPageLastElemOffset),!1===e||0===C){var R=(C>x||C<E)&&p.call(this);R&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],S,I,null).clip().discardPath()),_.call(this,t,e),R&&this.pdf.restoreGraphicsState()}this.lineWidth=a}else this.lineWidth=l,_.call(this,t,e),this.lineWidth=a;this.path=u},_=function(t,e){if(("stroke"!==t||e||!f.call(this))&&("stroke"===t||e||!d.call(this))){for(var n,i,r=[],s=this.path,o=0;o<s.length;o++){var a=s[o];switch(a.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:a,deltas:[],abs:[]});break;case"lt":var l=r.length;if(s[o-1]&&!isNaN(s[o-1].x)&&(n=[a.x-s[o-1].x,a.y-s[o-1].y],l>0))for(;l>=0;l--)if(!0!==r[l-1].close&&!0!==r[l-1].begin){r[l-1].deltas.push(n),r[l-1].abs.push(a);break}break;case"bct":n=[a.x1-s[o-1].x,a.y1-s[o-1].y,a.x2-s[o-1].x,a.y2-s[o-1].y,a.x-s[o-1].x,a.y-s[o-1].y],r[r.length-1].deltas.push(n);break;case"qct":var c=s[o-1].x+2/3*(a.x1-s[o-1].x),u=s[o-1].y+2/3*(a.y1-s[o-1].y),h=a.x+2/3*(a.x1-a.x),A=a.y+2/3*(a.y1-a.y),p=a.x,g=a.y;n=[c-s[o-1].x,u-s[o-1].y,h-s[o-1].x,A-s[o-1].y,p-s[o-1].x,g-s[o-1].y],r[r.length-1].deltas.push(n);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(a)}}i=e?null:"stroke"===t?"stroke":"fill";for(var m=!1,v=0;v<r.length;v++)if(r[v].arc)for(var y=r[v].abs,w=0;w<y.length;w++){var _=y[w];"arc"===_.type?E.call(this,_.x,_.y,_.radius,_.startAngle,_.endAngle,_.counterclockwise,void 0,e,!m):I.call(this,_.x,_.y),m=!0}else if(!0===r[v].close)this.pdf.internal.out("h"),m=!1;else if(!0!==r[v].begin){var b=r[v].start.x,x=r[v].start.y;F.call(this,r[v].deltas,b,x),m=!0}i&&C.call(this,i),e&&S.call(this)}},b=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;case"ideographic":return t;case"alphabetic":default:return t}},x=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};h.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},h.prototype.createPattern=function(){return this.createLinearGradient()},h.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(t,e,n,i,r,s,o,a,l){for(var c=R.call(this,n,i,r,s),u=0;u<c.length;u++){var h=c[u];0===u&&(l?B.call(this,h.x1+t,h.y1+e):I.call(this,h.x1+t,h.y1+e)),L.call(this,t,e,h.x2,h.y2,h.x3,h.y3,h.x4,h.y4)}a?S.call(this):C.call(this,o)},C=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},S=function(){this.pdf.clip(),this.pdf.discardPath()},B=function(t,e){this.pdf.internal.out(n(t)+" "+i(e)+" m")},T=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;case"left":case"start":default:e="left"}var n=this.pdf.getTextDimensions(t.text),i=b.call(this,t.y),r=x.call(this,i)-n.h,s=this.ctx.transform.applyToPoint(new o(t.x,i)),c=this.ctx.transform.decompose(),u=new l;u=(u=(u=u.multiply(c.translate)).multiply(c.skew)).multiply(c.scale);for(var h,A,d,f=this.ctx.transform.applyToRectangle(new a(t.x,i,n.w,n.h)),m=u.applyToRectangle(new a(t.x,r,n.w,n.h)),w=g.call(this,m),E=[],C=0;C<w.length;C+=1)-1===E.indexOf(w[C])&&E.push(w[C]);if(y(E),this.autoPaging)for(var S=E[0],B=E[E.length-1],T=S;T<B+1;T++){this.pdf.setPage(T);var I=1===T?this.posY+this.margin[0]:this.margin[0],F=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[2],R=L-this.margin[0],M=this.pdf.internal.pageSize.width-this.margin[1],P=M-this.margin[3],N=1===T?0:F+(T-2)*R;if(0!==this.ctx.clip_path.length){var O=this.path;h=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=v(h,this.posX+this.margin[3],-1*N+I),_.call(this,"fill",!0),this.path=O}var k=v([JSON.parse(JSON.stringify(m))],this.posX+this.margin[3],-N+I+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(A=this.pdf.internal.getFontSize(),this.pdf.setFontSize(A*t.scale),d=this.lineWidth,this.lineWidth=d*t.scale);var D="text"!==this.autoPaging;if(D||k.y+k.h<=L){if(D||k.y>=I&&k.x<=M){var U=D?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||M-k.x)[0],Q=v([JSON.parse(JSON.stringify(f))],this.posX+this.margin[3],-N+I+this.ctx.prevPageLastElemOffset)[0],G=D&&(T>S||T<B)&&p.call(this);G&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],P,R,null).clip().discardPath()),this.pdf.text(U,Q.x,Q.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),G&&this.pdf.restoreGraphicsState()}}else k.y<L&&(this.ctx.prevPageLastElemOffset+=L-k.y);t.scale>=.01&&(this.pdf.setFontSize(A),this.lineWidth=d)}else t.scale>=.01&&(A=this.pdf.internal.getFontSize(),this.pdf.setFontSize(A*t.scale),d=this.lineWidth,this.lineWidth=d*t.scale),this.pdf.text(t.text,s.x+this.posX,s.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(A),this.lineWidth=d)},I=function(t,e,r,s){r=r||0,s=s||0,this.pdf.internal.out(n(t+r)+" "+i(e+s)+" l")},F=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},L=function(t,n,i,o,a,l,c,u){this.pdf.internal.out([e(r(i+t)),e(s(o+n)),e(r(a+t)),e(s(l+n)),e(r(c+t)),e(s(u+n)),"c"].join(" "))},R=function(t,e,n,i){for(var r=2*Math.PI,s=Math.PI/2;e>n;)e-=r;var o=Math.abs(n-e);o<r&&i&&(o=r-o);for(var a=[],l=i?-1:1,c=e;o>1e-5;){var u=c+l*Math.min(o,s);a.push(M.call(this,t,c,u)),o-=Math.abs(u-c),c=u}return a},M=function(t,e,n){var i=(n-e)/2,r=t*Math.cos(i),s=t*Math.sin(i),o=r,a=-s,l=o*o+a*a,c=l+o*r+a*s,u=4/3*(Math.sqrt(2*l*c)-c)/(o*s-a*r),h=o-u*a,A=a+u*o,d=h,f=-A,p=i+e,g=Math.cos(p),m=Math.sin(p);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:h*g-A*m,y2:h*m+A*g,x3:d*g-f*m,y3:d*m+f*g,x4:t*Math.cos(n),y4:t*Math.sin(n)}},P=function(t){return 180*t/Math.PI},N=function(t,e,n,i,r,s){var o=t+.5*(n-t),l=e+.5*(i-e),c=r+.5*(n-r),u=s+.5*(i-s),h=Math.min(t,r,o,c),A=Math.max(t,r,o,c),d=Math.min(e,s,l,u),f=Math.max(e,s,l,u);return new a(h,d,A-h,f-d)},O=function(t,e,n,i,r,s,o,l){var c,u,h,A,d,f,p,g,m,v,y,w,_,b,x=n-t,E=i-e,C=r-n,S=s-i,B=o-r,T=l-s;for(u=0;u<41;u++)m=(p=(h=t+(c=u/40)*x)+c*((d=n+c*C)-h))+c*(d+c*(r+c*B-d)-p),v=(g=(A=e+c*E)+c*((f=i+c*S)-A))+c*(f+c*(s+c*T-f)-g),0==u?(y=m,w=v,_=m,b=v):(y=Math.min(y,m),w=Math.min(w,v),_=Math.max(_,m),b=Math.max(b,v));return new a(Math.round(y),Math.round(w),Math.round(_-y),Math.round(b-w))},k=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,n=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(pj.API),
/**
 * @license
 * jsPDF filters PlugIn
 * Copyright (c) 2014 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){var e,n,i,r,s,o,a,l,c,u;for(n=[],i=0,r=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;r>i;i+=4)0!==(s=(t.charCodeAt(i)<<24)+(t.charCodeAt(i+1)<<16)+(t.charCodeAt(i+2)<<8)+t.charCodeAt(i+3))?(o=(s=((s=((s=((s=(s-(u=s%85))/85)-(c=s%85))/85)-(l=s%85))/85)-(a=s%85))/85)%85,n.push(o+33,a+33,l+33,c+33,u+33)):n.push(122);return function(t,e){for(var n=e;n>0;n--)t.pop()}(n,e.length),String.fromCharCode.apply(String,n)+"~>"},n=function(t){var e,n,i,r,s,o=String,a="length",l=255,c="charCodeAt",u="slice",h="replace";for(t[u](-2),t=t[u](0,-2)[h](/\s/g,"")[h]("z","!!!!!"),i=[],r=0,s=(t+=e="uuuuu"[u](t[a]%5||5))[a];s>r;r+=5)n=52200625*(t[c](r)-33)+614125*(t[c](r+1)-33)+7225*(t[c](r+2)-33)+85*(t[c](r+3)-33)+(t[c](r+4)-33),i.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(t,e){for(var n=e;n>0;n--)t.pop()}(i,e[a]),o.fromCharCode.apply(o,i)},i=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",i=0;i<t.length;i+=2)n+=String.fromCharCode("0x"+(t[i]+t[i+1]));return n},r=function(t){for(var e=new Uint8Array(t.length),n=t.length;n--;)e[n]=t.charCodeAt(n);return(e=PV(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,s){var o=0,a=t||"",l=[];for("string"==typeof(s=s||[])&&(s=[s]),o=0;o<s.length;o+=1)switch(s[o]){case"ASCII85Decode":case"/ASCII85Decode":a=n(a),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":a=e(a),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":a=i(a),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":a=a.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":a=r(a),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+s[o]+'" is not implemented')}return{data:a,reverseChain:l.reverse().join(" ")}}}(pj.API),
/**
 * @license
 * jsPDF fileloading PlugIn
 * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.loadFile=function(t,e,n){return function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var i=void 0;try{i=function(t,e,n){var i=new XMLHttpRequest,r=0,s=function(t){var e=t.length,n=[],i=String.fromCharCode;for(r=0;r<e;r+=1)n.push(i(255&t.charCodeAt(r)));return n.join("")};if(i.open("GET",t,!e),i.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(i.onload=function(){200===i.status?n(s(this.responseText)):n(void 0)}),i.send(null),e&&200===i.status)return s(i.responseText)}(t,e,n)}catch(r){}return i}(t,e,n)},t.loadImageFile=t.loadFile}(pj.API),function(t){function e(){return(OV.html2canvas?Promise.resolve(OV.html2canvas):Promise.resolve().then((()=>Q5))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function n(){return(OV.DOMPurify?Promise.resolve(OV.DOMPurify):Promise.resolve().then((()=>q4))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var i=function(t){var e=HH(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},r=function(t,e){var n=document.createElement(t);for(var i in e.className&&(n.className=e.className),e.innerHTML&&e.dompurify&&(n.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)n.style[i]=e.style[i];return n},s=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),i=t.convert(Promise.resolve(),n);return(i=i.setProgress(1,t,1,[t])).set(e)};(s.prototype=Object.create(Promise.prototype)).constructor=s,s.convert=function(t,e){return t.__proto__=e||s.prototype,t},s.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},s.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(i(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(n).then((function(e){return this.set({src:r("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},s.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},s.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,n){for(var i=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||i.appendChild(t(r,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(i.value=e.value),i.addEventListener("load",(function(){i.scrollTop=e.scrollTop,i.scrollLeft=e.scrollLeft}),!0)),i}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},s.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},s.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,n=this.opt.fontFaces,i="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,r=Object.assign({async:!0,allowTaint:!0,scale:i,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=n,n)for(var s=0;s<n.length;++s){var o=n[s],a=o.src.find((function(t){return"truetype"===t.format}));a&&e.addFont(a.url,o.ref.name,o.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,e.context2d.save(!0),t(this.prop.container,r)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},s.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},s.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},s.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},s.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},s.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},s.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},s.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},s.prototype.set=function(t){if("object"!==i(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in s.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},s.prototype.get=function(t,e){return this.then((function(){var n=t in s.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},s.prototype.setMargin=function(t){return this.then((function(){switch(i(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},s.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||pj.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},s.prototype.setProgress=function(t,e,n,i){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=i&&(this.progress.stack=i),this.progress.ratio=this.progress.val/this.progress.state,this},s.prototype.updateProgress=function(t,e,n,i){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)},s.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},s.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var i=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:s.convert(Object.assign({},this),Promise.prototype),r=n.call(i,t,e);return s.convert(r,this.__proto__)},s.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},s.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},s.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return s.convert(e,this)},s.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},s.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},s.prototype.using=s.prototype.set,s.prototype.saveAs=s.prototype.save,s.prototype.export=s.prototype.output,s.prototype.run=s.prototype.then,pj.getPageSize=function(t,e,n){if("object"===HH(t)){var i=t;t=i.orientation,e=i.unit||e,n=i.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var r,s=(""+n).toLowerCase(),o={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":r=1;break;case"mm":r=72/25.4;break;case"cm":r=72/2.54;break;case"in":r=72;break;case"px":r=.75;break;case"pc":case"em":r=12;break;case"ex":r=6;break;default:throw"Invalid unit: "+e}var a,l=0,c=0;if(o.hasOwnProperty(s))l=o[s][1]/r,c=o[s][0]/r;else try{l=n[1],c=n[0]}catch(u){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",c>l&&(a=c,c=l,l=a);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",l>c&&(a=c,c=l,l=a)}return{width:c,height:l,unit:e,k:r,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(uW):null;var n=new s(e);return e.worker?n:n.from(t).doCallback()}}(pj.API),pj.API.addJS=function(t){return _W=t,this.internal.events.subscribe("postPutResources",(function(){yW=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(yW+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),wW=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+_W+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==yW&&void 0!==wW&&this.internal.out("/Names <</JavaScript "+yW+" 0 R>>")})),this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e;t.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),r=0;r<i.length;r++){var s=i[r],o=n.exec(s);if(null!=o){var a=o[1];t.internal.newObjectDeferredBegin(a,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,c=[];for(r=0;r<l;r++){var u=t.internal.newObject();c.push(u);var h=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var A=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<c.length;r++)t.internal.write("(page_"+(r+1)+")"+c[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+A+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var i={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<e.children.length;i++){var r=e.children[i];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(e)),i>0&&this.line("/Prev "+this.makeRef(e.children[i-1])),i<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[i+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var s=this.count=this.count_r({count:0},r);if(s>0&&this.line("/Count "+s),r.options&&r.options.pageNumber){var o=t.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var a=0;a<e.children.length;a++)this.renderItems(e.children[a])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(pj.API),
/**
 * @license
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,n,i,r,s,o){var a,l=this.decode.DCT_DECODE,c=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(a=function(t){for(var n,i=256*t.charCodeAt(4)+t.charCodeAt(5),r=t.length,s={width:0,height:0,numcomponents:1},o=4;o<r;o+=2){if(o+=i,-1!==e.indexOf(t.charCodeAt(o+1))){n=256*t.charCodeAt(o+5)+t.charCodeAt(o+6),s={width:256*t.charCodeAt(o+7)+t.charCodeAt(o+8),height:n,numcomponents:t.charCodeAt(o+9)};break}i=256*t.charCodeAt(o+2)+t.charCodeAt(o+3)}return s}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}c={data:t,width:a.width,height:a.height,colorSpace:o,bitsPerComponent:8,filter:l,index:n,alias:i}}return c}}(pj.API);var xW,EW,CW,SW,BW,TW=function(){var t,e,n;function i(t){var e,n,i,r,s,o,a,l,c,u,h,A,d,f;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(e=this.readUInt32(),c=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),r=this.readUInt16()||100,o.delay=1e3*s/r,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===c&&(this.pos+=4,e-=4),t=(null!=o?o.data:void 0)||this.imgData,A=0;0<=e?A<e:A>e;0<=e?++A:--A)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if((u=i-this.transparency.indexed.length)>0)for(d=0;0<=u?d<u:d>u;0<=u?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":a=(h=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,h.slice(0,a)),this.text[l]=String.fromCharCode.apply(String,h.slice(a+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(f=this.colorType)||6===f,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),i=0,r=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function s(s,o,a,l){var c,u,h,A,d,f,p,g,m,v,y,w,_,b,x,E,C,S,B,T,I,F=Math.ceil((r.width-s)/a),L=Math.ceil((r.height-o)/l),R=r.width==F&&r.height==L;for(b=e*F,w=R?n:new Uint8Array(b*L),f=t.length,_=0,u=0;_<L&&i<f;){switch(t[i++]){case 0:for(A=C=0;C<b;A=C+=1)w[u++]=t[i++];break;case 1:for(A=S=0;S<b;A=S+=1)c=t[i++],d=A<e?0:w[u-e],w[u++]=(c+d)%256;break;case 2:for(A=B=0;B<b;A=B+=1)c=t[i++],h=(A-A%e)/e,x=_&&w[(_-1)*b+h*e+A%e],w[u++]=(x+c)%256;break;case 3:for(A=T=0;T<b;A=T+=1)c=t[i++],h=(A-A%e)/e,d=A<e?0:w[u-e],x=_&&w[(_-1)*b+h*e+A%e],w[u++]=(c+Math.floor((d+x)/2))%256;break;case 4:for(A=I=0;I<b;A=I+=1)c=t[i++],h=(A-A%e)/e,d=A<e?0:w[u-e],0===_?x=E=0:(x=w[(_-1)*b+h*e+A%e],E=h&&w[(_-1)*b+(h-1)*e+A%e]),p=d+x-E,g=Math.abs(p-d),v=Math.abs(p-x),y=Math.abs(p-E),m=g<=v&&g<=y?d:v<=y?x:E,w[u++]=(c+m)%256;break;default:throw new Error("Invalid filter algorithm: "+t[i-1])}if(!R){var M=((o+_*l)*r.width+s)*e,P=_*b;for(A=0;A<F;A+=1){for(var N=0;N<e;N+=1)n[M++]=w[P++];M+=(a-1)*e}}_++}}return t=NV(t),1==r.interlaceMethod?(s(0,0,8,8),s(4,0,8,8),s(0,4,4,8),s(2,0,4,4),s(0,2,2,4),s(1,0,2,2),s(0,1,1,2)):s(0,0,1,1),n},i.prototype.decodePalette=function(){var t,e,n,i,r,s,o,a,l;for(n=this.palette,s=this.transparency.indexed||[],r=new Uint8Array((s.length||0)+n.length),i=0,t=0,e=o=0,a=n.length;o<a;e=o+=3)r[i++]=n[e],r[i++]=n[e+1],r[i++]=n[e+2],r[i++]=null!=(l=s[t++])?l:255;return r},i.prototype.copyToImageData=function(t,e){var n,i,r,s,o,a,l,c,u,h,A;if(i=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(A=this._decodedPalette)?A:this._decodedPalette=this.decodePalette(),i=4,n=!0),c=(r=t.data||t).length,o=u||e,s=a=0,1===i)for(;s<c;)l=u?4*e[s/4]:a,h=o[l++],r[s++]=h,r[s++]=h,r[s++]=h,r[s++]=n?o[l++]:255,a=l;else for(;s<c;)l=u?4*e[s/4]:a,r[s++]=o[l++],r[s++]=o[l++],r[s++]=o[l++],r[s++]=n?o[l++]:255,a=l},i.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var r=function(){if("[object Window]"===Object.prototype.toString.call(OV)){try{e=OV.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return!1};return r(),t=function(t){var i;if(!0===r())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(e){var n,i,r,s,o,a,l,c;if(this.animation){for(c=[],i=o=0,a=(l=this.animation.frames).length;o<a;i=++o)n=l[i],r=e.createImageData(n.width,n.height),s=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(r,s),n.imageData=r,c.push(n.image=t(r));return c}},i.prototype.renderFrame=function(t,e){var n,i,r;return n=(i=this.animation.frames)[e],r=i[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?t.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&t.putImageData(r.imageData,r.xOffset,r.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},i.prototype.animate=function(t){var e,n,i,r,s,o,a=this;return n=0,o=this.animation,r=o.numFrames,i=o.frames,s=o.numPlays,(e=function(){var o,l;if(o=n++%r,l=i[o],a.renderFrame(t,o),r>1&&n/r<s)return a.animation._timeout=setTimeout(e,l.delay)})()},i.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},i.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},i}();
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
/**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function IW(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++],s=r>>7,o=1<<1+(7&r);t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var c=!0,u=[],h=0,A=null,d=0,f=null;for(this.width=n,this.height=i;c&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,f=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(0===B)break;e+=B}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var p=t[e++];h=t[e++]|t[e++]<<8,A=t[e++],0==(1&p)&&(A=null),d=p>>2&7,e++;break;case 254:for(;;){if(!((B=t[e++])>=0))throw Error("Invalid block size");if(0===B)break;e+=B}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,w=t[e++],_=w>>6&1,b=1<<1+(7&w),x=a,E=l,C=!1;w>>7&&(C=!0,x=e,E=b,e+=3*b);var S=e;for(e++;;){var B;if(!((B=t[e++])>=0))throw Error("Invalid block size");if(0===B)break;e+=B}u.push({x:g,y:m,width:v,height:y,has_local_palette:C,palette_offset:x,palette_size:E,data_offset:S,data_length:e-S,transparent_index:A,interlaced:!!_,delay:h,disposal:d});break;case 59:c=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return f},this.frameInfo=function(t){if(t<0||t>=u.length)throw new Error("Frame index out of range.");return u[t]},this.decodeAndBlitFrameBGRA=function(e,i){var r=this.frameInfo(e),s=r.width*r.height,o=new Uint8Array(s);FW(t,r.data_offset,o,s);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var c=r.width,u=n-c,h=c,A=4*(r.y*n+r.x),d=4*((r.y+r.height)*n+r.x),f=A,p=4*u;!0===r.interlaced&&(p+=4*n*7);for(var g=8,m=0,v=o.length;m<v;++m){var y=o[m];if(0===h&&(h=c,(f+=p)>=d&&(p=4*u+4*n*(g-1),f=A+(c+u)*(g<<1),g>>=1)),y===l)f+=4;else{var w=t[a+3*y],_=t[a+3*y+1],b=t[a+3*y+2];i[f++]=b,i[f++]=_,i[f++]=w,i[f++]=255}--h}},this.decodeAndBlitFrameRGBA=function(e,i){var r=this.frameInfo(e),s=r.width*r.height,o=new Uint8Array(s);FW(t,r.data_offset,o,s);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var c=r.width,u=n-c,h=c,A=4*(r.y*n+r.x),d=4*((r.y+r.height)*n+r.x),f=A,p=4*u;!0===r.interlaced&&(p+=4*n*7);for(var g=8,m=0,v=o.length;m<v;++m){var y=o[m];if(0===h&&(h=c,(f+=p)>=d&&(p=4*u+4*n*(g-1),f=A+(c+u)*(g<<1),g>>=1)),y===l)f+=4;else{var w=t[a+3*y],_=t[a+3*y+1],b=t[a+3*y+2];i[f++]=w,i[f++]=_,i[f++]=b,i[f++]=255}--h}}}function FW(t,e,n,i){for(var r=t[e++],s=1<<r,o=s+1,a=o+1,l=r+1,c=(1<<l)-1,u=0,h=0,A=0,d=t[e++],f=new Int32Array(4096),p=null;;){for(;u<16&&0!==d;)h|=t[e++]<<u,u+=8,1===d?d=t[e++]:--d;if(u<l)break;var g=h&c;if(h>>=l,u-=l,g!==s){if(g===o)break;for(var m=g<a?g:p,v=0,y=m;y>s;)y=f[y]>>8,++v;var w=y;if(A+v+(m!==g?1:0)>i)return void DV.log("Warning, gif stream longer than expected.");n[A++]=w;var _=A+=v;for(m!==g&&(n[A++]=w),y=m;v--;)y=f[y],n[--_]=255&y,y>>=8;null!==p&&a<4096&&(f[a++]=p<<8|w,a>=c+1&&l<12&&(++l,c=c<<1|1)),p=g}else a=o+1,c=(1<<(l=r+1))-1,p=null}return A!==i&&DV.log("Warning, gif stream shorter than expected."),n
/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/}function LW(t){var e,n,i,r,s,o=Math.floor,a=new Array(64),l=new Array(64),c=new Array(64),u=new Array(64),h=new Array(65535),A=new Array(65535),d=new Array(64),f=new Array(64),p=[],g=0,m=7,v=new Array(64),y=new Array(64),w=new Array(64),_=new Array(256),b=new Array(2048),x=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],S=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],B=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],T=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],I=[0,1,2,3,4,5,6,7,8,9,10,11],F=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],L=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function R(t,e){for(var n=0,i=0,r=new Array,s=1;s<=16;s++){for(var o=1;o<=t[s];o++)r[e[i]]=[],r[e[i]][0]=n,r[e[i]][1]=s,i++,n++;n*=2}return r}function M(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(g|=1<<m),n--,--m<0&&(255==g?(P(255),P(0)):P(g),m=7,g=0)}function P(t){p.push(t)}function N(t){P(t>>8&255),P(255&t)}function O(t,e,n,i,r){for(var s,o=r[0],a=r[240],l=function(t,e){var n,i,r,s,o,a,l,c,u,h,A=0;for(u=0;u<8;++u){n=t[A],i=t[A+1],r=t[A+2],s=t[A+3],o=t[A+4],a=t[A+5],l=t[A+6];var f=n+(c=t[A+7]),p=n-c,g=i+l,m=i-l,v=r+a,y=r-a,w=s+o,_=s-o,b=f+w,x=f-w,E=g+v,C=g-v;t[A]=b+E,t[A+4]=b-E;var S=.707106781*(C+x);t[A+2]=x+S,t[A+6]=x-S;var B=.382683433*((b=_+y)-(C=m+p)),T=.5411961*b+B,I=1.306562965*C+B,F=.707106781*(E=y+m),L=p+F,R=p-F;t[A+5]=R+T,t[A+3]=R-T,t[A+1]=L+I,t[A+7]=L-I,A+=8}for(A=0,u=0;u<8;++u){n=t[A],i=t[A+8],r=t[A+16],s=t[A+24],o=t[A+32],a=t[A+40],l=t[A+48];var M=n+(c=t[A+56]),P=n-c,N=i+l,O=i-l,k=r+a,D=r-a,U=s+o,Q=s-o,G=M+U,H=M-U,V=N+k,j=N-k;t[A]=G+V,t[A+32]=G-V;var W=.707106781*(j+H);t[A+16]=H+W,t[A+48]=H-W;var z=.382683433*((G=Q+D)-(j=O+P)),K=.5411961*G+z,q=1.306562965*j+z,$=.707106781*(V=D+O),X=P+$,Y=P-$;t[A+40]=Y+K,t[A+24]=Y-K,t[A+8]=X+q,t[A+56]=X-q,A++}for(u=0;u<64;++u)h=t[u]*e[u],d[u]=h>0?h+.5|0:h-.5|0;return d}(t,e),c=0;c<64;++c)f[x[c]]=l[c];var u=f[0]-n;n=f[0],0==u?M(i[0]):(M(i[A[s=32767+u]]),M(h[s]));for(var p=63;p>0&&0==f[p];)p--;if(0==p)return M(o),n;for(var g,m=1;m<=p;){for(var v=m;0==f[m]&&m<=p;)++m;var y=m-v;if(y>=16){g=y>>4;for(var w=1;w<=g;++w)M(a);y&=15}s=32767+f[m],M(r[(y<<4)+A[s]]),M(h[s]),m++}return 63!=p&&M(o),n}function k(t){t=Math.min(Math.max(t,1),100),s!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=o((e[n]*t+50)/100);i=Math.min(Math.max(i,1),255),a[x[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var h=o((r[s]*t+50)/100);h=Math.min(Math.max(h,1),255),l[x[s]]=h}for(var A=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,f=0;f<8;f++)for(var p=0;p<8;p++)c[d]=1/(a[x[d]]*A[f]*A[p]*8),u[d]=1/(l[x[d]]*A[f]*A[p]*8),d++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),s=t)}this.encode=function(t,s){s&&k(s),p=new Array,g=0,m=7,N(65496),N(65504),N(16),P(74),P(70),P(73),P(70),P(0),P(1),P(1),P(0),N(1),N(1),P(0),P(0),function(){N(65499),N(132),P(0);for(var t=0;t<64;t++)P(a[t]);P(1);for(var e=0;e<64;e++)P(l[e])}(),function(t,e){N(65472),N(17),P(8),N(e),N(t),P(3),P(1),P(17),P(0),P(2),P(17),P(1),P(3),P(17),P(1)}(t.width,t.height),function(){N(65476),N(418),P(0);for(var t=0;t<16;t++)P(E[t+1]);for(var e=0;e<=11;e++)P(C[e]);P(16);for(var n=0;n<16;n++)P(S[n+1]);for(var i=0;i<=161;i++)P(B[i]);P(1);for(var r=0;r<16;r++)P(T[r+1]);for(var s=0;s<=11;s++)P(I[s]);P(17);for(var o=0;o<16;o++)P(F[o+1]);for(var a=0;a<=161;a++)P(L[a])}(),N(65498),N(12),P(3),P(1),P(0),P(2),P(17),P(3),P(17),P(0),P(63),P(0);var o=0,h=0,A=0;g=0,m=7,this.encode.displayName="_encode_";for(var d,f,_,x,R,D,U,Q,G,H=t.data,V=t.width,j=t.height,W=4*V,z=0;z<j;){for(d=0;d<W;){for(R=W*z+d,U=-1,Q=0,G=0;G<64;G++)D=R+(Q=G>>3)*W+(U=4*(7&G)),z+Q>=j&&(D-=W*(z+1+Q-j)),d+U>=W&&(D-=d+U-W+4),f=H[D++],_=H[D++],x=H[D++],v[G]=(b[f]+b[_+256>>0]+b[x+512>>0]>>16)-128,y[G]=(b[f+768>>0]+b[_+1024>>0]+b[x+1280>>0]>>16)-128,w[G]=(b[f+1280>>0]+b[_+1536>>0]+b[x+1792>>0]>>16)-128;o=O(v,c,o,e,i),h=O(y,u,h,n,r),A=O(w,u,A,n,r),d+=32}z+=8}if(m>=0){var K=[];K[1]=m+1,K[0]=(1<<m+1)-1,M(K)}return N(65497),new Uint8Array(p)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)_[e]=t(e)}(),e=R(E,C),n=R(T,I),i=R(S,B),r=R(F,L),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var i=t;i<e;i++)A[32767+i]=n,h[32767+i]=[],h[32767+i][1]=n,h[32767+i][0]=i;for(var r=-(e-1);r<=-t;r++)A[32767+r]=n,h[32767+r]=[],h[32767+r][1]=n,h[32767+r][0]=e-1+r;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)b[t]=19595*t,b[t+256>>0]=38470*t,b[t+512>>0]=7471*t+32768,b[t+768>>0]=-11059*t,b[t+1024>>0]=-21709*t,b[t+1280>>0]=32768*t+8421375,b[t+1536>>0]=-27439*t,b[t+1792>>0]=-5329*t}(),k(t)}
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function RW(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function MW(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var i=0;4>i;i++)if(t[e+i]!=n.charCodeAt(i))return!0;return!1}function i(t,e,n,i,r){for(var s=0;s<r;s++)t[e+s]=n[i+s]}function r(t,e,n,i){for(var r=0;r<i;r++)t[e+r]=n}function s(t){return new Int32Array(t)}function o(t,e){for(var n=[],i=0;i<t;i++)n.push(new e);return n}function a(t,e){var n=[];return function t(n,i,r){for(var s=r[i],o=0;o<s&&(n.push(r.length>i+1?[]:new e),!(r.length<i+1));o++)t(n[o],i+1,r)}(n,0,t),n}var l=function(){var t=this;function l(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function c(t,n,i,r,s){e(!(r%i));do{t[n+(r-=i)]=s}while(0<r)}function u(t,n,i,r,o){if(e(2328>=o),512>=o)var a=s(512);else if(null==(a=s(o)))return 0;return function(t,n,i,r,o,a){var u,A,d=n,f=1<<i,p=s(16),g=s(16);for(e(0!=o),e(null!=r),e(null!=t),e(0<i),A=0;A<o;++A){if(15<r[A])return 0;++p[r[A]]}if(p[0]==o)return 0;for(g[1]=0,u=1;15>u;++u){if(p[u]>1<<u)return 0;g[u+1]=g[u]+p[u]}for(A=0;A<o;++A)u=r[A],0<r[A]&&(a[g[u]++]=A);if(1==g[15])return(r=new h).g=0,r.value=a[0],c(t,d,1,f,r),f;var m,v=-1,y=f-1,w=0,_=1,b=1,x=1<<i;for(A=0,u=1,o=2;u<=i;++u,o<<=1){if(_+=b<<=1,0>(b-=p[u]))return 0;for(;0<p[u];--p[u])(r=new h).g=u,r.value=a[A++],c(t,d+w,o,x,r),w=l(w,u)}for(u=i+1,o=2;15>=u;++u,o<<=1){if(_+=b<<=1,0>(b-=p[u]))return 0;for(;0<p[u];--p[u]){if(r=new h,(w&y)!=v){for(d+=x,m=1<<(v=u)-i;15>v&&!(0>=(m-=p[v]));)++v,m<<=1;f+=x=1<<(m=v-i),t[n+(v=w&y)].g=m+i,t[n+v].value=d-n-v}r.g=u-i,r.value=a[A++],c(t,d+(w>>i),o,x,r),w=l(w,u)}}return _!=2*g[15]-1?0:f}(t,n,i,r,o,a)}function h(){this.value=this.g=0}function A(){this.value=this.g=0}function d(){this.G=o(5,h),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Un,A)}function f(t,n,i,r){e(null!=t),e(null!=n),e(2147483648>r),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=i,t.Jd=n,t.Yc=i+r,t.Zc=4<=r?i+r-4+1:i,S(t)}function p(t,e){for(var n=0;0<e--;)n|=T(t,128)<<e;return n}function g(t,e){var n=p(t,e);return B(t)?-n:n}function m(t,n,i,r){var s,o=0;for(e(null!=t),e(null!=n),e(4294967288>r),t.Sb=r,t.Ra=0,t.u=0,t.h=0,4<r&&(r=4),s=0;s<r;++s)o+=n[i+s]<<8*s;t.Ra=o,t.bb=r,t.oa=n,t.pa=i}function v(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<Hn-8>>>0,++t.bb,t.u-=8;x(t)&&(t.h=1,t.u=0)}function y(t,n){if(e(0<=n),!t.h&&n<=Gn){var i=b(t)&Qn[n];return t.u+=n,v(t),i}return t.h=1,t.u=0}function w(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function _(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function b(t){return t.Ra>>>(t.u&Hn-1)>>>0}function x(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>Hn}function E(t,e){t.u=e,t.h=x(t)}function C(t){t.u>=Vn&&(e(t.u>=Vn),v(t))}function S(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function B(t){return p(t,1)}function T(t,e){var n=t.Ca;0>t.b&&S(t);var i=t.b,r=n*e>>>8,s=(t.I>>>i>r)+0;for(s?(n-=r,t.I-=r+1<<i>>>0):n=r+1,i=n,r=0;256<=i;)r+=8,i>>=8;return i=7^r+jn[i],t.b-=i,t.Ca=(n<<i)-1,s}function I(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=n>>0&255}function F(t,e){return t[e+0]<<0|t[e+1]<<8}function L(t,e){return F(t,e)|t[e+2]<<16}function R(t,e){return F(t,e)|F(t,e+2)<<16}function M(t,n){var i=1<<n;return e(null!=t),e(0<n),t.X=s(i),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function P(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),i(n.X,0,t.X,0,1<<n.Xa)}function N(){this.X=[],this.Xa=this.Mb=0}function O(t,n,i,r){e(null!=i),e(null!=r);var s=i[0],o=r[0];return 0==s&&(s=(t*o+n/2)/n),0==o&&(o=(n*s+t/2)/t),0>=s||0>=o?0:(i[0]=s,r[0]=o,1)}function k(t,e){return t+(1<<e)-1>>>e}function D(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function U(e,n){t[n]=function(n,i,r,s,o,a,l){var c;for(c=0;c<o;++c){var u=t[e](a[l+c-1],r,s+c);a[l+c]=D(n[i+c],u)}}}function Q(){this.ud=this.hd=this.jd=0}function G(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function H(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function V(t,e){return H(t+(t-e+.5>>1))}function j(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function W(t,e,n,i,r,s,o){for(i=s[o-1],n=0;n<r;++n)s[o+n]=i=D(t[e+n],i)}function z(t,e,n,i,r){var s;for(s=0;s<n;++s){var o=t[e+s],a=o>>8&255,l=16711935&(l=(l=16711935&o)+((a<<16)+a));i[r+s]=(4278255360&o)+l>>>0}}function K(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function q(t,e,n,i,r,s){var o;for(o=0;o<i;++o){var a=e[n+o],l=a>>>8,c=a,u=255&(u=(u=a>>>16)+((t.jd<<24>>24)*(l<<24>>24)>>>5));c=255&(c=(c+=(t.hd<<24>>24)*(l<<24>>24)>>>5)+((t.ud<<24>>24)*(u<<24>>24)>>>5)),r[s+o]=(4278255360&a)+(u<<16)+c}}function $(e,n,i,r,s){t[n]=function(t,e,n,i,o,a,l,c,u){for(i=l;i<c;++i)for(l=0;l<u;++l)o[a++]=s(n[r(t[e++])])},t[e]=function(e,n,o,a,l,c,u){var h=8>>e.b,A=e.Ea,d=e.K[0],f=e.w;if(8>h)for(e=(1<<e.b)-1,f=(1<<h)-1;n<o;++n){var p,g=0;for(p=0;p<A;++p)p&e||(g=r(a[l++])),c[u++]=s(d[g&f]),g>>=h}else t["VP8LMapColor"+i](a,l,d,f,c,u,n,o,A)}}function X(t,e,n,i,r){for(n=e+n;e<n;){var s=t[e++];i[r++]=s>>16&255,i[r++]=s>>8&255,i[r++]=s>>0&255}}function Y(t,e,n,i,r){for(n=e+n;e<n;){var s=t[e++];i[r++]=s>>16&255,i[r++]=s>>8&255,i[r++]=s>>0&255,i[r++]=s>>24&255}}function Z(t,e,n,i,r){for(n=e+n;e<n;){var s=(o=t[e++])>>16&240|o>>12&15,o=o>>0&240|o>>28&15;i[r++]=s,i[r++]=o}}function J(t,e,n,i,r){for(n=e+n;e<n;){var s=(o=t[e++])>>16&248|o>>13&7,o=o>>5&224|o>>3&31;i[r++]=s,i[r++]=o}}function tt(t,e,n,i,r){for(n=e+n;e<n;){var s=t[e++];i[r++]=s>>0&255,i[r++]=s>>8&255,i[r++]=s>>16&255}}function et(t,e,n,r,s,o){if(0==o)for(n=e+n;e<n;)I(r,((o=t[e++])[0]>>24|o[1]>>8&65280|o[2]<<8&16711680|o[3]<<24)>>>0),s+=32;else i(r,s,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function it(t){return t==Vi||t==ji||t==Wi||t==zi}function rt(){this.eb=[],this.size=this.A=this.fb=0}function st(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ot(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new st,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ct(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ut(t,e){var n=t.T,r=e.ba.f.RGBA,s=r.eb,o=r.fb+t.ka*r.A,a=mr[e.ba.S],l=t.y,c=t.O,u=t.f,h=t.N,A=t.ea,d=t.W,f=e.cc,p=e.dc,g=e.Mc,m=e.Nc,v=t.ka,y=t.ka+t.T,w=t.U,_=w+1>>1;for(0==v?a(l,c,null,null,u,h,A,d,u,h,A,d,s,o,null,null,w):(a(e.ec,e.fc,l,c,f,p,g,m,u,h,A,d,s,o-r.A,s,o,w),++n);v+2<y;v+=2)f=u,p=h,g=A,m=d,h+=t.Rc,d+=t.Rc,o+=2*r.A,a(l,(c+=2*t.fa)-t.fa,l,c,f,p,g,m,u,h,A,d,s,o-r.A,s,o,w);return c+=t.fa,t.j+y<t.o?(i(e.ec,e.fc,l,c,w),i(e.cc,e.dc,u,h,_),i(e.Mc,e.Nc,A,d,_),n--):1&y||a(l,c,null,null,u,h,A,d,u,h,A,d,s,o+r.A,null,null,w),n}function ht(t,n,i){var r=t.F,s=[t.J];if(null!=r){var o=t.U,a=n.ba.S,l=a==Qi||a==Wi;n=n.ba.f.RGBA;var c=[0],u=t.ka;c[0]=t.T,t.Kb&&(0==u?--c[0]:(--u,s[0]-=t.width),t.j+t.ka+t.T==t.o&&(c[0]=t.o-t.j-u));var h=n.eb;u=n.fb+u*n.A,t=Ci(r,s[0],t.width,o,c,h,u+(l?0:3),n.A),e(i==c),t&&it(a)&&xi(h,u,l,o,c,n.A)}return 0}function At(t){var e=t.ma,n=e.ba.S,i=11>n,r=n==ki||n==Ui||n==Qi||n==Gi||12==n||it(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!On(e.Oa,t,r?11:12))return 0;if(r&&it(n)&&yn(),t.da)alert("todo:use_scaling");else{if(i){if(e.Ib=ct,t.Kb){if(n=t.U+1>>1,e.memory=s(t.U+2*n),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ut,yn()}}else alert("todo:EmitYUV");r&&(e.Jb=ht,i&&mn())}if(i&&!Lr){for(t=0;256>t;++t)Rr[t]=89858*(t-128)+Sr>>Cr,Nr[t]=-22014*(t-128)+Sr,Pr[t]=-45773*(t-128),Mr[t]=113618*(t-128)+Sr>>Cr;for(t=Br;t<Tr;++t)e=76283*(t-16)+Sr>>Cr,Or[t-Br]=Wt(e,255),kr[t-Br]=Wt(e+8>>4,15);Lr=1}return 1}function dt(t){var n=t.ma,i=t.U,r=t.T;return e(!(1&t.ka)),0>=i||0>=r?0:(i=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,i),n.Dc+=i,1)}function ft(t){t.ma.memory=null}function pt(t,e,n,i){return 47!=y(t,8)?0:(e[0]=y(t,14)+1,n[0]=y(t,14)+1,i[0]=y(t,1),0!=y(t,3)?0:!t.h)}function gt(t,e){if(4>t)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+y(e,n)+1}function mt(t,e){return 120<e?e-120:1<=(n=((n=Zi[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function vt(t,e,n){var i=b(n),r=t[e+=255&i].g-8;return 0<r&&(E(n,n.u+8),i=b(n),e+=t[e].value,e+=i&(1<<r)-1),E(n,n.u+t[e].g),t[e].value}function yt(t,n,i){return i.g+=t.g,i.value+=t.value<<n>>>0,e(8>=i.g),t.g}function wt(t,n,i){var r=t.xc;return e((n=0==r?0:t.vc[t.md*(i>>r)+(n>>r)])<t.Wb),t.Ya[n]}function _t(t,n,r,s){var o=t.ab,a=t.c*n,l=t.C;n=l+n;var c=r,u=s;for(s=t.Ta,r=t.Ua;0<o--;){var h=t.gc[o],A=l,d=n,f=c,p=u,g=(u=s,c=r,h.Ea);switch(e(A<d),e(d<=h.nc),h.hc){case 2:Kn(f,p,(d-A)*g,u,c);break;case 0:var m=A,v=d,y=u,w=c,_=(S=h).Ea;0==m&&(Wn(f,p,null,null,1,y,w),W(f,p+1,0,0,_-1,y,w+1),p+=_,w+=_,++m);for(var b=1<<S.b,x=b-1,E=k(_,S.b),C=S.K,S=S.w+(m>>S.b)*E;m<v;){var B=C,T=S,I=1;for(zn(f,p,y,w-_,1,y,w);I<_;){var F=(I&~x)+b;F>_&&(F=_),(0,Zn[B[T++]>>8&15])(f,p+ +I,y,w+I-_,F-I,y,w+I),I=F}p+=_,w+=_,++m&x||(S+=E)}d!=h.nc&&i(u,c-g,u,c+(d-A-1)*g,g);break;case 1:for(g=f,v=p,_=(f=h.Ea)-(w=f&~(y=(p=1<<h.b)-1)),m=k(f,h.b),b=h.K,h=h.w+(A>>h.b)*m;A<d;){for(x=b,E=h,C=new Q,S=v+w,B=v+f;v<S;)K(x[E++],C),Jn(C,g,v,p,u,c),v+=p,c+=p;v<B&&(K(x[E++],C),Jn(C,g,v,_,u,c),v+=_,c+=_),++A&y||(h+=m)}break;case 3:if(f==u&&p==c&&0<h.b){for(v=u,f=g=c+(d-A)*g-(w=(d-A)*k(h.Ea,h.b)),p=u,y=c,m=[],w=(_=w)-1;0<=w;--w)m[w]=p[y+w];for(w=_-1;0<=w;--w)v[f+w]=m[w];qn(h,A,d,u,g,u,c)}else qn(h,A,d,f,p,u,c)}c=s,u=r}u!=r&&i(s,r,c,u,a)}function bt(t,n){var i=t.V,r=t.Ba+t.c*t.C,s=n-t.C;if(e(n<=t.l.o),e(16>=s),0<s){var o=t.l,a=t.Ta,l=t.Ua,c=o.width;if(_t(t,s,i,r),s=l=[l],e((i=t.C)<(r=n)),e(o.v<o.va),r>o.o&&(r=o.o),i<o.j){var u=o.j-i;i=o.j,s[0]+=u*c}if(i>=r?i=0:(s[0]+=4*o.v,o.ka=i-o.j,o.U=o.va-o.v,o.T=r-i,i=1),i){if(l=l[0],11>(i=t.ca).S){var h=i.f.RGBA,A=(r=i.S,s=o.U,o=o.T,u=h.eb,h.A),d=o;for(h=h.fb+t.Ma*h.A;0<d--;){var f=a,p=l,g=s,m=u,v=h;switch(r){case Oi:ti(f,p,g,m,v);break;case ki:ei(f,p,g,m,v);break;case Vi:ei(f,p,g,m,v),xi(m,v,0,g,1,0);break;case Di:ri(f,p,g,m,v);break;case Ui:et(f,p,g,m,v,1);break;case ji:et(f,p,g,m,v,1),xi(m,v,0,g,1,0);break;case Qi:et(f,p,g,m,v,0);break;case Wi:et(f,p,g,m,v,0),xi(m,v,1,g,1,0);break;case Gi:ni(f,p,g,m,v);break;case zi:ni(f,p,g,m,v),Ei(m,v,g,1,0);break;case Hi:ii(f,p,g,m,v);break;default:e(0)}l+=c,h+=A}t.Ma+=o}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=i.height)}}t.C=n,e(t.C<=t.i)}function xt(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,i=t.Ya[e].H;if(0<n[1][i[1]+0].g||0<n[2][i[2]+0].g||0<n[3][i[3]+0].g)return 0}return 1}function Et(t,n,i,r,s,o){if(0!=t.Z){var a=t.qd,l=t.rd;for(e(null!=gr[t.Z]);n<i;++n)gr[t.Z](a,l,r,s,r,s,o),a=r,l=s,s+=o;t.qd=a,t.rd=l}}function Ct(t,n){var i=t.l.ma,r=0==i.Z||1==i.Z?t.l.j:t.C;if(r=t.C<r?r:t.C,e(n<=t.l.o),n>r){var s=t.l.width,o=i.ca,a=i.tb+s*r,l=t.V,c=t.Ba+t.c*r,u=t.gc;e(1==t.ab),e(3==u[0].hc),Xn(u[0],r,n,l,c,o,a),Et(i,r,n,o,a,s)}t.C=t.Ma=n}function St(t,n,i,r,s,o,a){var l=t.$/r,c=t.$%r,u=t.m,h=t.s,A=i+t.$,d=A;s=i+r*s;var f=i+r*o,p=280+h.ua,g=t.Pb?l:16777216,m=0<h.ua?h.Wa:null,v=h.wc,y=A<f?wt(h,c,l):null;e(t.C<o),e(f<=s);var w=!1;t:for(;;){for(;w||A<f;){var _=0;if(l>=g){var S=A-i;e((g=t).Pb),g.wd=g.m,g.xd=S,0<g.s.ua&&P(g.s.Wa,g.s.vb),g=l+tr}if(c&v||(y=wt(h,c,l)),e(null!=y),y.Qb&&(n[A]=y.qb,w=!0),!w)if(C(u),y.jc){_=u,S=n;var B=A,T=y.pd[b(_)&Un-1];e(y.jc),256>T.g?(E(_,_.u+T.g),S[B]=T.value,_=0):(E(_,_.u+T.g-256),e(256<=T.value),_=T.value),0==_&&(w=!0)}else _=vt(y.G[0],y.H[0],u);if(u.h)break;if(w||256>_){if(!w)if(y.nd)n[A]=(y.qb|_<<8)>>>0;else{if(C(u),w=vt(y.G[1],y.H[1],u),C(u),S=vt(y.G[2],y.H[2],u),B=vt(y.G[3],y.H[3],u),u.h)break;n[A]=(B<<24|w<<16|_<<8|S)>>>0}if(w=!1,++A,++c>=r&&(c=0,++l,null!=a&&l<=o&&!(l%16)&&a(t,l),null!=m))for(;d<A;)_=n[d++],m.X[(506832829*_&4294967295)>>>m.Mb]=_}else if(280>_){if(_=gt(_-256,u),S=vt(y.G[4],y.H[4],u),C(u),S=mt(r,S=gt(S,u)),u.h)break;if(A-i<S||s-A<_)break t;for(B=0;B<_;++B)n[A+B]=n[A+B-S];for(A+=_,c+=_;c>=r;)c-=r,++l,null!=a&&l<=o&&!(l%16)&&a(t,l);if(e(A<=s),c&v&&(y=wt(h,c,l)),null!=m)for(;d<A;)_=n[d++],m.X[(506832829*_&4294967295)>>>m.Mb]=_}else{if(!(_<p))break t;for(w=_-280,e(null!=m);d<A;)_=n[d++],m.X[(506832829*_&4294967295)>>>m.Mb]=_;_=A,e(!(w>>>(S=m).Xa)),n[_]=S.X[w],w=!0}w||e(u.h==x(u))}if(t.Pb&&u.h&&A<s)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&P(t.s.vb,t.s.Wa);else{if(u.h)break t;null!=a&&a(t,l>o?o:l),t.a=0,t.$=A-i}return 1}return t.a=3,0}function Bt(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),t.vb=null,e(null!=t)}function Tt(){var e=new an;return null==e?null:(e.a=0,e.xb=pr,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),Kn=z,Jn=q,ti=X,ei=Y,ni=Z,ii=J,ri=tt,t.VP8LMapColor32b=$n,t.VP8LMapColor8b=Yn,e)}function It(t,n,i,a,l){var c=1,A=[t],f=[n],p=a.m,g=a.s,m=null,v=0;t:for(;;){if(i)for(;c&&y(p,1);){var w=A,_=f,x=a,S=1,B=x.m,T=x.gc[x.ab],I=y(B,2);if(x.Oc&1<<I)c=0;else{switch(x.Oc|=1<<I,T.hc=I,T.Ea=w[0],T.nc=_[0],T.K=[null],++x.ab,e(4>=x.ab),I){case 0:case 1:T.b=y(B,3)+2,S=It(k(T.Ea,T.b),k(T.nc,T.b),0,x,T.K),T.K=T.K[0];break;case 3:var F,L=y(B,8)+1,R=16<L?0:4<L?1:2<L?2:3;if(w[0]=k(T.Ea,R),T.b=R,F=S=It(L,1,0,x,T.K)){var P,N=L,O=T,U=1<<(8>>O.b),Q=s(U);if(null==Q)F=0;else{var G=O.K[0],H=O.w;for(Q[0]=O.K[0][0],P=1;P<1*N;++P)Q[P]=D(G[H+P],Q[P-1]);for(;P<4*U;++P)Q[P]=0;O.K[0]=null,O.K[0]=Q,F=1}}S=F;break;case 2:break;default:e(0)}c=S}}if(A=A[0],f=f[0],c&&y(p,1)&&!(c=1<=(v=y(p,4))&&11>=v)){a.a=3;break t}var V;if(V=c)e:{var j,W,z,K=a,q=A,$=f,X=v,Y=i,Z=K.m,J=K.s,tt=[null],et=1,nt=0,it=Ji[X];n:for(;;){if(Y&&y(Z,1)){var rt=y(Z,3)+2,st=k(q,rt),ot=k($,rt),at=st*ot;if(!It(st,ot,0,K,tt))break n;for(tt=tt[0],J.xc=rt,j=0;j<at;++j){var lt=tt[j]>>8&65535;tt[j]=lt,lt>=et&&(et=lt+1)}}if(Z.h)break n;for(W=0;5>W;++W){var ct=$i[W];!W&&0<X&&(ct+=1<<X),nt<ct&&(nt=ct)}var ut=o(et*it,h),ht=et,At=o(ht,d);if(null==At)var dt=null;else e(65536>=ht),dt=At;var ft=s(nt);if(null==dt||null==ft||null==ut){K.a=1;break n}var pt=ut;for(j=z=0;j<et;++j){var gt=dt[j],mt=gt.G,vt=gt.H,wt=0,_t=1,bt=0;for(W=0;5>W;++W){ct=$i[W],mt[W]=pt,vt[W]=z,!W&&0<X&&(ct+=1<<X);i:{var xt,Et=ct,Ct=K,Tt=ft,Ft=pt,Lt=z,Rt=0,Mt=Ct.m,Pt=y(Mt,1);if(r(Tt,0,0,Et),Pt){var Nt=y(Mt,1)+1,Ot=y(Mt,1),kt=y(Mt,0==Ot?1:8);Tt[kt]=1,2==Nt&&(Tt[kt=y(Mt,8)]=1);var Dt=1}else{var Ut=s(19),Qt=y(Mt,4)+4;if(19<Qt){Ct.a=3;var Gt=0;break i}for(xt=0;xt<Qt;++xt)Ut[Yi[xt]]=y(Mt,3);var Ht=void 0,Vt=void 0,jt=Ct,Wt=Ut,zt=Et,Kt=Tt,qt=0,$t=jt.m,Xt=8,Yt=o(128,h);r:for(;u(Yt,0,7,Wt,19);){if(y($t,1)){var Zt=2+2*y($t,3);if((Ht=2+y($t,Zt))>zt)break r}else Ht=zt;for(Vt=0;Vt<zt&&Ht--;){C($t);var Jt=Yt[0+(127&b($t))];E($t,$t.u+Jt.g);var te=Jt.value;if(16>te)Kt[Vt++]=te,0!=te&&(Xt=te);else{var ee=16==te,ne=te-16,ie=qi[ne],re=y($t,Ki[ne])+ie;if(Vt+re>zt)break r;for(var se=ee?Xt:0;0<re--;)Kt[Vt++]=se}}qt=1;break r}qt||(jt.a=3),Dt=qt}(Dt=Dt&&!Mt.h)&&(Rt=u(Ft,Lt,8,Tt,Et)),Dt&&0!=Rt?Gt=Rt:(Ct.a=3,Gt=0)}if(0==Gt)break n;if(_t&&1==Xi[W]&&(_t=0==pt[z].g),wt+=pt[z].g,z+=Gt,3>=W){var oe,ae=ft[0];for(oe=1;oe<ct;++oe)ft[oe]>ae&&(ae=ft[oe]);bt+=ae}}if(gt.nd=_t,gt.Qb=0,_t&&(gt.qb=(mt[3][vt[3]+0].value<<24|mt[1][vt[1]+0].value<<16|mt[2][vt[2]+0].value)>>>0,0==wt&&256>mt[0][vt[0]+0].value&&(gt.Qb=1,gt.qb+=mt[0][vt[0]+0].value<<8)),gt.jc=!gt.Qb&&6>bt,gt.jc){var le,ce=gt;for(le=0;le<Un;++le){var ue=le,he=ce.pd[ue],Ae=ce.G[0][ce.H[0]+ue];256<=Ae.value?(he.g=Ae.g+256,he.value=Ae.value):(he.g=0,he.value=0,ue>>=yt(Ae,8,he),ue>>=yt(ce.G[1][ce.H[1]+ue],16,he),ue>>=yt(ce.G[2][ce.H[2]+ue],0,he),yt(ce.G[3][ce.H[3]+ue],24,he))}}}J.vc=tt,J.Wb=et,J.Ya=dt,J.yc=ut,V=1;break e}V=0}if(!(c=V)){a.a=3;break t}if(0<v){if(g.ua=1<<v,!M(g.Wa,v)){a.a=1,c=0;break t}}else g.ua=0;var de=a,fe=A,pe=f,ge=de.s,me=ge.xc;if(de.c=fe,de.i=pe,ge.md=k(fe,me),ge.wc=0==me?-1:(1<<me)-1,i){a.xb=fr;break t}if(null==(m=s(A*f))){a.a=1,c=0;break t}c=(c=St(a,m,0,A,f,f,null))&&!p.h;break t}return c?(null!=l?l[0]=m:(e(null==m),e(i)),a.$=0,i||Bt(g)):Bt(g),c}function Ft(t,n){var i=t.c*t.i,r=i+n+16*n;return e(t.c<=n),t.V=s(r),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+i+n,1)}function Lt(t,n){var i=t.C,r=n-i,s=t.V,o=t.Ba+t.c*i;for(e(n<=t.l.o);0<r;){var a=16<r?16:r,l=t.l.ma,c=t.l.width,u=c*a,h=l.ca,A=l.tb+c*i,d=t.Ta,f=t.Ua;_t(t,a,s,o),Si(d,f,h,A,u),Et(l,i,i+a,h,A,c),r-=a,s+=a*t.c,i+=a}e(i==n),t.C=t.Ma=n}function Rt(){this.ub=this.yd=this.td=this.Rb=0}function Mt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Pt(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function Nt(){this.Yb=function(){var t=[];return function t(e,n,i){for(var r=i[n],s=0;s<r&&(e.push(i.length>n+1?[]:0),!(i.length<n+1));s++)t(e[s],n+1,i)}(t,0,[3,11]),t}()}function Ot(){this.jb=s(3),this.Wc=a([4,8],Nt),this.Xc=a([4,17],Nt)}function kt(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function Dt(){this.ld=this.La=this.dd=this.tc=0}function Ut(){this.Na=this.la=0}function Qt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Gt(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ht(){this.uc=this.M=this.Nb=0,this.wa=Array(new Dt),this.Y=0,this.ya=Array(new Gt),this.aa=0,this.l=new zt}function Vt(){this.y=s(16),this.f=s(8),this.ea=s(8)}function jt(){this.cb=this.a=0,this.sc="",this.m=new w,this.Od=new Rt,this.Kc=new Mt,this.ed=new kt,this.Qa=new Pt,this.Ic=this.$c=this.Aa=0,this.D=new Ht,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,w),this.ia=0,this.pb=o(4,Qt),this.Pa=new Ot,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Vt),this.Hd=0,this.rb=Array(new Ut),this.sb=0,this.wa=Array(new Dt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Gt),this.L=this.aa=0,this.gd=a([4,2],Dt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Wt(t,e){return 0>t?0:t>e?e:t}function zt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Kt(){var t=new jt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ir||(ir=Yt)),t}function qt(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function $t(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Xt(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return qt(t,2,"null VP8Io passed to VP8GetHeaders()");var i=n.data,s=n.w,o=n.ha;if(4>o)return qt(t,7,"Truncated header.");var a=i[s+0]|i[s+1]<<8|i[s+2]<<16,l=t.Od;if(l.Rb=!(1&a),l.td=a>>1&7,l.yd=a>>4&1,l.ub=a>>5,3<l.td)return qt(t,3,"Incorrect keyframe parameters.");if(!l.yd)return qt(t,4,"Frame not displayable.");s+=3,o-=3;var c=t.Kc;if(l.Rb){if(7>o)return qt(t,7,"cannot parse picture header");if(!$t(i,s,o))return qt(t,3,"Bad code word");c.c=16383&(i[s+4]<<8|i[s+3]),c.Td=i[s+4]>>6,c.i=16383&(i[s+6]<<8|i[s+5]),c.Ud=i[s+6]>>6,s+=7,o-=7,t.za=c.c+15>>4,t.Ub=c.i+15>>4,n.width=c.c,n.height=c.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,r((a=t.Pa).jb,0,255,a.jb.length),e(null!=(a=t.Qa)),a.Cb=0,a.Bb=0,a.Fb=1,r(a.Zb,0,0,a.Zb.length),r(a.Lb,0,0,a.Lb)}if(l.ub>o)return qt(t,7,"bad partition length");f(a=t.m,i,s,l.ub),s+=l.ub,o-=l.ub,l.Rb&&(c.Ld=B(a),c.Kd=B(a)),c=t.Qa;var u,h=t.Pa;if(e(null!=a),e(null!=c),c.Cb=B(a),c.Cb){if(c.Bb=B(a),B(a)){for(c.Fb=B(a),u=0;4>u;++u)c.Zb[u]=B(a)?g(a,7):0;for(u=0;4>u;++u)c.Lb[u]=B(a)?g(a,6):0}if(c.Bb)for(u=0;3>u;++u)h.jb[u]=B(a)?p(a,8):255}else c.Bb=0;if(a.Ka)return qt(t,3,"cannot parse segment header");if((c=t.ed).zd=B(a),c.Tb=p(a,6),c.wb=p(a,3),c.Pc=B(a),c.Pc&&B(a)){for(h=0;4>h;++h)B(a)&&(c.vd[h]=g(a,6));for(h=0;4>h;++h)B(a)&&(c.od[h]=g(a,6))}if(t.L=0==c.Tb?0:c.zd?1:2,a.Ka)return qt(t,3,"cannot parse filter header");var A=o;if(o=u=s,s=u+A,c=A,t.Xb=(1<<p(t.m,2))-1,A<3*(h=t.Xb))i=7;else{for(u+=3*h,c-=3*h,A=0;A<h;++A){var d=i[o+0]|i[o+1]<<8|i[o+2]<<16;d>c&&(d=c),f(t.Jc[+A],i,u,d),u+=d,c-=d,o+=3}f(t.Jc[+h],i,u,c),i=u<s?0:5}if(0!=i)return qt(t,i,"cannot parse partitions");for(i=p(u=t.m,7),o=B(u)?g(u,4):0,s=B(u)?g(u,4):0,c=B(u)?g(u,4):0,h=B(u)?g(u,4):0,u=B(u)?g(u,4):0,A=t.Qa,d=0;4>d;++d){if(A.Cb){var m=A.Zb[d];A.Fb||(m+=i)}else{if(0<d){t.pb[d]=t.pb[0];continue}m=i}var v=t.pb[d];v.Sc[0]=er[Wt(m+o,127)],v.Sc[1]=nr[Wt(m+0,127)],v.Eb[0]=2*er[Wt(m+s,127)],v.Eb[1]=101581*nr[Wt(m+c,127)]>>16,8>v.Eb[1]&&(v.Eb[1]=8),v.Qc[0]=er[Wt(m+h,117)],v.Qc[1]=nr[Wt(m+u,127)],v.lc=m+u}if(!l.Rb)return qt(t,4,"Not a key frame.");for(B(a),l=t.Pa,i=0;4>i;++i){for(o=0;8>o;++o)for(s=0;3>s;++s)for(c=0;11>c;++c)h=T(a,cr[i][o][s][c])?p(a,8):ar[i][o][s][c],l.Wc[i][o].Yb[s][c]=h;for(o=0;17>o;++o)l.Xc[i][o]=l.Wc[i][ur[o]]}return t.kc=B(a),t.kc&&(t.Bd=p(a,8)),t.cb=1}function Yt(t,e,n,i,r,s,o){var a=e[r].Yb[n];for(n=0;16>r;++r){if(!T(t,a[n+0]))return r;for(;!T(t,a[n+1]);)if(a=e[++r].Yb[0],n=0,16==r)return 16;var l=e[r+1].Yb;if(T(t,a[n+2])){var c=t,u=0;if(T(c,(A=a)[(h=n)+3]))if(T(c,A[h+6])){for(a=0,h=2*(u=T(c,A[h+8]))+(A=T(c,A[h+9+u])),u=0,A=rr[h];A[a];++a)u+=u+T(c,A[a]);u+=3+(8<<h)}else T(c,A[h+7])?(u=7+2*T(c,165),u+=T(c,145)):u=5+T(c,159);else u=T(c,A[h+4])?3+T(c,A[h+5]):2;a=l[2]}else u=1,a=l[1];l=o+sr[r],0>(c=t).b&&S(c);var h,A=c.b,d=(h=c.Ca>>1)-(c.I>>A)>>31;--c.b,c.Ca+=d,c.Ca|=1,c.I-=(h+1&d)<<A,s[l]=((u^d)-d)*i[(0<r)+0]}return 16}function Zt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,r(t.zc,0,0,t.zc.length),t.ja=0}function Jt(t,n){if(null==t)return 0;if(null==n)return qt(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Xt(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var a=Ur[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-a>>4,t.zb=n.j-a>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=n.o+15+a>>4,t.Hb=n.va+15+a>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var l=t.ed;for(a=0;4>a;++a){var c;if(t.Qa.Cb){var u=t.Qa.Lb[a];t.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(c=0;1>=c;++c){var h=t.gd[a][c],A=u;if(l.Pc&&(A+=l.vd[0],c&&(A+=l.od[0])),0<(A=0>A?0:63<A?63:A)){var d=A;0<l.wb&&(d=4<l.wb?d>>2:d>>1)>9-l.wb&&(d=9-l.wb),1>d&&(d=1),h.dd=d,h.tc=2*A+d,h.ld=40<=A?2:15<=A?1:0}else h.tc=0;h.La=c}}}a=0}else qt(t,6,"Frame setup failed"),a=t.a;if(a=0==a){if(a){t.$c=0,0<t.Aa||(t.Ic=Gr);t:{a=t.Ic,l=4*(d=t.za);var f=32*d,p=d+1,g=0<t.L?d*(0<t.Aa?2:1):0,m=(2==t.Aa?2:1)*d;if((h=l+832+(c=3*(16*a+Ur[t.L])/2*f)+(u=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=h)a=0;else{if(h>t.Vb){if(t.Vb=0,t.Ec=s(h),t.Fc=0,null==t.Ec){a=qt(t,1,"no memory during frame initialization.");break t}t.Vb=h}h=t.Ec,A=t.Fc,t.Ac=h,t.Bc=A,A+=l,t.Gd=o(f,Vt),t.Hd=0,t.rb=o(p+1,Ut),t.sb=1,t.wa=g?o(g,Dt):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=d),e(!0),t.oc=h,t.pc=A,A+=832,t.ya=o(m,Gt),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=d),t.R=16*d,t.B=8*d,d=(f=Ur[t.L])*t.R,f=f/2*t.B,t.sa=h,t.ta=A+d,t.qa=t.sa,t.ra=t.ta+16*a*t.R+f,t.Ha=t.qa,t.Ia=t.ra+8*a*t.B+f,t.$c=0,A+=c,t.mb=u?h:null,t.nb=u?A:null,e(A+u<=t.Fc+t.Vb),Zt(t),r(t.Ac,t.Bc,0,l),a=1}}if(a){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Li){for(a=-255;255>=a;++a)Bi[255+a]=0>a?-a:a;for(a=-1020;1020>=a;++a)Ti[1020+a]=-128>a?-128:127<a?127:a;for(a=-112;112>=a;++a)Ii[112+a]=-16>a?-16:15<a?15:a;for(a=-255;510>=a;++a)Fi[255+a]=0>a?0:255<a?255:a;Li=1}si=ce,oi=se,li=oe,ci=ae,ui=le,ai=re,hi=qe,Ai=$e,di=Ze,fi=Je,pi=Xe,gi=Ye,mi=tn,vi=en,yi=He,wi=Ve,_i=je,bi=We,Ar[0]=Ee,Ar[1]=he,Ar[2]=be,Ar[3]=xe,Ar[4]=Ce,Ar[5]=Be,Ar[6]=Se,Ar[7]=Te,Ar[8]=Fe,Ar[9]=Ie,hr[0]=me,hr[1]=de,hr[2]=fe,hr[3]=pe,hr[4]=ve,hr[5]=ye,hr[6]=we,dr[0]=Pe,dr[1]=Ae,dr[2]=Le,dr[3]=Re,dr[4]=Oe,dr[5]=Ne,dr[6]=ke,a=1}else a=0}a&&(a=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var o,a=t.Jc[t.M&t.Xb],l=t.m,c=t;for(o=0;o<c.za;++o){var u=l,h=c,A=h.Ac,d=h.Bc+4*o,f=h.zc,p=h.ya[h.aa+o];if(h.Qa.Bb?p.$b=T(u,h.Pa.jb[0])?2+T(u,h.Pa.jb[2]):T(u,h.Pa.jb[1]):p.$b=0,h.kc&&(p.Ad=T(u,h.Bd)),p.Za=!T(u,145)+0,p.Za){var g=p.Ob,m=0;for(h=0;4>h;++h){var v,y=f[0+h];for(v=0;4>v;++v){y=lr[A[d+v]][y];for(var w=or[T(u,y[0])];0<w;)w=or[2*w+T(u,y[w])];y=-w,A[d+v]=y}i(g,m,A,d,4),m+=4,f[0+h]=y}}else y=T(u,156)?T(u,128)?1:3:T(u,163)?2:0,p.Ob[0]=y,r(A,d,y,4),r(f,0,y,4);p.Dd=T(u,142)?T(u,114)?T(u,183)?1:3:2:0}if(c.m.Ka)return qt(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(c=a,u=(l=t).rb[l.sb-1],A=l.rb[l.sb+l.ja],o=l.ya[l.aa+l.ja],d=l.kc?o.Ad:0)u.la=A.la=0,o.Za||(u.Na=A.Na=0),o.Hc=0,o.Gc=0,o.ia=0;else{var _,b;if(u=A,A=c,d=l.Pa.Xc,f=l.ya[l.aa+l.ja],p=l.pb[f.$b],h=f.ad,g=0,m=l.rb[l.sb-1],y=v=0,r(h,g,0,384),f.Za)var x=0,E=d[3];else{w=s(16);var C=u.Na+m.Na;if(C=ir(A,d[1],C,p.Eb,0,w,0),u.Na=m.Na=(0<C)+0,1<C)si(w,0,h,g);else{var S=w[0]+3>>3;for(w=0;256>w;w+=16)h[g+w]=S}x=1,E=d[0]}var B=15&u.la,I=15&m.la;for(w=0;4>w;++w){var F=1&I;for(S=b=0;4>S;++S)B=B>>1|(F=(C=ir(A,E,C=F+(1&B),p.Sc,x,h,g))>x)<<7,b=b<<2|(3<C?3:1<C?2:0!=h[g+0]),g+=16;B>>=4,I=I>>1|F<<7,v=(v<<8|b)>>>0}for(E=B,x=I>>4,_=0;4>_;_+=2){for(b=0,B=u.la>>4+_,I=m.la>>4+_,w=0;2>w;++w){for(F=1&I,S=0;2>S;++S)C=F+(1&B),B=B>>1|(F=0<(C=ir(A,d[2],C,p.Qc,0,h,g)))<<3,b=b<<2|(3<C?3:1<C?2:0!=h[g+0]),g+=16;B>>=2,I=I>>1|F<<5}y|=b<<4*_,E|=B<<4<<_,x|=(240&I)<<_}u.la=E,m.la=x,f.Hc=v,f.Gc=y,f.ia=43690&y?0:p.ia,d=!(v|y)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[o.$b][o.Za],l.wa[l.Y+l.ja].La|=!d),c.Ka)return qt(t,7,"Premature end-of-file encountered.")}if(Zt(t),l=n,c=1,o=(a=t).D,u=0<a.L&&a.M>=a.zb&&a.M<=a.Va,0==a.Aa)t:{if(o.M=a.M,o.uc=u,Pn(a,o),c=1,o=(b=a.D).Nb,u=(y=Ur[a.L])*a.R,A=y/2*a.B,w=16*o*a.R,S=8*o*a.B,d=a.sa,f=a.ta-u+w,p=a.qa,h=a.ra-A+S,g=a.Ha,m=a.Ia-A+S,I=0==(B=b.M),v=B>=a.Va-1,2==a.Aa&&Pn(a,b),b.uc)for(F=(C=a).D.M,e(C.D.uc),b=C.yb;b<C.Hb;++b){x=b,E=F;var L=(R=(G=C).D).Nb;_=G.R;var R=R.wa[R.Y+x],M=G.sa,P=G.ta+16*L*_+16*x,N=R.dd,O=R.tc;if(0!=O)if(e(3<=O),1==G.L)0<x&&wi(M,P,_,O+4),R.La&&bi(M,P,_,O),0<E&&yi(M,P,_,O+4),R.La&&_i(M,P,_,O);else{var k=G.B,D=G.qa,U=G.ra+8*L*k+8*x,Q=G.Ha,G=G.Ia+8*L*k+8*x;L=R.ld,0<x&&(Ai(M,P,_,O+4,N,L),fi(D,U,Q,G,k,O+4,N,L)),R.La&&(gi(M,P,_,O,N,L),vi(D,U,Q,G,k,O,N,L)),0<E&&(hi(M,P,_,O+4,N,L),di(D,U,Q,G,k,O+4,N,L)),R.La&&(pi(M,P,_,O,N,L),mi(D,U,Q,G,k,O,N,L))}}if(a.ia&&alert("todo:DitherRow"),null!=l.put){if(b=16*B,B=16*(B+1),I?(l.y=a.sa,l.O=a.ta+w,l.f=a.qa,l.N=a.ra+S,l.ea=a.Ha,l.W=a.Ia+S):(b-=y,l.y=d,l.O=f,l.f=p,l.N=h,l.ea=g,l.W=m),v||(B-=y),B>l.o&&(B=l.o),l.F=null,l.J=null,null!=a.Fa&&0<a.Fa.length&&b<B&&(l.J=An(a,l,b,B-b),l.F=a.mb,null==l.F&&0==l.F.length)){c=qt(a,3,"Could not decode alpha data.");break t}b<l.j&&(y=l.j-b,b=l.j,e(!(1&y)),l.O+=a.R*y,l.N+=a.B*(y>>1),l.W+=a.B*(y>>1),null!=l.F&&(l.J+=l.width*y)),b<B&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=b-l.j,l.U=l.va-l.v,l.T=B-b,c=l.put(l))}o+1!=a.Ic||v||(i(a.sa,a.ta-u,d,f+16*a.R,u),i(a.qa,a.ra-A,p,h+8*a.B,A),i(a.Ha,a.Ia-A,g,m+8*a.B,A))}if(!c)return qt(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),a&=1}return a?(t.cb=0,a):0}function te(t,e,n,i,r){r=t[e+n+32*i]+(r>>3),t[e+n+32*i]=-256&r?0>r?0:255:r}function ee(t,e,n,i,r,s){te(t,e,0,n,i+r),te(t,e,1,n,i+s),te(t,e,2,n,i-s),te(t,e,3,n,i-r)}function ne(t){return(20091*t>>16)+t}function ie(t,e,n,i){var r,o=0,a=s(16);for(r=0;4>r;++r){var l=t[e+0]+t[e+8],c=t[e+0]-t[e+8],u=(35468*t[e+4]>>16)-ne(t[e+12]),h=ne(t[e+4])+(35468*t[e+12]>>16);a[o+0]=l+h,a[o+1]=c+u,a[o+2]=c-u,a[o+3]=l-h,o+=4,e++}for(r=o=0;4>r;++r)l=(t=a[o+0]+4)+a[o+8],c=t-a[o+8],u=(35468*a[o+4]>>16)-ne(a[o+12]),te(n,i,0,0,l+(h=ne(a[o+4])+(35468*a[o+12]>>16))),te(n,i,1,0,c+u),te(n,i,2,0,c-u),te(n,i,3,0,l-h),o++,i+=32}function re(t,e,n,i){var r=t[e+0]+4,s=35468*t[e+4]>>16,o=ne(t[e+4]),a=35468*t[e+1]>>16;ee(n,i,0,r+o,t=ne(t[e+1]),a),ee(n,i,1,r+s,t,a),ee(n,i,2,r-s,t,a),ee(n,i,3,r-o,t,a)}function se(t,e,n,i,r){ie(t,e,n,i),r&&ie(t,e+16,n,i+4)}function oe(t,e,n,i){oi(t,e+0,n,i,1),oi(t,e+32,n,i+128,1)}function ae(t,e,n,i){var r;for(t=t[e+0]+4,r=0;4>r;++r)for(e=0;4>e;++e)te(n,i,e,r,t)}function le(t,e,n,i){t[e+0]&&ci(t,e+0,n,i),t[e+16]&&ci(t,e+16,n,i+4),t[e+32]&&ci(t,e+32,n,i+128),t[e+48]&&ci(t,e+48,n,i+128+4)}function ce(t,e,n,i){var r,o=s(16);for(r=0;4>r;++r){var a=t[e+0+r]+t[e+12+r],l=t[e+4+r]+t[e+8+r],c=t[e+4+r]-t[e+8+r],u=t[e+0+r]-t[e+12+r];o[0+r]=a+l,o[8+r]=a-l,o[4+r]=u+c,o[12+r]=u-c}for(r=0;4>r;++r)a=(t=o[0+4*r]+3)+o[3+4*r],l=o[1+4*r]+o[2+4*r],c=o[1+4*r]-o[2+4*r],u=t-o[3+4*r],n[i+0]=a+l>>3,n[i+16]=u+c>>3,n[i+32]=a-l>>3,n[i+48]=u-c>>3,i+=64}function ue(t,e,n){var i,r=e-32,s=Pi,o=255-t[r-1];for(i=0;i<n;++i){var a,l=s,c=o+t[e-1];for(a=0;a<n;++a)t[e+a]=l[c+t[r+a]];e+=32}}function he(t,e){ue(t,e,4)}function Ae(t,e){ue(t,e,8)}function de(t,e){ue(t,e,16)}function fe(t,e){var n;for(n=0;16>n;++n)i(t,e+32*n,t,e-32,16)}function pe(t,e){var n;for(n=16;0<n;--n)r(t,e,t[e-1],16),e+=32}function ge(t,e,n){var i;for(i=0;16>i;++i)r(e,n+32*i,t,16)}function me(t,e){var n,i=16;for(n=0;16>n;++n)i+=t[e-1+32*n]+t[e+n-32];ge(i>>5,t,e)}function ve(t,e){var n,i=8;for(n=0;16>n;++n)i+=t[e-1+32*n];ge(i>>4,t,e)}function ye(t,e){var n,i=8;for(n=0;16>n;++n)i+=t[e+n-32];ge(i>>4,t,e)}function we(t,e){ge(128,t,e)}function _e(t,e,n){return t+2*e+n+2>>2}function be(t,e){var n,r=e-32;for(r=new Uint8Array([_e(t[r-1],t[r+0],t[r+1]),_e(t[r+0],t[r+1],t[r+2]),_e(t[r+1],t[r+2],t[r+3]),_e(t[r+2],t[r+3],t[r+4])]),n=0;4>n;++n)i(t,e+32*n,r,0,r.length)}function xe(t,e){var n=t[e-1],i=t[e-1+32],r=t[e-1+64],s=t[e-1+96];I(t,e+0,16843009*_e(t[e-1-32],n,i)),I(t,e+32,16843009*_e(n,i,r)),I(t,e+64,16843009*_e(i,r,s)),I(t,e+96,16843009*_e(r,s,s))}function Ee(t,e){var n,i=4;for(n=0;4>n;++n)i+=t[e+n-32]+t[e-1+32*n];for(i>>=3,n=0;4>n;++n)r(t,e+32*n,i,4)}function Ce(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],s=t[e-1-32],o=t[e+0-32],a=t[e+1-32],l=t[e+2-32],c=t[e+3-32];t[e+0+96]=_e(i,r,t[e-1+96]),t[e+1+96]=t[e+0+64]=_e(n,i,r),t[e+2+96]=t[e+1+64]=t[e+0+32]=_e(s,n,i),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=_e(o,s,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=_e(a,o,s),t[e+3+32]=t[e+2+0]=_e(l,a,o),t[e+3+0]=_e(c,l,a)}function Se(t,e){var n=t[e+1-32],i=t[e+2-32],r=t[e+3-32],s=t[e+4-32],o=t[e+5-32],a=t[e+6-32],l=t[e+7-32];t[e+0+0]=_e(t[e+0-32],n,i),t[e+1+0]=t[e+0+32]=_e(n,i,r),t[e+2+0]=t[e+1+32]=t[e+0+64]=_e(i,r,s),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=_e(r,s,o),t[e+3+32]=t[e+2+64]=t[e+1+96]=_e(s,o,a),t[e+3+64]=t[e+2+96]=_e(o,a,l),t[e+3+96]=_e(a,l,l)}function Be(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],s=t[e-1-32],o=t[e+0-32],a=t[e+1-32],l=t[e+2-32],c=t[e+3-32];t[e+0+0]=t[e+1+64]=s+o+1>>1,t[e+1+0]=t[e+2+64]=o+a+1>>1,t[e+2+0]=t[e+3+64]=a+l+1>>1,t[e+3+0]=l+c+1>>1,t[e+0+96]=_e(r,i,n),t[e+0+64]=_e(i,n,s),t[e+0+32]=t[e+1+96]=_e(n,s,o),t[e+1+32]=t[e+2+96]=_e(s,o,a),t[e+2+32]=t[e+3+96]=_e(o,a,l),t[e+3+32]=_e(a,l,c)}function Te(t,e){var n=t[e+0-32],i=t[e+1-32],r=t[e+2-32],s=t[e+3-32],o=t[e+4-32],a=t[e+5-32],l=t[e+6-32],c=t[e+7-32];t[e+0+0]=n+i+1>>1,t[e+1+0]=t[e+0+64]=i+r+1>>1,t[e+2+0]=t[e+1+64]=r+s+1>>1,t[e+3+0]=t[e+2+64]=s+o+1>>1,t[e+0+32]=_e(n,i,r),t[e+1+32]=t[e+0+96]=_e(i,r,s),t[e+2+32]=t[e+1+96]=_e(r,s,o),t[e+3+32]=t[e+2+96]=_e(s,o,a),t[e+3+64]=_e(o,a,l),t[e+3+96]=_e(a,l,c)}function Ie(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],s=t[e-1+96];t[e+0+0]=n+i+1>>1,t[e+2+0]=t[e+0+32]=i+r+1>>1,t[e+2+32]=t[e+0+64]=r+s+1>>1,t[e+1+0]=_e(n,i,r),t[e+3+0]=t[e+1+32]=_e(i,r,s),t[e+3+32]=t[e+1+64]=_e(r,s,s),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=s}function Fe(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],s=t[e-1+96],o=t[e-1-32],a=t[e+0-32],l=t[e+1-32],c=t[e+2-32];t[e+0+0]=t[e+2+32]=n+o+1>>1,t[e+0+32]=t[e+2+64]=i+n+1>>1,t[e+0+64]=t[e+2+96]=r+i+1>>1,t[e+0+96]=s+r+1>>1,t[e+3+0]=_e(a,l,c),t[e+2+0]=_e(o,a,l),t[e+1+0]=t[e+3+32]=_e(n,o,a),t[e+1+32]=t[e+3+64]=_e(i,n,o),t[e+1+64]=t[e+3+96]=_e(r,i,n),t[e+1+96]=_e(s,r,i)}function Le(t,e){var n;for(n=0;8>n;++n)i(t,e+32*n,t,e-32,8)}function Re(t,e){var n;for(n=0;8>n;++n)r(t,e,t[e-1],8),e+=32}function Me(t,e,n){var i;for(i=0;8>i;++i)r(e,n+32*i,t,8)}function Pe(t,e){var n,i=8;for(n=0;8>n;++n)i+=t[e+n-32]+t[e-1+32*n];Me(i>>4,t,e)}function Ne(t,e){var n,i=4;for(n=0;8>n;++n)i+=t[e+n-32];Me(i>>3,t,e)}function Oe(t,e){var n,i=4;for(n=0;8>n;++n)i+=t[e-1+32*n];Me(i>>3,t,e)}function ke(t,e){Me(128,t,e)}function De(t,e,n){var i=t[e-n],r=t[e+0],s=3*(r-i)+Ri[1020+t[e-2*n]-t[e+n]],o=Mi[112+(s+4>>3)];t[e-n]=Pi[255+i+Mi[112+(s+3>>3)]],t[e+0]=Pi[255+r-o]}function Ue(t,e,n,i){var r=t[e+0],s=t[e+n];return Ni[255+t[e-2*n]-t[e-n]]>i||Ni[255+s-r]>i}function Qe(t,e,n,i){return 4*Ni[255+t[e-n]-t[e+0]]+Ni[255+t[e-2*n]-t[e+n]]<=i}function Ge(t,e,n,i,r){var s=t[e-3*n],o=t[e-2*n],a=t[e-n],l=t[e+0],c=t[e+n],u=t[e+2*n],h=t[e+3*n];return 4*Ni[255+a-l]+Ni[255+o-c]>i?0:Ni[255+t[e-4*n]-s]<=r&&Ni[255+s-o]<=r&&Ni[255+o-a]<=r&&Ni[255+h-u]<=r&&Ni[255+u-c]<=r&&Ni[255+c-l]<=r}function He(t,e,n,i){var r=2*i+1;for(i=0;16>i;++i)Qe(t,e+i,n,r)&&De(t,e+i,n)}function Ve(t,e,n,i){var r=2*i+1;for(i=0;16>i;++i)Qe(t,e+i*n,1,r)&&De(t,e+i*n,1)}function je(t,e,n,i){var r;for(r=3;0<r;--r)He(t,e+=4*n,n,i)}function We(t,e,n,i){var r;for(r=3;0<r;--r)Ve(t,e+=4,n,i)}function ze(t,e,n,i,r,s,o,a){for(s=2*s+1;0<r--;){if(Ge(t,e,n,s,o))if(Ue(t,e,n,a))De(t,e,n);else{var l=t,c=e,u=n,h=l[c-2*u],A=l[c-u],d=l[c+0],f=l[c+u],p=l[c+2*u],g=27*(v=Ri[1020+3*(d-A)+Ri[1020+h-f]])+63>>7,m=18*v+63>>7,v=9*v+63>>7;l[c-3*u]=Pi[255+l[c-3*u]+v],l[c-2*u]=Pi[255+h+m],l[c-u]=Pi[255+A+g],l[c+0]=Pi[255+d-g],l[c+u]=Pi[255+f-m],l[c+2*u]=Pi[255+p-v]}e+=i}}function Ke(t,e,n,i,r,s,o,a){for(s=2*s+1;0<r--;){if(Ge(t,e,n,s,o))if(Ue(t,e,n,a))De(t,e,n);else{var l=t,c=e,u=n,h=l[c-u],A=l[c+0],d=l[c+u],f=Mi[112+(4+(p=3*(A-h))>>3)],p=Mi[112+(p+3>>3)],g=f+1>>1;l[c-2*u]=Pi[255+l[c-2*u]+g],l[c-u]=Pi[255+h+p],l[c+0]=Pi[255+A-f],l[c+u]=Pi[255+d-g]}e+=i}}function qe(t,e,n,i,r,s){ze(t,e,n,1,16,i,r,s)}function $e(t,e,n,i,r,s){ze(t,e,1,n,16,i,r,s)}function Xe(t,e,n,i,r,s){var o;for(o=3;0<o;--o)Ke(t,e+=4*n,n,1,16,i,r,s)}function Ye(t,e,n,i,r,s){var o;for(o=3;0<o;--o)Ke(t,e+=4,1,n,16,i,r,s)}function Ze(t,e,n,i,r,s,o,a){ze(t,e,r,1,8,s,o,a),ze(n,i,r,1,8,s,o,a)}function Je(t,e,n,i,r,s,o,a){ze(t,e,1,r,8,s,o,a),ze(n,i,1,r,8,s,o,a)}function tn(t,e,n,i,r,s,o,a){Ke(t,e+4*r,r,1,8,s,o,a),Ke(n,i+4*r,r,1,8,s,o,a)}function en(t,e,n,i,r,s,o,a){Ke(t,e+4,1,r,8,s,o,a),Ke(n,i+4,1,r,8,s,o,a)}function nn(){this.ba=new ot,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new N,this.vb=new N,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new d,this.yc=new h}function an(){this.xb=this.a=0,this.l=new zt,this.ca=new ot,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new _,this.Pb=0,this.wd=new _,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=o(4,sn),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new zt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function cn(t,e,n,i,r,s,o){for(t=null==t?0:t[e+0],e=0;e<o;++e)r[s+e]=t+n[i+e]&255,t=r[s+e]}function un(t,e,n,i,r,s,o){var a;if(null==t)cn(null,null,n,i,r,s,o);else for(a=0;a<o;++a)r[s+a]=t[e+a]+n[i+a]&255}function hn(t,e,n,i,r,s,o){if(null==t)cn(null,null,n,i,r,s,o);else{var a,l=t[e+0],c=l,u=l;for(a=0;a<o;++a)c=u+(l=t[e+a])-c,u=n[i+a]+(-256&c?0>c?0:255:c)&255,c=l,r[s+a]=u}}function An(t,n,r,o){var a=n.width,l=n.o;if(e(null!=t&&null!=n),0>r||0>=o||r+o>l)return null;if(!t.Cc){if(null==t.ga){var c;if(t.ga=new ln,(c=null==t.ga)||(c=n.width*n.o,e(0==t.Gb.length),t.Gb=s(c),t.Uc=0,null==t.Gb?c=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,c=1),c=!c),!c){c=t.ga;var u=t.Fa,h=t.P,A=t.qc,d=t.mb,f=t.nb,p=h+1,g=A-1,v=c.l;if(e(null!=u&&null!=d&&null!=n),gr[0]=null,gr[1]=cn,gr[2]=un,gr[3]=hn,c.ca=d,c.tb=f,c.c=n.width,c.i=n.height,e(0<c.c&&0<c.i),1>=A)n=0;else if(c.$a=u[h+0]>>0&3,c.Z=u[h+0]>>2&3,c.Lc=u[h+0]>>4&3,h=u[h+0]>>6&3,0>c.$a||1<c.$a||4<=c.Z||1<c.Lc||h)n=0;else if(v.put=dt,v.ac=At,v.bc=ft,v.ma=c,v.width=n.width,v.height=n.height,v.Da=n.Da,v.v=n.v,v.va=n.va,v.j=n.j,v.o=n.o,c.$a)t:{e(1==c.$a),n=Tt();e:for(;;){if(null==n){n=0;break t}if(e(null!=c),c.mc=n,n.c=c.c,n.i=c.i,n.l=c.l,n.l.ma=c,n.l.width=c.c,n.l.height=c.i,n.a=0,m(n.m,u,p,g),!It(c.c,c.i,1,n,null))break e;if(1==n.ab&&3==n.gc[0].hc&&xt(n.s)?(c.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=s(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(c.ic=0,n=Ft(n,c.c)),!n)break e;n=1;break t}c.mc=null,n=0}else n=g>=c.c*c.i;c=!n}if(c)return null;1!=t.ga.Lc?t.Ga=0:o=l-r}e(null!=t.ga),e(r+o<=l);t:{if(n=(u=t.ga).c,l=u.l.o,0==u.$a){if(p=t.rc,g=t.Vc,v=t.Fa,h=t.P+1+r*n,A=t.mb,d=t.nb+r*n,e(h<=t.P+t.qc),0!=u.Z)for(e(null!=gr[u.Z]),c=0;c<o;++c)gr[u.Z](p,g,v,h,A,d,n),p=A,g=d,d+=n,h+=n;else for(c=0;c<o;++c)i(A,d,v,h,n),p=A,g=d,d+=n,h+=n;t.rc=p,t.Vc=g}else{if(e(null!=u.mc),n=r+o,e(null!=(c=u.mc)),e(n<=c.i),c.C>=n)n=1;else if(u.ic||mn(),u.ic){u=c.V,p=c.Ba,g=c.c;var y=c.i,w=(v=1,h=c.$/g,A=c.$%g,d=c.m,f=c.s,c.$),_=g*y,b=g*n,E=f.wc,S=w<b?wt(f,A,h):null;e(w<=_),e(n<=y),e(xt(f));e:for(;;){for(;!d.h&&w<b;){if(A&E||(S=wt(f,A,h)),e(null!=S),C(d),256>(y=vt(S.G[0],S.H[0],d)))u[p+w]=y,++w,++A>=g&&(A=0,++h<=n&&!(h%16)&&Ct(c,h));else{if(!(280>y)){v=0;break e}y=gt(y-256,d);var B,T=vt(S.G[4],S.H[4],d);if(C(d),!(w>=(T=mt(g,T=gt(T,d)))&&_-w>=y)){v=0;break e}for(B=0;B<y;++B)u[p+w+B]=u[p+w+B-T];for(w+=y,A+=y;A>=g;)A-=g,++h<=n&&!(h%16)&&Ct(c,h);w<b&&A&E&&(S=wt(f,A,h))}e(d.h==x(d))}Ct(c,h>n?n:h);break e}!v||d.h&&w<_?(v=0,c.a=d.h?5:3):c.$=w,n=v}else n=St(c,c.V,c.Ba,c.c,c.i,n,Lt);if(!n){o=0;break t}}r+o>=l&&(t.Cc=1),o=1}if(!o)return null;if(t.Cc&&(null!=(o=t.ga)&&(o.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+r*a}function dn(t,e,n,i,r,s){for(;0<r--;){var o,a=t,l=e+(n?1:0),c=t,u=e+(n?0:3);for(o=0;o<i;++o){var h=c[u+4*o];255!=h&&(h*=32897,a[l+4*o+0]=a[l+4*o+0]*h>>23,a[l+4*o+1]=a[l+4*o+1]*h>>23,a[l+4*o+2]=a[l+4*o+2]*h>>23)}e+=s}}function fn(t,e,n,i,r){for(;0<i--;){var s;for(s=0;s<n;++s){var o=t[e+2*s+0],a=15&(c=t[e+2*s+1]),l=4369*a,c=(240&c|c>>4)*l>>16;t[e+2*s+0]=(240&o|o>>4)*l>>16&240|(15&o|o<<4)*l>>16>>4&15,t[e+2*s+1]=240&c|a}e+=r}}function pn(t,e,n,i,r,s,o,a){var l,c,u=255;for(c=0;c<r;++c){for(l=0;l<i;++l){var h=t[e+l];s[o+4*l]=h,u&=h}e+=n,o+=a}return 255!=u}function gn(t,e,n,i,r){var s;for(s=0;s<r;++s)n[i+s]=t[e+s]>>8}function mn(){xi=dn,Ei=fn,Ci=pn,Si=gn}function vn(n,i,r){t[n]=function(t,n,s,o,a,l,c,u,h,A,d,f,p,g,m,v,y){var w,_=y-1>>1,b=a[l+0]|c[u+0]<<16,x=h[A+0]|d[f+0]<<16;e(null!=t);var E=3*b+x+131074>>2;for(i(t[n+0],255&E,E>>16,p,g),null!=s&&(E=3*x+b+131074>>2,i(s[o+0],255&E,E>>16,m,v)),w=1;w<=_;++w){var C=a[l+w]|c[u+w]<<16,S=h[A+w]|d[f+w]<<16,B=b+C+x+S+524296,T=B+2*(C+x)>>3;E=T+b>>1,b=(B=B+2*(b+S)>>3)+C>>1,i(t[n+2*w-1],255&E,E>>16,p,g+(2*w-1)*r),i(t[n+2*w-0],255&b,b>>16,p,g+(2*w-0)*r),null!=s&&(E=B+x>>1,b=T+S>>1,i(s[o+2*w-1],255&E,E>>16,m,v+(2*w-1)*r),i(s[o+2*w+0],255&b,b>>16,m,v+(2*w+0)*r)),b=C,x=S}1&y||(E=3*b+x+131074>>2,i(t[n+y-1],255&E,E>>16,p,g+(y-1)*r),null!=s&&(E=3*x+b+131074>>2,i(s[o+y-1],255&E,E>>16,m,v+(y-1)*r)))}}function yn(){mr[Oi]=vr,mr[ki]=wr,mr[Di]=yr,mr[Ui]=_r,mr[Qi]=br,mr[Gi]=xr,mr[Hi]=Er,mr[Vi]=wr,mr[ji]=_r,mr[Wi]=br,mr[zi]=xr}function wn(t){return t&~Fr?0>t?0:255:t>>Ir}function _n(t,e){return wn((19077*t>>8)+(26149*e>>8)-14234)}function bn(t,e,n){return wn((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function xn(t,e){return wn((19077*t>>8)+(33050*e>>8)-17685)}function En(t,e,n,i,r){i[r+0]=_n(t,n),i[r+1]=bn(t,e,n),i[r+2]=xn(t,e)}function Cn(t,e,n,i,r){i[r+0]=xn(t,e),i[r+1]=bn(t,e,n),i[r+2]=_n(t,n)}function Sn(t,e,n,i,r){var s=bn(t,e,n);e=s<<3&224|xn(t,e)>>3,i[r+0]=248&_n(t,n)|s>>5,i[r+1]=e}function Bn(t,e,n,i,r){var s=240&xn(t,e)|15;i[r+0]=240&_n(t,n)|bn(t,e,n)>>4,i[r+1]=s}function Tn(t,e,n,i,r){i[r+0]=255,En(t,e,n,i,r+1)}function In(t,e,n,i,r){Cn(t,e,n,i,r),i[r+3]=255}function Fn(t,e,n,i,r){En(t,e,n,i,r),i[r+3]=255}function Wt(t,e){return 0>t?0:t>e?e:t}function Ln(e,n,i){t[e]=function(t,e,r,s,o,a,l,c,u){for(var h=c+(-2&u)*i;c!=h;)n(t[e+0],r[s+0],o[a+0],l,c),n(t[e+1],r[s+0],o[a+0],l,c+i),e+=2,++s,++a,c+=2*i;1&u&&n(t[e+0],r[s+0],o[a+0],l,c)}}function Rn(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function Mn(t,e,n,i,r){switch(t>>>30){case 3:oi(e,n,i,r,0);break;case 2:ai(e,n,i,r);break;case 1:ci(e,n,i,r)}}function Pn(t,e){var n,s,o=e.M,a=e.Nb,l=t.oc,c=t.pc+40,u=t.oc,h=t.pc+584,A=t.oc,d=t.pc+600;for(n=0;16>n;++n)l[c+32*n-1]=129;for(n=0;8>n;++n)u[h+32*n-1]=129,A[d+32*n-1]=129;for(0<o?l[c-1-32]=u[h-1-32]=A[d-1-32]=129:(r(l,c-32-1,127,21),r(u,h-32-1,127,9),r(A,d-32-1,127,9)),s=0;s<t.za;++s){var f=e.ya[e.aa+s];if(0<s){for(n=-1;16>n;++n)i(l,c+32*n-4,l,c+32*n+12,4);for(n=-1;8>n;++n)i(u,h+32*n-4,u,h+32*n+4,4),i(A,d+32*n-4,A,d+32*n+4,4)}var p=t.Gd,g=t.Hd+s,m=f.ad,v=f.Hc;if(0<o&&(i(l,c-32,p[g].y,0,16),i(u,h-32,p[g].f,0,8),i(A,d-32,p[g].ea,0,8)),f.Za){var y=l,w=c-32+16;for(0<o&&(s>=t.za-1?r(y,w,p[g].y[15],4):i(y,w,p[g+1].y,0,4)),n=0;4>n;n++)y[w+128+n]=y[w+256+n]=y[w+384+n]=y[w+0+n];for(n=0;16>n;++n,v<<=2)y=l,w=c+Dr[n],Ar[f.Ob[n]](y,w),Mn(v,m,16*+n,y,w)}else if(y=Rn(s,o,f.Ob[0]),hr[y](l,c),0!=v)for(n=0;16>n;++n,v<<=2)Mn(v,m,16*+n,l,c+Dr[n]);for(n=f.Gc,y=Rn(s,o,f.Dd),dr[y](u,h),dr[y](A,d),v=m,y=u,w=h,255&(f=n>>0)&&(170&f?li(v,256,y,w):ui(v,256,y,w)),f=A,v=d,255&(n>>=8)&&(170&n?li(m,320,f,v):ui(m,320,f,v)),o<t.Ub-1&&(i(p[g].y,0,l,c+480,16),i(p[g].f,0,u,h+224,8),i(p[g].ea,0,A,d+224,8)),n=8*a*t.B,p=t.sa,g=t.ta+16*s+16*a*t.R,m=t.qa,f=t.ra+8*s+n,v=t.Ha,y=t.Ia+8*s+n,n=0;16>n;++n)i(p,g+n*t.R,l,c+32*n,16);for(n=0;8>n;++n)i(m,f+n*t.B,u,h+32*n,8),i(v,y+n*t.B,A,d+32*n,8)}}function Nn(t,i,r,s,o,a,l,c,u){var h=[0],A=[0],d=0,f=null!=u?u.kd:0,p=null!=u?u:new rn;if(null==t||12>r)return 7;p.data=t,p.w=i,p.ha=r,i=[i],r=[r],p.gb=[p.gb];t:{var g=i,v=r,y=p.gb;if(e(null!=t),e(null!=v),e(null!=y),y[0]=0,12<=v[0]&&!n(t,g[0],"RIFF")){if(n(t,g[0]+8,"WEBP")){y=3;break t}var w=R(t,g[0]+4);if(12>w||4294967286<w){y=3;break t}if(f&&w>v[0]-8){y=7;break t}y[0]=w,g[0]+=12,v[0]-=12}y=0}if(0!=y)return y;for(w=0<p.gb[0],r=r[0];;){t:{var b=t;v=i,y=r;var x=h,E=A,C=g=[0];if((T=d=[d])[0]=0,8>y[0])y=7;else{if(!n(b,v[0],"VP8X")){if(10!=R(b,v[0]+4)){y=3;break t}if(18>y[0]){y=7;break t}var S=R(b,v[0]+8),B=1+L(b,v[0]+12);if(2147483648<=B*(b=1+L(b,v[0]+15))){y=3;break t}null!=C&&(C[0]=S),null!=x&&(x[0]=B),null!=E&&(E[0]=b),v[0]+=18,y[0]-=18,T[0]=1}y=0}}if(d=d[0],g=g[0],0!=y)return y;if(v=!!(2&g),!w&&d)return 3;if(null!=a&&(a[0]=!!(16&g)),null!=l&&(l[0]=v),null!=c&&(c[0]=0),l=h[0],g=A[0],d&&v&&null==u){y=0;break}if(4>r){y=7;break}if(w&&d||!w&&!d&&!n(t,i[0],"ALPH")){r=[r],p.na=[p.na],p.P=[p.P],p.Sa=[p.Sa];t:{S=t,y=i,w=r;var T=p.gb;x=p.na,E=p.P,C=p.Sa,B=22,e(null!=S),e(null!=w),b=y[0];var I=w[0];for(e(null!=x),e(null!=C),x[0]=null,E[0]=null,C[0]=0;;){if(y[0]=b,w[0]=I,8>I){y=7;break t}var F=R(S,b+4);if(4294967286<F){y=3;break t}var M=8+F+1&-2;if(B+=M,0<T&&B>T){y=3;break t}if(!n(S,b,"VP8 ")||!n(S,b,"VP8L")){y=0;break t}if(I[0]<M){y=7;break t}n(S,b,"ALPH")||(x[0]=S,E[0]=b+8,C[0]=F),b+=M,I-=M}}if(r=r[0],p.na=p.na[0],p.P=p.P[0],p.Sa=p.Sa[0],0!=y)break}r=[r],p.Ja=[p.Ja],p.xa=[p.xa];t:if(T=t,y=i,w=r,x=p.gb[0],E=p.Ja,C=p.xa,S=y[0],b=!n(T,S,"VP8 "),B=!n(T,S,"VP8L"),e(null!=T),e(null!=w),e(null!=E),e(null!=C),8>w[0])y=7;else{if(b||B){if(T=R(T,S+4),12<=x&&T>x-12){y=3;break t}if(f&&T>w[0]-8){y=7;break t}E[0]=T,y[0]+=8,w[0]-=8,C[0]=B}else C[0]=5<=w[0]&&47==T[S+0]&&!(T[S+4]>>5),E[0]=w[0];y=0}if(r=r[0],p.Ja=p.Ja[0],p.xa=p.xa[0],i=i[0],0!=y)break;if(4294967286<p.Ja)return 3;if(null==c||v||(c[0]=p.xa?2:1),l=[l],g=[g],p.xa){if(5>r){y=7;break}c=l,f=g,v=a,null==t||5>r?t=0:5<=r&&47==t[i+0]&&!(t[i+4]>>5)?(w=[0],T=[0],x=[0],m(E=new _,t,i,r),pt(E,w,T,x)?(null!=c&&(c[0]=w[0]),null!=f&&(f[0]=T[0]),null!=v&&(v[0]=x[0]),t=1):t=0):t=0}else{if(10>r){y=7;break}c=g,null==t||10>r||!$t(t,i+3,r-3)?t=0:(f=t[i+0]|t[i+1]<<8|t[i+2]<<16,v=16383&(t[i+7]<<8|t[i+6]),t=16383&(t[i+9]<<8|t[i+8]),1&f||3<(f>>1&7)||!(f>>4&1)||f>>5>=p.Ja||!v||!t?t=0:(l&&(l[0]=v),c&&(c[0]=t),t=1))}if(!t)return 3;if(l=l[0],g=g[0],d&&(h[0]!=l||A[0]!=g))return 3;null!=u&&(u[0]=p,u.offset=i-u.w,e(4294967286>i-u.w),e(u.offset==u.ha-r));break}return 0==y||7==y&&d&&null==u?(null!=a&&(a[0]|=null!=p.na&&0<p.na.length),null!=s&&(s[0]=l),null!=o&&(o[0]=g),0):y}function On(t,e,n){var i=e.width,r=e.height,s=0,o=0,a=i,l=r;if(e.Da=null!=t&&0<t.Da,e.Da&&(a=t.cd,l=t.bd,s=t.v,o=t.j,11>n||(s&=-2,o&=-2),0>s||0>o||0>=a||0>=l||s+a>i||o+l>r))return 0;if(e.v=s,e.j=o,e.va=s+a,e.o=o+l,e.U=a,e.T=l,e.da=null!=t&&0<t.da,e.da){if(!O(a,l,n=[t.ib],s=[t.hb]))return 0;e.ib=n[0],e.hb=s[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*i/4&&e.hb<3*r/4,e.Kb=0),1}function kn(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function Dn(t,e,n,i){if(null==i||0>=t||0>=e)return 2;if(null!=n){if(n.Da){var r=n.cd,o=n.bd,a=-2&n.v,l=-2&n.j;if(0>a||0>l||0>=r||0>=o||a+r>t||l+o>e)return 2;t=r,e=o}if(n.da){if(!O(t,e,r=[n.ib],o=[n.hb]))return 2;t=r[0],e=o[0]}}i.width=t,i.height=e;t:{var c=i.width,u=i.height;if(t=i.S,0>=c||0>=u||!(t>=Oi&&13>t))t=2;else{if(0>=i.Rd&&null==i.sd){a=o=r=e=0;var h=(l=c*Hr[t])*u;if(11>t||(o=(u+1)/2*(e=(c+1)/2),12==t&&(a=(r=c)*u)),null==(u=s(h+2*o+a))){t=1;break t}i.sd=u,11>t?((c=i.f.RGBA).eb=u,c.fb=0,c.A=l,c.size=h):((c=i.f.kb).y=u,c.O=0,c.fa=l,c.Fd=h,c.f=u,c.N=0+h,c.Ab=e,c.Cd=o,c.ea=u,c.W=0+h+o,c.Db=e,c.Ed=o,12==t&&(c.F=u,c.J=0+h+2*o),c.Tc=a,c.lb=r)}if(e=1,r=i.S,o=i.width,a=i.height,r>=Oi&&13>r)if(11>r)t=i.f.RGBA,e&=(l=Math.abs(t.A))*(a-1)+o<=t.size,e&=l>=o*Hr[r],e&=null!=t.eb;else{t=i.f.kb,l=(o+1)/2,h=(a+1)/2,c=Math.abs(t.fa),u=Math.abs(t.Ab);var A=Math.abs(t.Db),d=Math.abs(t.lb),f=d*(a-1)+o;e&=c*(a-1)+o<=t.Fd,e&=u*(h-1)+l<=t.Cd,e=(e&=A*(h-1)+l<=t.Ed)&c>=o&u>=l&A>=l,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==r&&(e&=d>=o,e&=f<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=kn(i)),t}var Un=64,Qn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Gn=24,Hn=32,Vn=8,jn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];U("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return G(G(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return G(t,e[n-1])},t.Predictor7=function(t,e,n){return G(t,e[n+0])},t.Predictor8=function(t,e,n){return G(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return G(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return G(G(t,e[n-1]),G(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var i=e[n+0];return 0>=j(i>>24&255,t>>24&255,(e=e[n-1])>>24&255)+j(i>>16&255,t>>16&255,e>>16&255)+j(i>>8&255,t>>8&255,e>>8&255)+j(255&i,255&t,255&e)?i:t},t.Predictor12=function(t,e,n){var i=e[n+0];return(H((t>>24&255)+(i>>24&255)-((e=e[n-1])>>24&255))<<24|H((t>>16&255)+(i>>16&255)-(e>>16&255))<<16|H((t>>8&255)+(i>>8&255)-(e>>8&255))<<8|H((255&t)+(255&i)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var i=e[n-1];return(V((t=G(t,e[n+0]))>>24&255,i>>24&255)<<24|V(t>>16&255,i>>16&255)<<16|V(t>>8&255,i>>8&255)<<8|V(t>>0&255,i>>0&255))>>>0};var Wn=t.PredictorAdd0;t.PredictorAdd1=W,U("Predictor2","PredictorAdd2"),U("Predictor3","PredictorAdd3"),U("Predictor4","PredictorAdd4"),U("Predictor5","PredictorAdd5"),U("Predictor6","PredictorAdd6"),U("Predictor7","PredictorAdd7"),U("Predictor8","PredictorAdd8"),U("Predictor9","PredictorAdd9"),U("Predictor10","PredictorAdd10"),U("Predictor11","PredictorAdd11"),U("Predictor12","PredictorAdd12"),U("Predictor13","PredictorAdd13");var zn=t.PredictorAdd2;$("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),$("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Kn,qn=t.ColorIndexInverseTransform,$n=t.MapARGB,Xn=t.VP8LColorIndexInverseTransformAlpha,Yn=t.MapAlpha,Zn=t.VP8LPredictorsAdd=[];Zn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Jn,ti,ei,ni,ii,ri,si,oi,ai,li,ci,ui,hi,Ai,di,fi,pi,gi,mi,vi,yi,wi,_i,bi,xi,Ei,Ci,Si,Bi=s(511),Ti=s(2041),Ii=s(225),Fi=s(767),Li=0,Ri=Ti,Mi=Ii,Pi=Fi,Ni=Bi,Oi=0,ki=1,Di=2,Ui=3,Qi=4,Gi=5,Hi=6,Vi=7,ji=8,Wi=9,zi=10,Ki=[2,3,7],qi=[3,3,11],$i=[280,256,256,256,40],Xi=[0,1,1,1,0],Yi=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Zi=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ji=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tr=8,er=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ir=null,rr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],or=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ar=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],lr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],cr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ur=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],hr=[],Ar=[],dr=[],fr=1,pr=2,gr=[],mr=[];vn("UpsampleRgbLinePair",En,3),vn("UpsampleBgrLinePair",Cn,3),vn("UpsampleRgbaLinePair",Fn,4),vn("UpsampleBgraLinePair",In,4),vn("UpsampleArgbLinePair",Tn,4),vn("UpsampleRgba4444LinePair",Bn,2),vn("UpsampleRgb565LinePair",Sn,2);var vr=t.UpsampleRgbLinePair,yr=t.UpsampleBgrLinePair,wr=t.UpsampleRgbaLinePair,_r=t.UpsampleBgraLinePair,br=t.UpsampleArgbLinePair,xr=t.UpsampleRgba4444LinePair,Er=t.UpsampleRgb565LinePair,Cr=16,Sr=1<<Cr-1,Br=-227,Tr=482,Ir=6,Fr=(256<<Ir)-1,Lr=0,Rr=s(256),Mr=s(256),Pr=s(256),Nr=s(256),Or=s(Tr-Br),kr=s(Tr-Br);Ln("YuvToRgbRow",En,3),Ln("YuvToBgrRow",Cn,3),Ln("YuvToRgbaRow",Fn,4),Ln("YuvToBgraRow",In,4),Ln("YuvToArgbRow",Tn,4),Ln("YuvToRgba4444Row",Bn,2),Ln("YuvToRgb565Row",Sn,2);var Dr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Ur=[0,2,8],Qr=[8,7,6,4,4,2,2,2,1,1,1,1],Gr=1;this.WebPDecodeRGBA=function(t,n,i,r,s){var o=ki,a=new nn,l=new ot;a.ba=l,l.S=o,l.width=[l.width],l.height=[l.height];var c=l.width,u=l.height,h=new at;if(null==h||null==t)var A=2;else e(null!=h),A=Nn(t,n,i,h.width,h.height,h.Pd,h.Qd,h.format,null);if(0!=A?c=0:(null!=c&&(c[0]=h.width[0]),null!=u&&(u[0]=h.height[0]),c=1),c){l.width=l.width[0],l.height=l.height[0],null!=r&&(r[0]=l.width),null!=s&&(s[0]=l.height);t:{if(r=new zt,(s=new rn).data=t,s.w=n,s.ha=i,s.kd=1,n=[0],e(null!=s),(0==(t=Nn(s.data,s.w,s.ha,null,null,null,n,null,s))||7==t)&&n[0]&&(t=4),0==(n=t)){if(e(null!=a),r.data=s.data,r.w=s.w+s.offset,r.ha=s.ha-s.offset,r.put=dt,r.ac=At,r.bc=ft,r.ma=a,s.xa){if(null==(t=Tt())){a=1;break t}if(function(t,n){var i=[0],r=[0],s=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,m(t.m,n.data,n.w,n.ha),!pt(t.m,i,r,s)){t.a=3;break e}if(t.xb=pr,n.width=i[0],n.height=r[0],!It(i[0],r[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,r)){if(r=0==(n=Dn(r.width,r.height,a.Oa,a.ba))){e:{r=t;n:for(;;){if(null==r){r=0;break e}if(e(null!=r.s.yc),e(null!=r.s.Ya),e(0<r.s.Wb),e(null!=(i=r.l)),e(null!=(s=i.ma)),0!=r.xb){if(r.ca=s.ba,r.tb=s.tb,e(null!=r.ca),!On(s.Oa,i,Ui)){r.a=2;break n}if(!Ft(r,i.width))break n;if(i.da)break n;if((i.da||it(r.ca.S))&&mn(),11>r.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=r.ca.f.kb.F&&mn()),r.Pb&&0<r.s.ua&&null==r.s.vb.X&&!M(r.s.vb,r.s.Wa.Xa)){r.a=1;break n}r.xb=0}if(!St(r,r.V,r.Ba,r.c,r.i,i.o,bt))break n;s.Dc=r.Ma,r=1;break e}e(0!=r.a),r=0}r=!r}r&&(n=t.a)}else n=t.a}else{if(null==(t=new Kt)){a=1;break t}if(t.Fa=s.na,t.P=s.P,t.qc=s.Sa,Xt(t,r)){if(0==(n=Dn(r.width,r.height,a.Oa,a.ba))){if(t.Aa=0,i=a.Oa,e(null!=(s=t)),null!=i){if(0<(c=0>(c=i.Md)?0:100<c?255:255*c/100)){for(u=h=0;4>u;++u)12>(A=s.pb[u]).lc&&(A.ia=c*Qr[0>A.lc?0:A.lc]>>3),h|=A.ia;h&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=i.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}Jt(t,r)||(n=t.a)}}else n=t.a}0==n&&null!=a.Oa&&a.Oa.fd&&(n=kn(a.ba))}a=n}o=0!=a?null:11>o?l.f.RGBA.eb:l.f.kb.y}else o=null;return o};var Hr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function c(t,e){for(var n="",i=0;i<4;i++)n+=String.fromCharCode(t[e++]);return n}function u(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function h(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new l;var A=[0],d=[0],f=[],p=new l,g=t,m=function(t,e){var n={},i=0,r=!1,s=0,o=0;if(n.frames=[],!
/** @license
       * Copyright (c) 2017 Dominik Homberger
      Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
      The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
      THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
      https://webpjs.appspot.com
      WebPRiffParser dominikhlbg@gmail.com
      */
function(t,e,n,i){for(var r=0;r<i;r++)if(t[e+r]!=n.charCodeAt(r))return!0;return!1}(t,e,"RIFF",4)){var a,l;for(h(t,e+=4),e+=8;e<t.length;){var A=c(t,e),d=h(t,e+=4);e+=4;var f=d+(1&d);switch(A){case"VP8 ":case"VP8L":void 0===n.frames[i]&&(n.frames[i]={}),(m=n.frames[i]).src_off=r?o:e-8,m.src_size=s+d+8,i++,r&&(r=!1,s=0,o=0);break;case"VP8X":(m=n.header={}).feature_flags=t[e];var p=e+4;m.canvas_width=1+u(t,p),p+=3,m.canvas_height=1+u(t,p),p+=3;break;case"ALPH":r=!0,s=f+8,o=e-8;break;case"ANIM":(m=n.header).bgcolor=h(t,e),p=e+4,m.loop_count=(a=t)[(l=p)+0]<<0|a[l+1]<<8,p+=2;break;case"ANMF":var g,m;(m=n.frames[i]={}).offset_x=2*u(t,e),e+=3,m.offset_y=2*u(t,e),e+=3,m.width=1+u(t,e),e+=3,m.height=1+u(t,e),e+=3,m.duration=u(t,e),e+=3,g=t[e++],m.dispose=1&g,m.blend=g>>1&1}"ANMF"!=A&&(e+=f)}return n}}(g,0);m.response=g,m.rgbaoutput=!0,m.dataurl=!1;var v=m.header?m.header:null,y=m.frames?m.frames:null;if(v){v.loop_counter=v.loop_count,A=[v.canvas_height],d=[v.canvas_width];for(var w=0;w<y.length&&0!=y[w].blend;w++);}var _=y[0],b=p.WebPDecodeRGBA(g,_.src_off,_.src_size,d,A);_.rgba=b,_.imgwidth=d[0],_.imgheight=A[0];for(var x=0;x<d[0]*A[0]*4;x++)f[x]=b[x];return this.width=d,this.height=A,this.data=f,this}!function(t){var e=function(){return"function"==typeof PV},n=function(e,n,r,c){var u=4,h=o;switch(c){case t.image_compression.FAST:u=1,h=s;break;case t.image_compression.MEDIUM:u=6,h=a;break;case t.image_compression.SLOW:u=9,h=l}e=i(e,n,r,h);var A=PV(e,{level:u});return t.__addimage__.arrayBufferToBinaryString(A)},i=function(t,e,n,i){for(var r,s,o,a=t.length/e,l=new Uint8Array(t.length+a),c=u(),A=0;A<a;A+=1){if(o=A*e,r=t.subarray(o,o+e),i)l.set(i(r,n,s),o+A);else{for(var d,f=c.length,p=[];d<f;d+=1)p[d]=c[d](r,n,s);var g=h(p.concat());l.set(p[g],o+A)}s=r}return l},r=function(t){var e=Array.apply([],t);return e.unshift(0),e},s=function(t,e){var n,i=[],r=t.length;i[0]=1;for(var s=0;s<r;s+=1)n=t[s-e]||0,i[s+1]=t[s]-n+256&255;return i},o=function(t,e,n){var i,r=[],s=t.length;r[0]=2;for(var o=0;o<s;o+=1)i=n&&n[o]||0,r[o+1]=t[o]-i+256&255;return r},a=function(t,e,n){var i,r,s=[],o=t.length;s[0]=3;for(var a=0;a<o;a+=1)i=t[a-e]||0,r=n&&n[a]||0,s[a+1]=t[a]+256-(i+r>>>1)&255;return s},l=function(t,e,n){var i,r,s,o,a=[],l=t.length;a[0]=4;for(var u=0;u<l;u+=1)i=t[u-e]||0,r=n&&n[u]||0,s=n&&n[u-e]||0,o=c(i,r,s),a[u+1]=t[u]-o+256&255;return a},c=function(t,e,n){if(t===e&&e===n)return t;var i=Math.abs(e-n),r=Math.abs(t-n),s=Math.abs(t+e-n-n);return i<=r&&i<=s?t:r<=s?e:n},u=function(){return[r,s,o,a,l]},h=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(i,r,s,o){var a,l,c,u,h,A,d,f,p,g,m,v,y,w,_,b=this.decode.FLATE_DECODE,x="";if(this.__addimage__.isArrayBuffer(i)&&(i=new Uint8Array(i)),this.__addimage__.isArrayBufferView(i)){if(i=(c=new TW(i)).imgData,l=c.bits,a=c.colorSpace,h=c.colors,-1!==[4,6].indexOf(c.colorType)){if(8===c.bits){p=(f=32==c.pixelBitlength?new Uint32Array(c.decodePixels().buffer):16==c.pixelBitlength?new Uint16Array(c.decodePixels().buffer):new Uint8Array(c.decodePixels().buffer)).length,m=new Uint8Array(p*c.colors),g=new Uint8Array(p);var E,C=c.pixelBitlength-c.bits;for(w=0,_=0;w<p;w++){for(y=f[w],E=0;E<C;)m[_++]=y>>>E&255,E+=c.bits;g[w]=y>>>E&255}}if(16===c.bits){p=(f=new Uint32Array(c.decodePixels().buffer)).length,m=new Uint8Array(p*(32/c.pixelBitlength)*c.colors),g=new Uint8Array(p*(32/c.pixelBitlength)),v=c.colors>1,w=0,_=0;for(var S=0;w<p;)y=f[w++],m[_++]=y>>>0&255,v&&(m[_++]=y>>>16&255,y=f[w++],m[_++]=y>>>0&255),g[S++]=y>>>16&255;l=8}o!==t.image_compression.NONE&&e()?(i=n(m,c.width*c.colors,c.colors,o),d=n(g,c.width,1,o)):(i=m,d=g,b=void 0)}if(3===c.colorType&&(a=this.color_spaces.INDEXED,A=c.palette,c.transparency.indexed)){var B=c.transparency.indexed,T=0;for(w=0,p=B.length;w<p;++w)T+=B[w];if((T/=255)===p-1&&-1!==B.indexOf(0))u=[B.indexOf(0)];else if(T!==p){for(f=c.decodePixels(),g=new Uint8Array(f.length),w=0,p=f.length;w<p;w++)g[w]=B[f[w]];d=n(g,c.width,1)}}var I=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return b===this.decode.FLATE_DECODE&&(x="/Predictor "+I+" "),x+="/Colors "+h+" /BitsPerComponent "+l+" /Columns "+c.width,(this.__addimage__.isArrayBuffer(i)||this.__addimage__.isArrayBufferView(i))&&(i=this.__addimage__.arrayBufferToBinaryString(i)),(d&&this.__addimage__.isArrayBuffer(d)||this.__addimage__.isArrayBufferView(d))&&(d=this.__addimage__.arrayBufferToBinaryString(d)),{alias:s,data:i,index:r,filter:b,decodeParameters:x,transparency:u,palette:A,sMask:d,predictor:I,width:c.width,height:c.height,bitsPerComponent:l,colorSpace:a}}}}(pj.API),function(t){t.processGIF89A=function(e,n,i,r){var s=new IW(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var c={data:l,width:o,height:a},u=new LW(100).encode(c,100);return t.processJPEG.call(this,u,n,i,r)},t.processGIF87A=t.processGIF89A}(pj.API),RW.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},RW.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){DV.log("bit decode error:"+n)}},RW.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}0!==n&&(this.pos+=4-n)}},RW.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*r*4,a=s>>4,l=15&s,c=this.palette[a];if(this.data[o]=c.blue,this.data[o+1]=c.green,this.data[o+2]=c.red,this.data[o+3]=255,2*r+1>=this.width)break;c=this.palette[l],this.data[o+4]=c.blue,this.data[o+4+1]=c.green,this.data[o+4+2]=c.red,this.data[o+4+3]=255}0!==e&&(this.pos+=4-e)}},RW.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(r<this.palette.length){var o=this.palette[r];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==t&&(this.pos+=4-t)}},RW.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,c=s>>15?255:0,u=i*this.width*4+4*r;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=c}this.pos+=t}},RW.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,c=(o>>11)/e*255|0,u=r*this.width*4+4*s;this.data[u]=c,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},RW.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},RW.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=o}},RW.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2018 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.processBMP=function(e,n,i,r){var s=new RW(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new LW(100).encode(l,100);return t.processJPEG.call(this,c,n,i,r)}}(pj.API),MW.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2019 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.processWEBP=function(e,n,i,r){var s=new MW(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},c=new LW(100).encode(l,100);return t.processJPEG.call(this,c,n,i,r)}}(pj.API),pj.API.processRGBA=function(t,e,n){for(var i=t.data,r=i.length,s=new Uint8Array(r/4*3),o=new Uint8Array(r/4),a=0,l=0,c=0;c<r;c+=4){var u=i[c],h=i[c+1],A=i[c+2],d=i[c+3];s[a++]=u,s[a++]=h,s[a++]=A,o[l++]=d}var f=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:f,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},pj.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},xW=pj.API,EW=xW.getCharWidthsArray=function(t,e){var n,i,r=(e=e||{}).font||this.internal.getFont(),s=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:r.metadata.Unicode.widths,l=a.fof?a.fof:1,c=e.kerning?e.kerning:r.metadata.Unicode.kerning,u=c.fof?c.fof:1,h=!1!==e.doKerning,A=0,d=t.length,f=0,p=a[0]||l,g=[];for(n=0;n<d;n++)i=t.charCodeAt(n),"function"==typeof r.metadata.widthOfString?g.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+o*(1e3/s)||0)/1e3):(A=h&&"object"===HH(c[i])&&!isNaN(parseInt(c[i][f],10))?c[i][f]/u:0,g.push((a[i]||p)/l+A)),f=i;return g},CW=xW.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return xW.processArabic&&(t=xW.processArabic(t)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(t,n,r)/n:EW.apply(this,arguments).reduce((function(t,e){return t+e}),0)},SW=function(t,e,n,i){for(var r=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;r.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>i&&(r.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&r.push(t.slice(l,s)),r},BW=function(t,e,n){n||(n={});var i,r,s,o,a,l,c,u=[],h=[u],A=n.textIndent||0,d=0,f=0,p=t.split(" "),g=EW.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?p[0].length+2:n.lineIndent||0){var m=Array(l).join(" "),v=[];p.map((function(t){(t=t.split(/\s*\n/)).length>1?v=v.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):v.push(t[0])})),p=v,l=CW.apply(this,[m,n])}for(s=0,o=p.length;s<o;s++){var y=0;if(i=p[s],l&&"\n"==i[0]&&(i=i.substr(1),y=1),A+d+(f=(r=EW.apply(this,[i,n])).reduce((function(t,e){return t+e}),0))>e||y){if(f>e){for(a=SW.apply(this,[i,r,e-(A+d),e]),u.push(a.shift()),u=[a.pop()];a.length;)h.push([a.shift()]);f=r.slice(i.length-(u[0]?u[0].length:0)).reduce((function(t,e){return t+e}),0)}else u=[i];h.push(u),A=f+l,d=g}else u.push(i),A+=d+f,d=g}return c=l?function(t,e){return(e?m:"")+t.join(" ")}:function(t){return t.join(" ")},h.map(c)},xW.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/r;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=n.lineIndent;var a,l,c=[];for(a=0,l=i.length;a<l;a++)c=c.concat(BW.apply(this,[i[a],o,s]));return c},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},i={},r=0;r<e.length;r++)n[e[r]]="0123456789abcdef"[r],i["0123456789abcdef"[r]]=e[r];var s=function(t){return"0x"+parseInt(t,10).toString(16)},o=t.__fontmetrics__.compress=function(t){var e,n,r,a,l=["{"];for(var c in t){if(e=t[c],isNaN(parseInt(c,10))?n="'"+c+"'":(c=parseInt(c,10),n=(n=s(c).slice(2)).slice(0,-1)+i[n.slice(-1)]),"number"==typeof e)e<0?(r=s(e).slice(3),a="-"):(r=s(e).slice(2),a=""),r=a+r.slice(0,-1)+i[r.slice(-1)];else{if("object"!==HH(e))throw new Error("Don't know what to do with value type "+HH(e)+".");r=o(e)}l.push(n+r)}return l.push("}"),l.join("")},a=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,i,r,s,o={},a=1,l=o,c=[],u="",h="",A=t.length-1,d=1;d<A;d+=1)"'"==(s=t[d])?e?(r=e.join(""),e=void 0):e=[]:e?e.push(s):"{"==s?(c.push([l,r]),l={},r=void 0):"}"==s?((i=c.pop())[0][i[1]]=l,r=void 0,l=i[0]):"-"==s?a=-1:void 0===r?n.hasOwnProperty(s)?(u+=n[s],r=parseInt(u,16)*a,a=1,u=""):u+=s:n.hasOwnProperty(s)?(h+=n[s],l[r]=parseInt(h,16)*a,a=1,r=void 0,h=""):h+=s;return o},l={codePages:["WinAnsiEncoding"],WinAnsiEncoding:a("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:l,"Courier-Bold":l,"Courier-BoldOblique":l,"Courier-Oblique":l,Helvetica:l,"Helvetica-Bold":l,"Helvetica-BoldOblique":l,"Helvetica-Oblique":l,"Times-Roman":l,"Times-Bold":l,"Times-BoldItalic":l,"Times-Italic":l}},u={Unicode:{"Courier-Oblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":a("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":a("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:a("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":a("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:a("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":a("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":a("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":a("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":a("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=u.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var i=c.Unicode[e.postScriptName];i&&(e.metadata.Unicode.encoding=i,e.encoding=i.codePages[0])}])}(pj.API),
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n};t.API.events.push(["addFont",function(n){var i=void 0,r=n.font,s=n.instance;if(!r.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(i=!1===s.existsFileInVFS(r.postScriptName)?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");!function(n,i){i=/^\x00\x01\x00\x00/.test(i)?e(i):e(HV(i)),n.metadata=t.API.TTFFont.open(i),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(r,i)}}])}(pj),
/** @license
 * Copyright (c) 2012 Willow Systems Corporation, https://github.com/willowsystems
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(t){function e(){return(OV.canvg?Promise.resolve(OV.canvg):Promise.resolve().then((()=>kgt))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}pj.API.addSvgAsImage=function(t,n,i,r,s,o,a,l){if(isNaN(n)||isNaN(i))throw DV.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw DV.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=s;var u=c.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,c.width,c.height);var h={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},A=this;return e().then((function(e){return e.fromString(u,t,h)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(h)})).then((function(){A.addImage(c.toDataURL("image/jpeg",1),n,i,r,s,a,l)}))}}(),pj.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},pj.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,r,s,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],c=0,u=0,h=0;function A(t,e){var n,i=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(i=!0);return i}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var d=a.length;for(h=0;h<d;h+=1)n[a[h]].value=n[a[h]].defaultValue,n[a[h]].explicitSet=!1}if("object"===HH(t))for(r in t)if(s=t[r],A(a,r)&&void 0!==s){if("boolean"===n[r].type&&"boolean"==typeof s)n[r].value=s;else if("name"===n[r].type&&A(n[r].valueSet,s))n[r].value=s;else if("integer"===n[r].type&&Number.isInteger(s))n[r].value=s;else if("array"===n[r].type){for(c=0;c<s.length;c+=1)if(i=!0,1===s[c].length&&"number"==typeof s[c][0])l.push(String(s[c]-1));else if(s[c].length>1){for(u=0;u<s[c].length;u+=1)"number"!=typeof s[c][u]&&(i=!1);!0===i&&l.push([s[c][0]-1,s[c][1]-1].join(" "))}n[r].value="["+l.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&("name"===n[t].type?e.push("/"+t+" /"+n[t].value):e.push("/"+t+" "+n[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},
/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),o=n.length+i.length+r.length+e.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+o+" >>"),this.internal.write("stream"),this.internal.write(e+n+i+r+s),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,i){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(pj.API),function(t){var e=t.API,n=e.pdfEscape16=function(t,e){for(var n,i=e.metadata.Unicode.widths,r=["","0","00","000","0000"],s=[""],o=0,a=t.length;o<a;++o){if(n=e.metadata.characterToGlyph(t.charCodeAt(o)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(o),-1==i.indexOf(n)&&(i.push(n),i.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(r[4-n.length],n)}return s.join("")},i=function(t){var e,n,i,r,s,o,a;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",i=[],o=0,a=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;o<a;o++)e=n[o],i.length>=100&&(s+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar",i=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(r=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),i.push("<"+e+"><"+r+">"));return i.length&&(s+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var n=e.font,r=e.out,s=e.newObject,o=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"Identity-H"===n.encoding){for(var a=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),c="",u=0;u<l.length;u++)c+=String.fromCharCode(l[u]);var h=s();o({data:c,addLength1:!0,objectId:h}),r("endobj");var A=s();o({data:i(n.metadata.toUnicode),addLength1:!0,objectId:A}),r("endobj");var d=s();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+cj(n.fontName)),r("/FontFile2 "+h+" 0 R"),r("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),r("/Flags "+n.metadata.flags),r("/StemV "+n.metadata.stemV),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r(">>"),r("endobj");var f=s();r("<<"),r("/Type /Font"),r("/BaseFont /"+cj(n.fontName)),r("/FontDescriptor "+d+" 0 R"),r("/W "+t.API.PDFObject.convert(a)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+n.encoding+")"),r(">>"),r(">>"),r("endobj"),n.objectNumber=s(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+A+" 0 R"),r("/BaseFont /"+cj(n.fontName)),r("/Encoding /"+n.encoding),r("/DescendantFonts ["+f+" 0 R]"),r(">>"),r("endobj"),n.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var n=e.font,r=e.out,s=e.newObject,o=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var a=n.metadata.rawData,l="",c=0;c<a.length;c++)l+=String.fromCharCode(a[c]);var u=s();o({data:l,addLength1:!0,objectId:u}),r("endobj");var h=s();o({data:i(n.metadata.toUnicode),addLength1:!0,objectId:h}),r("endobj");var A=s();r("<<"),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r("/StemV "+n.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+u+" 0 R"),r("/Flags 96"),r("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),r("/FontName /"+cj(n.fontName)),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r(">>"),r("endobj"),n.objectNumber=s();for(var d=0;d<n.metadata.hmtx.widths.length;d++)n.metadata.hmtx.widths[d]=parseInt(n.metadata.hmtx.widths[d]*(1e3/n.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+cj(n.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),r("endobj"),n.isAlreadyPutted=!0}}(e)}]);var r=function(t){var e,i=t.text||"",r=t.x,s=t.y,o=t.options||{},a=t.mutex||{},l=a.pdfEscape,c=a.activeFontKey,u=a.fonts,h=c,A="",d=0,f="",p=u[h].encoding;if("Identity-H"!==u[h].encoding)return{text:i,x:r,y:s,options:o,mutex:a};for(f=i,h=c,Array.isArray(i)&&(f=i[0]),d=0;d<f.length;d+=1)u[h].metadata.hasOwnProperty("cmap")&&(e=u[h].metadata.cmap.unicode.codeMap[f[d].charCodeAt(0)]),e||f[d].charCodeAt(0)<256&&u[h].metadata.hasOwnProperty("Unicode")?A+=f[d]:A+="";var g="";return parseInt(h.slice(1))<14||"WinAnsiEncoding"===p?g=l(A,h).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===p&&(g=n(A,u[h])),a.isHex=!0,{text:g,x:r,y:s,options:o,mutex:a}};e.events.push(["postProcessText",function(t){var e=t.text||"",n=[],i={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var s=0;for(s=0;s<e.length;s+=1)Array.isArray(e[s])&&3===e[s].length?n.push([r(Object.assign({},i,{text:e[s][0]})).text,e[s][1],e[s][2]]):n.push(r(Object.assign({},i,{text:e[s]})).text);t.text=n}else t.text=r(Object.assign({},i,{text:e})).text}])}(pj),
/**
 * @license
 * jsPDF virtual FileSystem functionality
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(pj.API),
/**
 * @license
 * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
 * MIT License
 */
function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,i,r,s,o,a,l,c=e,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],h=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],A={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},d={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},f=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,m=0;this.__bidiEngine__={};var v=function(t){var e=t.charCodeAt(),n=e>>8,i=d[n];return void 0!==i?c[256*i+(255&e)]:252===n||253===n?"AL":p.test(n)?"L":8===n?"R":"N"},y=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=v(t.charAt(n))))return!1;if("R"===e)return!0}return!1},w=function(t,e,o,a){var l,c,u,h,A=e[a];switch(A){case"L":case"R":g=!1;break;case"N":case"AN":break;case"EN":g&&(A="AN");break;case"AL":g=!0,A="R";break;case"WS":A="N";break;case"CS":a<1||a+1>=e.length||"EN"!==(l=o[a-1])&&"AN"!==l||"EN"!==(c=e[a+1])&&"AN"!==c?A="N":g&&(c="AN"),A=c===l?c:"N";break;case"ES":A="EN"===(l=a>0?o[a-1]:"B")&&a+1<e.length&&"EN"===e[a+1]?"EN":"N";break;case"ET":if(a>0&&"EN"===o[a-1]){A="EN";break}if(g){A="N";break}for(u=a+1,h=e.length;u<h&&"ET"===e[u];)u++;A=u<h&&"EN"===e[u]?"EN":"N";break;case"NSM":if(r&&!s){for(h=e.length,u=a+1;u<h&&"NSM"===e[u];)u++;if(u<h){var d=t[a],f=d>=1425&&d<=2303||64286===d;if(l=e[u],f&&("R"===l||"AL"===l)){A="R";break}}}A=a<1||"B"===(l=e[a-1])?"N":o[a-1];break;case"B":g=!1,n=!0,A=m;break;case"S":i=!0,A="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"BN":A="N"}return A},_=function(t,e,n){var i=t.split("");return n&&b(i,n,{hiLevel:m}),i.reverse(),e&&e.reverse(),i.join("")},b=function(t,e,r){var s,o,a,l,c,d=-1,f=t.length,p=0,y=[],_=m?h:u,b=[];for(g=!1,n=!1,i=!1,o=0;o<f;o++)b[o]=v(t[o]);for(a=0;a<f;a++){if(c=p,y[a]=w(t,b,y,a),s=240&(p=_[c][A[y[a]]]),p&=15,e[a]=l=_[p][5],s>0)if(16===s){for(o=d;o<a;o++)e[o]=1;d=-1}else d=-1;if(_[p][6])-1===d&&(d=a);else if(d>-1){for(o=d;o<a;o++)e[o]=l;d=-1}"B"===b[a]&&(e[a]=0),r.hiLevel|=l}i&&function(t,e,n){for(var i=0;i<n;i++)if("S"===t[i]){e[i]=m;for(var r=i-1;r>=0&&"WS"===t[r];r--)e[r]=m}}(b,e,f)},x=function(t,e,i,r,s){if(!(s.hiLevel<t)){if(1===t&&1===m&&!n)return e.reverse(),void(i&&i.reverse());for(var o,a,l,c,u=e.length,h=0;h<u;){if(r[h]>=t){for(l=h+1;l<u&&r[l]>=t;)l++;for(c=h,a=l-1;c<a;c++,a--)o=e[c],e[c]=e[a],e[a]=o,i&&(o=i[c],i[c]=i[a],i[a]=o);h=l}h++}}},E=function(t,e,n){var i=t.split(""),r={hiLevel:m};return n||(n=[]),b(i,n,r),function(t,e,n){if(0!==n.hiLevel&&l)for(var i,r=0;r<t.length;r++)1===e[r]&&(i=f.indexOf(t[r]))>=0&&(t[r]=f[i+1])}(i,n,r),x(2,i,e,n,r),x(1,i,e,n,r),i.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===s&&(s=y(t)),void 0===a&&(a=y(t))}(t,e),r||!o||a)if(r&&o&&s^a)m=s?1:0,t=_(t,e,n);else if(!r&&o&&a)m=s?1:0,t=E(t,e,n),t=_(t,e);else if(!r||s||o||a){if(r&&!o&&s^a)t=_(t,e),s?(m=0,t=E(t,e,n)):(m=1,t=E(t,e,n),t=_(t,e));else if(r&&s&&!o&&a)m=1,t=E(t,e,n),t=_(t,e);else if(!r&&!o&&s^a){var i=l;s?(m=1,t=E(t,e,n),m=0,l=!1,t=E(t,e,n),l=i):(m=0,t=E(t,e,n),t=_(t,e),m=1,l=!1,t=E(t,e,n),l=i,t=_(t,e))}}else m=0,t=E(t,e,n);else m=s?1:0,t=E(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(r=t.isInputVisual,o=t.isOutputVisual,s=t.isInputRtl,a=t.isOutputRtl,l=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,i=(t.x,t.y,t.options||{}),r=(t.mutex,i.lang,[]);if(i.isInputVisual="boolean"!=typeof i.isInputVisual||i.isInputVisual,n.setOptions(i),"[object Array]"===Object.prototype.toString.call(e)){var s=0;for(r=[],s=0;s<e.length;s+=1)"[object Array]"===Object.prototype.toString.call(e[s])?r.push([n.doBidiReorder(e[s][0]),e[s][1],e[s][2]]):r.push([n.doBidiReorder(e[s])]);t.text=r}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(pj),pj.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new NW(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new tz(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new OW(this.contents),this.head=new UW(this),this.name=new zW(this),this.cmap=new GW(this),this.toUnicode={},this.hhea=new HW(this),this.maxp=new KW(this),this.hmtx=new qW(this),this.post=new jW(this),this.os2=new VW(this),this.loca=new JW(this),this.glyf=new XW(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.bbox).length;e<n;e++)t=i[e],r.push(Math.round(t*this.scaleFactor));return r}.call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),0!=(32768&(e=i>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var i,r,s,o;for(s=0,r=0,o=(t=""+t).length;0<=o?r<o:r>o;r=0<=o?++r:--r)i=t.charCodeAt(r),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return s*(e/1e3)},t.prototype.lineHeight=function(t,e){var n;return null==e&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},t}();var PW,NW=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,i,r,s,o,a;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^r)+65536*(255^s)+256*(255^o)+(255^a)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*r+65536*s+256*o+a},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(this.writeByte(e));return r},t}(),OW=function(){var t;function e(t){var e,n,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,i,r,s,o,a,l,c,u,h,A,d,f;for(f in A=Object.keys(e).length,a=Math.log(2),u=16*Math.floor(Math.log(A)/a),s=Math.floor(u/a),c=16*A-u,(i=new NW).writeInt(this.scalarType),i.writeShort(A),i.writeShort(u),i.writeShort(s),i.writeShort(c),r=16*A,l=i.pos+r,o=null,d=[],e)for(h=e[f],i.writeString(f),i.writeInt(t(h)),i.writeInt(l),i.writeInt(h.length),d=d.concat(h),"head"===f&&(o=l),l+=h.length;l%4;)d.push(0),l++;return i.write(d),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(t){var e,n,i,r;for(t=$W.call(t);t.length%4;)t.push(0);for(i=new NW(t),n=0,e=0,r=t.length;e<r;e=e+=4)n+=i.readUInt32();return 4294967295&n},e}(),kW={}.hasOwnProperty,DW=function(t,e){for(var n in e)kW.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};PW=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var UW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new NW).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),QW=function(){function t(t,e){var n,i,r,s,o,a,l,c,u,h,A,d,f,p,g,m,v;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=0;a<256;++a)this.codeMap[a]=t.readByte();break;case 4:for(A=t.readUInt16(),h=A/2,t.pos+=6,r=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,f=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),c=function(){var e,n;for(n=[],a=e=0;0<=h?e<h:e>h;a=0<=h?++e:--e)n.push(t.readUInt16());return n}(),i=(this.length-t.pos+this.offset)/2,o=function(){var e,n;for(n=[],a=e=0;0<=i?e<i:e>i;a=0<=i?++e:--e)n.push(t.readUInt16());return n}(),a=g=0,v=r.length;g<v;a=++g)for(p=r[a],n=m=d=f[a];d<=p?m<=p:m>=p;n=d<=p?++m:--m)0===c[a]?s=n+l[a]:0!==(s=o[c[a]/2+(n-d)-(h-a)]||0)&&(s+=l[a]),this.codeMap[n]=65535&s}t.pos=u}return t.encode=function(t,e){var n,i,r,s,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w,_,b,x,E,C,S,B,T,I,F,L,R,M,P,N,O,k,D,U,Q,G,H,V,j,W,z,K;switch(I=new NW,s=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(f=0,p=function(){var t=[];for(d=0;d<256;++d)t.push(0);return t}(),m={0:0},r={},F=0,P=s.length;F<P;F++)null==m[j=t[i=s[F]]]&&(m[j]=++f),r[i]={old:t[i],new:m[t[i]]},p[i]=m[t[i]];return I.writeUInt16(1),I.writeUInt16(0),I.writeUInt32(12),I.writeUInt16(0),I.writeUInt16(262),I.writeUInt16(0),I.write(p),{charMap:r,subtable:I.data,maxGlyphID:f+1};case"unicode":for(B=[],u=[],v=0,m={},n={},g=l=null,L=0,N=s.length;L<N;L++)null==m[w=t[i=s[L]]]&&(m[w]=++v),n[i]={old:w,new:m[w]},o=m[w]-i,null!=g&&o===l||(g&&u.push(g),B.push(i),l=o),g=i;for(g&&u.push(g),u.push(65535),B.push(65535),C=2*(E=B.length),x=2*Math.pow(Math.log(E)/Math.LN2,2),h=Math.log(x/2)/Math.LN2,b=2*E-x,a=[],_=[],A=[],d=R=0,O=B.length;R<O;d=++R){if(S=B[d],c=u[d],65535===S){a.push(0),_.push(0);break}if(S-(T=n[S].new)>=32768)for(a.push(0),_.push(2*(A.length+E-d)),i=M=S;S<=c?M<=c:M>=c;i=S<=c?++M:--M)A.push(n[i].new);else a.push(T-S),_.push(0)}for(I.writeUInt16(3),I.writeUInt16(1),I.writeUInt32(12),I.writeUInt16(4),I.writeUInt16(16+8*E+2*A.length),I.writeUInt16(0),I.writeUInt16(C),I.writeUInt16(x),I.writeUInt16(h),I.writeUInt16(b),H=0,k=u.length;H<k;H++)i=u[H],I.writeUInt16(i);for(I.writeUInt16(0),V=0,D=B.length;V<D;V++)i=B[V],I.writeUInt16(i);for(W=0,U=a.length;W<U;W++)o=a[W],I.writeUInt16(o);for(z=0,Q=_.length;z<Q;z++)y=_[z],I.writeUInt16(y);for(K=0,G=A.length;K<G;K++)f=A[K],I.writeUInt16(f);return{charMap:n,subtable:I.data,maxGlyphID:v+1}}},t}(),GW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new QW(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var n,i;return null==e&&(e="macroman"),n=QW.encode(t,e),(i=new NW).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},e}(),HW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),VW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),jW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="post",e.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var r;for(n=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 196608:break;case 262144:return this.map=function(){var e,n,i;for(i=[],r=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:e>n;r=0<=n?++e:--e)i.push(t.readUInt32());return i}.call(this)}},e}(),WW=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="name",e.prototype.parse=function(t){var e,n,i,r,s,o,a,l,c,u,h;for(t.pos=this.offset,t.readShort(),e=t.readShort(),o=t.readShort(),n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(a={},r=c=0,u=n.length;c<u;r=++c)i=n[r],t.pos=i.offset,l=t.readString(i.length),s=new WW(l,i),null==a[h=i.nameID]&&(a[h]=[]),a[i.nameID].push(s);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(A){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},e}(),KW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),qW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,n,i,r,s,o,a;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:e>o;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,r;for(r=[],e=n=0;0<=i?n<i:n>i;e=0<=i?++n:--n)r.push(t.readInt16());return r}(),this.widths=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.metrics).length;t<e;t++)r=n[t],i.push(r.advance);return i}.call(this),n=this.widths[this.widths.length-1],a=[],e=s=0;0<=i?s<i:s>i;e=0<=i?++s:--s)a.push(this.widths.push(n));return a},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),$W=[].slice,XW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,n,i,r,s,o,a,l,c,u;return t in this.cache?this.cache[t]:(r=this.file.loca,e=this.file.contents,n=r.indexOf(t),0===(i=r.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,s=(o=new NW(e.read(i))).readShort(),l=o.readShort(),u=o.readShort(),a=o.readShort(),c=o.readShort(),this.cache[t]=-1===s?new ZW(o,l,u,a,c):new YW(o,s,l,u,a,c),this.cache[t]))},e.prototype.encode=function(t,e,n){var i,r,s,o,a;for(s=[],r=[],o=0,a=e.length;o<a;o++)i=t[e[o]],r.push(s.length),i&&(s=s.concat(i.encode(n)));return r.push(s.length),{table:s,offsets:r}},e}(),YW=function(){function t(t,e,n,i,r,s){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),ZW=function(){function t(t,e,n,i,r){var s,o;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var t,e,n;for(e=new NW($W.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),JW=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return DW(e,PW),e.prototype.tag="loca",e.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,i;for(i=[],n=0,e=this.length;n<e;n+=2)i.push(2*t.readUInt16());return i}.call(this):function(){var e,i;for(i=[],n=0,e=this.length;n<e;n+=4)i.push(t.readUInt32());return i}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,r=0,s=0;s<n.length;++s)if(n[s]=i,r<e.length&&e[r]==s){++r,n[s]=i;var o=this.offsets[s],a=this.offsets[s+1]-o;a>0&&(i+=a)}for(var l=new Array(4*n.length),c=0;c<n.length;++c)l[4*c+3]=255&n[c],l[4*c+2]=(65280&n[c])>>8,l[4*c+1]=(16711680&n[c])>>16,l[4*c]=(4278190080&n[c])>>24;return l},e}(),tz=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,i,r;for(e in i=this.font.cmap.tables[0].codeMap,t={},r=this.subset)n=r[e],t[e]=i[n];return t},t.prototype.glyphsFor=function(t){var e,n,i,r,s,o,a;for(i={},s=0,o=t.length;s<o;s++)i[r=t[s]]=this.font.glyf.glyphFor(r);for(r in e=[],i)(null!=(n=i[r])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(r in a=this.glyphsFor(e))n=a[r],i[r]=n;return i},t.prototype.encode=function(t,e){var n,i,r,s,o,a,l,c,u,h,A,d,f,p,g;for(i in n=GW.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),A={0:0},g=n.charMap)A[(a=g[i]).old]=a.new;for(d in h=n.maxGlyphID,s)d in A||(A[d]=h++);return c=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(A),u=Object.keys(c).sort((function(t,e){return t-e})),f=function(){var t,e,n;for(n=[],t=0,e=u.length;t<e;t++)o=u[t],n.push(c[o]);return n}(),r=this.font.glyf.encode(s,f,A),l=this.font.loca.encode(r.offsets,f),p={cmap:this.font.cmap.raw(),glyf:r.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(p["OS/2"]=this.font.os2.raw()),this.font.directory.encode(p)},t}();pj.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var i,r,s,o;if(Array.isArray(n))return"["+function(){var t,r,s;for(s=[],t=0,r=n.length;t<r;t++)i=n[t],s.push(e.convert(i));return s}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(r in s=["<<"],n)o=n[r],s.push("/"+r+" "+e.convert(o));return s.push(">>"),s.join("\n")}return""+n},e}();const ez=(0,Em.pM)({__name:"OlPrintDialogControl",props:{className:{},lang:{},imageType:{},quality:{},orientation:{},immediate:{type:Boolean},openWindow:{type:Boolean},copy:{type:Boolean},print:{type:Boolean},pdf:{type:Boolean},saveAs:{},northImage:{},jsPDF:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(fM,r,i);return s.value.on(["print","error"],(t=>{if(t.image)if(t.pdf){const e=new pj({orientation:t.print.orientation,unit:t.print.unit,format:t.print.size});e.addImage(t.image,"JPEG",t.print.position[0],t.print.position[0],t.print.imageWidth,t.print.imageHeight),e.save(t.print.legend?"legend.pdf":"map.pdf")}else t.canvas.toBlob((e=>{const n=(t.print.legend?"legend.":"map.")+t.imageType.replace("image/","");GH.saveAs(e,n)}),t.imageType,t.quality);else console.warn("No canvas to export")})),e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),nz=(0,Em.pM)({__name:"OlRotateControl",props:{className:{default:"ol-rotate"},label:{default:""},tipLabel:{default:"Reset rotation"},compassClassName:{default:"ol-compass"},duration:{default:250},autoHide:{type:Boolean,default:!1},render:{},resetNorth:{},target:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(Iw,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),iz=(0,Em.pM)({__name:"OlScaleLineControl",props:{className:{default:"ol-scale-line"},minWidth:{default:64},render:{},target:{},units:{default:"metric"},bar:{type:Boolean,default:!1},steps:{default:4},text:{default:""},dpi:{default:void 0}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(cR,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),rz=(0,Em.pM)({__name:"OlSearchControl",props:{className:{default:"ol-search"},title:{},label:{},reverseTitle:{},placeholder:{},reverse:{type:Boolean},inputLabel:{},collapsed:{type:Boolean},noCollapse:{type:Boolean},typing:{},minLength:{},maxItems:{},maxHistory:{},getTitle:{},autocomplete:{},onselect:{},centerOnSelect:{type:Boolean},zoomOnSelect:{},element:{},render:{},target:{}},emits:["select"],setup(t,{expose:e,emit:n}){const i=n,r=t,s=(0,Em.OA)(),{properties:o}=XP(r),{control:a}=TH(gM,o,s);return a.value.on("select",(t=>i("select",t))),e({control:a}),(t,e)=>(0,Em.Q3)("",!0)}}),sz=(0,Em.pM)({__name:"OlSwipeControl",props:{layerList:{},className:{default:"ol-swipe"},position:{default:.5},orientation:{default:"vertical"}},setup(t,{expose:e}){var n;const i=t,r=(0,Em.OA)(),{properties:s}=XP(i),{control:o}=TH(vM,s,r);return null==(n=i.layerList)||n.forEach(((t,e)=>{o.value.addLayer(t,1===e)})),e({control:o}),(t,e)=>(0,Em.Q3)("",!0)}}),oz=(0,Em.pM)({__name:"OlToggleControl",props:{className:{},title:{},html:{},interaction:{},active:{type:Boolean},disable:{type:Boolean},bar:{},autoActive:{type:Boolean},onToggle:{},element:{},render:{},target:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(wM,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),az=(0,Em.pM)({inheritAttrs:!1,__name:"OlVideoRecorderControl",props:{className:{},frameRate:{},videoBitsPerSecond:{},videoTarget:{},element:{},render:{},target:{},downloadName:{default:"mapVideo.mp4"}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(bM,r,i);return eN(s,["start","stop","pause","resume"]),s.value.on("stop",(t=>{n.downloadName&&GH.saveAs(t.videoURL,n.downloadName)})),e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),lz=(0,Em.pM)({__name:"OlZoneControl",props:{className:{default:"ol-mapzone"},layer:{},projection:{default:"EPSG:3857"},centerOnClick:{type:Boolean,default:!0},element:{},render:{},target:{},zones:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(EM,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),cz=(0,Em.pM)({__name:"OlZoomControl",props:{duration:{default:250},className:{default:"ol-zoom"},zoomInClassName:{default:"ol-zoom-in"},zoomOutClassName:{default:"ol-zoom-out"},zoomInLabel:{default:"+"},zoomOutLabel:{default:"-"},zoomInTipLabel:{default:"Zoom in"},zoomOutTipLabel:{default:"Zoom Out"},delta:{default:1},target:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(Lw,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),uz=(0,Em.pM)({__name:"OlZoomSliderControl",props:{duration:{default:200},className:{default:"ol-zoomslider"},render:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(BM,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}}),hz=(0,Em.pM)({__name:"OlZoomToExtentControl",props:{className:{default:"ol-zoom-extent"},target:{},label:{default:"E"},tipLabel:{default:"Fit to extent"},extent:{}},setup(t,{expose:e}){const n=t,i=(0,Em.OA)(),{properties:r}=XP(n),{control:s}=TH(IM,r,i);return e({control:s}),(t,e)=>(0,Em.Q3)("",!0)}});function Az(t){t.component("ol-attribution-control",IH),t.component("ol-fullscreen-control",MH),t.component("ol-mouseposition-control",OH),t.component("ol-overviewmap-control",kH),t.component("ol-scaleline-control",iz),t.component("ol-zoom-control",cz),t.component("ol-zoomslider-control",uz),t.component("ol-zoomtoextent-control",hz),t.component("ol-rotate-control",nz),t.component("ol-context-menu-control",LH),t.component("ol-search-control",rz),t.component("ol-swipe-control",sz),t.component("ol-control-bar",RH),t.component("ol-toggle-control",oz),t.component("ol-button-control",FH),t.component("ol-printdialog-control",ez),t.component("ol-videorecorder-control",az),t.component("ol-layerswitcher-control",PH),t.component("ol-layerswitcherimage-control",NH),t.component("ol-zone-control",lz)}Symbol.toStringTag;function dz(t,e){const n=(0,Em.WQ)("feature"),{properties:i}=XP(e),r=(0,Em.EW)((()=>new t(...Object.values(i))));return(0,Em.wB)(i,(()=>{var t,e;null==(t=null==n?void 0:n.value)||t.setGeometry(r.value),null==(e=null==n?void 0:n.value)||e.changed()})),(0,Em.wB)((()=>n),(()=>{var t;null==(t=null==n?void 0:n.value)||t.setGeometry(r.value)})),(0,Em.sV)((()=>{var t;null==(t=null==n?void 0:n.value)||t.setGeometry(r.value)})),(0,Em.hi)((()=>{var t;null==(t=null==n?void 0:n.value)||t.setGeometry(void 0)})),{geometry:r}}const fz=(0,Em.pM)({__name:"OlGeomCircle",props:{center:{},radius:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const n=t,{geometry:i}=dz(ei,n);return e({geometry:i}),(t,e)=>(0,Em.Q3)("",!0)}}),pz=(0,Em.pM)({__name:"OlGeomLineString",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const n=t,{geometry:i}=dz(Gi,n);return e({geometry:i}),(t,e)=>(0,Em.Q3)("",!0)}}),gz=(0,Em.pM)({__name:"OlGeomMultiLineString",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const n=t,{geometry:i}=dz(Vi,n);return e({geometry:i}),(t,e)=>(0,Em.Q3)("",!0)}}),mz=(0,Em.pM)({__name:"OlGeomMultiPoint",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const n=t,{geometry:i}=dz(Ki,n);return e({geometry:i}),(t,e)=>(0,Em.Q3)("",!0)}}),vz=(0,Em.pM)({__name:"OlGeomMultiPolygon",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const n=t,{geometry:i}=dz(hr,n);return e({geometry:i}),(t,e)=>(0,Em.Q3)("",!0)}}),yz=(0,Em.pM)({__name:"OlGeomPoint",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const n=t,{geometry:i}=dz(Wi,n);return e({geometry:i}),(t,e)=>(0,Em.Q3)("",!0)}}),wz=(0,Em.pM)({__name:"OlGeomPolygon",props:{coordinates:{},opt_layout:{default:"XY"}},setup(t,{expose:e}){const n=t,{geometry:i}=dz(rr,n);return e({geometry:i}),(t,e)=>(0,Em.Q3)("",!0)}});function _z(t){t.component("ol-geom-circle",fz),t.component("ol-geom-line-string",pz),t.component("ol-geom-multi-line-string",gz),t.component("ol-geom-multi-point",mz),t.component("ol-geom-multi-polygon",vz),t.component("ol-geom-point",yz),t.component("ol-geom-polygon",wz)}Symbol.toStringTag;const bz=(0,Em.pM)({__name:"OlStyle",props:{zIndex:{},overrideStyleFunction:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("stylable",void 0),{properties:r}=XP(n),s=(0,Em.EW)((()=>new Qc(r))),o=t=>{const e=null==i?void 0:i.value;if(e)if(e instanceof zM||e instanceof sP)e.getOverlay().setStyle(t),e.changed(),e.dispatchEvent("styleChanged");else try{e.setStyle(t),e.changed(),e.dispatchEvent("styleChanged")}catch(n){e.style_=t,e.values_.style=t,e.changed(),e.dispatchEvent("styleChanged")}},a=(0,Em.EW)((()=>(t,e)=>r.overrideStyleFunction?r.overrideStyleFunction(t,s.value,e):s.value));return(0,Em.wB)(r,(()=>o(r.overrideStyleFunction?a.value:s.value))),(0,Em.sV)((()=>o(r.overrideStyleFunction?a.value:s.value))),(0,Em.hi)((()=>{o(new Qc)})),(0,Em.Gt)("style",s),(0,Em.Gt)("styledObj",i),e({style:s}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),xz=(0,Em.pM)({__name:"OlStyleCircle",props:{radius:{},scale:{}},setup(t){const e=t,n=(0,Em.WQ)("style",null),i=(0,Em.WQ)("styledObj",null),{properties:r}=XP(e),s=t=>new Mc({...t,fill:new Dl,stroke:new ql}),o=(0,Em.EW)((()=>s(r))),a=()=>{var t,e,r;null==(t=null==n?void 0:n.value)||t.setImage(null),null==(e=null==n?void 0:n.value)||e.setImage(o.value),null==(r=null==i?void 0:i.value)||r.changed()};return(0,Em.wB)(r,(()=>{a()})),(0,Em.wB)((()=>n),(()=>{a()})),(0,Em.sV)((()=>{var t;null==(t=null==n?void 0:n.value)||t.setImage(o.value)})),(0,Em.hi)((()=>{var t;null==(t=null==n?void 0:n.value)||t.setImage(null)})),(0,Em.Gt)("circle",o),(0,Em.Gt)("styledObj",i),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),Ez=(0,Em.pM)({__name:"OlStyleStroke",props:{color:{},lineCap:{default:"round"},lineJoin:{default:"round"},lineDash:{},lineDashOffset:{default:0},miterLimit:{default:10},width:{default:1}},setup(t){var e;const n=t,i=(0,Em.WQ)("style",null),r=(0,Em.WQ)("styledObj",null),s=(0,Em.WQ)("circle",null),{properties:o}=XP(n);if(null!=i&&null==s){let t=new ql(o);null==(e=i.value)||e.setStroke(t);const n=()=>{var e,n;null==(e=null==i?void 0:i.value)||e.setStroke(new ql),t=new ql(o),null==(n=null==i?void 0:i.value)||n.setStroke(t)};(0,Em.wB)(o,(()=>{n()})),(0,Em.wB)(i,(()=>{n()})),(0,Em.sV)((()=>{var e;null==(e=null==i?void 0:i.value)||e.setStroke(t)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setStroke(new ql)}))}else if(null!=s){const t=t=>{var e,n,i,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w;null==(n=null==(e=null==s?void 0:s.value)?void 0:e.getStroke())||n.setColor(t.color||""),null==(o=null==(i=null==s?void 0:s.value)?void 0:i.getStroke())||o.setLineCap(t.lineCap),null==(l=null==(a=null==s?void 0:s.value)?void 0:a.getStroke())||l.setLineDash(t.lineDash||[]),null==(u=null==(c=null==s?void 0:s.value)?void 0:c.getStroke())||u.setLineDashOffset(t.lineDashOffset),null==(A=null==(h=null==s?void 0:s.value)?void 0:h.getStroke())||A.setLineJoin(t.lineJoin),null==(f=null==(d=null==s?void 0:s.value)?void 0:d.getStroke())||f.setMiterLimit(t.miterLimit),null==(g=null==(p=null==s?void 0:s.value)?void 0:p.getStroke())||g.setWidth(t.width),null==(v=null==s?void 0:s.value)||v.setRadius(null==(m=null==s?void 0:s.value)?void 0:m.getRadius());try{null==(y=null==r?void 0:r.value)||y.changed()}catch(_){null==(w=null==r?void 0:r.value)||w.changed()}};t(o),(0,Em.wB)(o,(e=>{t(e)})),(0,Em.wB)(s,(()=>{t(o)}))}return(t,e)=>(0,Em.Q3)("",!0)}}),Cz=(0,Em.pM)({__name:"OlStyleFill",props:{color:{}},setup(t){var e;const n=t,i=(0,Em.WQ)("style",null),r=(0,Em.WQ)("circle",null),s=(0,Em.WQ)("styledObj",null),{properties:o}=XP(n);if(null!=i&&null==r){let t=new Dl(o);null==(e=null==i?void 0:i.value)||e.setFill(t);const n=()=>{var e,n;null==(e=null==i?void 0:i.value)||e.setFill(new Dl),t=new Dl(o),null==(n=null==i?void 0:i.value)||n.setFill(t)};(0,Em.wB)(o,(()=>{n()})),(0,Em.wB)(i,(()=>{n()})),(0,Em.sV)((()=>{var e;null==(e=null==i?void 0:i.value)||e.setFill(t)})),(0,Em.hi)((()=>{var t;null==(t=null==i?void 0:i.value)||t.setFill(new Dl)}))}else if(null!=r){const t=t=>{var e,n,i;null==(e=null==r?void 0:r.value)||e.getFill().setColor(t||null),null==(n=null==r?void 0:r.value)||n.setRadius(null==r?void 0:r.value.getRadius());try{null==(i=null==s?void 0:s.value)||i.changed()}catch(o){null==s||s.value.changed()}};t(o.color),(0,Em.wB)(o,(()=>{t(o.color)})),(0,Em.wB)(r,(()=>{t(o.color)}))}return(t,e)=>(0,Em.Q3)("",!0)}}),Sz=(0,Em.pM)({__name:"OlStyleIcon",props:{anchor:{},anchorOrigin:{default:"top-left"},anchorXUnits:{default:"fraction"},anchorYUnits:{},color:{},crossOrigin:{},img:{},displacement:{default:()=>[0,0]},opacity:{default:1},width:{},height:{},scale:{},rotateWithView:{type:Boolean,default:!1},rotation:{default:0},offset:{default:()=>[0,0]},offsetOrigin:{default:"top-left"},size:{},src:{},declutterMode:{}},setup(t){const e=t,n=(0,Em.WQ)("style",null),i=(0,Em.WQ)("styledObj",null),{properties:r}=XP(e),s=(0,Em.EW)((()=>{const t=new zl(r);return t.load(),t})),o=()=>{var t,e,r;null==(t=null==n?void 0:n.value)||t.setImage(null),null==(e=null==n?void 0:n.value)||e.setImage(s.value),null==(r=null==i?void 0:i.value)||r.changed()};return(0,Em.wB)(r,(()=>{o()})),(0,Em.wB)((()=>null==n?void 0:n.value),(()=>{o()})),(0,Em.sV)((()=>{var t;null==(t=null==n?void 0:n.value)||t.setImage(s.value)})),(0,Em.hi)((()=>{var t;null==(t=null==n?void 0:n.value)||t.setImage(null)})),(t,e)=>(0,Em.Q3)("",!0)}}),Bz=(0,Em.pM)({__name:"OlStyleText",props:{font:{},maxAngle:{default:Math.PI/4},offsetX:{default:0},offsetY:{default:0},overflow:{type:Boolean,default:!1},placement:{default:"point"},scale:{},rotateWithView:{type:Boolean,default:!1},rotation:{default:0},text:{},textAlign:{},textBaseline:{default:"middle"},padding:{default:()=>[0,0,0,0]},fill:{},stroke:{},backgroundFill:{},backgroundStroke:{}},setup(t){const e=t,n=(0,Em.WQ)("style",null),i=(0,Em.WQ)("styledObj",null),{properties:r}=XP(e),s=t=>{const e=t,n={...e};return t.fill&&(n.fill=new Dl({color:t.fill})),t.stroke&&(n.stroke=new ql(t.stroke)),t.backgroundFill&&(n.backgroundFill=new Dl({color:t.backgroundFill})),t.backgroundStroke&&(n.backgroundStroke=new ql(t.backgroundStroke)),new Vc(n)},o=(0,Em.EW)((()=>s(r))),a=()=>{var t,e,r;null==(t=null==n?void 0:n.value)||t.setText(new Vc),null==(e=null==n?void 0:n.value)||e.setText(o.value),null==(r=null==i?void 0:i.value)||r.changed()};return(0,Em.wB)(r,(()=>{a()})),(0,Em.wB)((()=>null==n?void 0:n.value),(()=>{a()})),(0,Em.sV)((()=>{var t;null==(t=null==n?void 0:n.value)||t.setText(o.value)})),(0,Em.hi)((()=>{var t;null==(t=null==n?void 0:n.value)||t.setText(new Vc)})),(0,Em.Gt)("style",o),(0,Em.Gt)("styledObj",i),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}}),Tz=(0,Em.pM)({__name:"OlStyleFlowline",props:{visible:{type:Boolean,default:!0},width:{},width2:{},color:{},color2:{},arrowClor:{},lineCap:{default:"butt"},arrowSize:{default:16},arrow:{},noOverlap:{type:Boolean},offset0:{},offset1:{},overrideStyleFunction:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("stylable",null),{properties:r}=XP(n),s=(0,Em.EW)((()=>new uP(r))),o=t=>{var e,n,r;if(null==i?void 0:i.value){if(i.value instanceof zM||(null==i?void 0:i.value)instanceof sP)return i.value.getOverlay().setStyle(t),void i.value.dispatchEvent("styleChanged");try{i.value.setStyle(t),i.value.changed(),null==(e=null==i?void 0:i.value)||e.dispatchEvent("styleChanged")}catch(s){(null==i?void 0:i.value)&&(i.value.style_=t,i.value.values_.style=t,null==(n=i.value)||n.changed(),null==(r=i.value)||r.dispatchEvent("styleChanged"))}}},a=(0,Em.EW)((()=>(t,e)=>(r.overrideStyleFunction&&r.overrideStyleFunction(t,s.value,e),s.value)));return(0,Em.wB)(r,(()=>{o(r.overrideStyleFunction?a.value:s.value)})),(0,Em.sV)((()=>{o(r.overrideStyleFunction?a.value:s.value)})),(0,Em.hi)((()=>{o(new Qc)})),e({style:s}),(t,e)=>((0,Em.uX)(),(0,Em.CE)("div",null,[(0,Em.RG)(t.$slots,"default")]))}});function Iz(t){t.component("ol-style",bz),t.component("ol-style-circle",xz),t.component("ol-style-stroke",Ez),t.component("ol-style-fill",Cz),t.component("ol-style-icon",Sz),t.component("ol-style-text",Bz),t.component("ol-style-flowline",Tz)}Symbol.toStringTag;const Fz=(0,Em.pM)({inheritAttrs:!1,__name:"OlClusterSelectInteraction",props:{featureStyle:{},selectCluster:{type:Boolean,default:!0},pointRadius:{default:7},spiral:{type:Boolean,default:!0},circleMaxObject:{},maxObjects:{},animate:{type:Boolean,default:!0},animationDuration:{default:500},autoClose:{type:Boolean,default:!0},addCondition:{},condition:{},layers:{},style:{},removeCondition:{},toggleCondition:{},multi:{type:Boolean,default:!1},features:{},filter:{},hitTolerance:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new vP({style:new Qc,...r})));return eN(s,["select"]),(0,Em.wB)(s,((t,e)=>{null==i||i.removeInteraction(e),null==i||i.addInteraction(t),null==i||i.changed()})),(0,Em.sV)((()=>{null==i||i.addInteraction(s.value)})),(0,Em.hi)((()=>{null==i||i.removeInteraction(s.value)})),(0,Em.Gt)("stylable",s),e({select:s}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Lz=(0,Em.pM)({__name:"OlDragRotateInteraction",props:{condition:{},duration:{default:250}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),{properties:r}=XP(n),s=(0,Em.EW)((()=>{const t=new zw({...r});return t}));return(0,Em.wB)(s,((t,e)=>{null==i||i.removeInteraction(e),null==i||i.addInteraction(t),null==i||i.changed()})),(0,Em.sV)((()=>{null==i||i.addInteraction(s.value)})),(0,Em.hi)((()=>{null==i||i.removeInteraction(s.value)})),e({dragrotate:s}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Rz=(0,Em.pM)({__name:"OlDragRotateZoomInteraction",props:{condition:{},duration:{default:400}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),{properties:r}=XP(n),s=(0,Em.EW)((()=>{const t=new wP({...r});return t}));return(0,Em.wB)(s,((t,e)=>{null==i||i.removeInteraction(e),null==i||i.addInteraction(t),null==i||i.changed()})),(0,Em.sV)((()=>{null==i||i.addInteraction(s.value)})),(0,Em.hi)((()=>{null==i||i.removeInteraction(s.value)})),e({dragRotateZoom:s}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Mz=(0,Em.pM)({inheritAttrs:!1,__name:"OlSelectInteraction",props:{multi:{type:Boolean,default:!1},condition:{},filter:{},features:{},hitTolerance:{default:0},removeCondition:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),{properties:r}=XP(n),s=(0,Em.EW)((()=>new gP({...r,style:new Qc})));return eN(s,["select"]),(0,Em.wB)(s,((t,e)=>{null==i||i.removeInteraction(e),null==i||i.addInteraction(t),null==i||i.changed()})),(0,Em.sV)((()=>{null==i||i.addInteraction(s.value)})),(0,Em.hi)((()=>{null==i||i.removeInteraction(s.value)})),(0,Em.Gt)("stylable",s),e({select:s}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Pz=(0,Em.pM)({inheritAttrs:!1,__name:"OlDrawInteraction",props:{type:{},clickTolerance:{default:6},dragVertexDelay:{default:500},snapTolerance:{default:12},stopClick:{type:Boolean,default:!1},maxPoints:{},minPoints:{},finishCondition:{},geometryFunction:{},geometryName:{},condition:{},freehand:{type:Boolean,default:!1},freehandCondition:{},wrapX:{type:Boolean,default:!1}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("vectorSource"),{type:s,clickTolerance:o,dragVertexDelay:a,snapTolerance:l,stopClick:c,maxPoints:u,minPoints:h,finishCondition:A,geometryFunction:d,geometryName:f,condition:p,freehand:g,freehandCondition:m,wrapX:v}=(0,Cm.QW)(n);function y(){return new zM({source:null==r?void 0:r.value,type:s.value,clickTolerance:o.value,dragVertexDelay:a.value,snapTolerance:l.value,stopClick:c.value,maxPoints:null==u?void 0:u.value,minPoints:null==h?void 0:h.value,finishCondition:null==A?void 0:A.value,geometryFunction:null==d?void 0:d.value,geometryName:null==f?void 0:f.value,condition:null==p?void 0:p.value,freehand:g.value,freehandCondition:null==m?void 0:m.value,wrapX:v.value})}let w=y();return eN(w,["drawstart","drawend"]),(0,Em.wB)([s,o,a,l,c,u,h,A,d,f,p,g,m,v],(()=>{w.abortDrawing(),null==i||i.removeInteraction(w),w=y(),null==i||i.addInteraction(w),null==i||i.changed()})),(0,Em.sV)((()=>{null==i||i.addInteraction(w)})),(0,Em.hi)((()=>{null==i||i.removeInteraction(w)})),(0,Em.Gt)("stylable",w),e({draw:w}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Nz=(0,Em.pM)({inheritAttrs:!1,__name:"OlModifyInteraction",props:{condition:{},deleteCondition:{},insertVertexCondition:{},pixelTolerance:{default:10},wrapX:{type:Boolean,default:!1},hitDetection:{type:Boolean},features:{}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("vectorSource"),{features:s,condition:o,deleteCondition:a,insertVertexCondition:l,pixelTolerance:c,wrapX:u,hitDetection:h}=(0,Cm.QW)(n);function A(){const t=new sP({source:null==r?void 0:r.value,features:null==s?void 0:s.value,condition:null==o?void 0:o.value,deleteCondition:null==a?void 0:a.value,insertVertexCondition:null==l?void 0:l.value,pixelTolerance:c.value,wrapX:u.value,hitDetection:h.value});return t}let d=A();return eN(d,["modifystart","modifyend"]),(0,Em.wB)([o,a,l,c,u,h],(()=>{d.dispose(),null==i||i.removeInteraction(d),d=A(),null==i||i.addInteraction(d),null==i||i.changed()})),(0,Em.sV)((()=>{null==i||i.addInteraction(d)})),(0,Em.hi)((()=>{null==i||i.removeInteraction(d)})),(0,Em.Gt)("stylable",d),e({modify:d}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Oz=(0,Em.pM)({__name:"OlSnapInteraction",props:{vertex:{type:Boolean,default:!0},edge:{type:Boolean,default:!0},pixelTolerance:{default:10}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("vectorSource"),{properties:s}=XP(n),o=()=>{const t=new SP({...s,source:null==r?void 0:r.value});return t};let a=o();return(0,Em.wB)(s,(()=>{null==i||i.removeInteraction(a),a=o(),null==i||i.addInteraction(a),null==i||i.changed()})),(0,Em.sV)((()=>{null==i||i.addInteraction(a)})),(0,Em.hi)((()=>{null==i||i.removeInteraction(a)})),e({snap:a}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),kz=(0,Em.pM)({inheritAttrs:!1,__name:"OlTransformInteraction",props:{enableRotatedTransform:{type:Boolean,default:!1},condition:{},addCondition:{},filter:{},hitTolerance:{default:2},translateFeature:{type:Boolean,default:!0},scale:{type:Boolean,default:!0},rotate:{type:Boolean,default:!0},keepAspectRatio:{type:Function,default:()=>!1},translate:{type:Boolean,default:!0},stretch:{type:Boolean,default:!0}},setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),{properties:r}=XP(n),s=(0,Em.EW)((()=>{const t=new TP({...r});return t}));return eN(s,["select","rotatestart","rotating","rotateend","translatestart","translating","translateend","scalestart","scaling","scaleend"]),(0,Em.wB)(s,((t,e)=>{null==i||i.removeInteraction(e),null==i||i.addInteraction(t),null==i||i.changed()})),(0,Em.sV)((()=>{null==i||i.addInteraction(s.value)})),(0,Em.hi)((()=>{null==i||i.removeInteraction(s.value)})),(0,Em.Gt)("stylable",s),e({transform:s}),(t,e)=>(0,Em.RG)(t.$slots,"default")}});function Dz(t){t.component("ol-interaction-clusterselect",Fz),t.component("ol-interaction-dragrotate",Lz),t.component("ol-interaction-dragrotatezoom",Rz),t.component("ol-interaction-select",Mz),t.component("ol-interaction-draw",Pz),t.component("ol-interaction-modify",Nz),t.component("ol-interaction-snap",Oz),t.component("ol-interaction-transform",kz)}Symbol.toStringTag;function Uz(t,e){const n=(0,Em.WQ)("map"),i=(0,Em.WQ)("vectorLayer"),{properties:r}=XP(e),s=(0,Em.EW)((()=>new t(r)));return(0,Em.Gt)("animation",s),{map:n,vectorLayer:i,animation:s,properties:r}}const Qz={duration:1e3,revers:!1,repeat:0,easing:wm},Gz=(0,Em.pM)({__name:"OlAnimationDrop",props:(0,Em.HF)({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},speed:{},side:{}},{...Qz,side:0,speed:0}),setup(t,{expose:e}){const n=t,i=Uz(RP,n);return e(i),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Hz=(0,Em.pM)({__name:"OlAnimationFade",props:(0,Em.HF)({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function}},Qz),setup(t,{expose:e}){const n=t,i=Uz(PP,n);return e(i),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Vz=(0,Em.pM)({__name:"OlAnimationFeature",props:(0,Em.HF)({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function}},Qz),setup(t,{expose:e}){const n=t,i=(0,Em.WQ)("map"),r=(0,Em.WQ)("vectorLayer"),{properties:s}=XP(n);return e({map:i,vectorLayer:r,properties:s}),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),jz=(0,Em.pM)({__name:"OlAnimationPath",props:(0,Em.HF)({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},rotate:{type:Boolean},speed:{},path:{}},{...Qz,rotate:!1,speed:0}),setup(t,{expose:e}){const n=t,i=Uz(OP,n);return e(i),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Wz=(0,Em.pM)({__name:"OlAnimationShake",props:(0,Em.HF)({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},bounce:{},amplitude:{},horizontal:{type:Boolean}},{...Qz,bounce:6,amplitude:40,horizontal:!1}),setup(t,{expose:e}){const n=t,i=Uz(DP,n);return e(i),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),zz=(0,Em.pM)({__name:"OlAnimationSlide",props:(0,Em.HF)({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},speed:{}},{...Qz,speed:0}),setup(t,{expose:e}){const n=t,i=Uz(QP,n);return e(i),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),Kz=(0,Em.pM)({__name:"OlAnimationTeleport",props:(0,Em.HF)({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function}},Qz),setup(t,{expose:e}){const n=t,i=Uz(HP,n);return e(i),(t,e)=>(0,Em.RG)(t.$slots,"default")}}),qz=(0,Em.pM)({__name:"OlAnimationZoom",props:(0,Em.HF)({duration:{},revers:{type:Boolean},repeat:{},easing:{type:Function},zoomOut:{type:Boolean}},{...Qz,zoomOut:!1}),setup(t,{expose:e}){const n=t,i=Uz(jP,n);return e(i),(t,e)=>(0,Em.RG)(t.$slots,"default")}});function $z(t){t.component("ol-animation-drop",Gz),t.component("ol-animation-fade",Hz),t.component("ol-animation-feature",Vz),t.component("ol-animation-path",jz),t.component("ol-animation-shake",Wz),t.component("ol-animation-slide",zz),t.component("ol-animation-teleport",Kz),t.component("ol-animation-zoom",qz)}Symbol.toStringTag;const Xz=(t,e)=>{t.use(qG),t.use(lH),t.use(BH),t.use(Az),t.use(_z),t.use(Iz),t.use(Dz),t.use($z),t.provide("ol-options",e),t.provide("ol-feature",$),t.provide("ol-geom",r),t.provide("ol-animations",l),t.provide("ol-format",s),t.provide("ol-loadingstrategy",o),t.provide("ol-selectconditions",a),t.provide("ol-extent",i)},Yz={install:Xz};
/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 */
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Zz=function(t,e){return Zz=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},Zz(t,e)};function Jz(t,e){if("function"!==typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Zz(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var tK=function(){return tK=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n],e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},tK.apply(this,arguments)};function eK(t,e,n,i){function r(t){return t instanceof n?t:new n((function(e){e(t)}))}return new(n||(n=Promise))((function(n,s){function o(t){try{l(i.next(t))}catch(e){s(e)}}function a(t){try{l(i["throw"](t))}catch(e){s(e)}}function l(t){t.done?n(t.value):r(t.value).then(o,a)}l((i=i.apply(t,e||[])).next())}))}function nK(t,e){var n,i,r,s,o={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"===typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(t){return function(e){return l([t,e])}}function l(s){if(n)throw new TypeError("Generator is already executing.");while(o)try{if(n=1,i&&(r=2&s[0]?i["return"]:s[0]?i["throw"]||((r=i["return"])&&r.call(i),0):i.next)&&!(r=r.call(i,s[1])).done)return r;switch(i=0,r&&(s=[2&s[0],r.value]),s[0]){case 0:case 1:r=s;break;case 4:return o.label++,{value:s[1],done:!1};case 5:o.label++,i=s[1],s=[0];continue;case 7:s=o.ops.pop(),o.trys.pop();continue;default:if(r=o.trys,!(r=r.length>0&&r[r.length-1])&&(6===s[0]||2===s[0])){o=0;continue}if(3===s[0]&&(!r||s[1]>r[0]&&s[1]<r[3])){o.label=s[1];break}if(6===s[0]&&o.label<r[1]){o.label=r[1],r=s;break}if(r&&o.label<r[2]){o.label=r[2],o.ops.push(s);break}r[2]&&o.ops.pop(),o.trys.pop();continue}s=e.call(t,o)}catch(a){s=[6,a],i=0}finally{n=r=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}function iK(t,e,n){if(n||2===arguments.length)for(var i,r=0,s=e.length;r<s;r++)!i&&r in e||(i||(i=Array.prototype.slice.call(e,0,r)),i[r]=e[r]);return t.concat(i||e)}for(var rK=function(){function t(t,e,n,i){this.left=t,this.top=e,this.width=n,this.height=i}return t.prototype.add=function(e,n,i,r){return new t(this.left+e,this.top+n,this.width+i,this.height+r)},t.fromClientRect=function(e,n){return new t(n.left+e.windowBounds.left,n.top+e.windowBounds.top,n.width,n.height)},t.fromDOMRectList=function(e,n){var i=Array.from(n).find((function(t){return 0!==t.width}));return i?new t(i.left+e.windowBounds.left,i.top+e.windowBounds.top,i.width,i.height):t.EMPTY},t.EMPTY=new t(0,0,0,0),t}(),sK=function(t,e){return rK.fromClientRect(t,e.getBoundingClientRect())},oK=function(t){var e=t.body,n=t.documentElement;if(!e||!n)throw new Error("Unable to get document size");var i=Math.max(Math.max(e.scrollWidth,n.scrollWidth),Math.max(e.offsetWidth,n.offsetWidth),Math.max(e.clientWidth,n.clientWidth)),r=Math.max(Math.max(e.scrollHeight,n.scrollHeight),Math.max(e.offsetHeight,n.offsetHeight),Math.max(e.clientHeight,n.clientHeight));return new rK(0,0,i,r)},aK=function(t){var e=[],n=0,i=t.length;while(n<i){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var s=t.charCodeAt(n++);56320===(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),n--)}else e.push(r)}return e},lK=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";var i=[],r=-1,s="";while(++r<n){var o=t[r];o<=65535?i.push(o):(o-=65536,i.push(55296+(o>>10),o%1024+56320)),(r+1===n||i.length>16384)&&(s+=String.fromCharCode.apply(String,i),i.length=0)}return s},cK="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uK="undefined"===typeof Uint8Array?[]:new Uint8Array(256),hK=0;hK<cK.length;hK++)uK[cK.charCodeAt(hK)]=hK;for(var AK="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",dK="undefined"===typeof Uint8Array?[]:new Uint8Array(256),fK=0;fK<AK.length;fK++)dK[AK.charCodeAt(fK)]=fK;for(var pK=function(t){var e,n,i,r,s,o=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),u=Array.isArray(c)?c:new Uint8Array(c);for(e=0;e<a;e+=4)n=dK[t.charCodeAt(e)],i=dK[t.charCodeAt(e+1)],r=dK[t.charCodeAt(e+2)],s=dK[t.charCodeAt(e+3)],u[l++]=n<<2|i>>4,u[l++]=(15&i)<<4|r>>2,u[l++]=(3&r)<<6|63&s;return c},gK=function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n.push(t[i+1]<<8|t[i]);return n},mK=function(t){for(var e=t.length,n=[],i=0;i<e;i+=4)n.push(t[i+3]<<24|t[i+2]<<16|t[i+1]<<8|t[i]);return n},vK=5,yK=11,wK=2,_K=yK-vK,bK=65536>>vK,xK=1<<vK,EK=xK-1,CK=1024>>vK,SK=bK+CK,BK=SK,TK=32,IK=BK+TK,FK=65536>>yK,LK=1<<_K,RK=LK-1,MK=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},PK=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},NK=function(t,e){var n=pK(t),i=Array.isArray(n)?mK(n):new Uint32Array(n),r=Array.isArray(n)?gK(n):new Uint16Array(n),s=24,o=MK(r,s/2,i[4]/2),a=2===i[5]?MK(r,(s+i[4])/2):PK(i,Math.ceil((s+i[4])/4));return new OK(i[0],i[1],i[2],i[3],o,a)},OK=function(){function t(t,e,n,i,r,s){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=i,this.index=r,this.data=s}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=this.index[t>>vK],e=(e<<wK)+(t&EK),this.data[e];if(t<=65535)return e=this.index[bK+(t-55296>>vK)],e=(e<<wK)+(t&EK),this.data[e];if(t<this.highStart)return e=IK-FK+(t>>yK),e=this.index[e],e+=t>>vK&RK,e=this.index[e],e=(e<<wK)+(t&EK),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),kK="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",DK="undefined"===typeof Uint8Array?[]:new Uint8Array(256),UK=0;UK<kK.length;UK++)DK[kK.charCodeAt(UK)]=UK;var QK="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",GK=50,HK=1,VK=2,jK=3,WK=4,zK=5,KK=7,qK=8,$K=9,XK=10,YK=11,ZK=12,JK=13,tq=14,eq=15,nq=16,iq=17,rq=18,sq=19,oq=20,aq=21,lq=22,cq=23,uq=24,hq=25,Aq=26,dq=27,fq=28,pq=29,gq=30,mq=31,vq=32,yq=33,wq=34,_q=35,bq=36,xq=37,Eq=38,Cq=39,Sq=40,Bq=41,Tq=42,Iq=43,Fq=[9001,65288],Lq="!",Rq="",Mq="",Pq=NK(QK),Nq=[gq,bq],Oq=[HK,VK,jK,zK],kq=[XK,qK],Dq=[dq,Aq],Uq=Oq.concat(kq),Qq=[Eq,Cq,Sq,wq,_q],Gq=[eq,JK],Hq=function(t,e){void 0===e&&(e="strict");var n=[],i=[],r=[];return t.forEach((function(t,s){var o=Pq.get(t);if(o>GK?(r.push(!0),o-=GK):r.push(!1),-1!==["normal","auto","loose"].indexOf(e)&&-1!==[8208,8211,12316,12448].indexOf(t))return i.push(s),n.push(nq);if(o===WK||o===YK){if(0===s)return i.push(s),n.push(gq);var a=n[s-1];return-1===Uq.indexOf(a)?(i.push(i[s-1]),n.push(a)):(i.push(s),n.push(gq))}return i.push(s),o===mq?n.push("strict"===e?aq:xq):o===Tq||o===pq?n.push(gq):o===Iq?t>=131072&&t<=196605||t>=196608&&t<=262141?n.push(xq):n.push(gq):void n.push(o)})),[i,n,r]},Vq=function(t,e,n,i){var r=i[n];if(Array.isArray(t)?-1!==t.indexOf(r):t===r){var s=n;while(s<=i.length){s++;var o=i[s];if(o===e)return!0;if(o!==XK)break}}if(r===XK){s=n;while(s>0){s--;var a=i[s];if(Array.isArray(t)?-1!==t.indexOf(a):t===a){var l=n;while(l<=i.length){l++;o=i[l];if(o===e)return!0;if(o!==XK)break}}if(a!==XK)break}}return!1},jq=function(t,e){var n=t;while(n>=0){var i=e[n];if(i!==XK)return i;n--}return 0},Wq=function(t,e,n,i,r){if(0===n[i])return Rq;var s=i-1;if(Array.isArray(r)&&!0===r[s])return Rq;var o=s-1,a=s+1,l=e[s],c=o>=0?e[o]:0,u=e[a];if(l===VK&&u===jK)return Rq;if(-1!==Oq.indexOf(l))return Lq;if(-1!==Oq.indexOf(u))return Rq;if(-1!==kq.indexOf(u))return Rq;if(jq(s,e)===qK)return Mq;if(Pq.get(t[s])===YK)return Rq;if((l===vq||l===yq)&&Pq.get(t[a])===YK)return Rq;if(l===KK||u===KK)return Rq;if(l===$K)return Rq;if(-1===[XK,JK,eq].indexOf(l)&&u===$K)return Rq;if(-1!==[iq,rq,sq,uq,fq].indexOf(u))return Rq;if(jq(s,e)===lq)return Rq;if(Vq(cq,lq,s,e))return Rq;if(Vq([iq,rq],aq,s,e))return Rq;if(Vq(ZK,ZK,s,e))return Rq;if(l===XK)return Mq;if(l===cq||u===cq)return Rq;if(u===nq||l===nq)return Mq;if(-1!==[JK,eq,aq].indexOf(u)||l===tq)return Rq;if(c===bq&&-1!==Gq.indexOf(l))return Rq;if(l===fq&&u===bq)return Rq;if(u===oq)return Rq;if(-1!==Nq.indexOf(u)&&l===hq||-1!==Nq.indexOf(l)&&u===hq)return Rq;if(l===dq&&-1!==[xq,vq,yq].indexOf(u)||-1!==[xq,vq,yq].indexOf(l)&&u===Aq)return Rq;if(-1!==Nq.indexOf(l)&&-1!==Dq.indexOf(u)||-1!==Dq.indexOf(l)&&-1!==Nq.indexOf(u))return Rq;if(-1!==[dq,Aq].indexOf(l)&&(u===hq||-1!==[lq,eq].indexOf(u)&&e[a+1]===hq)||-1!==[lq,eq].indexOf(l)&&u===hq||l===hq&&-1!==[hq,fq,uq].indexOf(u))return Rq;if(-1!==[hq,fq,uq,iq,rq].indexOf(u)){var h=s;while(h>=0){var A=e[h];if(A===hq)return Rq;if(-1===[fq,uq].indexOf(A))break;h--}}if(-1!==[dq,Aq].indexOf(u)){h=-1!==[iq,rq].indexOf(l)?o:s;while(h>=0){A=e[h];if(A===hq)return Rq;if(-1===[fq,uq].indexOf(A))break;h--}}if(Eq===l&&-1!==[Eq,Cq,wq,_q].indexOf(u)||-1!==[Cq,wq].indexOf(l)&&-1!==[Cq,Sq].indexOf(u)||-1!==[Sq,_q].indexOf(l)&&u===Sq)return Rq;if(-1!==Qq.indexOf(l)&&-1!==[oq,Aq].indexOf(u)||-1!==Qq.indexOf(u)&&l===dq)return Rq;if(-1!==Nq.indexOf(l)&&-1!==Nq.indexOf(u))return Rq;if(l===uq&&-1!==Nq.indexOf(u))return Rq;if(-1!==Nq.concat(hq).indexOf(l)&&u===lq&&-1===Fq.indexOf(t[a])||-1!==Nq.concat(hq).indexOf(u)&&l===rq)return Rq;if(l===Bq&&u===Bq){var d=n[s],f=1;while(d>0){if(d--,e[d]!==Bq)break;f++}if(f%2!==0)return Rq}return l===vq&&u===yq?Rq:Mq},zq=function(t,e){e||(e={lineBreak:"normal",wordBreak:"normal"});var n=Hq(t,e.lineBreak),i=n[0],r=n[1],s=n[2];"break-all"!==e.wordBreak&&"break-word"!==e.wordBreak||(r=r.map((function(t){return-1!==[hq,gq,Tq].indexOf(t)?xq:t})));var o="keep-all"===e.wordBreak?s.map((function(e,n){return e&&t[n]>=19968&&t[n]<=40959})):void 0;return[i,r,o]},Kq=function(){function t(t,e,n,i){this.codePoints=t,this.required=e===Lq,this.start=n,this.end=i}return t.prototype.slice=function(){return lK.apply(void 0,this.codePoints.slice(this.start,this.end))},t}(),qq=function(t,e){var n=aK(t),i=zq(n,e),r=i[0],s=i[1],o=i[2],a=n.length,l=0,c=0;return{next:function(){if(c>=a)return{done:!0,value:null};var t=Rq;while(c<a&&(t=Wq(n,s,r,++c,o))===Rq);if(t!==Rq||c===a){var e=new Kq(n,t,l,c);return l=c,{value:e,done:!1}}return{done:!0,value:null}}}},$q=1,Xq=2,Yq=4,Zq=8,Jq=10,t$=47,e$=92,n$=9,i$=32,r$=34,s$=61,o$=35,a$=36,l$=37,c$=39,u$=40,h$=41,A$=95,d$=45,f$=33,p$=60,g$=62,m$=64,v$=91,y$=93,w$=61,_$=123,b$=63,x$=125,E$=124,C$=126,S$=128,B$=65533,T$=42,I$=43,F$=44,L$=58,R$=59,M$=46,P$=0,N$=8,O$=11,k$=14,D$=31,U$=127,Q$=-1,G$=48,H$=97,V$=101,j$=102,W$=117,z$=122,K$=65,q$=69,$$=70,X$=85,Y$=90,Z$=function(t){return t>=G$&&t<=57},J$=function(t){return t>=55296&&t<=57343},tX=function(t){return Z$(t)||t>=K$&&t<=$$||t>=H$&&t<=j$},eX=function(t){return t>=H$&&t<=z$},nX=function(t){return t>=K$&&t<=Y$},iX=function(t){return eX(t)||nX(t)},rX=function(t){return t>=S$},sX=function(t){return t===Jq||t===n$||t===i$},oX=function(t){return iX(t)||rX(t)||t===A$},aX=function(t){return oX(t)||Z$(t)||t===d$},lX=function(t){return t>=P$&&t<=N$||t===O$||t>=k$&&t<=D$||t===U$},cX=function(t,e){return t===e$&&e!==Jq},uX=function(t,e,n){return t===d$?oX(e)||cX(e,n):!!oX(t)||!(t!==e$||!cX(t,e))},hX=function(t,e,n){return t===I$||t===d$?!!Z$(e)||e===M$&&Z$(n):Z$(t===M$?e:t)},AX=function(t){var e=0,n=1;t[e]!==I$&&t[e]!==d$||(t[e]===d$&&(n=-1),e++);var i=[];while(Z$(t[e]))i.push(t[e++]);var r=i.length?parseInt(lK.apply(void 0,i),10):0;t[e]===M$&&e++;var s=[];while(Z$(t[e]))s.push(t[e++]);var o=s.length,a=o?parseInt(lK.apply(void 0,s),10):0;t[e]!==q$&&t[e]!==V$||e++;var l=1;t[e]!==I$&&t[e]!==d$||(t[e]===d$&&(l=-1),e++);var c=[];while(Z$(t[e]))c.push(t[e++]);var u=c.length?parseInt(lK.apply(void 0,c),10):0;return n*(r+a*Math.pow(10,-o))*Math.pow(10,l*u)},dX={type:2},fX={type:3},pX={type:4},gX={type:13},mX={type:8},vX={type:21},yX={type:9},wX={type:10},_X={type:11},bX={type:12},xX={type:14},EX={type:23},CX={type:1},SX={type:25},BX={type:24},TX={type:26},IX={type:27},FX={type:28},LX={type:29},RX={type:31},MX={type:32},PX=function(){function t(){this._value=[]}return t.prototype.write=function(t){this._value=this._value.concat(aK(t))},t.prototype.read=function(){var t=[],e=this.consumeToken();while(e!==MX)t.push(e),e=this.consumeToken();return t},t.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case r$:return this.consumeStringToken(r$);case o$:var e=this.peekCodePoint(0),n=this.peekCodePoint(1),i=this.peekCodePoint(2);if(aX(e)||cX(n,i)){var r=uX(e,n,i)?Xq:$q,s=this.consumeName();return{type:5,value:s,flags:r}}break;case a$:if(this.peekCodePoint(0)===s$)return this.consumeCodePoint(),gX;break;case c$:return this.consumeStringToken(c$);case u$:return dX;case h$:return fX;case T$:if(this.peekCodePoint(0)===s$)return this.consumeCodePoint(),xX;break;case I$:if(hX(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case F$:return pX;case d$:var o=t,a=this.peekCodePoint(0),l=this.peekCodePoint(1);if(hX(o,a,l))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(uX(o,a,l))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(a===d$&&l===g$)return this.consumeCodePoint(),this.consumeCodePoint(),BX;break;case M$:if(hX(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case t$:if(this.peekCodePoint(0)===T$){this.consumeCodePoint();while(1){var c=this.consumeCodePoint();if(c===T$&&(c=this.consumeCodePoint(),c===t$))return this.consumeToken();if(c===Q$)return this.consumeToken()}}break;case L$:return TX;case R$:return IX;case p$:if(this.peekCodePoint(0)===f$&&this.peekCodePoint(1)===d$&&this.peekCodePoint(2)===d$)return this.consumeCodePoint(),this.consumeCodePoint(),SX;break;case m$:var u=this.peekCodePoint(0),h=this.peekCodePoint(1),A=this.peekCodePoint(2);if(uX(u,h,A)){s=this.consumeName();return{type:7,value:s}}break;case v$:return FX;case e$:if(cX(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case y$:return LX;case w$:if(this.peekCodePoint(0)===s$)return this.consumeCodePoint(),mX;break;case _$:return _X;case x$:return bX;case W$:case X$:var d=this.peekCodePoint(0),f=this.peekCodePoint(1);return d!==I$||!tX(f)&&f!==b$||(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case E$:if(this.peekCodePoint(0)===s$)return this.consumeCodePoint(),yX;if(this.peekCodePoint(0)===E$)return this.consumeCodePoint(),vX;break;case C$:if(this.peekCodePoint(0)===s$)return this.consumeCodePoint(),wX;break;case Q$:return MX}return sX(t)?(this.consumeWhiteSpace(),RX):Z$(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):oX(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:lK(t)}},t.prototype.consumeCodePoint=function(){var t=this._value.shift();return"undefined"===typeof t?-1:t},t.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},t.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},t.prototype.consumeUnicodeRangeToken=function(){var t=[],e=this.consumeCodePoint();while(tX(e)&&t.length<6)t.push(e),e=this.consumeCodePoint();var n=!1;while(e===b$&&t.length<6)t.push(e),e=this.consumeCodePoint(),n=!0;if(n){var i=parseInt(lK.apply(void 0,t.map((function(t){return t===b$?G$:t}))),16),r=parseInt(lK.apply(void 0,t.map((function(t){return t===b$?$$:t}))),16);return{type:30,start:i,end:r}}var s=parseInt(lK.apply(void 0,t),16);if(this.peekCodePoint(0)===d$&&tX(this.peekCodePoint(1))){this.consumeCodePoint(),e=this.consumeCodePoint();var o=[];while(tX(e)&&o.length<6)o.push(e),e=this.consumeCodePoint();r=parseInt(lK.apply(void 0,o),16);return{type:30,start:s,end:r}}return{type:30,start:s,end:s}},t.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return"url"===t.toLowerCase()&&this.peekCodePoint(0)===u$?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===u$?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},t.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Q$)return{type:22,value:""};var e=this.peekCodePoint(0);if(e===c$||e===r$){var n=this.consumeStringToken(this.consumeCodePoint());return 0===n.type&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Q$||this.peekCodePoint(0)===h$)?(this.consumeCodePoint(),{type:22,value:n.value}):(this.consumeBadUrlRemnants(),EX)}while(1){var i=this.consumeCodePoint();if(i===Q$||i===h$)return{type:22,value:lK.apply(void 0,t)};if(sX(i))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Q$||this.peekCodePoint(0)===h$?(this.consumeCodePoint(),{type:22,value:lK.apply(void 0,t)}):(this.consumeBadUrlRemnants(),EX);if(i===r$||i===c$||i===u$||lX(i))return this.consumeBadUrlRemnants(),EX;if(i===e$){if(!cX(i,this.peekCodePoint(0)))return this.consumeBadUrlRemnants(),EX;t.push(this.consumeEscapedCodePoint())}else t.push(i)}},t.prototype.consumeWhiteSpace=function(){while(sX(this.peekCodePoint(0)))this.consumeCodePoint()},t.prototype.consumeBadUrlRemnants=function(){while(1){var t=this.consumeCodePoint();if(t===h$||t===Q$)return;cX(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},t.prototype.consumeStringSlice=function(t){var e=5e4,n="";while(t>0){var i=Math.min(e,t);n+=lK.apply(void 0,this._value.splice(0,i)),t-=i}return this._value.shift(),n},t.prototype.consumeStringToken=function(t){var e="",n=0;do{var i=this._value[n];if(i===Q$||void 0===i||i===t)return e+=this.consumeStringSlice(n),{type:0,value:e};if(i===Jq)return this._value.splice(0,n),CX;if(i===e$){var r=this._value[n+1];r!==Q$&&void 0!==r&&(r===Jq?(e+=this.consumeStringSlice(n),n=-1,this._value.shift()):cX(i,r)&&(e+=this.consumeStringSlice(n),e+=lK(this.consumeEscapedCodePoint()),n=-1))}n++}while(1)},t.prototype.consumeNumber=function(){var t=[],e=Yq,n=this.peekCodePoint(0);n!==I$&&n!==d$||t.push(this.consumeCodePoint());while(Z$(this.peekCodePoint(0)))t.push(this.consumeCodePoint());n=this.peekCodePoint(0);var i=this.peekCodePoint(1);if(n===M$&&Z$(i)){t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=Zq;while(Z$(this.peekCodePoint(0)))t.push(this.consumeCodePoint())}n=this.peekCodePoint(0),i=this.peekCodePoint(1);var r=this.peekCodePoint(2);if((n===q$||n===V$)&&((i===I$||i===d$)&&Z$(r)||Z$(i))){t.push(this.consumeCodePoint(),this.consumeCodePoint()),e=Zq;while(Z$(this.peekCodePoint(0)))t.push(this.consumeCodePoint())}return[AX(t),e]},t.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),e=t[0],n=t[1],i=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(uX(i,r,s)){var o=this.consumeName();return{type:15,number:e,flags:n,unit:o}}return i===l$?(this.consumeCodePoint(),{type:16,number:e,flags:n}):{type:17,number:e,flags:n}},t.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(tX(t)){var e=lK(t);while(tX(this.peekCodePoint(0))&&e.length<6)e+=lK(this.consumeCodePoint());sX(this.peekCodePoint(0))&&this.consumeCodePoint();var n=parseInt(e,16);return 0===n||J$(n)||n>1114111?B$:n}return t===Q$?B$:t},t.prototype.consumeName=function(){var t="";while(1){var e=this.consumeCodePoint();if(aX(e))t+=lK(e);else{if(!cX(e,this.peekCodePoint(0)))return this.reconsumeCodePoint(e),t;t+=lK(this.consumeEscapedCodePoint())}}},t}(),NX=function(){function t(t){this._tokens=t}return t.create=function(e){var n=new PX;return n.write(e),new t(n.read())},t.parseValue=function(e){return t.create(e).parseComponentValue()},t.parseValues=function(e){return t.create(e).parseComponentValues()},t.prototype.parseComponentValue=function(){var t=this.consumeToken();while(31===t.type)t=this.consumeToken();if(32===t.type)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var e=this.consumeComponentValue();do{t=this.consumeToken()}while(31===t.type);if(32===t.type)return e;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},t.prototype.parseComponentValues=function(){var t=[];while(1){var e=this.consumeComponentValue();if(32===e.type)return t;t.push(e),t.push()}},t.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},t.prototype.consumeSimpleBlock=function(t){var e={type:t,values:[]},n=this.consumeToken();while(1){if(32===n.type||jX(n,t))return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue()),n=this.consumeToken()}},t.prototype.consumeFunction=function(t){var e={name:t.value,values:[],type:18};while(1){var n=this.consumeToken();if(32===n.type||3===n.type)return e;this.reconsumeToken(n),e.values.push(this.consumeComponentValue())}},t.prototype.consumeToken=function(){var t=this._tokens.shift();return"undefined"===typeof t?MX:t},t.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},t}(),OX=function(t){return 15===t.type},kX=function(t){return 17===t.type},DX=function(t){return 20===t.type},UX=function(t){return 0===t.type},QX=function(t,e){return DX(t)&&t.value===e},GX=function(t){return 31!==t.type},HX=function(t){return 31!==t.type&&4!==t.type},VX=function(t){var e=[],n=[];return t.forEach((function(t){if(4===t.type){if(0===n.length)throw new Error("Error parsing function args, zero tokens for arg");return e.push(n),void(n=[])}31!==t.type&&n.push(t)})),n.length&&e.push(n),e},jX=function(t,e){return 11===e&&12===t.type||(28===e&&29===t.type||2===e&&3===t.type)},WX=function(t){return 17===t.type||15===t.type},zX=function(t){return 16===t.type||WX(t)},KX=function(t){return t.length>1?[t[0],t[1]]:[t[0]]},qX={type:17,number:0,flags:Yq},$X={type:16,number:50,flags:Yq},XX={type:16,number:100,flags:Yq},YX=function(t,e,n){var i=t[0],r=t[1];return[ZX(i,e),ZX("undefined"!==typeof r?r:i,n)]},ZX=function(t,e){if(16===t.type)return t.number/100*e;if(OX(t))switch(t.unit){case"rem":case"em":return 16*t.number;case"px":default:return t.number}return t.number},JX="deg",tY="grad",eY="rad",nY="turn",iY={name:"angle",parse:function(t,e){if(15===e.type)switch(e.unit){case JX:return Math.PI*e.number/180;case tY:return Math.PI/200*e.number;case eY:return e.number;case nY:return 2*Math.PI*e.number}throw new Error("Unsupported angle type")}},rY=function(t){return 15===t.type&&(t.unit===JX||t.unit===tY||t.unit===eY||t.unit===nY)},sY=function(t){var e=t.filter(DX).map((function(t){return t.value})).join(" ");switch(e){case"to bottom right":case"to right bottom":case"left top":case"top left":return[qX,qX];case"to top":case"bottom":return oY(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[qX,XX];case"to right":case"left":return oY(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[XX,XX];case"to bottom":case"top":return oY(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[XX,qX];case"to left":case"right":return oY(270)}return 0},oY=function(t){return Math.PI*t/180},aY={name:"color",parse:function(t,e){if(18===e.type){var n=pY[e.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported color function "'+e.name+'"');return n(t,e.values)}if(5===e.type){if(3===e.value.length){var i=e.value.substring(0,1),r=e.value.substring(1,2),s=e.value.substring(2,3);return uY(parseInt(i+i,16),parseInt(r+r,16),parseInt(s+s,16),1)}if(4===e.value.length){i=e.value.substring(0,1),r=e.value.substring(1,2),s=e.value.substring(2,3);var o=e.value.substring(3,4);return uY(parseInt(i+i,16),parseInt(r+r,16),parseInt(s+s,16),parseInt(o+o,16)/255)}if(6===e.value.length){i=e.value.substring(0,2),r=e.value.substring(2,4),s=e.value.substring(4,6);return uY(parseInt(i,16),parseInt(r,16),parseInt(s,16),1)}if(8===e.value.length){i=e.value.substring(0,2),r=e.value.substring(2,4),s=e.value.substring(4,6),o=e.value.substring(6,8);return uY(parseInt(i,16),parseInt(r,16),parseInt(s,16),parseInt(o,16)/255)}}if(20===e.type){var a=mY[e.value.toUpperCase()];if("undefined"!==typeof a)return a}return mY.TRANSPARENT}},lY=function(t){return 0===(255&t)},cY=function(t){var e=255&t,n=255&t>>8,i=255&t>>16,r=255&t>>24;return e<255?"rgba("+r+","+i+","+n+","+e/255+")":"rgb("+r+","+i+","+n+")"},uY=function(t,e,n,i){return(t<<24|e<<16|n<<8|Math.round(255*i)<<0)>>>0},hY=function(t,e){if(17===t.type)return t.number;if(16===t.type){var n=3===e?1:255;return 3===e?t.number/100*n:Math.round(t.number/100*n)}return 0},AY=function(t,e){var n=e.filter(HX);if(3===n.length){var i=n.map(hY),r=i[0],s=i[1],o=i[2];return uY(r,s,o,1)}if(4===n.length){var a=n.map(hY),l=(r=a[0],s=a[1],o=a[2],a[3]);return uY(r,s,o,l)}return 0};function dY(t,e,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(e-t)*n*6+t:n<.5?e:n<2/3?6*(e-t)*(2/3-n)+t:t}var fY=function(t,e){var n=e.filter(HX),i=n[0],r=n[1],s=n[2],o=n[3],a=(17===i.type?oY(i.number):iY.parse(t,i))/(2*Math.PI),l=zX(r)?r.number/100:0,c=zX(s)?s.number/100:0,u="undefined"!==typeof o&&zX(o)?ZX(o,1):1;if(0===l)return uY(255*c,255*c,255*c,1);var h=c<=.5?c*(l+1):c+l-c*l,A=2*c-h,d=dY(A,h,a+1/3),f=dY(A,h,a),p=dY(A,h,a-1/3);return uY(255*d,255*f,255*p,u)},pY={hsl:fY,hsla:fY,rgb:AY,rgba:AY},gY=function(t,e){return aY.parse(t,NX.create(e).parseComponentValue())},mY={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},vY={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(DX(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},yY={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},wY=function(t,e){var n=aY.parse(t,e[0]),i=e[1];return i&&zX(i)?{color:n,stop:i}:{color:n,stop:null}},_Y=function(t,e){var n=t[0],i=t[t.length-1];null===n.stop&&(n.stop=qX),null===i.stop&&(i.stop=XX);for(var r=[],s=0,o=0;o<t.length;o++){var a=t[o].stop;if(null!==a){var l=ZX(a,e);l>s?r.push(l):r.push(s),s=l}else r.push(null)}var c=null;for(o=0;o<r.length;o++){var u=r[o];if(null===u)null===c&&(c=o);else if(null!==c){for(var h=o-c,A=r[c-1],d=(u-A)/(h+1),f=1;f<=h;f++)r[c+f-1]=d*f;c=null}}return t.map((function(t,n){var i=t.color;return{color:i,stop:Math.max(Math.min(1,r[n]/e),0)}}))},bY=function(t,e,n){var i=e/2,r=n/2,s=ZX(t[0],e)-i,o=r-ZX(t[1],n);return(Math.atan2(o,s)+2*Math.PI)%(2*Math.PI)},xY=function(t,e,n){var i="number"===typeof t?t:bY(t,e,n),r=Math.abs(e*Math.sin(i))+Math.abs(n*Math.cos(i)),s=e/2,o=n/2,a=r/2,l=Math.sin(i-Math.PI/2)*a,c=Math.cos(i-Math.PI/2)*a;return[r,s-c,s+c,o-l,o+l]},EY=function(t,e){return Math.sqrt(t*t+e*e)},CY=function(t,e,n,i,r){var s=[[0,0],[0,e],[t,0],[t,e]];return s.reduce((function(t,e){var s=e[0],o=e[1],a=EY(n-s,i-o);return(r?a<t.optimumDistance:a>t.optimumDistance)?{optimumCorner:e,optimumDistance:a}:t}),{optimumDistance:r?1/0:-1/0,optimumCorner:null}).optimumCorner},SY=function(t,e,n,i,r){var s=0,o=0;switch(t.size){case 0:0===t.shape?s=o=Math.min(Math.abs(e),Math.abs(e-i),Math.abs(n),Math.abs(n-r)):1===t.shape&&(s=Math.min(Math.abs(e),Math.abs(e-i)),o=Math.min(Math.abs(n),Math.abs(n-r)));break;case 2:if(0===t.shape)s=o=Math.min(EY(e,n),EY(e,n-r),EY(e-i,n),EY(e-i,n-r));else if(1===t.shape){var a=Math.min(Math.abs(n),Math.abs(n-r))/Math.min(Math.abs(e),Math.abs(e-i)),l=CY(i,r,e,n,!0),c=l[0],u=l[1];s=EY(c-e,(u-n)/a),o=a*s}break;case 1:0===t.shape?s=o=Math.max(Math.abs(e),Math.abs(e-i),Math.abs(n),Math.abs(n-r)):1===t.shape&&(s=Math.max(Math.abs(e),Math.abs(e-i)),o=Math.max(Math.abs(n),Math.abs(n-r)));break;case 3:if(0===t.shape)s=o=Math.max(EY(e,n),EY(e,n-r),EY(e-i,n),EY(e-i,n-r));else if(1===t.shape){a=Math.max(Math.abs(n),Math.abs(n-r))/Math.max(Math.abs(e),Math.abs(e-i));var h=CY(i,r,e,n,!1);c=h[0],u=h[1];s=EY(c-e,(u-n)/a),o=a*s}break}return Array.isArray(t.size)&&(s=ZX(t.size[0],i),o=2===t.size.length?ZX(t.size[1],r):s),[s,o]},BY=function(t,e){var n=oY(180),i=[];return VX(e).forEach((function(e,r){if(0===r){var s=e[0];if(20===s.type&&"to"===s.value)return void(n=sY(e));if(rY(s))return void(n=iY.parse(t,s))}var o=wY(t,e);i.push(o)})),{angle:n,stops:i,type:1}},TY=function(t,e){var n=oY(180),i=[];return VX(e).forEach((function(e,r){if(0===r){var s=e[0];if(20===s.type&&-1!==["top","left","right","bottom"].indexOf(s.value))return void(n=sY(e));if(rY(s))return void(n=(iY.parse(t,s)+oY(270))%oY(360))}var o=wY(t,e);i.push(o)})),{angle:n,stops:i,type:1}},IY=function(t,e){var n=oY(180),i=[],r=1,s=0,o=3,a=[];return VX(e).forEach((function(e,n){var s=e[0];if(0===n){if(DX(s)&&"linear"===s.value)return void(r=1);if(DX(s)&&"radial"===s.value)return void(r=2)}if(18===s.type)if("from"===s.name){var o=aY.parse(t,s.values[0]);i.push({stop:qX,color:o})}else if("to"===s.name){o=aY.parse(t,s.values[0]);i.push({stop:XX,color:o})}else if("color-stop"===s.name){var a=s.values.filter(HX);if(2===a.length){o=aY.parse(t,a[1]);var l=a[0];kX(l)&&i.push({stop:{type:16,number:100*l.number,flags:l.flags},color:o})}}})),1===r?{angle:(n+oY(180))%oY(360),stops:i,type:r}:{size:o,shape:s,stops:i,position:a,type:r}},FY="closest-side",LY="farthest-side",RY="closest-corner",MY="farthest-corner",PY="circle",NY="ellipse",OY="cover",kY="contain",DY=function(t,e){var n=0,i=3,r=[],s=[];return VX(e).forEach((function(e,o){var a=!0;if(0===o){var l=!1;a=e.reduce((function(t,e){if(l)if(DX(e))switch(e.value){case"center":return s.push($X),t;case"top":case"left":return s.push(qX),t;case"right":case"bottom":return s.push(XX),t}else(zX(e)||WX(e))&&s.push(e);else if(DX(e))switch(e.value){case PY:return n=0,!1;case NY:return n=1,!1;case"at":return l=!0,!1;case FY:return i=0,!1;case OY:case LY:return i=1,!1;case kY:case RY:return i=2,!1;case MY:return i=3,!1}else if(WX(e)||zX(e))return Array.isArray(i)||(i=[]),i.push(e),!1;return t}),a)}if(a){var c=wY(t,e);r.push(c)}})),{size:i,shape:n,stops:r,position:s,type:2}},UY=function(t,e){var n=0,i=3,r=[],s=[];return VX(e).forEach((function(e,o){var a=!0;if(0===o?a=e.reduce((function(t,e){if(DX(e))switch(e.value){case"center":return s.push($X),!1;case"top":case"left":return s.push(qX),!1;case"right":case"bottom":return s.push(XX),!1}else if(zX(e)||WX(e))return s.push(e),!1;return t}),a):1===o&&(a=e.reduce((function(t,e){if(DX(e))switch(e.value){case PY:return n=0,!1;case NY:return n=1,!1;case kY:case FY:return i=0,!1;case LY:return i=1,!1;case RY:return i=2,!1;case OY:case MY:return i=3,!1}else if(WX(e)||zX(e))return Array.isArray(i)||(i=[]),i.push(e),!1;return t}),a)),a){var l=wY(t,e);r.push(l)}})),{size:i,shape:n,stops:r,position:s,type:2}},QY=function(t){return 1===t.type},GY=function(t){return 2===t.type},HY={name:"image",parse:function(t,e){if(22===e.type){var n={url:e.value,type:0};return t.cache.addImage(e.value),n}if(18===e.type){var i=WY[e.name];if("undefined"===typeof i)throw new Error('Attempting to parse an unsupported image function "'+e.name+'"');return i(t,e.values)}throw new Error("Unsupported image type "+e.type)}};function VY(t){return!(20===t.type&&"none"===t.value)&&(18!==t.type||!!WY[t.name])}var jY,WY={"linear-gradient":BY,"-moz-linear-gradient":TY,"-ms-linear-gradient":TY,"-o-linear-gradient":TY,"-webkit-linear-gradient":TY,"radial-gradient":DY,"-moz-radial-gradient":UY,"-ms-radial-gradient":UY,"-o-radial-gradient":UY,"-webkit-radial-gradient":UY,"-webkit-gradient":IY},zY={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var n=e[0];return 20===n.type&&"none"===n.value?[]:e.filter((function(t){return HX(t)&&VY(t)})).map((function(e){return HY.parse(t,e)}))}},KY={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(t,e){return e.map((function(t){if(DX(t))switch(t.value){case"padding-box":return 1;case"content-box":return 2}return 0}))}},qY={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(t,e){return VX(e).map((function(t){return t.filter(zX)})).map(KX)}},$Y={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(t,e){return VX(e).map((function(t){return t.filter(DX).map((function(t){return t.value})).join(" ")})).map(XY)}},XY=function(t){switch(t){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}};(function(t){t["AUTO"]="auto",t["CONTAIN"]="contain",t["COVER"]="cover"})(jY||(jY={}));var YY,ZY={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(t,e){return VX(e).map((function(t){return t.filter(JY)}))}},JY=function(t){return DX(t)||zX(t)},tZ=function(t){return{name:"border-"+t+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},eZ=tZ("top"),nZ=tZ("right"),iZ=tZ("bottom"),rZ=tZ("left"),sZ=function(t){return{name:"border-radius-"+t,initialValue:"0 0",prefix:!1,type:1,parse:function(t,e){return KX(e.filter(zX))}}},oZ=sZ("top-left"),aZ=sZ("top-right"),lZ=sZ("bottom-right"),cZ=sZ("bottom-left"),uZ=function(t){return{name:"border-"+t+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,e){switch(e){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},hZ=uZ("top"),AZ=uZ("right"),dZ=uZ("bottom"),fZ=uZ("left"),pZ=function(t){return{name:"border-"+t+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return OX(e)?e.number:0}}},gZ=pZ("top"),mZ=pZ("right"),vZ=pZ("bottom"),yZ=pZ("left"),wZ={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},_Z={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(t,e){switch(e){case"rtl":return 1;case"ltr":default:return 0}}},bZ={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(t,e){return e.filter(DX).reduce((function(t,e){return t|xZ(e.value)}),0)}},xZ=function(t){switch(t){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},EZ={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},CZ={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(t,e){return 20===e.type&&"normal"===e.value?0:17===e.type||15===e.type?e.number:0}};(function(t){t["NORMAL"]="normal",t["STRICT"]="strict"})(YY||(YY={}));var SZ,BZ={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"strict":return YY.STRICT;case"normal":default:return YY.NORMAL}}},TZ={name:"line-height",initialValue:"normal",prefix:!1,type:4},IZ=function(t,e){return DX(t)&&"normal"===t.value?1.2*e:17===t.type?e*t.number:zX(t)?ZX(t,e):e},FZ={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(t,e){return 20===e.type&&"none"===e.value?null:HY.parse(t,e)}},LZ={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(t,e){switch(e){case"inside":return 0;case"outside":default:return 1}}},RZ={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},MZ=function(t){return{name:"margin-"+t,initialValue:"0",prefix:!1,type:4}},PZ=MZ("top"),NZ=MZ("right"),OZ=MZ("bottom"),kZ=MZ("left"),DZ={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(t,e){return e.filter(DX).map((function(t){switch(t.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}}))}},UZ={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-word":return"break-word";case"normal":default:return"normal"}}},QZ=function(t){return{name:"padding-"+t,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},GZ=QZ("top"),HZ=QZ("right"),VZ=QZ("bottom"),jZ=QZ("left"),WZ={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(t,e){switch(e){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},zZ={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(t,e){switch(e){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},KZ={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&QX(e[0],"none")?[]:VX(e).map((function(e){for(var n={color:mY.TRANSPARENT,offsetX:qX,offsetY:qX,blur:qX},i=0,r=0;r<e.length;r++){var s=e[r];WX(s)?(0===i?n.offsetX=s:1===i?n.offsetY=s:n.blur=s,i++):n.color=aY.parse(t,s)}return n}))}},qZ={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},$Z={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(t,e){if(20===e.type&&"none"===e.value)return null;if(18===e.type){var n=ZZ[e.name];if("undefined"===typeof n)throw new Error('Attempting to parse an unsupported transform function "'+e.name+'"');return n(e.values)}return null}},XZ=function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number}));return 6===e.length?e:null},YZ=function(t){var e=t.filter((function(t){return 17===t.type})).map((function(t){return t.number})),n=e[0],i=e[1];e[2],e[3];var r=e[4],s=e[5];e[6],e[7],e[8],e[9],e[10],e[11];var o=e[12],a=e[13];return e[14],e[15],16===e.length?[n,i,r,s,o,a]:null},ZZ={matrix:XZ,matrix3d:YZ},JZ={type:16,number:50,flags:Yq},tJ=[JZ,JZ],eJ={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(t,e){var n=e.filter(zX);return 2!==n.length?tJ:[n[0],n[1]]}},nJ={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(t,e){switch(e){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}};(function(t){t["NORMAL"]="normal",t["BREAK_ALL"]="break-all",t["KEEP_ALL"]="keep-all"})(SZ||(SZ={}));for(var iJ={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"break-all":return SZ.BREAK_ALL;case"keep-all":return SZ.KEEP_ALL;case"normal":default:return SZ.NORMAL}}},rJ={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(t,e){if(20===e.type)return{auto:!0,order:0};if(kX(e))return{auto:!1,order:e.number};throw new Error("Invalid z-index number parsed")}},sJ={name:"time",parse:function(t,e){if(15===e.type)switch(e.unit.toLowerCase()){case"s":return 1e3*e.number;case"ms":return e.number}throw new Error("Unsupported time type")}},oJ={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(t,e){return kX(e)?e.number:1}},aJ={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},lJ={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(t,e){return e.filter(DX).map((function(t){switch(t.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0})).filter((function(t){return 0!==t}))}},cJ={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(t,e){var n=[],i=[];return e.forEach((function(t){switch(t.type){case 20:case 0:n.push(t.value);break;case 17:n.push(t.number.toString());break;case 4:i.push(n.join(" ")),n.length=0;break}})),n.length&&i.push(n.join(" ")),i.map((function(t){return-1===t.indexOf(" ")?t:"'"+t+"'"}))}},uJ={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},hJ={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(t,e){if(kX(e))return e.number;if(DX(e))switch(e.value){case"bold":return 700;case"normal":default:return 400}return 400}},AJ={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return e.filter(DX).map((function(t){return t.value}))}},dJ={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(t,e){switch(e){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},fJ=function(t,e){return 0!==(t&e)},pJ={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(t,e){if(0===e.length)return[];var n=e[0];return 20===n.type&&"none"===n.value?[]:e}},gJ={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var n=e[0];if(20===n.type&&"none"===n.value)return null;for(var i=[],r=e.filter(GX),s=0;s<r.length;s++){var o=r[s],a=r[s+1];if(20===o.type){var l=a&&kX(a)?a.number:1;i.push({counter:o.value,increment:l})}}return i}},mJ={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return[];for(var n=[],i=e.filter(GX),r=0;r<i.length;r++){var s=i[r],o=i[r+1];if(DX(s)&&"none"!==s.value){var a=o&&kX(o)?o.number:0;n.push({counter:s.value,reset:a})}}return n}},vJ={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(t,e){return e.filter(OX).map((function(e){return sJ.parse(t,e)}))}},yJ={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(t,e){if(0===e.length)return null;var n=e[0];if(20===n.type&&"none"===n.value)return null;var i=[],r=e.filter(UX);if(r.length%2!==0)return null;for(var s=0;s<r.length;s+=2){var o=r[s].value,a=r[s+1].value;i.push({open:o,close:a})}return i}},wJ=function(t,e,n){if(!t)return"";var i=t[Math.min(e,t.length-1)];return i?n?i.open:i.close:""},_J={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(t,e){return 1===e.length&&QX(e[0],"none")?[]:VX(e).map((function(e){for(var n={color:255,offsetX:qX,offsetY:qX,blur:qX,spread:qX,inset:!1},i=0,r=0;r<e.length;r++){var s=e[r];QX(s,"inset")?n.inset=!0:WX(s)?(0===i?n.offsetX=s:1===i?n.offsetY=s:2===i?n.blur=s:n.spread=s,i++):n.color=aY.parse(t,s)}return n}))}},bJ={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(t,e){var n=[0,1,2],i=[];return e.filter(DX).forEach((function(t){switch(t.value){case"stroke":i.push(1);break;case"fill":i.push(0);break;case"markers":i.push(2);break}})),n.forEach((function(t){-1===i.indexOf(t)&&i.push(t)})),i}},xJ={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},EJ={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(t,e){return OX(e)?e.number:0}},CJ=function(){function t(t,e){var n,i;this.animationDuration=TJ(t,vJ,e.animationDuration),this.backgroundClip=TJ(t,vY,e.backgroundClip),this.backgroundColor=TJ(t,yY,e.backgroundColor),this.backgroundImage=TJ(t,zY,e.backgroundImage),this.backgroundOrigin=TJ(t,KY,e.backgroundOrigin),this.backgroundPosition=TJ(t,qY,e.backgroundPosition),this.backgroundRepeat=TJ(t,$Y,e.backgroundRepeat),this.backgroundSize=TJ(t,ZY,e.backgroundSize),this.borderTopColor=TJ(t,eZ,e.borderTopColor),this.borderRightColor=TJ(t,nZ,e.borderRightColor),this.borderBottomColor=TJ(t,iZ,e.borderBottomColor),this.borderLeftColor=TJ(t,rZ,e.borderLeftColor),this.borderTopLeftRadius=TJ(t,oZ,e.borderTopLeftRadius),this.borderTopRightRadius=TJ(t,aZ,e.borderTopRightRadius),this.borderBottomRightRadius=TJ(t,lZ,e.borderBottomRightRadius),this.borderBottomLeftRadius=TJ(t,cZ,e.borderBottomLeftRadius),this.borderTopStyle=TJ(t,hZ,e.borderTopStyle),this.borderRightStyle=TJ(t,AZ,e.borderRightStyle),this.borderBottomStyle=TJ(t,dZ,e.borderBottomStyle),this.borderLeftStyle=TJ(t,fZ,e.borderLeftStyle),this.borderTopWidth=TJ(t,gZ,e.borderTopWidth),this.borderRightWidth=TJ(t,mZ,e.borderRightWidth),this.borderBottomWidth=TJ(t,vZ,e.borderBottomWidth),this.borderLeftWidth=TJ(t,yZ,e.borderLeftWidth),this.boxShadow=TJ(t,_J,e.boxShadow),this.color=TJ(t,wZ,e.color),this.direction=TJ(t,_Z,e.direction),this.display=TJ(t,bZ,e.display),this.float=TJ(t,EZ,e.cssFloat),this.fontFamily=TJ(t,cJ,e.fontFamily),this.fontSize=TJ(t,uJ,e.fontSize),this.fontStyle=TJ(t,dJ,e.fontStyle),this.fontVariant=TJ(t,AJ,e.fontVariant),this.fontWeight=TJ(t,hJ,e.fontWeight),this.letterSpacing=TJ(t,CZ,e.letterSpacing),this.lineBreak=TJ(t,BZ,e.lineBreak),this.lineHeight=TJ(t,TZ,e.lineHeight),this.listStyleImage=TJ(t,FZ,e.listStyleImage),this.listStylePosition=TJ(t,LZ,e.listStylePosition),this.listStyleType=TJ(t,RZ,e.listStyleType),this.marginTop=TJ(t,PZ,e.marginTop),this.marginRight=TJ(t,NZ,e.marginRight),this.marginBottom=TJ(t,OZ,e.marginBottom),this.marginLeft=TJ(t,kZ,e.marginLeft),this.opacity=TJ(t,oJ,e.opacity);var r=TJ(t,DZ,e.overflow);this.overflowX=r[0],this.overflowY=r[r.length>1?1:0],this.overflowWrap=TJ(t,UZ,e.overflowWrap),this.paddingTop=TJ(t,GZ,e.paddingTop),this.paddingRight=TJ(t,HZ,e.paddingRight),this.paddingBottom=TJ(t,VZ,e.paddingBottom),this.paddingLeft=TJ(t,jZ,e.paddingLeft),this.paintOrder=TJ(t,bJ,e.paintOrder),this.position=TJ(t,zZ,e.position),this.textAlign=TJ(t,WZ,e.textAlign),this.textDecorationColor=TJ(t,aJ,null!==(n=e.textDecorationColor)&&void 0!==n?n:e.color),this.textDecorationLine=TJ(t,lJ,null!==(i=e.textDecorationLine)&&void 0!==i?i:e.textDecoration),this.textShadow=TJ(t,KZ,e.textShadow),this.textTransform=TJ(t,qZ,e.textTransform),this.transform=TJ(t,$Z,e.transform),this.transformOrigin=TJ(t,eJ,e.transformOrigin),this.visibility=TJ(t,nJ,e.visibility),this.webkitTextStrokeColor=TJ(t,xJ,e.webkitTextStrokeColor),this.webkitTextStrokeWidth=TJ(t,EJ,e.webkitTextStrokeWidth),this.wordBreak=TJ(t,iJ,e.wordBreak),this.zIndex=TJ(t,rJ,e.zIndex)}return t.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&0===this.visibility},t.prototype.isTransparent=function(){return lY(this.backgroundColor)},t.prototype.isTransformed=function(){return null!==this.transform},t.prototype.isPositioned=function(){return 0!==this.position},t.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},t.prototype.isFloating=function(){return 0!==this.float},t.prototype.isInlineLevel=function(){return fJ(this.display,4)||fJ(this.display,33554432)||fJ(this.display,268435456)||fJ(this.display,536870912)||fJ(this.display,67108864)||fJ(this.display,134217728)},t}(),SJ=function(){function t(t,e){this.content=TJ(t,pJ,e.content),this.quotes=TJ(t,yJ,e.quotes)}return t}(),BJ=function(){function t(t,e){this.counterIncrement=TJ(t,gJ,e.counterIncrement),this.counterReset=TJ(t,mJ,e.counterReset)}return t}(),TJ=function(t,e,n){var i=new PX,r=null!==n&&"undefined"!==typeof n?n.toString():e.initialValue;i.write(r);var s=new NX(i.read());switch(e.type){case 2:var o=s.parseComponentValue();return e.parse(t,DX(o)?o.value:e.initialValue);case 0:return e.parse(t,s.parseComponentValue());case 1:return e.parse(t,s.parseComponentValues());case 4:return s.parseComponentValue();case 3:switch(e.format){case"angle":return iY.parse(t,s.parseComponentValue());case"color":return aY.parse(t,s.parseComponentValue());case"image":return HY.parse(t,s.parseComponentValue());case"length":var a=s.parseComponentValue();return WX(a)?a:qX;case"length-percentage":var l=s.parseComponentValue();return zX(l)?l:qX;case"time":return sJ.parse(t,s.parseComponentValue())}break}},IJ="data-html2canvas-debug",FJ=function(t){var e=t.getAttribute(IJ);switch(e){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},LJ=function(t,e){var n=FJ(t);return 1===n||e===n},RJ=function(){function t(t,e){this.context=t,this.textNodes=[],this.elements=[],this.flags=0,LJ(e,3),this.styles=new CJ(t,window.getComputedStyle(e,null)),S1(e)&&(this.styles.animationDuration.some((function(t){return t>0}))&&(e.style.animationDuration="0s"),null!==this.styles.transform&&(e.style.transform="none")),this.bounds=sK(this.context,e),LJ(e,4)&&(this.flags|=16)}return t}(),MJ="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",PJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",NJ="undefined"===typeof Uint8Array?[]:new Uint8Array(256),OJ=0;OJ<PJ.length;OJ++)NJ[PJ.charCodeAt(OJ)]=OJ;for(var kJ=function(t){var e,n,i,r,s,o=.75*t.length,a=t.length,l=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);var c="undefined"!==typeof ArrayBuffer&&"undefined"!==typeof Uint8Array&&"undefined"!==typeof Uint8Array.prototype.slice?new ArrayBuffer(o):new Array(o),u=Array.isArray(c)?c:new Uint8Array(c);for(e=0;e<a;e+=4)n=NJ[t.charCodeAt(e)],i=NJ[t.charCodeAt(e+1)],r=NJ[t.charCodeAt(e+2)],s=NJ[t.charCodeAt(e+3)],u[l++]=n<<2|i>>4,u[l++]=(15&i)<<4|r>>2,u[l++]=(3&r)<<6|63&s;return c},DJ=function(t){for(var e=t.length,n=[],i=0;i<e;i+=2)n.push(t[i+1]<<8|t[i]);return n},UJ=function(t){for(var e=t.length,n=[],i=0;i<e;i+=4)n.push(t[i+3]<<24|t[i+2]<<16|t[i+1]<<8|t[i]);return n},QJ=5,GJ=11,HJ=2,VJ=GJ-QJ,jJ=65536>>QJ,WJ=1<<QJ,zJ=WJ-1,KJ=1024>>QJ,qJ=jJ+KJ,$J=qJ,XJ=32,YJ=$J+XJ,ZJ=65536>>GJ,JJ=1<<VJ,t0=JJ-1,e0=function(t,e,n){return t.slice?t.slice(e,n):new Uint16Array(Array.prototype.slice.call(t,e,n))},n0=function(t,e,n){return t.slice?t.slice(e,n):new Uint32Array(Array.prototype.slice.call(t,e,n))},i0=function(t,e){var n=kJ(t),i=Array.isArray(n)?UJ(n):new Uint32Array(n),r=Array.isArray(n)?DJ(n):new Uint16Array(n),s=24,o=e0(r,s/2,i[4]/2),a=2===i[5]?e0(r,(s+i[4])/2):n0(i,Math.ceil((s+i[4])/4));return new r0(i[0],i[1],i[2],i[3],o,a)},r0=function(){function t(t,e,n,i,r,s){this.initialValue=t,this.errorValue=e,this.highStart=n,this.highValueIndex=i,this.index=r,this.data=s}return t.prototype.get=function(t){var e;if(t>=0){if(t<55296||t>56319&&t<=65535)return e=this.index[t>>QJ],e=(e<<HJ)+(t&zJ),this.data[e];if(t<=65535)return e=this.index[jJ+(t-55296>>QJ)],e=(e<<HJ)+(t&zJ),this.data[e];if(t<this.highStart)return e=YJ-ZJ+(t>>GJ),e=this.index[e],e+=t>>QJ&t0,e=this.index[e],e=(e<<HJ)+(t&zJ),this.data[e];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},t}(),s0="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o0="undefined"===typeof Uint8Array?[]:new Uint8Array(256),a0=0;a0<s0.length;a0++)o0[s0.charCodeAt(a0)]=a0;var l0,c0=1,u0=2,h0=3,A0=4,d0=5,f0=7,p0=8,g0=9,m0=10,v0=11,y0=12,w0=13,_0=14,b0=15,x0=function(t){var e=[],n=0,i=t.length;while(n<i){var r=t.charCodeAt(n++);if(r>=55296&&r<=56319&&n<i){var s=t.charCodeAt(n++);56320===(64512&s)?e.push(((1023&r)<<10)+(1023&s)+65536):(e.push(r),n--)}else e.push(r)}return e},E0=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(String.fromCodePoint)return String.fromCodePoint.apply(String,t);var n=t.length;if(!n)return"";var i=[],r=-1,s="";while(++r<n){var o=t[r];o<=65535?i.push(o):(o-=65536,i.push(55296+(o>>10),o%1024+56320)),(r+1===n||i.length>16384)&&(s+=String.fromCharCode.apply(String,i),i.length=0)}return s},C0=i0(MJ),S0="",B0="",T0=function(t){return C0.get(t)},I0=function(t,e,n){var i=n-2,r=e[i],s=e[n-1],o=e[n];if(s===u0&&o===h0)return S0;if(s===u0||s===h0||s===A0)return B0;if(o===u0||o===h0||o===A0)return B0;if(s===p0&&-1!==[p0,g0,v0,y0].indexOf(o))return S0;if((s===v0||s===g0)&&(o===g0||o===m0))return S0;if((s===y0||s===m0)&&o===m0)return S0;if(o===w0||o===d0)return S0;if(o===f0)return S0;if(s===c0)return S0;if(s===w0&&o===_0){while(r===d0)r=e[--i];if(r===_0)return S0}if(s===b0&&o===b0){var a=0;while(r===b0)a++,r=e[--i];if(a%2===0)return S0}return B0},F0=function(t){var e=x0(t),n=e.length,i=0,r=0,s=e.map(T0);return{next:function(){if(i>=n)return{done:!0,value:null};var t=S0;while(i<n&&(t=I0(e,s,++i))===S0);if(t!==S0||i===n){var o=E0.apply(null,e.slice(r,i));return r=i,{value:o,done:!1}}return{done:!0,value:null}}}},L0=function(t){var e,n=F0(t),i=[];while(!(e=n.next()).done)e.value&&i.push(e.value.slice());return i},R0=function(t){var e=123;if(t.createRange){var n=t.createRange();if(n.getBoundingClientRect){var i=t.createElement("boundtest");i.style.height=e+"px",i.style.display="block",t.body.appendChild(i),n.selectNode(i);var r=n.getBoundingClientRect(),s=Math.round(r.height);if(t.body.removeChild(i),s===e)return!0}}return!1},M0=function(t){var e=t.createElement("boundtest");e.style.width="50px",e.style.display="block",e.style.fontSize="12px",e.style.letterSpacing="0px",e.style.wordSpacing="0px",t.body.appendChild(e);var n=t.createRange();e.innerHTML="function"===typeof"".repeat?"&#128104;".repeat(10):"";var i=e.firstChild,r=aK(i.data).map((function(t){return lK(t)})),s=0,o={},a=r.every((function(t,e){n.setStart(i,s),n.setEnd(i,s+t.length);var r=n.getBoundingClientRect();s+=t.length;var a=r.x>o.x||r.y>o.y;return o=r,0===e||a}));return t.body.removeChild(e),a},P0=function(){return"undefined"!==typeof(new Image).crossOrigin},N0=function(){return"string"===typeof(new XMLHttpRequest).responseType},O0=function(t){var e=new Image,n=t.createElement("canvas"),i=n.getContext("2d");if(!i)return!1;e.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{i.drawImage(e,0,0),n.toDataURL()}catch(r){return!1}return!0},k0=function(t){return 0===t[0]&&255===t[1]&&0===t[2]&&255===t[3]},D0=function(t){var e=t.createElement("canvas"),n=100;e.width=n,e.height=n;var i=e.getContext("2d");if(!i)return Promise.reject(!1);i.fillStyle="rgb(0, 255, 0)",i.fillRect(0,0,n,n);var r=new Image,s=e.toDataURL();r.src=s;var o=U0(n,n,0,0,r);return i.fillStyle="red",i.fillRect(0,0,n,n),Q0(o).then((function(e){i.drawImage(e,0,0);var r=i.getImageData(0,0,n,n).data;i.fillStyle="red",i.fillRect(0,0,n,n);var o=t.createElement("div");return o.style.backgroundImage="url("+s+")",o.style.height=n+"px",k0(r)?Q0(U0(n,n,0,0,o)):Promise.reject(!1)})).then((function(t){return i.drawImage(t,0,0),k0(i.getImageData(0,0,n,n).data)})).catch((function(){return!1}))},U0=function(t,e,n,i,r){var s="http://www.w3.org/2000/svg",o=document.createElementNS(s,"svg"),a=document.createElementNS(s,"foreignObject");return o.setAttributeNS(null,"width",t.toString()),o.setAttributeNS(null,"height",e.toString()),a.setAttributeNS(null,"width","100%"),a.setAttributeNS(null,"height","100%"),a.setAttributeNS(null,"x",n.toString()),a.setAttributeNS(null,"y",i.toString()),a.setAttributeNS(null,"externalResourcesRequired","true"),o.appendChild(a),a.appendChild(r),o},Q0=function(t){return new Promise((function(e,n){var i=new Image;i.onload=function(){return e(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},G0={get SUPPORT_RANGE_BOUNDS(){var t=R0(document);return Object.defineProperty(G0,"SUPPORT_RANGE_BOUNDS",{value:t}),t},get SUPPORT_WORD_BREAKING(){var t=G0.SUPPORT_RANGE_BOUNDS&&M0(document);return Object.defineProperty(G0,"SUPPORT_WORD_BREAKING",{value:t}),t},get SUPPORT_SVG_DRAWING(){var t=O0(document);return Object.defineProperty(G0,"SUPPORT_SVG_DRAWING",{value:t}),t},get SUPPORT_FOREIGNOBJECT_DRAWING(){var t="function"===typeof Array.from&&"function"===typeof window.fetch?D0(document):Promise.resolve(!1);return Object.defineProperty(G0,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:t}),t},get SUPPORT_CORS_IMAGES(){var t=P0();return Object.defineProperty(G0,"SUPPORT_CORS_IMAGES",{value:t}),t},get SUPPORT_RESPONSE_TYPE(){var t=N0();return Object.defineProperty(G0,"SUPPORT_RESPONSE_TYPE",{value:t}),t},get SUPPORT_CORS_XHR(){var t="withCredentials"in new XMLHttpRequest;return Object.defineProperty(G0,"SUPPORT_CORS_XHR",{value:t}),t},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var t=!("undefined"===typeof Intl||!Intl.Segmenter);return Object.defineProperty(G0,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:t}),t}},H0=function(){function t(t,e){this.text=t,this.bounds=e}return t}(),V0=function(t,e,n,i){var r=q0(e,n),s=[],o=0;return r.forEach((function(e){if(n.textDecorationLine.length||e.trim().length>0)if(G0.SUPPORT_RANGE_BOUNDS){var r=W0(i,o,e.length).getClientRects();if(r.length>1){var a=z0(e),l=0;a.forEach((function(e){s.push(new H0(e,rK.fromDOMRectList(t,W0(i,l+o,e.length).getClientRects()))),l+=e.length}))}else s.push(new H0(e,rK.fromDOMRectList(t,r)))}else{var c=i.splitText(e.length);s.push(new H0(e,j0(t,i))),i=c}else G0.SUPPORT_RANGE_BOUNDS||(i=i.splitText(e.length));o+=e.length})),s},j0=function(t,e){var n=e.ownerDocument;if(n){var i=n.createElement("html2canvaswrapper");i.appendChild(e.cloneNode(!0));var r=e.parentNode;if(r){r.replaceChild(i,e);var s=sK(t,i);return i.firstChild&&r.replaceChild(i.firstChild,i),s}}return rK.EMPTY},W0=function(t,e,n){var i=t.ownerDocument;if(!i)throw new Error("Node has no owner document");var r=i.createRange();return r.setStart(t,e),r.setEnd(t,e+n),r},z0=function(t){if(G0.SUPPORT_NATIVE_TEXT_SEGMENTATION){var e=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(e.segment(t)).map((function(t){return t.segment}))}return L0(t)},K0=function(t,e){if(G0.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(t)).map((function(t){return t.segment}))}return X0(t,e)},q0=function(t,e){return 0!==e.letterSpacing?z0(t):K0(t,e)},$0=[32,160,4961,65792,65793,4153,4241],X0=function(t,e){var n,i=qq(t,{lineBreak:e.lineBreak,wordBreak:"break-word"===e.overflowWrap?"break-word":e.wordBreak}),r=[],s=function(){if(n.value){var t=n.value.slice(),e=aK(t),i="";e.forEach((function(t){-1===$0.indexOf(t)?i+=lK(t):(i.length&&r.push(i),r.push(lK(t)),i="")})),i.length&&r.push(i)}};while(!(n=i.next()).done)s();return r},Y0=function(){function t(t,e,n){this.text=Z0(e.data,n.textTransform),this.textBounds=V0(t,this.text,n,e)}return t}(),Z0=function(t,e){switch(e){case 1:return t.toLowerCase();case 3:return t.replace(J0,t1);case 2:return t.toUpperCase();default:return t}},J0=/(^|\s|:|-|\(|\))([a-z])/g,t1=function(t,e,n){return t.length>0?e+n.toUpperCase():t},e1=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.src=n.currentSrc||n.src,i.intrinsicWidth=n.naturalWidth,i.intrinsicHeight=n.naturalHeight,i.context.cache.addImage(i.src),i}return Jz(e,t),e}(RJ),n1=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.canvas=n,i.intrinsicWidth=n.width,i.intrinsicHeight=n.height,i}return Jz(e,t),e}(RJ),i1=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=new XMLSerializer,s=sK(e,n);return n.setAttribute("width",s.width+"px"),n.setAttribute("height",s.height+"px"),i.svg="data:image/svg+xml,"+encodeURIComponent(r.serializeToString(n)),i.intrinsicWidth=n.width.baseVal.value,i.intrinsicHeight=n.height.baseVal.value,i.context.cache.addImage(i.svg),i}return Jz(e,t),e}(RJ),r1=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.value=n.value,i}return Jz(e,t),e}(RJ),s1=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.start=n.start,i.reversed="boolean"===typeof n.reversed&&!0===n.reversed,i}return Jz(e,t),e}(RJ),o1=[{type:15,flags:0,unit:"px",number:3}],a1=[{type:16,flags:0,number:50}],l1=function(t){return t.width>t.height?new rK(t.left+(t.width-t.height)/2,t.top,t.height,t.height):t.width<t.height?new rK(t.left,t.top+(t.height-t.width)/2,t.width,t.width):t},c1=function(t){var e=t.type===A1?new Array(t.value.length+1).join(""):t.value;return 0===e.length?t.placeholder||"":e},u1="checkbox",h1="radio",A1="password",d1=707406591,f1=function(t){function e(e,n){var i=t.call(this,e,n)||this;switch(i.type=n.type.toLowerCase(),i.checked=n.checked,i.value=c1(n),i.type!==u1&&i.type!==h1||(i.styles.backgroundColor=3739148031,i.styles.borderTopColor=i.styles.borderRightColor=i.styles.borderBottomColor=i.styles.borderLeftColor=2779096575,i.styles.borderTopWidth=i.styles.borderRightWidth=i.styles.borderBottomWidth=i.styles.borderLeftWidth=1,i.styles.borderTopStyle=i.styles.borderRightStyle=i.styles.borderBottomStyle=i.styles.borderLeftStyle=1,i.styles.backgroundClip=[0],i.styles.backgroundOrigin=[0],i.bounds=l1(i.bounds)),i.type){case u1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=o1;break;case h1:i.styles.borderTopRightRadius=i.styles.borderTopLeftRadius=i.styles.borderBottomRightRadius=i.styles.borderBottomLeftRadius=a1;break}return i}return Jz(e,t),e}(RJ),p1=function(t){function e(e,n){var i=t.call(this,e,n)||this,r=n.options[n.selectedIndex||0];return i.value=r&&r.text||"",i}return Jz(e,t),e}(RJ),g1=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.value=n.value,i}return Jz(e,t),e}(RJ),m1=function(t){function e(e,n){var i=t.call(this,e,n)||this;i.src=n.src,i.width=parseInt(n.width,10)||0,i.height=parseInt(n.height,10)||0,i.backgroundColor=i.styles.backgroundColor;try{if(n.contentWindow&&n.contentWindow.document&&n.contentWindow.document.documentElement){i.tree=_1(e,n.contentWindow.document.documentElement);var r=n.contentWindow.document.documentElement?gY(e,getComputedStyle(n.contentWindow.document.documentElement).backgroundColor):mY.TRANSPARENT,s=n.contentWindow.document.body?gY(e,getComputedStyle(n.contentWindow.document.body).backgroundColor):mY.TRANSPARENT;i.backgroundColor=lY(r)?lY(s)?i.styles.backgroundColor:s:r}}catch(o){}return i}return Jz(e,t),e}(RJ),v1=["OL","UL","MENU"],y1=function(t,e,n,i){for(var r=e.firstChild,s=void 0;r;r=s)if(s=r.nextSibling,E1(r)&&r.data.trim().length>0)n.textNodes.push(new Y0(t,r,n.styles));else if(C1(r))if(H1(r)&&r.assignedNodes)r.assignedNodes().forEach((function(e){return y1(t,e,n,i)}));else{var o=w1(t,r);o.styles.isVisible()&&(b1(r,o,i)?o.flags|=4:x1(o.styles)&&(o.flags|=2),-1!==v1.indexOf(r.tagName)&&(o.flags|=8),n.elements.push(o),r.slot,r.shadowRoot?y1(t,r.shadowRoot,o,i):Q1(r)||R1(r)||G1(r)||y1(t,r,o,i))}},w1=function(t,e){return O1(e)?new e1(t,e):P1(e)?new n1(t,e):R1(e)?new i1(t,e):T1(e)?new r1(t,e):I1(e)?new s1(t,e):F1(e)?new f1(t,e):G1(e)?new p1(t,e):Q1(e)?new g1(t,e):k1(e)?new m1(t,e):new RJ(t,e)},_1=function(t,e){var n=w1(t,e);return n.flags|=4,y1(t,e,n,n),n},b1=function(t,e,n){return e.styles.isPositionedWithZIndex()||e.styles.opacity<1||e.styles.isTransformed()||M1(t)&&n.styles.isTransparent()},x1=function(t){return t.isPositioned()||t.isFloating()},E1=function(t){return t.nodeType===Node.TEXT_NODE},C1=function(t){return t.nodeType===Node.ELEMENT_NODE},S1=function(t){return C1(t)&&"undefined"!==typeof t.style&&!B1(t)},B1=function(t){return"object"===typeof t.className},T1=function(t){return"LI"===t.tagName},I1=function(t){return"OL"===t.tagName},F1=function(t){return"INPUT"===t.tagName},L1=function(t){return"HTML"===t.tagName},R1=function(t){return"svg"===t.tagName},M1=function(t){return"BODY"===t.tagName},P1=function(t){return"CANVAS"===t.tagName},N1=function(t){return"VIDEO"===t.tagName},O1=function(t){return"IMG"===t.tagName},k1=function(t){return"IFRAME"===t.tagName},D1=function(t){return"STYLE"===t.tagName},U1=function(t){return"SCRIPT"===t.tagName},Q1=function(t){return"TEXTAREA"===t.tagName},G1=function(t){return"SELECT"===t.tagName},H1=function(t){return"SLOT"===t.tagName},V1=function(t){return t.tagName.indexOf("-")>0},j1=function(){function t(){this.counters={}}return t.prototype.getCounterValue=function(t){var e=this.counters[t];return e&&e.length?e[e.length-1]:1},t.prototype.getCounterValues=function(t){var e=this.counters[t];return e||[]},t.prototype.pop=function(t){var e=this;t.forEach((function(t){return e.counters[t].pop()}))},t.prototype.parse=function(t){var e=this,n=t.counterIncrement,i=t.counterReset,r=!0;null!==n&&n.forEach((function(t){var n=e.counters[t.counter];n&&0!==t.increment&&(r=!1,n.length||n.push(1),n[Math.max(0,n.length-1)]+=t.increment)}));var s=[];return r&&i.forEach((function(t){var n=e.counters[t.counter];s.push(t.counter),n||(n=e.counters[t.counter]=[]),n.push(t.reset)})),s},t}(),W1={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},z1={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},K1={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},q1={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""]},$1=function(t,e,n,i,r,s){return t<e||t>n?l2(t,r,s.length>0):i.integers.reduce((function(e,n,r){while(t>=n)t-=n,e+=i.values[r];return e}),"")+s},X1=function(t,e,n,i){var r="";do{n||t--,r=i(t)+r,t/=e}while(t*e>=e);return r},Y1=function(t,e,n,i,r){var s=n-e+1;return(t<0?"-":"")+(X1(Math.abs(t),s,i,(function(t){return lK(Math.floor(t%s)+e)}))+r)},Z1=function(t,e,n){void 0===n&&(n=". ");var i=e.length;return X1(Math.abs(t),i,!1,(function(t){return e[Math.floor(t%i)]}))+n},J1=1,t2=2,e2=4,n2=8,i2=function(t,e,n,i,r,s){if(t<-9999||t>9999)return l2(t,4,r.length>0);var o=Math.abs(t),a=r;if(0===o)return e[0]+a;for(var l=0;o>0&&l<=4;l++){var c=o%10;0===c&&fJ(s,J1)&&""!==a?a=e[c]+a:c>1||1===c&&0===l||1===c&&1===l&&fJ(s,t2)||1===c&&1===l&&fJ(s,e2)&&t>100||1===c&&l>1&&fJ(s,n2)?a=e[c]+(l>0?n[l-1]:"")+a:1===c&&l>0&&(a=n[l-1]+a),o=Math.floor(o/10)}return(t<0?i:"")+a},r2="",s2="",o2="",a2="",l2=function(t,e,n){var i=n?". ":"",r=n?"":"",s=n?", ":"",o=n?" ":"";switch(e){case 0:return""+o;case 1:return""+o;case 2:return""+o;case 5:var a=Y1(t,48,57,!0,i);return a.length<4?"0"+a:a;case 4:return Z1(t,"",r);case 6:return $1(t,1,3999,W1,3,i).toLowerCase();case 7:return $1(t,1,3999,W1,3,i);case 8:return Y1(t,945,969,!1,i);case 9:return Y1(t,97,122,!1,i);case 10:return Y1(t,65,90,!1,i);case 11:return Y1(t,1632,1641,!0,i);case 12:case 49:return $1(t,1,9999,z1,3,i);case 35:return $1(t,1,9999,z1,3,i).toLowerCase();case 13:return Y1(t,2534,2543,!0,i);case 14:case 30:return Y1(t,6112,6121,!0,i);case 15:return Z1(t,"",r);case 16:return Z1(t,"",r);case 17:case 48:return i2(t,"",r2,"",r,t2|e2|n2);case 47:return i2(t,"",s2,"",r,J1|t2|e2|n2);case 42:return i2(t,"",r2,"",r,t2|e2|n2);case 41:return i2(t,"",s2,"",r,J1|t2|e2|n2);case 26:return i2(t,"","",o2,r,0);case 25:return i2(t,"","",o2,r,J1|t2|e2);case 31:return i2(t,"","",a2,s,J1|t2|e2);case 33:return i2(t,"","",a2,s,0);case 32:return i2(t,"","",a2,s,J1|t2|e2);case 18:return Y1(t,2406,2415,!0,i);case 20:return $1(t,1,19999,q1,3,i);case 21:return Y1(t,2790,2799,!0,i);case 22:return Y1(t,2662,2671,!0,i);case 22:return $1(t,1,10999,K1,3,i);case 23:return Z1(t,"");case 24:return Z1(t,"");case 27:return Y1(t,3302,3311,!0,i);case 28:return Z1(t,"",r);case 29:return Z1(t,"",r);case 34:return Y1(t,3792,3801,!0,i);case 37:return Y1(t,6160,6169,!0,i);case 38:return Y1(t,4160,4169,!0,i);case 39:return Y1(t,2918,2927,!0,i);case 40:return Y1(t,1776,1785,!0,i);case 43:return Y1(t,3046,3055,!0,i);case 44:return Y1(t,3174,3183,!0,i);case 45:return Y1(t,3664,3673,!0,i);case 46:return Y1(t,3872,3881,!0,i);case 3:default:return Y1(t,48,57,!0,i)}},c2="data-html2canvas-ignore",u2=function(){function t(t,e,n){if(this.context=t,this.options=n,this.scrolledElements=[],this.referenceElement=e,this.counters=new j1,this.quoteDepth=0,!e.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(e.ownerDocument.documentElement,!1)}return t.prototype.toIFrame=function(t,e){var n=this,i=A2(t,e);if(!i.contentWindow)return Promise.reject("Unable to find iframe window");var r=t.defaultView.pageXOffset,s=t.defaultView.pageYOffset,o=i.contentWindow,a=o.document,l=p2(i).then((function(){return eK(n,void 0,void 0,(function(){var t,n;return nK(this,(function(r){switch(r.label){case 0:return this.scrolledElements.forEach(w2),o&&(o.scrollTo(e.left,e.top),!/(iPad|iPhone|iPod)/g.test(navigator.userAgent)||o.scrollY===e.top&&o.scrollX===e.left||(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(o.scrollX-e.left,o.scrollY-e.top,0,0))),t=this.options.onclone,n=this.clonedReferenceElement,"undefined"===typeof n?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:a.fonts&&a.fonts.ready?[4,a.fonts.ready]:[3,2];case 1:r.sent(),r.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,f2(a)]:[3,4];case 3:r.sent(),r.label=4;case 4:return"function"===typeof t?[2,Promise.resolve().then((function(){return t(a,n)})).then((function(){return i}))]:[2,i]}}))}))}));return a.open(),a.write(v2(document.doctype)+"<html></html>"),y2(this.referenceElement.ownerDocument,r,s),a.replaceChild(a.adoptNode(this.documentElement),a.documentElement),a.close(),l},t.prototype.createElementClone=function(t){if(LJ(t,2),P1(t))return this.createCanvasClone(t);if(N1(t))return this.createVideoClone(t);if(D1(t))return this.createStyleClone(t);var e=t.cloneNode(!1);return O1(e)&&(O1(t)&&t.currentSrc&&t.currentSrc!==t.src&&(e.src=t.currentSrc,e.srcset=""),"lazy"===e.loading&&(e.loading="eager")),V1(e)?this.createCustomElementClone(e):e},t.prototype.createCustomElementClone=function(t){var e=document.createElement("html2canvascustomelement");return m2(t.style,e),e},t.prototype.createStyleClone=function(t){try{var e=t.sheet;if(e&&e.cssRules){var n=[].slice.call(e.cssRules,0).reduce((function(t,e){return e&&"string"===typeof e.cssText?t+e.cssText:t}),""),i=t.cloneNode(!1);return i.textContent=n,i}}catch(r){if(this.context.logger.error("Unable to access cssRules property",r),"SecurityError"!==r.name)throw r}return t.cloneNode(!1)},t.prototype.createCanvasClone=function(t){var e;if(this.options.inlineImages&&t.ownerDocument){var n=t.ownerDocument.createElement("img");try{return n.src=t.toDataURL(),n}catch(l){this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var i=t.cloneNode(!1);try{i.width=t.width,i.height=t.height;var r=t.getContext("2d"),s=i.getContext("2d");if(s)if(!this.options.allowTaint&&r)s.putImageData(r.getImageData(0,0,t.width,t.height),0,0);else{var o=null!==(e=t.getContext("webgl2"))&&void 0!==e?e:t.getContext("webgl");if(o){var a=o.getContextAttributes();!1===(null===a||void 0===a?void 0:a.preserveDrawingBuffer)&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}s.drawImage(t,0,0)}return i}catch(l){this.context.logger.info("Unable to clone canvas as it is tainted",t)}return i},t.prototype.createVideoClone=function(t){var e=t.ownerDocument.createElement("canvas");e.width=t.offsetWidth,e.height=t.offsetHeight;var n=e.getContext("2d");try{return n&&(n.drawImage(t,0,0,e.width,e.height),this.options.allowTaint||n.getImageData(0,0,e.width,e.height)),e}catch(r){this.context.logger.info("Unable to clone video as it is tainted",t)}var i=t.ownerDocument.createElement("canvas");return i.width=t.offsetWidth,i.height=t.offsetHeight,i},t.prototype.appendChildNode=function(t,e,n){C1(e)&&(U1(e)||e.hasAttribute(c2)||"function"===typeof this.options.ignoreElements&&this.options.ignoreElements(e))||this.options.copyStyles&&C1(e)&&D1(e)||t.appendChild(this.cloneNode(e,n))},t.prototype.cloneChildNodes=function(t,e,n){for(var i=this,r=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;r;r=r.nextSibling)if(C1(r)&&H1(r)&&"function"===typeof r.assignedNodes){var s=r.assignedNodes();s.length&&s.forEach((function(t){return i.appendChildNode(e,t,n)}))}else this.appendChildNode(e,r,n)},t.prototype.cloneNode=function(t,e){if(E1(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var n=t.ownerDocument.defaultView;if(n&&C1(t)&&(S1(t)||B1(t))){var i=this.createElementClone(t);i.style.transitionProperty="none";var r=n.getComputedStyle(t),s=n.getComputedStyle(t,":before"),o=n.getComputedStyle(t,":after");this.referenceElement===t&&S1(i)&&(this.clonedReferenceElement=i),M1(i)&&S2(i);var a=this.counters.parse(new BJ(this.context,r)),l=this.resolvePseudoContent(t,i,s,l0.BEFORE);V1(t)&&(e=!0),N1(t)||this.cloneChildNodes(t,i,e),l&&i.insertBefore(l,i.firstChild);var c=this.resolvePseudoContent(t,i,o,l0.AFTER);return c&&i.appendChild(c),this.counters.pop(a),(r&&(this.options.copyStyles||B1(t))&&!k1(t)||e)&&m2(r,i),0===t.scrollTop&&0===t.scrollLeft||this.scrolledElements.push([i,t.scrollLeft,t.scrollTop]),(Q1(t)||G1(t))&&(Q1(i)||G1(i))&&(i.value=t.value),i}return t.cloneNode(!1)},t.prototype.resolvePseudoContent=function(t,e,n,i){var r=this;if(n){var s=n.content,o=e.ownerDocument;if(o&&s&&"none"!==s&&"-moz-alt-content"!==s&&"none"!==n.display){this.counters.parse(new BJ(this.context,n));var a=new SJ(this.context,n),l=o.createElement("html2canvaspseudoelement");m2(n,l),a.content.forEach((function(e){if(0===e.type)l.appendChild(o.createTextNode(e.value));else if(22===e.type){var n=o.createElement("img");n.src=e.value,n.style.opacity="1",l.appendChild(n)}else if(18===e.type){if("attr"===e.name){var i=e.values.filter(DX);i.length&&l.appendChild(o.createTextNode(t.getAttribute(i[0].value)||""))}else if("counter"===e.name){var s=e.values.filter(HX),c=s[0],u=s[1];if(c&&DX(c)){var h=r.counters.getCounterValue(c.value),A=u&&DX(u)?RZ.parse(r.context,u.value):3;l.appendChild(o.createTextNode(l2(h,A,!1)))}}else if("counters"===e.name){var d=e.values.filter(HX),f=(c=d[0],d[1]);u=d[2];if(c&&DX(c)){var p=r.counters.getCounterValues(c.value),g=u&&DX(u)?RZ.parse(r.context,u.value):3,m=f&&0===f.type?f.value:"",v=p.map((function(t){return l2(t,g,!1)})).join(m);l.appendChild(o.createTextNode(v))}}}else if(20===e.type)switch(e.value){case"open-quote":l.appendChild(o.createTextNode(wJ(a.quotes,r.quoteDepth++,!0)));break;case"close-quote":l.appendChild(o.createTextNode(wJ(a.quotes,--r.quoteDepth,!1)));break;default:l.appendChild(o.createTextNode(e.value))}})),l.className=x2+" "+E2;var c=i===l0.BEFORE?" "+x2:" "+E2;return B1(e)?e.className.baseValue+=c:e.className+=c,l}}},t.destroy=function(t){return!!t.parentNode&&(t.parentNode.removeChild(t),!0)},t}();(function(t){t[t["BEFORE"]=0]="BEFORE",t[t["AFTER"]=1]="AFTER"})(l0||(l0={}));var h2,A2=function(t,e){var n=t.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=e.width.toString(),n.height=e.height.toString(),n.scrolling="no",n.setAttribute(c2,"true"),t.body.appendChild(n),n},d2=function(t){return new Promise((function(e){t.complete?e():t.src?(t.onload=e,t.onerror=e):e()}))},f2=function(t){return Promise.all([].slice.call(t.images,0).map(d2))},p2=function(t){return new Promise((function(e,n){var i=t.contentWindow;if(!i)return n("No window assigned for iframe");var r=i.document;i.onload=t.onload=function(){i.onload=t.onload=null;var n=setInterval((function(){r.body.childNodes.length>0&&"complete"===r.readyState&&(clearInterval(n),e(t))}),50)}}))},g2=["all","d","content"],m2=function(t,e){for(var n=t.length-1;n>=0;n--){var i=t.item(n);-1===g2.indexOf(i)&&e.style.setProperty(i,t.getPropertyValue(i))}return e},v2=function(t){var e="";return t&&(e+="<!DOCTYPE ",t.name&&(e+=t.name),t.internalSubset&&(e+=t.internalSubset),t.publicId&&(e+='"'+t.publicId+'"'),t.systemId&&(e+='"'+t.systemId+'"'),e+=">"),e},y2=function(t,e,n){t&&t.defaultView&&(e!==t.defaultView.pageXOffset||n!==t.defaultView.pageYOffset)&&t.defaultView.scrollTo(e,n)},w2=function(t){var e=t[0],n=t[1],i=t[2];e.scrollLeft=n,e.scrollTop=i},_2=":before",b2=":after",x2="___html2canvas___pseudoelement_before",E2="___html2canvas___pseudoelement_after",C2='{\n    content: "" !important;\n    display: none !important;\n}',S2=function(t){B2(t,"."+x2+_2+C2+"\n         ."+E2+b2+C2)},B2=function(t,e){var n=t.ownerDocument;if(n){var i=n.createElement("style");i.textContent=e,t.appendChild(i)}},T2=function(){function t(){}return t.getOrigin=function(e){var n=t._link;return n?(n.href=e,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},t.isSameOrigin=function(e){return t.getOrigin(e)===t._origin},t.setContext=function(e){t._link=e.document.createElement("a"),t._origin=t.getOrigin(e.location.href)},t._origin="about:blank",t}(),I2=function(){function t(t,e){this.context=t,this._options=e,this._cache={}}return t.prototype.addImage=function(t){var e=Promise.resolve();return this.has(t)?e:O2(t)||M2(t)?((this._cache[t]=this.loadImage(t)).catch((function(){})),e):e},t.prototype.match=function(t){return this._cache[t]},t.prototype.loadImage=function(t){return eK(this,void 0,void 0,(function(){var e,n,i,r,s=this;return nK(this,(function(o){switch(o.label){case 0:return e=T2.isSameOrigin(t),n=!P2(t)&&!0===this._options.useCORS&&G0.SUPPORT_CORS_IMAGES&&!e,i=!P2(t)&&!e&&!O2(t)&&"string"===typeof this._options.proxy&&G0.SUPPORT_CORS_XHR&&!n,e||!1!==this._options.allowTaint||P2(t)||O2(t)||i||n?(r=t,i?[4,this.proxy(r)]:[3,2]):[2];case 1:r=o.sent(),o.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise((function(t,e){var i=new Image;i.onload=function(){return t(i)},i.onerror=e,(N2(r)||n)&&(i.crossOrigin="anonymous"),i.src=r,!0===i.complete&&setTimeout((function(){return t(i)}),500),s._options.imageTimeout>0&&setTimeout((function(){return e("Timed out ("+s._options.imageTimeout+"ms) loading image")}),s._options.imageTimeout)}))];case 3:return[2,o.sent()]}}))}))},t.prototype.has=function(t){return"undefined"!==typeof this._cache[t]},t.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},t.prototype.proxy=function(t){var e=this,n=this._options.proxy;if(!n)throw new Error("No proxy defined");var i=t.substring(0,256);return new Promise((function(r,s){var o=G0.SUPPORT_RESPONSE_TYPE?"blob":"text",a=new XMLHttpRequest;a.onload=function(){if(200===a.status)if("text"===o)r(a.response);else{var t=new FileReader;t.addEventListener("load",(function(){return r(t.result)}),!1),t.addEventListener("error",(function(t){return s(t)}),!1),t.readAsDataURL(a.response)}else s("Failed to proxy resource "+i+" with status code "+a.status)},a.onerror=s;var l=n.indexOf("?")>-1?"&":"?";if(a.open("GET",""+n+l+"url="+encodeURIComponent(t)+"&responseType="+o),"text"!==o&&a instanceof XMLHttpRequest&&(a.responseType=o),e._options.imageTimeout){var c=e._options.imageTimeout;a.timeout=c,a.ontimeout=function(){return s("Timed out ("+c+"ms) proxying "+i)}}a.send()}))},t}(),F2=/^data:image\/svg\+xml/i,L2=/^data:image\/.*;base64,/i,R2=/^data:image\/.*/i,M2=function(t){return G0.SUPPORT_SVG_DRAWING||!k2(t)},P2=function(t){return R2.test(t)},N2=function(t){return L2.test(t)},O2=function(t){return"blob"===t.substr(0,4)},k2=function(t){return"svg"===t.substr(-3).toLowerCase()||F2.test(t)},D2=function(){function t(t,e){this.type=0,this.x=t,this.y=e}return t.prototype.add=function(e,n){return new t(this.x+e,this.y+n)},t}(),U2=function(t,e,n){return new D2(t.x+(e.x-t.x)*n,t.y+(e.y-t.y)*n)},Q2=function(){function t(t,e,n,i){this.type=1,this.start=t,this.startControl=e,this.endControl=n,this.end=i}return t.prototype.subdivide=function(e,n){var i=U2(this.start,this.startControl,e),r=U2(this.startControl,this.endControl,e),s=U2(this.endControl,this.end,e),o=U2(i,r,e),a=U2(r,s,e),l=U2(o,a,e);return n?new t(this.start,i,o,l):new t(l,a,s,this.end)},t.prototype.add=function(e,n){return new t(this.start.add(e,n),this.startControl.add(e,n),this.endControl.add(e,n),this.end.add(e,n))},t.prototype.reverse=function(){return new t(this.end,this.endControl,this.startControl,this.start)},t}(),G2=function(t){return 1===t.type},H2=function(){function t(t){var e=t.styles,n=t.bounds,i=YX(e.borderTopLeftRadius,n.width,n.height),r=i[0],s=i[1],o=YX(e.borderTopRightRadius,n.width,n.height),a=o[0],l=o[1],c=YX(e.borderBottomRightRadius,n.width,n.height),u=c[0],h=c[1],A=YX(e.borderBottomLeftRadius,n.width,n.height),d=A[0],f=A[1],p=[];p.push((r+a)/n.width),p.push((d+u)/n.width),p.push((s+f)/n.height),p.push((l+h)/n.height);var g=Math.max.apply(Math,p);g>1&&(r/=g,s/=g,a/=g,l/=g,u/=g,h/=g,d/=g,f/=g);var m=n.width-a,v=n.height-h,y=n.width-u,w=n.height-f,_=e.borderTopWidth,b=e.borderRightWidth,x=e.borderBottomWidth,E=e.borderLeftWidth,C=ZX(e.paddingTop,t.bounds.width),S=ZX(e.paddingRight,t.bounds.width),B=ZX(e.paddingBottom,t.bounds.width),T=ZX(e.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=r>0||s>0?V2(n.left+E/3,n.top+_/3,r-E/3,s-_/3,h2.TOP_LEFT):new D2(n.left+E/3,n.top+_/3),this.topRightBorderDoubleOuterBox=r>0||s>0?V2(n.left+m,n.top+_/3,a-b/3,l-_/3,h2.TOP_RIGHT):new D2(n.left+n.width-b/3,n.top+_/3),this.bottomRightBorderDoubleOuterBox=u>0||h>0?V2(n.left+y,n.top+v,u-b/3,h-x/3,h2.BOTTOM_RIGHT):new D2(n.left+n.width-b/3,n.top+n.height-x/3),this.bottomLeftBorderDoubleOuterBox=d>0||f>0?V2(n.left+E/3,n.top+w,d-E/3,f-x/3,h2.BOTTOM_LEFT):new D2(n.left+E/3,n.top+n.height-x/3),this.topLeftBorderDoubleInnerBox=r>0||s>0?V2(n.left+2*E/3,n.top+2*_/3,r-2*E/3,s-2*_/3,h2.TOP_LEFT):new D2(n.left+2*E/3,n.top+2*_/3),this.topRightBorderDoubleInnerBox=r>0||s>0?V2(n.left+m,n.top+2*_/3,a-2*b/3,l-2*_/3,h2.TOP_RIGHT):new D2(n.left+n.width-2*b/3,n.top+2*_/3),this.bottomRightBorderDoubleInnerBox=u>0||h>0?V2(n.left+y,n.top+v,u-2*b/3,h-2*x/3,h2.BOTTOM_RIGHT):new D2(n.left+n.width-2*b/3,n.top+n.height-2*x/3),this.bottomLeftBorderDoubleInnerBox=d>0||f>0?V2(n.left+2*E/3,n.top+w,d-2*E/3,f-2*x/3,h2.BOTTOM_LEFT):new D2(n.left+2*E/3,n.top+n.height-2*x/3),this.topLeftBorderStroke=r>0||s>0?V2(n.left+E/2,n.top+_/2,r-E/2,s-_/2,h2.TOP_LEFT):new D2(n.left+E/2,n.top+_/2),this.topRightBorderStroke=r>0||s>0?V2(n.left+m,n.top+_/2,a-b/2,l-_/2,h2.TOP_RIGHT):new D2(n.left+n.width-b/2,n.top+_/2),this.bottomRightBorderStroke=u>0||h>0?V2(n.left+y,n.top+v,u-b/2,h-x/2,h2.BOTTOM_RIGHT):new D2(n.left+n.width-b/2,n.top+n.height-x/2),this.bottomLeftBorderStroke=d>0||f>0?V2(n.left+E/2,n.top+w,d-E/2,f-x/2,h2.BOTTOM_LEFT):new D2(n.left+E/2,n.top+n.height-x/2),this.topLeftBorderBox=r>0||s>0?V2(n.left,n.top,r,s,h2.TOP_LEFT):new D2(n.left,n.top),this.topRightBorderBox=a>0||l>0?V2(n.left+m,n.top,a,l,h2.TOP_RIGHT):new D2(n.left+n.width,n.top),this.bottomRightBorderBox=u>0||h>0?V2(n.left+y,n.top+v,u,h,h2.BOTTOM_RIGHT):new D2(n.left+n.width,n.top+n.height),this.bottomLeftBorderBox=d>0||f>0?V2(n.left,n.top+w,d,f,h2.BOTTOM_LEFT):new D2(n.left,n.top+n.height),this.topLeftPaddingBox=r>0||s>0?V2(n.left+E,n.top+_,Math.max(0,r-E),Math.max(0,s-_),h2.TOP_LEFT):new D2(n.left+E,n.top+_),this.topRightPaddingBox=a>0||l>0?V2(n.left+Math.min(m,n.width-b),n.top+_,m>n.width+b?0:Math.max(0,a-b),Math.max(0,l-_),h2.TOP_RIGHT):new D2(n.left+n.width-b,n.top+_),this.bottomRightPaddingBox=u>0||h>0?V2(n.left+Math.min(y,n.width-E),n.top+Math.min(v,n.height-x),Math.max(0,u-b),Math.max(0,h-x),h2.BOTTOM_RIGHT):new D2(n.left+n.width-b,n.top+n.height-x),this.bottomLeftPaddingBox=d>0||f>0?V2(n.left+E,n.top+Math.min(w,n.height-x),Math.max(0,d-E),Math.max(0,f-x),h2.BOTTOM_LEFT):new D2(n.left+E,n.top+n.height-x),this.topLeftContentBox=r>0||s>0?V2(n.left+E+T,n.top+_+C,Math.max(0,r-(E+T)),Math.max(0,s-(_+C)),h2.TOP_LEFT):new D2(n.left+E+T,n.top+_+C),this.topRightContentBox=a>0||l>0?V2(n.left+Math.min(m,n.width+E+T),n.top+_+C,m>n.width+E+T?0:a-E+T,l-(_+C),h2.TOP_RIGHT):new D2(n.left+n.width-(b+S),n.top+_+C),this.bottomRightContentBox=u>0||h>0?V2(n.left+Math.min(y,n.width-(E+T)),n.top+Math.min(v,n.height+_+C),Math.max(0,u-(b+S)),h-(x+B),h2.BOTTOM_RIGHT):new D2(n.left+n.width-(b+S),n.top+n.height-(x+B)),this.bottomLeftContentBox=d>0||f>0?V2(n.left+E+T,n.top+w,Math.max(0,d-(E+T)),f-(x+B),h2.BOTTOM_LEFT):new D2(n.left+E+T,n.top+n.height-(x+B))}return t}();(function(t){t[t["TOP_LEFT"]=0]="TOP_LEFT",t[t["TOP_RIGHT"]=1]="TOP_RIGHT",t[t["BOTTOM_RIGHT"]=2]="BOTTOM_RIGHT",t[t["BOTTOM_LEFT"]=3]="BOTTOM_LEFT"})(h2||(h2={}));var V2=function(t,e,n,i,r){var s=(Math.sqrt(2)-1)/3*4,o=n*s,a=i*s,l=t+n,c=e+i;switch(r){case h2.TOP_LEFT:return new Q2(new D2(t,c),new D2(t,c-a),new D2(l-o,e),new D2(l,e));case h2.TOP_RIGHT:return new Q2(new D2(t,e),new D2(t+o,e),new D2(l,c-a),new D2(l,c));case h2.BOTTOM_RIGHT:return new Q2(new D2(l,e),new D2(l,e+a),new D2(t+o,c),new D2(t,c));case h2.BOTTOM_LEFT:default:return new Q2(new D2(l,c),new D2(l-o,c),new D2(t,e+a),new D2(t,e))}},j2=function(t){return[t.topLeftBorderBox,t.topRightBorderBox,t.bottomRightBorderBox,t.bottomLeftBorderBox]},W2=function(t){return[t.topLeftContentBox,t.topRightContentBox,t.bottomRightContentBox,t.bottomLeftContentBox]},z2=function(t){return[t.topLeftPaddingBox,t.topRightPaddingBox,t.bottomRightPaddingBox,t.bottomLeftPaddingBox]},K2=function(){function t(t,e,n){this.offsetX=t,this.offsetY=e,this.matrix=n,this.type=0,this.target=6}return t}(),q2=function(){function t(t,e){this.path=t,this.target=e,this.type=1}return t}(),$2=function(){function t(t){this.opacity=t,this.type=2,this.target=6}return t}(),X2=function(t){return 0===t.type},Y2=function(t){return 1===t.type},Z2=function(t){return 2===t.type},J2=function(t,e){return t.length===e.length&&t.some((function(t,n){return t===e[n]}))},t5=function(t,e,n,i,r){return t.map((function(t,s){switch(s){case 0:return t.add(e,n);case 1:return t.add(e+i,n);case 2:return t.add(e+i,n+r);case 3:return t.add(e,n+r)}return t}))},e5=function(){function t(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return t}(),n5=function(){function t(t,e){if(this.container=t,this.parent=e,this.effects=[],this.curves=new H2(this.container),this.container.styles.opacity<1&&this.effects.push(new $2(this.container.styles.opacity)),null!==this.container.styles.transform){var n=this.container.bounds.left+this.container.styles.transformOrigin[0].number,i=this.container.bounds.top+this.container.styles.transformOrigin[1].number,r=this.container.styles.transform;this.effects.push(new K2(n,i,r))}if(0!==this.container.styles.overflowX){var s=j2(this.curves),o=z2(this.curves);J2(s,o)?this.effects.push(new q2(s,6)):(this.effects.push(new q2(s,2)),this.effects.push(new q2(o,4)))}}return t.prototype.getEffects=function(t){var e=-1===[2,3].indexOf(this.container.styles.position),n=this.parent,i=this.effects.slice(0);while(n){var r=n.effects.filter((function(t){return!Y2(t)}));if(e||0!==n.container.styles.position||!n.parent){if(i.unshift.apply(i,r),e=-1===[2,3].indexOf(n.container.styles.position),0!==n.container.styles.overflowX){var s=j2(n.curves),o=z2(n.curves);J2(s,o)||i.unshift(new q2(o,6))}}else i.unshift.apply(i,r);n=n.parent}return i.filter((function(e){return fJ(e.target,t)}))},t}(),i5=function(t,e,n,i){t.container.elements.forEach((function(r){var s=fJ(r.flags,4),o=fJ(r.flags,2),a=new n5(r,t);fJ(r.styles.display,2048)&&i.push(a);var l=fJ(r.flags,8)?[]:i;if(s||o){var c=s||r.styles.isPositioned()?n:e,u=new e5(a);if(r.styles.isPositioned()||r.styles.opacity<1||r.styles.isTransformed()){var h=r.styles.zIndex.order;if(h<0){var A=0;c.negativeZIndex.some((function(t,e){return h>t.element.container.styles.zIndex.order?(A=e,!1):A>0})),c.negativeZIndex.splice(A,0,u)}else if(h>0){var d=0;c.positiveZIndex.some((function(t,e){return h>=t.element.container.styles.zIndex.order?(d=e+1,!1):d>0})),c.positiveZIndex.splice(d,0,u)}else c.zeroOrAutoZIndexOrTransformedOrOpacity.push(u)}else r.styles.isFloating()?c.nonPositionedFloats.push(u):c.nonPositionedInlineLevel.push(u);i5(a,u,s?u:n,l)}else r.styles.isInlineLevel()?e.inlineLevel.push(a):e.nonInlineLevel.push(a),i5(a,e,n,l);fJ(r.flags,8)&&r5(r,l)}))},r5=function(t,e){for(var n=t instanceof s1?t.start:1,i=t instanceof s1&&t.reversed,r=0;r<e.length;r++){var s=e[r];s.container instanceof r1&&"number"===typeof s.container.value&&0!==s.container.value&&(n=s.container.value),s.listValue=l2(n,s.container.styles.listStyleType,!0),n+=i?-1:1}},s5=function(t){var e=new n5(t,null),n=new e5(e),i=[];return i5(e,n,n,i),r5(e.container,i),n},o5=function(t,e){switch(e){case 0:return h5(t.topLeftBorderBox,t.topLeftPaddingBox,t.topRightBorderBox,t.topRightPaddingBox);case 1:return h5(t.topRightBorderBox,t.topRightPaddingBox,t.bottomRightBorderBox,t.bottomRightPaddingBox);case 2:return h5(t.bottomRightBorderBox,t.bottomRightPaddingBox,t.bottomLeftBorderBox,t.bottomLeftPaddingBox);case 3:default:return h5(t.bottomLeftBorderBox,t.bottomLeftPaddingBox,t.topLeftBorderBox,t.topLeftPaddingBox)}},a5=function(t,e){switch(e){case 0:return h5(t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox,t.topRightBorderBox,t.topRightBorderDoubleOuterBox);case 1:return h5(t.topRightBorderBox,t.topRightBorderDoubleOuterBox,t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox);case 2:return h5(t.bottomRightBorderBox,t.bottomRightBorderDoubleOuterBox,t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox);case 3:default:return h5(t.bottomLeftBorderBox,t.bottomLeftBorderDoubleOuterBox,t.topLeftBorderBox,t.topLeftBorderDoubleOuterBox)}},l5=function(t,e){switch(e){case 0:return h5(t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox,t.topRightBorderDoubleInnerBox,t.topRightPaddingBox);case 1:return h5(t.topRightBorderDoubleInnerBox,t.topRightPaddingBox,t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox);case 2:return h5(t.bottomRightBorderDoubleInnerBox,t.bottomRightPaddingBox,t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox);case 3:default:return h5(t.bottomLeftBorderDoubleInnerBox,t.bottomLeftPaddingBox,t.topLeftBorderDoubleInnerBox,t.topLeftPaddingBox)}},c5=function(t,e){switch(e){case 0:return u5(t.topLeftBorderStroke,t.topRightBorderStroke);case 1:return u5(t.topRightBorderStroke,t.bottomRightBorderStroke);case 2:return u5(t.bottomRightBorderStroke,t.bottomLeftBorderStroke);case 3:default:return u5(t.bottomLeftBorderStroke,t.topLeftBorderStroke)}},u5=function(t,e){var n=[];return G2(t)?n.push(t.subdivide(.5,!1)):n.push(t),G2(e)?n.push(e.subdivide(.5,!0)):n.push(e),n},h5=function(t,e,n,i){var r=[];return G2(t)?r.push(t.subdivide(.5,!1)):r.push(t),G2(n)?r.push(n.subdivide(.5,!0)):r.push(n),G2(i)?r.push(i.subdivide(.5,!0).reverse()):r.push(i),G2(e)?r.push(e.subdivide(.5,!1).reverse()):r.push(e),r},A5=function(t){var e=t.bounds,n=t.styles;return e.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},d5=function(t){var e=t.styles,n=t.bounds,i=ZX(e.paddingLeft,n.width),r=ZX(e.paddingRight,n.width),s=ZX(e.paddingTop,n.width),o=ZX(e.paddingBottom,n.width);return n.add(i+e.borderLeftWidth,s+e.borderTopWidth,-(e.borderRightWidth+e.borderLeftWidth+i+r),-(e.borderTopWidth+e.borderBottomWidth+s+o))},f5=function(t,e){return 0===t?e.bounds:2===t?d5(e):A5(e)},p5=function(t,e){return 0===t?e.bounds:2===t?d5(e):A5(e)},g5=function(t,e,n){var i=f5(w5(t.styles.backgroundOrigin,e),t),r=p5(w5(t.styles.backgroundClip,e),t),s=y5(w5(t.styles.backgroundSize,e),n,i),o=s[0],a=s[1],l=YX(w5(t.styles.backgroundPosition,e),i.width-o,i.height-a),c=_5(w5(t.styles.backgroundRepeat,e),l,s,i,r),u=Math.round(i.left+l[0]),h=Math.round(i.top+l[1]);return[c,u,h,o,a]},m5=function(t){return DX(t)&&t.value===jY.AUTO},v5=function(t){return"number"===typeof t},y5=function(t,e,n){var i=e[0],r=e[1],s=e[2],o=t[0],a=t[1];if(!o)return[0,0];if(zX(o)&&a&&zX(a))return[ZX(o,n.width),ZX(a,n.height)];var l=v5(s);if(DX(o)&&(o.value===jY.CONTAIN||o.value===jY.COVER)){if(v5(s)){var c=n.width/n.height;return c<s!==(o.value===jY.COVER)?[n.width,n.width/s]:[n.height*s,n.height]}return[n.width,n.height]}var u=v5(i),h=v5(r),A=u||h;if(m5(o)&&(!a||m5(a))){if(u&&h)return[i,r];if(!l&&!A)return[n.width,n.height];if(A&&l){var d=u?i:r*s,f=h?r:i/s;return[d,f]}var p=u?i:n.width,g=h?r:n.height;return[p,g]}if(l){var m=0,v=0;return zX(o)?m=ZX(o,n.width):zX(a)&&(v=ZX(a,n.height)),m5(o)?m=v*s:a&&!m5(a)||(v=m/s),[m,v]}var y=null,w=null;if(zX(o)?y=ZX(o,n.width):a&&zX(a)&&(w=ZX(a,n.height)),null===y||a&&!m5(a)||(w=u&&h?y/i*r:n.height),null!==w&&m5(o)&&(y=u&&h?w/r*i:n.width),null!==y&&null!==w)return[y,w];throw new Error("Unable to calculate background-size for element")},w5=function(t,e){var n=t[e];return"undefined"===typeof n?t[0]:n},_5=function(t,e,n,i,r){var s=e[0],o=e[1],a=n[0],l=n[1];switch(t){case 2:return[new D2(Math.round(i.left),Math.round(i.top+o)),new D2(Math.round(i.left+i.width),Math.round(i.top+o)),new D2(Math.round(i.left+i.width),Math.round(l+i.top+o)),new D2(Math.round(i.left),Math.round(l+i.top+o))];case 3:return[new D2(Math.round(i.left+s),Math.round(i.top)),new D2(Math.round(i.left+s+a),Math.round(i.top)),new D2(Math.round(i.left+s+a),Math.round(i.height+i.top)),new D2(Math.round(i.left+s),Math.round(i.height+i.top))];case 1:return[new D2(Math.round(i.left+s),Math.round(i.top+o)),new D2(Math.round(i.left+s+a),Math.round(i.top+o)),new D2(Math.round(i.left+s+a),Math.round(i.top+o+l)),new D2(Math.round(i.left+s),Math.round(i.top+o+l))];default:return[new D2(Math.round(r.left),Math.round(r.top)),new D2(Math.round(r.left+r.width),Math.round(r.top)),new D2(Math.round(r.left+r.width),Math.round(r.height+r.top)),new D2(Math.round(r.left),Math.round(r.height+r.top))]}},b5="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",x5="Hidden Text",E5=function(){function t(t){this._data={},this._document=t}return t.prototype.parseMetrics=function(t,e){var n=this._document.createElement("div"),i=this._document.createElement("img"),r=this._document.createElement("span"),s=this._document.body;n.style.visibility="hidden",n.style.fontFamily=t,n.style.fontSize=e,n.style.margin="0",n.style.padding="0",n.style.whiteSpace="nowrap",s.appendChild(n),i.src=b5,i.width=1,i.height=1,i.style.margin="0",i.style.padding="0",i.style.verticalAlign="baseline",r.style.fontFamily=t,r.style.fontSize=e,r.style.margin="0",r.style.padding="0",r.appendChild(this._document.createTextNode(x5)),n.appendChild(r),n.appendChild(i);var o=i.offsetTop-r.offsetTop+2;n.removeChild(r),n.appendChild(this._document.createTextNode(x5)),n.style.lineHeight="normal",i.style.verticalAlign="super";var a=i.offsetTop-n.offsetTop+2;return s.removeChild(n),{baseline:o,middle:a}},t.prototype.getMetrics=function(t,e){var n=t+" "+e;return"undefined"===typeof this._data[n]&&(this._data[n]=this.parseMetrics(t,e)),this._data[n]},t}(),C5=function(){function t(t,e){this.context=t,this.options=e}return t}(),S5=1e4,B5=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i._activeEffects=[],i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),n.canvas||(i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px"),i.fontMetrics=new E5(document),i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.ctx.textBaseline="bottom",i._activeEffects=[],i.context.logger.debug("Canvas renderer initialized ("+n.width+"x"+n.height+") with scale "+n.scale),i}return Jz(e,t),e.prototype.applyEffects=function(t){var e=this;while(this._activeEffects.length)this.popEffect();t.forEach((function(t){return e.applyEffect(t)}))},e.prototype.applyEffect=function(t){this.ctx.save(),Z2(t)&&(this.ctx.globalAlpha=t.opacity),X2(t)&&(this.ctx.translate(t.offsetX,t.offsetY),this.ctx.transform(t.matrix[0],t.matrix[1],t.matrix[2],t.matrix[3],t.matrix[4],t.matrix[5]),this.ctx.translate(-t.offsetX,-t.offsetY)),Y2(t)&&(this.path(t.path),this.ctx.clip()),this._activeEffects.push(t)},e.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},e.prototype.renderStack=function(t){return eK(this,void 0,void 0,(function(){var e;return nK(this,(function(n){switch(n.label){case 0:return e=t.element.container.styles,e.isVisible()?[4,this.renderStackContent(t)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}}))}))},e.prototype.renderNode=function(t){return eK(this,void 0,void 0,(function(){return nK(this,(function(e){switch(e.label){case 0:return fJ(t.container.flags,16),t.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(t)]:[3,3];case 1:return e.sent(),[4,this.renderNodeContent(t)];case 2:e.sent(),e.label=3;case 3:return[2]}}))}))},e.prototype.renderTextWithLetterSpacing=function(t,e,n){var i=this;if(0===e)this.ctx.fillText(t.text,t.bounds.left,t.bounds.top+n);else{var r=z0(t.text);r.reduce((function(e,r){return i.ctx.fillText(r,e,t.bounds.top+n),e+i.ctx.measureText(r).width}),t.bounds.left)}},e.prototype.createFontStyle=function(t){var e=t.fontVariant.filter((function(t){return"normal"===t||"small-caps"===t})).join(""),n=R5(t.fontFamily).join(", "),i=OX(t.fontSize)?""+t.fontSize.number+t.fontSize.unit:t.fontSize.number+"px";return[[t.fontStyle,e,t.fontWeight,i,n].join(" "),n,i]},e.prototype.renderTextNode=function(t,e){return eK(this,void 0,void 0,(function(){var n,i,r,s,o,a,l,c,u=this;return nK(this,(function(h){return n=this.createFontStyle(e),i=n[0],r=n[1],s=n[2],this.ctx.font=i,this.ctx.direction=1===e.direction?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",o=this.fontMetrics.getMetrics(r,s),a=o.baseline,l=o.middle,c=e.paintOrder,t.textBounds.forEach((function(t){c.forEach((function(n){switch(n){case 0:u.ctx.fillStyle=cY(e.color),u.renderTextWithLetterSpacing(t,e.letterSpacing,a);var i=e.textShadow;i.length&&t.text.trim().length&&(i.slice(0).reverse().forEach((function(n){u.ctx.shadowColor=cY(n.color),u.ctx.shadowOffsetX=n.offsetX.number*u.options.scale,u.ctx.shadowOffsetY=n.offsetY.number*u.options.scale,u.ctx.shadowBlur=n.blur.number,u.renderTextWithLetterSpacing(t,e.letterSpacing,a)})),u.ctx.shadowColor="",u.ctx.shadowOffsetX=0,u.ctx.shadowOffsetY=0,u.ctx.shadowBlur=0),e.textDecorationLine.length&&(u.ctx.fillStyle=cY(e.textDecorationColor||e.color),e.textDecorationLine.forEach((function(e){switch(e){case 1:u.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top+a),t.bounds.width,1);break;case 2:u.ctx.fillRect(t.bounds.left,Math.round(t.bounds.top),t.bounds.width,1);break;case 3:u.ctx.fillRect(t.bounds.left,Math.ceil(t.bounds.top+l),t.bounds.width,1);break}})));break;case 1:e.webkitTextStrokeWidth&&t.text.trim().length&&(u.ctx.strokeStyle=cY(e.webkitTextStrokeColor),u.ctx.lineWidth=e.webkitTextStrokeWidth,u.ctx.lineJoin=window.chrome?"miter":"round",u.ctx.strokeText(t.text,t.bounds.left,t.bounds.top+a)),u.ctx.strokeStyle="",u.ctx.lineWidth=0,u.ctx.lineJoin="miter";break}}))})),[2]}))}))},e.prototype.renderReplacedElement=function(t,e,n){if(n&&t.intrinsicWidth>0&&t.intrinsicHeight>0){var i=d5(t),r=z2(e);this.path(r),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(n,0,0,t.intrinsicWidth,t.intrinsicHeight,i.left,i.top,i.width,i.height),this.ctx.restore()}},e.prototype.renderNodeContent=function(t){return eK(this,void 0,void 0,(function(){var n,i,r,s,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w;return nK(this,(function(_){switch(_.label){case 0:this.applyEffects(t.getEffects(4)),n=t.container,i=t.curves,r=n.styles,s=0,o=n.textNodes,_.label=1;case 1:return s<o.length?(a=o[s],[4,this.renderTextNode(a,r)]):[3,4];case 2:_.sent(),_.label=3;case 3:return s++,[3,1];case 4:if(!(n instanceof e1))return[3,8];_.label=5;case 5:return _.trys.push([5,7,,8]),[4,this.context.cache.match(n.src)];case 6:return m=_.sent(),this.renderReplacedElement(n,i,m),[3,8];case 7:return _.sent(),this.context.logger.error("Error loading image "+n.src),[3,8];case 8:if(n instanceof n1&&this.renderReplacedElement(n,i,n.canvas),!(n instanceof i1))return[3,12];_.label=9;case 9:return _.trys.push([9,11,,12]),[4,this.context.cache.match(n.svg)];case 10:return m=_.sent(),this.renderReplacedElement(n,i,m),[3,12];case 11:return _.sent(),this.context.logger.error("Error loading svg "+n.svg.substring(0,255)),[3,12];case 12:return n instanceof m1&&n.tree?(l=new e(this.context,{scale:this.options.scale,backgroundColor:n.backgroundColor,x:0,y:0,width:n.width,height:n.height}),[4,l.render(n.tree)]):[3,14];case 13:c=_.sent(),n.width&&n.height&&this.ctx.drawImage(c,0,0,n.width,n.height,n.bounds.left,n.bounds.top,n.bounds.width,n.bounds.height),_.label=14;case 14:if(n instanceof f1&&(u=Math.min(n.bounds.width,n.bounds.height),n.type===u1?n.checked&&(this.ctx.save(),this.path([new D2(n.bounds.left+.39363*u,n.bounds.top+.79*u),new D2(n.bounds.left+.16*u,n.bounds.top+.5549*u),new D2(n.bounds.left+.27347*u,n.bounds.top+.44071*u),new D2(n.bounds.left+.39694*u,n.bounds.top+.5649*u),new D2(n.bounds.left+.72983*u,n.bounds.top+.23*u),new D2(n.bounds.left+.84*u,n.bounds.top+.34085*u),new D2(n.bounds.left+.39363*u,n.bounds.top+.79*u)]),this.ctx.fillStyle=cY(d1),this.ctx.fill(),this.ctx.restore()):n.type===h1&&n.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(n.bounds.left+u/2,n.bounds.top+u/2,u/4,0,2*Math.PI,!0),this.ctx.fillStyle=cY(d1),this.ctx.fill(),this.ctx.restore())),T5(n)&&n.value.length){switch(h=this.createFontStyle(r),y=h[0],A=h[1],d=this.fontMetrics.getMetrics(y,A).baseline,this.ctx.font=y,this.ctx.fillStyle=cY(r.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=F5(n.styles.textAlign),w=d5(n),f=0,n.styles.textAlign){case 1:f+=w.width/2;break;case 2:f+=w.width;break}p=w.add(f,0,0,-w.height/2+1),this.ctx.save(),this.path([new D2(w.left,w.top),new D2(w.left+w.width,w.top),new D2(w.left+w.width,w.top+w.height),new D2(w.left,w.top+w.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new H0(n.value,p),r.letterSpacing,d),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!fJ(n.styles.display,2048))return[3,20];if(null===n.styles.listStyleImage)return[3,19];if(g=n.styles.listStyleImage,0!==g.type)return[3,18];m=void 0,v=g.url,_.label=15;case 15:return _.trys.push([15,17,,18]),[4,this.context.cache.match(v)];case 16:return m=_.sent(),this.ctx.drawImage(m,n.bounds.left-(m.width+10),n.bounds.top),[3,18];case 17:return _.sent(),this.context.logger.error("Error loading list-style-image "+v),[3,18];case 18:return[3,20];case 19:t.listValue&&-1!==n.styles.listStyleType&&(y=this.createFontStyle(r)[0],this.ctx.font=y,this.ctx.fillStyle=cY(r.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",w=new rK(n.bounds.left,n.bounds.top+ZX(n.styles.paddingTop,n.bounds.width),n.bounds.width,IZ(r.lineHeight,r.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new H0(t.listValue,w),r.letterSpacing,IZ(r.lineHeight,r.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),_.label=20;case 20:return[2]}}))}))},e.prototype.renderStackContent=function(t){return eK(this,void 0,void 0,(function(){var e,n,i,r,s,o,a,l,c,u,h,A,d,f,p;return nK(this,(function(g){switch(g.label){case 0:return fJ(t.element.container.flags,16),[4,this.renderNodeBackgroundAndBorders(t.element)];case 1:g.sent(),e=0,n=t.negativeZIndex,g.label=2;case 2:return e<n.length?(p=n[e],[4,this.renderStack(p)]):[3,5];case 3:g.sent(),g.label=4;case 4:return e++,[3,2];case 5:return[4,this.renderNodeContent(t.element)];case 6:g.sent(),i=0,r=t.nonInlineLevel,g.label=7;case 7:return i<r.length?(p=r[i],[4,this.renderNode(p)]):[3,10];case 8:g.sent(),g.label=9;case 9:return i++,[3,7];case 10:s=0,o=t.nonPositionedFloats,g.label=11;case 11:return s<o.length?(p=o[s],[4,this.renderStack(p)]):[3,14];case 12:g.sent(),g.label=13;case 13:return s++,[3,11];case 14:a=0,l=t.nonPositionedInlineLevel,g.label=15;case 15:return a<l.length?(p=l[a],[4,this.renderStack(p)]):[3,18];case 16:g.sent(),g.label=17;case 17:return a++,[3,15];case 18:c=0,u=t.inlineLevel,g.label=19;case 19:return c<u.length?(p=u[c],[4,this.renderNode(p)]):[3,22];case 20:g.sent(),g.label=21;case 21:return c++,[3,19];case 22:h=0,A=t.zeroOrAutoZIndexOrTransformedOrOpacity,g.label=23;case 23:return h<A.length?(p=A[h],[4,this.renderStack(p)]):[3,26];case 24:g.sent(),g.label=25;case 25:return h++,[3,23];case 26:d=0,f=t.positiveZIndex,g.label=27;case 27:return d<f.length?(p=f[d],[4,this.renderStack(p)]):[3,30];case 28:g.sent(),g.label=29;case 29:return d++,[3,27];case 30:return[2]}}))}))},e.prototype.mask=function(t){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(t.slice(0).reverse()),this.ctx.closePath()},e.prototype.path=function(t){this.ctx.beginPath(),this.formatPath(t),this.ctx.closePath()},e.prototype.formatPath=function(t){var e=this;t.forEach((function(t,n){var i=G2(t)?t.start:t;0===n?e.ctx.moveTo(i.x,i.y):e.ctx.lineTo(i.x,i.y),G2(t)&&e.ctx.bezierCurveTo(t.startControl.x,t.startControl.y,t.endControl.x,t.endControl.y,t.end.x,t.end.y)}))},e.prototype.renderRepeat=function(t,e,n,i){this.path(t),this.ctx.fillStyle=e,this.ctx.translate(n,i),this.ctx.fill(),this.ctx.translate(-n,-i)},e.prototype.resizeImage=function(t,e,n){var i;if(t.width===e&&t.height===n)return t;var r=null!==(i=this.canvas.ownerDocument)&&void 0!==i?i:document,s=r.createElement("canvas");s.width=Math.max(1,e),s.height=Math.max(1,n);var o=s.getContext("2d");return o.drawImage(t,0,0,t.width,t.height,0,0,e,n),s},e.prototype.renderBackgroundImage=function(t){return eK(this,void 0,void 0,(function(){var e,n,i,r,s,o;return nK(this,(function(a){switch(a.label){case 0:e=t.styles.backgroundImage.length-1,n=function(n){var r,s,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w,_,b,x,E,C,S,B,T,I,F,L,R,M,P;return nK(this,(function(N){switch(N.label){case 0:if(0!==n.type)return[3,5];r=void 0,s=n.url,N.label=1;case 1:return N.trys.push([1,3,,4]),[4,i.context.cache.match(s)];case 2:return r=N.sent(),[3,4];case 3:return N.sent(),i.context.logger.error("Error loading background-image "+s),[3,4];case 4:return r&&(o=g5(t,e,[r.width,r.height,r.width/r.height]),y=o[0],C=o[1],S=o[2],b=o[3],x=o[4],m=i.ctx.createPattern(i.resizeImage(r,b,x),"repeat"),i.renderRepeat(y,m,C,S)),[3,6];case 5:QY(n)?(a=g5(t,e,[null,null,null]),y=a[0],C=a[1],S=a[2],b=a[3],x=a[4],l=xY(n.angle,b,x),c=l[0],u=l[1],h=l[2],A=l[3],d=l[4],f=document.createElement("canvas"),f.width=b,f.height=x,p=f.getContext("2d"),g=p.createLinearGradient(u,A,h,d),_Y(n.stops,c).forEach((function(t){return g.addColorStop(t.stop,cY(t.color))})),p.fillStyle=g,p.fillRect(0,0,b,x),b>0&&x>0&&(m=i.ctx.createPattern(f,"repeat"),i.renderRepeat(y,m,C,S))):GY(n)&&(v=g5(t,e,[null,null,null]),y=v[0],w=v[1],_=v[2],b=v[3],x=v[4],E=0===n.position.length?[$X]:n.position,C=ZX(E[0],b),S=ZX(E[E.length-1],x),B=SY(n,C,S,b,x),T=B[0],I=B[1],T>0&&I>0&&(F=i.ctx.createRadialGradient(w+C,_+S,0,w+C,_+S,T),_Y(n.stops,2*T).forEach((function(t){return F.addColorStop(t.stop,cY(t.color))})),i.path(y),i.ctx.fillStyle=F,T!==I?(L=t.bounds.left+.5*t.bounds.width,R=t.bounds.top+.5*t.bounds.height,M=I/T,P=1/M,i.ctx.save(),i.ctx.translate(L,R),i.ctx.transform(1,0,0,M,0,0),i.ctx.translate(-L,-R),i.ctx.fillRect(w,P*(_-R)+R,b,x*P),i.ctx.restore()):i.ctx.fill())),N.label=6;case 6:return e--,[2]}}))},i=this,r=0,s=t.styles.backgroundImage.slice(0).reverse(),a.label=1;case 1:return r<s.length?(o=s[r],[5,n(o)]):[3,4];case 2:a.sent(),a.label=3;case 3:return r++,[3,1];case 4:return[2]}}))}))},e.prototype.renderSolidBorder=function(t,e,n){return eK(this,void 0,void 0,(function(){return nK(this,(function(i){return this.path(o5(n,e)),this.ctx.fillStyle=cY(t),this.ctx.fill(),[2]}))}))},e.prototype.renderDoubleBorder=function(t,e,n,i){return eK(this,void 0,void 0,(function(){var r,s;return nK(this,(function(o){switch(o.label){case 0:return e<3?[4,this.renderSolidBorder(t,n,i)]:[3,2];case 1:return o.sent(),[2];case 2:return r=a5(i,n),this.path(r),this.ctx.fillStyle=cY(t),this.ctx.fill(),s=l5(i,n),this.path(s),this.ctx.fill(),[2]}}))}))},e.prototype.renderNodeBackgroundAndBorders=function(t){return eK(this,void 0,void 0,(function(){var e,n,i,r,s,o,a,l,c=this;return nK(this,(function(u){switch(u.label){case 0:return this.applyEffects(t.getEffects(2)),e=t.container.styles,n=!lY(e.backgroundColor)||e.backgroundImage.length,i=[{style:e.borderTopStyle,color:e.borderTopColor,width:e.borderTopWidth},{style:e.borderRightStyle,color:e.borderRightColor,width:e.borderRightWidth},{style:e.borderBottomStyle,color:e.borderBottomColor,width:e.borderBottomWidth},{style:e.borderLeftStyle,color:e.borderLeftColor,width:e.borderLeftWidth}],r=I5(w5(e.backgroundClip,0),t.curves),n||e.boxShadow.length?(this.ctx.save(),this.path(r),this.ctx.clip(),lY(e.backgroundColor)||(this.ctx.fillStyle=cY(e.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(t.container)]):[3,2];case 1:u.sent(),this.ctx.restore(),e.boxShadow.slice(0).reverse().forEach((function(e){c.ctx.save();var n=j2(t.curves),i=e.inset?0:S5,r=t5(n,-i+(e.inset?1:-1)*e.spread.number,(e.inset?1:-1)*e.spread.number,e.spread.number*(e.inset?-2:2),e.spread.number*(e.inset?-2:2));e.inset?(c.path(n),c.ctx.clip(),c.mask(r)):(c.mask(n),c.ctx.clip(),c.path(r)),c.ctx.shadowOffsetX=e.offsetX.number+i,c.ctx.shadowOffsetY=e.offsetY.number,c.ctx.shadowColor=cY(e.color),c.ctx.shadowBlur=e.blur.number,c.ctx.fillStyle=e.inset?cY(e.color):"rgba(0,0,0,1)",c.ctx.fill(),c.ctx.restore()})),u.label=2;case 2:s=0,o=0,a=i,u.label=3;case 3:return o<a.length?(l=a[o],0!==l.style&&!lY(l.color)&&l.width>0?2!==l.style?[3,5]:[4,this.renderDashedDottedBorder(l.color,l.width,s,t.curves,2)]:[3,11]):[3,13];case 4:return u.sent(),[3,11];case 5:return 3!==l.style?[3,7]:[4,this.renderDashedDottedBorder(l.color,l.width,s,t.curves,3)];case 6:return u.sent(),[3,11];case 7:return 4!==l.style?[3,9]:[4,this.renderDoubleBorder(l.color,l.width,s,t.curves)];case 8:return u.sent(),[3,11];case 9:return[4,this.renderSolidBorder(l.color,s,t.curves)];case 10:u.sent(),u.label=11;case 11:s++,u.label=12;case 12:return o++,[3,3];case 13:return[2]}}))}))},e.prototype.renderDashedDottedBorder=function(t,e,n,i,r){return eK(this,void 0,void 0,(function(){var s,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w;return nK(this,(function(_){return this.ctx.save(),s=c5(i,n),o=o5(i,n),2===r&&(this.path(o),this.ctx.clip()),G2(o[0])?(a=o[0].start.x,l=o[0].start.y):(a=o[0].x,l=o[0].y),G2(o[1])?(c=o[1].end.x,u=o[1].end.y):(c=o[1].x,u=o[1].y),h=0===n||2===n?Math.abs(a-c):Math.abs(l-u),this.ctx.beginPath(),3===r?this.formatPath(s):this.formatPath(o.slice(0,2)),A=e<3?3*e:2*e,d=e<3?2*e:e,3===r&&(A=e,d=e),f=!0,h<=2*A?f=!1:h<=2*A+d?(p=h/(2*A+d),A*=p,d*=p):(g=Math.floor((h+d)/(A+d)),m=(h-g*A)/(g-1),v=(h-(g+1)*A)/g,d=v<=0||Math.abs(d-m)<Math.abs(d-v)?m:v),f&&(3===r?this.ctx.setLineDash([0,A+d]):this.ctx.setLineDash([A,d])),3===r?(this.ctx.lineCap="round",this.ctx.lineWidth=e):this.ctx.lineWidth=2*e+1.1,this.ctx.strokeStyle=cY(t),this.ctx.stroke(),this.ctx.setLineDash([]),2===r&&(G2(o[0])&&(y=o[3],w=o[0],this.ctx.beginPath(),this.formatPath([new D2(y.end.x,y.end.y),new D2(w.start.x,w.start.y)]),this.ctx.stroke()),G2(o[1])&&(y=o[1],w=o[2],this.ctx.beginPath(),this.formatPath([new D2(y.end.x,y.end.y),new D2(w.start.x,w.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]}))}))},e.prototype.render=function(t){return eK(this,void 0,void 0,(function(){var e;return nK(this,(function(n){switch(n.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=cY(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),e=s5(t),[4,this.renderStack(e)];case 1:return n.sent(),this.applyEffects([]),[2,this.canvas]}}))}))},e}(C5),T5=function(t){return t instanceof g1||(t instanceof p1||t instanceof f1&&t.type!==h1&&t.type!==u1)},I5=function(t,e){switch(t){case 0:return j2(e);case 2:return W2(e);case 1:default:return z2(e)}},F5=function(t){switch(t){case 1:return"center";case 2:return"right";case 0:default:return"left"}},L5=["-apple-system","system-ui"],R5=function(t){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?t.filter((function(t){return-1===L5.indexOf(t)})):t},M5=function(t){function e(e,n){var i=t.call(this,e,n)||this;return i.canvas=n.canvas?n.canvas:document.createElement("canvas"),i.ctx=i.canvas.getContext("2d"),i.options=n,i.canvas.width=Math.floor(n.width*n.scale),i.canvas.height=Math.floor(n.height*n.scale),i.canvas.style.width=n.width+"px",i.canvas.style.height=n.height+"px",i.ctx.scale(i.options.scale,i.options.scale),i.ctx.translate(-n.x,-n.y),i.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+n.width+"x"+n.height+" at "+n.x+","+n.y+") with scale "+n.scale),i}return Jz(e,t),e.prototype.render=function(t){return eK(this,void 0,void 0,(function(){var e,n;return nK(this,(function(i){switch(i.label){case 0:return e=U0(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,t),[4,P5(e)];case 1:return n=i.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=cY(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(n,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}}))}))},e}(C5),P5=function(t){return new Promise((function(e,n){var i=new Image;i.onload=function(){e(i)},i.onerror=n,i.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent((new XMLSerializer).serializeToString(t))}))},N5=function(){function t(t){var e=t.id,n=t.enabled;this.id=e,this.enabled=n,this.start=Date.now()}return t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.debug?console.debug.apply(console,iK([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.getTime=function(){return Date.now()-this.start},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&"undefined"!==typeof window&&window.console&&"function"===typeof console.info&&console.info.apply(console,iK([this.id,this.getTime()+"ms"],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.warn?console.warn.apply(console,iK([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.enabled&&("undefined"!==typeof window&&window.console&&"function"===typeof console.error?console.error.apply(console,iK([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},t.instances={},t}(),O5=function(){function t(e,n){var i;this.windowBounds=n,this.instanceName="#"+t.instanceCount++,this.logger=new N5({id:this.instanceName,enabled:e.logging}),this.cache=null!==(i=e.cache)&&void 0!==i?i:new I2(this,e)}return t.instanceCount=1,t}(),k5=function(t,e){return void 0===e&&(e={}),D5(t,e)};"undefined"!==typeof window&&T2.setContext(window);var D5=function(t,e){return eK(void 0,void 0,void 0,(function(){var n,i,r,s,o,a,l,c,u,h,A,d,f,p,g,m,v,y,w,_,b,x,E,C,S,B,T,I,F,L,R,M,P,N,O,k,D,U,Q;return nK(this,(function(G){switch(G.label){case 0:if(!t||"object"!==typeof t)return[2,Promise.reject("Invalid element provided as first argument")];if(n=t.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(i=n.defaultView,!i)throw new Error("Document is not attached to a Window");return r={allowTaint:null!==(E=e.allowTaint)&&void 0!==E&&E,imageTimeout:null!==(C=e.imageTimeout)&&void 0!==C?C:15e3,proxy:e.proxy,useCORS:null!==(S=e.useCORS)&&void 0!==S&&S},s=tK({logging:null===(B=e.logging)||void 0===B||B,cache:e.cache},r),o={windowWidth:null!==(T=e.windowWidth)&&void 0!==T?T:i.innerWidth,windowHeight:null!==(I=e.windowHeight)&&void 0!==I?I:i.innerHeight,scrollX:null!==(F=e.scrollX)&&void 0!==F?F:i.pageXOffset,scrollY:null!==(L=e.scrollY)&&void 0!==L?L:i.pageYOffset},a=new rK(o.scrollX,o.scrollY,o.windowWidth,o.windowHeight),l=new O5(s,a),c=null!==(R=e.foreignObjectRendering)&&void 0!==R&&R,u={allowTaint:null!==(M=e.allowTaint)&&void 0!==M&&M,onclone:e.onclone,ignoreElements:e.ignoreElements,inlineImages:c,copyStyles:c},l.logger.debug("Starting document clone with size "+a.width+"x"+a.height+" scrolled to "+-a.left+","+-a.top),h=new u2(l,t,u),A=h.clonedReferenceElement,A?[4,h.toIFrame(n,a)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return d=G.sent(),f=M1(A)||L1(A)?oK(A.ownerDocument):sK(l,A),p=f.width,g=f.height,m=f.left,v=f.top,y=U5(l,A,e.backgroundColor),w={canvas:e.canvas,backgroundColor:y,scale:null!==(N=null!==(P=e.scale)&&void 0!==P?P:i.devicePixelRatio)&&void 0!==N?N:1,x:(null!==(O=e.x)&&void 0!==O?O:0)+m,y:(null!==(k=e.y)&&void 0!==k?k:0)+v,width:null!==(D=e.width)&&void 0!==D?D:Math.ceil(p),height:null!==(U=e.height)&&void 0!==U?U:Math.ceil(g)},c?(l.logger.debug("Document cloned, using foreign object rendering"),x=new M5(l,w),[4,x.render(A)]):[3,3];case 2:return _=G.sent(),[3,5];case 3:return l.logger.debug("Document cloned, element located at "+m+","+v+" with size "+p+"x"+g+" using computed rendering"),l.logger.debug("Starting DOM parsing"),b=_1(l,A),y===b.styles.backgroundColor&&(b.styles.backgroundColor=mY.TRANSPARENT),l.logger.debug("Starting renderer for element at "+w.x+","+w.y+" with size "+w.width+"x"+w.height),x=new B5(l,w),[4,x.render(b)];case 4:_=G.sent(),G.label=5;case 5:return(null===(Q=e.removeContainer)||void 0===Q||Q)&&(u2.destroy(d)||l.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),l.logger.debug("Finished rendering"),[2,_]}}))}))},U5=function(t,e,n){var i=e.ownerDocument,r=i.documentElement?gY(t,getComputedStyle(i.documentElement).backgroundColor):mY.TRANSPARENT,s=i.body?gY(t,getComputedStyle(i.body).backgroundColor):mY.TRANSPARENT,o="string"===typeof n?gY(t,n):null===n?mY.TRANSPARENT:4294967295;return e===i.documentElement?lY(r)?lY(s)?o:s:r:o};const Q5=Object.freeze(Object.defineProperty({__proto__:null,default:k5},Symbol.toStringTag,{value:"Module"}));/*! @license DOMPurify 2.4.5 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/2.4.5/LICENSE */function G5(t){return G5="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},G5(t)}function H5(t,e){return H5=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},H5(t,e)}function V5(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function j5(t,e,n){return j5=V5()?Reflect.construct:function(t,e,n){var i=[null];i.push.apply(i,e);var r=Function.bind.apply(t,i),s=new r;return n&&H5(s,n.prototype),s},j5.apply(null,arguments)}function W5(t){return z5(t)||K5(t)||q5(t)||X5()}function z5(t){if(Array.isArray(t))return $5(t)}function K5(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function q5(t,e){if(t){if("string"===typeof t)return $5(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?$5(t,e):void 0}}function $5(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function X5(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var Y5=Object.hasOwnProperty,Z5=Object.setPrototypeOf,J5=Object.isFrozen,t4=Object.getPrototypeOf,e4=Object.getOwnPropertyDescriptor,n4=Object.freeze,i4=Object.seal,r4=Object.create,s4="undefined"!==typeof Reflect&&Reflect,o4=s4.apply,a4=s4.construct;o4||(o4=function(t,e,n){return t.apply(e,n)}),n4||(n4=function(t){return t}),i4||(i4=function(t){return t}),a4||(a4=function(t,e){return j5(t,W5(e))});var l4=y4(Array.prototype.forEach),c4=y4(Array.prototype.pop),u4=y4(Array.prototype.push),h4=y4(String.prototype.toLowerCase),A4=y4(String.prototype.toString),d4=y4(String.prototype.match),f4=y4(String.prototype.replace),p4=y4(String.prototype.indexOf),g4=y4(String.prototype.trim),m4=y4(RegExp.prototype.test),v4=w4(TypeError);function y4(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return o4(t,e,i)}}function w4(t){return function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return a4(t,n)}}function _4(t,e,n){n=n||h4,Z5&&Z5(t,null);var i=e.length;while(i--){var r=e[i];if("string"===typeof r){var s=n(r);s!==r&&(J5(e)||(e[i]=s),r=s)}t[r]=!0}return t}function b4(t){var e,n=r4(null);for(e in t)!0===o4(Y5,t,[e])&&(n[e]=t[e]);return n}function x4(t,e){while(null!==t){var n=e4(t,e);if(n){if(n.get)return y4(n.get);if("function"===typeof n.value)return y4(n.value)}t=t4(t)}function i(t){return console.warn("fallback value for",t),null}return i}var E4=n4(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),C4=n4(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),S4=n4(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),B4=n4(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),T4=n4(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),I4=n4(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),F4=n4(["#text"]),L4=n4(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),R4=n4(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),M4=n4(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),P4=n4(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),N4=i4(/\{\{[\w\W]*|[\w\W]*\}\}/gm),O4=i4(/<%[\w\W]*|[\w\W]*%>/gm),k4=i4(/\${[\w\W]*}/gm),D4=i4(/^data-[\-\w.\u00B7-\uFFFF]/),U4=i4(/^aria-[\-\w]+$/),Q4=i4(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),G4=i4(/^(?:\w+script|data):/i),H4=i4(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),V4=i4(/^html$/i),j4=function(){return"undefined"===typeof window?null:window},W4=function(t,e){if("object"!==G5(t)||"function"!==typeof t.createPolicy)return null;var n=null,i="data-tt-policy-suffix";e.currentScript&&e.currentScript.hasAttribute(i)&&(n=e.currentScript.getAttribute(i));var r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:function(t){return t},createScriptURL:function(t){return t}})}catch(s){return console.warn("TrustedTypes policy "+r+" could not be created."),null}};function z4(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:j4(),e=function(t){return z4(t)};if(e.version="2.4.5",e.removed=[],!t||!t.document||9!==t.document.nodeType)return e.isSupported=!1,e;var n=t.document,i=t.document,r=t.DocumentFragment,s=t.HTMLTemplateElement,o=t.Node,a=t.Element,l=t.NodeFilter,c=t.NamedNodeMap,u=void 0===c?t.NamedNodeMap||t.MozNamedAttrMap:c,h=t.HTMLFormElement,A=t.DOMParser,d=t.trustedTypes,f=a.prototype,p=x4(f,"cloneNode"),g=x4(f,"nextSibling"),m=x4(f,"childNodes"),v=x4(f,"parentNode");if("function"===typeof s){var y=i.createElement("template");y.content&&y.content.ownerDocument&&(i=y.content.ownerDocument)}var w=W4(d,n),_=w?w.createHTML(""):"",b=i,x=b.implementation,E=b.createNodeIterator,C=b.createDocumentFragment,S=b.getElementsByTagName,B=n.importNode,T={};try{T=b4(i).documentMode?i.documentMode:{}}catch(Kt){}var I={};e.isSupported="function"===typeof v&&x&&"undefined"!==typeof x.createHTMLDocument&&9!==T;var F,L,R=N4,M=O4,P=k4,N=D4,O=U4,k=G4,D=H4,U=Q4,Q=null,G=_4({},[].concat(W5(E4),W5(C4),W5(S4),W5(T4),W5(F4))),H=null,V=_4({},[].concat(W5(L4),W5(R4),W5(M4),W5(P4))),j=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),W=null,z=null,K=!0,q=!0,$=!1,X=!0,Y=!1,Z=!1,J=!1,tt=!1,et=!1,nt=!1,it=!1,rt=!0,st=!1,ot="user-content-",at=!0,lt=!1,ct={},ut=null,ht=_4({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),At=null,dt=_4({},["audio","video","img","source","image","track"]),ft=null,pt=_4({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),gt="http://www.w3.org/1998/Math/MathML",mt="http://www.w3.org/2000/svg",vt="http://www.w3.org/1999/xhtml",yt=vt,wt=!1,_t=null,bt=_4({},[gt,mt,vt],A4),xt=["application/xhtml+xml","text/html"],Et="text/html",Ct=null,St=i.createElement("form"),Bt=function(t){return t instanceof RegExp||t instanceof Function},Tt=function(t){Ct&&Ct===t||(t&&"object"===G5(t)||(t={}),t=b4(t),F=F=-1===xt.indexOf(t.PARSER_MEDIA_TYPE)?Et:t.PARSER_MEDIA_TYPE,L="application/xhtml+xml"===F?A4:h4,Q="ALLOWED_TAGS"in t?_4({},t.ALLOWED_TAGS,L):G,H="ALLOWED_ATTR"in t?_4({},t.ALLOWED_ATTR,L):V,_t="ALLOWED_NAMESPACES"in t?_4({},t.ALLOWED_NAMESPACES,A4):bt,ft="ADD_URI_SAFE_ATTR"in t?_4(b4(pt),t.ADD_URI_SAFE_ATTR,L):pt,At="ADD_DATA_URI_TAGS"in t?_4(b4(dt),t.ADD_DATA_URI_TAGS,L):dt,ut="FORBID_CONTENTS"in t?_4({},t.FORBID_CONTENTS,L):ht,W="FORBID_TAGS"in t?_4({},t.FORBID_TAGS,L):{},z="FORBID_ATTR"in t?_4({},t.FORBID_ATTR,L):{},ct="USE_PROFILES"in t&&t.USE_PROFILES,K=!1!==t.ALLOW_ARIA_ATTR,q=!1!==t.ALLOW_DATA_ATTR,$=t.ALLOW_UNKNOWN_PROTOCOLS||!1,X=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,Y=t.SAFE_FOR_TEMPLATES||!1,Z=t.WHOLE_DOCUMENT||!1,et=t.RETURN_DOM||!1,nt=t.RETURN_DOM_FRAGMENT||!1,it=t.RETURN_TRUSTED_TYPE||!1,tt=t.FORCE_BODY||!1,rt=!1!==t.SANITIZE_DOM,st=t.SANITIZE_NAMED_PROPS||!1,at=!1!==t.KEEP_CONTENT,lt=t.IN_PLACE||!1,U=t.ALLOWED_URI_REGEXP||U,yt=t.NAMESPACE||vt,j=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&Bt(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(j.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&Bt(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(j.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(j.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Y&&(q=!1),nt&&(et=!0),ct&&(Q=_4({},W5(F4)),H=[],!0===ct.html&&(_4(Q,E4),_4(H,L4)),!0===ct.svg&&(_4(Q,C4),_4(H,R4),_4(H,P4)),!0===ct.svgFilters&&(_4(Q,S4),_4(H,R4),_4(H,P4)),!0===ct.mathMl&&(_4(Q,T4),_4(H,M4),_4(H,P4))),t.ADD_TAGS&&(Q===G&&(Q=b4(Q)),_4(Q,t.ADD_TAGS,L)),t.ADD_ATTR&&(H===V&&(H=b4(H)),_4(H,t.ADD_ATTR,L)),t.ADD_URI_SAFE_ATTR&&_4(ft,t.ADD_URI_SAFE_ATTR,L),t.FORBID_CONTENTS&&(ut===ht&&(ut=b4(ut)),_4(ut,t.FORBID_CONTENTS,L)),at&&(Q["#text"]=!0),Z&&_4(Q,["html","head","body"]),Q.table&&(_4(Q,["tbody"]),delete W.tbody),n4&&n4(t),Ct=t)},It=_4({},["mi","mo","mn","ms","mtext"]),Ft=_4({},["foreignobject","desc","title","annotation-xml"]),Lt=_4({},["title","style","font","a","script"]),Rt=_4({},C4);_4(Rt,S4),_4(Rt,B4);var Mt=_4({},T4);_4(Mt,I4);var Pt=function(t){var e=v(t);e&&e.tagName||(e={namespaceURI:yt,tagName:"template"});var n=h4(t.tagName),i=h4(e.tagName);return!!_t[t.namespaceURI]&&(t.namespaceURI===mt?e.namespaceURI===vt?"svg"===n:e.namespaceURI===gt?"svg"===n&&("annotation-xml"===i||It[i]):Boolean(Rt[n]):t.namespaceURI===gt?e.namespaceURI===vt?"math"===n:e.namespaceURI===mt?"math"===n&&Ft[i]:Boolean(Mt[n]):t.namespaceURI===vt?!(e.namespaceURI===mt&&!Ft[i])&&(!(e.namespaceURI===gt&&!It[i])&&(!Mt[n]&&(Lt[n]||!Rt[n]))):!("application/xhtml+xml"!==F||!_t[t.namespaceURI]))},Nt=function(t){u4(e.removed,{element:t});try{t.parentNode.removeChild(t)}catch(Kt){try{t.outerHTML=_}catch(n){t.remove()}}},Ot=function(t,n){try{u4(e.removed,{attribute:n.getAttributeNode(t),from:n})}catch(Kt){u4(e.removed,{attribute:null,from:n})}if(n.removeAttribute(t),"is"===t&&!H[t])if(et||nt)try{Nt(n)}catch(Kt){}else try{n.setAttribute(t,"")}catch(Kt){}},kt=function(t){var e,n;if(tt)t="<remove></remove>"+t;else{var r=d4(t,/^[\r\n\t ]+/);n=r&&r[0]}"application/xhtml+xml"===F&&yt===vt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");var s=w?w.createHTML(t):t;if(yt===vt)try{e=(new A).parseFromString(s,F)}catch(Kt){}if(!e||!e.documentElement){e=x.createDocument(yt,"template",null);try{e.documentElement.innerHTML=wt?_:s}catch(Kt){}}var o=e.body||e.documentElement;return t&&n&&o.insertBefore(i.createTextNode(n),o.childNodes[0]||null),yt===vt?S.call(e,Z?"html":"body")[0]:Z?e.documentElement:o},Dt=function(t){return E.call(t.ownerDocument||t,t,l.SHOW_ELEMENT|l.SHOW_COMMENT|l.SHOW_TEXT,null,!1)},Ut=function(t){return t instanceof h&&("string"!==typeof t.nodeName||"string"!==typeof t.textContent||"function"!==typeof t.removeChild||!(t.attributes instanceof u)||"function"!==typeof t.removeAttribute||"function"!==typeof t.setAttribute||"string"!==typeof t.namespaceURI||"function"!==typeof t.insertBefore||"function"!==typeof t.hasChildNodes)},Qt=function(t){return"object"===G5(o)?t instanceof o:t&&"object"===G5(t)&&"number"===typeof t.nodeType&&"string"===typeof t.nodeName},Gt=function(t,n,i){I[t]&&l4(I[t],(function(t){t.call(e,n,i,Ct)}))},Ht=function(t){var n;if(Gt("beforeSanitizeElements",t,null),Ut(t))return Nt(t),!0;if(m4(/[\u0080-\uFFFF]/,t.nodeName))return Nt(t),!0;var i=L(t.nodeName);if(Gt("uponSanitizeElement",t,{tagName:i,allowedTags:Q}),t.hasChildNodes()&&!Qt(t.firstElementChild)&&(!Qt(t.content)||!Qt(t.content.firstElementChild))&&m4(/<[/\w]/g,t.innerHTML)&&m4(/<[/\w]/g,t.textContent))return Nt(t),!0;if("select"===i&&m4(/<template/i,t.innerHTML))return Nt(t),!0;if(!Q[i]||W[i]){if(!W[i]&&jt(i)){if(j.tagNameCheck instanceof RegExp&&m4(j.tagNameCheck,i))return!1;if(j.tagNameCheck instanceof Function&&j.tagNameCheck(i))return!1}if(at&&!ut[i]){var r=v(t)||t.parentNode,s=m(t)||t.childNodes;if(s&&r)for(var o=s.length,l=o-1;l>=0;--l)r.insertBefore(p(s[l],!0),g(t))}return Nt(t),!0}return t instanceof a&&!Pt(t)?(Nt(t),!0):"noscript"!==i&&"noembed"!==i||!m4(/<\/no(script|embed)/i,t.innerHTML)?(Y&&3===t.nodeType&&(n=t.textContent,n=f4(n,R," "),n=f4(n,M," "),n=f4(n,P," "),t.textContent!==n&&(u4(e.removed,{element:t.cloneNode()}),t.textContent=n)),Gt("afterSanitizeElements",t,null),!1):(Nt(t),!0)},Vt=function(t,e,n){if(rt&&("id"===e||"name"===e)&&(n in i||n in St))return!1;if(q&&!z[e]&&m4(N,e));else if(K&&m4(O,e));else if(!H[e]||z[e]){if(!(jt(t)&&(j.tagNameCheck instanceof RegExp&&m4(j.tagNameCheck,t)||j.tagNameCheck instanceof Function&&j.tagNameCheck(t))&&(j.attributeNameCheck instanceof RegExp&&m4(j.attributeNameCheck,e)||j.attributeNameCheck instanceof Function&&j.attributeNameCheck(e))||"is"===e&&j.allowCustomizedBuiltInElements&&(j.tagNameCheck instanceof RegExp&&m4(j.tagNameCheck,n)||j.tagNameCheck instanceof Function&&j.tagNameCheck(n))))return!1}else if(ft[e]);else if(m4(U,f4(n,D,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==p4(n,"data:")||!At[t]){if($&&!m4(k,f4(n,D,"")));else if(n)return!1}else;return!0},jt=function(t){return t.indexOf("-")>0},Wt=function(t){var n,i,r,s;Gt("beforeSanitizeAttributes",t,null);var o=t.attributes;if(o){var a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:H};s=o.length;while(s--){n=o[s];var l=n,c=l.name,u=l.namespaceURI;if(i="value"===c?n.value:g4(n.value),r=L(c),a.attrName=r,a.attrValue=i,a.keepAttr=!0,a.forceKeepAttr=void 0,Gt("uponSanitizeAttribute",t,a),i=a.attrValue,!a.forceKeepAttr&&(Ot(c,t),a.keepAttr))if(X||!m4(/\/>/i,i)){Y&&(i=f4(i,R," "),i=f4(i,M," "),i=f4(i,P," "));var h=L(t.nodeName);if(Vt(h,r,i)){if(!st||"id"!==r&&"name"!==r||(Ot(c,t),i=ot+i),w&&"object"===G5(d)&&"function"===typeof d.getAttributeType)if(u);else switch(d.getAttributeType(h,r)){case"TrustedHTML":i=w.createHTML(i);break;case"TrustedScriptURL":i=w.createScriptURL(i);break}try{u?t.setAttributeNS(u,c,i):t.setAttribute(c,i),c4(e.removed)}catch(Kt){}}}else Ot(c,t)}Gt("afterSanitizeAttributes",t,null)}},zt=function t(e){var n,i=Dt(e);Gt("beforeSanitizeShadowDOM",e,null);while(n=i.nextNode())Gt("uponSanitizeShadowNode",n,null),Ht(n)||(n.content instanceof r&&t(n.content),Wt(n));Gt("afterSanitizeShadowDOM",e,null)};return e.sanitize=function(i){var s,a,l,c,u,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(wt=!i,wt&&(i="\x3c!--\x3e"),"string"!==typeof i&&!Qt(i)){if("function"!==typeof i.toString)throw v4("toString is not a function");if(i=i.toString(),"string"!==typeof i)throw v4("dirty is not a string, aborting")}if(!e.isSupported){if("object"===G5(t.toStaticHTML)||"function"===typeof t.toStaticHTML){if("string"===typeof i)return t.toStaticHTML(i);if(Qt(i))return t.toStaticHTML(i.outerHTML)}return i}if(J||Tt(h),e.removed=[],"string"===typeof i&&(lt=!1),lt){if(i.nodeName){var A=L(i.nodeName);if(!Q[A]||W[A])throw v4("root node is forbidden and cannot be sanitized in-place")}}else if(i instanceof o)s=kt("\x3c!----\x3e"),a=s.ownerDocument.importNode(i,!0),1===a.nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?s=a:s.appendChild(a);else{if(!et&&!Y&&!Z&&-1===i.indexOf("<"))return w&&it?w.createHTML(i):i;if(s=kt(i),!s)return et?null:it?_:""}s&&tt&&Nt(s.firstChild);var d=Dt(lt?i:s);while(l=d.nextNode())3===l.nodeType&&l===c||Ht(l)||(l.content instanceof r&&zt(l.content),Wt(l),c=l);if(c=null,lt)return i;if(et){if(nt){u=C.call(s.ownerDocument);while(s.firstChild)u.appendChild(s.firstChild)}else u=s;return(H.shadowroot||H.shadowrootmod)&&(u=B.call(n,u,!0)),u}var f=Z?s.outerHTML:s.innerHTML;return Z&&Q["!doctype"]&&s.ownerDocument&&s.ownerDocument.doctype&&s.ownerDocument.doctype.name&&m4(V4,s.ownerDocument.doctype.name)&&(f="<!DOCTYPE "+s.ownerDocument.doctype.name+">\n"+f),Y&&(f=f4(f,R," "),f=f4(f,M," "),f=f4(f,P," ")),w&&it?w.createHTML(f):f},e.setConfig=function(t){Tt(t),J=!0},e.clearConfig=function(){Ct=null,J=!1},e.isValidAttribute=function(t,e,n){Ct||Tt({});var i=L(t),r=L(e);return Vt(i,r,n)},e.addHook=function(t,e){"function"===typeof e&&(I[t]=I[t]||[],u4(I[t],e))},e.removeHook=function(t){if(I[t])return c4(I[t])},e.removeHooks=function(t){I[t]&&(I[t]=[])},e.removeAllHooks=function(){I={}},e}var K4=z4();const q4=Object.freeze(Object.defineProperty({__proto__:null,default:K4},Symbol.toStringTag,{value:"Module"}));var $4=function(t){return t&&t.Math==Math&&t},X4=$4("object"==typeof globalThis&&globalThis)||$4("object"==typeof window&&window)||$4("object"==typeof self&&self)||$4("object"==typeof DH&&DH)||function(){return this}()||Function("return this")(),Y4={},Z4=function(t){try{return!!t()}catch(e){return!0}},J4=Z4,t3=!J4((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),e3=Z4,n3=!e3((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),i3=n3,r3=Function.prototype.call,s3=i3?r3.bind(r3):function(){return r3.apply(r3,arguments)},o3={},a3={}.propertyIsEnumerable,l3=Object.getOwnPropertyDescriptor,c3=l3&&!a3.call({1:2},1);o3.f=c3?function(t){var e=l3(this,t);return!!e&&e.enumerable}:a3;var u3,h3,A3=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},d3=n3,f3=Function.prototype,p3=f3.call,g3=d3&&f3.bind.bind(p3,p3),m3=d3?g3:function(t){return function(){return p3.apply(t,arguments)}},v3=m3,y3=v3({}.toString),w3=v3("".slice),_3=function(t){return w3(y3(t),8,-1)},b3=m3,x3=Z4,E3=_3,C3=Object,S3=b3("".split),B3=x3((function(){return!C3("z").propertyIsEnumerable(0)}))?function(t){return"String"==E3(t)?S3(t,""):C3(t)}:C3,T3=function(t){return null===t||void 0===t},I3=T3,F3=TypeError,L3=function(t){if(I3(t))throw F3("Can't call method on "+t);return t},R3=B3,M3=L3,P3=function(t){return R3(M3(t))},N3="object"==typeof document&&document.all,O3="undefined"==typeof N3&&void 0!==N3,k3={all:N3,IS_HTMLDDA:O3},D3=k3,U3=D3.all,Q3=D3.IS_HTMLDDA?function(t){return"function"==typeof t||t===U3}:function(t){return"function"==typeof t},G3=Q3,H3=k3,V3=H3.all,j3=H3.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:G3(t)||t===V3}:function(t){return"object"==typeof t?null!==t:G3(t)},W3=X4,z3=Q3,K3=function(t){return z3(t)?t:void 0},q3=function(t,e){return arguments.length<2?K3(W3[t]):W3[t]&&W3[t][e]},$3=m3,X3=$3({}.isPrototypeOf),Y3="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Z3=X4,J3=Y3,t6=Z3.process,e6=Z3.Deno,n6=t6&&t6.versions||e6&&e6.version,i6=n6&&n6.v8;i6&&(u3=i6.split("."),h3=u3[0]>0&&u3[0]<4?1:+(u3[0]+u3[1])),!h3&&J3&&(u3=J3.match(/Edge\/(\d+)/),(!u3||u3[1]>=74)&&(u3=J3.match(/Chrome\/(\d+)/),u3&&(h3=+u3[1])));var r6=h3,s6=r6,o6=Z4,a6=!!Object.getOwnPropertySymbols&&!o6((function(){var t=Symbol();return!String(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&s6&&s6<41})),l6=a6,c6=l6&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,u6=q3,h6=Q3,A6=X3,d6=c6,f6=Object,p6=d6?function(t){return"symbol"==typeof t}:function(t){var e=u6("Symbol");return h6(e)&&A6(e.prototype,f6(t))},g6=String,m6=function(t){try{return g6(t)}catch(e){return"Object"}},v6=Q3,y6=m6,w6=TypeError,_6=function(t){if(v6(t))return t;throw w6(y6(t)+" is not a function")},b6=_6,x6=T3,E6=function(t,e){var n=t[e];return x6(n)?void 0:b6(n)},C6=s3,S6=Q3,B6=j3,T6=TypeError,I6=function(t,e){var n,i;if("string"===e&&S6(n=t.toString)&&!B6(i=C6(n,t)))return i;if(S6(n=t.valueOf)&&!B6(i=C6(n,t)))return i;if("string"!==e&&S6(n=t.toString)&&!B6(i=C6(n,t)))return i;throw T6("Can't convert object to primitive value")},F6={exports:{}},L6=X4,R6=Object.defineProperty,M6=function(t,e){try{R6(L6,t,{value:e,configurable:!0,writable:!0})}catch(n){L6[t]=e}return e},P6=X4,N6=M6,O6="__core-js_shared__",k6=P6[O6]||N6(O6,{}),D6=k6,U6=D6;(F6.exports=function(t,e){return U6[t]||(U6[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.30.1",mode:"global",copyright:" 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.30.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Q6=F6.exports,G6=L3,H6=Object,V6=function(t){return H6(G6(t))},j6=m3,W6=V6,z6=j6({}.hasOwnProperty),K6=Object.hasOwn||function(t,e){return z6(W6(t),e)},q6=m3,$6=0,X6=Math.random(),Y6=q6(1..toString),Z6=function(t){return"Symbol("+(void 0===t?"":t)+")_"+Y6(++$6+X6,36)},J6=X4,t8=Q6,e8=K6,n8=Z6,i8=a6,r8=c6,s8=J6.Symbol,o8=t8("wks"),a8=r8?s8["for"]||s8:s8&&s8.withoutSetter||n8,l8=function(t){return e8(o8,t)||(o8[t]=i8&&e8(s8,t)?s8[t]:a8("Symbol."+t)),o8[t]},c8=s3,u8=j3,h8=p6,A8=E6,d8=I6,f8=l8,p8=TypeError,g8=f8("toPrimitive"),m8=function(t,e){if(!u8(t)||h8(t))return t;var n,i=A8(t,g8);if(i){if(void 0===e&&(e="default"),n=c8(i,t,e),!u8(n)||h8(n))return n;throw p8("Can't convert object to primitive value")}return void 0===e&&(e="number"),d8(t,e)},v8=m8,y8=p6,w8=function(t){var e=v8(t,"string");return y8(e)?e:e+""},_8=X4,b8=j3,x8=_8.document,E8=b8(x8)&&b8(x8.createElement),C8=function(t){return E8?x8.createElement(t):{}},S8=t3,B8=Z4,T8=C8,I8=!S8&&!B8((function(){return 7!=Object.defineProperty(T8("div"),"a",{get:function(){return 7}}).a})),F8=t3,L8=s3,R8=o3,M8=A3,P8=P3,N8=w8,O8=K6,k8=I8,D8=Object.getOwnPropertyDescriptor;Y4.f=F8?D8:function(t,e){if(t=P8(t),e=N8(e),k8)try{return D8(t,e)}catch(n){}if(O8(t,e))return M8(!L8(R8.f,t,e),t[e])};var U8={},Q8=t3,G8=Z4,H8=Q8&&G8((function(){return 42!=Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),V8=j3,j8=String,W8=TypeError,z8=function(t){if(V8(t))return t;throw W8(j8(t)+" is not an object")},K8=t3,q8=I8,$8=H8,X8=z8,Y8=w8,Z8=TypeError,J8=Object.defineProperty,t7=Object.getOwnPropertyDescriptor,e7="enumerable",n7="configurable",i7="writable";U8.f=K8?$8?function(t,e,n){if(X8(t),e=Y8(e),X8(n),"function"===typeof t&&"prototype"===e&&"value"in n&&i7 in n&&!n[i7]){var i=t7(t,e);i&&i[i7]&&(t[e]=n.value,n={configurable:n7 in n?n[n7]:i[n7],enumerable:e7 in n?n[e7]:i[e7],writable:!1})}return J8(t,e,n)}:J8:function(t,e,n){if(X8(t),e=Y8(e),X8(n),q8)try{return J8(t,e,n)}catch(i){}if("get"in n||"set"in n)throw Z8("Accessors not supported");return"value"in n&&(t[e]=n.value),t};var r7=t3,s7=U8,o7=A3,a7=r7?function(t,e,n){return s7.f(t,e,o7(1,n))}:function(t,e,n){return t[e]=n,t},l7={exports:{}},c7=t3,u7=K6,h7=Function.prototype,A7=c7&&Object.getOwnPropertyDescriptor,d7=u7(h7,"name"),f7=d7&&"something"===function(){}.name,p7=d7&&(!c7||c7&&A7(h7,"name").configurable),g7={EXISTS:d7,PROPER:f7,CONFIGURABLE:p7},m7=m3,v7=Q3,y7=D6,w7=m7(Function.toString);v7(y7.inspectSource)||(y7.inspectSource=function(t){return w7(t)});var _7,b7,x7,E7=y7.inspectSource,C7=X4,S7=Q3,B7=C7.WeakMap,T7=S7(B7)&&/native code/.test(String(B7)),I7=Q6,F7=Z6,L7=I7("keys"),R7=function(t){return L7[t]||(L7[t]=F7(t))},M7={},P7=T7,N7=X4,O7=j3,k7=a7,D7=K6,U7=D6,Q7=R7,G7=M7,H7="Object already initialized",V7=N7.TypeError,j7=N7.WeakMap,W7=function(t){return x7(t)?b7(t):_7(t,{})},z7=function(t){return function(e){var n;if(!O7(e)||(n=b7(e)).type!==t)throw V7("Incompatible receiver, "+t+" required");return n}};if(P7||U7.state){var K7=U7.state||(U7.state=new j7);K7.get=K7.get,K7.has=K7.has,K7.set=K7.set,_7=function(t,e){if(K7.has(t))throw V7(H7);return e.facade=t,K7.set(t,e),e},b7=function(t){return K7.get(t)||{}},x7=function(t){return K7.has(t)}}else{var q7=Q7("state");G7[q7]=!0,_7=function(t,e){if(D7(t,q7))throw V7(H7);return e.facade=t,k7(t,q7,e),e},b7=function(t){return D7(t,q7)?t[q7]:{}},x7=function(t){return D7(t,q7)}}var $7={set:_7,get:b7,has:x7,enforce:W7,getterFor:z7},X7=m3,Y7=Z4,Z7=Q3,J7=K6,t9=t3,e9=g7.CONFIGURABLE,n9=E7,i9=$7,r9=i9.enforce,s9=i9.get,o9=String,a9=Object.defineProperty,l9=X7("".slice),c9=X7("".replace),u9=X7([].join),h9=t9&&!Y7((function(){return 8!==a9((function(){}),"length",{value:8}).length})),A9=String(String).split("String"),d9=l7.exports=function(t,e,n){"Symbol("===l9(o9(e),0,7)&&(e="["+c9(o9(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),n&&n.getter&&(e="get "+e),n&&n.setter&&(e="set "+e),(!J7(t,"name")||e9&&t.name!==e)&&(t9?a9(t,"name",{value:e,configurable:!0}):t.name=e),h9&&n&&J7(n,"arity")&&t.length!==n.arity&&a9(t,"length",{value:n.arity});try{n&&J7(n,"constructor")&&n.constructor?t9&&a9(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(r){}var i=r9(t);return J7(i,"source")||(i.source=u9(A9,"string"==typeof e?e:"")),t};Function.prototype.toString=d9((function(){return Z7(this)&&s9(this).source||n9(this)}),"toString");var f9=l7.exports,p9=Q3,g9=U8,m9=f9,v9=M6,y9=function(t,e,n,i){i||(i={});var r=i.enumerable,s=void 0!==i.name?i.name:e;if(p9(n)&&m9(n,s,i),i.global)r?t[e]=n:v9(e,n);else{try{i.unsafe?t[e]&&(r=!0):delete t[e]}catch(o){}r?t[e]=n:g9.f(t,e,{value:n,enumerable:!1,configurable:!i.nonConfigurable,writable:!i.nonWritable})}return t},w9={},_9=Math.ceil,b9=Math.floor,x9=Math.trunc||function(t){var e=+t;return(e>0?b9:_9)(e)},E9=x9,C9=function(t){var e=+t;return e!==e||0===e?0:E9(e)},S9=C9,B9=Math.max,T9=Math.min,I9=function(t,e){var n=S9(t);return n<0?B9(n+e,0):T9(n,e)},F9=C9,L9=Math.min,R9=function(t){return t>0?L9(F9(t),9007199254740991):0},M9=R9,P9=function(t){return M9(t.length)},N9=P3,O9=I9,k9=P9,D9=function(t){return function(e,n,i){var r,s=N9(e),o=k9(s),a=O9(i,o);if(t&&n!=n){while(o>a)if(r=s[a++],r!=r)return!0}else for(;o>a;a++)if((t||a in s)&&s[a]===n)return t||a||0;return!t&&-1}},U9={includes:D9(!0),indexOf:D9(!1)},Q9=m3,G9=K6,H9=P3,V9=U9.indexOf,j9=M7,W9=Q9([].push),z9=function(t,e){var n,i=H9(t),r=0,s=[];for(n in i)!G9(j9,n)&&G9(i,n)&&W9(s,n);while(e.length>r)G9(i,n=e[r++])&&(~V9(s,n)||W9(s,n));return s},K9=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],q9=z9,$9=K9,X9=$9.concat("length","prototype");w9.f=Object.getOwnPropertyNames||function(t){return q9(t,X9)};var Y9={};Y9.f=Object.getOwnPropertySymbols;var Z9=q3,J9=m3,ttt=w9,ett=Y9,ntt=z8,itt=J9([].concat),rtt=Z9("Reflect","ownKeys")||function(t){var e=ttt.f(ntt(t)),n=ett.f;return n?itt(e,n(t)):e},stt=K6,ott=rtt,att=Y4,ltt=U8,ctt=function(t,e,n){for(var i=ott(e),r=ltt.f,s=att.f,o=0;o<i.length;o++){var a=i[o];stt(t,a)||n&&stt(n,a)||r(t,a,s(e,a))}},utt=Z4,htt=Q3,Att=/#|\.prototype\./,dtt=function(t,e){var n=ptt[ftt(t)];return n==mtt||n!=gtt&&(htt(e)?utt(e):!!e)},ftt=dtt.normalize=function(t){return String(t).replace(Att,".").toLowerCase()},ptt=dtt.data={},gtt=dtt.NATIVE="N",mtt=dtt.POLYFILL="P",vtt=dtt,ytt=X4,wtt=Y4.f,_tt=a7,btt=y9,xtt=M6,Ett=ctt,Ctt=vtt,Stt=function(t,e){var n,i,r,s,o,a,l=t.target,c=t.global,u=t.stat;if(i=c?ytt:u?ytt[l]||xtt(l,{}):(ytt[l]||{}).prototype,i)for(r in e){if(o=e[r],t.dontCallGetSet?(a=wtt(i,r),s=a&&a.value):s=i[r],n=Ctt(c?r:l+(u?".":"#")+r,t.forced),!n&&void 0!==s){if(typeof o==typeof s)continue;Ett(o,s)}(t.sham||s&&s.sham)&&_tt(o,"sham",!0),btt(i,r,o,t)}},Btt=_3,Ttt="undefined"!=typeof process&&"process"==Btt(process),Itt=m3,Ftt=_6,Ltt=function(t,e,n){try{return Itt(Ftt(Object.getOwnPropertyDescriptor(t,e)[n]))}catch(i){}},Rtt=Q3,Mtt=String,Ptt=TypeError,Ntt=function(t){if("object"==typeof t||Rtt(t))return t;throw Ptt("Can't set "+Mtt(t)+" as a prototype")},Ott=Ltt,ktt=z8,Dtt=Ntt,Utt=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{t=Ott(Object.prototype,"__proto__","set"),t(n,[]),e=n instanceof Array}catch(i){}return function(n,i){return ktt(n),Dtt(i),e?t(n,i):n.__proto__=i,n}}():void 0),Qtt=U8.f,Gtt=K6,Htt=l8,Vtt=Htt("toStringTag"),jtt=function(t,e,n){t&&!n&&(t=t.prototype),t&&!Gtt(t,Vtt)&&Qtt(t,Vtt,{configurable:!0,value:e})},Wtt=f9,ztt=U8,Ktt=function(t,e,n){return n.get&&Wtt(n.get,e,{getter:!0}),n.set&&Wtt(n.set,e,{setter:!0}),ztt.f(t,e,n)},qtt=q3,$tt=Ktt,Xtt=l8,Ytt=t3,Ztt=Xtt("species"),Jtt=function(t){var e=qtt(t);Ytt&&e&&!e[Ztt]&&$tt(e,Ztt,{configurable:!0,get:function(){return this}})},tet=X3,eet=TypeError,net=function(t,e){if(tet(e,t))return t;throw eet("Incorrect invocation")},iet=l8,ret=iet("toStringTag"),set={};set[ret]="z";var oet="[object z]"===String(set),aet=oet,cet=Q3,uet=_3,het=l8,Aet=het("toStringTag"),det=Object,fet="Arguments"==uet(function(){return arguments}()),pet=function(t,e){try{return t[e]}catch(n){}},get=aet?uet:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=pet(e=det(t),Aet))?n:fet?uet(e):"Object"==(i=uet(e))&&cet(e.callee)?"Arguments":i},met=m3,vet=Z4,yet=Q3,wet=get,_et=q3,bet=E7,xet=function(){},Eet=[],Cet=_et("Reflect","construct"),Bet=/^\s*(?:class|function)\b/,Tet=met(Bet.exec),Iet=!Bet.exec(xet),Fet=function(t){if(!yet(t))return!1;try{return Cet(xet,Eet,t),!0}catch(e){return!1}},Let=function(t){if(!yet(t))return!1;switch(wet(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return Iet||!!Tet(Bet,bet(t))}catch(e){return!0}};Let.sham=!0;var Ret,Met,Pet,Net,Oet=!Cet||vet((function(){var t;return Fet(Fet.call)||!Fet(Object)||!Fet((function(){t=!0}))||t}))?Let:Fet,ket=Oet,Det=m6,Uet=TypeError,Qet=function(t){if(ket(t))return t;throw Uet(Det(t)+" is not a constructor")},Get=z8,Het=Qet,Vet=T3,jet=l8,Wet=jet("species"),zet=function(t,e){var n,i=Get(t).constructor;return void 0===i||Vet(n=Get(i)[Wet])?e:Het(n)},Ket=n3,qet=Function.prototype,$et=qet.apply,Xet=qet.call,Yet="object"==typeof Reflect&&Reflect.apply||(Ket?Xet.bind($et):function(){return Xet.apply($et,arguments)}),Zet=_3,Jet=m3,tnt=function(t){if("Function"===Zet(t))return Jet(t)},ent=tnt,nnt=_6,int=n3,rnt=ent(ent.bind),snt=function(t,e){return nnt(t),void 0===e?t:int?rnt(t,e):function(){return t.apply(e,arguments)}},ont=q3,ant=ont("document","documentElement"),lnt=m3,cnt=lnt([].slice),unt=TypeError,hnt=function(t,e){if(t<e)throw unt("Not enough arguments");return t},Ant=Y3,dnt=/(?:ipad|iphone|ipod).*applewebkit/i.test(Ant),fnt=X4,pnt=Yet,gnt=snt,mnt=Q3,vnt=K6,ynt=Z4,wnt=ant,_nt=cnt,bnt=C8,xnt=hnt,Ent=dnt,Cnt=Ttt,Snt=fnt.setImmediate,Bnt=fnt.clearImmediate,Tnt=fnt.process,Int=fnt.Dispatch,Fnt=fnt.Function,Lnt=fnt.MessageChannel,Rnt=fnt.String,Mnt=0,Pnt={},Nnt="onreadystatechange";ynt((function(){Ret=fnt.location}));var Ont=function(t){if(vnt(Pnt,t)){var e=Pnt[t];delete Pnt[t],e()}},knt=function(t){return function(){Ont(t)}},Dnt=function(t){Ont(t.data)},Unt=function(t){fnt.postMessage(Rnt(t),Ret.protocol+"//"+Ret.host)};Snt&&Bnt||(Snt=function(t){xnt(arguments.length,1);var e=mnt(t)?t:Fnt(t),n=_nt(arguments,1);return Pnt[++Mnt]=function(){pnt(e,void 0,n)},Met(Mnt),Mnt},Bnt=function(t){delete Pnt[t]},Cnt?Met=function(t){Tnt.nextTick(knt(t))}:Int&&Int.now?Met=function(t){Int.now(knt(t))}:Lnt&&!Ent?(Pet=new Lnt,Net=Pet.port2,Pet.port1.onmessage=Dnt,Met=gnt(Net.postMessage,Net)):fnt.addEventListener&&mnt(fnt.postMessage)&&!fnt.importScripts&&Ret&&"file:"!==Ret.protocol&&!ynt(Unt)?(Met=Unt,fnt.addEventListener("message",Dnt,!1)):Met=Nnt in bnt("script")?function(t){wnt.appendChild(bnt("script"))[Nnt]=function(){wnt.removeChild(this),Ont(t)}}:function(t){setTimeout(knt(t),0)});var Qnt={set:Snt,clear:Bnt},Gnt=function(){this.head=null,this.tail=null};Gnt.prototype={add:function(t){var e={item:t,next:null},n=this.tail;n?n.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t){var e=this.head=t.next;return null===e&&(this.tail=null),t.item}}};var Hnt,Vnt,jnt,Wnt,znt,Knt=Gnt,qnt=Y3,$nt=/ipad|iphone|ipod/i.test(qnt)&&"undefined"!=typeof Pebble,Xnt=Y3,Ynt=/web0s(?!.*chrome)/i.test(Xnt),Znt=X4,Jnt=snt,tit=Y4.f,eit=Qnt.set,nit=Knt,iit=dnt,rit=$nt,sit=Ynt,oit=Ttt,ait=Znt.MutationObserver||Znt.WebKitMutationObserver,lit=Znt.document,cit=Znt.process,uit=Znt.Promise,hit=tit(Znt,"queueMicrotask"),Ait=hit&&hit.value;if(!Ait){var dit=new nit,fit=function(){var t,e;oit&&(t=cit.domain)&&t.exit();while(e=dit.get())try{e()}catch(n){throw dit.head&&Hnt(),n}t&&t.enter()};iit||oit||sit||!ait||!lit?!rit&&uit&&uit.resolve?(Wnt=uit.resolve(void 0),Wnt.constructor=uit,znt=Jnt(Wnt.then,Wnt),Hnt=function(){znt(fit)}):oit?Hnt=function(){cit.nextTick(fit)}:(eit=Jnt(eit,Znt),Hnt=function(){eit(fit)}):(Vnt=!0,jnt=lit.createTextNode(""),new ait(fit).observe(jnt,{characterData:!0}),Hnt=function(){jnt.data=Vnt=!Vnt}),Ait=function(t){dit.head||Hnt(),dit.add(t)}}var pit=Ait,git=function(t,e){try{1==arguments.length?console.error(t):console.error(t,e)}catch(n){}},mit=function(t){try{return{error:!1,value:t()}}catch(e){return{error:!0,value:e}}},vit=X4,yit=vit.Promise,wit="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,_it=wit,bit=Ttt,xit=!_it&&!bit&&"object"==typeof window&&"object"==typeof document,Eit=X4,Cit=yit,Sit=Q3,Bit=vtt,Tit=E7,Iit=l8,Fit=xit,Lit=wit,Rit=r6;Cit&&Cit.prototype;var Mit=Iit("species"),Pit=!1,Nit=Sit(Eit.PromiseRejectionEvent),Oit=Bit("Promise",(function(){var t=Tit(Cit),e=t!==String(Cit);if(!e&&66===Rit)return!0;if(!Rit||Rit<51||!/native code/.test(t)){var n=new Cit((function(t){t(1)})),i=function(t){t((function(){}),(function(){}))},r=n.constructor={};if(r[Mit]=i,Pit=n.then((function(){}))instanceof i,!Pit)return!0}return!e&&(Fit||Lit)&&!Nit})),kit={CONSTRUCTOR:Oit,REJECTION_EVENT:Nit,SUBCLASSING:Pit},Dit={},Uit=_6,Qit=TypeError,Git=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw Qit("Bad Promise constructor");e=t,n=i})),this.resolve=Uit(e),this.reject=Uit(n)};Dit.f=function(t){return new Git(t)};var Hit,Vit,jit,Wit,zit=Stt,Kit=Ttt,qit=X4,$it=s3,Xit=y9,Yit=Utt,Zit=jtt,Jit=Jtt,trt=_6,ert=Q3,nrt=j3,irt=net,rrt=zet,srt=Qnt.set,ort=pit,art=git,lrt=mit,crt=Knt,urt=$7,hrt=yit,Art=kit,drt=Dit,frt="Promise",prt=Art.CONSTRUCTOR,grt=Art.REJECTION_EVENT,mrt=Art.SUBCLASSING,vrt=urt.getterFor(frt),yrt=urt.set,wrt=hrt&&hrt.prototype,_rt=hrt,brt=wrt,xrt=qit.TypeError,Ert=qit.document,Crt=qit.process,Srt=drt.f,Brt=Srt,Trt=!!(Ert&&Ert.createEvent&&qit.dispatchEvent),Irt="unhandledrejection",Frt="rejectionhandled",Lrt=0,Rrt=1,Mrt=2,Prt=1,Nrt=2,Ort=function(t){var e;return!(!nrt(t)||!ert(e=t.then))&&e},krt=function(t,e){var n,i,r,s=e.value,o=e.state==Rrt,a=o?t.ok:t.fail,l=t.resolve,c=t.reject,u=t.domain;try{a?(o||(e.rejection===Nrt&&Hrt(e),e.rejection=Prt),!0===a?n=s:(u&&u.enter(),n=a(s),u&&(u.exit(),r=!0)),n===t.promise?c(xrt("Promise-chain cycle")):(i=Ort(n))?$it(i,n,l,c):l(n)):c(s)}catch(h){u&&!r&&u.exit(),c(h)}},Drt=function(t,e){t.notified||(t.notified=!0,ort((function(){var n,i=t.reactions;while(n=i.get())krt(n,t);t.notified=!1,e&&!t.rejection&&Qrt(t)})))},Urt=function(t,e,n){var i,r;Trt?(i=Ert.createEvent("Event"),i.promise=e,i.reason=n,i.initEvent(t,!1,!0),qit.dispatchEvent(i)):i={promise:e,reason:n},!grt&&(r=qit["on"+t])?r(i):t===Irt&&art("Unhandled promise rejection",n)},Qrt=function(t){$it(srt,qit,(function(){var e,n=t.facade,i=t.value,r=Grt(t);if(r&&(e=lrt((function(){Kit?Crt.emit("unhandledRejection",i,n):Urt(Irt,n,i)})),t.rejection=Kit||Grt(t)?Nrt:Prt,e.error))throw e.value}))},Grt=function(t){return t.rejection!==Prt&&!t.parent},Hrt=function(t){$it(srt,qit,(function(){var e=t.facade;Kit?Crt.emit("rejectionHandled",e):Urt(Frt,e,t.value)}))},Vrt=function(t,e,n){return function(i){t(e,i,n)}},jrt=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=Mrt,Drt(t,!0))},Wrt=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw xrt("Promise can't be resolved itself");var i=Ort(e);i?ort((function(){var n={done:!1};try{$it(i,e,Vrt(Wrt,n,t),Vrt(jrt,n,t))}catch(r){jrt(n,r,t)}})):(t.value=e,t.state=Rrt,Drt(t,!1))}catch(r){jrt({done:!1},r,t)}}};if(prt&&(_rt=function(t){irt(this,brt),trt(t),$it(Hit,this);var e=vrt(this);try{t(Vrt(Wrt,e),Vrt(jrt,e))}catch(n){jrt(e,n)}},brt=_rt.prototype,Hit=function(t){yrt(this,{type:frt,done:!1,notified:!1,parent:!1,reactions:new crt,rejection:!1,state:Lrt,value:void 0})},Hit.prototype=Xit(brt,"then",(function(t,e){var n=vrt(this),i=Srt(rrt(this,_rt));return n.parent=!0,i.ok=!ert(t)||t,i.fail=ert(e)&&e,i.domain=Kit?Crt.domain:void 0,n.state==Lrt?n.reactions.add(i):ort((function(){krt(i,n)})),i.promise})),Vit=function(){var t=new Hit,e=vrt(t);this.promise=t,this.resolve=Vrt(Wrt,e),this.reject=Vrt(jrt,e)},drt.f=Srt=function(t){return t===_rt||t===jit?new Vit(t):Brt(t)},ert(hrt)&&wrt!==Object.prototype)){Wit=wrt.then,mrt||Xit(wrt,"then",(function(t,e){var n=this;return new _rt((function(t,e){$it(Wit,n,t,e)})).then(t,e)}),{unsafe:!0});try{delete wrt.constructor}catch(Dgt){}Yit&&Yit(wrt,brt)}zit({global:!0,constructor:!0,wrap:!0,forced:prt},{Promise:_rt}),Zit(_rt,frt,!1),Jit(frt);var zrt={},Krt=l8,qrt=zrt,$rt=Krt("iterator"),Xrt=Array.prototype,Yrt=function(t){return void 0!==t&&(qrt.Array===t||Xrt[$rt]===t)},Zrt=get,Jrt=E6,tst=T3,est=zrt,nst=l8,ist=nst("iterator"),rst=function(t){if(!tst(t))return Jrt(t,ist)||Jrt(t,"@@iterator")||est[Zrt(t)]},sst=s3,ost=_6,ast=z8,lst=m6,cst=rst,ust=TypeError,hst=function(t,e){var n=arguments.length<2?cst(t):e;if(ost(n))return ast(sst(n,t));throw ust(lst(t)+" is not iterable")},Ast=s3,dst=z8,fst=E6,pst=function(t,e,n){var i,r;dst(t);try{if(i=fst(t,"return"),!i){if("throw"===e)throw n;return n}i=Ast(i,t)}catch(Dgt){r=!0,i=Dgt}if("throw"===e)throw n;if(r)throw i;return dst(i),n},gst=snt,mst=s3,vst=z8,yst=m6,wst=Yrt,_st=P9,bst=X3,xst=hst,Est=rst,Cst=pst,Sst=TypeError,Bst=function(t,e){this.stopped=t,this.result=e},Tst=Bst.prototype,Ist=function(t,e,n){var i,r,s,o,a,l,c,u=n&&n.that,h=!(!n||!n.AS_ENTRIES),A=!(!n||!n.IS_RECORD),d=!(!n||!n.IS_ITERATOR),f=!(!n||!n.INTERRUPTED),p=gst(e,u),g=function(t){return i&&Cst(i,"normal",t),new Bst(!0,t)},m=function(t){return h?(vst(t),f?p(t[0],t[1],g):p(t[0],t[1])):f?p(t,g):p(t)};if(A)i=t.iterator;else if(d)i=t;else{if(r=Est(t),!r)throw Sst(yst(t)+" is not iterable");if(wst(r)){for(s=0,o=_st(t);o>s;s++)if(a=m(t[s]),a&&bst(Tst,a))return a;return new Bst(!1)}i=xst(t,r)}l=A?t.next:i.next;while(!(c=mst(l,i)).done){try{a=m(c.value)}catch(Dgt){Cst(i,"throw",Dgt)}if("object"==typeof a&&a&&bst(Tst,a))return a}return new Bst(!1)},Fst=l8,Lst=Fst("iterator"),Rst=!1;try{var Mst=0,Pst={next:function(){return{done:!!Mst++}},return:function(){Rst=!0}};Pst[Lst]=function(){return this},Array.from(Pst,(function(){throw 2}))}catch(Dgt){}var Nst=function(t,e){if(!e&&!Rst)return!1;var n=!1;try{var i={};i[Lst]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(Dgt){}return n},Ost=yit,kst=Nst,Dst=kit.CONSTRUCTOR,Ust=Dst||!kst((function(t){Ost.all(t).then(void 0,(function(){}))})),Qst=Stt,Gst=s3,Hst=_6,Vst=Dit,jst=mit,Wst=Ist,zst=Ust;Qst({target:"Promise",stat:!0,forced:zst},{all:function(t){var e=this,n=Vst.f(e),i=n.resolve,r=n.reject,s=jst((function(){var n=Hst(e.resolve),s=[],o=0,a=1;Wst(t,(function(t){var l=o++,c=!1;a++,Gst(n,e,t).then((function(t){c||(c=!0,s[l]=t,--a||i(s))}),r)})),--a||i(s)}));return s.error&&r(s.value),n.promise}});var Kst=Stt,qst=kit.CONSTRUCTOR,$st=yit,Xst=q3,Yst=Q3,Zst=y9,Jst=$st&&$st.prototype;if(Kst({target:"Promise",proto:!0,forced:qst,real:!0},{catch:function(t){return this.then(void 0,t)}}),Yst($st)){var tot=Xst("Promise").prototype["catch"];Jst["catch"]!==tot&&Zst(Jst,"catch",tot,{unsafe:!0})}var eot=Stt,not=s3,iot=_6,rot=Dit,sot=mit,oot=Ist,aot=Ust;eot({target:"Promise",stat:!0,forced:aot},{race:function(t){var e=this,n=rot.f(e),i=n.reject,r=sot((function(){var r=iot(e.resolve);oot(t,(function(t){not(r,e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}});var lot=Stt,cot=s3,uot=Dit,hot=kit.CONSTRUCTOR;lot({target:"Promise",stat:!0,forced:hot},{reject:function(t){var e=uot.f(this);return cot(e.reject,void 0,t),e.promise}});var Aot=z8,dot=j3,fot=Dit,pot=function(t,e){if(Aot(t),dot(e)&&e.constructor===t)return e;var n=fot.f(t),i=n.resolve;return i(e),n.promise},got=Stt,mot=q3,vot=kit.CONSTRUCTOR,yot=pot;function wot(t,e,n,i,r,s,o){try{var a=t[s](o),l=a.value}catch(Dgt){return void n(Dgt)}a.done?e(l):Promise.resolve(l).then(i,r)}function _ot(t){return function(){var e=this,n=arguments;return new Promise((function(i,r){var s=t.apply(e,n);function o(t){wot(s,i,r,o,a,"next",t)}function a(t){wot(s,i,r,o,a,"throw",t)}o(void 0)}))}}mot("Promise"),got({target:"Promise",stat:!0,forced:vot},{resolve:function(t){return yot(this,t)}});var bot=get,xot=String,Eot=function(t){if("Symbol"===bot(t))throw TypeError("Cannot convert a Symbol value to a string");return xot(t)},Cot=z8,Sot=function(){var t=Cot(this),e="";return t.hasIndices&&(e+="d"),t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.unicodeSets&&(e+="v"),t.sticky&&(e+="y"),e},Bot=Z4,Tot=X4,Iot=Tot.RegExp,Fot=Bot((function(){var t=Iot("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),Lot=Fot||Bot((function(){return!Iot("a","y").sticky})),Rot=Fot||Bot((function(){var t=Iot("^r","gy");return t.lastIndex=2,null!=t.exec("str")})),Mot={BROKEN_CARET:Rot,MISSED_STICKY:Lot,UNSUPPORTED_Y:Fot},Pot={},Not=z9,Oot=K9,kot=Object.keys||function(t){return Not(t,Oot)},Dot=t3,Uot=H8,Qot=U8,Got=z8,Hot=P3,Vot=kot;Pot.f=Dot&&!Uot?Object.defineProperties:function(t,e){Got(t);var n,i=Hot(e),r=Vot(e),s=r.length,o=0;while(s>o)Qot.f(t,n=r[o++],i[n]);return t};var jot,Wot=z8,zot=Pot,Kot=K9,qot=M7,$ot=ant,Xot=C8,Yot=R7,Zot=">",Jot="<",tat="prototype",eat="script",nat=Yot("IE_PROTO"),iat=function(){},rat=function(t){return Jot+eat+Zot+t+Jot+"/"+eat+Zot},sat=function(t){t.write(rat("")),t.close();var e=t.parentWindow.Object;return t=null,e},oat=function(){var t,e=Xot("iframe"),n="java"+eat+":";return e.style.display="none",$ot.appendChild(e),e.src=String(n),t=e.contentWindow.document,t.open(),t.write(rat("document.F=Object")),t.close(),t.F},aat=function(){try{jot=new ActiveXObject("htmlfile")}catch(Dgt){}aat="undefined"!=typeof document?document.domain&&jot?sat(jot):oat():sat(jot);var t=Kot.length;while(t--)delete aat[tat][Kot[t]];return aat()};qot[nat]=!0;var lat=Object.create||function(t,e){var n;return null!==t?(iat[tat]=Wot(t),n=new iat,iat[tat]=null,n[nat]=t):n=aat(),void 0===e?n:zot.f(n,e)},cat=Z4,uat=X4,hat=uat.RegExp,Aat=cat((function(){var t=hat(".","s");return!(t.dotAll&&t.exec("\n")&&"s"===t.flags)})),dat=Z4,fat=X4,pat=fat.RegExp,gat=dat((function(){var t=pat("(?<a>b)","g");return"b"!==t.exec("b").groups.a||"bc"!=="b".replace(t,"$<a>c")})),mat=s3,vat=m3,yat=Eot,wat=Sot,_at=Mot,bat=Q6,xat=lat,Eat=$7.get,Cat=Aat,Sat=gat,Bat=bat("native-string-replace",String.prototype.replace),Tat=RegExp.prototype.exec,Iat=Tat,Fat=vat("".charAt),Lat=vat("".indexOf),Rat=vat("".replace),Mat=vat("".slice),Pat=function(){var t=/a/,e=/b*/g;return mat(Tat,t,"a"),mat(Tat,e,"a"),0!==t.lastIndex||0!==e.lastIndex}(),Nat=_at.BROKEN_CARET,Oat=void 0!==/()??/.exec("")[1],kat=Pat||Oat||Nat||Cat||Sat;kat&&(Iat=function(t){var e,n,i,r,s,o,a,l=this,c=Eat(l),u=yat(t),h=c.raw;if(h)return h.lastIndex=l.lastIndex,e=mat(Iat,h,u),l.lastIndex=h.lastIndex,e;var A=c.groups,d=Nat&&l.sticky,f=mat(wat,l),p=l.source,g=0,m=u;if(d&&(f=Rat(f,"y",""),-1===Lat(f,"g")&&(f+="g"),m=Mat(u,l.lastIndex),l.lastIndex>0&&(!l.multiline||l.multiline&&"\n"!==Fat(u,l.lastIndex-1))&&(p="(?: "+p+")",m=" "+m,g++),n=new RegExp("^(?:"+p+")",f)),Oat&&(n=new RegExp("^"+p+"$(?!\\s)",f)),Pat&&(i=l.lastIndex),r=mat(Tat,d?n:l,m),d?r?(r.input=Mat(r.input,g),r[0]=Mat(r[0],g),r.index=l.lastIndex,l.lastIndex+=r[0].length):l.lastIndex=0:Pat&&r&&(l.lastIndex=l.global?r.index+r[0].length:i),Oat&&r&&r.length>1&&mat(Bat,r[0],n,(function(){for(s=1;s<arguments.length-2;s++)void 0===arguments[s]&&(r[s]=void 0)})),r&&A)for(r.groups=o=xat(null),s=0;s<A.length;s++)a=A[s],o[a[0]]=r[a[1]];return r});var Dat=Iat,Uat=Stt,Qat=Dat;Uat({target:"RegExp",proto:!0,forced:/./.exec!==Qat},{exec:Qat});var Gat=tnt,Hat=y9,Vat=Dat,jat=Z4,Wat=l8,zat=a7,Kat=Wat("species"),qat=RegExp.prototype,$at=function(t,e,n,i){var r=Wat(t),s=!jat((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),o=s&&!jat((function(){var e=!1,n=/a/;return"split"===t&&(n={},n.constructor={},n.constructor[Kat]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return e=!0,null},n[r](""),!e}));if(!s||!o||n){var a=Gat(/./[r]),l=e(r,""[t],(function(t,e,n,i,r){var o=Gat(t),l=e.exec;return l===Vat||l===qat.exec?s&&!r?{done:!0,value:a(e,n,i)}:{done:!0,value:o(n,e,i)}:{done:!1}}));Hat(String.prototype,t,l[0]),Hat(qat,r,l[1])}i&&zat(qat[r],"sham",!0)},Xat=m3,Yat=C9,Zat=Eot,Jat=L3,tlt=Xat("".charAt),elt=Xat("".charCodeAt),nlt=Xat("".slice),ilt=function(t){return function(e,n){var i,r,s=Zat(Jat(e)),o=Yat(n),a=s.length;return o<0||o>=a?t?"":void 0:(i=elt(s,o),i<55296||i>56319||o+1===a||(r=elt(s,o+1))<56320||r>57343?t?tlt(s,o):i:t?nlt(s,o,o+2):r-56320+(i-55296<<10)+65536)}},rlt={codeAt:ilt(!1),charAt:ilt(!0)},slt=rlt.charAt,olt=function(t,e,n){return e+(n?slt(t,e).length:1)},alt=s3,llt=z8,clt=Q3,ult=_3,hlt=Dat,Alt=TypeError,dlt=function(t,e){var n=t.exec;if(clt(n)){var i=alt(n,t,e);return null!==i&&llt(i),i}if("RegExp"===ult(t))return alt(hlt,t,e);throw Alt("RegExp#exec called on incompatible receiver")},flt=s3,plt=$at,glt=z8,mlt=T3,vlt=R9,ylt=Eot,wlt=L3,_lt=E6,blt=olt,xlt=dlt;plt("match",(function(t,e,n){return[function(e){var n=wlt(this),i=mlt(e)?void 0:_lt(e,t);return i?flt(i,e,n):new RegExp(e)[t](ylt(n))},function(t){var i=glt(this),r=ylt(t),s=n(e,i,r);if(s.done)return s.value;if(!i.global)return xlt(i,r);var o=i.unicode;i.lastIndex=0;var a,l=[],c=0;while(null!==(a=xlt(i,r))){var u=ylt(a[0]);l[c]=u,""===u&&(i.lastIndex=blt(r,vlt(i.lastIndex),o)),c++}return 0===c?null:l}]}));var Elt=m3,Clt=V6,Slt=Math.floor,Blt=Elt("".charAt),Tlt=Elt("".replace),Ilt=Elt("".slice),Flt=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,Llt=/\$([$&'`]|\d{1,2})/g,Rlt=function(t,e,n,i,r,s){var o=n+t.length,a=i.length,l=Llt;return void 0!==r&&(r=Clt(r),l=Flt),Tlt(s,l,(function(s,l){var c;switch(Blt(l,0)){case"$":return"$";case"&":return t;case"`":return Ilt(e,0,n);case"'":return Ilt(e,o);case"<":c=r[Ilt(l,1,-1)];break;default:var u=+l;if(0===u)return s;if(u>a){var h=Slt(u/10);return 0===h?s:h<=a?void 0===i[h-1]?Blt(l,1):i[h-1]+Blt(l,1):s}c=i[u-1]}return void 0===c?"":c}))},Mlt=Yet,Plt=s3,Nlt=m3,Olt=$at,klt=Z4,Dlt=z8,Ult=Q3,Qlt=T3,Glt=C9,Hlt=R9,Vlt=Eot,jlt=L3,Wlt=olt,zlt=E6,Klt=Rlt,qlt=dlt,$lt=l8,Xlt=$lt("replace"),Ylt=Math.max,Zlt=Math.min,Jlt=Nlt([].concat),tct=Nlt([].push),ect=Nlt("".indexOf),nct=Nlt("".slice),ict=function(t){return void 0===t?t:String(t)},rct=function(){return"$0"==="a".replace(/./,"$0")}(),sct=function(){return!!/./[Xlt]&&""===/./[Xlt]("a","$0")}(),oct=!klt((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")}));Olt("replace",(function(t,e,n){var i=sct?"$":"$0";return[function(t,n){var i=jlt(this),r=Qlt(t)?void 0:zlt(t,Xlt);return r?Plt(r,t,i,n):Plt(e,Vlt(i),t,n)},function(t,r){var s=Dlt(this),o=Vlt(t);if("string"==typeof r&&-1===ect(r,i)&&-1===ect(r,"$<")){var a=n(e,s,o,r);if(a.done)return a.value}var l=Ult(r);l||(r=Vlt(r));var c=s.global;if(c){var u=s.unicode;s.lastIndex=0}var h=[];while(1){var A=qlt(s,o);if(null===A)break;if(tct(h,A),!c)break;var d=Vlt(A[0]);""===d&&(s.lastIndex=Wlt(o,Hlt(s.lastIndex),u))}for(var f="",p=0,g=0;g<h.length;g++){A=h[g];for(var m=Vlt(A[0]),v=Ylt(Zlt(Glt(A.index),o.length),0),y=[],w=1;w<A.length;w++)tct(y,ict(A[w]));var _=A.groups;if(l){var b=Jlt([m],y,v,o);void 0!==_&&tct(b,_);var x=Vlt(Mlt(r,void 0,b))}else x=Klt(m,o,v,y,_,r);v>=p&&(f+=nct(o,p,v)+x,p=v+m.length)}return f+nct(o,p)}]}),!oct||!rct||sct);var act=j3,lct=_3,cct=l8,uct=cct("match"),hct=function(t){var e;return act(t)&&(void 0!==(e=t[uct])?!!e:"RegExp"==lct(t))},Act=hct,dct=TypeError,fct=function(t){if(Act(t))throw dct("The method doesn't accept regular expressions");return t},pct=l8,gct=pct("match"),mct=function(t){var e=/./;try{"/./"[t](e)}catch(n){try{return e[gct]=!1,"/./"[t](e)}catch(i){}}return!1},vct=Stt,yct=tnt,wct=Y4.f,_ct=R9,bct=Eot,xct=fct,Ect=L3,Cct=mct,Sct=yct("".startsWith),Bct=yct("".slice),Tct=Math.min,Ict=Cct("startsWith"),Fct=!Ict&&!!function(){var t=wct(String.prototype,"startsWith");return t&&!t.writable}();vct({target:"String",proto:!0,forced:!Fct&&!Ict},{startsWith:function(t){var e=bct(Ect(this));xct(t);var n=_ct(Tct(arguments.length>1?arguments[1]:void 0,e.length)),i=bct(t);return Sct?Sct(e,i,n):Bct(e,n,n+i.length)===i}});var Lct=l8,Rct=lat,Mct=U8.f,Pct=Lct("unscopables"),Nct=Array.prototype;void 0==Nct[Pct]&&Mct(Nct,Pct,{configurable:!0,value:Rct(null)});var Oct,kct,Dct,Uct=function(t){Nct[Pct][t]=!0},Qct=Z4,Gct=!Qct((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Hct=K6,Vct=Q3,jct=V6,Wct=R7,zct=Gct,Kct=Wct("IE_PROTO"),qct=Object,$ct=qct.prototype,Xct=zct?qct.getPrototypeOf:function(t){var e=jct(t);if(Hct(e,Kct))return e[Kct];var n=e.constructor;return Vct(n)&&e instanceof n?n.prototype:e instanceof qct?$ct:null},Yct=Z4,Zct=Q3,Jct=j3,tut=Xct,eut=y9,nut=l8,iut=nut("iterator"),rut=!1;[].keys&&(Dct=[].keys(),"next"in Dct?(kct=tut(tut(Dct)),kct!==Object.prototype&&(Oct=kct)):rut=!0);var sut=!Jct(Oct)||Yct((function(){var t={};return Oct[iut].call(t)!==t}));sut&&(Oct={}),Zct(Oct[iut])||eut(Oct,iut,(function(){return this}));var out={IteratorPrototype:Oct,BUGGY_SAFARI_ITERATORS:rut},aut=out.IteratorPrototype,lut=lat,cut=A3,uut=jtt,hut=zrt,Aut=function(){return this},dut=function(t,e,n,i){var r=e+" Iterator";return t.prototype=lut(aut,{next:cut(+!i,n)}),uut(t,r,!1),hut[r]=Aut,t},fut=Stt,put=s3,gut=g7,mut=Q3,vut=dut,yut=Xct,wut=Utt,_ut=jtt,but=a7,xut=y9,Eut=l8,Cut=zrt,Sut=out,But=gut.PROPER,Tut=gut.CONFIGURABLE,Iut=Sut.IteratorPrototype,Fut=Sut.BUGGY_SAFARI_ITERATORS,Lut=Eut("iterator"),Rut="keys",Mut="values",Put="entries",Nut=function(){return this},Out=function(t,e,n,i,r,s,o){vut(n,e,i);var a,l,c,u=function(t){if(t===r&&p)return p;if(!Fut&&t in d)return d[t];switch(t){case Rut:return function(){return new n(this,t)};case Mut:return function(){return new n(this,t)};case Put:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",A=!1,d=t.prototype,f=d[Lut]||d["@@iterator"]||r&&d[r],p=!Fut&&f||u(r),g="Array"==e&&d.entries||f;if(g&&(a=yut(g.call(new t)),a!==Object.prototype&&a.next&&(yut(a)!==Iut&&(wut?wut(a,Iut):mut(a[Lut])||xut(a,Lut,Nut)),_ut(a,h,!0))),But&&r==Mut&&f&&f.name!==Mut&&(Tut?but(d,"name",Mut):(A=!0,p=function(){return put(f,this)})),r)if(l={values:u(Mut),keys:s?p:u(Rut),entries:u(Put)},o)for(c in l)(Fut||A||!(c in d))&&xut(d,c,l[c]);else fut({target:e,proto:!0,forced:Fut||A},l);return d[Lut]!==p&&xut(d,Lut,p,{name:r}),Cut[e]=p,l},kut=function(t,e){return{value:t,done:e}},Dut=P3,Uut=Uct,Qut=zrt,Gut=$7,Hut=U8.f,Vut=Out,jut=kut,Wut=t3,zut="Array Iterator",Kut=Gut.set,qut=Gut.getterFor(zut),$ut=Vut(Array,"Array",(function(t,e){Kut(this,{type:zut,target:Dut(t),index:0,kind:e})}),(function(){var t=qut(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,jut(void 0,!0)):jut("keys"==n?i:"values"==n?e[i]:[i,e[i]],!1)}),"values"),Xut=Qut.Arguments=Qut.Array;if(Uut("keys"),Uut("values"),Uut("entries"),Wut&&"values"!==Xut.name)try{Hut(Xut,"name",{value:"values"})}catch(Dgt){}var Yut={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Zut=C8,Jut=Zut("span").classList,tht=Jut&&Jut.constructor&&Jut.constructor.prototype,eht=tht===Object.prototype?void 0:tht,nht=X4,iht=Yut,rht=eht,sht=$ut,oht=a7,aht=l8,lht=aht("iterator"),cht=aht("toStringTag"),uht=sht.values,hht=function(t,e){if(t){if(t[lht]!==uht)try{oht(t,lht,uht)}catch(Dgt){t[lht]=uht}if(t[cht]||oht(t,cht,e),iht[e])for(var n in sht)if(t[n]!==sht[n])try{oht(t,n,sht[n])}catch(Dgt){t[n]=sht[n]}}};for(var Aht in iht)hht(nht[Aht]&&nht[Aht].prototype,Aht);function dht(t,e){if("object"!==HH(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,e||"default");if("object"!==HH(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}function fht(t){var e=dht(t,"string");return"symbol"===HH(e)?e:String(e)}function pht(t,e,n){return e=fht(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}hht(rht,"DOMTokenList");var ght=_6,mht=V6,vht=B3,yht=P9,wht=TypeError,_ht=function(t){return function(e,n,i,r){ght(n);var s=mht(e),o=vht(s),a=yht(s),l=t?a-1:0,c=t?-1:1;if(i<2)while(1){if(l in o){r=o[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw wht("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=c)l in o&&(r=n(r,o[l],l,s));return r}},bht={left:_ht(!1),right:_ht(!0)},xht=Z4,Eht=function(t,e){var n=[][t];return!!n&&xht((function(){n.call(null,e||function(){return 1},1)}))},Cht=Stt,Sht=bht.left,Bht=Eht,Tht=r6,Iht=Ttt,Fht=!Iht&&Tht>79&&Tht<83,Lht=Fht||!Bht("reduce");Cht({target:"Array",proto:!0,forced:Lht},{reduce:function(t){var e=arguments.length;return Sht(this,t,e,e>1?arguments[1]:void 0)}});var Rht=Stt,Mht=tnt,Pht=Y4.f,Nht=R9,Oht=Eot,kht=fct,Dht=L3,Uht=mct,Qht=Mht("".endsWith),Ght=Mht("".slice),Hht=Math.min,Vht=Uht("endsWith"),jht=!Vht&&!!function(){var t=Pht(String.prototype,"endsWith");return t&&!t.writable}();Rht({target:"String",proto:!0,forced:!jht&&!Vht},{endsWith:function(t){var e=Oht(Dht(this));kht(t);var n=arguments.length>1?arguments[1]:void 0,i=e.length,r=void 0===n?i:Hht(Nht(n),i),s=Oht(t);return Qht?Qht(e,s,r):Ght(e,r-s.length,r)===s}});var Wht=w8,zht=U8,Kht=A3,qht=function(t,e,n){var i=Wht(e);i in t?zht.f(t,i,Kht(0,n)):t[i]=n},$ht=I9,Xht=P9,Yht=qht,Zht=Array,Jht=Math.max,tAt=function(t,e,n){for(var i=Xht(t),r=$ht(e,i),s=$ht(void 0===n?i:n,i),o=Zht(Jht(s-r,0)),a=0;r<s;r++,a++)Yht(o,a,t[r]);return o.length=a,o},eAt=Yet,nAt=s3,iAt=m3,rAt=$at,sAt=z8,oAt=T3,aAt=hct,lAt=L3,cAt=zet,uAt=olt,hAt=R9,AAt=Eot,dAt=E6,fAt=tAt,pAt=dlt,gAt=Dat,mAt=Mot,vAt=Z4,yAt=mAt.UNSUPPORTED_Y,wAt=4294967295,_At=Math.min,bAt=[].push,xAt=iAt(/./.exec),EAt=iAt(bAt),CAt=iAt("".slice),SAt=!vAt((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]}));rAt("split",(function(t,e,n){var i;return i="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(t,n){var i=AAt(lAt(this)),r=void 0===n?wAt:n>>>0;if(0===r)return[];if(void 0===t)return[i];if(!aAt(t))return nAt(e,i,t,r);var s,o,a,l=[],c=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),u=0,h=new RegExp(t.source,c+"g");while(s=nAt(gAt,h,i)){if(o=h.lastIndex,o>u&&(EAt(l,CAt(i,u,s.index)),s.length>1&&s.index<i.length&&eAt(bAt,l,fAt(s,1)),a=s[0].length,u=o,l.length>=r))break;h.lastIndex===s.index&&h.lastIndex++}return u===i.length?!a&&xAt(h,"")||EAt(l,""):EAt(l,CAt(i,u)),l.length>r?fAt(l,0,r):l}:"0".split(void 0,0).length?function(t,n){return void 0===t&&0===n?[]:nAt(e,this,t,n)}:e,[function(e,n){var r=lAt(this),s=oAt(e)?void 0:dAt(e,t);return s?nAt(s,e,r,n):nAt(i,AAt(r),e,n)},function(t,r){var s=sAt(this),o=AAt(t),a=n(i,s,o,r,i!==e);if(a.done)return a.value;var l=cAt(s,RegExp),c=s.unicode,u=(s.ignoreCase?"i":"")+(s.multiline?"m":"")+(s.unicode?"u":"")+(yAt?"g":"y"),h=new l(yAt?"^(?:"+s.source+")":s,u),A=void 0===r?wAt:r>>>0;if(0===A)return[];if(0===o.length)return null===pAt(h,o)?[o]:[];var d=0,f=0,p=[];while(f<o.length){h.lastIndex=yAt?0:f;var g,m=pAt(h,yAt?CAt(o,f):o);if(null===m||(g=_At(hAt(h.lastIndex+(yAt?f:0)),o.length))===d)f=uAt(o,f,c);else{if(EAt(p,CAt(o,d,f)),p.length===A)return p;for(var v=1;v<=m.length-1;v++)if(EAt(p,m[v]),p.length===A)return p;f=d=g}}return EAt(p,CAt(o,d)),p}]}),!SAt,yAt);var BAt={exports:{}},TAt={exports:{}};(function(){var t,e,n,i,r,s;"undefined"!==typeof performance&&null!==performance&&performance.now?TAt.exports=function(){return performance.now()}:"undefined"!==typeof process&&null!==process&&process.hrtime?(TAt.exports=function(){return(t()-r)/1e6},e=process.hrtime,t=function(){var t;return t=e(),1e9*t[0]+t[1]},i=t(),s=1e9*process.uptime(),r=i-s):Date.now?(TAt.exports=function(){return Date.now()-n},n=Date.now()):(TAt.exports=function(){return(new Date).getTime()-n},n=(new Date).getTime())}).call(DH);for(var IAt=TAt.exports,FAt=IAt,LAt="undefined"===typeof window?DH:window,RAt=["moz","webkit"],MAt="AnimationFrame",PAt=LAt["request"+MAt],NAt=LAt["cancel"+MAt]||LAt["cancelRequest"+MAt],OAt=0;!PAt&&OAt<RAt.length;OAt++)PAt=LAt[RAt[OAt]+"Request"+MAt],NAt=LAt[RAt[OAt]+"Cancel"+MAt]||LAt[RAt[OAt]+"CancelRequest"+MAt];if(!PAt||!NAt){var kAt=0,DAt=0,UAt=[],QAt=1e3/60;PAt=function(t){if(0===UAt.length){var e=FAt(),n=Math.max(0,QAt-(e-kAt));kAt=n+e,setTimeout((function(){var t=UAt.slice(0);UAt.length=0;for(var e=0;e<t.length;e++)if(!t[e].cancelled)try{t[e].callback(kAt)}catch(n){setTimeout((function(){throw n}),0)}}),Math.round(n))}return UAt.push({handle:++DAt,callback:t,cancelled:!1}),DAt},NAt=function(t){for(var e=0;e<UAt.length;e++)UAt[e].handle===t&&(UAt[e].cancelled=!0)}}BAt.exports=function(t){return PAt.call(LAt,t)},BAt.exports.cancel=function(){NAt.apply(LAt,arguments)},BAt.exports.polyfill=function(t){t||(t=LAt),t.requestAnimationFrame=PAt,t.cancelAnimationFrame=NAt};var GAt=BAt.exports;const HAt=UH(GAt);var VAt="\t\n\v\f\r \u2028\u2029\ufeff",jAt=m3,WAt=L3,zAt=Eot,KAt=VAt,qAt=jAt("".replace),$At=RegExp("^["+KAt+"]+"),XAt=RegExp("(^|[^"+KAt+"])["+KAt+"]+$"),YAt=function(t){return function(e){var n=zAt(WAt(e));return 1&t&&(n=qAt(n,$At,"")),2&t&&(n=qAt(n,XAt,"$1")),n}},ZAt={start:YAt(1),end:YAt(2),trim:YAt(3)},JAt=g7.PROPER,tdt=Z4,edt=VAt,ndt="",idt=function(t){return tdt((function(){return!!edt[t]()||ndt[t]()!==ndt||JAt&&edt[t].name!==t}))},rdt=Stt,sdt=ZAt.trim,odt=idt;rdt({target:"String",proto:!0,forced:odt("trim")},{trim:function(){return sdt(this)}});var adt=function(t){this.ok=!1,this.alpha=1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=t.replace(/ /g,""),t=t.toLowerCase();var e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};t=e[t]||t;for(var n=[{re:/^rgba\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3}),\s*((?:\d?\.)?\d)\)$/,example:["rgba(123, 234, 45, 0.8)","rgba(255,234,245,1.0)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3]),parseFloat(t[4])]}},{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,s=n[i].process,o=r.exec(t);if(o){var a=s(o);this.r=a[0],this.g=a[1],this.b=a[2],a.length>3&&(this.alpha=a[3]),this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.alpha=this.alpha<0?0:this.alpha>1||isNaN(this.alpha)?1:this.alpha,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toRGBA=function(){return"rgba("+this.r+", "+this.g+", "+this.b+", "+this.alpha+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n},this.getHelpXML=function(){for(var t=new Array,i=0;i<n.length;i++)for(var r=n[i].example,s=0;s<r.length;s++)t[t.length]=r[s];for(var o in e)t[t.length]=o;var a=document.createElement("ul");a.setAttribute("id","rgbcolor-examples");for(i=0;i<t.length;i++)try{var l=document.createElement("li"),c=new RGBColor(t[i]),u=document.createElement("div");u.style.cssText="margin: 3px; border: 1px solid black; background:"+c.toHex()+"; color:"+c.toHex(),u.appendChild(document.createTextNode("test"));var h=document.createTextNode(" "+t[i]+" -> "+c.toRGB()+" -> "+c.toHex());l.appendChild(u),l.appendChild(h),a.appendChild(l)}catch(A){}return a}};const ldt=UH(adt);var cdt=Stt,udt=tnt,hdt=U9.indexOf,Adt=Eht,ddt=udt([].indexOf),fdt=!!ddt&&1/ddt([1],1,-0)<0,pdt=fdt||!Adt("indexOf");cdt({target:"Array",proto:!0,forced:pdt},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return fdt?ddt(this,t,e)||0:hdt(this,t,e)}});var gdt=Stt,mdt=m3,vdt=fct,ydt=L3,wdt=Eot,_dt=mct,bdt=mdt("".indexOf);gdt({target:"String",proto:!0,forced:!_dt("includes")},{includes:function(t){return!!~bdt(wdt(ydt(this)),wdt(vdt(t)),arguments.length>1?arguments[1]:void 0)}});var xdt=_3,Edt=Array.isArray||function(t){return"Array"==xdt(t)},Cdt=Stt,Sdt=m3,Bdt=Edt,Tdt=Sdt([].reverse),Idt=[1,2];Cdt({target:"Array",proto:!0,forced:String(Idt)===String(Idt.reverse())},{reverse:function(){return Bdt(this)&&(this.length=this.length),Tdt(this)}});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var Fdt=function(t,e){return(Fdt=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Ldt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}Fdt(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function Rdt(t){var e="";Array.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];if(i.type===$dt.CLOSE_PATH)e+="z";else if(i.type===$dt.HORIZ_LINE_TO)e+=(i.relative?"h":"H")+i.x;else if(i.type===$dt.VERT_LINE_TO)e+=(i.relative?"v":"V")+i.y;else if(i.type===$dt.MOVE_TO)e+=(i.relative?"m":"M")+i.x+" "+i.y;else if(i.type===$dt.LINE_TO)e+=(i.relative?"l":"L")+i.x+" "+i.y;else if(i.type===$dt.CURVE_TO)e+=(i.relative?"c":"C")+i.x1+" "+i.y1+" "+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===$dt.SMOOTH_CURVE_TO)e+=(i.relative?"s":"S")+i.x2+" "+i.y2+" "+i.x+" "+i.y;else if(i.type===$dt.QUAD_TO)e+=(i.relative?"q":"Q")+i.x1+" "+i.y1+" "+i.x+" "+i.y;else if(i.type===$dt.SMOOTH_QUAD_TO)e+=(i.relative?"t":"T")+i.x+" "+i.y;else{if(i.type!==$dt.ARC)throw new Error('Unexpected command type "'+i.type+'" at index '+n+".");e+=(i.relative?"a":"A")+i.rX+" "+i.rY+" "+i.xRot+" "+ +i.lArcFlag+" "+ +i.sweepFlag+" "+i.x+" "+i.y}}return e}function Mdt(t,e){var n=t[0],i=t[1];return[n*Math.cos(e)-i*Math.sin(e),n*Math.sin(e)+i*Math.cos(e)]}function Pdt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;n++)if("number"!=typeof t[n])throw new Error("assertNumbers arguments["+n+"] is not a number. "+typeof t[n]+" == typeof "+t[n]);return!0}var Ndt=Math.PI;function Odt(t,e,n){t.lArcFlag=0===t.lArcFlag?0:1,t.sweepFlag=0===t.sweepFlag?0:1;var i=t.rX,r=t.rY,s=t.x,o=t.y;i=Math.abs(t.rX),r=Math.abs(t.rY);var a=Mdt([(e-s)/2,(n-o)/2],-t.xRot/180*Ndt),l=a[0],c=a[1],u=Math.pow(l,2)/Math.pow(i,2)+Math.pow(c,2)/Math.pow(r,2);1<u&&(i*=Math.sqrt(u),r*=Math.sqrt(u)),t.rX=i,t.rY=r;var h=Math.pow(i,2)*Math.pow(c,2)+Math.pow(r,2)*Math.pow(l,2),A=(t.lArcFlag!==t.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(i,2)*Math.pow(r,2)-h)/h)),d=i*c/r*A,f=-r*l/i*A,p=Mdt([d,f],t.xRot/180*Ndt);t.cX=p[0]+(e+s)/2,t.cY=p[1]+(n+o)/2,t.phi1=Math.atan2((c-f)/r,(l-d)/i),t.phi2=Math.atan2((-c-f)/r,(-l-d)/i),0===t.sweepFlag&&t.phi2>t.phi1&&(t.phi2-=2*Ndt),1===t.sweepFlag&&t.phi2<t.phi1&&(t.phi2+=2*Ndt),t.phi1*=180/Ndt,t.phi2*=180/Ndt}function kdt(t,e,n){Pdt(t,e,n);var i=t*t+e*e-n*n;if(0>i)return[];if(0===i)return[[t*n/(t*t+e*e),e*n/(t*t+e*e)]];var r=Math.sqrt(i);return[[(t*n+e*r)/(t*t+e*e),(e*n-t*r)/(t*t+e*e)],[(t*n-e*r)/(t*t+e*e),(e*n+t*r)/(t*t+e*e)]]}var Ddt,Udt=Math.PI/180;function Qdt(t,e,n){return(1-n)*t+n*e}function Gdt(t,e,n,i){return t+Math.cos(i/180*Ndt)*e+Math.sin(i/180*Ndt)*n}function Hdt(t,e,n,i){var r=1e-6,s=e-t,o=n-e,a=3*s+3*(i-n)-6*o,l=6*(o-s),c=3*s;return Math.abs(a)<r?[-c/l]:function(t,e,n){void 0===n&&(n=1e-6);var i=t*t/4-e;if(i<-n)return[];if(i<=n)return[-t/2];var r=Math.sqrt(i);return[-t/2-r,-t/2+r]}(l/a,c/a,r)}function Vdt(t,e,n,i,r){var s=1-r;return t*(s*s*s)+e*(3*s*s*r)+n*(3*s*r*r)+i*(r*r*r)}!function(t){function e(){return r((function(t,e,n){return t.relative&&(void 0!==t.x1&&(t.x1+=e),void 0!==t.y1&&(t.y1+=n),void 0!==t.x2&&(t.x2+=e),void 0!==t.y2&&(t.y2+=n),void 0!==t.x&&(t.x+=e),void 0!==t.y&&(t.y+=n),t.relative=!1),t}))}function n(){var t=NaN,e=NaN,n=NaN,i=NaN;return r((function(r,s,o){return r.type&$dt.SMOOTH_CURVE_TO&&(r.type=$dt.CURVE_TO,t=isNaN(t)?s:t,e=isNaN(e)?o:e,r.x1=r.relative?s-t:2*s-t,r.y1=r.relative?o-e:2*o-e),r.type&$dt.CURVE_TO?(t=r.relative?s+r.x2:r.x2,e=r.relative?o+r.y2:r.y2):(t=NaN,e=NaN),r.type&$dt.SMOOTH_QUAD_TO&&(r.type=$dt.QUAD_TO,n=isNaN(n)?s:n,i=isNaN(i)?o:i,r.x1=r.relative?s-n:2*s-n,r.y1=r.relative?o-i:2*o-i),r.type&$dt.QUAD_TO?(n=r.relative?s+r.x1:r.x1,i=r.relative?o+r.y1:r.y1):(n=NaN,i=NaN),r}))}function i(){var t=NaN,e=NaN;return r((function(n,i,r){if(n.type&$dt.SMOOTH_QUAD_TO&&(n.type=$dt.QUAD_TO,t=isNaN(t)?i:t,e=isNaN(e)?r:e,n.x1=n.relative?i-t:2*i-t,n.y1=n.relative?r-e:2*r-e),n.type&$dt.QUAD_TO){t=n.relative?i+n.x1:n.x1,e=n.relative?r+n.y1:n.y1;var s=n.x1,o=n.y1;n.type=$dt.CURVE_TO,n.x1=((n.relative?0:i)+2*s)/3,n.y1=((n.relative?0:r)+2*o)/3,n.x2=(n.x+2*s)/3,n.y2=(n.y+2*o)/3}else t=NaN,e=NaN;return n}))}function r(t){var e=0,n=0,i=NaN,r=NaN;return function(s){if(isNaN(i)&&!(s.type&$dt.MOVE_TO))throw new Error("path must start with moveto");var o=t(s,e,n,i,r);return s.type&$dt.CLOSE_PATH&&(e=i,n=r),void 0!==s.x&&(e=s.relative?e+s.x:s.x),void 0!==s.y&&(n=s.relative?n+s.y:s.y),s.type&$dt.MOVE_TO&&(i=e,r=n),o}}function s(t,e,n,i,s,o){return Pdt(t,e,n,i,s,o),r((function(r,a,l,c){var u=r.x1,h=r.x2,A=r.relative&&!isNaN(c),d=void 0!==r.x?r.x:A?0:a,f=void 0!==r.y?r.y:A?0:l;function p(t){return t*t}r.type&$dt.HORIZ_LINE_TO&&0!==e&&(r.type=$dt.LINE_TO,r.y=r.relative?0:l),r.type&$dt.VERT_LINE_TO&&0!==n&&(r.type=$dt.LINE_TO,r.x=r.relative?0:a),void 0!==r.x&&(r.x=r.x*t+f*n+(A?0:s)),void 0!==r.y&&(r.y=d*e+r.y*i+(A?0:o)),void 0!==r.x1&&(r.x1=r.x1*t+r.y1*n+(A?0:s)),void 0!==r.y1&&(r.y1=u*e+r.y1*i+(A?0:o)),void 0!==r.x2&&(r.x2=r.x2*t+r.y2*n+(A?0:s)),void 0!==r.y2&&(r.y2=h*e+r.y2*i+(A?0:o));var g=t*i-e*n;if(void 0!==r.xRot&&(1!==t||0!==e||0!==n||1!==i))if(0===g)delete r.rX,delete r.rY,delete r.xRot,delete r.lArcFlag,delete r.sweepFlag,r.type=$dt.LINE_TO;else{var m=r.xRot*Math.PI/180,v=Math.sin(m),y=Math.cos(m),w=1/p(r.rX),_=1/p(r.rY),b=p(y)*w+p(v)*_,x=2*v*y*(w-_),E=p(v)*w+p(y)*_,C=b*i*i-x*e*i+E*e*e,S=x*(t*i+e*n)-2*(b*n*i+E*t*e),B=b*n*n-x*t*n+E*t*t,T=(Math.atan2(S,C-B)+Math.PI)%Math.PI/2,I=Math.sin(T),F=Math.cos(T);r.rX=Math.abs(g)/Math.sqrt(C*p(F)+S*I*F+B*p(I)),r.rY=Math.abs(g)/Math.sqrt(C*p(I)-S*I*F+B*p(F)),r.xRot=180*T/Math.PI}return void 0!==r.sweepFlag&&0>g&&(r.sweepFlag=+!r.sweepFlag),r}))}function o(){return function(t){var e={};for(var n in t)e[n]=t[n];return e}}t.ROUND=function(t){function e(e){return Math.round(e*t)/t}return void 0===t&&(t=1e13),Pdt(t),function(t){return void 0!==t.x1&&(t.x1=e(t.x1)),void 0!==t.y1&&(t.y1=e(t.y1)),void 0!==t.x2&&(t.x2=e(t.x2)),void 0!==t.y2&&(t.y2=e(t.y2)),void 0!==t.x&&(t.x=e(t.x)),void 0!==t.y&&(t.y=e(t.y)),void 0!==t.rX&&(t.rX=e(t.rX)),void 0!==t.rY&&(t.rY=e(t.rY)),t}},t.TO_ABS=e,t.TO_REL=function(){return r((function(t,e,n){return t.relative||(void 0!==t.x1&&(t.x1-=e),void 0!==t.y1&&(t.y1-=n),void 0!==t.x2&&(t.x2-=e),void 0!==t.y2&&(t.y2-=n),void 0!==t.x&&(t.x-=e),void 0!==t.y&&(t.y-=n),t.relative=!0),t}))},t.NORMALIZE_HVZ=function(t,e,n){return void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===n&&(n=!0),r((function(i,r,s,o,a){if(isNaN(o)&&!(i.type&$dt.MOVE_TO))throw new Error("path must start with moveto");return e&&i.type&$dt.HORIZ_LINE_TO&&(i.type=$dt.LINE_TO,i.y=i.relative?0:s),n&&i.type&$dt.VERT_LINE_TO&&(i.type=$dt.LINE_TO,i.x=i.relative?0:r),t&&i.type&$dt.CLOSE_PATH&&(i.type=$dt.LINE_TO,i.x=i.relative?o-r:o,i.y=i.relative?a-s:a),i.type&$dt.ARC&&(0===i.rX||0===i.rY)&&(i.type=$dt.LINE_TO,delete i.rX,delete i.rY,delete i.xRot,delete i.lArcFlag,delete i.sweepFlag),i}))},t.NORMALIZE_ST=n,t.QT_TO_C=i,t.INFO=r,t.SANITIZE=function(t){void 0===t&&(t=0),Pdt(t);var e=NaN,n=NaN,i=NaN,s=NaN;return r((function(r,o,a,l,c){var u=Math.abs,h=!1,A=0,d=0;if(r.type&$dt.SMOOTH_CURVE_TO&&(A=isNaN(e)?0:o-e,d=isNaN(n)?0:a-n),r.type&($dt.CURVE_TO|$dt.SMOOTH_CURVE_TO)?(e=r.relative?o+r.x2:r.x2,n=r.relative?a+r.y2:r.y2):(e=NaN,n=NaN),r.type&$dt.SMOOTH_QUAD_TO?(i=isNaN(i)?o:2*o-i,s=isNaN(s)?a:2*a-s):r.type&$dt.QUAD_TO?(i=r.relative?o+r.x1:r.x1,s=r.relative?a+r.y1:r.y2):(i=NaN,s=NaN),r.type&$dt.LINE_COMMANDS||r.type&$dt.ARC&&(0===r.rX||0===r.rY||!r.lArcFlag)||r.type&$dt.CURVE_TO||r.type&$dt.SMOOTH_CURVE_TO||r.type&$dt.QUAD_TO||r.type&$dt.SMOOTH_QUAD_TO){var f=void 0===r.x?0:r.relative?r.x:r.x-o,p=void 0===r.y?0:r.relative?r.y:r.y-a;A=isNaN(i)?void 0===r.x1?A:r.relative?r.x:r.x1-o:i-o,d=isNaN(s)?void 0===r.y1?d:r.relative?r.y:r.y1-a:s-a;var g=void 0===r.x2?0:r.relative?r.x:r.x2-o,m=void 0===r.y2?0:r.relative?r.y:r.y2-a;u(f)<=t&&u(p)<=t&&u(A)<=t&&u(d)<=t&&u(g)<=t&&u(m)<=t&&(h=!0)}return r.type&$dt.CLOSE_PATH&&u(o-l)<=t&&u(a-c)<=t&&(h=!0),h?[]:r}))},t.MATRIX=s,t.ROTATE=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0),Pdt(t,e,n);var i=Math.sin(t),r=Math.cos(t);return s(r,i,-i,r,e-e*r+n*i,n-e*i-n*r)},t.TRANSLATE=function(t,e){return void 0===e&&(e=0),Pdt(t,e),s(1,0,0,1,t,e)},t.SCALE=function(t,e){return void 0===e&&(e=t),Pdt(t,e),s(t,0,0,e,0,0)},t.SKEW_X=function(t){return Pdt(t),s(1,0,Math.atan(t),1,0,0)},t.SKEW_Y=function(t){return Pdt(t),s(1,Math.atan(t),0,1,0,0)},t.X_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),Pdt(t),s(-1,0,0,1,t,0)},t.Y_AXIS_SYMMETRY=function(t){return void 0===t&&(t=0),Pdt(t),s(1,0,0,-1,0,t)},t.A_TO_C=function(){return r((function(t,e,n){return $dt.ARC===t.type?function(t,e,n){var i,r,s,o;t.cX||Odt(t,e,n);for(var a=Math.min(t.phi1,t.phi2),l=Math.max(t.phi1,t.phi2)-a,c=Math.ceil(l/90),u=new Array(c),h=e,A=n,d=0;d<c;d++){var f=Qdt(t.phi1,t.phi2,d/c),p=Qdt(t.phi1,t.phi2,(d+1)/c),g=p-f,m=4/3*Math.tan(g*Udt/4),v=[Math.cos(f*Udt)-m*Math.sin(f*Udt),Math.sin(f*Udt)+m*Math.cos(f*Udt)],y=v[0],w=v[1],_=[Math.cos(p*Udt),Math.sin(p*Udt)],b=_[0],x=_[1],E=[b+m*Math.sin(p*Udt),x-m*Math.cos(p*Udt)],C=E[0],S=E[1];u[d]={relative:t.relative,type:$dt.CURVE_TO};var B=function(e,n){var i=Mdt([e*t.rX,n*t.rY],t.xRot),r=i[0],s=i[1];return[t.cX+r,t.cY+s]};i=B(y,w),u[d].x1=i[0],u[d].y1=i[1],r=B(C,S),u[d].x2=r[0],u[d].y2=r[1],s=B(b,x),u[d].x=s[0],u[d].y=s[1],t.relative&&(u[d].x1-=h,u[d].y1-=A,u[d].x2-=h,u[d].y2-=A,u[d].x-=h,u[d].y-=A),h=(o=[u[d].x,u[d].y])[0],A=o[1]}return u}(t,t.relative?0:e,t.relative?0:n):t}))},t.ANNOTATE_ARCS=function(){return r((function(t,e,n){return t.relative&&(e=0,n=0),$dt.ARC===t.type&&Odt(t,e,n),t}))},t.CLONE=o,t.CALCULATE_BOUNDS=function(){var t=function(t){var e={};for(var n in t)e[n]=t[n];return e},s=e(),o=i(),a=n(),l=r((function(e,n,i){var r=a(o(s(t(e))));function c(t){t>l.maxX&&(l.maxX=t),t<l.minX&&(l.minX=t)}function u(t){t>l.maxY&&(l.maxY=t),t<l.minY&&(l.minY=t)}if(r.type&$dt.DRAWING_COMMANDS&&(c(n),u(i)),r.type&$dt.HORIZ_LINE_TO&&c(r.x),r.type&$dt.VERT_LINE_TO&&u(r.y),r.type&$dt.LINE_TO&&(c(r.x),u(r.y)),r.type&$dt.CURVE_TO){c(r.x),u(r.y);for(var h=0,A=Hdt(n,r.x1,r.x2,r.x);h<A.length;h++)0<(T=A[h])&&1>T&&c(Vdt(n,r.x1,r.x2,r.x,T));for(var d=0,f=Hdt(i,r.y1,r.y2,r.y);d<f.length;d++)0<(T=f[d])&&1>T&&u(Vdt(i,r.y1,r.y2,r.y,T))}if(r.type&$dt.ARC){c(r.x),u(r.y),Odt(r,n,i);for(var p=r.xRot/180*Math.PI,g=Math.cos(p)*r.rX,m=Math.sin(p)*r.rX,v=-Math.sin(p)*r.rY,y=Math.cos(p)*r.rY,w=r.phi1<r.phi2?[r.phi1,r.phi2]:-180>r.phi2?[r.phi2+360,r.phi1+360]:[r.phi2,r.phi1],_=w[0],b=w[1],x=function(t){var e=t[0],n=t[1],i=180*Math.atan2(n,e)/Math.PI;return i<_?i+360:i},E=0,C=kdt(v,-g,0).map(x);E<C.length;E++)(T=C[E])>_&&T<b&&c(Gdt(r.cX,g,v,T));for(var S=0,B=kdt(y,-m,0).map(x);S<B.length;S++){var T;(T=B[S])>_&&T<b&&u(Gdt(r.cY,m,y,T))}}return e}));return l.minX=1/0,l.maxX=-1/0,l.minY=1/0,l.maxY=-1/0,l}}(Ddt||(Ddt={}));var jdt,Wdt=function(){function t(){}return t.prototype.round=function(t){return this.transform(Ddt.ROUND(t))},t.prototype.toAbs=function(){return this.transform(Ddt.TO_ABS())},t.prototype.toRel=function(){return this.transform(Ddt.TO_REL())},t.prototype.normalizeHVZ=function(t,e,n){return this.transform(Ddt.NORMALIZE_HVZ(t,e,n))},t.prototype.normalizeST=function(){return this.transform(Ddt.NORMALIZE_ST())},t.prototype.qtToC=function(){return this.transform(Ddt.QT_TO_C())},t.prototype.aToC=function(){return this.transform(Ddt.A_TO_C())},t.prototype.sanitize=function(t){return this.transform(Ddt.SANITIZE(t))},t.prototype.translate=function(t,e){return this.transform(Ddt.TRANSLATE(t,e))},t.prototype.scale=function(t,e){return this.transform(Ddt.SCALE(t,e))},t.prototype.rotate=function(t,e,n){return this.transform(Ddt.ROTATE(t,e,n))},t.prototype.matrix=function(t,e,n,i,r,s){return this.transform(Ddt.MATRIX(t,e,n,i,r,s))},t.prototype.skewX=function(t){return this.transform(Ddt.SKEW_X(t))},t.prototype.skewY=function(t){return this.transform(Ddt.SKEW_Y(t))},t.prototype.xSymmetry=function(t){return this.transform(Ddt.X_AXIS_SYMMETRY(t))},t.prototype.ySymmetry=function(t){return this.transform(Ddt.Y_AXIS_SYMMETRY(t))},t.prototype.annotateArcs=function(){return this.transform(Ddt.ANNOTATE_ARCS())},t}(),zdt=function(t){return" "===t||"\t"===t||"\r"===t||"\n"===t},Kdt=function(t){return"0".charCodeAt(0)<=t.charCodeAt(0)&&t.charCodeAt(0)<="9".charCodeAt(0)},qdt=function(t){function e(){var e=t.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return Ldt(e,t),e.prototype.finish=function(t){if(void 0===t&&(t=[]),this.parse(" ",t),0!==this.curArgs.length||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return t},e.prototype.parse=function(t,e){var n=this;void 0===e&&(e=[]);for(var i=function(t){e.push(t),n.curArgs.length=0,n.canParseCommandOrComma=!0},r=0;r<t.length;r++){var s=t[r],o=!(this.curCommandType!==$dt.ARC||3!==this.curArgs.length&&4!==this.curArgs.length||1!==this.curNumber.length||"0"!==this.curNumber&&"1"!==this.curNumber),a=Kdt(s)&&("0"===this.curNumber&&"0"===s||o);if(!Kdt(s)||a)if("e"!==s&&"E"!==s)if("-"!==s&&"+"!==s||!this.curNumberHasExp||this.curNumberHasExpDigits)if("."!==s||this.curNumberHasExp||this.curNumberHasDecimal||o){if(this.curNumber&&-1!==this.curCommandType){var l=Number(this.curNumber);if(isNaN(l))throw new SyntaxError("Invalid number ending at "+r);if(this.curCommandType===$dt.ARC)if(0===this.curArgs.length||1===this.curArgs.length){if(0>l)throw new SyntaxError('Expected positive number, got "'+l+'" at index "'+r+'"')}else if((3===this.curArgs.length||4===this.curArgs.length)&&"0"!==this.curNumber&&"1"!==this.curNumber)throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+r+'"');this.curArgs.push(l),this.curArgs.length===Xdt[this.curCommandType]&&($dt.HORIZ_LINE_TO===this.curCommandType?i({type:$dt.HORIZ_LINE_TO,relative:this.curCommandRelative,x:l}):$dt.VERT_LINE_TO===this.curCommandType?i({type:$dt.VERT_LINE_TO,relative:this.curCommandRelative,y:l}):this.curCommandType===$dt.MOVE_TO||this.curCommandType===$dt.LINE_TO||this.curCommandType===$dt.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),$dt.MOVE_TO===this.curCommandType&&(this.curCommandType=$dt.LINE_TO)):this.curCommandType===$dt.CURVE_TO?i({type:$dt.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===$dt.SMOOTH_CURVE_TO?i({type:$dt.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===$dt.QUAD_TO?i({type:$dt.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===$dt.ARC&&i({type:$dt.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!zdt(s))if(","===s&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if("+"!==s&&"-"!==s&&"."!==s)if(a)this.curNumber=s,this.curNumberHasDecimal=!1;else{if(0!==this.curArgs.length)throw new SyntaxError("Unterminated command at index "+r+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+s+'" at index '+r+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,"z"!==s&&"Z"!==s)if("h"===s||"H"===s)this.curCommandType=$dt.HORIZ_LINE_TO,this.curCommandRelative="h"===s;else if("v"===s||"V"===s)this.curCommandType=$dt.VERT_LINE_TO,this.curCommandRelative="v"===s;else if("m"===s||"M"===s)this.curCommandType=$dt.MOVE_TO,this.curCommandRelative="m"===s;else if("l"===s||"L"===s)this.curCommandType=$dt.LINE_TO,this.curCommandRelative="l"===s;else if("c"===s||"C"===s)this.curCommandType=$dt.CURVE_TO,this.curCommandRelative="c"===s;else if("s"===s||"S"===s)this.curCommandType=$dt.SMOOTH_CURVE_TO,this.curCommandRelative="s"===s;else if("q"===s||"Q"===s)this.curCommandType=$dt.QUAD_TO,this.curCommandRelative="q"===s;else if("t"===s||"T"===s)this.curCommandType=$dt.SMOOTH_QUAD_TO,this.curCommandRelative="t"===s;else{if("a"!==s&&"A"!==s)throw new SyntaxError('Unexpected character "'+s+'" at index '+r+".");this.curCommandType=$dt.ARC,this.curCommandRelative="a"===s}else e.push({type:$dt.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=s,this.curNumberHasDecimal="."===s}else this.curNumber+=s,this.curNumberHasDecimal=!0;else this.curNumber+=s;else this.curNumber+=s,this.curNumberHasExp=!0;else this.curNumber+=s,this.curNumberHasExpDigits=this.curNumberHasExp}return e},e.prototype.transform=function(t){return Object.create(this,{parse:{value:function(e,n){void 0===n&&(n=[]);for(var i=0,r=Object.getPrototypeOf(this).parse.call(this,e);i<r.length;i++){var s=r[i],o=t(s);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return n}}})},e}(Wdt),$dt=function(t){function e(n){var i=t.call(this)||this;return i.commands="string"==typeof n?e.parse(n):n,i}return Ldt(e,t),e.prototype.encode=function(){return e.encode(this.commands)},e.prototype.getBounds=function(){var t=Ddt.CALCULATE_BOUNDS();return this.transform(t),t},e.prototype.transform=function(t){for(var e=[],n=0,i=this.commands;n<i.length;n++){var r=t(i[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return this.commands=e,this},e.encode=function(t){return Rdt(t)},e.parse=function(t){var e=new qdt,n=[];return e.parse(t,n),e.finish(n),n},e.CLOSE_PATH=1,e.MOVE_TO=2,e.HORIZ_LINE_TO=4,e.VERT_LINE_TO=8,e.LINE_TO=16,e.CURVE_TO=32,e.SMOOTH_CURVE_TO=64,e.QUAD_TO=128,e.SMOOTH_QUAD_TO=256,e.ARC=512,e.LINE_COMMANDS=e.LINE_TO|e.HORIZ_LINE_TO|e.VERT_LINE_TO,e.DRAWING_COMMANDS=e.HORIZ_LINE_TO|e.VERT_LINE_TO|e.LINE_TO|e.CURVE_TO|e.SMOOTH_CURVE_TO|e.QUAD_TO|e.SMOOTH_QUAD_TO|e.ARC,e}(Wdt),Xdt=((jdt={})[$dt.MOVE_TO]=2,jdt[$dt.LINE_TO]=2,jdt[$dt.HORIZ_LINE_TO]=1,jdt[$dt.VERT_LINE_TO]=1,jdt[$dt.CLOSE_PATH]=0,jdt[$dt.QUAD_TO]=4,jdt[$dt.SMOOTH_QUAD_TO]=2,jdt[$dt.CURVE_TO]=6,jdt[$dt.SMOOTH_CURVE_TO]=4,jdt[$dt.ARC]=7,jdt),Ydt=s3,Zdt=K6,Jdt=X3,tft=Sot,eft=RegExp.prototype,nft=function(t){var e=t.flags;return void 0!==e||"flags"in eft||Zdt(t,"flags")||!Jdt(eft,t)?e:Ydt(tft,t)},ift=g7.PROPER,rft=y9,sft=z8,oft=Eot,aft=Z4,lft=nft,cft="toString",uft=RegExp.prototype,hft=uft[cft],Aft=aft((function(){return"/a/b"!=hft.call({source:"a",flags:"b"})})),dft=ift&&hft.name!=cft;function fft(t){return fft="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fft(t)}function pft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(Aft||dft)&&rft(RegExp.prototype,cft,(function(){var t=sft(this),e=oft(t.source),n=oft(lft(t));return"/"+e+"/"+n}),{unsafe:!0});var gft=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],mft=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function vft(t,e,n,i,r){if("string"===typeof t&&(t=document.getElementById(t)),!t||"object"!==fft(t)||!("getContext"in t))throw new TypeError("Expecting canvas with `getContext` method in processCanvasRGB(A) calls!");var s=t.getContext("2d");try{return s.getImageData(e,n,i,r)}catch(o){throw new Error("unable to access image data: "+o)}}function yft(t,e,n,i,r,s){if(!(isNaN(s)||s<1)){s|=0;var o=vft(t,e,n,i,r);o=wft(o,e,n,i,r,s),t.getContext("2d").putImageData(o,e,n)}}function wft(t,e,n,i,r,s){for(var o,a=t.data,l=2*s+1,c=i-1,u=r-1,h=s+1,A=h*(h+1)/2,d=new _ft,f=d,p=1;p<l;p++)f=f.next=new _ft,p===h&&(o=f);f.next=d;for(var g=null,m=null,v=0,y=0,w=gft[s],_=mft[s],b=0;b<r;b++){f=d;for(var x=a[y],E=a[y+1],C=a[y+2],S=a[y+3],B=0;B<h;B++)f.r=x,f.g=E,f.b=C,f.a=S,f=f.next;for(var T=0,I=0,F=0,L=0,R=h*x,M=h*E,P=h*C,N=h*S,O=A*x,k=A*E,D=A*C,U=A*S,Q=1;Q<h;Q++){var G=y+((c<Q?c:Q)<<2),H=a[G],V=a[G+1],j=a[G+2],W=a[G+3],z=h-Q;O+=(f.r=H)*z,k+=(f.g=V)*z,D+=(f.b=j)*z,U+=(f.a=W)*z,T+=H,I+=V,F+=j,L+=W,f=f.next}g=d,m=o;for(var K=0;K<i;K++){var q=U*w>>_;if(a[y+3]=q,0!==q){var $=255/q;a[y]=(O*w>>_)*$,a[y+1]=(k*w>>_)*$,a[y+2]=(D*w>>_)*$}else a[y]=a[y+1]=a[y+2]=0;O-=R,k-=M,D-=P,U-=N,R-=g.r,M-=g.g,P-=g.b,N-=g.a;var X=K+s+1;X=v+(X<c?X:c)<<2,T+=g.r=a[X],I+=g.g=a[X+1],F+=g.b=a[X+2],L+=g.a=a[X+3],O+=T,k+=I,D+=F,U+=L,g=g.next;var Y=m,Z=Y.r,J=Y.g,tt=Y.b,et=Y.a;R+=Z,M+=J,P+=tt,N+=et,T-=Z,I-=J,F-=tt,L-=et,m=m.next,y+=4}v+=i}for(var nt=0;nt<i;nt++){y=nt<<2;var it=a[y],rt=a[y+1],st=a[y+2],ot=a[y+3],at=h*it,lt=h*rt,ct=h*st,ut=h*ot,ht=A*it,At=A*rt,dt=A*st,ft=A*ot;f=d;for(var pt=0;pt<h;pt++)f.r=it,f.g=rt,f.b=st,f.a=ot,f=f.next;for(var gt=i,mt=0,vt=0,yt=0,wt=0,_t=1;_t<=s;_t++){y=gt+nt<<2;var bt=h-_t;ht+=(f.r=it=a[y])*bt,At+=(f.g=rt=a[y+1])*bt,dt+=(f.b=st=a[y+2])*bt,ft+=(f.a=ot=a[y+3])*bt,wt+=it,mt+=rt,vt+=st,yt+=ot,f=f.next,_t<u&&(gt+=i)}y=nt,g=d,m=o;for(var xt=0;xt<r;xt++){var Et=y<<2;a[Et+3]=ot=ft*w>>_,ot>0?(ot=255/ot,a[Et]=(ht*w>>_)*ot,a[Et+1]=(At*w>>_)*ot,a[Et+2]=(dt*w>>_)*ot):a[Et]=a[Et+1]=a[Et+2]=0,ht-=at,At-=lt,dt-=ct,ft-=ut,at-=g.r,lt-=g.g,ct-=g.b,ut-=g.a,Et=nt+((Et=xt+h)<u?Et:u)*i<<2,ht+=wt+=g.r=a[Et],At+=mt+=g.g=a[Et+1],dt+=vt+=g.b=a[Et+2],ft+=yt+=g.a=a[Et+3],g=g.next,at+=it=m.r,lt+=rt=m.g,ct+=st=m.b,ut+=ot=m.a,wt-=it,mt-=rt,vt-=st,yt-=ot,m=m.next,y+=i}}return t}var _ft=function t(){pft(this,t),this.r=0,this.g=0,this.b=0,this.a=0,this.next=null};function bft(){var{DOMParser:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e={window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:t,createCanvas(t,e){return new OffscreenCanvas(t,e)},createImage(t){return _ot((function*(){var e=yield fetch(t),n=yield e.blob(),i=yield createImageBitmap(n);return i}))()}};return"undefined"===typeof DOMParser&&"undefined"!==typeof t||Reflect.deleteProperty(e,"DOMParser"),e}function xft(t){var{DOMParser:e,canvas:n,fetch:i}=t;return{window:null,ignoreAnimation:!0,ignoreMouse:!0,DOMParser:e,fetch:i,createCanvas:n.createCanvas,createImage:n.loadImage}}var Eft=Object.freeze({__proto__:null,offscreen:bft,node:xft});function Cft(t){return t.replace(/(?!\u3000)\s+/gm," ")}function Sft(t){return t.replace(/^[\n \t]+/,"")}function Bft(t){return t.replace(/[\n \t]+$/,"")}function Tft(t){var e=(t||"").match(/-?(\d+(?:\.\d*(?:[eE][+-]?\d+)?)?|\.\d+)(?=\D|$)/gm)||[];return e.map(parseFloat)}var Ift=/^[A-Z-]+$/;function Fft(t){return Ift.test(t)?t.toLowerCase():t}function Lft(t){var e=/url\(('([^']+)'|"([^"]+)"|([^'")]+))\)/.exec(t)||[];return e[2]||e[3]||e[4]}function Rft(t){if(!t.startsWith("rgb"))return t;var e=3,n=t.replace(/\d+(\.\d+)?/g,((t,n)=>e--&&n?String(Math.round(parseFloat(t))):t));return n}var Mft=/(\[[^\]]+\])/g,Pft=/(#[^\s+>~.[:]+)/g,Nft=/(\.[^\s+>~.[:]+)/g,Oft=/(::[^\s+>~.[:]+|:first-line|:first-letter|:before|:after)/gi,kft=/(:[\w-]+\([^)]*\))/gi,Dft=/(:[^\s+>~.[:]+)/g,Uft=/([^\s+>~.[:]+)/g;function Qft(t,e){var n=e.exec(t);return n?[t.replace(e," "),n.length]:[t,0]}function Gft(t){var e=[0,0,0],n=t.replace(/:not\(([^)]*)\)/g,"     $1 ").replace(/{[\s\S]*/gm," "),i=0;return[n,i]=Qft(n,Mft),e[1]+=i,[n,i]=Qft(n,Pft),e[0]+=i,[n,i]=Qft(n,Nft),e[1]+=i,[n,i]=Qft(n,Oft),e[2]+=i,[n,i]=Qft(n,kft),e[1]+=i,[n,i]=Qft(n,Dft),e[1]+=i,n=n.replace(/[*\s+>~]/g," ").replace(/[#.]/g," "),[n,i]=Qft(n,Uft),e[2]+=i,e.join("")}var Hft=1e-8;function Vft(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2))}function jft(t,e){return(t[0]*e[0]+t[1]*e[1])/(Vft(t)*Vft(e))}function Wft(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(jft(t,e))}function zft(t){return t*t*t}function Kft(t){return 3*t*t*(1-t)}function qft(t){return 3*t*(1-t)*(1-t)}function $ft(t){return(1-t)*(1-t)*(1-t)}function Xft(t){return t*t}function Yft(t){return 2*t*(1-t)}function Zft(t){return(1-t)*(1-t)}class Jft{constructor(t,e,n){this.document=t,this.name=e,this.value=n,this.isNormalizedColor=!1}static empty(t){return new Jft(t,"EMPTY","")}split(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ",{document:e,name:n}=this;return Cft(this.getString()).trim().split(t).map((t=>new Jft(e,n,t)))}hasValue(t){var{value:e}=this;return null!==e&&""!==e&&(t||0!==e)&&"undefined"!==typeof e}isString(t){var{value:e}=this,n="string"===typeof e;return n&&t?t.test(e):n}isUrlDefinition(){return this.isString(/^url\(/)}isPixels(){if(!this.hasValue())return!1;var t=this.getString();switch(!0){case t.endsWith("px"):case/^[0-9]+$/.test(t):return!0;default:return!1}}setValue(t){return this.value=t,this}getValue(t){return"undefined"===typeof t||this.hasValue()?this.value:t}getNumber(t){if(!this.hasValue())return"undefined"===typeof t?0:parseFloat(t);var{value:e}=this,n=parseFloat(e);return this.isString(/%$/)&&(n/=100),n}getString(t){return"undefined"===typeof t||this.hasValue()?"undefined"===typeof this.value?"":String(this.value):String(t)}getColor(t){var e=this.getString(t);return this.isNormalizedColor||(this.isNormalizedColor=!0,e=Rft(e),this.value=e),e}getDpi(){return 96}getRem(){return this.document.rootEmSize}getEm(){return this.document.emSize}getUnits(){return this.getString().replace(/[0-9.-]/g,"")}getPixels(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.hasValue())return 0;var[n,i]="boolean"===typeof t?[void 0,t]:[t],{viewPort:r}=this.document.screen;switch(!0){case this.isString(/vmin$/):return this.getNumber()/100*Math.min(r.computeSize("x"),r.computeSize("y"));case this.isString(/vmax$/):return this.getNumber()/100*Math.max(r.computeSize("x"),r.computeSize("y"));case this.isString(/vw$/):return this.getNumber()/100*r.computeSize("x");case this.isString(/vh$/):return this.getNumber()/100*r.computeSize("y");case this.isString(/rem$/):return this.getNumber()*this.getRem();case this.isString(/em$/):return this.getNumber()*this.getEm();case this.isString(/ex$/):return this.getNumber()*this.getEm()/2;case this.isString(/px$/):return this.getNumber();case this.isString(/pt$/):return this.getNumber()*this.getDpi()*(1/72);case this.isString(/pc$/):return 15*this.getNumber();case this.isString(/cm$/):return this.getNumber()*this.getDpi()/2.54;case this.isString(/mm$/):return this.getNumber()*this.getDpi()/25.4;case this.isString(/in$/):return this.getNumber()*this.getDpi();case this.isString(/%$/)&&i:return this.getNumber()*this.getEm();case this.isString(/%$/):return this.getNumber()*r.computeSize(n);default:var s=this.getNumber();return e&&s<1?s*r.computeSize(n):s}}getMilliseconds(){return this.hasValue()?this.isString(/ms$/)?this.getNumber():1e3*this.getNumber():0}getRadians(){if(!this.hasValue())return 0;switch(!0){case this.isString(/deg$/):return this.getNumber()*(Math.PI/180);case this.isString(/grad$/):return this.getNumber()*(Math.PI/200);case this.isString(/rad$/):return this.getNumber();default:return this.getNumber()*(Math.PI/180)}}getDefinition(){var t=this.getString(),e=/#([^)'"]+)/.exec(t);return e&&(e=e[1]),e||(e=t),this.document.definitions[e]}getFillStyleDefinition(t,e){var n=this.getDefinition();if(!n)return null;if("function"===typeof n.createGradient)return n.createGradient(this.document.ctx,t,e);if("function"===typeof n.createPattern){if(n.getHrefAttribute().hasValue()){var i=n.getAttribute("patternTransform");n=n.getHrefAttribute().getDefinition(),i.hasValue()&&n.getAttribute("patternTransform",!0).setValue(i.value)}return n.createPattern(this.document.ctx,t,e)}return null}getTextBaseline(){return this.hasValue()?Jft.textBaselineMapping[this.getString()]:null}addOpacity(t){for(var e=this.getColor(),n=e.length,i=0,r=0;r<n;r++)if(","===e[r]&&i++,3===i)break;if(t.hasValue()&&this.isString()&&3!==i){var s=new ldt(e);s.ok&&(s.alpha=t.getNumber(),e=s.toRGBA())}return new Jft(this.document,this.name,e)}}Jft.textBaselineMapping={baseline:"alphabetic","before-edge":"top","text-before-edge":"top",middle:"middle",central:"middle","after-edge":"bottom","text-after-edge":"bottom",ideographic:"ideographic",alphabetic:"alphabetic",hanging:"hanging",mathematical:"alphabetic"};class tpt{constructor(){this.viewPorts=[]}clear(){this.viewPorts=[]}setCurrent(t,e){this.viewPorts.push({width:t,height:e})}removeCurrent(){this.viewPorts.pop()}getCurrent(){var{viewPorts:t}=this;return t[t.length-1]}get width(){return this.getCurrent().width}get height(){return this.getCurrent().height}computeSize(t){return"number"===typeof t?t:"x"===t?this.width:"y"===t?this.height:Math.sqrt(Math.pow(this.width,2)+Math.pow(this.height,2))/Math.sqrt(2)}}class ept{constructor(t,e){this.x=t,this.y=e}static parse(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,[n=e,i=e]=Tft(t);return new ept(n,i)}static parseScale(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,[n=e,i=n]=Tft(t);return new ept(n,i)}static parsePath(t){for(var e=Tft(t),n=e.length,i=[],r=0;r<n;r+=2)i.push(new ept(e[r],e[r+1]));return i}angleTo(t){return Math.atan2(t.y-this.y,t.x-this.x)}applyTransform(t){var{x:e,y:n}=this,i=e*t[0]+n*t[2]+t[4],r=e*t[1]+n*t[3]+t[5];this.x=i,this.y=r}}class npt{constructor(t){this.screen=t,this.working=!1,this.events=[],this.eventElements=[],this.onClick=this.onClick.bind(this),this.onMouseMove=this.onMouseMove.bind(this)}isWorking(){return this.working}start(){if(!this.working){var{screen:t,onClick:e,onMouseMove:n}=this,i=t.ctx.canvas;i.onclick=e,i.onmousemove=n,this.working=!0}}stop(){if(this.working){var t=this.screen.ctx.canvas;this.working=!1,t.onclick=null,t.onmousemove=null}}hasEvents(){return this.working&&this.events.length>0}runEvents(){if(this.working){var{screen:t,events:e,eventElements:n}=this,{style:i}=t.ctx.canvas;i&&(i.cursor=""),e.forEach(((t,e)=>{var{run:i}=t,r=n[e];while(r)i(r),r=r.parent})),this.events=[],this.eventElements=[]}}checkPath(t,e){if(this.working&&e){var{events:n,eventElements:i}=this;n.forEach(((n,r)=>{var{x:s,y:o}=n;!i[r]&&e.isPointInPath&&e.isPointInPath(s,o)&&(i[r]=t)}))}}checkBoundingBox(t,e){if(this.working&&e){var{events:n,eventElements:i}=this;n.forEach(((n,r)=>{var{x:s,y:o}=n;!i[r]&&e.isPointInBox(s,o)&&(i[r]=t)}))}}mapXY(t,e){var{window:n,ctx:i}=this.screen,r=new ept(t,e),s=i.canvas;while(s)r.x-=s.offsetLeft,r.y-=s.offsetTop,s=s.offsetParent;return n.scrollX&&(r.x+=n.scrollX),n.scrollY&&(r.y+=n.scrollY),r}onClick(t){var{x:e,y:n}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onclick",x:e,y:n,run(t){t.onClick&&t.onClick()}})}onMouseMove(t){var{x:e,y:n}=this.mapXY(t.clientX,t.clientY);this.events.push({type:"onmousemove",x:e,y:n,run(t){t.onMouseMove&&t.onMouseMove()}})}}var ipt="undefined"!==typeof window?window:null,rpt="undefined"!==typeof fetch?fetch.bind(void 0):null;class spt{constructor(t){var{fetch:e=rpt,window:n=ipt}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.ctx=t,this.FRAMERATE=30,this.MAX_VIRTUAL_PIXELS=3e4,this.CLIENT_WIDTH=800,this.CLIENT_HEIGHT=600,this.viewPort=new tpt,this.mouse=new npt(this),this.animations=[],this.waits=[],this.frameDuration=0,this.isReadyLock=!1,this.isFirstRender=!0,this.intervalId=null,this.window=n,this.fetch=e}wait(t){this.waits.push(t)}ready(){return this.readyPromise?this.readyPromise:Promise.resolve()}isReady(){if(this.isReadyLock)return!0;var t=this.waits.every((t=>t()));return t&&(this.waits=[],this.resolveReady&&this.resolveReady()),this.isReadyLock=t,t}setDefaults(t){t.strokeStyle="rgba(0,0,0,0)",t.lineCap="butt",t.lineJoin="miter",t.miterLimit=4}setViewBox(t){var{document:e,ctx:n,aspectRatio:i,width:r,desiredWidth:s,height:o,desiredHeight:a,minX:l=0,minY:c=0,refX:u,refY:h,clip:A=!1,clipX:d=0,clipY:f=0}=t,p=Cft(i).replace(/^defer\s/,""),[g,m]=p.split(" "),v=g||"xMidYMid",y=m||"meet",w=r/s,_=o/a,b=Math.min(w,_),x=Math.max(w,_),E=s,C=a;"meet"===y&&(E*=b,C*=b),"slice"===y&&(E*=x,C*=x);var S=new Jft(e,"refX",u),B=new Jft(e,"refY",h),T=S.hasValue()&&B.hasValue();if(T&&n.translate(-b*S.getPixels("x"),-b*B.getPixels("y")),A){var I=b*d,F=b*f;n.beginPath(),n.moveTo(I,F),n.lineTo(r,F),n.lineTo(r,o),n.lineTo(I,o),n.closePath(),n.clip()}if(!T){var L="meet"===y&&b===_,R="slice"===y&&x===_,M="meet"===y&&b===w,P="slice"===y&&x===w;v.startsWith("xMid")&&(L||R)&&n.translate(r/2-E/2,0),v.endsWith("YMid")&&(M||P)&&n.translate(0,o/2-C/2),v.startsWith("xMax")&&(L||R)&&n.translate(r-E,0),v.endsWith("YMax")&&(M||P)&&n.translate(0,o-C)}switch(!0){case"none"===v:n.scale(w,_);break;case"meet"===y:n.scale(b,b);break;case"slice"===y:n.scale(x,x);break}n.translate(-l,-c)}start(t){var{enableRedraw:e=!1,ignoreMouse:n=!1,ignoreAnimation:i=!1,ignoreDimensions:r=!1,ignoreClear:s=!1,forceRedraw:o,scaleWidth:a,scaleHeight:l,offsetX:c,offsetY:u}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{FRAMERATE:h,mouse:A}=this,d=1e3/h;if(this.frameDuration=d,this.readyPromise=new Promise((t=>{this.resolveReady=t})),this.isReady()&&this.render(t,r,s,a,l,c,u),e){var f=Date.now(),p=f,g=0,m=()=>{f=Date.now(),g=f-p,g>=d&&(p=f-g%d,this.shouldUpdate(i,o)&&(this.render(t,r,s,a,l,c,u),A.runEvents())),this.intervalId=HAt(m)};n||A.start(),this.intervalId=HAt(m)}}stop(){this.intervalId&&(HAt.cancel(this.intervalId),this.intervalId=null),this.mouse.stop()}shouldUpdate(t,e){if(!t){var{frameDuration:n}=this,i=this.animations.reduce(((t,e)=>e.update(n)||t),!1);if(i)return!0}return!("function"!==typeof e||!e())||(!(this.isReadyLock||!this.isReady())||!!this.mouse.hasEvents())}render(t,e,n,i,r,s,o){var{CLIENT_WIDTH:a,CLIENT_HEIGHT:l,viewPort:c,ctx:u,isFirstRender:h}=this,A=u.canvas;c.clear(),A.width&&A.height?c.setCurrent(A.width,A.height):c.setCurrent(a,l);var d=t.getStyle("width"),f=t.getStyle("height");!e&&(h||"number"!==typeof i&&"number"!==typeof r)&&(d.hasValue()&&(A.width=d.getPixels("x"),A.style&&(A.style.width="".concat(A.width,"px"))),f.hasValue()&&(A.height=f.getPixels("y"),A.style&&(A.style.height="".concat(A.height,"px"))));var p=A.clientWidth||A.width,g=A.clientHeight||A.height;if(e&&d.hasValue()&&f.hasValue()&&(p=d.getPixels("x"),g=f.getPixels("y")),c.setCurrent(p,g),"number"===typeof s&&t.getAttribute("x",!0).setValue(s),"number"===typeof o&&t.getAttribute("y",!0).setValue(o),"number"===typeof i||"number"===typeof r){var m=Tft(t.getAttribute("viewBox").getString()),v=0,y=0;if("number"===typeof i){var w=t.getStyle("width");w.hasValue()?v=w.getPixels("x")/i:isNaN(m[2])||(v=m[2]/i)}if("number"===typeof r){var _=t.getStyle("height");_.hasValue()?y=_.getPixels("y")/r:isNaN(m[3])||(y=m[3]/r)}v||(v=y),y||(y=v),t.getAttribute("width",!0).setValue(i),t.getAttribute("height",!0).setValue(r);var b=t.getStyle("transform",!0,!0);b.setValue("".concat(b.getString()," scale(").concat(1/v,", ").concat(1/y,")"))}n||u.clearRect(0,0,p,g),t.render(u),h&&(this.isFirstRender=!1)}}spt.defaultWindow=ipt,spt.defaultFetch=rpt;var{defaultFetch:opt}=spt,apt="undefined"!==typeof DOMParser?DOMParser:null;class lpt{constructor(){var{fetch:t=opt,DOMParser:e=apt}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.fetch=t,this.DOMParser=e}parse(t){var e=this;return _ot((function*(){return t.startsWith("<")?e.parseFromString(t):e.load(t)}))()}parseFromString(t){var e=new this.DOMParser;try{return this.checkDocument(e.parseFromString(t,"image/svg+xml"))}catch(n){return this.checkDocument(e.parseFromString(t,"text/xml"))}}checkDocument(t){var e=t.getElementsByTagName("parsererror")[0];if(e)throw new Error(e.textContent);return t}load(t){var e=this;return _ot((function*(){var n=yield e.fetch(t),i=yield n.text();return e.parseFromString(i)}))()}}class cpt{constructor(t,e){this.type="translate",this.point=null,this.point=ept.parse(e)}apply(t){var{x:e,y:n}=this.point;t.translate(e||0,n||0)}unapply(t){var{x:e,y:n}=this.point;t.translate(-1*e||0,-1*n||0)}applyToPoint(t){var{x:e,y:n}=this.point;t.applyTransform([1,0,0,1,e||0,n||0])}}class upt{constructor(t,e,n){this.type="rotate",this.angle=null,this.originX=null,this.originY=null,this.cx=0,this.cy=0;var i=Tft(e);this.angle=new Jft(t,"angle",i[0]),this.originX=n[0],this.originY=n[1],this.cx=i[1]||0,this.cy=i[2]||0}apply(t){var{cx:e,cy:n,originX:i,originY:r,angle:s}=this,o=e+i.getPixels("x"),a=n+r.getPixels("y");t.translate(o,a),t.rotate(s.getRadians()),t.translate(-o,-a)}unapply(t){var{cx:e,cy:n,originX:i,originY:r,angle:s}=this,o=e+i.getPixels("x"),a=n+r.getPixels("y");t.translate(o,a),t.rotate(-1*s.getRadians()),t.translate(-o,-a)}applyToPoint(t){var{cx:e,cy:n,angle:i}=this,r=i.getRadians();t.applyTransform([1,0,0,1,e||0,n||0]),t.applyTransform([Math.cos(r),Math.sin(r),-Math.sin(r),Math.cos(r),0,0]),t.applyTransform([1,0,0,1,-e||0,-n||0])}}class hpt{constructor(t,e,n){this.type="scale",this.scale=null,this.originX=null,this.originY=null;var i=ept.parseScale(e);0!==i.x&&0!==i.y||(i.x=Hft,i.y=Hft),this.scale=i,this.originX=n[0],this.originY=n[1]}apply(t){var{scale:{x:e,y:n},originX:i,originY:r}=this,s=i.getPixels("x"),o=r.getPixels("y");t.translate(s,o),t.scale(e,n||e),t.translate(-s,-o)}unapply(t){var{scale:{x:e,y:n},originX:i,originY:r}=this,s=i.getPixels("x"),o=r.getPixels("y");t.translate(s,o),t.scale(1/e,1/n||e),t.translate(-s,-o)}applyToPoint(t){var{x:e,y:n}=this.scale;t.applyTransform([e||0,0,0,n||0,0,0])}}class Apt{constructor(t,e,n){this.type="matrix",this.matrix=[],this.originX=null,this.originY=null,this.matrix=Tft(e),this.originX=n[0],this.originY=n[1]}apply(t){var{originX:e,originY:n,matrix:i}=this,r=e.getPixels("x"),s=n.getPixels("y");t.translate(r,s),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),t.translate(-r,-s)}unapply(t){var{originX:e,originY:n,matrix:i}=this,r=i[0],s=i[2],o=i[4],a=i[1],l=i[3],c=i[5],u=0,h=0,A=1,d=1/(r*(l*A-c*h)-s*(a*A-c*u)+o*(a*h-l*u)),f=e.getPixels("x"),p=n.getPixels("y");t.translate(f,p),t.transform(d*(l*A-c*h),d*(c*u-a*A),d*(o*h-s*A),d*(r*A-o*u),d*(s*c-o*l),d*(o*a-r*c)),t.translate(-f,-p)}applyToPoint(t){t.applyTransform(this.matrix)}}class dpt extends Apt{constructor(t,e,n){super(t,e,n),this.type="skew",this.angle=null,this.angle=new Jft(t,"angle",e)}}class fpt extends dpt{constructor(t,e,n){super(t,e,n),this.type="skewX",this.matrix=[1,0,Math.tan(this.angle.getRadians()),1,0,0]}}class ppt extends dpt{constructor(t,e,n){super(t,e,n),this.type="skewY",this.matrix=[1,Math.tan(this.angle.getRadians()),0,1,0,0]}}function gpt(t){return Cft(t).trim().replace(/\)([a-zA-Z])/g,") $1").replace(/\)(\s?,\s?)/g,") ").split(/\s(?=[a-z])/)}function mpt(t){var[e,n]=t.split("(");return[e.trim(),n.trim().replace(")","")]}class vpt{constructor(t,e,n){this.document=t,this.transforms=[];var i=gpt(e);i.forEach((t=>{if("none"!==t){var[e,i]=mpt(t),r=vpt.transformTypes[e];"undefined"!==typeof r&&this.transforms.push(new r(this.document,i,n))}}))}static fromElement(t,e){var n=e.getStyle("transform",!1,!0),[i,r=i]=e.getStyle("transform-origin",!1,!0).split(),s=[i,r];return n.hasValue()?new vpt(t,n.getString(),s):null}apply(t){for(var{transforms:e}=this,n=e.length,i=0;i<n;i++)e[i].apply(t)}unapply(t){for(var{transforms:e}=this,n=e.length,i=n-1;i>=0;i--)e[i].unapply(t)}applyToPoint(t){for(var{transforms:e}=this,n=e.length,i=0;i<n;i++)e[i].applyToPoint(t)}}vpt.transformTypes={translate:cpt,rotate:upt,scale:hpt,matrix:Apt,skewX:fpt,skewY:ppt};class ypt{constructor(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.document=t,this.node=e,this.captureTextNodes=n,this.attributes={},this.styles={},this.stylesSpecificity={},this.animationFrozen=!1,this.animationFrozenValue="",this.parent=null,this.children=[],e&&1===e.nodeType){if(Array.from(e.attributes).forEach((e=>{var n=Fft(e.nodeName);this.attributes[n]=new Jft(t,n,e.value)})),this.addStylesFromStyleDefinition(),this.getAttribute("style").hasValue()){var i=this.getAttribute("style").getString().split(";").map((t=>t.trim()));i.forEach((e=>{if(e){var[n,i]=e.split(":").map((t=>t.trim()));this.styles[n]=new Jft(t,n,i)}}))}var{definitions:r}=t,s=this.getAttribute("id");s.hasValue()&&(r[s.getString()]||(r[s.getString()]=this)),Array.from(e.childNodes).forEach((e=>{if(1===e.nodeType)this.addChild(e);else if(n&&(3===e.nodeType||4===e.nodeType)){var i=t.createTextNode(e);i.getText().length>0&&this.addChild(i)}}))}}getAttribute(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.attributes[t];if(!n&&e){var i=new Jft(this.document,t,"");return this.attributes[t]=i,i}return n||Jft.empty(this.document)}getHrefAttribute(){for(var t in this.attributes)if("href"===t||t.endsWith(":href"))return this.attributes[t];return Jft.empty(this.document)}getStyle(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.styles[t];if(i)return i;var r=this.getAttribute(t);if(null!==r&&void 0!==r&&r.hasValue())return this.styles[t]=r,r;if(!n){var{parent:s}=this;if(s){var o=s.getStyle(t);if(null!==o&&void 0!==o&&o.hasValue())return o}}if(e){var a=new Jft(this.document,t,"");return this.styles[t]=a,a}return i||Jft.empty(this.document)}render(t){if("none"!==this.getStyle("display").getString()&&"hidden"!==this.getStyle("visibility").getString()){if(t.save(),this.getStyle("mask").hasValue()){var e=this.getStyle("mask").getDefinition();e&&(this.applyEffects(t),e.apply(t,this))}else if("none"!==this.getStyle("filter").getValue("none")){var n=this.getStyle("filter").getDefinition();n&&(this.applyEffects(t),n.apply(t,this))}else this.setContext(t),this.renderChildren(t),this.clearContext(t);t.restore()}}setContext(t){}applyEffects(t){var e=vpt.fromElement(this.document,this);e&&e.apply(t);var n=this.getStyle("clip-path",!1,!0);if(n.hasValue()){var i=n.getDefinition();i&&i.apply(t)}}clearContext(t){}renderChildren(t){this.children.forEach((e=>{e.render(t)}))}addChild(t){var e=t instanceof ypt?t:this.document.createElement(t);e.parent=this,ypt.ignoreChildTypes.includes(e.type)||this.children.push(e)}matchesSelector(t){var e,{node:n}=this;if("function"===typeof n.matches)return n.matches(t);var i=null===(e=n.getAttribute)||void 0===e?void 0:e.call(n,"class");return!(!i||""===i)&&i.split(" ").some((e=>".".concat(e)===t))}addStylesFromStyleDefinition(){var{styles:t,stylesSpecificity:e}=this.document;for(var n in t)if(!n.startsWith("@")&&this.matchesSelector(n)){var i=t[n],r=e[n];if(i)for(var s in i){var o=this.stylesSpecificity[s];"undefined"===typeof o&&(o="000"),r>=o&&(this.styles[s]=i[s],this.stylesSpecificity[s]=r)}}}removeStyles(t,e){var n=e.reduce(((e,n)=>{var i=t.getStyle(n);if(!i.hasValue())return e;var r=i.getString();return i.setValue(""),[...e,[n,r]]}),[]);return n}restoreStyles(t,e){e.forEach((e=>{var[n,i]=e;t.getStyle(n,!0).setValue(i)}))}isFirstChild(){var t;return 0===(null===(t=this.parent)||void 0===t?void 0:t.children.indexOf(this))}}ypt.ignoreChildTypes=["title"];class wpt extends ypt{constructor(t,e,n){super(t,e,n)}}function _pt(t){var e=t.trim();return/^('|")/.test(e)?e:'"'.concat(e,'"')}function bpt(t){return"undefined"===typeof process?t:t.trim().split(",").map(_pt).join(",")}function xpt(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"italic":case"oblique":case"inherit":case"initial":case"unset":return e;default:return/^oblique\s+(-|)\d+deg$/.test(e)?e:""}}function Ept(t){if(!t)return"";var e=t.trim().toLowerCase();switch(e){case"normal":case"bold":case"lighter":case"bolder":case"inherit":case"initial":case"unset":return e;default:return/^[\d.]+$/.test(e)?e:""}}class Cpt{constructor(t,e,n,i,r,s){var o=s?"string"===typeof s?Cpt.parse(s):s:{};this.fontFamily=r||o.fontFamily,this.fontSize=i||o.fontSize,this.fontStyle=t||o.fontStyle,this.fontWeight=n||o.fontWeight,this.fontVariant=e||o.fontVariant}static parse(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1?arguments[1]:void 0,n="",i="",r="",s="",o="",a=Cft(t).trim().split(" "),l={fontSize:!1,fontStyle:!1,fontWeight:!1,fontVariant:!1};return a.forEach((t=>{switch(!0){case!l.fontStyle&&Cpt.styles.includes(t):"inherit"!==t&&(n=t),l.fontStyle=!0;break;case!l.fontVariant&&Cpt.variants.includes(t):"inherit"!==t&&(i=t),l.fontStyle=!0,l.fontVariant=!0;break;case!l.fontWeight&&Cpt.weights.includes(t):"inherit"!==t&&(r=t),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0;break;case!l.fontSize:"inherit"!==t&&([s]=t.split("/")),l.fontStyle=!0,l.fontVariant=!0,l.fontWeight=!0,l.fontSize=!0;break;default:"inherit"!==t&&(o+=t)}})),new Cpt(n,i,r,s,o,e)}toString(){return[xpt(this.fontStyle),this.fontVariant,Ept(this.fontWeight),this.fontSize,bpt(this.fontFamily)].join(" ").trim()}}Cpt.styles="normal|italic|oblique|inherit",Cpt.variants="normal|small-caps|inherit",Cpt.weights="normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900|inherit";class Spt{constructor(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Number.NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.NaN,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Number.NaN,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:Number.NaN;this.x1=t,this.y1=e,this.x2=n,this.y2=i,this.addPoint(t,e),this.addPoint(n,i)}get x(){return this.x1}get y(){return this.y1}get width(){return this.x2-this.x1}get height(){return this.y2-this.y1}addPoint(t,e){"undefined"!==typeof t&&((isNaN(this.x1)||isNaN(this.x2))&&(this.x1=t,this.x2=t),t<this.x1&&(this.x1=t),t>this.x2&&(this.x2=t)),"undefined"!==typeof e&&((isNaN(this.y1)||isNaN(this.y2))&&(this.y1=e,this.y2=e),e<this.y1&&(this.y1=e),e>this.y2&&(this.y2=e))}addX(t){this.addPoint(t,null)}addY(t){this.addPoint(null,t)}addBoundingBox(t){if(t){var{x1:e,y1:n,x2:i,y2:r}=t;this.addPoint(e,n),this.addPoint(i,r)}}sumCubic(t,e,n,i,r){return Math.pow(1-t,3)*e+3*Math.pow(1-t,2)*t*n+3*(1-t)*Math.pow(t,2)*i+Math.pow(t,3)*r}bezierCurveAdd(t,e,n,i,r){var s=6*e-12*n+6*i,o=-3*e+9*n-9*i+3*r,a=3*n-3*e;if(0!==o){var l=Math.pow(s,2)-4*a*o;if(!(l<0)){var c=(-s+Math.sqrt(l))/(2*o);0<c&&c<1&&(t?this.addX(this.sumCubic(c,e,n,i,r)):this.addY(this.sumCubic(c,e,n,i,r)));var u=(-s-Math.sqrt(l))/(2*o);0<u&&u<1&&(t?this.addX(this.sumCubic(u,e,n,i,r)):this.addY(this.sumCubic(u,e,n,i,r)))}}else{if(0===s)return;var h=-a/s;0<h&&h<1&&(t?this.addX(this.sumCubic(h,e,n,i,r)):this.addY(this.sumCubic(h,e,n,i,r)))}}addBezierCurve(t,e,n,i,r,s,o,a){this.addPoint(t,e),this.addPoint(o,a),this.bezierCurveAdd(!0,t,n,r,o),this.bezierCurveAdd(!1,e,i,s,a)}addQuadraticCurve(t,e,n,i,r,s){var o=t+2/3*(n-t),a=e+2/3*(i-e),l=o+1/3*(r-t),c=a+1/3*(s-e);this.addBezierCurve(t,e,o,l,a,c,r,s)}isPointInBox(t,e){var{x1:n,y1:i,x2:r,y2:s}=this;return n<=t&&t<=r&&i<=e&&e<=s}}class Bpt extends $dt{constructor(t){super(t.replace(/([+\-.])\s+/gm,"$1").replace(/[^MmZzLlHhVvCcSsQqTtAae\d\s.,+-].*/g,"")),this.control=null,this.start=null,this.current=null,this.command=null,this.commands=this.commands,this.i=-1,this.previousCommand=null,this.points=[],this.angles=[]}reset(){this.i=-1,this.command=null,this.previousCommand=null,this.start=new ept(0,0),this.control=new ept(0,0),this.current=new ept(0,0),this.points=[],this.angles=[]}isEnd(){var{i:t,commands:e}=this;return t>=e.length-1}next(){var t=this.commands[++this.i];return this.previousCommand=this.command,this.command=t,t}getPoint(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"x",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"y",n=new ept(this.command[t],this.command[e]);return this.makeAbsolute(n)}getAsControlPoint(t,e){var n=this.getPoint(t,e);return this.control=n,n}getAsCurrentPoint(t,e){var n=this.getPoint(t,e);return this.current=n,n}getReflectedControlPoint(){var t=this.previousCommand.type;if(t!==$dt.CURVE_TO&&t!==$dt.SMOOTH_CURVE_TO&&t!==$dt.QUAD_TO&&t!==$dt.SMOOTH_QUAD_TO)return this.current;var{current:{x:e,y:n},control:{x:i,y:r}}=this,s=new ept(2*e-i,2*n-r);return s}makeAbsolute(t){if(this.command.relative){var{x:e,y:n}=this.current;t.x+=e,t.y+=n}return t}addMarker(t,e,n){var{points:i,angles:r}=this;n&&r.length>0&&!r[r.length-1]&&(r[r.length-1]=i[i.length-1].angleTo(n)),this.addMarkerAngle(t,e?e.angleTo(t):null)}addMarkerAngle(t,e){this.points.push(t),this.angles.push(e)}getMarkerPoints(){return this.points}getMarkerAngles(){for(var{angles:t}=this,e=t.length,n=0;n<e;n++)if(!t[n])for(var i=n+1;i<e;i++)if(t[i]){t[n]=t[i];break}return t}}class Tpt extends ypt{constructor(){super(...arguments),this.modifiedEmSizeStack=!1}calculateOpacity(){var t=1,e=this;while(e){var n=e.getStyle("opacity",!1,!0);n.hasValue(!0)&&(t*=n.getNumber()),e=e.parent}return t}setContext(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e){var n=this.getStyle("fill"),i=this.getStyle("fill-opacity"),r=this.getStyle("stroke"),s=this.getStyle("stroke-opacity");if(n.isUrlDefinition()){var o=n.getFillStyleDefinition(this,i);o&&(t.fillStyle=o)}else if(n.hasValue()){"currentColor"===n.getString()&&n.setValue(this.getStyle("color").getColor());var a=n.getColor();"inherit"!==a&&(t.fillStyle="none"===a?"rgba(0,0,0,0)":a)}if(i.hasValue()){var l=new Jft(this.document,"fill",t.fillStyle).addOpacity(i).getColor();t.fillStyle=l}if(r.isUrlDefinition()){var c=r.getFillStyleDefinition(this,s);c&&(t.strokeStyle=c)}else if(r.hasValue()){"currentColor"===r.getString()&&r.setValue(this.getStyle("color").getColor());var u=r.getString();"inherit"!==u&&(t.strokeStyle="none"===u?"rgba(0,0,0,0)":u)}if(s.hasValue()){var h=new Jft(this.document,"stroke",t.strokeStyle).addOpacity(s).getString();t.strokeStyle=h}var A=this.getStyle("stroke-width");if(A.hasValue()){var d=A.getPixels();t.lineWidth=d||Hft}var f=this.getStyle("stroke-linecap"),p=this.getStyle("stroke-linejoin"),g=this.getStyle("stroke-miterlimit"),m=this.getStyle("stroke-dasharray"),v=this.getStyle("stroke-dashoffset");if(f.hasValue()&&(t.lineCap=f.getString()),p.hasValue()&&(t.lineJoin=p.getString()),g.hasValue()&&(t.miterLimit=g.getNumber()),m.hasValue()&&"none"!==m.getString()){var y=Tft(m.getString());"undefined"!==typeof t.setLineDash?t.setLineDash(y):"undefined"!==typeof t.webkitLineDash?t.webkitLineDash=y:"undefined"===typeof t.mozDash||1===y.length&&0===y[0]||(t.mozDash=y);var w=v.getPixels();"undefined"!==typeof t.lineDashOffset?t.lineDashOffset=w:"undefined"!==typeof t.webkitLineDashOffset?t.webkitLineDashOffset=w:"undefined"!==typeof t.mozDashOffset&&(t.mozDashOffset=w)}}if(this.modifiedEmSizeStack=!1,"undefined"!==typeof t.font){var _=this.getStyle("font"),b=this.getStyle("font-style"),x=this.getStyle("font-variant"),E=this.getStyle("font-weight"),C=this.getStyle("font-size"),S=this.getStyle("font-family"),B=new Cpt(b.getString(),x.getString(),E.getString(),C.hasValue()?"".concat(C.getPixels(!0),"px"):"",S.getString(),Cpt.parse(_.getString(),t.font));b.setValue(B.fontStyle),x.setValue(B.fontVariant),E.setValue(B.fontWeight),C.setValue(B.fontSize),S.setValue(B.fontFamily),t.font=B.toString(),C.isPixels()&&(this.document.emSize=C.getPixels(),this.modifiedEmSizeStack=!0)}e||(this.applyEffects(t),t.globalAlpha=this.calculateOpacity())}clearContext(t){super.clearContext(t),this.modifiedEmSizeStack&&this.document.popEmSize()}}class Ipt extends Tpt{constructor(t,e,n){super(t,e,n),this.type="path",this.pathParser=null,this.pathParser=new Bpt(this.getAttribute("d").getString())}path(t){var{pathParser:e}=this,n=new Spt;e.reset(),t&&t.beginPath();while(!e.isEnd())switch(e.next().type){case Bpt.MOVE_TO:this.pathM(t,n);break;case Bpt.LINE_TO:this.pathL(t,n);break;case Bpt.HORIZ_LINE_TO:this.pathH(t,n);break;case Bpt.VERT_LINE_TO:this.pathV(t,n);break;case Bpt.CURVE_TO:this.pathC(t,n);break;case Bpt.SMOOTH_CURVE_TO:this.pathS(t,n);break;case Bpt.QUAD_TO:this.pathQ(t,n);break;case Bpt.SMOOTH_QUAD_TO:this.pathT(t,n);break;case Bpt.ARC:this.pathA(t,n);break;case Bpt.CLOSE_PATH:this.pathZ(t,n);break}return n}getBoundingBox(t){return this.path()}getMarkers(){var{pathParser:t}=this,e=t.getMarkerPoints(),n=t.getMarkerAngles(),i=e.map(((t,e)=>[t,n[e]]));return i}renderChildren(t){this.path(t),this.document.screen.mouse.checkPath(this,t);var e=this.getStyle("fill-rule");""!==t.fillStyle&&("inherit"!==e.getString("inherit")?t.fill(e.getString()):t.fill()),""!==t.strokeStyle&&("non-scaling-stroke"===this.getAttribute("vector-effect").getString()?(t.save(),t.setTransform(1,0,0,1,0,0),t.stroke(),t.restore()):t.stroke());var n=this.getMarkers();if(n){var i=n.length-1,r=this.getStyle("marker-start"),s=this.getStyle("marker-mid"),o=this.getStyle("marker-end");if(r.isUrlDefinition()){var a=r.getDefinition(),[l,c]=n[0];a.render(t,l,c)}if(s.isUrlDefinition())for(var u=s.getDefinition(),h=1;h<i;h++){var[A,d]=n[h];u.render(t,A,d)}if(o.isUrlDefinition()){var f=o.getDefinition(),[p,g]=n[i];f.render(t,p,g)}}}static pathM(t){var e=t.getAsCurrentPoint();return t.start=t.current,{point:e}}pathM(t,e){var{pathParser:n}=this,{point:i}=Ipt.pathM(n),{x:r,y:s}=i;n.addMarker(i),e.addPoint(r,s),t&&t.moveTo(r,s)}static pathL(t){var{current:e}=t,n=t.getAsCurrentPoint();return{current:e,point:n}}pathL(t,e){var{pathParser:n}=this,{current:i,point:r}=Ipt.pathL(n),{x:s,y:o}=r;n.addMarker(r,i),e.addPoint(s,o),t&&t.lineTo(s,o)}static pathH(t){var{current:e,command:n}=t,i=new ept((n.relative?e.x:0)+n.x,e.y);return t.current=i,{current:e,point:i}}pathH(t,e){var{pathParser:n}=this,{current:i,point:r}=Ipt.pathH(n),{x:s,y:o}=r;n.addMarker(r,i),e.addPoint(s,o),t&&t.lineTo(s,o)}static pathV(t){var{current:e,command:n}=t,i=new ept(e.x,(n.relative?e.y:0)+n.y);return t.current=i,{current:e,point:i}}pathV(t,e){var{pathParser:n}=this,{current:i,point:r}=Ipt.pathV(n),{x:s,y:o}=r;n.addMarker(r,i),e.addPoint(s,o),t&&t.lineTo(s,o)}static pathC(t){var{current:e}=t,n=t.getPoint("x1","y1"),i=t.getAsControlPoint("x2","y2"),r=t.getAsCurrentPoint();return{current:e,point:n,controlPoint:i,currentPoint:r}}pathC(t,e){var{pathParser:n}=this,{current:i,point:r,controlPoint:s,currentPoint:o}=Ipt.pathC(n);n.addMarker(o,s,r),e.addBezierCurve(i.x,i.y,r.x,r.y,s.x,s.y,o.x,o.y),t&&t.bezierCurveTo(r.x,r.y,s.x,s.y,o.x,o.y)}static pathS(t){var{current:e}=t,n=t.getReflectedControlPoint(),i=t.getAsControlPoint("x2","y2"),r=t.getAsCurrentPoint();return{current:e,point:n,controlPoint:i,currentPoint:r}}pathS(t,e){var{pathParser:n}=this,{current:i,point:r,controlPoint:s,currentPoint:o}=Ipt.pathS(n);n.addMarker(o,s,r),e.addBezierCurve(i.x,i.y,r.x,r.y,s.x,s.y,o.x,o.y),t&&t.bezierCurveTo(r.x,r.y,s.x,s.y,o.x,o.y)}static pathQ(t){var{current:e}=t,n=t.getAsControlPoint("x1","y1"),i=t.getAsCurrentPoint();return{current:e,controlPoint:n,currentPoint:i}}pathQ(t,e){var{pathParser:n}=this,{current:i,controlPoint:r,currentPoint:s}=Ipt.pathQ(n);n.addMarker(s,r,r),e.addQuadraticCurve(i.x,i.y,r.x,r.y,s.x,s.y),t&&t.quadraticCurveTo(r.x,r.y,s.x,s.y)}static pathT(t){var{current:e}=t,n=t.getReflectedControlPoint();t.control=n;var i=t.getAsCurrentPoint();return{current:e,controlPoint:n,currentPoint:i}}pathT(t,e){var{pathParser:n}=this,{current:i,controlPoint:r,currentPoint:s}=Ipt.pathT(n);n.addMarker(s,r,r),e.addQuadraticCurve(i.x,i.y,r.x,r.y,s.x,s.y),t&&t.quadraticCurveTo(r.x,r.y,s.x,s.y)}static pathA(t){var{current:e,command:n}=t,{rX:i,rY:r,xRot:s,lArcFlag:o,sweepFlag:a}=n,l=s*(Math.PI/180),c=t.getAsCurrentPoint(),u=new ept(Math.cos(l)*(e.x-c.x)/2+Math.sin(l)*(e.y-c.y)/2,-Math.sin(l)*(e.x-c.x)/2+Math.cos(l)*(e.y-c.y)/2),h=Math.pow(u.x,2)/Math.pow(i,2)+Math.pow(u.y,2)/Math.pow(r,2);h>1&&(i*=Math.sqrt(h),r*=Math.sqrt(h));var A=(o===a?-1:1)*Math.sqrt((Math.pow(i,2)*Math.pow(r,2)-Math.pow(i,2)*Math.pow(u.y,2)-Math.pow(r,2)*Math.pow(u.x,2))/(Math.pow(i,2)*Math.pow(u.y,2)+Math.pow(r,2)*Math.pow(u.x,2)));isNaN(A)&&(A=0);var d=new ept(A*i*u.y/r,A*-r*u.x/i),f=new ept((e.x+c.x)/2+Math.cos(l)*d.x-Math.sin(l)*d.y,(e.y+c.y)/2+Math.sin(l)*d.x+Math.cos(l)*d.y),p=Wft([1,0],[(u.x-d.x)/i,(u.y-d.y)/r]),g=[(u.x-d.x)/i,(u.y-d.y)/r],m=[(-u.x-d.x)/i,(-u.y-d.y)/r],v=Wft(g,m);return jft(g,m)<=-1&&(v=Math.PI),jft(g,m)>=1&&(v=0),{currentPoint:c,rX:i,rY:r,sweepFlag:a,xAxisRotation:l,centp:f,a1:p,ad:v}}pathA(t,e){var{pathParser:n}=this,{currentPoint:i,rX:r,rY:s,sweepFlag:o,xAxisRotation:a,centp:l,a1:c,ad:u}=Ipt.pathA(n),h=1-o?1:-1,A=c+h*(u/2),d=new ept(l.x+r*Math.cos(A),l.y+s*Math.sin(A));if(n.addMarkerAngle(d,A-h*Math.PI/2),n.addMarkerAngle(i,A-h*Math.PI),e.addPoint(i.x,i.y),t&&!isNaN(c)&&!isNaN(u)){var f=r>s?r:s,p=r>s?1:r/s,g=r>s?s/r:1;t.translate(l.x,l.y),t.rotate(a),t.scale(p,g),t.arc(0,0,f,c,c+u,Boolean(1-o)),t.scale(1/p,1/g),t.rotate(-a),t.translate(-l.x,-l.y)}}static pathZ(t){t.current=t.start}pathZ(t,e){Ipt.pathZ(this.pathParser),t&&e.x1!==e.x2&&e.y1!==e.y2&&t.closePath()}}class Fpt extends Ipt{constructor(t,e,n){super(t,e,n),this.type="glyph",this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber(),this.unicode=this.getAttribute("unicode").getString(),this.arabicForm=this.getAttribute("arabic-form").getString()}}class Lpt extends Tpt{constructor(t,e,n){super(t,e,new.target===Lpt||n),this.type="text",this.x=0,this.y=0,this.measureCache=-1}setContext(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];super.setContext(t,e);var n=this.getStyle("dominant-baseline").getTextBaseline()||this.getStyle("alignment-baseline").getTextBaseline();n&&(t.textBaseline=n)}initializeCoordinates(){this.x=0,this.y=0,this.leafTexts=[],this.textChunkStart=0,this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY}getBoundingBox(t){if("text"!==this.type)return this.getTElementBoundingBox(t);this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t);var e=null;return this.children.forEach(((n,i)=>{var r=this.getChildBoundingBox(t,this,this,i);e?e.addBoundingBox(r):e=r})),e}getFontSize(){var{document:t,parent:e}=this,n=Cpt.parse(t.ctx.font).fontSize,i=e.getStyle("font-size").getNumber(n);return i}getTElementBoundingBox(t){var e=this.getFontSize();return new Spt(this.x,this.y-e,this.x+this.measureText(t),this.y)}getGlyph(t,e,n){var i=e[n],r=null;if(t.isArabic){var s=e.length,o=e[n-1],a=e[n+1],l="isolated";if((0===n||" "===o)&&n<s-1&&" "!==a&&(l="terminal"),n>0&&" "!==o&&n<s-1&&" "!==a&&(l="medial"),n>0&&" "!==o&&(n===s-1||" "===a)&&(l="initial"),"undefined"!==typeof t.glyphs[i]){var c=t.glyphs[i];r=c instanceof Fpt?c:c[l]}}else r=t.glyphs[i];return r||(r=t.missingGlyph),r}getText(){return""}getTextFromNode(t){var e=t||this.node,n=Array.from(e.parentNode.childNodes),i=n.indexOf(e),r=n.length-1,s=Cft(e.textContent||"");return 0===i&&(s=Sft(s)),i===r&&(s=Bft(s)),s}renderChildren(t){if("text"===this.type){this.initializeCoordinates(),this.adjustChildCoordinatesRecursive(t),this.children.forEach(((e,n)=>{this.renderChild(t,this,this,n)}));var{mouse:e}=this.document.screen;e.isWorking()&&e.checkBoundingBox(this,this.getBoundingBox(t))}else this.renderTElementChildren(t)}renderTElementChildren(t){var{document:e,parent:n}=this,i=this.getText(),r=n.getStyle("font-family").getDefinition();if(r)for(var{unitsPerEm:s}=r.fontFace,o=Cpt.parse(e.ctx.font),a=n.getStyle("font-size").getNumber(o.fontSize),l=n.getStyle("font-style").getString(o.fontStyle),c=a/s,u=r.isRTL?i.split("").reverse().join(""):i,h=Tft(n.getAttribute("dx").getString()),A=u.length,d=0;d<A;d++){var f=this.getGlyph(r,u,d);t.translate(this.x,this.y),t.scale(c,-c);var p=t.lineWidth;t.lineWidth=t.lineWidth*s/a,"italic"===l&&t.transform(1,0,.4,1,0,0),f.render(t),"italic"===l&&t.transform(1,0,-.4,1,0,0),t.lineWidth=p,t.scale(1/c,-1/c),t.translate(-this.x,-this.y),this.x+=a*(f.horizAdvX||r.horizAdvX)/s,"undefined"===typeof h[d]||isNaN(h[d])||(this.x+=h[d])}else{var{x:g,y:m}=this;t.fillStyle&&t.fillText(i,g,m),t.strokeStyle&&t.strokeText(i,g,m)}}applyAnchoring(){if(!(this.textChunkStart>=this.leafTexts.length)){var t=this.leafTexts[this.textChunkStart],e=t.getStyle("text-anchor").getString("start"),n=!1,i=0;i="start"===e&&!n||"end"===e&&n?t.x-this.minX:"end"===e&&!n||"start"===e&&n?t.x-this.maxX:t.x-(this.minX+this.maxX)/2;for(var r=this.textChunkStart;r<this.leafTexts.length;r++)this.leafTexts[r].x+=i;this.minX=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.textChunkStart=this.leafTexts.length}}adjustChildCoordinatesRecursive(t){this.children.forEach(((e,n)=>{this.adjustChildCoordinatesRecursiveCore(t,this,this,n)})),this.applyAnchoring()}adjustChildCoordinatesRecursiveCore(t,e,n,i){var r=n.children[i];r.children.length>0?r.children.forEach(((n,i)=>{e.adjustChildCoordinatesRecursiveCore(t,e,r,i)})):this.adjustChildCoordinates(t,e,n,i)}adjustChildCoordinates(t,e,n,i){var r=n.children[i];if("function"!==typeof r.measureText)return r;t.save(),r.setContext(t,!0);var s=r.getAttribute("x"),o=r.getAttribute("y"),a=r.getAttribute("dx"),l=r.getAttribute("dy"),c=r.getStyle("font-family").getDefinition(),u=Boolean(c)&&c.isRTL;0===i&&(s.hasValue()||s.setValue(r.getInheritedAttribute("x")),o.hasValue()||o.setValue(r.getInheritedAttribute("y")),a.hasValue()||a.setValue(r.getInheritedAttribute("dx")),l.hasValue()||l.setValue(r.getInheritedAttribute("dy")));var h=r.measureText(t);return u&&(e.x-=h),s.hasValue()?(e.applyAnchoring(),r.x=s.getPixels("x"),a.hasValue()&&(r.x+=a.getPixels("x"))):(a.hasValue()&&(e.x+=a.getPixels("x")),r.x=e.x),e.x=r.x,u||(e.x+=h),o.hasValue()?(r.y=o.getPixels("y"),l.hasValue()&&(r.y+=l.getPixels("y"))):(l.hasValue()&&(e.y+=l.getPixels("y")),r.y=e.y),e.y=r.y,e.leafTexts.push(r),e.minX=Math.min(e.minX,r.x,r.x+h),e.maxX=Math.max(e.maxX,r.x,r.x+h),r.clearContext(t),t.restore(),r}getChildBoundingBox(t,e,n,i){var r=n.children[i];if("function"!==typeof r.getBoundingBox)return null;var s=r.getBoundingBox(t);return s?(r.children.forEach(((n,i)=>{var o=e.getChildBoundingBox(t,e,r,i);s.addBoundingBox(o)})),s):null}renderChild(t,e,n,i){var r=n.children[i];r.render(t),r.children.forEach(((n,i)=>{e.renderChild(t,e,r,i)}))}measureText(t){var{measureCache:e}=this;if(~e)return e;var n=this.getText(),i=this.measureTargetText(t,n);return this.measureCache=i,i}measureTargetText(t,e){if(!e.length)return 0;var{parent:n}=this,i=n.getStyle("font-family").getDefinition();if(i){for(var r=this.getFontSize(),s=i.isRTL?e.split("").reverse().join(""):e,o=Tft(n.getAttribute("dx").getString()),a=s.length,l=0,c=0;c<a;c++){var u=this.getGlyph(i,s,c);l+=(u.horizAdvX||i.horizAdvX)*r/i.fontFace.unitsPerEm,"undefined"===typeof o[c]||isNaN(o[c])||(l+=o[c])}return l}if(!t.measureText)return 10*e.length;t.save(),this.setContext(t,!0);var{width:h}=t.measureText(e);return this.clearContext(t),t.restore(),h}getInheritedAttribute(t){var e=this;while(e instanceof Lpt&&e.isFirstChild()){var n=e.parent.getAttribute(t);if(n.hasValue(!0))return n.getValue("0");e=e.parent}return null}}class Rpt extends Lpt{constructor(t,e,n){super(t,e,new.target===Rpt||n),this.type="tspan",this.text=this.children.length>0?"":this.getTextFromNode()}getText(){return this.text}}class Mpt extends Rpt{constructor(){super(...arguments),this.type="textNode"}}class Ppt extends Tpt{constructor(){super(...arguments),this.type="svg",this.root=!1}setContext(t){var e,{document:n}=this,{screen:i,window:r}=n,s=t.canvas;if(i.setDefaults(t),s.style&&"undefined"!==typeof t.font&&r&&"undefined"!==typeof r.getComputedStyle){t.font=r.getComputedStyle(s).getPropertyValue("font");var o=new Jft(n,"fontSize",Cpt.parse(t.font).fontSize);o.hasValue()&&(n.rootEmSize=o.getPixels("y"),n.emSize=n.rootEmSize)}this.getAttribute("x").hasValue()||this.getAttribute("x",!0).setValue(0),this.getAttribute("y").hasValue()||this.getAttribute("y",!0).setValue(0);var{width:a,height:l}=i.viewPort;this.getStyle("width").hasValue()||this.getStyle("width",!0).setValue("100%"),this.getStyle("height").hasValue()||this.getStyle("height",!0).setValue("100%"),this.getStyle("color").hasValue()||this.getStyle("color",!0).setValue("black");var c=this.getAttribute("refX"),u=this.getAttribute("refY"),h=this.getAttribute("viewBox"),A=h.hasValue()?Tft(h.getString()):null,d=!this.root&&"visible"!==this.getStyle("overflow").getValue("hidden"),f=0,p=0,g=0,m=0;A&&(f=A[0],p=A[1]),this.root||(a=this.getStyle("width").getPixels("x"),l=this.getStyle("height").getPixels("y"),"marker"===this.type&&(g=f,m=p,f=0,p=0)),i.viewPort.setCurrent(a,l),!this.node||this.parent&&"foreignObject"!==(null===(e=this.node.parentNode)||void 0===e?void 0:e.nodeName)||!this.getStyle("transform",!1,!0).hasValue()||this.getStyle("transform-origin",!1,!0).hasValue()||this.getStyle("transform-origin",!0,!0).setValue("50% 50%"),super.setContext(t),t.translate(this.getAttribute("x").getPixels("x"),this.getAttribute("y").getPixels("y")),A&&(a=A[2],l=A[3]),n.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:i.viewPort.width,desiredWidth:a,height:i.viewPort.height,desiredHeight:l,minX:f,minY:p,refX:c.getValue(),refY:u.getValue(),clip:d,clipX:g,clipY:m}),A&&(i.viewPort.removeCurrent(),i.viewPort.setCurrent(a,l))}clearContext(t){super.clearContext(t),this.document.screen.viewPort.removeCurrent()}resize(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=this.getAttribute("width",!0),r=this.getAttribute("height",!0),s=this.getAttribute("viewBox"),o=this.getAttribute("style"),a=i.getNumber(0),l=r.getNumber(0);if(n)if("string"===typeof n)this.getAttribute("preserveAspectRatio",!0).setValue(n);else{var c=this.getAttribute("preserveAspectRatio");c.hasValue()&&c.setValue(c.getString().replace(/^\s*(\S.*\S)\s*$/,"$1"))}if(i.setValue(t),r.setValue(e),s.hasValue()||s.setValue("0 0 ".concat(a||t," ").concat(l||e)),o.hasValue()){var u=this.getStyle("width"),h=this.getStyle("height");u.hasValue()&&u.setValue("".concat(t,"px")),h.hasValue()&&h.setValue("".concat(e,"px"))}}}class Npt extends Ipt{constructor(){super(...arguments),this.type="rect"}path(t){var e=this.getAttribute("x").getPixels("x"),n=this.getAttribute("y").getPixels("y"),i=this.getStyle("width",!1,!0).getPixels("x"),r=this.getStyle("height",!1,!0).getPixels("y"),s=this.getAttribute("rx"),o=this.getAttribute("ry"),a=s.getPixels("x"),l=o.getPixels("y");if(s.hasValue()&&!o.hasValue()&&(l=a),o.hasValue()&&!s.hasValue()&&(a=l),a=Math.min(a,i/2),l=Math.min(l,r/2),t){var c=(Math.sqrt(2)-1)/3*4;t.beginPath(),r>0&&i>0&&(t.moveTo(e+a,n),t.lineTo(e+i-a,n),t.bezierCurveTo(e+i-a+c*a,n,e+i,n+l-c*l,e+i,n+l),t.lineTo(e+i,n+r-l),t.bezierCurveTo(e+i,n+r-l+c*l,e+i-a+c*a,n+r,e+i-a,n+r),t.lineTo(e+a,n+r),t.bezierCurveTo(e+a-c*a,n+r,e,n+r-l+c*l,e,n+r-l),t.lineTo(e,n+l),t.bezierCurveTo(e,n+l-c*l,e+a-c*a,n,e+a,n),t.closePath())}return new Spt(e,n,e+i,n+r)}getMarkers(){return null}}class Opt extends Ipt{constructor(){super(...arguments),this.type="circle"}path(t){var e=this.getAttribute("cx").getPixels("x"),n=this.getAttribute("cy").getPixels("y"),i=this.getAttribute("r").getPixels();return t&&i>0&&(t.beginPath(),t.arc(e,n,i,0,2*Math.PI,!1),t.closePath()),new Spt(e-i,n-i,e+i,n+i)}getMarkers(){return null}}class kpt extends Ipt{constructor(){super(...arguments),this.type="ellipse"}path(t){var e=(Math.sqrt(2)-1)/3*4,n=this.getAttribute("rx").getPixels("x"),i=this.getAttribute("ry").getPixels("y"),r=this.getAttribute("cx").getPixels("x"),s=this.getAttribute("cy").getPixels("y");return t&&n>0&&i>0&&(t.beginPath(),t.moveTo(r+n,s),t.bezierCurveTo(r+n,s+e*i,r+e*n,s+i,r,s+i),t.bezierCurveTo(r-e*n,s+i,r-n,s+e*i,r-n,s),t.bezierCurveTo(r-n,s-e*i,r-e*n,s-i,r,s-i),t.bezierCurveTo(r+e*n,s-i,r+n,s-e*i,r+n,s),t.closePath()),new Spt(r-n,s-i,r+n,s+i)}getMarkers(){return null}}class Dpt extends Ipt{constructor(){super(...arguments),this.type="line"}getPoints(){return[new ept(this.getAttribute("x1").getPixels("x"),this.getAttribute("y1").getPixels("y")),new ept(this.getAttribute("x2").getPixels("x"),this.getAttribute("y2").getPixels("y"))]}path(t){var[{x:e,y:n},{x:i,y:r}]=this.getPoints();return t&&(t.beginPath(),t.moveTo(e,n),t.lineTo(i,r)),new Spt(e,n,i,r)}getMarkers(){var[t,e]=this.getPoints(),n=t.angleTo(e);return[[t,n],[e,n]]}}class Upt extends Ipt{constructor(t,e,n){super(t,e,n),this.type="polyline",this.points=[],this.points=ept.parsePath(this.getAttribute("points").getString())}path(t){var{points:e}=this,[{x:n,y:i}]=e,r=new Spt(n,i);return t&&(t.beginPath(),t.moveTo(n,i)),e.forEach((e=>{var{x:n,y:i}=e;r.addPoint(n,i),t&&t.lineTo(n,i)})),r}getMarkers(){var{points:t}=this,e=t.length-1,n=[];return t.forEach(((i,r)=>{r!==e&&n.push([i,i.angleTo(t[r+1])])})),n.length>0&&n.push([t[t.length-1],n[n.length-1][1]]),n}}class Qpt extends Upt{constructor(){super(...arguments),this.type="polygon"}path(t){var e=super.path(t),[{x:n,y:i}]=this.points;return t&&(t.lineTo(n,i),t.closePath()),e}}class Gpt extends ypt{constructor(){super(...arguments),this.type="pattern"}createPattern(t,e,n){var i=this.getStyle("width").getPixels("x",!0),r=this.getStyle("height").getPixels("y",!0),s=new Ppt(this.document,null);s.attributes.viewBox=new Jft(this.document,"viewBox",this.getAttribute("viewBox").getValue()),s.attributes.width=new Jft(this.document,"width","".concat(i,"px")),s.attributes.height=new Jft(this.document,"height","".concat(r,"px")),s.attributes.transform=new Jft(this.document,"transform",this.getAttribute("patternTransform").getValue()),s.children=this.children;var o=this.document.createCanvas(i,r),a=o.getContext("2d"),l=this.getAttribute("x"),c=this.getAttribute("y");l.hasValue()&&c.hasValue()&&a.translate(l.getPixels("x",!0),c.getPixels("y",!0)),n.hasValue()?this.styles["fill-opacity"]=n:Reflect.deleteProperty(this.styles,"fill-opacity");for(var u=-1;u<=1;u++)for(var h=-1;h<=1;h++)a.save(),s.attributes.x=new Jft(this.document,"x",u*o.width),s.attributes.y=new Jft(this.document,"y",h*o.height),s.render(a),a.restore();var A=t.createPattern(o,"repeat");return A}}class Hpt extends ypt{constructor(){super(...arguments),this.type="marker"}render(t,e,n){if(e){var{x:i,y:r}=e,s=this.getAttribute("orient").getString("auto"),o=this.getAttribute("markerUnits").getString("strokeWidth");t.translate(i,r),"auto"===s&&t.rotate(n),"strokeWidth"===o&&t.scale(t.lineWidth,t.lineWidth),t.save();var a=new Ppt(this.document,null);a.type=this.type,a.attributes.viewBox=new Jft(this.document,"viewBox",this.getAttribute("viewBox").getValue()),a.attributes.refX=new Jft(this.document,"refX",this.getAttribute("refX").getValue()),a.attributes.refY=new Jft(this.document,"refY",this.getAttribute("refY").getValue()),a.attributes.width=new Jft(this.document,"width",this.getAttribute("markerWidth").getValue()),a.attributes.height=new Jft(this.document,"height",this.getAttribute("markerHeight").getValue()),a.attributes.overflow=new Jft(this.document,"overflow",this.getAttribute("overflow").getValue()),a.attributes.fill=new Jft(this.document,"fill",this.getAttribute("fill").getColor("black")),a.attributes.stroke=new Jft(this.document,"stroke",this.getAttribute("stroke").getValue("none")),a.children=this.children,a.render(t),t.restore(),"strokeWidth"===o&&t.scale(1/t.lineWidth,1/t.lineWidth),"auto"===s&&t.rotate(-n),t.translate(-i,-r)}}}class Vpt extends ypt{constructor(){super(...arguments),this.type="defs"}render(){}}class jpt extends Tpt{constructor(){super(...arguments),this.type="g"}getBoundingBox(t){var e=new Spt;return this.children.forEach((n=>{e.addBoundingBox(n.getBoundingBox(t))})),e}}class Wpt extends ypt{constructor(t,e,n){super(t,e,n),this.attributesToInherit=["gradientUnits"],this.stops=[];var{stops:i,children:r}=this;r.forEach((t=>{"stop"===t.type&&i.push(t)}))}getGradientUnits(){return this.getAttribute("gradientUnits").getString("objectBoundingBox")}createGradient(t,e,n){var i=this;this.getHrefAttribute().hasValue()&&(i=this.getHrefAttribute().getDefinition(),this.inheritStopContainer(i));var{stops:r}=i,s=this.getGradient(t,e);if(!s)return this.addParentOpacity(n,r[r.length-1].color);if(r.forEach((t=>{s.addColorStop(t.offset,this.addParentOpacity(n,t.color))})),this.getAttribute("gradientTransform").hasValue()){var{document:o}=this,{MAX_VIRTUAL_PIXELS:a,viewPort:l}=o.screen,[c]=l.viewPorts,u=new Npt(o,null);u.attributes.x=new Jft(o,"x",-a/3),u.attributes.y=new Jft(o,"y",-a/3),u.attributes.width=new Jft(o,"width",a),u.attributes.height=new Jft(o,"height",a);var h=new jpt(o,null);h.attributes.transform=new Jft(o,"transform",this.getAttribute("gradientTransform").getValue()),h.children=[u];var A=new Ppt(o,null);A.attributes.x=new Jft(o,"x",0),A.attributes.y=new Jft(o,"y",0),A.attributes.width=new Jft(o,"width",c.width),A.attributes.height=new Jft(o,"height",c.height),A.children=[h];var d=o.createCanvas(c.width,c.height),f=d.getContext("2d");return f.fillStyle=s,A.render(f),f.createPattern(d,"no-repeat")}return s}inheritStopContainer(t){this.attributesToInherit.forEach((e=>{!this.getAttribute(e).hasValue()&&t.getAttribute(e).hasValue()&&this.getAttribute(e,!0).setValue(t.getAttribute(e).getValue())}))}addParentOpacity(t,e){if(t.hasValue()){var n=new Jft(this.document,"color",e);return n.addOpacity(t).getColor()}return e}}class zpt extends Wpt{constructor(t,e,n){super(t,e,n),this.type="linearGradient",this.attributesToInherit.push("x1","y1","x2","y2")}getGradient(t,e){var n="objectBoundingBox"===this.getGradientUnits(),i=n?e.getBoundingBox(t):null;if(n&&!i)return null;this.getAttribute("x1").hasValue()||this.getAttribute("y1").hasValue()||this.getAttribute("x2").hasValue()||this.getAttribute("y2").hasValue()||(this.getAttribute("x1",!0).setValue(0),this.getAttribute("y1",!0).setValue(0),this.getAttribute("x2",!0).setValue(1),this.getAttribute("y2",!0).setValue(0));var r=n?i.x+i.width*this.getAttribute("x1").getNumber():this.getAttribute("x1").getPixels("x"),s=n?i.y+i.height*this.getAttribute("y1").getNumber():this.getAttribute("y1").getPixels("y"),o=n?i.x+i.width*this.getAttribute("x2").getNumber():this.getAttribute("x2").getPixels("x"),a=n?i.y+i.height*this.getAttribute("y2").getNumber():this.getAttribute("y2").getPixels("y");return r===o&&s===a?null:t.createLinearGradient(r,s,o,a)}}class Kpt extends Wpt{constructor(t,e,n){super(t,e,n),this.type="radialGradient",this.attributesToInherit.push("cx","cy","r","fx","fy","fr")}getGradient(t,e){var n="objectBoundingBox"===this.getGradientUnits(),i=e.getBoundingBox(t);if(n&&!i)return null;this.getAttribute("cx").hasValue()||this.getAttribute("cx",!0).setValue("50%"),this.getAttribute("cy").hasValue()||this.getAttribute("cy",!0).setValue("50%"),this.getAttribute("r").hasValue()||this.getAttribute("r",!0).setValue("50%");var r=n?i.x+i.width*this.getAttribute("cx").getNumber():this.getAttribute("cx").getPixels("x"),s=n?i.y+i.height*this.getAttribute("cy").getNumber():this.getAttribute("cy").getPixels("y"),o=r,a=s;this.getAttribute("fx").hasValue()&&(o=n?i.x+i.width*this.getAttribute("fx").getNumber():this.getAttribute("fx").getPixels("x")),this.getAttribute("fy").hasValue()&&(a=n?i.y+i.height*this.getAttribute("fy").getNumber():this.getAttribute("fy").getPixels("y"));var l=n?(i.width+i.height)/2*this.getAttribute("r").getNumber():this.getAttribute("r").getPixels(),c=this.getAttribute("fr").getPixels();return t.createRadialGradient(o,a,c,r,s,l)}}class qpt extends ypt{constructor(t,e,n){super(t,e,n),this.type="stop";var i=Math.max(0,Math.min(1,this.getAttribute("offset").getNumber())),r=this.getStyle("stop-opacity"),s=this.getStyle("stop-color",!0);""===s.getString()&&s.setValue("#000"),r.hasValue()&&(s=s.addOpacity(r)),this.offset=i,this.color=s.getColor()}}class $pt extends ypt{constructor(t,e,n){super(t,e,n),this.type="animate",this.duration=0,this.initialValue=null,this.initialUnits="",this.removed=!1,this.frozen=!1,t.screen.animations.push(this),this.begin=this.getAttribute("begin").getMilliseconds(),this.maxDuration=this.begin+this.getAttribute("dur").getMilliseconds(),this.from=this.getAttribute("from"),this.to=this.getAttribute("to"),this.values=new Jft(t,"values",null);var i=this.getAttribute("values");i.hasValue()&&this.values.setValue(i.getString().split(";"))}getProperty(){var t=this.getAttribute("attributeType").getString(),e=this.getAttribute("attributeName").getString();return"CSS"===t?this.parent.getStyle(e,!0):this.parent.getAttribute(e,!0)}calcValue(){var{initialUnits:t}=this,{progress:e,from:n,to:i}=this.getProgress(),r=n.getNumber()+(i.getNumber()-n.getNumber())*e;return"%"===t&&(r*=100),"".concat(r).concat(t)}update(t){var{parent:e}=this,n=this.getProperty();if(this.initialValue||(this.initialValue=n.getString(),this.initialUnits=n.getUnits()),this.duration>this.maxDuration){var i=this.getAttribute("fill").getString("remove");if("indefinite"===this.getAttribute("repeatCount").getString()||"indefinite"===this.getAttribute("repeatDur").getString())this.duration=0;else if("freeze"!==i||this.frozen){if("remove"===i&&!this.removed)return this.removed=!0,n.setValue(e.animationFrozen?e.animationFrozenValue:this.initialValue),!0}else this.frozen=!0,e.animationFrozen=!0,e.animationFrozenValue=n.getString();return!1}this.duration+=t;var r=!1;if(this.begin<this.duration){var s=this.calcValue(),o=this.getAttribute("type");if(o.hasValue()){var a=o.getString();s="".concat(a,"(").concat(s,")")}n.setValue(s),r=!0}return r}getProgress(){var{document:t,values:e}=this,n={progress:(this.duration-this.begin)/(this.maxDuration-this.begin)};if(e.hasValue()){var i=n.progress*(e.getValue().length-1),r=Math.floor(i),s=Math.ceil(i);n.from=new Jft(t,"from",parseFloat(e.getValue()[r])),n.to=new Jft(t,"to",parseFloat(e.getValue()[s])),n.progress=(i-r)/(s-r)}else n.from=this.from,n.to=this.to;return n}}class Xpt extends $pt{constructor(){super(...arguments),this.type="animateColor"}calcValue(){var{progress:t,from:e,to:n}=this.getProgress(),i=new ldt(e.getColor()),r=new ldt(n.getColor());if(i.ok&&r.ok){var s=i.r+(r.r-i.r)*t,o=i.g+(r.g-i.g)*t,a=i.b+(r.b-i.b)*t;return"rgb(".concat(Math.floor(s),", ").concat(Math.floor(o),", ").concat(Math.floor(a),")")}return this.getAttribute("from").getColor()}}class Ypt extends $pt{constructor(){super(...arguments),this.type="animateTransform"}calcValue(){var{progress:t,from:e,to:n}=this.getProgress(),i=Tft(e.getString()),r=Tft(n.getString()),s=i.map(((e,n)=>{var i=r[n];return e+(i-e)*t})).join(" ");return s}}class Zpt extends ypt{constructor(t,e,n){super(t,e,n),this.type="font",this.glyphs={},this.horizAdvX=this.getAttribute("horiz-adv-x").getNumber();var{definitions:i}=t,{children:r}=this;for(var s of r)switch(s.type){case"font-face":this.fontFace=s;var o=s.getStyle("font-family");o.hasValue()&&(i[o.getString()]=this);break;case"missing-glyph":this.missingGlyph=s;break;case"glyph":var a=s;a.arabicForm?(this.isRTL=!0,this.isArabic=!0,"undefined"===typeof this.glyphs[a.unicode]&&(this.glyphs[a.unicode]={}),this.glyphs[a.unicode][a.arabicForm]=a):this.glyphs[a.unicode]=a;break}}render(){}}class Jpt extends ypt{constructor(t,e,n){super(t,e,n),this.type="font-face",this.ascent=this.getAttribute("ascent").getNumber(),this.descent=this.getAttribute("descent").getNumber(),this.unitsPerEm=this.getAttribute("units-per-em").getNumber()}}class tgt extends Ipt{constructor(){super(...arguments),this.type="missing-glyph",this.horizAdvX=0}}class egt extends Lpt{constructor(){super(...arguments),this.type="tref"}getText(){var t=this.getHrefAttribute().getDefinition();if(t){var e=t.children[0];if(e)return e.getText()}return""}}class ngt extends Lpt{constructor(t,e,n){super(t,e,n),this.type="a";var{childNodes:i}=e,r=i[0],s=i.length>0&&Array.from(i).every((t=>3===t.nodeType));this.hasText=s,this.text=s?this.getTextFromNode(r):""}getText(){return this.text}renderChildren(t){if(this.hasText){super.renderChildren(t);var{document:e,x:n,y:i}=this,{mouse:r}=e.screen,s=new Jft(e,"fontSize",Cpt.parse(e.ctx.font).fontSize);r.isWorking()&&r.checkBoundingBox(this,new Spt(n,i-s.getPixels("y"),n+this.measureText(t),i))}else if(this.children.length>0){var o=new jpt(this.document,null);o.children=this.children,o.parent=this,o.render(t)}}onClick(){var{window:t}=this.document;t&&t.open(this.getHrefAttribute().getString())}onMouseMove(){var t=this.document.ctx;t.canvas.style.cursor="pointer"}}function igt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function rgt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?igt(Object(n),!0).forEach((function(e){pht(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):igt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}class sgt extends Lpt{constructor(t,e,n){super(t,e,n),this.type="textPath",this.textWidth=0,this.textHeight=0,this.pathLength=-1,this.glyphInfo=null,this.letterSpacingCache=[],this.measuresCache=new Map([["",0]]);var i=this.getHrefAttribute().getDefinition();this.text=this.getTextFromNode(),this.dataArray=this.parsePathData(i)}getText(){return this.text}path(t){var{dataArray:e}=this;t&&t.beginPath(),e.forEach((e=>{var{type:n,points:i}=e;switch(n){case Bpt.LINE_TO:t&&t.lineTo(i[0],i[1]);break;case Bpt.MOVE_TO:t&&t.moveTo(i[0],i[1]);break;case Bpt.CURVE_TO:t&&t.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case Bpt.QUAD_TO:t&&t.quadraticCurveTo(i[0],i[1],i[2],i[3]);break;case Bpt.ARC:var[r,s,o,a,l,c,u,h]=i,A=o>a?o:a,d=o>a?1:o/a,f=o>a?a/o:1;t&&(t.translate(r,s),t.rotate(u),t.scale(d,f),t.arc(0,0,A,l,l+c,Boolean(1-h)),t.scale(1/d,1/f),t.rotate(-u),t.translate(-r,-s));break;case Bpt.CLOSE_PATH:t&&t.closePath();break}}))}renderChildren(t){this.setTextData(t),t.save();var e=this.parent.getStyle("text-decoration").getString(),n=this.getFontSize(),{glyphInfo:i}=this,r=t.fillStyle;"underline"===e&&t.beginPath(),i.forEach(((i,r)=>{var{p0:s,p1:o,rotation:a,text:l}=i;t.save(),t.translate(s.x,s.y),t.rotate(a),t.fillStyle&&t.fillText(l,0,0),t.strokeStyle&&t.strokeText(l,0,0),t.restore(),"underline"===e&&(0===r&&t.moveTo(s.x,s.y+n/8),t.lineTo(o.x,o.y+n/5))})),"underline"===e&&(t.lineWidth=n/20,t.strokeStyle=r,t.stroke(),t.closePath()),t.restore()}getLetterSpacingAt(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.letterSpacingCache[t]||0}findSegmentToFitChar(t,e,n,i,r,s,o,a,l){var c=s,u=this.measureText(t,a);" "===a&&"justify"===e&&n<i&&(u+=(i-n)/r),l>-1&&(c+=this.getLetterSpacingAt(l));var h=this.textHeight/20,A=this.getEquidistantPointOnPath(c,h,0),d=this.getEquidistantPointOnPath(c+u,h,0),f={p0:A,p1:d},p=A&&d?Math.atan2(d.y-A.y,d.x-A.x):0;if(o){var g=Math.cos(Math.PI/2+p)*o,m=Math.cos(-p)*o;f.p0=rgt(rgt({},A),{},{x:A.x+g,y:A.y+m}),f.p1=rgt(rgt({},d),{},{x:d.x+g,y:d.y+m})}return c+=u,{offset:c,segment:f,rotation:p}}measureText(t,e){var{measuresCache:n}=this,i=e||this.getText();if(n.has(i))return n.get(i);var r=this.measureTargetText(t,i);return n.set(i,r),r}setTextData(t){if(!this.glyphInfo){var e=this.getText(),n=e.split(""),i=e.split(" ").length-1,r=this.parent.getAttribute("dx").split().map((t=>t.getPixels("x"))),s=this.parent.getAttribute("dy").getPixels("y"),o=this.parent.getStyle("text-anchor").getString("start"),a=this.getStyle("letter-spacing"),l=this.parent.getStyle("letter-spacing"),c=0;a.hasValue()&&"inherit"!==a.getValue()?a.hasValue()&&"initial"!==a.getValue()&&"unset"!==a.getValue()&&(c=a.getPixels()):c=l.getPixels();var u=[],h=e.length;this.letterSpacingCache=u;for(var A=0;A<h;A++)u.push("undefined"!==typeof r[A]?r[A]:c);var d=u.reduce(((t,e,n)=>0===n?0:t+e||0),0),f=this.measureText(t),p=Math.max(f+d,0);this.textWidth=f,this.textHeight=this.getFontSize(),this.glyphInfo=[];var g=this.getPathLength(),m=this.getStyle("startOffset").getNumber(0)*g,v=0;"middle"!==o&&"center"!==o||(v=-p/2),"end"!==o&&"right"!==o||(v=-p),v+=m,n.forEach(((e,r)=>{var{offset:a,segment:l,rotation:c}=this.findSegmentToFitChar(t,o,p,g,i,v,s,e,r);v=a,l.p0&&l.p1&&this.glyphInfo.push({text:n[r],p0:l.p0,p1:l.p1,rotation:c})}))}}parsePathData(t){if(this.pathLength=-1,!t)return[];var e=[],{pathParser:n}=t;n.reset();while(!n.isEnd()){var{current:i}=n,r=i?i.x:0,s=i?i.y:0,o=n.next(),a=o.type,l=[];switch(o.type){case Bpt.MOVE_TO:this.pathM(n,l);break;case Bpt.LINE_TO:a=this.pathL(n,l);break;case Bpt.HORIZ_LINE_TO:a=this.pathH(n,l);break;case Bpt.VERT_LINE_TO:a=this.pathV(n,l);break;case Bpt.CURVE_TO:this.pathC(n,l);break;case Bpt.SMOOTH_CURVE_TO:a=this.pathS(n,l);break;case Bpt.QUAD_TO:this.pathQ(n,l);break;case Bpt.SMOOTH_QUAD_TO:a=this.pathT(n,l);break;case Bpt.ARC:l=this.pathA(n);break;case Bpt.CLOSE_PATH:Ipt.pathZ(n);break}o.type!==Bpt.CLOSE_PATH?e.push({type:a,points:l,start:{x:r,y:s},pathLength:this.calcLength(r,s,a,l)}):e.push({type:Bpt.CLOSE_PATH,points:[],pathLength:0})}return e}pathM(t,e){var{x:n,y:i}=Ipt.pathM(t).point;e.push(n,i)}pathL(t,e){var{x:n,y:i}=Ipt.pathL(t).point;return e.push(n,i),Bpt.LINE_TO}pathH(t,e){var{x:n,y:i}=Ipt.pathH(t).point;return e.push(n,i),Bpt.LINE_TO}pathV(t,e){var{x:n,y:i}=Ipt.pathV(t).point;return e.push(n,i),Bpt.LINE_TO}pathC(t,e){var{point:n,controlPoint:i,currentPoint:r}=Ipt.pathC(t);e.push(n.x,n.y,i.x,i.y,r.x,r.y)}pathS(t,e){var{point:n,controlPoint:i,currentPoint:r}=Ipt.pathS(t);return e.push(n.x,n.y,i.x,i.y,r.x,r.y),Bpt.CURVE_TO}pathQ(t,e){var{controlPoint:n,currentPoint:i}=Ipt.pathQ(t);e.push(n.x,n.y,i.x,i.y)}pathT(t,e){var{controlPoint:n,currentPoint:i}=Ipt.pathT(t);return e.push(n.x,n.y,i.x,i.y),Bpt.QUAD_TO}pathA(t){var{rX:e,rY:n,sweepFlag:i,xAxisRotation:r,centp:s,a1:o,ad:a}=Ipt.pathA(t);return 0===i&&a>0&&(a-=2*Math.PI),1===i&&a<0&&(a+=2*Math.PI),[s.x,s.y,e,n,o,a,r,i]}calcLength(t,e,n,i){var r=0,s=null,o=null,a=0;switch(n){case Bpt.LINE_TO:return this.getLineLength(t,e,i[0],i[1]);case Bpt.CURVE_TO:for(r=0,s=this.getPointOnCubicBezier(0,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),a=.01;a<=1;a+=.01)o=this.getPointOnCubicBezier(a,t,e,i[0],i[1],i[2],i[3],i[4],i[5]),r+=this.getLineLength(s.x,s.y,o.x,o.y),s=o;return r;case Bpt.QUAD_TO:for(r=0,s=this.getPointOnQuadraticBezier(0,t,e,i[0],i[1],i[2],i[3]),a=.01;a<=1;a+=.01)o=this.getPointOnQuadraticBezier(a,t,e,i[0],i[1],i[2],i[3]),r+=this.getLineLength(s.x,s.y,o.x,o.y),s=o;return r;case Bpt.ARC:r=0;var l=i[4],c=i[5],u=i[4]+c,h=Math.PI/180;if(Math.abs(l-u)<h&&(h=Math.abs(l-u)),s=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],l,0),c<0)for(a=l-h;a>u;a-=h)o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),r+=this.getLineLength(s.x,s.y,o.x,o.y),s=o;else for(a=l+h;a<u;a+=h)o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],a,0),r+=this.getLineLength(s.x,s.y,o.x,o.y),s=o;return o=this.getPointOnEllipticalArc(i[0],i[1],i[2],i[3],u,0),r+=this.getLineLength(s.x,s.y,o.x,o.y),r}return 0}getPointOnLine(t,e,n,i,r){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:n,a=(r-n)/(i-e+Hft),l=Math.sqrt(t*t/(1+a*a));i<e&&(l*=-1);var c=a*l,u=null;if(i===e)u={x:s,y:o+c};else if((o-n)/(s-e+Hft)===a)u={x:s+l,y:o+c};else{var h=0,A=0,d=this.getLineLength(e,n,i,r);if(d<Hft)return null;var f=(s-e)*(i-e)+(o-n)*(r-n);f/=d*d,h=e+f*(i-e),A=n+f*(r-n);var p=this.getLineLength(s,o,h,A),g=Math.sqrt(t*t-p*p);l=Math.sqrt(g*g/(1+a*a)),i<e&&(l*=-1),c=a*l,u={x:h+l,y:A+c}}return u}getPointOnPath(t){var e=this.getPathLength(),n=0,i=null;if(t<-5e-5||t-5e-5>e)return null;var{dataArray:r}=this;for(var s of r){if(!s||!(s.pathLength<5e-5||n+s.pathLength+5e-5<t)){var o=t-n,a=0;switch(s.type){case Bpt.LINE_TO:i=this.getPointOnLine(o,s.start.x,s.start.y,s.points[0],s.points[1],s.start.x,s.start.y);break;case Bpt.ARC:var l=s.points[4],c=s.points[5],u=s.points[4]+c;if(a=l+o/s.pathLength*c,c<0&&a<u||c>=0&&a>u)break;i=this.getPointOnEllipticalArc(s.points[0],s.points[1],s.points[2],s.points[3],a,s.points[6]);break;case Bpt.CURVE_TO:a=o/s.pathLength,a>1&&(a=1),i=this.getPointOnCubicBezier(a,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3],s.points[4],s.points[5]);break;case Bpt.QUAD_TO:a=o/s.pathLength,a>1&&(a=1),i=this.getPointOnQuadraticBezier(a,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3]);break}if(i)return i;break}n+=s.pathLength}return null}getLineLength(t,e,n,i){return Math.sqrt((n-t)*(n-t)+(i-e)*(i-e))}getPathLength(){return-1===this.pathLength&&(this.pathLength=this.dataArray.reduce(((t,e)=>e.pathLength>0?t+e.pathLength:t),0)),this.pathLength}getPointOnCubicBezier(t,e,n,i,r,s,o,a,l){var c=a*zft(t)+s*Kft(t)+i*qft(t)+e*$ft(t),u=l*zft(t)+o*Kft(t)+r*qft(t)+n*$ft(t);return{x:c,y:u}}getPointOnQuadraticBezier(t,e,n,i,r,s,o){var a=s*Xft(t)+i*Yft(t)+e*Zft(t),l=o*Xft(t)+r*Yft(t)+n*Zft(t);return{x:a,y:l}}getPointOnEllipticalArc(t,e,n,i,r,s){var o=Math.cos(s),a=Math.sin(s),l={x:n*Math.cos(r),y:i*Math.sin(r)};return{x:t+(l.x*o-l.y*a),y:e+(l.x*a+l.y*o)}}buildEquidistantCache(t,e){var n=this.getPathLength(),i=e||.25,r=t||n/100;if(!this.equidistantCache||this.equidistantCache.step!==r||this.equidistantCache.precision!==i){this.equidistantCache={step:r,precision:i,points:[]};for(var s=0,o=0;o<=n;o+=i){var a=this.getPointOnPath(o),l=this.getPointOnPath(o+i);a&&l&&(s+=this.getLineLength(a.x,a.y,l.x,l.y),s>=r&&(this.equidistantCache.points.push({x:a.x,y:a.y,distance:o}),s-=r))}}}getEquidistantPointOnPath(t,e,n){if(this.buildEquidistantCache(e,n),t<0||t-this.getPathLength()>5e-5)return null;var i=Math.round(t/this.getPathLength()*(this.equidistantCache.points.length-1));return this.equidistantCache.points[i]||null}}var ogt=/^\s*data:(([^/,;]+\/[^/,;]+)(?:;([^,;=]+=[^,;=]+))?)?(?:;(base64))?,(.*)$/i;class agt extends Tpt{constructor(t,e,n){super(t,e,n),this.type="image",this.loaded=!1;var i=this.getHrefAttribute().getString();if(i){var r=i.endsWith(".svg")||/^\s*data:image\/svg\+xml/i.test(i);t.images.push(this),r?this.loadSvg(i):this.loadImage(i),this.isSvg=r}}loadImage(t){var e=this;return _ot((function*(){try{var n=yield e.document.createImage(t);e.image=n}catch(i){console.error('Error while loading image "'.concat(t,'":'),i)}e.loaded=!0}))()}loadSvg(t){var e=this;return _ot((function*(){var n=ogt.exec(t);if(n){var i=n[5];"base64"===n[4]?e.image=atob(i):e.image=decodeURIComponent(i)}else try{var r=yield e.document.fetch(t),s=yield r.text();e.image=s}catch(o){console.error('Error while loading image "'.concat(t,'":'),o)}e.loaded=!0}))()}renderChildren(t){var{document:e,image:n,loaded:i}=this,r=this.getAttribute("x").getPixels("x"),s=this.getAttribute("y").getPixels("y"),o=this.getStyle("width").getPixels("x"),a=this.getStyle("height").getPixels("y");if(i&&n&&o&&a){if(t.save(),t.translate(r,s),this.isSvg){var l=e.canvg.forkString(t,this.image,{ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0,ignoreClear:!0,offsetX:0,offsetY:0,scaleWidth:o,scaleHeight:a});l.document.documentElement.parent=this,l.render()}else{var c=this.image;e.setViewBox({ctx:t,aspectRatio:this.getAttribute("preserveAspectRatio").getString(),width:o,desiredWidth:c.width,height:a,desiredHeight:c.height}),this.loaded&&("undefined"===typeof c.complete||c.complete)&&t.drawImage(c,0,0)}t.restore()}}getBoundingBox(){var t=this.getAttribute("x").getPixels("x"),e=this.getAttribute("y").getPixels("y"),n=this.getStyle("width").getPixels("x"),i=this.getStyle("height").getPixels("y");return new Spt(t,e,t+n,e+i)}}class lgt extends Tpt{constructor(){super(...arguments),this.type="symbol"}render(t){}}class cgt{constructor(t){this.document=t,this.loaded=!1,t.fonts.push(this)}load(t,e){var n=this;return _ot((function*(){try{var{document:i}=n,r=yield i.canvg.parser.load(e),s=r.getElementsByTagName("font");Array.from(s).forEach((e=>{var n=i.createElement(e);i.definitions[t]=n}))}catch(o){console.error('Error while loading font "'.concat(e,'":'),o)}n.loaded=!0}))()}}class ugt extends ypt{constructor(t,e,n){super(t,e,n),this.type="style";var i=Cft(Array.from(e.childNodes).map((t=>t.textContent)).join("").replace(/(\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\/)|(^[\s]*\/\/.*)/gm,"").replace(/@import.*;/g,"")),r=i.split("}");r.forEach((e=>{var n=e.trim();if(n){var i=n.split("{"),r=i[0].split(","),s=i[1].split(";");r.forEach((e=>{var n=e.trim();if(n){var i=t.styles[n]||{};if(s.forEach((e=>{var n=e.indexOf(":"),r=e.substr(0,n).trim(),s=e.substr(n+1,e.length-n).trim();r&&s&&(i[r]=new Jft(t,r,s))})),t.styles[n]=i,t.stylesSpecificity[n]=Gft(n),"@font-face"===n){var r=i["font-family"].getString().replace(/"|'/g,""),o=i.src.getString().split(",");o.forEach((e=>{if(e.indexOf('format("svg")')>0){var n=Lft(e);n&&new cgt(t).load(r,n)}}))}}}))}}))}}ugt.parseExternalUrl=Lft;class hgt extends Tpt{constructor(){super(...arguments),this.type="use"}setContext(t){super.setContext(t);var e=this.getAttribute("x"),n=this.getAttribute("y");e.hasValue()&&t.translate(e.getPixels("x"),0),n.hasValue()&&t.translate(0,n.getPixels("y"))}path(t){var{element:e}=this;e&&e.path(t)}renderChildren(t){var{document:e,element:n}=this;if(n){var i=n;if("symbol"===n.type&&(i=new Ppt(e,null),i.attributes.viewBox=new Jft(e,"viewBox",n.getAttribute("viewBox").getString()),i.attributes.preserveAspectRatio=new Jft(e,"preserveAspectRatio",n.getAttribute("preserveAspectRatio").getString()),i.attributes.overflow=new Jft(e,"overflow",n.getAttribute("overflow").getString()),i.children=n.children,n.styles.opacity=new Jft(e,"opacity",this.calculateOpacity())),"svg"===i.type){var r=this.getStyle("width",!1,!0),s=this.getStyle("height",!1,!0);r.hasValue()&&(i.attributes.width=new Jft(e,"width",r.getString())),s.hasValue()&&(i.attributes.height=new Jft(e,"height",s.getString()))}var o=i.parent;i.parent=this,i.render(t),i.parent=o}}getBoundingBox(t){var{element:e}=this;return e?e.getBoundingBox(t):null}elementTransform(){var{document:t,element:e}=this;return vpt.fromElement(t,e)}get element(){return this.cachedElement||(this.cachedElement=this.getHrefAttribute().getDefinition()),this.cachedElement}}function Agt(t,e,n,i,r,s){return t[n*i*4+4*e+s]}function dgt(t,e,n,i,r,s,o){t[n*i*4+4*e+s]=o}function fgt(t,e,n){var i=t[e];return i*n}function pgt(t,e,n,i){return e+Math.cos(t)*n+Math.sin(t)*i}class ggt extends ypt{constructor(t,e,n){super(t,e,n),this.type="feColorMatrix";var i=Tft(this.getAttribute("values").getString());switch(this.getAttribute("type").getString("matrix")){case"saturate":var r=i[0];i=[.213+.787*r,.715-.715*r,.072-.072*r,0,0,.213-.213*r,.715+.285*r,.072-.072*r,0,0,.213-.213*r,.715-.715*r,.072+.928*r,0,0,0,0,0,1,0,0,0,0,0,1];break;case"hueRotate":var s=i[0]*Math.PI/180;i=[pgt(s,.213,.787,-.213),pgt(s,.715,-.715,-.715),pgt(s,.072,-.072,.928),0,0,pgt(s,.213,-.213,.143),pgt(s,.715,.285,.14),pgt(s,.072,-.072,-.283),0,0,pgt(s,.213,-.213,-.787),pgt(s,.715,-.715,.715),pgt(s,.072,.928,.072),0,0,0,0,0,1,0,0,0,0,0,1];break;case"luminanceToAlpha":i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,.2125,.7154,.0721,0,0,0,0,0,0,1];break}this.matrix=i,this.includeOpacity=this.getAttribute("includeOpacity").hasValue()}apply(t,e,n,i,r){for(var{includeOpacity:s,matrix:o}=this,a=t.getImageData(0,0,i,r),l=0;l<r;l++)for(var c=0;c<i;c++){var u=Agt(a.data,c,l,i,r,0),h=Agt(a.data,c,l,i,r,1),A=Agt(a.data,c,l,i,r,2),d=Agt(a.data,c,l,i,r,3),f=fgt(o,0,u)+fgt(o,1,h)+fgt(o,2,A)+fgt(o,3,d)+fgt(o,4,1),p=fgt(o,5,u)+fgt(o,6,h)+fgt(o,7,A)+fgt(o,8,d)+fgt(o,9,1),g=fgt(o,10,u)+fgt(o,11,h)+fgt(o,12,A)+fgt(o,13,d)+fgt(o,14,1),m=fgt(o,15,u)+fgt(o,16,h)+fgt(o,17,A)+fgt(o,18,d)+fgt(o,19,1);s&&(f=0,p=0,g=0,m*=d/255),dgt(a.data,c,l,i,r,0,f),dgt(a.data,c,l,i,r,1,p),dgt(a.data,c,l,i,r,2,g),dgt(a.data,c,l,i,r,3,m)}t.clearRect(0,0,i,r),t.putImageData(a,0,0)}}class mgt extends ypt{constructor(){super(...arguments),this.type="mask"}apply(t,e){var{document:n}=this,i=this.getAttribute("x").getPixels("x"),r=this.getAttribute("y").getPixels("y"),s=this.getStyle("width").getPixels("x"),o=this.getStyle("height").getPixels("y");if(!s&&!o){var a=new Spt;this.children.forEach((e=>{a.addBoundingBox(e.getBoundingBox(t))})),i=Math.floor(a.x1),r=Math.floor(a.y1),s=Math.floor(a.width),o=Math.floor(a.height)}var l=this.removeStyles(e,mgt.ignoreStyles),c=n.createCanvas(i+s,r+o),u=c.getContext("2d");n.screen.setDefaults(u),this.renderChildren(u),new ggt(n,{nodeType:1,childNodes:[],attributes:[{nodeName:"type",value:"luminanceToAlpha"},{nodeName:"includeOpacity",value:"true"}]}).apply(u,0,0,i+s,r+o);var h=n.createCanvas(i+s,r+o),A=h.getContext("2d");n.screen.setDefaults(A),e.render(A),A.globalCompositeOperation="destination-in",A.fillStyle=u.createPattern(c,"no-repeat"),A.fillRect(0,0,i+s,r+o),t.fillStyle=A.createPattern(h,"no-repeat"),t.fillRect(0,0,i+s,r+o),this.restoreStyles(e,l)}render(t){}}mgt.ignoreStyles=["mask","transform","clip-path"];var vgt=()=>{};class ygt extends ypt{constructor(){super(...arguments),this.type="clipPath"}apply(t){var{document:e}=this,n=Reflect.getPrototypeOf(t),{beginPath:i,closePath:r}=t;n&&(n.beginPath=vgt,n.closePath=vgt),Reflect.apply(i,t,[]),this.children.forEach((i=>{if("undefined"!==typeof i.path){var s="undefined"!==typeof i.elementTransform?i.elementTransform():null;s||(s=vpt.fromElement(e,i)),s&&s.apply(t),i.path(t),n&&(n.closePath=r),s&&s.unapply(t)}})),Reflect.apply(r,t,[]),t.clip(),n&&(n.beginPath=i,n.closePath=r)}render(t){}}class wgt extends ypt{constructor(){super(...arguments),this.type="filter"}apply(t,e){var{document:n,children:i}=this,r=e.getBoundingBox(t);if(r){var s=0,o=0;i.forEach((t=>{var e=t.extraFilterDistance||0;s=Math.max(s,e),o=Math.max(o,e)}));var a=Math.floor(r.width),l=Math.floor(r.height),c=a+2*s,u=l+2*o;if(!(c<1||u<1)){var h=Math.floor(r.x),A=Math.floor(r.y),d=this.removeStyles(e,wgt.ignoreStyles),f=n.createCanvas(c,u),p=f.getContext("2d");n.screen.setDefaults(p),p.translate(-h+s,-A+o),e.render(p),i.forEach((t=>{"function"===typeof t.apply&&t.apply(p,0,0,c,u)})),t.drawImage(f,0,0,c,u,h-s,A-o,c,u),this.restoreStyles(e,d)}}}render(t){}}wgt.ignoreStyles=["filter","transform","clip-path"];class _gt extends ypt{constructor(t,e,n){super(t,e,n),this.type="feDropShadow",this.addStylesFromStyleDefinition()}apply(t,e,n,i,r){}}class bgt extends ypt{constructor(){super(...arguments),this.type="feMorphology"}apply(t,e,n,i,r){}}class xgt extends ypt{constructor(){super(...arguments),this.type="feComposite"}apply(t,e,n,i,r){}}class Egt extends ypt{constructor(t,e,n){super(t,e,n),this.type="feGaussianBlur",this.blurRadius=Math.floor(this.getAttribute("stdDeviation").getNumber()),this.extraFilterDistance=this.blurRadius}apply(t,e,n,i,r){var{document:s,blurRadius:o}=this,a=s.window?s.window.document.body:null,l=t.canvas;l.id=s.getUniqueId(),a&&(l.style.display="none",a.appendChild(l)),yft(l,e,n,i,r,o),a&&a.removeChild(l)}}class Cgt extends ypt{constructor(){super(...arguments),this.type="title"}}class Sgt extends ypt{constructor(){super(...arguments),this.type="desc"}}var Bgt={svg:Ppt,rect:Npt,circle:Opt,ellipse:kpt,line:Dpt,polyline:Upt,polygon:Qpt,path:Ipt,pattern:Gpt,marker:Hpt,defs:Vpt,linearGradient:zpt,radialGradient:Kpt,stop:qpt,animate:$pt,animateColor:Xpt,animateTransform:Ypt,font:Zpt,"font-face":Jpt,"missing-glyph":tgt,glyph:Fpt,text:Lpt,tspan:Rpt,tref:egt,a:ngt,textPath:sgt,image:agt,g:jpt,symbol:lgt,style:ugt,use:hgt,mask:mgt,clipPath:ygt,filter:wgt,feDropShadow:_gt,feMorphology:bgt,feComposite:xgt,feColorMatrix:ggt,feGaussianBlur:Egt,title:Cgt,desc:Sgt};function Tgt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Igt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tgt(Object(n),!0).forEach((function(e){pht(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tgt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Fgt(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}function Lgt(t){return Rgt.apply(this,arguments)}function Rgt(){return Rgt=_ot((function*(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=document.createElement("img");return e&&(n.crossOrigin="Anonymous"),new Promise(((e,i)=>{n.onload=()=>{e(n)},n.onerror=(t,e,n,r,s)=>{i(s)},n.src=t}))})),Rgt.apply(this,arguments)}class Mgt{constructor(t){var{rootEmSize:e=12,emSize:n=12,createCanvas:i=Mgt.createCanvas,createImage:r=Mgt.createImage,anonymousCrossOrigin:s}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.canvg=t,this.definitions={},this.styles={},this.stylesSpecificity={},this.images=[],this.fonts=[],this.emSizeStack=[],this.uniqueId=0,this.screen=t.screen,this.rootEmSize=e,this.emSize=n,this.createCanvas=i,this.createImage=this.bindCreateImage(r,s),this.screen.wait(this.isImagesLoaded.bind(this)),this.screen.wait(this.isFontsLoaded.bind(this))}bindCreateImage(t,e){return"boolean"===typeof e?(n,i)=>t(n,"boolean"===typeof i?i:e):t}get window(){return this.screen.window}get fetch(){return this.screen.fetch}get ctx(){return this.screen.ctx}get emSize(){var{emSizeStack:t}=this;return t[t.length-1]}set emSize(t){var{emSizeStack:e}=this;e.push(t)}popEmSize(){var{emSizeStack:t}=this;t.pop()}getUniqueId(){return"canvg".concat(++this.uniqueId)}isImagesLoaded(){return this.images.every((t=>t.loaded))}isFontsLoaded(){return this.fonts.every((t=>t.loaded))}createDocumentElement(t){var e=this.createElement(t.documentElement);return e.root=!0,e.addStylesFromStyleDefinition(),this.documentElement=e,e}createElement(t){var e=t.nodeName.replace(/^[^:]+:/,""),n=Mgt.elementTypes[e];return"undefined"!==typeof n?new n(this,t):new wpt(this,t)}createTextNode(t){return new Mpt(this,t)}setViewBox(t){this.screen.setViewBox(Igt({document:this},t))}}function Pgt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ngt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Pgt(Object(n),!0).forEach((function(e){pht(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Pgt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Mgt.createCanvas=Fgt,Mgt.createImage=Lgt,Mgt.elementTypes=Bgt;class Ogt{constructor(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.parser=new lpt(n),this.screen=new spt(t,n),this.options=n;var i=new Mgt(this,n),r=i.createDocumentElement(e);this.document=i,this.documentElement=r}static from(t,e){var n=arguments;return _ot((function*(){var i=n.length>2&&void 0!==n[2]?n[2]:{},r=new lpt(i),s=yield r.parse(e);return new Ogt(t,s,i)}))()}static fromString(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=new lpt(n),r=i.parseFromString(e);return new Ogt(t,r,n)}fork(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ogt.from(t,e,Ngt(Ngt({},this.options),n))}forkString(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Ogt.fromString(t,e,Ngt(Ngt({},this.options),n))}ready(){return this.screen.ready()}isReady(){return this.screen.isReady()}render(){var t=arguments,e=this;return _ot((function*(){var n=t.length>0&&void 0!==t[0]?t[0]:{};e.start(Ngt({enableRedraw:!0,ignoreAnimation:!0,ignoreMouse:!0},n)),yield e.ready(),e.stop()}))()}start(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{documentElement:e,screen:n,options:i}=this;n.start(e,Ngt(Ngt({enableRedraw:!0},i),t))}stop(){this.screen.stop()}resize(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.documentElement.resize(t,e,n)}}const kgt=Object.freeze(Object.defineProperty({__proto__:null,AElement:ngt,AnimateColorElement:Xpt,AnimateElement:$pt,AnimateTransformElement:Ypt,BoundingBox:Spt,CB1:zft,CB2:Kft,CB3:qft,CB4:$ft,Canvg:Ogt,CircleElement:Opt,ClipPathElement:ygt,DefsElement:Vpt,DescElement:Sgt,Document:Mgt,Element:ypt,EllipseElement:kpt,FeColorMatrixElement:ggt,FeCompositeElement:xgt,FeDropShadowElement:_gt,FeGaussianBlurElement:Egt,FeMorphologyElement:bgt,FilterElement:wgt,Font:Cpt,FontElement:Zpt,FontFaceElement:Jpt,GElement:jpt,GlyphElement:Fpt,GradientElement:Wpt,ImageElement:agt,LineElement:Dpt,LinearGradientElement:zpt,MarkerElement:Hpt,MaskElement:mgt,Matrix:Apt,MissingGlyphElement:tgt,Mouse:npt,PSEUDO_ZERO:Hft,Parser:lpt,PathElement:Ipt,PathParser:Bpt,PatternElement:Gpt,Point:ept,PolygonElement:Qpt,PolylineElement:Upt,Property:Jft,QB1:Xft,QB2:Yft,QB3:Zft,RadialGradientElement:Kpt,RectElement:Npt,RenderedElement:Tpt,Rotate:upt,SVGElement:Ppt,SVGFontLoader:cgt,Scale:hpt,Screen:spt,Skew:dpt,SkewX:fpt,SkewY:ppt,StopElement:qpt,StyleElement:ugt,SymbolElement:lgt,TRefElement:egt,TSpanElement:Rpt,TextElement:Lpt,TextPathElement:sgt,TitleElement:Cgt,Transform:vpt,Translate:cpt,UnknownElement:wpt,UseElement:hgt,ViewPort:tpt,compressSpaces:Cft,default:Ogt,getSelectorSpecificity:Gft,normalizeAttributeName:Fft,normalizeColor:Rft,parseExternalUrl:Lft,presets:Eft,toNumbers:Tft,trimLeft:Sft,trimRight:Bft,vectorMagnitude:Vft,vectorsAngle:Wft,vectorsRatio:jft},Symbol.toStringTag,{value:"Module"}))}}]);
//# sourceMappingURL=chunk-vendors.19407705.js.map